{"items":[{"tags":["java","c++","performance","optimization","branch-prediction"],"comments":[{"owner":{"reputation":1295,"user_id":1300177,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG","display_name":"screwnut","link":"https://stackoverflow.com/users/1300177/screwnut"},"edited":false,"score":51,"creation_date":1525389149,"post_id":11227809,"comment_id":87347917,"content_license":"CC BY-SA 4.0","body":"For the record, your data need not be sorted, only <a href=\"https://en.cppreference.com/w/cpp/algorithm/partition\" rel=\"nofollow noreferrer\">partitioned</a> which is a much faster operation."},{"owner":{"reputation":270,"user_id":5649936,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0603f8b9920243e03e06c3e15eb77a8a?s=128&d=identicon&r=PG&f=1","display_name":"Å imon Hrabec","link":"https://stackoverflow.com/users/5649936/%c5%a0imon-hrabec"},"edited":false,"score":25,"creation_date":1526042708,"post_id":11227809,"comment_id":87601479,"content_license":"CC BY-SA 4.0","body":"Another observation is that you don&#39;t need to sort the array, but you just need to partition it with the value 128. Sorting is n*log(n), whereas partitioning is just linear. Basically it is just one run of the quick sort partitioning step with the pivot chosen to be 128. Unfortunately in C++ there is just nth_element function, which partition by position, not by value."},{"owner":{"reputation":7114,"user_id":58668,"user_type":"registered","accept_rate":39,"profile_image":"https://www.gravatar.com/avatar/553fdb376e001fa69adb6b8046fd6a14?s=128&d=identicon&r=PG","display_name":"Jonas K&#246;lker","link":"https://stackoverflow.com/users/58668/jonas-k%c3%b6lker"},"reply_to_user":{"reputation":1295,"user_id":1300177,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG","display_name":"screwnut","link":"https://stackoverflow.com/users/1300177/screwnut"},"edited":false,"score":3,"creation_date":1601886376,"post_id":11227809,"comment_id":113534273,"content_license":"CC BY-SA 4.0","body":"@screwnut here&#39;s an experiment which would show that partitioning is sufficient: create an unsorted but partitioned array with otherwise random contents. Measure time. Sort it. Measure time again. The two measurements should be basically indistinguishable. (Experiment 2: create a random array. Measure time. Partition it. Measure time again. You should see the same speed-up as sorting. You could roll the two experiments into one.)"},{"owner":{"reputation":336,"user_id":11041430,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ba8e6b52b3f40b3c55d1730c199c0f19?s=128&d=identicon&r=PG&f=1","display_name":"D. Sikilai","link":"https://stackoverflow.com/users/11041430/d-sikilai"},"edited":false,"score":2,"creation_date":1606488099,"post_id":11227809,"comment_id":114983452,"content_license":"CC BY-SA 4.0","body":"I think this question is old enough to be deleted. Things have changed there is very LITTLE difference this days."},{"owner":{"reputation":283,"user_id":14173388,"user_type":"registered","profile_image":"https://i.stack.imgur.com/n9sxz.jpg?s=128&g=1","display_name":"Ahmad","link":"https://stackoverflow.com/users/14173388/ahmad"},"reply_to_user":{"reputation":336,"user_id":11041430,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ba8e6b52b3f40b3c55d1730c199c0f19?s=128&d=identicon&r=PG&f=1","display_name":"D. Sikilai","link":"https://stackoverflow.com/users/11041430/d-sikilai"},"edited":false,"score":3,"creation_date":1609198556,"post_id":11227809,"comment_id":115775724,"content_license":"CC BY-SA 4.0","body":"yea i would have to agree with @D.Sikilai there is little difference these days but its still a good post to look back on"},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1610571754,"post_id":11227809,"comment_id":116179720,"content_license":"CC BY-SA 4.0","body":"This question was featured in <a href=\"https://twit.tv/shows/triangulation/episodes/277\" rel=\"nofollow noreferrer\">Leo Laporte&#39;s 2016 interview with Joel Spolsky</a>."}],"answers":[{"comments":[{"owner":{"reputation":1161,"user_id":538458,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/737d082cd41a6c7caac7f98c3797d50c?s=128&d=identicon&r=PG","display_name":"Adam Freeman","link":"https://stackoverflow.com/users/538458/adam-freeman"},"edited":false,"score":128,"creation_date":1411498692,"post_id":11227877,"comment_id":40722655,"content_license":"CC BY-SA 3.0","body":"Does branch prediction work better on sorted arrays vs. arrays with different patterns?  For example, for the array --&gt; { 10, 5, 20, 10, 40, 20, ... } the next element in the array from the pattern is 80.  Would this kind of array be sped up by branch prediction in which the next element is 80 here if the pattern is followed?  Or does it usually only help with sorted arrays?"},{"owner":{"reputation":2684,"user_id":3206624,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/95b1b5df80d9d891b48d668af975be84?s=128&d=identicon&r=PG&f=1","display_name":"Agrim Pathak","link":"https://stackoverflow.com/users/3206624/agrim-pathak"},"edited":false,"score":165,"creation_date":1414655518,"post_id":11227877,"comment_id":41900025,"content_license":"CC BY-SA 3.0","body":"So basically everything I conventionally learned about big-O is out of the window?  Better to incur a sorting cost than a branching cost?"},{"owner":{"reputation":173787,"user_id":1011995,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1","display_name":"Daniel Fischer","link":"https://stackoverflow.com/users/1011995/daniel-fischer"},"reply_to_user":{"reputation":2684,"user_id":3206624,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/95b1b5df80d9d891b48d668af975be84?s=128&d=identicon&r=PG&f=1","display_name":"Agrim Pathak","link":"https://stackoverflow.com/users/3206624/agrim-pathak"},"edited":false,"score":156,"creation_date":1414664052,"post_id":11227877,"comment_id":41904388,"content_license":"CC BY-SA 3.0","body":"@AgrimPathak That depends. For not too large input, an algorithm with higher complexity is faster than an algorithm with lower complexity when the constants are smaller for the algorithm with higher complexity. Where the break-even point is can be hard to predict. Also, <a href=\"http://stackoverflow.com/questions/14023988/why-is-processing-a-sorted-array-slower-than-an-unsorted-array?lq=1\">compare this</a>, locality is important. Big-O is important, but it is not the sole criterion for performance."},{"owner":{"reputation":4977,"user_id":2047418,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG","display_name":"Filip Bartuzi","link":"https://stackoverflow.com/users/2047418/filip-bartuzi"},"edited":false,"score":81,"creation_date":1415540238,"post_id":11227877,"comment_id":42224805,"content_license":"CC BY-SA 3.0","body":"When does branch prediction takes place? When does language will know that array is sorted? I&#39;m thinking of situation of array that looks like: [1,2,3,4,5,...998,999,1000, 3, 10001, 10002] ? will this obscure 3 increase running time? Will it be as long as unsorted array?"},{"owner":{"reputation":173787,"user_id":1011995,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1","display_name":"Daniel Fischer","link":"https://stackoverflow.com/users/1011995/daniel-fischer"},"reply_to_user":{"reputation":4977,"user_id":2047418,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG","display_name":"Filip Bartuzi","link":"https://stackoverflow.com/users/2047418/filip-bartuzi"},"edited":false,"score":77,"creation_date":1415540977,"post_id":11227877,"comment_id":42225007,"content_license":"CC BY-SA 3.0","body":"@FilipBartuzi Branch prediction takes place in the processor, below the language level (but the language may offer ways to tell the compiler what&#39;s likely, so the compiler can emit code suited to that). In your example, the out-of-order 3 will lead to a branch-misprediction (for appropriate conditions, where 3 gives a different result than 1000), and thus processing that array will likely take a couple dozen or hundred nanoseconds longer than a sorted array would, hardly ever noticeable. What costs time is i high rate of mispredictions, one misprediction per 1000 isn&#39;t much."},{"owner":{"reputation":15414,"user_id":1715673,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/dcd9836a94720caadd7dfc82d1df627d?s=128&d=identicon&r=PG","display_name":"Peter Wone","link":"https://stackoverflow.com/users/1715673/peter-wone"},"reply_to_user":{"reputation":1161,"user_id":538458,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/737d082cd41a6c7caac7f98c3797d50c?s=128&d=identicon&r=PG","display_name":"Adam Freeman","link":"https://stackoverflow.com/users/538458/adam-freeman"},"edited":false,"score":2,"creation_date":1430452976,"post_id":11227877,"comment_id":48082367,"content_license":"CC BY-SA 3.0","body":"@AdamFreeman - Sorting is relevant here only inasmuch as <i>in this code</i> it increases branch prediction to 100% success."},{"owner":{"reputation":259,"user_id":7886227,"user_type":"registered","profile_image":"https://i.stack.imgur.com/hec3U.jpg?s=128&g=1","display_name":"Dr t","link":"https://stackoverflow.com/users/7886227/dr-t"},"edited":false,"score":3,"creation_date":1495734693,"post_id":11227877,"comment_id":75387346,"content_license":"CC BY-SA 3.0","body":"I would recommend a look at: <a href=\"https://en.wikibooks.org/wiki/Optimizing_C%2B%2B/Writing_efficient_code/Performance_improving_features\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Optimizing_C%2B%2B/Writing_efficient_c&zwnj;&#8203;ode/&hellip;</a>  which provides a good discussion with examples of this topic including some that are not mentioned in any comments that i have seen regarding this question."},{"owner":{"reputation":1812,"user_id":4285898,"user_type":"registered","accept_rate":75,"profile_image":"https://lh3.googleusercontent.com/-2RjNyl00QDA/AAAAAAAAAAI/AAAAAAAAARQ/FrNVhUUIMLw/photo.jpg?sz=128","display_name":"à¤à¤¨à¤à¤¦","link":"https://stackoverflow.com/users/4285898/%e0%a4%86%e0%a4%a8%e0%a4%82%e0%a4%a6"},"edited":false,"score":2,"creation_date":1505485014,"post_id":11227877,"comment_id":79447312,"content_license":"CC BY-SA 3.0","body":"@DanielFischer does compiler knows which array is sorted and which one is not?"},{"owner":{"reputation":511,"user_id":1054647,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/05df494d41b7d14a22d7bff3959d531a?s=128&d=identicon&r=PG","display_name":"knickum","link":"https://stackoverflow.com/users/1054647/knickum"},"reply_to_user":{"reputation":1812,"user_id":4285898,"user_type":"registered","accept_rate":75,"profile_image":"https://lh3.googleusercontent.com/-2RjNyl00QDA/AAAAAAAAAAI/AAAAAAAAARQ/FrNVhUUIMLw/photo.jpg?sz=128","display_name":"à¤à¤¨à¤à¤¦","link":"https://stackoverflow.com/users/4285898/%e0%a4%86%e0%a4%a8%e0%a4%82%e0%a4%a6"},"edited":false,"score":3,"creation_date":1507930981,"post_id":11227877,"comment_id":80423729,"content_license":"CC BY-SA 3.0","body":"@AnandTyagi As Peter Wone noted, it&#39;s not that the compiler knows which array is sorted or not. Imagine an extremely simple branch predictor that takes the same path as the previous iteration, e.g. a train taking a left if it took a left last time, and vice versa. For a sorted array of 256 ints, (ignoring the undefined first iteration), the prediction would be correct from 2-128, wrong at 129, and then correct from 130-256. Now, that&#39;s a terrible branch predictor that would only work in this specific situation, but a really good predictor should still handle this capably."},{"owner":{"reputation":432,"user_id":1494680,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/303668e5317cc07925197755ff3c10c4?s=128&d=identicon&r=PG","display_name":"Omer","link":"https://stackoverflow.com/users/1494680/omer"},"edited":false,"score":0,"creation_date":1593237458,"post_id":11227877,"comment_id":110714690,"content_license":"CC BY-SA 4.0","body":"Is the branch predictions mostly happen at compiler level or it is handled by processor? And why java or c++ can not handled it? I mean why is not complicated to predict it right?"}],"owner":{"reputation":173787,"user_id":1011995,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Jca5Q.jpg?s=128&g=1","display_name":"Daniel Fischer","link":"https://stackoverflow.com/users/1011995/daniel-fischer"},"comment_count":10,"is_accepted":false,"score":4264,"last_activity_date":1470383590,"last_edit_date":1592644375,"creation_date":1340805285,"answer_id":11227877,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p><strong>Branch prediction.</strong></p>\n<p>With a sorted array, the condition <code>data[c] &gt;= 128</code> is first <code>false</code> for a streak of values, then becomes <code>true</code> for all later values. That's easy to predict. With an unsorted array, you pay for the branching cost.</p>\n"},{"comments":[{"owner":{"reputation":96,"user_id":13830841,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GiTKeJoO6XlvqYIKBwy8DomvzAr7NzTIFGCxDZw=k-s128","display_name":"Hanna Mcquaig","link":"https://stackoverflow.com/users/13830841/hanna-mcquaig"},"edited":false,"score":18,"creation_date":1593562286,"post_id":11227902,"comment_id":110823655,"content_license":"CC BY-SA 4.0","body":"this is all C++?"},{"owner":{"reputation":3177,"user_id":4068240,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c35facdddfc74d23ee378790b905226?s=128&d=identicon&r=PG","display_name":"Clijsters","link":"https://stackoverflow.com/users/4068240/clijsters"},"reply_to_user":{"reputation":96,"user_id":13830841,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GiTKeJoO6XlvqYIKBwy8DomvzAr7NzTIFGCxDZw=k-s128","display_name":"Hanna Mcquaig","link":"https://stackoverflow.com/users/13830841/hanna-mcquaig"},"edited":false,"score":88,"creation_date":1593597753,"post_id":11227902,"comment_id":110834702,"content_license":"CC BY-SA 4.0","body":"@HannaMcquaig I&#39;d guess that part where it says &quot;Java&quot; isn&#39;t C++, but I may be wrong."},{"owner":{"reputation":783,"user_id":4416169,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/062b5273d4d63fcd079d7a65010c1817?s=128&d=identicon&r=PG&f=1","display_name":"Matias Chara","link":"https://stackoverflow.com/users/4416169/matias-chara"},"edited":false,"score":7,"creation_date":1594597968,"post_id":11227902,"comment_id":111173010,"content_license":"CC BY-SA 4.0","body":"wait a second, doesnt shifting negative values to the right yield implementation-defined values? int t = (data[c] - 128) &gt;&gt; 31; sum += ~t &amp; data[c];"},{"owner":{"reputation":753,"user_id":493759,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c28651cc42b824155c6bc9a15a300fd8?s=128&d=identicon&r=PG","display_name":"Agoston Horvath","link":"https://stackoverflow.com/users/493759/agoston-horvath"},"reply_to_user":{"reputation":783,"user_id":4416169,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/062b5273d4d63fcd079d7a65010c1817?s=128&d=identicon&r=PG&f=1","display_name":"Matias Chara","link":"https://stackoverflow.com/users/4416169/matias-chara"},"edited":false,"score":2,"creation_date":1601973465,"post_id":11227902,"comment_id":113565282,"content_license":"CC BY-SA 4.0","body":"@MatiasChara it&#39;s really hidden, see <a href=\"https://en.wikipedia.org/wiki/Bitwise_operations_in_C#Right_shift_%3E%3E\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a> ; &quot;however most compilers will perform an arithmetic shift, causing the blank to be filled with the sign bit of the left operand&quot;. I guess it&#39;s a de-facto standard by now."},{"owner":{"reputation":4383,"user_id":774575,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/I2J58.png?s=128&g=1","display_name":"mins","link":"https://stackoverflow.com/users/774575/mins"},"edited":false,"score":12,"creation_date":1602857081,"post_id":11227902,"comment_id":113860806,"content_license":"CC BY-SA 4.0","body":"Incidently branch prediction failure can also be <a href=\"https://eprint.iacr.org/2006/288.pdf\" rel=\"nofollow noreferrer\">exploited by a program to obtain crypto keys being used by another program</a> on the same CPU core."},{"owner":{"reputation":81,"user_id":2755896,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4bb190997516356ce466d9bf6cc5172b?s=128&d=identicon&r=PG&f=1","display_name":"Max","link":"https://stackoverflow.com/users/2755896/max"},"edited":false,"score":0,"creation_date":1606433551,"post_id":11227902,"comment_id":114968453,"content_license":"CC BY-SA 4.0","body":"We used to always use C for maximum performance because there was so little overhead.  Today, performance depends heavily on picking the right algorithm, sorting data when optimal, better use of the cache, and branch prediction.  C still produces the fastest code, but does so only when programmers keep all of these things in mind and take advantage of the hardware."},{"owner":{"reputation":67,"user_id":8736053,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/516a059907ce44673c7c18b92146d4a1?s=128&d=identicon&r=PG&f=1","display_name":"Mycotina","link":"https://stackoverflow.com/users/8736053/mycotina"},"edited":false,"score":1,"creation_date":1607419616,"post_id":11227902,"comment_id":115259910,"content_license":"CC BY-SA 4.0","body":"I have a hard time understanding the explanation. Because, even with branch predictor, isn&#39;t the computer still need to know if it guessed right or wrong in the end? Because if not, how will it know if it should do the rollback? And for knowing if it is right or wrong, isn&#39;t we need to compute the result of the if condition nonetheless? Which in the end, will consume the same resource without branch prediction, or even slower because we need to correct mistakes?"},{"owner":{"reputation":1719,"user_id":10915534,"user_type":"registered","profile_image":"https://i.stack.imgur.com/IcLqB.jpg?s=128&g=1","display_name":"Ibnelaiq","link":"https://stackoverflow.com/users/10915534/ibnelaiq"},"reply_to_user":{"reputation":96,"user_id":13830841,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GiTKeJoO6XlvqYIKBwy8DomvzAr7NzTIFGCxDZw=k-s128","display_name":"Hanna Mcquaig","link":"https://stackoverflow.com/users/13830841/hanna-mcquaig"},"edited":false,"score":1,"creation_date":1607497541,"post_id":11227902,"comment_id":115287811,"content_license":"CC BY-SA 4.0","body":"@HannaMcquaig Always has been"},{"owner":{"reputation":1678,"user_id":899213,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/1cecebaf65cdd9a8351fdda654e5bdac?s=128&d=identicon&r=PG","display_name":"Raphael","link":"https://stackoverflow.com/users/899213/raphael"},"reply_to_user":{"reputation":67,"user_id":8736053,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/516a059907ce44673c7c18b92146d4a1?s=128&d=identicon&r=PG&f=1","display_name":"Mycotina","link":"https://stackoverflow.com/users/8736053/mycotina"},"edited":false,"score":3,"creation_date":1609861882,"post_id":11227902,"comment_id":115951193,"content_license":"CC BY-SA 4.0","body":"@Mycotina, I&#39;m no expert, but what I understand is: the processor needs multiple steps to execute a single instruction (fetching, decoding, etc) -- this is called &quot;instruction pipelining&quot; -- so, as an optimization, it will fetch multiple instructions at once and &quot;warm up&quot; the next instructions while executing the current one. If the wrong branch is chosen, the instructions being &quot;warmed up&quot; in the pipeline must be discarded, so that the instructions on the right branch can be put into the pipeline instead."},{"owner":{"reputation":58492,"user_id":1322972,"user_type":"registered","profile_image":"https://i.stack.imgur.com/puZFr.png?s=128&g=1","display_name":"WhozCraig","link":"https://stackoverflow.com/users/1322972/whozcraig"},"reply_to_user":{"reputation":67,"user_id":8736053,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/516a059907ce44673c7c18b92146d4a1?s=128&d=identicon&r=PG&f=1","display_name":"Mycotina","link":"https://stackoverflow.com/users/8736053/mycotina"},"edited":false,"score":1,"creation_date":1610071437,"post_id":11227902,"comment_id":116023390,"content_license":"CC BY-SA 4.0","body":"@Mycotina It&#39;s easier to understand when you think of the instruction pipeline cache as tracks, the train (with cars) as the instructions, and the indicator of whether you go left or right by some dude at the END of the train; not the beginning. By the time you see him to know you&#39;ve guessed right, not only is it too late to switch things, the pipeline ahead is already populated, but in the wrong direction. If you guessed wrong the predicted pipeline needs to be thrown out (derail the train; drag it back before the switch house, put it back on the tracks, and send it the other way)."},{"owner":{"reputation":333,"user_id":10220019,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1b2e39d80ba5e709c2c81017833b54d?s=128&d=identicon&r=PG&f=1","display_name":"C. Binair","link":"https://stackoverflow.com/users/10220019/c-binair"},"edited":false,"score":0,"creation_date":1614788479,"post_id":11227902,"comment_id":117493367,"content_license":"CC BY-SA 4.0","body":"I hope this question is simple, but I&#39;m confused. The prediction is that made during runtime or already when compiling?"},{"owner":{"reputation":145,"user_id":8132066,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e935e7c928e9eb139122eeceab4088ca?s=128&d=identicon&r=PG","display_name":"Tom","link":"https://stackoverflow.com/users/8132066/tom"},"reply_to_user":{"reputation":333,"user_id":10220019,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1b2e39d80ba5e709c2c81017833b54d?s=128&d=identicon&r=PG&f=1","display_name":"C. Binair","link":"https://stackoverflow.com/users/10220019/c-binair"},"edited":false,"score":1,"creation_date":1615387664,"post_id":11227902,"comment_id":117675227,"content_license":"CC BY-SA 4.0","body":"@C.Binair Primarily it&#39;s runtime, i.e. processor predicts branches while executing the code. The processor also remembers previous results and use that to predict next jump. However, compiler can provide some initial hints for branch prediction while compiling - search for &quot;likely&quot; and &quot;unlikely&quot; attributes. So you could say the answer is kinda both, but runtime is when it actually happens."}],"owner":{"reputation":433498,"user_id":922184,"user_type":"registered","profile_image":"https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1","display_name":"Mysticial","link":"https://stackoverflow.com/users/922184/mysticial"},"comment_count":12,"is_accepted":true,"score":32843,"last_activity_date":1610292952,"last_edit_date":1610292952,"creation_date":1340805402,"answer_id":11227902,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p><strong>You are a victim of <a href=\"//en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">branch prediction</a> fail.</strong></p>\n<hr />\n<h2>What is Branch Prediction?</h2>\n<p>Consider a railroad junction:</p>\n<p><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/muxnt.jpg\" alt=\"Image showing a railroad junction\" /></a>\n<sub><a href=\"//commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\" rel=\"noreferrer\">Image</a> by Mecanismo, via Wikimedia Commons. Used under the <a href=\"//creativecommons.org/licenses/by-sa/3.0/deed.en\" rel=\"noreferrer\">CC-By-SA 3.0</a> license.</sub></p>\n<p>Now for the sake of argument, suppose this is back in the 1800s - before long distance or radio communication.</p>\n<p>You are the operator of a junction and you hear a train coming. You have no idea which way it is supposed to go. You stop the train to ask the driver which direction they want. And then you set the switch appropriately.</p>\n<p><em>Trains are heavy and have a lot of inertia. So they take forever to start up and slow down.</em></p>\n<p>Is there a better way? You guess which direction the train will go!</p>\n<ul>\n<li>If you guessed right, it continues on.</li>\n<li>If you guessed wrong, the captain will stop, back up, and yell at you to flip the switch. Then it can restart down the other path.</li>\n</ul>\n<p><strong>If you guess right every time</strong>, the train will never have to stop.<br />\n<strong>If you guess wrong too often</strong>, the train will spend a lot of time stopping, backing up, and restarting.</p>\n<hr />\n<p><strong>Consider an if-statement:</strong> At the processor level, it is a branch instruction:</p>\n<p><img src=\"https://i.stack.imgur.com/pyfwC.png\" alt=\"Screenshot of compiled code containing an if statement\" /></p>\n<p>You are a processor and you see a branch. You have no idea which way it will go. What do you do? You halt execution and wait until the previous instructions are complete. Then you continue down the correct path.</p>\n<p><em>Modern processors are complicated and have long pipelines. So they take forever to &quot;warm up&quot; and &quot;slow down&quot;.</em></p>\n<p>Is there a better way? You guess which direction the branch will go!</p>\n<ul>\n<li>If you guessed right, you continue executing.</li>\n<li>If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.</li>\n</ul>\n<p><strong>If you guess right every time</strong>, the execution will never have to stop.<br />\n<strong>If you guess wrong too often</strong>, you spend a lot of time stalling, rolling back, and restarting.</p>\n<hr />\n<p>This is branch prediction. I admit it's not the best analogy since the train could just signal the direction with a flag. But in computers, the processor doesn't know which direction a branch will go until the last moment.</p>\n<p>So how would you strategically guess to minimize the number of times that the train must back up and go down the other path? You look at the past history! If the train goes left 99% of the time, then you guess left. If it alternates, then you alternate your guesses. If it goes one way every three times, you guess the same...</p>\n<p><em><strong>In other words, you try to identify a pattern and follow it.</strong></em> This is more or less how branch predictors work.</p>\n<p>Most applications have well-behaved branches. So modern branch predictors will typically achieve &gt;90% hit rates. But when faced with unpredictable branches with no recognizable patterns, branch predictors are virtually useless.</p>\n<p>Further reading: <a href=\"//en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">&quot;Branch predictor&quot; article on Wikipedia</a>.</p>\n<hr />\n<h2>As hinted from above, the culprit is this if-statement:</h2>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>Notice that the data is evenly distributed between 0 and 255. When the data is sorted, roughly the first half of the iterations will not enter the if-statement. After that, they will all enter the if-statement.</p>\n<p>This is very friendly to the branch predictor since the branch consecutively goes the same direction many times. Even a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.</p>\n<p><strong>Quick visualization:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>T = branch taken\nN = branch not taken\n\ndata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...\nbranch = N  N  N  N  N  ...   N    N    T    T    T  ...   T    T    T  ...\n\n       = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT  (easy to predict)\n</code></pre>\n<p>However, when the data is completely random, the branch predictor is rendered useless, because it can't predict random data. Thus there will probably be around 50% misprediction (no better than random guessing).</p>\n<pre class=\"lang-none prettyprint-override\"><code>data[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118,  14, 150, 177, 182, ...\nbranch =   T,   T,   N,   T,   T,   T,   T,  N,   T,   N,   N,   T,   T,   T  ...\n\n       = TTNTTTTNTNNTTT ...   (completely random - impossible to predict)\n</code></pre>\n<hr />\n<p><strong>So what can be done?</strong></p>\n<p>If the compiler isn't able to optimize the branch into a conditional move, you can try some hacks if you are willing to sacrifice readability for performance.</p>\n<p>Replace:</p>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>with:</p>\n<pre><code>int t = (data[c] - 128) &gt;&gt; 31;\nsum += ~t &amp; data[c];\n</code></pre>\n<p>This eliminates the branch and replaces it with some bitwise operations.</p>\n<p><sub>(Note that this hack is not strictly equivalent to the original if-statement. But in this case, it's valid for all the input values of <code>data[]</code>.)</sub></p>\n<p><strong>Benchmarks: Core i7 920 @ 3.5 GHz</strong></p>\n<p>C++ - Visual Studio 2010 - x64 Release</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>11.777</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>2.352</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>2.564</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>2.587</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Java - NetBeans 7.1.1 JDK 7 - x64</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>10.93293813</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>5.643797077</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>3.113581453</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>3.186068823</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Observations:</p>\n<ul>\n<li><strong>With the Branch:</strong> There is a huge difference between the sorted and unsorted data.</li>\n<li><strong>With the Hack:</strong> There is no difference between sorted and unsorted data.</li>\n<li>In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.</li>\n</ul>\n<p>A general rule of thumb is to avoid data-dependent branching in critical loops (such as in this example).</p>\n<hr />\n<p><strong>Update:</strong></p>\n<ul>\n<li><p>GCC 4.6.1 with <code>-O3</code> or <code>-ftree-vectorize</code> on x64 is able to generate a conditional move. So there is no difference between the sorted and unsorted data - both are fast.</p>\n<p>(Or somewhat fast: for the already-sorted case, <code>cmov</code> can be slower especially if GCC puts it on the critical path instead of just <code>add</code>, especially on Intel before Broadwell where <code>cmov</code> has 2 cycle latency: <a href=\"https://stackoverflow.com/questions/28875325/gcc-optimization-flag-o3-makes-code-slower-than-o2\">gcc optimization flag -O3 makes code slower than -O2</a>)</p>\n</li>\n<li><p>VC++ 2010 is unable to generate conditional moves for this branch even under <code>/Ox</code>.</p>\n</li>\n<li><p><a href=\"//en.wikipedia.org/wiki/Intel_C++_Compiler\" rel=\"noreferrer\">Intel C++ Compiler</a> (ICC) 11 does something miraculous. It <a href=\"//en.wikipedia.org/wiki/Loop_interchange\" rel=\"noreferrer\">interchanges the two loops</a>, thereby hoisting the unpredictable branch to the outer loop. So not only is it immune to the mispredictions, it is also twice as fast as whatever VC++ and GCC can generate! In other words, ICC took advantage of the test-loop to defeat the benchmark...</p>\n</li>\n<li><p>If you give the Intel compiler the branchless code, it just out-right vectorizes it... and is just as fast as with the branch (with the loop interchange).</p>\n</li>\n</ul>\n<p>This goes to show that even mature modern compilers can vary wildly in their ability to optimize code...</p>\n"},{"comments":[{"owner":{"reputation":376,"user_id":3924108,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7b7612263f0c62d716c6dee0fe7ecb76?s=128&d=identicon&r=PG","display_name":"fernal73","link":"https://stackoverflow.com/users/3924108/fernal73"},"edited":false,"score":0,"creation_date":1606968554,"post_id":11237235,"comment_id":115126222,"content_license":"CC BY-SA 4.0","body":"This doesn&#39;t work for Java."},{"owner":{"reputation":376,"user_id":3924108,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7b7612263f0c62d716c6dee0fe7ecb76?s=128&d=identicon&r=PG","display_name":"fernal73","link":"https://stackoverflow.com/users/3924108/fernal73"},"edited":false,"score":0,"creation_date":1606973524,"post_id":11237235,"comment_id":115127186,"content_license":"CC BY-SA 4.0","body":"<a href=\"https://stackoverflow.com/questions/9745389/is-the-ternary-operator-faster-than-an-if-condition-in-java\" title=\"is the ternary operator faster than an if condition in java\">stackoverflow.com/questions/9745389/&hellip;</a>"}],"owner":{"reputation":41563,"user_id":866732,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/f09f0253204000d6083ed1de21afc6fd?s=128&d=identicon&r=PG","display_name":"WiSaGaN","link":"https://stackoverflow.com/users/866732/wisagan"},"comment_count":2,"is_accepted":false,"score":3455,"last_activity_date":1610299340,"last_edit_date":1610299340,"creation_date":1340849643,"answer_id":11237235,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>The reason why performance improves drastically when the data is sorted is that the branch prediction penalty is removed, as explained beautifully in <a href=\"//stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11227902#11227902\">Mysticial's answer</a>.</p>\n<p>Now, if we look at the code</p>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>we can find that the meaning of this particular <code>if... else...</code> branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a <strong>conditional move</strong> statement, which would be compiled into a conditional move instruction: <code>cmovl</code>, in an <code>x86</code> system. The branch and thus the potential branch prediction penalty is removed.</p>\n<p>In <code>C</code>, thus <code>C++</code>, the statement, which would compile directly (without any optimization) into the conditional move instruction in <code>x86</code>, is the ternary operator <code>... ? ... : ...</code>. So we rewrite the above statement into an equivalent one:</p>\n<pre><code>sum += data[c] &gt;=128 ? data[c] : 0;\n</code></pre>\n<p>While maintaining readability, we can check the speedup factor.</p>\n<p>On an Intel <a href=\"//en.wikipedia.org/wiki/Intel_Core#Core_i7\" rel=\"noreferrer\">Core i7</a>-2600K @ 3.4Â GHz and Visual Studio 2010 Release Mode, the benchmark is:</p>\n<p><strong>x86</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>8.885</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>1.528</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>3.716</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>3.71</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>x64</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>11.302</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>1.830</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>2.736</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>2.737</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The result is robust in multiple tests. We get a great speedup when the branch result is unpredictable, but we suffer a little bit when it is predictable. In fact, when using a conditional move, the performance is the same regardless of the data pattern.</p>\n<p>Now let's look more closely by investigating the <code>x86</code> assembly they generate. For simplicity, we use two functions <code>max1</code> and <code>max2</code>.</p>\n<p><code>max1</code> uses the conditional branch <code>if... else ...</code>:</p>\n<pre><code>int max1(int a, int b) {\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n<p><code>max2</code> uses the ternary operator <code>... ? ... : ...</code>:</p>\n<pre><code>int max2(int a, int b) {\n    return a &gt; b ? a : b;\n}\n</code></pre>\n<p>On a x86-64 machine, <code>GCC -S</code> generates the assembly below.</p>\n<pre><code>:max1\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    -8(%rbp), %eax\n    jle     .L2\n    movl    -4(%rbp), %eax\n    movl    %eax, -12(%rbp)\n    jmp     .L4\n.L2:\n    movl    -8(%rbp), %eax\n    movl    %eax, -12(%rbp)\n.L4:\n    movl    -12(%rbp), %eax\n    leave\n    ret\n\n:max2\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    %eax, -8(%rbp)\n    cmovge  -8(%rbp), %eax\n    leave\n    ret\n</code></pre>\n<p><code>max2</code> uses much less code due to the usage of instruction <code>cmovge</code>. But the real gain is that <code>max2</code> does not involve branch jumps, <code>jmp</code>, which would have a significant performance penalty if the predicted result is not right.</p>\n<p>So why does a conditional move perform better?</p>\n<p>In a typical <code>x86</code> processor, the execution of an instruction is divided into several stages. Roughly, we have different hardware to deal with different stages. So we do not have to wait for one instruction to finish to start a new one. This is called <strong><a href=\"//en.wikipedia.org/wiki/Pipeline_(computing)\" rel=\"noreferrer\">pipelining</a></strong>.</p>\n<p>In a branch case, the following instruction is determined by the preceding one, so we cannot do pipelining. We have to either wait or predict.</p>\n<p>In a conditional move case, the execution conditional move instruction is divided into several stages, but the earlier stages like <code>Fetch</code> and <code>Decode</code> do not depend on the result of the previous instruction; only latter stages need the result. Thus, we wait a fraction of one instruction's execution time. This is why the conditional move version is slower than the branch when the prediction is easy.</p>\n<p>The book <em><a href=\"https://rads.stackoverflow.com/amzn/click/com/0136108040\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Computer Systems: A Programmer's Perspective, second edition</a></em> explains this in detail. You can check Section 3.6.6 for <em>Conditional Move Instructions</em>, entire Chapter 4 for <em>Processor Architecture</em>, and Section 5.11.2 for special treatment for <em>Branch Prediction and Misprediction Penalties</em>.</p>\n<p>Sometimes, some modern compilers can optimize our code to assembly with better performance, sometimes some compilers can't (the code in question is using Visual Studio's native compiler). Knowing the performance difference between a branch and a conditional move when unpredictable can help us write code with better performance when the scenario gets so complex that the compiler can not optimize them automatically.</p>\n"},{"owner":{"reputation":29321,"user_id":863980,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ea08c9063ae1de86e8d576fb569d513a?s=128&d=identicon&r=PG","display_name":"vulcan raven","link":"https://stackoverflow.com/users/863980/vulcan-raven"},"comment_count":0,"is_accepted":false,"score":2381,"last_activity_date":1558961493,"last_edit_date":1558961493,"creation_date":1341282330,"answer_id":11303693,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>If you are curious about even more optimizations that can be done to this code, consider this:</p>\n\n<p>Starting with the original loop:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; 100000; ++i)\n{\n    for (unsigned j = 0; j &lt; arraySize; ++j)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>With loop interchange, we can safely change this loop to:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>Then, you can see that the <code>if</code> conditional is constant throughout the execution of the <code>i</code> loop, so you can hoist the <code>if</code> out:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        for (unsigned i = 0; i &lt; 100000; ++i)\n        {\n            sum += data[j];\n        }\n    }\n}\n</code></pre>\n\n<p>Then, you see that the inner loop can be collapsed into one single expression, assuming the floating point model allows it (<code>/fp:fast</code> is thrown, for example)</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        sum += data[j] * 100000;\n    }\n}\n</code></pre>\n\n<p>That one is 100,000 times faster than before.</p>\n"},{"comments":[{"owner":{"reputation":1130,"user_id":2383730,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/giP28.jpg?s=128&g=1","display_name":"TallBrian","link":"https://stackoverflow.com/users/2383730/tallbrian"},"edited":false,"score":84,"creation_date":1386561609,"post_id":12853037,"comment_id":30576818,"content_license":"CC BY-SA 3.0","body":"This is scary, in the unsorted list, there should be 50% chance of hitting the add.  Somehow the branch prediction only has a 25% miss rate, how can it do better than 50% miss?"},{"owner":{"reputation":214609,"user_id":134633,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG","display_name":"caf","link":"https://stackoverflow.com/users/134633/caf"},"reply_to_user":{"reputation":1130,"user_id":2383730,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/giP28.jpg?s=128&g=1","display_name":"TallBrian","link":"https://stackoverflow.com/users/2383730/tallbrian"},"edited":false,"score":142,"creation_date":1386563365,"post_id":12853037,"comment_id":30577316,"content_license":"CC BY-SA 3.0","body":"@tall.b.lo: The 25% is of all branches - there are <i>two</i> branches in the loop, one for <code>data[c] &gt;= 128</code> (which has a 50% miss rate as you suggest) and one for the loop condition <code>c &lt; arraySize</code> which has ~0% miss rate."}],"owner":{"reputation":214609,"user_id":134633,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG","display_name":"caf","link":"https://stackoverflow.com/users/134633/caf"},"comment_count":2,"is_accepted":false,"score":1963,"last_activity_date":1350588021,"last_edit_date":1350588021,"creation_date":1350021213,"answer_id":12853037,"question_id":11227809,"content_license":"CC BY-SA 3.0","body":"<p>No doubt some of us would be interested in ways of identifying code that is problematic for the CPU's branch-predictor. The Valgrind tool <code>cachegrind</code> has a branch-predictor simulator, enabled by using the <code>--branch-sim=yes</code> flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with <code>g++</code>, gives these results:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>==32551== Branches:        656,645,130  (  656,609,208 cond +    35,922 ind)\n==32551== Mispredicts:         169,556  (      169,095 cond +       461 ind)\n==32551== Mispred rate:            0.0% (          0.0%     +       1.2%   )\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>==32555== Branches:        655,996,082  (  655,960,160 cond +  35,922 ind)\n==32555== Mispredicts:     164,073,152  (  164,072,692 cond +     460 ind)\n==32555== Mispred rate:           25.0% (         25.0%     +     1.2%   )\n</code></pre>\n\n<p>Drilling down into the line-by-line output produced by <code>cg_annotate</code> we see for the loop in question:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>          Bc    Bcm Bi Bim\n      10,001      4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .      .  .   .      {\n           .      .  .   .          // primary loop\n 327,690,000 10,016  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .      .  .   .          {\n 327,680,000 10,006  0   0              if (data[c] &gt;= 128)\n           0      0  0   0                  sum += data[c];\n           .      .  .   .          }\n           .      .  .   .      }\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>          Bc         Bcm Bi Bim\n      10,001           4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .           .  .   .      {\n           .           .  .   .          // primary loop\n 327,690,000      10,038  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .           .  .   .          {\n 327,680,000 164,050,007  0   0              if (data[c] &gt;= 128)\n           0           0  0   0                  sum += data[c];\n           .           .  .   .          }\n           .           .  .   .      }\n</code></pre>\n\n<p>This lets you easily identify the problematic line - in the unsorted version the <code>if (data[c] &gt;= 128)</code> line is causing 164,050,007 mispredicted conditional branches (<code>Bcm</code>) under cachegrind's branch-predictor model, whereas it's only causing 10,006 in the sorted version.</p>\n\n<hr>\n\n<p>Alternatively, on Linux you can use the performance counters subsystem to accomplish the same task, but with native performance using CPU counters.</p>\n\n<pre><code>perf stat ./sumtest_sorted\n</code></pre>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_sorted':\n\n  11808.095776 task-clock                #    0.998 CPUs utilized          \n         1,062 context-switches          #    0.090 K/sec                  \n            14 CPU-migrations            #    0.001 K/sec                  \n           337 page-faults               #    0.029 K/sec                  \n26,487,882,764 cycles                    #    2.243 GHz                    \n41,025,654,322 instructions              #    1.55  insns per cycle        \n 6,558,871,379 branches                  #  555.455 M/sec                  \n       567,204 branch-misses             #    0.01% of all branches        \n\n  11.827228330 seconds time elapsed\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_unsorted':\n\n  28877.954344 task-clock                #    0.998 CPUs utilized          \n         2,584 context-switches          #    0.089 K/sec                  \n            18 CPU-migrations            #    0.001 K/sec                  \n           335 page-faults               #    0.012 K/sec                  \n65,076,127,595 cycles                    #    2.253 GHz                    \n41,032,528,741 instructions              #    0.63  insns per cycle        \n 6,560,579,013 branches                  #  227.183 M/sec                  \n 1,646,394,749 branch-misses             #   25.10% of all branches        \n\n  28.935500947 seconds time elapsed\n</code></pre>\n\n<p>It can also do source code annotation with dissassembly.</p>\n\n<pre><code>perf record -e branch-misses ./sumtest_unsorted\nperf annotate -d sumtest_unsorted\n</code></pre>\n\n\n\n<pre><code> Percent |      Source code &amp; Disassembly of sumtest_unsorted\n------------------------------------------------\n...\n         :                      sum += data[c];\n    0.00 :        400a1a:       mov    -0x14(%rbp),%eax\n   39.97 :        400a1d:       mov    %eax,%eax\n    5.31 :        400a1f:       mov    -0x20040(%rbp,%rax,4),%eax\n    4.60 :        400a26:       cltq   \n    0.00 :        400a28:       add    %rax,-0x30(%rbp)\n...\n</code></pre>\n\n<p>See <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial\" rel=\"noreferrer\">the performance tutorial</a> for more details.</p>\n"},{"comments":[{"owner":{"reputation":6895,"user_id":274579,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG","display_name":"ysap","link":"https://stackoverflow.com/users/274579/ysap"},"edited":false,"score":8,"creation_date":1368820380,"post_id":14092288,"comment_id":23890444,"content_license":"CC BY-SA 3.0","body":"Just for the sake of completeness, this is probably not how you&#39;d implement that in Matlab. I bet it&#39;d be much faster if done after vectorizing the problem."},{"owner":{"reputation":4380,"user_id":1020149,"user_type":"registered","accept_rate":21,"profile_image":"https://www.gravatar.com/avatar/911f564e95671ac04ec1841524d76171?s=128&d=identicon&r=PG","display_name":"Shan","link":"https://stackoverflow.com/users/1020149/shan"},"reply_to_user":{"reputation":6895,"user_id":274579,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/745415fffcdea46caf03c90534a4c7fa?s=128&d=identicon&r=PG","display_name":"ysap","link":"https://stackoverflow.com/users/274579/ysap"},"edited":false,"score":1,"creation_date":1368834624,"post_id":14092288,"comment_id":23895018,"content_license":"CC BY-SA 3.0","body":"Matlab does automatic parallelization / vectorization in many situations but the issue here is to check the effect of branch prediction. Matlab is not immune in anyway!"},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":1,"creation_date":1377362072,"post_id":14092288,"comment_id":27061346,"content_license":"CC BY-SA 3.0","body":"Does matlab use native numbers or a mat lab specific implementation (infinite amount of digits or so?)"}],"owner":{"reputation":4380,"user_id":1020149,"user_type":"registered","accept_rate":21,"profile_image":"https://www.gravatar.com/avatar/911f564e95671ac04ec1841524d76171?s=128&d=identicon&r=PG","display_name":"Shan","link":"https://stackoverflow.com/users/1020149/shan"},"comment_count":3,"is_accepted":false,"score":146,"last_activity_date":1521204334,"last_edit_date":1521204334,"creation_date":1356884206,"answer_id":14092288,"question_id":11227809,"content_license":"CC BY-SA 3.0","body":"<p>I tried the same code with MATLAB 2011b with my MacBook Pro (Intel i7, 64 bit, 2.4 GHz) for the following MATLAB code:</p>\n\n<pre><code>% Processing time with Sorted data vs unsorted data\n%==========================================================================\n% Generate data\narraySize = 32768\nsum = 0;\n% Generate random integer data from range 0 to 255\ndata = randi(256, arraySize, 1);\n\n\n%Sort the data\ndata1= sort(data); % data1= data  when no sorting done\n\n\n%Start a stopwatch timer to measure the execution time\ntic;\n\nfor i=1:100000\n\n    for j=1:arraySize\n\n        if data1(j)&gt;=128\n            sum=sum + data1(j);\n        end\n    end\nend\n\ntoc;\n\nExeTimeWithSorting = toc - tic;\n</code></pre>\n\n<p>The results for the above MATLAB code are as follows:</p>\n\n<pre><code>  a: Elapsed time (without sorting) = 3479.880861 seconds.\n  b: Elapsed time (with sorting ) = 2377.873098 seconds.\n</code></pre>\n\n<p>The results of the C code as in @GManNickG I get:</p>\n\n<pre><code>  a: Elapsed time (without sorting) = 19.8761 sec.\n  b: Elapsed time (with sorting ) = 7.37778 sec.\n</code></pre>\n\n<p>Based on this, it looks MATLAB is almost <em>175 times</em> slower than the C implementation without sorting and <em>350 times</em> slower with sorting. In other words, the effect (of branch prediction) is <em>1.46x</em> for MATLAB implementation and <em>2.7x</em> for the C implementation.</p>\n"},{"comments":[{"owner":{"reputation":2249,"user_id":4037019,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/nveNe.jpg?s=128&g=1","display_name":"cst1992","link":"https://stackoverflow.com/users/4037019/cst1992"},"reply_to_user":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"edited":false,"score":31,"creation_date":1459169931,"post_id":14889969,"comment_id":60153643,"content_license":"CC BY-SA 3.0","body":"@MooingDuck &#39;Cause it won&#39;t make a difference - that value can be anything, but it still will be in the bounds of these thresholds. So why show a random value when you already know the limits? Although I agree that you could show one for the sake of completeness, and &#39;just for the heck of it&#39;."},{"owner":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"reply_to_user":{"reputation":2249,"user_id":4037019,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/nveNe.jpg?s=128&g=1","display_name":"cst1992","link":"https://stackoverflow.com/users/4037019/cst1992"},"edited":false,"score":32,"creation_date":1459189636,"post_id":14889969,"comment_id":60164274,"content_license":"CC BY-SA 3.0","body":"@cst1992: Right now his slowest timing is TTFFTTFFTTFF, which seems, to my human eye, quite predictable. Random is inherently unpredictable, so it&#39;s entirely possible it would be slower still, and thus outside the limits shown here.  OTOH, it could be that TTFFTTFF perfectly hits the pathological case.  Can&#39;t tell, since he didn&#39;t show the timings for random."},{"owner":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"reply_to_user":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"edited":false,"score":29,"creation_date":1469048857,"post_id":14889969,"comment_id":64383305,"content_license":"CC BY-SA 3.0","body":"@MooingDuck To a human eye, &quot;TTFFTTFFTTFF&quot; is a predictable sequence, but what we are talking about here is the behavior of the branch predictor built into a CPU.  The branch predictor is not AI-level pattern recognition; it&#39;s very simple.  When you just alternate branches it doesn&#39;t predict well.  In most code, branches go the same way almost all the time; consider a loop that executes a thousand times.  The branch at the end of the loop goes back to the start of the loop 999 times, and then the thousandth time does something different.  A very simple branch predictor works well, usually."},{"owner":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"reply_to_user":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"edited":false,"score":24,"creation_date":1469049018,"post_id":14889969,"comment_id":64383386,"content_license":"CC BY-SA 3.0","body":"@steveha: I think you&#39;re making assumptions about how the CPU branch predictor works, and I disagree with that methodology. I don&#39;t know how advanced that branch predictor is, but I seem to think it&#39;s far more advanced than you do. You&#39;re probably right, but measurements would definitely be good."},{"owner":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"reply_to_user":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"edited":false,"score":4,"creation_date":1469504955,"post_id":14889969,"comment_id":64550377,"content_license":"CC BY-SA 3.0","body":"@MooingDuck It is true that I am not an expert in processor design.  But I invite you to read the Wikipedia page about branch predictors.  Not one of the discussed designs could lock on to the pattern TTFFTTFF... and predict correctly.  (Except maybe for the neural net one, with a sufficiently advanced neural net, and I&#39;ll bet you cash money that you don&#39;t own a computing device that has such a branch predictor in its processor.)  <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Branch_predictor</a>"},{"owner":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"reply_to_user":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"edited":false,"score":8,"creation_date":1469507635,"post_id":14889969,"comment_id":64551074,"content_license":"CC BY-SA 3.0","body":"@steveha: The Two-level adaptive predictor could lock onto the TTFFTTFF pattern with no issue whatsoever. &quot;Variants of this prediction method are used in most modern microprocessors&quot;. Local branch prediction and Global branch prediction are based on a two level adaptive predictor, they can as well. &quot;Global branch prediction is used in AMD processors, and in Intel Pentium M, Core, Core 2, and Silvermont-based Atom processors&quot;  Also add Agree predictor, Hybrid predictor, Prediction of indirect jumps, to that list. Loop predictor wont lock on, but hits 75%. That leaves only 2 that can&#39;t lock on"},{"owner":{"reputation":97,"user_id":4509583,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zda9x.jpg?s=128&g=1","display_name":"Warren K","link":"https://stackoverflow.com/users/4509583/warren-k"},"reply_to_user":{"reputation":55254,"user_id":845092,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG","display_name":"Mooing Duck","link":"https://stackoverflow.com/users/845092/mooing-duck"},"edited":false,"score":5,"creation_date":1482532327,"post_id":14889969,"comment_id":69820096,"content_license":"CC BY-SA 3.0","body":"@MooingDuck : The diagram in Surt&#39;s <a href=\"http://stackoverflow.com/a/33070112/4509583\">answer below</a> I think explains why TTFFTTFF is in fact the &quot;pathological case&quot; in Saqlain&#39;s example."}],"owner":{"reputation":15760,"user_id":1012551,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/22df608584e3ef466f34afef94f134df?s=128&d=identicon&r=PG","display_name":"Saqlain","link":"https://stackoverflow.com/users/1012551/saqlain"},"comment_count":7,"is_accepted":false,"score":1260,"last_activity_date":1551265112,"last_edit_date":1551265112,"creation_date":1360913056,"answer_id":14889969,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>As data is distributed between 0 and 255 when the array is sorted, around the first half of the iterations will not enter the <code>if</code>-statement (the <code>if</code> statement is shared below).</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>The question is: What makes the above statement not execute in certain cases as in case of sorted data? Here comes the \"branch predictor\". A branch predictor is a digital circuit that tries to guess which way a branch (e.g. an <code>if-then-else</code> structure) will go before this is known for sure. The purpose of the branch predictor is to improve the flow in the instruction pipeline. Branch predictors play a critical role in achieving high effective performance!</p>\n\n<p><strong>Let's do some bench marking to understand it better</strong></p>\n\n<p>The performance of an <code>if</code>-statement depends on whether its condition has a predictable pattern. If the condition is always true or always false, the branch prediction logic in the processor will pick up the pattern. On the other hand, if the pattern is unpredictable, the <code>if</code>-statement will be much more expensive.</p>\n\n<p>Letâs measure the performance of this loop with different conditions:</p>\n\n<pre><code>for (int i = 0; i &lt; max; i++)\n    if (condition)\n        sum++;\n</code></pre>\n\n<p>Here are the timings of the loop with different true-false patterns:</p>\n\n<pre><code>Condition                Pattern             Time (ms)\n-------------------------------------------------------\n(i &amp; 0Ã80000000) == 0    T repeated          322\n\n(i &amp; 0xffffffff) == 0    F repeated          276\n\n(i &amp; 1) == 0             TF alternating      760\n\n(i &amp; 3) == 0             TFFFTFFFâ¦           513\n\n(i &amp; 2) == 0             TTFFTTFFâ¦           1675\n\n(i &amp; 4) == 0             TTTTFFFFTTTTFFFFâ¦   1275\n\n(i &amp; 8) == 0             8T 8F 8T 8F â¦       752\n\n(i &amp; 16) == 0            16T 16F 16T 16F â¦   490\n</code></pre>\n\n<p>A â<strong>bad</strong>â true-false pattern can make an <code>if</code>-statement up to six times slower than a â<strong>good</strong>â pattern! Of course, which pattern is good and which is bad depends on the exact instructions generated by the compiler and on the specific processor.</p>\n\n<p>So there is no doubt about the impact of branch prediction on performance!</p>\n"},{"owner":{"reputation":27352,"user_id":1031591,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1","display_name":"atlaste","link":"https://stackoverflow.com/users/1031591/atlaste"},"comment_count":0,"is_accepted":false,"score":1411,"last_activity_date":1547614041,"last_edit_date":1547614041,"creation_date":1366784788,"answer_id":16184827,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>I just read up on this question and its answers, and I feel an answer is missing.</p>\n\n<p>A common way to eliminate branch prediction that I've found to work particularly good in managed languages is a table lookup instead of using a branch (although I haven't tested it in this case).</p>\n\n<p>This approach works in general if:</p>\n\n<ol>\n<li>it's a small table and is likely to be cached in the processor, and</li>\n<li>you are running things in a quite tight loop and/or the processor can preload the data.</li>\n</ol>\n\n<p><strong>Background and why</strong></p>\n\n<p>From a processor perspective, your memory is slow. To compensate for the difference in speed, a couple of caches are built into your processor (L1/L2 cache). So imagine that you're doing your nice calculations and figure out that you need a piece of memory. The processor will get its 'load' operation and loads the piece of memory into cache -- and then uses the cache to do the rest of the calculations. Because memory is relatively slow, this 'load' will slow down your program.</p>\n\n<p>Like branch prediction, this was optimized in the Pentium processors: the processor predicts that it needs to load a piece of data and attempts to load that into the cache before the operation actually hits the cache. As we've already seen, branch prediction sometimes goes horribly wrong -- in the worst case scenario you need to go back and actually wait for a memory load, which will take forever (<strong>in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!</strong>).</p>\n\n<p>Fortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.</p>\n\n<p>The first thing we need to know is what is <em>small</em>? While smaller is generally better, a rule of thumb is to stick to lookup tables that are &lt;= 4096 bytes in size. As an upper limit: if your lookup table is larger than 64K it's probably worth reconsidering.</p>\n\n<p><strong>Constructing a table</strong></p>\n\n<p>So we've figured out that we can create a small table. Next thing to do is get a lookup function in place. Lookup functions are usually small functions that use a couple of basic integer operations (and, or, xor, shift, add, remove and perhaps multiply). You want to have your input translated by the lookup function to some kind of 'unique key' in your table, which then simply gives you the answer of all the work you wanted it to do.</p>\n\n<p>In this case: >= 128 means we can keep the value, &lt; 128 means we get rid of it. The easiest way to do that is by using an 'AND': if we keep it, we AND it with 7FFFFFFF; if we want to get rid of it, we AND it with 0. Notice also that 128 is a power of 2 -- so we can go ahead and make a table of 32768/128 integers and fill it with one zero and a lot of 7FFFFFFFF's.</p>\n\n<p><strong>Managed languages</strong></p>\n\n<p>You might wonder why this works well in managed languages. After all, managed languages check the boundaries of the arrays with a branch to ensure you don't mess up...</p>\n\n<p>Well, not exactly... :-)</p>\n\n<p>There has been quite some work on eliminating this branch for managed languages. For example:</p>\n\n\n\n<pre class=\"lang-cs prettyprint-override\"><code>for (int i = 0; i &lt; array.Length; ++i)\n{\n   // Use array[i]\n}\n</code></pre>\n\n<p>In this case, it's obvious to the compiler that the boundary condition will never be hit. At least the Microsoft JIT compiler (but I expect Java does similar things) will notice this and remove the check altogether. WOW, that means no branch. Similarly, it will deal with other obvious cases.</p>\n\n<p>If you run into trouble with lookups in managed languages -- the key is to add a <code>&amp; 0x[something]FFF</code> to your lookup function to make the boundary check predictable -- and watch it going faster.</p>\n\n<p><strong>The result of this case</strong></p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>// Generate data\nint arraySize = 32768;\nint[] data = new int[arraySize];\n\nRandom random = new Random(0);\nfor (int c = 0; c &lt; arraySize; ++c)\n{\n    data[c] = random.Next(256);\n}\n\n/*To keep the spirit of the code intact, I'll make a separate lookup table\n(I assume we cannot modify 'data' or the number of loops)*/\n\nint[] lookup = new int[256];\n\nfor (int c = 0; c &lt; 256; ++c)\n{\n    lookup[c] = (c &gt;= 128) ? c : 0;\n}\n\n// Test\nDateTime startTime = System.DateTime.Now;\nlong sum = 0;\n\nfor (int i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (int j = 0; j &lt; arraySize; ++j)\n    {\n        /* Here you basically want to use simple operations - so no\n        random branches, but things like &amp;, |, *, -, +, etc. are fine. */\n        sum += lookup[data[j]];\n    }\n}\n\nDateTime endTime = System.DateTime.Now;\nConsole.WriteLine(endTime - startTime);\nConsole.WriteLine(\"sum = \" + sum);\nConsole.ReadLine();\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27352,"user_id":1031591,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1","display_name":"atlaste","link":"https://stackoverflow.com/users/1031591/atlaste"},"edited":false,"score":35,"creation_date":1375099524,"post_id":17782979,"comment_id":26185793,"content_license":"CC BY-SA 3.0","body":"Right, you can also just use the bit directly and multiply (<code>data[c]&gt;&gt;7</code> - which is discussed somewhere here as well); I intentionally left this solution out, but of course you are correct. Just a small note: The rule of thumb for lookup tables is that if it fits in 4KB (because of caching), it&#39;ll work - preferably make the table as small as possible. For managed languages I&#39;d push that to 64KB, for low-level languages like C++ and C, I&#39;d probably reconsider (that&#39;s just my experience). Since <code>typeof(int) = 4</code>, I&#39;d try to stick to max 10 bits."},{"owner":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"reply_to_user":{"reputation":27352,"user_id":1031591,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1","display_name":"atlaste","link":"https://stackoverflow.com/users/1031591/atlaste"},"edited":false,"score":23,"creation_date":1375135333,"post_id":17782979,"comment_id":26206652,"content_license":"CC BY-SA 3.0","body":"I think indexing with the 0/1 value will probably be faster than an integer multiply, but I guess if performance is really critical you should profile it.  I agree that small lookup tables are essential to avoid cache pressure, but clearly if you have a bigger cache you can get away with a bigger lookup table, so 4KB is more a rule of thumb than a hard rule.  I think you meant <code>sizeof(int) == 4</code>?  That would be true for 32-bit.  My two-year-old cell phone has a 32KB L1 cache, so even a 4K lookup table might work, especially if the lookup values were a byte instead of an int."},{"owner":{"reputation":15572,"user_id":2187042,"user_type":"registered","accept_rate":53,"profile_image":"https://i.stack.imgur.com/otBg3.jpg?s=128&g=1","display_name":"Richard Tingle","link":"https://stackoverflow.com/users/2187042/richard-tingle"},"edited":false,"score":16,"creation_date":1393947504,"post_id":17782979,"comment_id":33658701,"content_license":"CC BY-SA 3.0","body":"Possibly I&#39;m missing something but in your <code>j</code> equals 0 or 1 method why don&#39;t you just multiply your value by <code>j</code> before adding it rather than using the array indexing (possibly should be multiplied by <code>1-j</code> rather than <code>j</code>)"},{"owner":{"reputation":27352,"user_id":1031591,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1","display_name":"atlaste","link":"https://stackoverflow.com/users/1031591/atlaste"},"edited":false,"score":8,"creation_date":1395132305,"post_id":17782979,"comment_id":34186464,"content_license":"CC BY-SA 3.0","body":"@steveha Multiplication should be faster, I tried looking it up in the Intel books, but couldn&#39;t find it... either way, benchmarking also gives me that result here."},{"owner":{"reputation":27352,"user_id":1031591,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/s3MiH.jpg?s=128&g=1","display_name":"atlaste","link":"https://stackoverflow.com/users/1031591/atlaste"},"edited":false,"score":12,"creation_date":1395132731,"post_id":17782979,"comment_id":34186699,"content_license":"CC BY-SA 3.0","body":"@steveha P.S.: another possible answer would be <code>int c = data[j]; sum += c &amp; -(c &gt;&gt; 7);</code> which requires no multiplications at all."},{"owner":{"reputation":3097,"user_id":3070062,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f20c7574a287e2a9be02000157f65532?s=128&d=identicon&r=PG&f=1","display_name":"Falco","link":"https://stackoverflow.com/users/3070062/falco"},"edited":false,"score":1,"creation_date":1396451702,"post_id":17782979,"comment_id":34796004,"content_license":"CC BY-SA 3.0","body":"Good answer - since a lookup-table can also handle complex cases, where we cannot easily cheat with bit-manipulation"},{"owner":{"reputation":32809,"user_id":116186,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/dc5f7c3937e6844cb776d2004b903578?s=128&d=identicon&r=PG","display_name":"Petter","link":"https://stackoverflow.com/users/116186/petter"},"edited":false,"score":1,"creation_date":1404485763,"post_id":17782979,"comment_id":38070759,"content_license":"CC BY-SA 3.0","body":"Zain is correct. The âifâ is just hidden in the lookup table. The code is faster because the lookup table is hidden OUTSIDE the 100000 iterations. There is nothign to gain from using a lookup table for this problem."},{"owner":{"reputation":2229,"user_id":1685098,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/285de66759f2353fcbe6121465e10d04?s=128&d=identicon&r=PG","display_name":"Logan Pickup","link":"https://stackoverflow.com/users/1685098/logan-pickup"},"edited":false,"score":1,"creation_date":1414443702,"post_id":17782979,"comment_id":41807953,"content_license":"CC BY-SA 3.0","body":"<code>i = (x &lt; node-&gt;value); node = node-&gt;link[i];</code> doesn&#39;t have an explicit branch, but it still contains a comparison; it depends a lot on the target architecture as to whether this can be resolved without a branch or not. Since it can be done on x86 (using either CMOV or LAHF) and ARM (conditional add or move), which are the only architectures I use, this is possibly not important!"},{"owner":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"edited":false,"score":1,"creation_date":1414451157,"post_id":17782979,"comment_id":41810917,"content_license":"CC BY-SA 3.0","body":"On what architecture would an expression like <code>(x &lt; node-&gt;value)</code> require a branch to evaluate?  All the architectures with which I am familiar have a &quot;flags&quot; register, and it is simple to extract the desired flag value.  I guess on the Pentium 4 the flag bit extraction might be slow as IIRC that chip doesn&#39;t have dedicated shifting hardware for addresses, but borrows the ALU to shift bits.  But I don&#39;t know where an actual branch would be needed.  Hmm, your examples were conditional... the idea is that once you extract the bit from flags, you can just use indexing with no branch."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":1,"creation_date":1551357444,"post_id":17782979,"comment_id":96616372,"content_license":"CC BY-SA 4.0","body":"Bit shifting is a zero-cost operation in ARM, so you may find the bit-shifted version is faster on ARM."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":1,"creation_date":1558962425,"post_id":17782979,"comment_id":99261002,"content_license":"CC BY-SA 4.0","body":"What about cache sizes, L1, L2, etc.? Having to go to main memory for a table lookup would be killer. Can you address that in your answer?"}],"owner":{"reputation":66354,"user_id":166949,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/tIFie.png?s=128&g=1","display_name":"steveha","link":"https://stackoverflow.com/users/166949/steveha"},"comment_count":11,"is_accepted":false,"score":1187,"last_activity_date":1611741816,"last_edit_date":1611741816,"creation_date":1374481770,"answer_id":17782979,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>One way to avoid branch prediction errors is to build a lookup table, and index it using the data.  Stefan de Bruijn discussed that in his answer.</p>\n<p>But in this case, we know values are in the range [0, 255] and we only care about values &gt;= 128.  That means we can easily extract a single bit that will tell us whether we want a value or not: by shifting the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and we only want to add the value when we have a 1 bit.  Let's call this bit the &quot;decision bit&quot;.</p>\n<p>By using the 0/1 value of the decision bit as an index into an array, we can make code that will be equally fast whether the data is sorted or not sorted.  Our code will always add a value, but when the decision bit is 0, we will add the value somewhere we don't care about.  Here's the code:</p>\n<pre><code>// Test\nclock_t start = clock();\nlong long a[] = {0, 0};\nlong long sum;\n\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        int j = (data[c] &gt;&gt; 7);\n        a[j] += data[c];\n    }\n}\n\ndouble elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\nsum = a[1];\n</code></pre>\n<p>This code wastes half of the adds but never has a branch prediction failure.  It's tremendously faster on random data than the version with an actual if statement.</p>\n<p>But in my testing, an explicit lookup table was slightly faster than this, probably because indexing into a lookup table was slightly faster than bit shifting.  This shows how my code sets up and uses the lookup table (unimaginatively called <code>lut</code> for &quot;LookUp Table&quot; in the code).  Here's the C++ code:</p>\n<pre><code>// Declare and then fill in the lookup table\nint lut[256];\nfor (unsigned c = 0; c &lt; 256; ++c)\n    lut[c] = (c &gt;= 128) ? c : 0;\n\n// Use the lookup table after it is built\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        sum += lut[data[c]];\n    }\n}\n</code></pre>\n<p>In this case, the lookup table was only 256 bytes, so it fits nicely in a cache and all was fast.  This technique wouldn't work well if the data was 24-bit values and we only wanted half of them... the lookup table would be far too big to be practical.  On the other hand, we can combine the two techniques shown above: first shift the bits over, then index a lookup table.  For a 24-bit value that we only want the top half value, we could potentially shift the data right by 12 bits, and be left with a 12-bit value for a table index.  A 12-bit table index implies a table of 4096 values, which might be practical.</p>\n<p>The technique of indexing into an array, instead of using an <code>if</code> statement, can be used for deciding which pointer to use.  I saw a library that implemented binary trees, and instead of having two named pointers (<code>pLeft</code> and <code>pRight</code> or whatever) had a length-2 array of pointers and used the &quot;decision bit&quot; technique to decide which one to follow.  For example, instead of:</p>\n<pre><code>if (x &lt; node-&gt;value)\n    node = node-&gt;pLeft;\nelse\n    node = node-&gt;pRight;\n</code></pre>\n<p>this library would do something like:</p>\n<pre><code>i = (x &lt; node-&gt;value);\nnode = node-&gt;link[i];\n</code></pre>\n<p>Here's a link to this code: <a href=\"https://web.archive.org/web/20190207151651/https://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx\" rel=\"noreferrer\">Red Black Trees</a>, <em>Eternally Confuzzled</em></p>\n"},{"comments":[{"owner":{"reputation":322587,"user_id":85371,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG","display_name":"sehe","link":"https://stackoverflow.com/users/85371/sehe"},"edited":false,"score":27,"creation_date":1374683490,"post_id":17828251,"comment_id":26040119,"content_license":"CC BY-SA 3.0","body":"<code>sum= 3137536</code> - clever. That&#39;s kinda obviously not the point of the question. The question is clearly about explaining surprising performance characteristics. I&#39;m inclined to say that the addition of doing <code>std::partition</code> instead of <code>std::sort</code> is valuable. Though the actual question extends to more than just the synthetic benchmark given."},{"owner":{"reputation":48046,"user_id":1196549,"user_type":"registered","accept_rate":46,"profile_image":"https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG","display_name":"Yves Daoust","link":"https://stackoverflow.com/users/1196549/yves-daoust"},"reply_to_user":{"reputation":138235,"user_id":298661,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG","display_name":"Puppy","link":"https://stackoverflow.com/users/298661/puppy"},"edited":false,"score":14,"creation_date":1374698251,"post_id":17828251,"comment_id":26048383,"content_license":"CC BY-SA 3.0","body":"@DeadMG: this is indeed not the standard dichotomic search for a given key, but a search for the partitioning index; it requires a single compare per iteration. But don&#39;t rely on this code, I have not checked it. If you are interested in a guaranteed correct implementation, let me know."}],"owner":{"reputation":48046,"user_id":1196549,"user_type":"registered","accept_rate":46,"profile_image":"https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG","display_name":"Yves Daoust","link":"https://stackoverflow.com/users/1196549/yves-daoust"},"comment_count":2,"is_accepted":false,"score":1077,"last_activity_date":1557574272,"last_edit_date":1557574272,"creation_date":1374652659,"answer_id":17828251,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>In the sorted case, you can do better than relying on successful branch prediction or any branchless comparison trick: completely remove the branch.</p>\n\n<p>Indeed, the array is partitioned in a contiguous zone with <code>data &lt; 128</code> and another with <code>data &gt;= 128</code>. So you should find the partition point with a <a href=\"https://en.wikipedia.org/wiki/Dichotomic_search\" rel=\"noreferrer\">dichotomic search</a> (using <code>Lg(arraySize) = 15</code> comparisons), then do a straight accumulation from that point.</p>\n\n<p>Something like (unchecked)</p>\n\n<pre><code>int i= 0, j, k= arraySize;\nwhile (i &lt; k)\n{\n  j= (i + k) &gt;&gt; 1;\n  if (data[j] &gt;= 128)\n    k= j;\n  else\n    i= j;\n}\nsum= 0;\nfor (; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>or, slightly more obfuscated</p>\n\n<pre><code>int i, k, j= (i + k) &gt;&gt; 1;\nfor (i= 0, k= arraySize; i &lt; k; (data[j] &gt;= 128 ? k : i)= j)\n  j= (i + k) &gt;&gt; 1;\nfor (sum= 0; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>A yet faster approach, that gives an <strong>approximate</strong> solution for both sorted or unsorted is: <code>sum= 3137536;</code> (assuming a truly uniform distribution, 16384 samples with expected value 191.5) <strong>:-)</strong></p>\n"},{"comments":[{"owner":{"reputation":16488,"user_id":4767498,"user_type":"registered","accept_rate":87,"profile_image":"https://lh3.googleusercontent.com/-u6daZXYwzxs/AAAAAAAAAAI/AAAAAAAAABI/0xXoH0XUtkc/photo.jpg?sz=128","display_name":"M.kazem Akhgary","link":"https://stackoverflow.com/users/4767498/m-kazem-akhgary"},"edited":false,"score":1,"creation_date":1507733382,"post_id":31210295,"comment_id":80330289,"content_license":"CC BY-SA 3.0","body":"how are two instructions executed together? is this done with separate cpu cores or is pipeline instruction is integrated in single cpu core?"},{"owner":{"reputation":1309,"user_id":6583956,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/rM8OA.jpg?s=128&g=1","display_name":"Sergey.quixoticaxis.Ivanov","link":"https://stackoverflow.com/users/6583956/sergey-quixoticaxis-ivanov"},"reply_to_user":{"reputation":16488,"user_id":4767498,"user_type":"registered","accept_rate":87,"profile_image":"https://lh3.googleusercontent.com/-u6daZXYwzxs/AAAAAAAAAAI/AAAAAAAAABI/0xXoH0XUtkc/photo.jpg?sz=128","display_name":"M.kazem Akhgary","link":"https://stackoverflow.com/users/4767498/m-kazem-akhgary"},"edited":false,"score":1,"creation_date":1509695112,"post_id":31210295,"comment_id":81130628,"content_license":"CC BY-SA 3.0","body":"@M.kazemAkhgary It&#39;s all inside one logical core. If you&#39;re interested, this is nicely described for example in <a href=\"https://software.intel.com/en-us/articles/intel-sdm\" rel=\"nofollow noreferrer\">Intel Software Developer Manual</a>"}],"owner":{"reputation":9494,"user_id":1627741,"user_type":"registered","accept_rate":53,"profile_image":"https://i.stack.imgur.com/YXvvz.jpg?s=128&g=1","display_name":"Harsh Sharma","link":"https://stackoverflow.com/users/1627741/harsh-sharma"},"comment_count":2,"is_accepted":false,"score":879,"last_activity_date":1523391206,"last_edit_date":1523391206,"creation_date":1435937752,"answer_id":31210295,"question_id":11227809,"content_license":"CC BY-SA 3.0","body":"<p>The above behavior is happening because of Branch prediction.</p>\n\n<p>To understand branch prediction one must first understand <strong>Instruction Pipeline</strong>:</p>\n\n<p>Any instruction is broken into a sequence of steps so that different steps can be executed concurrently in parallel. This technique is known as instruction pipeline and this is used to increase throughput in modern processors. To understand this better please see this <a href=\"https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation\" rel=\"noreferrer\">example on Wikipedia</a>.</p>\n\n<p>Generally, modern processors have quite long pipelines, but for ease let's consider these 4 steps only.</p>\n\n<ol>  \n  <li>IF -- Fetch the instruction from memory \n  <li>ID -- Decode the instruction\n  <li>EX -- Execute the instruction \n  <li>WB -- Write back to CPU register\n</ol>\n\n<p><strong><em>4-stage pipeline in general for 2 instructions.</em></strong>\n<img src=\"https://i.stack.imgur.com/PqBBR.png\" alt=\"4-stage pipeline in general\"></p>\n\n<p>Moving back to the above question let's consider the following instructions:</p>\n\n<pre><code>                        A) if (data[c] &gt;= 128)\n                                /\\\n                               /  \\\n                              /    \\\n                        true /      \\ false\n                            /        \\\n                           /          \\\n                          /            \\\n                         /              \\\n              B) sum += data[c];          C) for loop or print().\n</code></pre>\n\n<p>Without branch prediction, the following would occur:</p>\n\n<p>To execute instruction B or instruction C the processor will have to wait till the instruction A doesn't reach till EX stage in the pipeline, as the decision to go to instruction B or instruction C depends on the result of instruction A. So the pipeline will look like this.</p>\n\n<p><strong><em>when if condition returns true:</em></strong>\n<img src=\"https://i.stack.imgur.com/0H4gP.png\" alt=\"enter image description here\"></p>\n\n<p><strong><em>When if condition returns false:</em></strong>\n<img src=\"https://i.stack.imgur.com/APpca.png\" alt=\"enter image description here\"></p>\n\n<p>As a result of waiting for the result of instruction A, the total CPU cycles spent in the above case (without branch prediction; for both true and false) is 7.</p>\n\n<p><strong>So what is branch prediction?</strong></p>\n\n<p>Branch predictor will try to guess which way a branch (an if-then-else structure) will go before this is known for sure. It will not wait for the instruction A to reach the EX stage of the pipeline, but it will guess the decision and go to that instruction (B or C in case of our example).</p>\n\n<p><strong><em>In case of a correct guess, the pipeline looks something like this:</em></strong>\n<img src=\"https://i.stack.imgur.com/ZYUbs.png\" alt=\"enter image description here\"></p>\n\n<p>If it is later detected that the guess was wrong then the partially executed instructions are discarded and the pipeline starts over with the correct branch, incurring a delay. \nThe time that is wasted in case of a branch misprediction is equal to the number of stages in the pipeline from the fetch stage to the execute stage. Modern microprocessors tend to have quite long pipelines so that the misprediction delay is between 10 and 20 clock cycles. The longer the pipeline the greater the need for a good <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">branch predictor</a>.</p>\n\n<p>In the OP's code, the first time when the conditional, the branch predictor does not have any information to base up prediction, so the first time it will randomly choose the next instruction. Later in the for loop, it can base the prediction on the history. \nFor an array sorted in ascending order, there are three possibilities:</p>\n\n<ol>\n<li> All the elements are less than 128\n<li> All the elements are greater than 128\n<li> Some starting new elements are less than 128 and later it become greater than 128\n</ol>\n\n<p>Let us assume that the predictor will always assume the true branch on the first run.</p>\n\n<p>So in the first case, it will always take the true branch since historically all its predictions are correct.\nIn the 2nd case, initially it will predict wrong, but after a few iterations, it will predict correctly.\nIn the 3rd case, it will initially predict correctly till the elements are less than 128. After which it will fail for some time and the correct itself when it sees branch prediction failure in history. </p>\n\n<p>In all these cases the failure will be too less in number and as a result, only a few times it will need to discard the partially executed instructions and start over with the correct branch, resulting in fewer CPU cycles. </p>\n\n<p>But in case of a random unsorted array, the prediction will need to discard the partially executed instructions and start over with the correct branch most of the time and result in more CPU cycles compared to the sorted array.</p>\n"},{"owner":{"reputation":13524,"user_id":1313233,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/hBeXC.png?s=128&g=1","display_name":"rkachach","link":"https://stackoverflow.com/users/1313233/rkachach"},"comment_count":0,"is_accepted":false,"score":743,"last_activity_date":1477650491,"last_edit_date":1477650491,"creation_date":1443020267,"answer_id":32742980,"question_id":11227809,"content_license":"CC BY-SA 3.0","body":"<p>In the same line (I think this was not highlighted by any answer) it's good to mention that sometimes (specially in software where the performance mattersâlike in the Linux kernel) you can find some if statements like the following:</p>\n\n<pre><code>if (likely( everything_is_ok ))\n{\n    /* Do something */\n}\n</code></pre>\n\n<p>or similarly:</p>\n\n<pre><code>if (unlikely(very_improbable_condition))\n{\n    /* Do something */    \n}\n</code></pre>\n\n<p>Both <code>likely()</code> and <code>unlikely()</code> are in fact macros that are defined by using something like the GCC's <code>__builtin_expect</code> to help the compiler insert prediction code to favour the condition taking into account the information provided by the user. GCC supports other builtins that could change the behavior of the running program or emit low level instructions like clearing the cache, etc. See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"noreferrer\">this documentation</a> that goes through the available GCC's builtins.</p>\n\n<p>Normally this kind of optimizations are mainly found in hard-real time applications or embedded systems where execution time matters and it's critical. For example, if you are checking for some error condition that only happens 1/10000000 times, then why not inform the compiler about this? This way, by default, the branch prediction would assume that the condition is false.</p>\n"},{"owner":{"reputation":8305,"user_id":4895229,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cc00fb71bd8f252a7ec9fc4216f58c0b?s=128&d=identicon&r=PG&f=1","display_name":"Maciej","link":"https://stackoverflow.com/users/4895229/maciej"},"comment_count":0,"is_accepted":false,"score":730,"last_activity_date":1559234066,"last_edit_date":1559234066,"creation_date":1444437042,"answer_id":33048998,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>Frequently used Boolean operations in C++ produce many branches in the compiled program. If these branches are inside loops and are hard to predict they can slow down execution significantly. Boolean variables are stored as 8-bit integers with the value <code>0</code> for <code>false</code> and <code>1</code> for <code>true</code>.</p>\n\n<p>Boolean variables are overdetermined in the sense that all operators that have Boolean variables as input check if the inputs have any other value than <code>0</code> or <code>1</code>, but operators that have Booleans as output can produce no other value than <code>0</code> or <code>1</code>. This makes operations with Boolean variables as input less efficient than necessary.\nConsider example:</p>\n\n<pre><code>bool a, b, c, d;\nc = a &amp;&amp; b;\nd = a || b;\n</code></pre>\n\n<p>This is typically implemented by the compiler in the following way:</p>\n\n<pre><code>bool a, b, c, d;\nif (a != 0) {\n    if (b != 0) {\n        c = 1;\n    }\n    else {\n        goto CFALSE;\n    }\n}\nelse {\n    CFALSE:\n    c = 0;\n}\nif (a == 0) {\n    if (b == 0) {\n        d = 0;\n    }\n    else {\n        goto DTRUE;\n    }\n}\nelse {\n    DTRUE:\n    d = 1;\n}\n</code></pre>\n\n<p>This code is far from optimal. The branches may take a long time in case of mispredictions. The Boolean operations can be made much more efficient if it is known with certainty that the operands have no other values than <code>0</code> and <code>1</code>. The reason why the compiler does not make such an assumption is that the variables might have other values if they are uninitialized or come from unknown sources. The above code can be optimized if <code>a</code> and <code>b</code> has been initialized to valid values or if they come from operators that produce Boolean output. The optimized code looks like this:</p>\n\n<pre><code>char a = 0, b = 1, c, d;\nc = a &amp; b;\nd = a | b;\n</code></pre>\n\n<p><code>char</code> is used instead of <code>bool</code> in order to make it possible to use the bitwise operators (<code>&amp;</code> and <code>|</code>) instead of the Boolean operators (<code>&amp;&amp;</code> and <code>||</code>). The bitwise operators are single instructions that take only one clock cycle. The OR operator (<code>|</code>) works even if <code>a</code> and <code>b</code> have other values than <code>0</code> or <code>1</code>. The AND operator (<code>&amp;</code>) and the EXCLUSIVE OR operator (<code>^</code>) may give inconsistent results if the operands have other values than <code>0</code> and <code>1</code>.</p>\n\n<p><code>~</code> can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be <code>0</code> or <code>1</code> by XOR'ing it with <code>1</code>:</p>\n\n<pre><code>bool a, b;\nb = !a;\n</code></pre>\n\n<p>can be optimized to:</p>\n\n<pre><code>char a = 0, b;\nb = a ^ 1;\n</code></pre>\n\n<p><code>a &amp;&amp; b</code> cannot be replaced with <code>a &amp; b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>false</code> ( <code>&amp;&amp;</code> will not evaluate <code>b</code>, <code>&amp;</code> will). Likewise, <code>a || b</code> can not be replaced with <code>a | b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>true</code>.</p>\n\n<p>Using bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:</p>\n\n<pre><code>bool a; double x, y, z;\na = x &gt; y &amp;&amp; z &lt; 5.0;\n</code></pre>\n\n<p>is optimal in most cases (unless you expect the <code>&amp;&amp;</code> expression to generate many branch mispredictions).</p>\n"},{"owner":{"reputation":13487,"user_id":4013258,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1","display_name":"Surt","link":"https://stackoverflow.com/users/4013258/surt"},"comment_count":0,"is_accepted":false,"score":773,"last_activity_date":1485862773,"last_edit_date":1485862773,"creation_date":1444597518,"answer_id":33070112,"question_id":11227809,"content_license":"CC BY-SA 3.0","body":"<p>An official answer would be from</p>\n\n<ol>\n<li><a href=\"https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction\" rel=\"noreferrer\">Intel - Avoiding the Cost of Branch Misprediction</a></li>\n<li><a href=\"https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\" rel=\"noreferrer\">Intel - Branch and Loop Reorganization to Prevent Mispredicts</a></li>\n<li><a href=\"https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart\" rel=\"noreferrer\">Scientific papers - branch prediction computer architecture</a></li>\n<li>Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach</li>\n<li>Articles in scientific publications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.</li>\n</ol>\n\n<p>You can also see from this lovely <a href=\"https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg\" rel=\"noreferrer\">diagram</a> why the branch predictor gets confused.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBMV2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pBMV2.png\" alt=\"2-bit state diagram\"></a></p>\n\n<p>Each element in the original code is a random value</p>\n\n<pre><code>data[c] = std::rand() % 256;\n</code></pre>\n\n<p>so the predictor will change sides as the <code>std::rand()</code> blow.</p>\n\n<p>On the other hand, once it's sorted, the predictor will first move into a state of strongly not taken and when the values change to the high value the predictor will in three runs through change all the way from strongly not taken to strongly taken.</p>\n\n<hr>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":3,"creation_date":1521204439,"post_id":41603849,"comment_id":85643214,"content_license":"CC BY-SA 3.0","body":"That is a very interesting article (in fact, I have just read all of it), but how does it answer the question?"},{"owner":{"reputation":5176,"user_id":601567,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG","display_name":"ForeverLearning","link":"https://stackoverflow.com/users/601567/foreverlearning"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":2,"creation_date":1521214636,"post_id":41603849,"comment_id":85650402,"content_license":"CC BY-SA 3.0","body":"@PeterMortensen I am a bit flummoxed by your question. For example here is one relevant line from that piece:  <code>When the input is unsorted, all the rest of the loop takes substantial time. But with sorted input, the processor is somehow able to spend not just less time in the body of the loop, meaning the buckets at offsets 0x18 and 0x1C, but vanishingly little time on the mechanism of looping.</code>  Author is trying to discuss profiling in the context of code posted here and in the process trying to explain why the sorted case is so much more faster."}],"owner":{"reputation":5176,"user_id":601567,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG","display_name":"ForeverLearning","link":"https://stackoverflow.com/users/601567/foreverlearning"},"comment_count":2,"is_accepted":false,"score":347,"last_activity_date":1610293840,"last_edit_date":1610293840,"creation_date":1484185828,"answer_id":41603849,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>This question has already been answered excellently many times over. Still I'd like to draw the group's attention to yet another interesting analysis.</p>\n<p>Recently this example (modified very slightly) was also used as a way to demonstrate how a piece of code can be profiled within the program itself on Windows. Along the way, the author also shows how to use the results to determine where the code is spending most of its time in both the sorted &amp; unsorted case. Finally the piece also shows how to use a little known feature of the HAL (Hardware Abstraction Layer) to determine just how much branch misprediction is happening in the unsorted case.</p>\n<p>The link is here:\n<a href=\"//www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm\" rel=\"noreferrer\"><strong>A Demonstration of Self-Profiling</strong></a></p>\n"},{"owner":{"reputation":81528,"user_id":5423108,"user_type":"registered","profile_image":"https://i.stack.imgur.com/WtfBG.png?s=128&g=1","display_name":"Alireza","link":"https://stackoverflow.com/users/5423108/alireza"},"comment_count":0,"is_accepted":false,"score":388,"last_activity_date":1525329351,"last_edit_date":1592644375,"creation_date":1497786043,"answer_id":44614591,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>That's for sure!...</p>\n<p><strong>Branch prediction</strong> makes the logic run slower, because of the switching which happens in your code! It's like you are going a straight street or a street with a lot of turnings, for sure the straight one is going to be done quicker!...</p>\n<p>If the array is sorted, your condition is false at the first step: <code>data[c] &gt;= 128</code>, then becomes a true value for the whole way to the end of the street. That's how you get to the end of the logic faster. On the other hand, using an unsorted array, you need a lot of turning and processing which make your code run slower for sure...</p>\n<p>Look at the image I created for you below. Which street is going to be finished faster?</p>\n<p><a href=\"https://i.stack.imgur.com/cSmCa.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cSmCa.jpg\" alt=\"Branch Prediction\" /></a></p>\n<p>So programmatically, <strong>branch prediction</strong> causes the process to be slower...</p>\n<p>Also at the end, it's good to know we have two kinds of branch predictions that each is going to affect your code differently:</p>\n<p><strong>1. Static</strong></p>\n<p><strong>2. Dynamic</strong></p>\n<p><a href=\"https://i.stack.imgur.com/ZfhDu.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZfhDu.jpg\" alt=\"Branch Prediction\" /></a></p>\n<blockquote>\n<p>Static branch prediction is used by the microprocessor the first time\na conditional branch is encountered, and dynamic branch prediction is\nused for succeeding executions of the conditional branch code.</p>\n<p>In order to effectively write your code to take advantage of these\nrules, when writing <strong>if-else</strong> or <strong>switch</strong> statements, check the most\ncommon cases first and work progressively down to the least common.\nLoops do not necessarily require any special ordering of code for\nstatic branch prediction, as only the condition of the loop iterator\nis normally used.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1581307668,"post_id":45503985,"comment_id":106374699,"content_license":"CC BY-SA 4.0","body":"<i>While flushing pipelines is super fast</i>  Not really.  It&#39;s fast compared to a cache miss all the way to DRAM, but on a modern high-performance x86 (like Intel Sandybridge-family) it&#39;s about a dozen cycles.  Although fast recovery does allow it to avoid waiting for all older independent instructions to reach retirement before starting recovery, you still lose a lot of front-end cycles on a mispredict.  <a href=\"//stackoverflow.com/q/50984007\">What exactly happens when a skylake CPU mispredicts a branch?</a>.  (And each cycle can be about 4 instructions of work.)  Bad for high-throughput code."}],"owner":{"reputation":11567,"user_id":6530695,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1","display_name":"Tony Tannous","link":"https://stackoverflow.com/users/6530695/tony-tannous"},"comment_count":1,"is_accepted":false,"score":245,"last_activity_date":1521203445,"last_edit_date":1592644375,"creation_date":1501841232,"answer_id":45503985,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p><strong>Branch-prediction gain!</strong></p>\n<p>It is important to understand that branch misprediction doesn't slow down programs. The cost of a missed prediction is just as if branch prediction didn't exist and you waited for the evaluation of the expression to decide what code to run (further explanation in the next paragraph).</p>\n<pre><code>if (expression)\n{\n    // Run 1\n} else {\n    // Run 2\n}\n</code></pre>\n<p>Whenever there's an <code>if-else</code> \\ <code>switch</code> statement, the expression has to be evaluated to determine which block should be executed. In the assembly code generated by the compiler, conditional <a href=\"https://en.wikipedia.org/wiki/Branch_(computer_science)\" rel=\"noreferrer\">branch</a> instructions are inserted.</p>\n<p>A branch instruction can cause a computer to begin executing a different instruction sequence and thus deviate from its default behavior of executing instructions in order (i.e. if the expression is false, the program skips the code of the <code>if</code> block) depending on some condition, which is the expression evaluation in our case.</p>\n<p>That being said, the compiler tries to predict the outcome prior to it being actually evaluated. It will fetch instructions from the <code>if</code> block, and if the expression turns out to be true, then wonderful! We gained the time it took to evaluate it and made progress in the code; if not then we are running the wrong code, the pipeline is flushed, and the correct block is run.</p>\n<h3>Visualization:</h3>\n<p>Let's say you need to pick route 1 or route 2. Waiting for your partner to check the map, you have stopped at ## and waited, or you could just pick route1 and if you were lucky (route 1 is the correct route), then great you didn't have to wait for your partner to check the map (you saved the time it would have taken him to check the map), otherwise you will just turn back.</p>\n<p>While flushing pipelines is super fast, nowadays taking this gamble is worth it. Predicting sorted data or a data that changes slowly is always easier and better than predicting fast changes.</p>\n<pre><code> O      Route 1  /-------------------------------\n/|\\             /\n |  ---------##/\n/ \\            \\\n                \\\n        Route 2  \\--------------------------------\n</code></pre>\n"},{"owner":{"reputation":5458,"user_id":5068056,"user_type":"registered","profile_image":"https://i.stack.imgur.com/m53CE.jpg?s=128&g=1","display_name":"Farhad","link":"https://stackoverflow.com/users/5068056/farhad"},"comment_count":0,"is_accepted":false,"score":173,"last_activity_date":1610294145,"last_edit_date":1610294145,"creation_date":1507024074,"answer_id":46541691,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>It's about branch prediction. What is it?</p>\n<ul>\n<li><p>A branch predictor is one of the ancient performance improving techniques which still finds relevance into modern architectures. While the simple prediction techniques provide fast lookup and power efficiency they suffer from a high misprediction rate.</p>\n</li>\n<li><p>On the other hand, complex branch predictions âeither neural based or variants of two-level branch prediction âprovide better prediction accuracy, but they consume more power and complexity increases exponentially.</p>\n</li>\n<li><p>In addition to this, in complex prediction techniques the time taken to predict the branches is itself very high âranging from 2 to 5 cycles âwhich is comparable to the execution time of actual branches.</p>\n</li>\n<li><p>Branch prediction is essentially an optimization (minimization) problem where the emphasis is on to achieve lowest possible miss rate, low power consumption, and low complexity with minimum resources.</p>\n</li>\n</ul>\n<p>There really are three different kinds of branches:</p>\n<p><strong>Forward conditional branches</strong> - based on a run-time condition, the PC (program counter) is changed to point to an address forward in the instruction stream.</p>\n<p><strong>Backward conditional branches</strong> - the PC is changed to point backward in the instruction stream. The branch is based on some condition, such as branching backwards to the beginning of a program loop when a test at the end of the loop states the loop should be executed again.</p>\n<p><strong>Unconditional branches</strong> - this includes jumps, procedure calls and returns that have no specific condition. For example, an unconditional jump instruction might be coded in assembly language as simply &quot;jmp&quot;, and the instruction stream must immediately be directed to the target location pointed to by the jump instruction, whereas a conditional jump that might be coded as &quot;jmpne&quot; would redirect the instruction stream only if the result of a comparison of two values in a previous &quot;compare&quot; instructions shows the values to not be equal. (The segmented addressing scheme used by the x86 architecture adds extra complexity, since jumps can be either &quot;near&quot; (within a segment) or &quot;far&quot; (outside the segment). Each type has different effects on branch prediction algorithms.)</p>\n<p><strong>Static/dynamic Branch Prediction</strong>: Static branch prediction is used by the microprocessor the first time a conditional branch is encountered, and dynamic branch prediction is used for succeeding executions of the conditional branch code.</p>\n<p>References:</p>\n<ul>\n<li><p><em><a href=\"//en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">Branch predictor</a></em></p>\n</li>\n<li><p><em><a href=\"//www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm\" rel=\"noreferrer\">A Demonstration of Self-Profiling</a></em></p>\n</li>\n<li><p><em><a href=\"//courses.cs.washington.edu/courses/csep548/06au/lectures/branchPred.pdf\" rel=\"noreferrer\">Branch Prediction Review</a></em></p>\n</li>\n<li><p><em><a href=\"https://web.archive.org/web/20190601170841/https://web.njit.edu/%7Erlopes/Mod5.3.pdf\" rel=\"noreferrer\">Branch Prediction</a> (Using wayback machine)</em></p>\n</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":934,"user_id":1734032,"user_type":"registered","profile_image":"https://i.stack.imgur.com/69zJo.jpg?s=128&g=1","display_name":"mckenzm","link":"https://stackoverflow.com/users/1734032/mckenzm"},"edited":false,"score":3,"creation_date":1564377256,"post_id":47141245,"comment_id":100995393,"content_license":"CC BY-SA 4.0","body":"Almost as good as the Intel marketing animations, and they were obsessed not just with branch prediction but out of order execution, both strategies being &quot;speculative&quot;. Reading ahead in memory and storage (sequential pre-fetch to buffer) is also speculative. It all adds up."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"reply_to_user":{"reputation":934,"user_id":1734032,"user_type":"registered","profile_image":"https://i.stack.imgur.com/69zJo.jpg?s=128&g=1","display_name":"mckenzm","link":"https://stackoverflow.com/users/1734032/mckenzm"},"edited":false,"score":2,"creation_date":1581307399,"post_id":47141245,"comment_id":106374648,"content_license":"CC BY-SA 4.0","body":"@mckenzm: out-of-order speculative exec makes branch prediction even more valuable; as well as hiding fetch/decode bubbles, branch prediction + speculative exec removes control dependencies from critical path latency.  Code inside or after an <code>if()</code> block can execute <i>before</i> the branch condition is known.  Or for a search loop like <code>strlen</code> or <code>memchr</code>, interations can overlap.  If you had to wait for the match-or-not result to be known before running any of the next iteration, you&#39;d bottleneck on cache load + ALU latency instead of throughput."},{"owner":{"reputation":96,"user_id":13830841,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GiTKeJoO6XlvqYIKBwy8DomvzAr7NzTIFGCxDZw=k-s128","display_name":"Hanna Mcquaig","link":"https://stackoverflow.com/users/13830841/hanna-mcquaig"},"edited":false,"score":1,"creation_date":1593562749,"post_id":47141245,"comment_id":110823751,"content_license":"CC BY-SA 4.0","body":"Did you make the example app in JavaFX?"},{"owner":{"reputation":8237,"user_id":3378204,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/jrjpD.png?s=128&g=1","display_name":"Eugene","link":"https://stackoverflow.com/users/3378204/eugene"},"reply_to_user":{"reputation":96,"user_id":13830841,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GiTKeJoO6XlvqYIKBwy8DomvzAr7NzTIFGCxDZw=k-s128","display_name":"Hanna Mcquaig","link":"https://stackoverflow.com/users/13830841/hanna-mcquaig"},"edited":false,"score":1,"creation_date":1593566091,"post_id":47141245,"comment_id":110824362,"content_license":"CC BY-SA 4.0","body":"@HannaMcquaig No, it&#39;s made by Swing. The code is available at <a href=\"https://github.com/Eugene-Mark/branch-predictor-demo\" rel=\"nofollow noreferrer\">github.com/Eugene-Mark/branch-predictor-demo</a>."}],"owner":{"reputation":8237,"user_id":3378204,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/jrjpD.png?s=128&g=1","display_name":"Eugene","link":"https://stackoverflow.com/users/3378204/eugene"},"comment_count":4,"is_accepted":false,"score":316,"last_activity_date":1581300329,"last_edit_date":1581300329,"creation_date":1509984916,"answer_id":47141245,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>As what has already been mentioned by others, what behind the mystery is <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">Branch Predictor</a>. </p>\n\n<p>I'm not trying to add something but explaining the concept in another way. \nThere is a concise introduction on the wiki which contains text and diagram.\nI do like the explanation below which uses a diagram to elaborate the Branch Predictor intuitively.</p>\n\n<blockquote>\n  <p>In computer architecture, a branch predictor is a\n  digital circuit that tries to guess which way a branch (e.g. an\n  if-then-else structure) will go before this is known for sure. The\n  purpose of the branch predictor is to improve the flow in the\n  instruction pipeline. Branch predictors play a critical role in\n  achieving high effective performance in many modern pipelined\n  microprocessor architectures such as x86.</p>\n  \n  <p>Two-way branching is usually implemented with a conditional jump\n  instruction. A conditional jump can either be \"not taken\" and continue\n  execution with the first branch of code which follows immediately\n  after the conditional jump, or it can be \"taken\" and jump to a\n  different place in program memory where the second branch of code is\n  stored. It is not known for certain whether a conditional jump will be\n  taken or not taken until the condition has been calculated and the\n  conditional jump has passed the execution stage in the instruction\n  pipeline (see fig. 1).</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/unxnb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/unxnb.png\" alt=\"figure 1\"></a></p>\n\n<p>Based on the described scenario, I have written an animation demo to show how instructions are executed in a pipeline in different situations.</p>\n\n<ol>\n<li>Without the Branch Predictor. </li>\n</ol>\n\n<blockquote>\n  <p>Without branch prediction, the processor would have to wait until the\n  conditional jump instruction has passed the execute stage before the\n  next instruction can enter the fetch stage in the pipeline.</p>\n</blockquote>\n\n<p>The example contains three instructions and the first one is a conditional jump instruction. The latter two instructions can go into the pipeline until the conditional jump instruction is executed. </p>\n\n<p><a href=\"https://i.stack.imgur.com/GMFQ6.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GMFQ6.gif\" alt=\"without branch predictor\"></a></p>\n\n<p>It will take 9 clock cycles for 3 instructions to be completed.</p>\n\n<ol start=\"2\">\n<li>Use Branch Predictor and don't take a conditional jump. Let's assume that the predict is <strong>not</strong> taking the conditional jump.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/Ms5p1.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ms5p1.gif\" alt=\"enter image description here\"></a></p>\n\n<p>It will take 7 clock cycles for 3 instructions to be completed.</p>\n\n<ol start=\"3\">\n<li>Use Branch Predictor and take a conditional jump. Let's assume that the predict is <strong>not</strong> taking the conditional jump.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/HIpG3.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HIpG3.gif\" alt=\"enter image description here\"></a></p>\n\n<p>It will take 9 clock cycles for 3 instructions to be completed.</p>\n\n<blockquote>\n  <p>The time that is wasted in case of a branch misprediction is equal to\n  the number of stages in the pipeline from the fetch stage to the\n  execute stage. Modern microprocessors tend to have quite long\n  pipelines so that the misprediction delay is between 10 and 20 clock\n  cycles. As a result, making a pipeline longer increases the need for a\n  more advanced branch predictor.</p>\n</blockquote>\n\n<p>As you can see, it seems we don't have a reason not to use Branch Predictor.</p>\n\n<p>It's quite a simple demo that clarifies the very basic part of Branch Predictor. If those gifs are annoying, please feel free to remove them from the answer and visitors can also get the live demo source code from <a href=\"https://github.com/Eugene-Mark/BranchPredictorDemo\" rel=\"noreferrer\">BranchPredictorDemo</a></p>\n"},{"comments":[{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":1,"creation_date":1541507309,"post_id":47457772,"comment_id":93233390,"content_license":"CC BY-SA 4.0","body":"Right, but the setup cost of sorting the array is O(N log N), so breaking early doesn&#39;t help you if the only reason you are sorting the array is to be able to break early. If, however, you have other reasons to pre-sort the array, then yes, this is valuable."},{"owner":{"reputation":44328,"user_id":536086,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG","display_name":"Yochai Timmer","link":"https://stackoverflow.com/users/536086/yochai-timmer"},"edited":false,"score":0,"creation_date":1551270202,"post_id":47457772,"comment_id":96577845,"content_license":"CC BY-SA 4.0","body":"Depends how many times you sort the data compared to how many times you loop on it. The sort in this example is just an example, it doesn&#39;t have to be just before the loop"},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":2,"creation_date":1551356894,"post_id":47457772,"comment_id":96616030,"content_license":"CC BY-SA 4.0","body":"Yes, that&#39;s exactly the point I made in my first comment :-) You say &quot;The branch prediction will miss only once.&quot; But you are not counting the O(N log N) branch prediction misses inside the sort algorithm, which is actually greater than the O(N) branch prediction misses in the unsorted case. So you would need to use the entirety of the sorted data O(log N) times to break even (probably actually closer to O(10 log N), depending on the sort algorithm, e.g. for quicksort, due to cache misses -- mergesort is more cache-coherent, so you would need closer to O(2 log N) usages to break even.)"},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":0,"creation_date":1551357288,"post_id":47457772,"comment_id":96616273,"content_license":"CC BY-SA 4.0","body":"One significant optimization though would be to do only &quot;half a quicksort&quot;, sorting only items less than the target pivot value of 127 (assuming everything less than <i>or equal to</i> the pivot is sorted after the pivot). Once you reach the pivot, sum the elements before the pivot. This would run in O(N) startup time rather than O(N log N), although there will still be a lot of branch prediction misses, probably of the order of O(5 N) based on the numbers I gave before, since it&#39;s half a quicksort."}],"owner":{"reputation":44328,"user_id":536086,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/75d228bb162b779392a94d9364969208?s=128&d=identicon&r=PG","display_name":"Yochai Timmer","link":"https://stackoverflow.com/users/536086/yochai-timmer"},"comment_count":4,"is_accepted":false,"score":177,"last_activity_date":1551779920,"last_edit_date":1551779920,"creation_date":1511447309,"answer_id":47457772,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>Besides the fact that the branch prediction may slow you down, a sorted array has another advantage:   </p>\n\n<p>You can have a stop condition instead of just checking the value, this way you only loop over the relevant data, and ignore the rest.<br>\nThe branch prediction will miss only once.</p>\n\n<pre><code> // sort backwards (higher values first), may be in some other part of the code\n std::sort(data, data + arraySize, std::greater&lt;int&gt;());\n\n for (unsigned c = 0; c &lt; arraySize; ++c) {\n       if (data[c] &lt; 128) {\n              break;\n       }\n       sum += data[c];               \n }\n</code></pre>\n"},{"owner":{"reputation":2158,"user_id":8459055,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ffdc4d783c65c0ab6ff327551fb953c4?s=128&d=identicon&r=PG&f=1","display_name":"omkaartg","link":"https://stackoverflow.com/users/8459055/omkaartg"},"comment_count":0,"is_accepted":false,"score":156,"last_activity_date":1610294342,"last_edit_date":1610294342,"creation_date":1512667709,"answer_id":47700573,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>Sorted arrays are processed faster than an unsorted array, due to a phenomena called branch prediction.</p>\n<p>The branch predictor is a digital circuit (in computer architecture) trying to predict which way a branch will go, improving the flow in the instruction pipeline. The circuit/computer predicts the next step and executes it.</p>\n<p>Making a wrong prediction leads to going back to the previous step, and executing with another prediction. Assuming the prediction is correct, the code will continue to the next step. A wrong prediction results in repeating the same step, until a correct prediction occurs.</p>\n<p>The answer to your question is very simple.</p>\n<p>In an unsorted array, the computer makes multiple predictions, leading to an increased chance of errors.\nWhereas, in a sorted array, the computer makes fewer predictions, reducing the chance of errors.\nMaking more predictions requires more time.</p>\n<p>Sorted Array: Straight Road</p>\n<pre class=\"lang-none prettyprint-override\"><code>____________________________________________________________________________________\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT\n</code></pre>\n<p>Unsorted Array: Curved Road</p>\n<pre><code>______   ________\n|     |__|\n</code></pre>\n<p>Branch prediction: Guessing/predicting which road is straight and following it without checking</p>\n<pre><code>___________________________________________ Straight road\n |_________________________________________|Longer road\n</code></pre>\n<p>Although both the roads reach the same destination, the straight road is shorter, and the other is longer. If then you choose the other by mistake, there is no turning back, and so you will waste some extra time if you choose the longer road. This is similar to what happens in the computer, and I hope this helped you understand better.</p>\n<hr />\n<p>Also I want to cite <a href=\"/u/16940\">@Simon_Weaver</a> from the comments:</p>\n<blockquote>\n<p>It doesnât make fewer predictions - it makes fewer incorrect predictions. It still has to predict for each time through the loop...</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"reply_to_user":{"reputation":5628,"user_id":712526,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG","display_name":"jpaugh","link":"https://stackoverflow.com/users/712526/jpaugh"},"edited":false,"score":1,"creation_date":1526404014,"post_id":47942152,"comment_id":87727753,"content_license":"CC BY-SA 4.0","body":"The other innovation in ARM is the addition of the S instruction suffix, also optional on (almost) all instructions, which if absent, prevents instructions from changing status bits (with the exception of the CMP instruction, whose job is to set status bits, so it doesn&#39;t need the S suffix). This allows you to avoid CMP instructions in many cases, as long as the comparison is with zero or similar (eg. SUBS R0, R0, #1 will set the Z (Zero) bit when R0 reaches zero). Conditionals and the S suffix incur zero overhead. It&#39;s quite a beautiful ISA."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"reply_to_user":{"reputation":5628,"user_id":712526,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG","display_name":"jpaugh","link":"https://stackoverflow.com/users/712526/jpaugh"},"edited":false,"score":2,"creation_date":1526404102,"post_id":47942152,"comment_id":87727802,"content_license":"CC BY-SA 4.0","body":"Not adding the S suffix allows you to have several conditional instructions in a row without worrying that one of them might change the status bits, which might otherwise have the side effect of skipping the rest of the conditional instructions."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1582284859,"post_id":47942152,"comment_id":106733423,"content_license":"CC BY-SA 4.0","body":"Note that the OP is <i>not</i> including the time to sort in their measurement.  It&#39;s probably an overall loss to sort first before running a branch x86 loop, too, even though the non-sorted case makes the loop run a lot slower.  But sorting a big array requires a <i>lot</i> of work."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":1,"creation_date":1582285008,"post_id":47942152,"comment_id":106733504,"content_license":"CC BY-SA 4.0","body":"BTW, you could save an instruction in the loop by indexing relative to the end of the array.  Before the loop, set up <code>R2 = data + arraySize</code>, then start with <code>R1 = -arraySize</code>.  The bottom of the loop becomes <code>adds r1, r1, #1</code> / <code>bnz inner_loop</code>.  Compilers don&#39;t use this optimization for some reason :/  But anyway, predicated execution of the add is not fundamentally different in this case from what you can do with branchless code on other ISAs, like x86 <code>cmov</code>.  Although it&#39;s not as nice: <a href=\"//stackoverflow.com/q/28875325\">gcc optimization flag -O3 makes code slower than -O2</a>"},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":1,"creation_date":1582285220,"post_id":47942152,"comment_id":106733620,"content_license":"CC BY-SA 4.0","body":"(ARM predicated execution truly NOPs the instruction, so you can even use it on loads or stores that would fault, unlike x86 <code>cmov</code> with a memory source operand.  Most ISAs, including AArch64, only have ALU select operations.  So ARM predication can be powerful, and usable more efficiently than branchless code on most ISAs.)"}],"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"comment_count":5,"is_accepted":false,"score":206,"last_activity_date":1603233212,"last_edit_date":1603233212,"creation_date":1513948385,"answer_id":47942152,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>On ARM, there is no branch needed, because every instruction has a 4-bit condition field, which tests (at zero cost) any of <a href=\"https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/condition-codes-1-condition-flags-and-codes\" rel=\"noreferrer\">16 different different conditions</a> that may arise in the Processor Status Register, and if the condition on an instruction is false, the instruction is skipped. This eliminates the need for short branches, and there would be no branch prediction hit for this algorithm. <b>Therefore, the sorted version of this algorithm would run slower than the unsorted version on ARM, because of the extra overhead of sorting.</b></p>\n<p>The inner loop for this algorithm would look something like the following in ARM assembly language:</p>\n<pre class=\"lang-js prettyprint-override\"><code>MOV R0, #0   // R0 = sum = 0\nMOV R1, #0   // R1 = c = 0\nADR R2, data // R2 = addr of data array (put this instruction outside outer loop)\n.inner_loop  // Inner loop branch label\n    LDRB R3, [R2, R1]   // R3 = data[c]\n    CMP R3, #128        // compare R3 to 128\n    ADDGE R0, R0, R3    // if R3 &gt;= 128, then sum += data[c] -- no branch needed!\n    ADD R1, R1, #1      // c++\n    CMP R1, #arraySize  // compare c to arraySize\n    BLT inner_loop      // Branch to inner_loop if c &lt; arraySize\n</code></pre>\n<p><em><strong>But this is actually part of a bigger picture:</strong></em></p>\n<p><code>CMP</code> opcodes always update the status bits in the Processor Status Register (PSR), because that is their purpose, but most other instructions do not touch the PSR unless you add an optional <code>S</code> suffix to the instruction, specifying that the PSR should be updated based on the result of the instruction. <strong>Just like the 4-bit condition suffix, being able to execute instructions without affecting the PSR is a mechanism that reduces the need for branches on ARM, and also facilitates out of order dispatch at the hardware level</strong>, because after performing some operation X that updates the status bits, subsequently (or in parallel) you can do a bunch of other work that explicitly should not affect (or be affected by) the status bits, then you can test the state of the status bits set earlier by X.</p>\n<p>The condition testing field and the optional &quot;set status bit&quot; field can be combined, for example:</p>\n<ul>\n<li><code>ADD R1, R2, R3</code> performs <code>R1 = R2 + R3</code> without updating any status bits.</li>\n<li><code>ADDGE R1, R2, R3</code> performs the same operation only if a previous instruction that affected the status bits resulted in a Greater than or Equal condition.</li>\n<li><code>ADDS R1, R2, R3</code> performs the addition and then updates the <code>N</code>, <code>Z</code>, <code>C</code> and <code>V</code> flags in the Processor Status Register based on whether the result was Negative, Zero, Carried (for unsigned addition), or oVerflowed (for signed addition).</li>\n<li><code>ADDSGE R1, R2, R3</code> performs the addition only if the <code>GE</code> test is true, and then subsequently updates the status bits based on the result of the addition.</li>\n</ul>\n<p>Most processor architectures do not have this ability to specify whether or not the status bits should be updated for a given operation, which can necessitate writing additional code to save and later restore status bits, or may require additional branches, or may limit the processor's out of order execution efficiency: one of the side effects of most CPU instruction set architectures forcibly updating status bits after most instructions is that it is much harder to tease apart which instructions can be run in parallel without interfering with each other. Updating status bits has side effects, therefore has a linearizing effect on code. <strong>ARM's ability to mix and match branch-free condition testing on any instruction with the option to either update or not update the status bits after any instruction is extremely powerful, for both assembly language programmers and compilers, and produces very efficient code.</strong></p>\n<p>When you don't have to branch, you can avoid the time cost of flushing the pipeline for what would otherwise be short branches, and you can avoid the design complexity of many forms of speculative evalution. The performance impact of the initial naive imlementations of the mitigations for many recently discovered processor vulnerabilities (Spectre etc.) shows you just how much the performance of modern processors depends upon complex speculative evaluation logic. With a short pipeline and the dramatically reduced need for branching, ARM just doesn't need to rely on speculative evaluation as much as CISC processors. (Of course high-end ARM implementations do include speculative evaluation, but it's a smaller part of the performance story.)</p>\n<p>If you have ever wondered why ARM has been so phenomenally successful, the brilliant effectiveness and interplay of these two mechanisms (combined with another mechanism that lets you &quot;barrel shift&quot; left or right one of the two arguments of any arithmetic operator or offset memory access operator at zero additional cost) are a big part of the story, because they are some of the greatest sources of the ARM architecture's efficiency. The brilliance of the original designers of the ARM ISA back in 1983, Steve Furber and Roger (now Sophie) Wilson, cannot be overstated.</p>\n"},{"comments":[{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":4,"creation_date":1551356309,"post_id":53689911,"comment_id":96615671,"content_license":"CC BY-SA 4.0","body":"I don&#39;t really see how this proves anything? The only thing you have shown is that &quot;not doing all the work of sorting the whole array takes less time than sorting the whole array&quot;. Your claim that this &quot;also runs fastest&quot; is very architecture-dependent. See my answer about how this works on ARM. PS you could make your code faster on non-ARM architectures by putting the summation inside the 200-element block loop, sorting in reverse, and then using Yochai Timmer&#39;s suggestion of breaking once you get an out-of range value. That way each 200-element block summation can be terminated early."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1576248293,"post_id":53689911,"comment_id":104848977,"content_license":"CC BY-SA 4.0","body":"If you just want to implement the algorithm efficiently over unsorted data, you would do that operation branchlessly (and with SIMD, e.g. with x86 <code>pcmpgtb</code> to find elements with their high bit set, then AND to zero smaller elements).  Spending any time actually sorting chunks would be slower.  A branchless version would have data-independent performance, also proving that the cost came from branch misprediction.  Or just use performance counters to observe that directly, like Skylake <code>int_misc.clear_resteer_cycles</code> or <code>int_misc.recovery_cycles</code> to count front-end idle cycles from mispredicts"},{"owner":{"reputation":2036,"user_id":2297550,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG","display_name":"user2297550","link":"https://stackoverflow.com/users/2297550/user2297550"},"edited":false,"score":1,"creation_date":1585896266,"post_id":53689911,"comment_id":107930122,"content_license":"CC BY-SA 4.0","body":"Both comments above seem to ignore the general algorithmic issues and complexity, in favor of advocating specialized hardware with special machine instructions. I find the first one particularly petty in that it blithely dismisses the important general insights in this answer in blind favor of specialized machine instructions."}],"owner":{"reputation":2036,"user_id":2297550,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/20092a7b6e8eebf36a9c28951bd2261f?s=128&d=identicon&r=PG","display_name":"user2297550","link":"https://stackoverflow.com/users/2297550/user2297550"},"comment_count":3,"is_accepted":false,"score":80,"last_activity_date":1562040497,"last_edit_date":1562040497,"creation_date":1544336297,"answer_id":53689911,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>The assumption by other answers that one needs to sort the data is not correct.</p>\n\n<p>The following code does not sort the entire array, but only 200-element segments of it, and thereby runs the fastest.</p>\n\n<p>Sorting only k-element sections completes the pre-processing in linear time, <code>O(n)</code>, rather than the <code>O(n.log(n))</code> time needed to sort the entire array.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    int data[32768]; const int l = sizeof data / sizeof data[0];\n\n    for (unsigned c = 0; c &lt; l; ++c)\n        data[c] = std::rand() % 256;\n\n    // sort 200-element segments, not the whole array\n    for (unsigned c = 0; c + 200 &lt;= l; c += 200)\n        std::sort(&amp;data[c], &amp;data[c + 200]);\n\n    clock_t start = clock();\n    long long sum = 0;\n\n    for (unsigned i = 0; i &lt; 100000; ++i) {\n        for (unsigned c = 0; c &lt; sizeof data / sizeof(int); ++c) {\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    std::cout &lt;&lt; static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sum = \" &lt;&lt; sum &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This also \"proves\" that it has nothing to do with any algorithmic issue such as sort order, and it is indeed branch prediction.</p>\n"},{"owner":{"reputation":43911,"user_id":2011147,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1","display_name":"Selcuk","link":"https://stackoverflow.com/users/2011147/selcuk"},"comment_count":0,"is_accepted":false,"community_owned_date":1571096080,"score":66,"last_activity_date":1610294575,"last_edit_date":1610294575,"creation_date":1571096080,"answer_id":58385294,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p><em><a href=\"//stackoverflow.blog/2019/10/11/c-creator-bjarne-stroustrup-answers-our-top-five-c-questions/\">Bjarne Stroustrup's Answer</a> to this question:</em></p>\n<p>That sounds like an interview question. Is it true? How would you know? It is a bad idea to answer questions about efficiency without first doing some measurements, so it is important to know how to measure.</p>\n<p>So, I tried with a vector of a million integers and got:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Already sorted    32995 milliseconds\nShuffled          125944 milliseconds\n\nAlready sorted    18610 milliseconds\nShuffled          133304 milliseconds\n\nAlready sorted    17942 milliseconds\nShuffled          107858 milliseconds\n</code></pre>\n<p>I ran that a few times to be sure. Yes, the phenomenon is real. My key code was:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void run(vector&lt;int&gt;&amp; v, const string&amp; label)\n{\n    auto t0 = system_clock::now();\n    sort(v.begin(), v.end());\n    auto t1 = system_clock::now();\n    cout &lt;&lt; label\n         &lt;&lt; duration_cast&lt;microseconds&gt;(t1 â t0).count()\n         &lt;&lt; &quot; milliseconds\\n&quot;;\n}\n\nvoid tst()\n{\n    vector&lt;int&gt; v(1'000'000);\n    iota(v.begin(), v.end(), 0);\n    run(v, &quot;already sorted &quot;);\n    std::shuffle(v.begin(), v.end(), std::mt19937{ std::random_device{}() });\n    run(v, &quot;shuffled    &quot;);\n}\n</code></pre>\n<p>At least the phenomenon is real with this compiler, standard library, and optimizer settings. Different implementations can and do give different answers. In fact, someone did do a more systematic study (a quick web search will find it) and most implementations show that effect.</p>\n<p>One reason is branch prediction: the key operation in the sort algorithm is <code>âif(v[i] &lt; pivot]) â¦â</code> or equivalent. For a sorted sequence that test is always true whereas, for a random sequence, the branch chosen varies randomly.</p>\n<p>Another reason is that when the vector is already sorted, we never need to move elements to their correct position. The effect of these little details is the factor of five or six that we saw.</p>\n<p>Quicksort (and sorting in general) is a complex study that has attracted some of the greatest minds of computer science. A good sort function is a result of both choosing a good algorithm and paying attention to hardware performance in its implementation.</p>\n<p>If you want to write efficient code, you need to know a bit about machine architecture.</p>\n"},{"comments":[{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1576247362,"post_id":58531294,"comment_id":104848500,"content_license":"CC BY-SA 4.0","body":"The instructions stay hot in the CPU&#39;s L1 instruction cache regardless of mispredicts.  The problem is fetching them into the <i>pipeline</i> in the right order, before the immediately-previous instructions have decoded and finished executing."}],"owner":{"reputation":1136,"user_id":3821643,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bc25ab7aa68cfa9d7b0ca53a15d5f40c?s=128&d=identicon&r=PG&f=1","display_name":"hatirlatici","link":"https://stackoverflow.com/users/3821643/hatirlatici"},"comment_count":1,"is_accepted":false,"score":60,"last_activity_date":1610573038,"last_edit_date":1610573038,"creation_date":1571866540,"answer_id":58531294,"question_id":11227809,"content_license":"CC BY-SA 4.0","body":"<p>This question is rooted in <em>branch prediction models</em> on CPUs. I'd recommend reading this paper:</p>\n<p><a href=\"https://pdfs.semanticscholar.org/5634/4be375cfed0f79cb9d009ac838682e1bace3.pdf\" rel=\"noreferrer\"><strong>Increasing the Instruction Fetch Rate via Multiple Branch Prediction and a Branch Address Cache</strong></a></p>\n<p>When you have sorted elements, the <a href=\"https://en.wikipedia.org/wiki/Instruction_register\" rel=\"noreferrer\">IR</a> can not be bothered to fetch all CPU instructions, again and again. It fetches them from the cache.</p>\n"}],"owner":{"reputation":454572,"user_id":87234,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FkjBe.png?s=128&g=1","display_name":"GManNickG","link":"https://stackoverflow.com/users/87234/gmannickg"},"comment_count":6,"is_answered":true,"view_count":1582649,"protected_date":1399067470,"accepted_answer_id":11227902,"answer_count":25,"score":25319,"last_activity_date":1611741816,"creation_date":1340805096,"last_edit_date":1611521897,"question_id":11227809,"link":"https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>Here is a piece of C++ code that shows some very peculiar behavior. For some strange reason, sorting the data miraculously makes the code almost six times faster:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // Generate data\n    const unsigned arraySize = 32768;\n    int data[arraySize];\n\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n        data[c] = std::rand() % 256;\n\n    // !!! With this, the next loop runs faster.\n    std::sort(data, data + arraySize);\n\n    // Test\n    clock_t start = clock();\n    long long sum = 0;\n\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        // Primary loop\n        for (unsigned c = 0; c &lt; arraySize; ++c)\n        {\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    double elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n    std::cout &lt;&lt; elapsedTime &lt;&lt; std::endl;\n    std::cout &lt;&lt; &quot;sum = &quot; &lt;&lt; sum &lt;&lt; std::endl;\n}\n</code></pre>\n<ul>\n<li>Without <code>std::sort(data, data + arraySize);</code>, the code runs in 11.54 seconds.</li>\n<li>With the sorted data, the code runs in 1.93 seconds.</li>\n</ul>\n<hr />\n<p>Initially, I thought this might be just a language or compiler anomaly, so I tried Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        // Generate data\n        int arraySize = 32768;\n        int data[] = new int[arraySize];\n\n        Random rnd = new Random(0);\n        for (int c = 0; c &lt; arraySize; ++c)\n        data[c] = rnd.nextInt() % 256;\n\n        // !!! With this, the next loop runs faster\n        Arrays.sort(data);\n\n        // Test\n        long start = System.nanoTime();\n        long sum = 0;\n\n        for (int i = 0; i &lt; 100000; ++i)\n        {\n            // Primary loop\n            for (int c = 0; c &lt; arraySize; ++c)\n            {\n                if (data[c] &gt;= 128)\n                    sum += data[c];\n            }\n        }\n\n        System.out.println((System.nanoTime() - start) / 1000000000.0);\n        System.out.println(&quot;sum = &quot; + sum);\n    }\n}\n</code></pre>\n<p>With a similar but less extreme result.</p>\n<hr />\n<p>My first thought was that sorting brings the data into the <a href=\"https://en.wikipedia.org/wiki/CPU_cache\" rel=\"noreferrer\">cache</a>, but then I thought how silly that was because the array was just generated.</p>\n<ul>\n<li>What is going on?</li>\n<li>Why is processing a sorted array faster than processing an unsorted array?</li>\n</ul>\n<p>The code is summing up some independent terms, so the order should not matter.</p>\n"},{"tags":["java","date","timezone"],"comments":[{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":26,"creation_date":1311754954,"post_id":6841333,"comment_id":8132127,"content_license":"CC BY-SA 3.0","body":"This might be a locale problem."},{"owner":{"reputation":18363,"user_id":36537,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/05e8bace9f460f632af6b699a80408e9?s=128&d=identicon&r=PG","display_name":"Phil H","link":"https://stackoverflow.com/users/36537/phil-h"},"edited":false,"score":86,"creation_date":1342082046,"post_id":6841333,"comment_id":15107031,"content_license":"CC BY-SA 3.0","body":"The real answer is to always, always use seconds since an epoch for logging, like the Unix epoch, with 64 bit integer representation (signed, if you want to allow stamps before the epoch). Any real-world time system has some non-linear, non-monotonic behaviour like leap hours or daylight savings."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":10,"creation_date":1413283155,"post_id":6841333,"comment_id":41375681,"content_license":"CC BY-SA 3.0","body":"A great video about these kind of things: <a href=\"http://www.youtube.com/watch?v=-5wpm-gesOY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=-5wpm-gesOY</a>"},{"owner":{"reputation":9167,"user_id":209139,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/083585eca61df2e31aa5768fa62872aa?s=128&d=identicon&r=PG","display_name":"TRiG","link":"https://stackoverflow.com/users/209139/trig"},"reply_to_user":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":3,"creation_date":1435940627,"post_id":6841333,"comment_id":50423566,"content_license":"CC BY-SA 3.0","body":"And another from the same guy, @Thorbj&#248;rnRavnAndersen: <a href=\"https://www.youtube.com/watch?v=Uqjg8Kk1HXo\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Uqjg8Kk1HXo</a> (Leap seconds). (This one is from Tom Scott&#39;s own YouTube channel, not from Computerphile.)"},{"owner":{"reputation":3565,"user_id":1303846,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/da3b47c80b3c9d6f9e37a88b2ca51e6a?s=128&d=identicon&r=PG","display_name":"Remember Monica","link":"https://stackoverflow.com/users/1303846/remember-monica"},"reply_to_user":{"reputation":18363,"user_id":36537,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/05e8bace9f460f632af6b699a80408e9?s=128&d=identicon&r=PG","display_name":"Phil H","link":"https://stackoverflow.com/users/36537/phil-h"},"edited":false,"score":1,"creation_date":1600041468,"post_id":6841333,"comment_id":112954628,"content_license":"CC BY-SA 4.0","body":"@Phil H &quot;seconds since the epoch&quot; (i.e. Unix time) is non-linear as well, in the sense that POSIX seconds are not SI seconds and vary in length"}],"answers":[{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"comment_count":0,"is_accepted":true,"score":11294,"last_activity_date":1549531790,"last_edit_date":1549531790,"creation_date":1311755470,"answer_id":6841479,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>It's a time zone change on December 31st in Shanghai.</p>\n\n<p>See <a href=\"http://www.timeanddate.com/worldclock/clockchange.html?n=237&amp;year=1927\" rel=\"noreferrer\">this page</a> for details of 1927 in Shanghai. Basically at midnight at the end of 1927, the clocks went back 5 minutes and 52 seconds. So \"1927-12-31 23:54:08\" actually happened twice, and it looks like Java is parsing it as the <em>later</em> possible instant for that local date/time - hence the difference.</p>\n\n<p>Just another episode in the often weird and wonderful world of time zones.</p>\n\n<p><strong>EDIT:</strong> Stop press! History changes...</p>\n\n<p>The original question would no longer demonstrate quite the same behaviour, if rebuilt with version 2013a of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">TZDB</a>. In 2013a, the result would be 358 seconds, with a transition time of 23:54:03 instead of 23:54:08.</p>\n\n<p>I only noticed this because I'm collecting questions like this in Noda Time, in the form of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">unit tests</a>... The test has now been changed, but it just goes to show - not even historical data is safe.</p>\n\n<p><strong>EDIT:</strong> History has changed again...</p>\n\n<p>In TZDB 2014f, the time of the change has moved to 1900-12-31, and it's now a mere 343 second change (so the time between <code>t</code> and <code>t+1</code> is 344 seconds, if you see what I mean).</p>\n\n<p><strong>EDIT:</strong> To answer a question around a transition at 1900... it looks like the Java timezone implementation treats <em>all</em> time zones as simply being in their standard time for any instant before the start of 1900 UTC:</p>\n\n<pre><code>import java.util.TimeZone;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        long startOf1900Utc = -2208988800000L;\n        for (String id : TimeZone.getAvailableIDs()) {\n            TimeZone zone = TimeZone.getTimeZone(id);\n            if (zone.getRawOffset() != zone.getOffset(startOf1900Utc - 1)) {\n                System.out.println(id);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The code above produces no output on my Windows machine. So any time zone which has any offset other than its standard one at the start of 1900 will count that as a transition. TZDB itself has some data going back earlier than that, and doesn't rely on any idea of a \"fixed\" standard time (which is what <code>getRawOffset</code> assumes to be a valid concept) so other libraries needn't introduce this artificial transition.</p>\n"},{"comments":[{"owner":{"reputation":22874,"user_id":181106,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/9503d8699f2f4e733131d4e025990483?s=128&d=identicon&r=PG","display_name":"uckelman","link":"https://stackoverflow.com/users/181106/uckelman"},"edited":false,"score":0,"creation_date":1606517832,"post_id":6841572,"comment_id":114993233,"content_license":"CC BY-SA 4.0","body":"It happens twice a year anywhere that observes DST."}],"owner":{"reputation":324869,"user_id":16883,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0382297f273df0a544b0c6c2734de096?s=128&d=identicon&r=PG","display_name":"Michael Borgwardt","link":"https://stackoverflow.com/users/16883/michael-borgwardt"},"comment_count":1,"is_accepted":false,"score":1659,"last_activity_date":1311755931,"creation_date":1311755931,"answer_id":6841572,"question_id":6841333,"content_license":"CC BY-SA 3.0","body":"<p>You've encountered a <a href=\"http://timeanddate.com/worldclock/clockchange.html?n=237&amp;year=1927\" rel=\"noreferrer\">local time discontinuity</a>:</p>\n\n<blockquote>\n  <p>When local standard time was about to reach Sunday, 1. January 1928,\n  00:00:00 clocks were turned backward 0:05:52 hours to Saturday, 31.\n  December 1927, 23:54:08 local standard time instead</p>\n</blockquote>\n\n<p>This is not particularly strange and has happened pretty much everywhere at one time or another as timezones were switched or changed due to political or administrative actions.</p>\n"},{"comments":[{"owner":{"reputation":1028,"user_id":5488931,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-m_iZb7s8hVY/AAAAAAAAAAI/AAAAAAAAAHE/d595uJKE6SQ/photo.jpg?sz=128","display_name":"Dag &#197;gren","link":"https://stackoverflow.com/users/5488931/dag-%c3%85gren"},"edited":false,"score":2,"creation_date":1604333489,"post_id":6858453,"comment_id":114309259,"content_license":"CC BY-SA 4.0","body":"None of these points would affect this result - it falls squarely under the third bullet point - and moreover, this is a time several decades before UTC was even defined, and thus can not really meaningfully be expressed in UTC."}],"owner":{"reputation":39649,"user_id":545127,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/RJgJM.png?s=128&g=1","display_name":"Raedwald","link":"https://stackoverflow.com/users/545127/raedwald"},"comment_count":1,"is_accepted":false,"score":696,"last_activity_date":1311853808,"creation_date":1311853808,"answer_id":6858453,"question_id":6841333,"content_license":"CC BY-SA 3.0","body":"<p>The moral of this strangeness is:</p>\n\n<ul>\n<li>Use dates and times in UTC wherever possible.</li>\n<li>If you can not display a date or time in UTC, always indicate the time-zone.</li>\n<li>If you can not require an input date/time in UTC, require an explicitly indicated time-zone.</li>\n</ul>\n"},{"owner":{"reputation":3827,"user_id":870838,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9449552c6a88853c2fbc39f51d9f8a1c?s=128&d=identicon&r=PG","display_name":"PatrickO","link":"https://stackoverflow.com/users/870838/patricko"},"comment_count":0,"is_accepted":false,"score":381,"last_activity_date":1325016244,"last_edit_date":1325016244,"creation_date":1312044904,"answer_id":6884599,"question_id":6841333,"content_license":"CC BY-SA 3.0","body":"<p>When incrementing time you should convert back to UTC and then add or subtract. Use the local time only for display.</p>\n\n<p>This way you will be able to walk through any periods where hours or minutes happen twice.</p>\n\n<p>If you converted to UTC, add each second, and convert to local time for display. You would go through 11:54:08 p.m. <a href=\"http://en.wikipedia.org/wiki/Local_mean_time\" rel=\"noreferrer\">LMT</a> - 11:59:59 p.m. LMT and then 11:54:08 p.m. <a href=\"http://en.wikipedia.org/wiki/Central_Time_Zone_%28North_America%29\" rel=\"noreferrer\">CST</a> - 11:59:59 p.m. CST.</p>\n"},{"owner":{"reputation":3853,"user_id":1393004,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/67b967112075ba17b7836a7a533eb948?s=128&d=identicon&r=PG&f=1","display_name":"Rajshri","link":"https://stackoverflow.com/users/1393004/rajshri"},"comment_count":0,"is_accepted":false,"score":321,"last_activity_date":1577202749,"last_edit_date":1577202749,"creation_date":1337146315,"answer_id":10612572,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>Instead of converting each date, you can use the following code: </p>\n\n<pre><code>long difference = (sDt4.getTime() - sDt3.getTime()) / 1000;\nSystem.out.println(difference);\n</code></pre>\n\n<p>And then see that the result is:</p>\n\n<pre><code>1\n</code></pre>\n"},{"owner":{"reputation":283110,"user_id":53013,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/6d43da5df0e52fc31c55e6a227bb23f4?s=128&d=identicon&r=PG","display_name":"Daniel C. Sobral","link":"https://stackoverflow.com/users/53013/daniel-c-sobral"},"comment_count":0,"is_accepted":false,"score":210,"last_activity_date":1577146665,"last_edit_date":1577146665,"creation_date":1388760187,"answer_id":20906129,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>As explained by others, there's a time discontinuity there. There are two possible timezone offsets for <code>1927-12-31 23:54:08</code> at <code>Asia/Shanghai</code>, but only one offset for <code>1927-12-31 23:54:07</code>. So, depending on which offset is used, there's either a one second difference or a 5 minutes and 53 seconds difference.</p>\n\n<p>This slight shift of offsets, instead of the usual one-hour daylight savings (summer time) we are used to, obscures the problem a bit.</p>\n\n<p>Note that the 2013a update of the timezone database moved this discontinuity a few seconds earlier, but the effect would still be observable.</p>\n\n<p>The new <code>java.time</code> package on Java 8 let use see this more clearly, and provide tools to handle it. Given:</p>\n\n<pre><code>DateTimeFormatterBuilder dtfb = new DateTimeFormatterBuilder();\ndtfb.append(DateTimeFormatter.ISO_LOCAL_DATE);\ndtfb.appendLiteral(' ');\ndtfb.append(DateTimeFormatter.ISO_LOCAL_TIME);\nDateTimeFormatter dtf = dtfb.toFormatter();\nZoneId shanghai = ZoneId.of(\"Asia/Shanghai\");\n\nString str3 = \"1927-12-31 23:54:07\";  \nString str4 = \"1927-12-31 23:54:08\";  \n\nZonedDateTime zdt3 = LocalDateTime.parse(str3, dtf).atZone(shanghai);\nZonedDateTime zdt4 = LocalDateTime.parse(str4, dtf).atZone(shanghai);\n\nDuration durationAtEarlierOffset = Duration.between(zdt3.withEarlierOffsetAtOverlap(), zdt4.withEarlierOffsetAtOverlap());\n\nDuration durationAtLaterOffset = Duration.between(zdt3.withLaterOffsetAtOverlap(), zdt4.withLaterOffsetAtOverlap());\n</code></pre>\n\n<p>Then <code>durationAtEarlierOffset</code> will be one second, while <code>durationAtLaterOffset</code> will be five minutes and 53 seconds.</p>\n\n<p>Also, these two offsets are the same:</p>\n\n<pre><code>// Both have offsets +08:05:52\nZoneOffset zo3Earlier = zdt3.withEarlierOffsetAtOverlap().getOffset();\nZoneOffset zo3Later = zdt3.withLaterOffsetAtOverlap().getOffset();\n</code></pre>\n\n<p>But these two are different:</p>\n\n<pre><code>// +08:05:52\nZoneOffset zo4Earlier = zdt4.withEarlierOffsetAtOverlap().getOffset();\n\n// +08:00\nZoneOffset zo4Later = zdt4.withLaterOffsetAtOverlap().getOffset();\n</code></pre>\n\n<p>You can see the same problem comparing <code>1927-12-31 23:59:59</code> with <code>1928-01-01 00:00:00</code>, though, in this case, it is the earlier offset that produces the longer divergence, and it is the earlier date that has two possible offsets.</p>\n\n<p>Another way to approach this is to check whether there's a transition going on. We can do this like this:</p>\n\n<pre><code>// Null\nZoneOffsetTransition zot3 = shanghai.getRules().getTransition(ld3.toLocalDateTime);\n\n// An overlap transition\nZoneOffsetTransition zot4 = shanghai.getRules().getTransition(ld3.toLocalDateTime);\n</code></pre>\n\n<p>You can check whether the transition is an overlap where there's more than one valid offset for that date/time or a gap where that date/time is not valid for that zone id - by using the <code>isOverlap()</code> and <code>isGap()</code> methods on <code>zot4</code>.</p>\n\n<p>I hope this helps people handle this sort of issue once Java 8 becomes widely available, or to those using Java 7 who adopt the JSR 310 backport.</p>\n"},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"comment_count":0,"is_accepted":false,"score":237,"last_activity_date":1545006682,"last_edit_date":1545006682,"creation_date":1392677052,"answer_id":21840785,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>I'm sorry to say, but the time discontinuity has moved a bit in</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6_.28December_11.2C_2006.29\" rel=\"noreferrer\">JDK 6</a> two years ago, and in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7_.28July_28.2C_2011.29\" rel=\"noreferrer\">JDK 7</a> just recently in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#cite_note-131\" rel=\"noreferrer\">update 25</a>.</p>\n\n<p>Lesson to learn: avoid non-UTC times at all costs, except maybe for display.</p>\n"},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"comment_count":0,"is_accepted":false,"score":175,"last_activity_date":1603165257,"last_edit_date":1603165257,"creation_date":1417017497,"answer_id":27153569,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p><code>IMHO</code> the pervasive, <em>implicit</em> localization in Java is its single largest design flaw. It may be intended for user interfaces, but frankly, who really uses Java for user interfaces today except for some IDEs where you can basically ignore localization because programmers aren't exactly the target audience for it. You can fix it (especially on Linux servers) by:</p>\n<ul>\n<li>export <code>LC_ALL=C TZ=UTC</code></li>\n<li>set your system clock to UTC</li>\n<li>never use localized implementations unless absolutely necessary (ie for display only)</li>\n</ul>\n<p>To the <a href=\"https://www.jcp.org/\" rel=\"noreferrer\">Java Community Process</a> members I recommend:</p>\n<ul>\n<li>make localized methods, not the default, but require the user to explicitly request localization.</li>\n<li>use <code>UTF-8/UTC</code> as the <em>FIXED</em> default instead because that's simply the default today. There is no reason to do something else, except if you want to produce threads like this.</li>\n</ul>\n<p>I mean, come on, aren't global static variables an anti-OO pattern? Nothing else is those pervasive defaults given by some rudimentary environment variables.......</p>\n"},{"owner":{"reputation":1339,"user_id":9194639,"user_type":"registered","profile_image":"https://i.stack.imgur.com/xcKsd.png?s=128&g=1","display_name":"new QOpenGLWidget","link":"https://stackoverflow.com/users/9194639/new-qopenglwidget"},"comment_count":0,"is_accepted":false,"score":26,"last_activity_date":1605402089,"last_edit_date":1605402089,"creation_date":1549835255,"answer_id":54621415,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>As others said, it's a time change in 1927 in Shanghai.</p>\n<p>It was <code>23:54:07</code> in Shanghai, in the local standard time, but then after 5 minutes and 52 seconds, it turned to the next day at <code>00:00:00</code>, and then local standard time changed back to <code>23:54:08</code>. So, that's why the difference between the two times is 343 seconds, not 1 second, as you would have expected.</p>\n<p>The time can also mess up in other places like the US. The US has Daylight Saving Time. When the Daylight Saving Time starts the time goes forward 1 hour. But after a while, the Daylight Saving Time ends, and it goes backward 1 hour back to the standard time zone. So sometimes when comparing times in the US the difference is about <code>3600</code> seconds not 1 second.</p>\n<p>But there is something different about these two-time changes. The latter changes continuously and the former was just a change. It didn't change back or change again by the same amount.</p>\n<p><strong>It's better to use UTC unless if needed to use non-UTC time like in display.</strong></p>\n"},{"owner":{"reputation":76,"user_id":14286083,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qfvEg.jpg?s=128&g=1","display_name":"Vlad","link":"https://stackoverflow.com/users/14286083/vlad"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1608640069,"creation_date":1608640069,"answer_id":65408755,"question_id":6841333,"content_license":"CC BY-SA 4.0","body":"<p>To avoid that issue, when incrementing time you should convert back to UTC and then add or subtract.</p>\n<p>This way you will be able to walk through any periods where hours or minutes happen twice.</p>\n<p>If you converted to UTC, add each second, and convert to local time for display. You would go through 11:54:08 p.m. LMT - 11:59:59 p.m. LMT and then 11:54:08 p.m. CST - 11:59:59 p.m. CST.</p>\n"}],"owner":{"reputation":175216,"user_id":342235,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/88e5a9eb011a73ab970ddc8cfb05ff85?s=128&d=identicon&r=PG","display_name":"Freewind","link":"https://stackoverflow.com/users/342235/freewind"},"comment_count":5,"is_answered":true,"view_count":722626,"protected_date":1433866025,"accepted_answer_id":6841479,"answer_count":10,"score":7098,"last_activity_date":1612337743,"creation_date":1311754558,"last_edit_date":1611728448,"question_id":6841333,"link":"https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result","title":"Why Is Subtracting These Two Times (in 1927) Giving A Strange Result?","body":"<p>If I run the following program, which parses two date strings referencing times 1 second apart and compares them:</p>\n<pre><code>public static void main(String[] args) throws ParseException {\n    SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \n    String str3 = &quot;1927-12-31 23:54:07&quot;;  \n    String str4 = &quot;1927-12-31 23:54:08&quot;;  \n    Date sDt3 = sf.parse(str3);  \n    Date sDt4 = sf.parse(str4);  \n    long ld3 = sDt3.getTime() /1000;  \n    long ld4 = sDt4.getTime() /1000;\n    System.out.println(ld4-ld3);\n}\n</code></pre>\n<p><strong>The output is:</strong></p>\n<pre><code>353\n</code></pre>\n<p>Why is <code>ld4-ld3</code>, not <code>1</code> (as I would expect from the one-second difference in the times), but <code>353</code>?</p>\n<p>If I change the dates to times 1 second later:</p>\n<pre><code>String str3 = &quot;1927-12-31 23:54:08&quot;;  \nString str4 = &quot;1927-12-31 23:54:09&quot;;  \n</code></pre>\n<p>Then <code>ld4-ld3</code> will be <code>1</code>.</p>\n<hr />\n<p><strong>Java version:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java version &quot;1.6.0_22&quot;\nJava(TM) SE Runtime Environment (build 1.6.0_22-b04)\nDynamic Code Evolution Client VM (build 0.2-b02-internal, 19.0-b04-internal, mixed mode)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Timezone(`TimeZone.getDefault()`):\n\nsun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,\noffset=28800000,dstSavings=0,\nuseDaylight=false,\ntransitions=19,\nlastRule=null]\n\nLocale(Locale.getDefault()): zh_CN\n</code></pre>\n"},{"tags":["java","methods","parameter-passing","pass-by-reference","pass-by-value"],"comments":[{"owner":{"reputation":316,"user_id":1570563,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/81e16b8ea6e8a122717edb93e97819b9?s=128&d=identicon&r=PG","display_name":"jlau","link":"https://stackoverflow.com/users/1570563/jlau"},"edited":false,"score":2,"creation_date":1596540905,"post_id":40480,"comment_id":111837812,"content_license":"CC BY-SA 4.0","body":"We would more commonly say that a variable &quot;passed-by-reference&quot; can be mutated. The term appears in textbooks because language theorists needed a way to distinguish how you treat primitive data types (int, bool, byte) from complex and structured objects (array, streams, class) -- that is to say, those of possibly unbounded memory allocation."},{"owner":{"reputation":173,"user_id":11670196,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ad0ea391d628290be8b71786bfb2e217?s=128&d=identicon&r=PG&f=1","display_name":"Tobias","link":"https://stackoverflow.com/users/11670196/tobias"},"edited":false,"score":2,"creation_date":1603194290,"post_id":40480,"comment_id":113953468,"content_license":"CC BY-SA 4.0","body":"I want to note that you do not have to think about this in most cases. I programmed java for many years until i learned c++. Until this point in time i had no clue what pass-by-reference and pass-by-value are. The intuitive solution always worked for me, which is why java is one of the best languages for beginners. So if you currently are worried, if your function needs a reference or a value, just pass it as it is and you will be fine."},{"owner":{"reputation":24630,"user_id":287316,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/583742a8405c2eec28d313bad6dec7f4?s=128&d=identicon&r=PG&f=1","display_name":"The Student","link":"https://stackoverflow.com/users/287316/the-student"},"edited":false,"score":5,"creation_date":1603220756,"post_id":40480,"comment_id":113966837,"content_license":"CC BY-SA 4.0","body":"Java pass the reference by value."},{"owner":{"reputation":12969,"user_id":365188,"user_type":"registered","accept_rate":94,"profile_image":"https://lh3.googleusercontent.com/-MBLY-SyRbzI/AAAAAAAAAAI/AAAAAAAAGUs/5C3q3oyuzx8/photo.jpg?sz=128","display_name":"Ozair Kafray","link":"https://stackoverflow.com/users/365188/ozair-kafray"},"edited":false,"score":1,"creation_date":1604991385,"post_id":40480,"comment_id":114508863,"content_license":"CC BY-SA 4.0","body":"Putting it very concisely, this confusion arises because in Java all non-primitive data types are handled/accessed by <i>references</i>. However, passing is always be value. So  for all non-primitive types reference is passed by its value. All primitive types are also passed by value."},{"owner":{"reputation":805,"user_id":8932910,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b8ed75b474f7bc5dcf6dfb8c778d17a2?s=128&d=identicon&r=PG&f=1","display_name":"jack","link":"https://stackoverflow.com/users/8932910/jack"},"edited":false,"score":0,"creation_date":1609016813,"post_id":40480,"comment_id":115731775,"content_license":"CC BY-SA 4.0","body":"For those coming from <code>C++</code> and start to be confused when touching <code>Java</code>, <a href=\"https://stackoverflow.com/a/65460603/8932910\">this might help as shortcut</a>."},{"owner":{"reputation":139,"user_id":9873819,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-h2ycFG_H3Rw/AAAAAAAAAAI/AAAAAAAADF8/YWHnb782vCM/photo.jpg?sz=128","display_name":"Natasha Kurian","link":"https://stackoverflow.com/users/9873819/natasha-kurian"},"edited":false,"score":0,"creation_date":1611136368,"post_id":40480,"comment_id":116350889,"content_license":"CC BY-SA 4.0","body":"I found this quite helpful:  <a href=\"https://www.baeldung.com/java-pass-by-value-or-pass-by-reference\" rel=\"nofollow noreferrer\">baeldung.com/java-pass-by-value-or-pass-by-reference</a>"},{"owner":{"reputation":635,"user_id":9868445,"user_type":"registered","profile_image":"https://i.stack.imgur.com/QBHGw.jpg?s=128&g=1","display_name":"aderchox","link":"https://stackoverflow.com/users/9868445/aderchox"},"edited":false,"score":0,"creation_date":1614493716,"post_id":40480,"comment_id":117399237,"content_license":"CC BY-SA 4.0","body":"It&#39;s the difference between foo.bar(sth) and foo = sth. In the 1st one, the object is being changed using the variable that is pointing to it, and the variable itself that is pointing to the object has not been changed. In the 2nd one however, the variable itself that used to point to the object has changed and is now pointing to another object. If you have a C++ background: A pointer is a variable that holds a memory address, while a reference has the same memory address as the item it references. <b>In Java indeed, a pointer is passed by value, but Javaistas happen to call it a <i>reference</i></b>!"}],"answers":[{"comments":[{"owner":{"reputation":72747,"user_id":3553087,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Q2cTS.gif?s=128&g=1","display_name":"Brian Goetz","link":"https://stackoverflow.com/users/3553087/brian-goetz"},"edited":false,"score":0,"creation_date":1604245977,"post_id":40499,"comment_id":114282119,"content_license":"CC BY-SA 4.0","body":"JVMS 2.2 makes this pretty clear: There are ... two kinds of values that can be stored in variables, passed as arguments, returned by methods, and operated upon: <i>primitive values</i> and <i>reference values</i>.&quot;  Object references are values.  Everything is passed by value."},{"owner":{"reputation":1619,"user_id":2485825,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/aa74d22ac430874ead67c4e170806910?s=128&d=identicon&r=PG","display_name":"georgiana_e","link":"https://stackoverflow.com/users/2485825/georgiana-e"},"edited":false,"score":0,"creation_date":1614670126,"post_id":40499,"comment_id":117448511,"content_license":"CC BY-SA 4.0","body":"<a href=\"https://www.geeksforgeeks.org/g-fact-31-java-is-strictly-pass-by-value/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/g-fact-31-java-is-strictly-pass-by-value</a>"}],"owner":{"reputation":50511,"user_id":1666,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/96dda17df0db1cc0c3762c505a7d1352?s=128&d=identicon&r=PG","display_name":"SCdF","link":"https://stackoverflow.com/users/1666/scdf"},"comment_count":2,"is_accepted":false,"community_owned_date":1347646975,"score":740,"last_activity_date":1453433827,"last_edit_date":1453433827,"creation_date":1220386761,"answer_id":40499,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java is always pass by value, with no exceptions, <strong>ever</strong>.</p>\n\n<p>So how is it that anyone can be at all confused by this, and believe that Java is pass by reference, or think they have an example of Java acting as pass by reference? The key point is that Java <strong>never</strong> provides direct access to the values of <em>objects themselves</em>, in <em>any</em> circumstances. The only access to objects is through a <em>reference</em> to that object. Because Java objects are <em>always</em> accessed through a reference, rather than directly, it is common to talk about fields and variables <em>and method arguments</em> as being <em>objects</em>, when pedantically they are only <em>references to objects</em>. <strong>The confusion stems from this (strictly speaking, incorrect) change in nomenclature.</strong></p>\n\n<p>So, when calling a method</p>\n\n<ul>\n<li>For primitive arguments (<code>int</code>, <code>long</code>, etc.), the pass by value is <em>the actual value</em> of the primitive (for example, 3).</li>\n<li>For objects, the pass by value is the value of <em>the reference to the object</em>.</li>\n</ul>\n\n<p>So if you have <code>doSomething(foo)</code> and <code>public void doSomething(Foo foo) { .. }</code> the two Foos have copied <em>references</em> that point to the same objects.</p>\n\n<p>Naturally, passing by value a reference to an object looks very much like (and is indistinguishable in practice from) passing an object by reference.</p>\n"},{"owner":{"reputation":77429,"user_id":1310,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/9cb44812fc259d55c656dd8038ea5af3?s=128&d=identicon&r=PG","display_name":"ScArcher2","link":"https://stackoverflow.com/users/1310/scarcher2"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":351,"last_activity_date":1220386808,"creation_date":1220386808,"answer_id":40501,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>Java passes references by value.</p>\n\n<p>So you can't change the reference that gets passed in.</p>\n"},{"owner":{"reputation":64910,"user_id":4203,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/646c35309b1b074fba9cf2e6a482ac3b?s=128&d=identicon&r=PG","display_name":"Hank Gay","link":"https://stackoverflow.com/users/4203/hank-gay"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":186,"last_activity_date":1531216653,"last_edit_date":1531216653,"creation_date":1220386864,"answer_id":40507,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Basically, reassigning Object parameters doesn't affect the argument, e.g.,</p>\n\n<pre><code>private void foo(Object bar) {\n    bar = null;\n}\n\npublic static void main(String[] args) {\n    String baz = \"Hah!\";\n    foo(baz);\n    System.out.println(baz);\n}\n</code></pre>\n\n<p>will print out <code>\"Hah!\"</code> instead of <code>null</code>. The reason this works is because <code>bar</code> is a copy of the value of <code>baz</code>, which is just a reference to <code>\"Hah!\"</code>. If it were the actual reference itself, then <code>foo</code> would have redefined <code>baz</code> to <code>null</code>.</p>\n"},{"owner":{"reputation":6293,"user_id":3305,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/9f88abf7dbaa66d72efc2e3cda54c732?s=128&d=identicon&r=PG","display_name":"John Channing","link":"https://stackoverflow.com/users/3305/john-channing"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":191,"last_activity_date":1220387010,"creation_date":1220387010,"answer_id":40514,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>Java passes references to objects by value.</p>\n"},{"comments":[{"owner":{"reputation":117,"user_id":12383992,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c0fc561f53edb1508f4c372b9068c38?s=128&d=identicon&r=PG&f=1","display_name":"dbrewster","link":"https://stackoverflow.com/users/12383992/dbrewster"},"edited":false,"score":1,"creation_date":1601402615,"post_id":40523,"comment_id":113395142,"content_license":"CC BY-SA 4.0","body":"so what happens to &quot;Fifi&quot; in the 1st example? Does it cease to exist, was it never created, or does it exist in the heap but without a reference variable in the stack?"},{"owner":{"reputation":2592,"user_id":1289801,"user_type":"registered","accept_rate":30,"profile_image":"https://www.gravatar.com/avatar/8a1c3093e5ea650e39c4a875f62a0bd4?s=128&d=identicon&r=PG","display_name":"TMOTTM","link":"https://stackoverflow.com/users/1289801/tmottm"},"edited":false,"score":0,"creation_date":1602873224,"post_id":40523,"comment_id":113867725,"content_license":"CC BY-SA 4.0","body":"What do you mean by the last sentence <code>but it is not possible to change the value of the variable aDog itself.</code>?"},{"owner":{"reputation":1515,"user_id":3230708,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/3ba0a3fe017d7c55f7741bcb315f4824?s=128&d=identicon&r=PG&f=1","display_name":"user36800","link":"https://stackoverflow.com/users/3230708/user36800"},"edited":false,"score":11,"creation_date":1603824361,"post_id":40523,"comment_id":114157678,"content_license":"CC BY-SA 4.0","body":"To me, saying that an object&#39;s reference is passed by value is the same as saying that the object is passed by reference.  I&#39;m a Java novice, but I presume that (in contrast) <i>primitive data</i> is pass by value."},{"owner":{"reputation":509,"user_id":1889373,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/016f3df2c1ded9b52755a1832612b762?s=128&d=identicon&r=PG","display_name":"user21820","link":"https://stackoverflow.com/users/1889373/user21820"},"reply_to_user":{"reputation":1515,"user_id":3230708,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/3ba0a3fe017d7c55f7741bcb315f4824?s=128&d=identicon&r=PG&f=1","display_name":"user36800","link":"https://stackoverflow.com/users/3230708/user36800"},"edited":false,"score":0,"creation_date":1608735823,"post_id":40523,"comment_id":115670878,"content_license":"CC BY-SA 4.0","body":"@user36800: You&#39;re wrong. Did you work through the example with Fifi and look carefully through the results? Check that indeed <code>foo(aDog);</code> did <b>not</b> change <code>aDog</code> despite <code>foo</code> overwriting the value of <code>d</code>, showing that indeed all inputs to a function are passed by value."},{"owner":{"reputation":1515,"user_id":3230708,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/3ba0a3fe017d7c55f7741bcb315f4824?s=128&d=identicon&r=PG&f=1","display_name":"user36800","link":"https://stackoverflow.com/users/3230708/user36800"},"reply_to_user":{"reputation":509,"user_id":1889373,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/016f3df2c1ded9b52755a1832612b762?s=128&d=identicon&r=PG","display_name":"user21820","link":"https://stackoverflow.com/users/1889373/user21820"},"edited":false,"score":0,"creation_date":1609122550,"post_id":40523,"comment_id":115752633,"content_license":"CC BY-SA 4.0","body":"@user21820: Yes, I did work through the examples and they both made sense to me.  I made two statements in my previous comment.  If you can specify which one you disagree with, I can try to better understand your last comment.  Thanks."},{"owner":{"reputation":509,"user_id":1889373,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/016f3df2c1ded9b52755a1832612b762?s=128&d=identicon&r=PG","display_name":"user21820","link":"https://stackoverflow.com/users/1889373/user21820"},"reply_to_user":{"reputation":1515,"user_id":3230708,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/3ba0a3fe017d7c55f7741bcb315f4824?s=128&d=identicon&r=PG&f=1","display_name":"user36800","link":"https://stackoverflow.com/users/3230708/user36800"},"edited":false,"score":0,"creation_date":1609134567,"post_id":40523,"comment_id":115754366,"content_license":"CC BY-SA 4.0","body":"@user36800: Well, both statements are wrong. To pass an object by reference would mean that if the function modifies the variable then it modifies the object itself. That is not what happens in Java; objects cannot be passed by reference, but instead one can only pass references as inputs to a function, and when a function performs <code>d = new Dog(&quot;Fifi&quot;);</code> it overwrites the input variable <code>d</code>, which <b>stores</b> a reference but is not &#39;the object passed by reference&#39;. Contrast with <code>&amp;d</code> in the function signature in C, which would be pass-by-reference. [cont]"},{"owner":{"reputation":509,"user_id":1889373,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/016f3df2c1ded9b52755a1832612b762?s=128&d=identicon&r=PG","display_name":"user21820","link":"https://stackoverflow.com/users/1889373/user21820"},"edited":false,"score":0,"creation_date":1609134688,"post_id":40523,"comment_id":115754392,"content_license":"CC BY-SA 4.0","body":"That was for your first statement. Your second statement is also wrong because <i>everything</i> is passed by value in Java. There is absolutely no difference between object references and primitive data types, except that the operations you are allowed to perform on them differ."},{"owner":{"reputation":1515,"user_id":3230708,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/3ba0a3fe017d7c55f7741bcb315f4824?s=128&d=identicon&r=PG&f=1","display_name":"user36800","link":"https://stackoverflow.com/users/3230708/user36800"},"edited":false,"score":0,"creation_date":1609198361,"post_id":40523,"comment_id":115775676,"content_license":"CC BY-SA 4.0","body":"Ah, I see.  Thanks for clarifying that.  I was just thinking in a gross manner, i.e., equating passing by reference as not creating a new object because pointers are used behinds the scenes, and the pointers are automatically dereferenced when the variable is used.  It would be so much clearer if pointers were explicitly used.  However, the maxim that all Java objects are handled by reference helps."},{"owner":{"reputation":397,"user_id":7597142,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ba2aaf02dcba82b8983be8d3e9787b22?s=128&d=identicon&r=PG&f=1","display_name":"Prateek Pande","link":"https://stackoverflow.com/users/7597142/prateek-pande"},"edited":false,"score":0,"creation_date":1610544459,"post_id":40523,"comment_id":116167106,"content_license":"CC BY-SA 4.0","body":"Java is pass by value, BUT there is WORKAROUND of achieving otherwise. Using an array holding the reference of the object. Even though array is passed as value, so if you modify array it won&#39;t reflect. But array holds a reference to the Integer object. TRY THIS:- { Integer[] i = new Integer[] {new Integer(0)}; System.out.println(i[0]); i[0] = i[0]+1; System.out.println(i[0]); modify(i); System.out.println(i[0]); } public static void modify(Integer[] i) { i[0] = i[0]+1; }"},{"owner":{"reputation":1174,"user_id":7214292,"user_type":"registered","profile_image":"https://i.stack.imgur.com/pG5M6.png?s=128&g=1","display_name":"ghilesZ","link":"https://stackoverflow.com/users/7214292/ghilesz"},"reply_to_user":{"reputation":117,"user_id":12383992,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c0fc561f53edb1508f4c372b9068c38?s=128&d=identicon&r=PG&f=1","display_name":"dbrewster","link":"https://stackoverflow.com/users/12383992/dbrewster"},"edited":false,"score":5,"creation_date":1612295519,"post_id":40523,"comment_id":116721109,"content_license":"CC BY-SA 4.0","body":"@dbrewster i&#39;m sorry but ... &quot;Fifi&quot; is not among us anymore"},{"owner":{"reputation":761,"user_id":8251318,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/ff7844182651142d95d26253f7aada4c?s=128&d=identicon&r=PG&f=1","display_name":"Matthew","link":"https://stackoverflow.com/users/8251318/matthew"},"reply_to_user":{"reputation":1174,"user_id":7214292,"user_type":"registered","profile_image":"https://i.stack.imgur.com/pG5M6.png?s=128&g=1","display_name":"ghilesZ","link":"https://stackoverflow.com/users/7214292/ghilesz"},"edited":false,"score":0,"creation_date":1612930297,"post_id":40523,"comment_id":116917465,"content_license":"CC BY-SA 4.0","body":"@ghilesZ rip Fifi"}],"owner":{"reputation":6578,"user_id":4192,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/3ef3ba1fb05d589d272b01e28ec7b285?s=128&d=identicon&r=PG","display_name":"erlando","link":"https://stackoverflow.com/users/4192/erlando"},"comment_count":11,"is_accepted":false,"community_owned_date":1347646975,"score":6211,"last_activity_date":1599122363,"last_edit_date":1599122363,"creation_date":1220387137,"answer_id":40523,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Java is always <strong>pass-by-value</strong>.<br />\nUnfortunately, we never handle an object at all, instead juggling object-handles called <em>references</em> <sub><sup>(which are passed by value of course)</sup></sub>.  The chosen terminology and semantics easily confuse many beginners.</p>\n<p>It goes like this:</p>\n<pre><code>public static void main(String[] args) {\n    Dog aDog = new Dog(&quot;Max&quot;);\n    Dog oldDog = aDog;\n\n    // we pass the object to foo\n    foo(aDog);\n    // aDog variable is still pointing to the &quot;Max&quot; dog when foo(...) returns\n    aDog.getName().equals(&quot;Max&quot;); // true\n    aDog.getName().equals(&quot;Fifi&quot;); // false\n    aDog == oldDog; // true\n}\n\npublic static void foo(Dog d) {\n    d.getName().equals(&quot;Max&quot;); // true\n    // change d inside of foo() to point to a new Dog instance &quot;Fifi&quot;\n    d = new Dog(&quot;Fifi&quot;);\n    d.getName().equals(&quot;Fifi&quot;); // true\n}\n</code></pre>\n<p>In the example above <code>aDog.getName()</code> will still return <code>&quot;Max&quot;</code>. The value <code>aDog</code> within <code>main</code> is not changed in the function <code>foo</code> with the <code>Dog</code> <code>&quot;Fifi&quot;</code> as the object reference is passed by value. If it were passed by reference, then the <code>aDog.getName()</code> in <code>main</code> would return <code>&quot;Fifi&quot;</code> after the call to <code>foo</code>.</p>\n<p>Likewise:</p>\n<pre><code>public static void main(String[] args) {\n    Dog aDog = new Dog(&quot;Max&quot;);\n    Dog oldDog = aDog;\n\n    foo(aDog);\n    // when foo(...) returns, the name of the dog has been changed to &quot;Fifi&quot;\n    aDog.getName().equals(&quot;Fifi&quot;); // true\n    // but it is still the same dog:\n    aDog == oldDog; // true\n}\n\npublic static void foo(Dog d) {\n    d.getName().equals(&quot;Max&quot;); // true\n    // this changes the name of d to be &quot;Fifi&quot;\n    d.setName(&quot;Fifi&quot;);\n}\n</code></pre>\n<p>In the above example, <code>Fifi</code> is the dog's name after call to <code>foo(aDog)</code> because the object's name was set inside of <code>foo(...)</code>. Any operations that <code>foo</code> performs on <code>d</code> are such that, for all practical purposes, they are performed on <code>aDog</code>, but it is <strong>not</strong> possible to change the value of the variable <code>aDog</code> itself.</p>\n"},{"comments":[{"owner":{"reputation":735,"user_id":1193657,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qu2Es.png?s=128&g=1","display_name":"Talijanac","link":"https://stackoverflow.com/users/1193657/talijanac"},"edited":false,"score":0,"creation_date":1597742062,"post_id":40630,"comment_id":112226158,"content_license":"CC BY-SA 4.0","body":"This is just wrong. What Java calls &quot;reference&quot; C++ calls &quot;pointer&quot;. What C++ calls &quot;reference&quot; does not exist in Java. C++ reference is pointer like type but with global scope. When you change a C++ reference all occurrences of that references are changed, both in called function but also in a calling function. Java can&#39;t do that. Java is strictly pass by value, and changes to java references are strictly local. Java called function can&#39;t change reference value of calling function. You can emulate C++ reference by using wrapper objects like AtomicReference."},{"owner":{"reputation":4805,"user_id":4100,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f2ffcd63c3f62b86a905ebe89da2c69d?s=128&d=identicon&r=PG","display_name":"Paul de Vrieze","link":"https://stackoverflow.com/users/4100/paul-de-vrieze"},"reply_to_user":{"reputation":735,"user_id":1193657,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qu2Es.png?s=128&g=1","display_name":"Talijanac","link":"https://stackoverflow.com/users/1193657/talijanac"},"edited":false,"score":0,"creation_date":1600190022,"post_id":40630,"comment_id":113007723,"content_license":"CC BY-SA 4.0","body":"C++ references have nothing to do with scopes. In implementation they are like pointers that are not allowed to have null values. The main difference beyond that is that syntactically they behave as aliases of the referenced data. In Java references work almost the same way, but have special rules that allow for: comparison with null and other reference values (using the == operator). C++ is also pass by value, although that value could be a pointer/reference to the reference."},{"owner":{"reputation":735,"user_id":1193657,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qu2Es.png?s=128&g=1","display_name":"Talijanac","link":"https://stackoverflow.com/users/1193657/talijanac"},"edited":false,"score":0,"creation_date":1600245636,"post_id":40630,"comment_id":113023548,"content_license":"CC BY-SA 4.0","body":"Changes to C++ references made by called method are also visible by calling method. That doesn&#39;t exist in Java and it is not a pointer like behaviour. In Java and C changes to pointer values are local only. I don&#39;t know how to properly call to this kind behaviour but it is somewhat similar to &quot;outer scope&quot; of some scripting languages."},{"owner":{"reputation":735,"user_id":1193657,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qu2Es.png?s=128&g=1","display_name":"Talijanac","link":"https://stackoverflow.com/users/1193657/talijanac"},"edited":false,"score":0,"creation_date":1600245942,"post_id":40630,"comment_id":113023698,"content_license":"CC BY-SA 4.0","body":"For example of proper pass-by-reference see swap program here: <a href=\"https://www.geeksforgeeks.org/references-in-c/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/references-in-c</a> It is not possible to write swap method in Java with same side-effects. There is  &quot;quality&quot; (a behaviour of language  operators) to C++ references which does not exists in Java references or C pointers."}],"owner":{"reputation":4805,"user_id":4100,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f2ffcd63c3f62b86a905ebe89da2c69d?s=128&d=identicon&r=PG","display_name":"Paul de Vrieze","link":"https://stackoverflow.com/users/4100/paul-de-vrieze"},"comment_count":4,"is_accepted":false,"community_owned_date":1347646975,"score":27,"last_activity_date":1399196028,"last_edit_date":1399196028,"creation_date":1220388839,"answer_id":40630,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>To make a long story short, <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\" rel=\"noreferrer\">Java</a> objects have some very peculiar properties.</p>\n\n<p>In general, Java has primitive types (<code>int</code>, <code>bool</code>, <code>char</code>, <code>double</code>, etc) that are passed directly by value. Then Java has objects (everything that derives from <code>java.lang.Object</code>). Objects are actually always handled through a reference (a reference being a pointer that you can't touch). That means that in effect, objects are passed by reference, as the references are normally not interesting. It does however mean that you cannot change which object is pointed to as the reference itself is passed by value.</p>\n\n<p>Does this sound strange and confusing? Let's consider how C implements pass by reference and pass by value. In C, the default convention is pass by value. <code>void foo(int x)</code> passes an int by value. <code>void foo(int *x)</code> is a function that does not want an <code>int a</code>, but a pointer to an int: <code>foo(&amp;a)</code>. One would use this with the <code>&amp;</code> operator to pass a variable address.</p>\n\n<p>Take this to C++, and we have references. References are basically (in this context) syntactic sugar that hide the pointer part of the equation: <code>void foo(int &amp;x)</code> is called by <code>foo(a)</code>, where the compiler itself knows that it is a reference and the address of the non-reference <code>a</code> should be passed. In Java, all variables referring to objects are actually of reference type, in effect forcing call by reference for most intends and purposes without the fine grained control (and complexity) afforded by, for example, C++.</p>\n"},{"owner":{"reputation":26648,"user_id":292,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/16db4bb794911afb2830e17e6c9d4702?s=128&d=identicon&r=PG","display_name":"shsteimer","link":"https://stackoverflow.com/users/292/shsteimer"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":43,"last_activity_date":1398833416,"last_edit_date":1398833416,"creation_date":1220470923,"answer_id":42392,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>The distinction, or perhaps just the way I remember as I used to be under the same impression as the original poster is this: Java is always pass by value. All objects( in Java, anything except for primitives) in Java are references. These references are passed by value.</p>\n"},{"owner":{"reputation":16799,"user_id":2644,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/a2d07b1a0a6ddcfed5c18ddfafd5a887?s=128&d=identicon&r=PG","display_name":"pek","link":"https://stackoverflow.com/users/2644/pek"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":41,"last_activity_date":1220472119,"creation_date":1220472119,"answer_id":42455,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>As many people mentioned it before, <a href=\"http://academic.regis.edu/dbahr/GeneralPages/IntroToProgramming/JavaPassByValue.htm\" rel=\"noreferrer\">Java is always pass-by-value</a></p>\n\n<p>Here is another example that will help you understand the difference (<a href=\"http://www.javaranch.com/campfire/StoryPassBy.jsp\" rel=\"noreferrer\">the classic swap example</a>):</p>\n\n<pre><code>public class Test {\n  public static void main(String[] args) {\n    Integer a = new Integer(2);\n    Integer b = new Integer(3);\n    System.out.println(\"Before: a = \" + a + \", b = \" + b);\n    swap(a,b);\n    System.out.println(\"After: a = \" + a + \", b = \" + b);\n  }\n\n  public static swap(Integer iA, Integer iB) {\n    Integer tmp = iA;\n    iA = iB;\n    iB = tmp;\n  }\n}\n</code></pre>\n\n<p>Prints:  </p>\n\n<blockquote>\n  <p>Before: a = 2, b = 3<br>\n  After: a = 2, b = 3</p>\n</blockquote>\n\n<p>This happens because iA and iB are new local reference variables that have the same value of the passed references (they point to a and b respectively). So, trying to change the references of iA or iB will only change in the local scope and not outside of this method.</p>\n"},{"owner":{"reputation":289,"user_id":3034,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/854ad6712f08a16e94d1abebcbee4683?s=128&d=identicon&r=PG","display_name":"SWD","link":"https://stackoverflow.com/users/3034/swd"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":34,"last_activity_date":1231793263,"last_edit_date":1231793263,"creation_date":1220885321,"answer_id":49857,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>I always think of it as \"pass by copy\". It is a copy of the value be it primitive or reference. If it is a primitive it is a copy of the bits that are the value and if it is an Object it is a copy of the reference.</p>\n\n<pre><code>public class PassByCopy{\n    public static void changeName(Dog d){\n        d.name = \"Fido\";\n    }\n    public static void main(String[] args){\n        Dog d = new Dog(\"Maxx\");\n        System.out.println(\"name= \"+ d.name);\n        changeName(d);\n        System.out.println(\"name= \"+ d.name);\n    }\n}\nclass Dog{\n    public String name;\n    public Dog(String s){\n        this.name = s;\n    }\n}\n</code></pre>\n\n<p>output of java PassByCopy:</p>\n\n<blockquote>\n  <p>name= Maxx<br>\n  name= Fido</p>\n</blockquote>\n\n<p>Primitive wrapper classes and Strings are immutable so any example using those types will not work the same as other types/objects.</p>\n"},{"owner":{"reputation":17236,"user_id":46,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/U5kmD.jpg?s=128&g=1","display_name":"sven","link":"https://stackoverflow.com/users/46/sven"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":29,"last_activity_date":1220885688,"last_edit_date":1495540978,"creation_date":1220885688,"answer_id":49863,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>I have created a thread devoted to these kind of questions for <em>any</em> programming languages <a href=\"https://stackoverflow.com/questions/2027/pass-by-reference-or-pass-by-value\">here</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2027/pass-by-reference-or-pass-by-value#2028\">Java is also mentioned</a>. Here is the short summary:</p>\n\n<ul>\n<li>Java passes it parameters by value</li>\n<li>\"by value\" is the only way in java to pass a parameter to a method</li>\n<li>using methods from the object given as parameter will alter the\nobject as the references point to\nthe original objects. (if that\nmethod itself alters some values)</li>\n</ul>\n"},{"owner":{"reputation":27829,"user_id":12541,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/21bd0a8539a209bf52587832fef3a763?s=128&d=identicon&r=PG","display_name":"Scott Stanchfield","link":"https://stackoverflow.com/users/12541/scott-stanchfield"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":3244,"last_activity_date":1440775958,"last_edit_date":1440775958,"creation_date":1221575820,"answer_id":73021,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>I just noticed you referenced <a href=\"http://javadude.com/articles/passbyvalue.htm\" rel=\"noreferrer\">my article</a>.</p>\n\n<p>The Java Spec says that everything in Java is pass-by-value. There is no such thing as \"pass-by-reference\" in Java.</p>\n\n<p>The key to understanding this is that something like</p>\n\n<pre><code>Dog myDog;\n</code></pre>\n\n<p>is <em>not</em> a Dog; it's actually a <em>pointer</em> to a Dog.</p>\n\n<p>What that means, is when you have</p>\n\n<pre><code>Dog myDog = new Dog(\"Rover\");\nfoo(myDog);\n</code></pre>\n\n<p>you're essentially passing the <em>address</em> of the created <code>Dog</code> object to the <code>foo</code> method.</p>\n\n<p>(I say essentially because Java pointers aren't direct addresses, but it's easiest to think of them that way)</p>\n\n<p>Suppose the <code>Dog</code> object resides at memory address 42. This means we pass 42 to the method.</p>\n\n<p>if the Method were defined as</p>\n\n<pre><code>public void foo(Dog someDog) {\n    someDog.setName(\"Max\");     // AAA\n    someDog = new Dog(\"Fifi\");  // BBB\n    someDog.setName(\"Rowlf\");   // CCC\n}\n</code></pre>\n\n<p>let's look at what's happening.</p>\n\n<ul>\n<li>the parameter <code>someDog</code> is set to the value 42</li>\n<li>at line \"AAA\"\n\n<ul>\n<li><code>someDog</code> is followed to the <code>Dog</code> it points to (the <code>Dog</code> object at address 42)</li>\n<li>that <code>Dog</code> (the one at address 42) is asked to change his name to Max</li>\n</ul></li>\n<li>at line \"BBB\"\n\n<ul>\n<li>a new <code>Dog</code> is created. Let's say he's at address 74</li>\n<li>we assign the parameter <code>someDog</code> to 74 </li>\n</ul></li>\n<li>at line \"CCC\"\n\n<ul>\n<li>someDog is followed to the <code>Dog</code> it points to (the <code>Dog</code> object at address 74)</li>\n<li>that <code>Dog</code> (the one at address 74) is asked to change his name to Rowlf</li>\n</ul></li>\n<li>then, we return</li>\n</ul>\n\n<p>Now let's think about what happens outside the method:</p>\n\n<p><em>Did <code>myDog</code> change?</em></p>\n\n<p>There's the key.</p>\n\n<p>Keeping in mind that <code>myDog</code> is a <em>pointer</em>, and not an actual <code>Dog</code>, the answer is NO. <code>myDog</code> still has the value 42; it's still pointing to the original <code>Dog</code> (but note that because of line \"AAA\", its name is now \"Max\" - still the same Dog; <code>myDog</code>'s value has not changed.)</p>\n\n<p>It's perfectly valid to <em>follow</em> an address and change what's at the end of it; that does not change the variable, however.</p>\n\n<p>Java works exactly like C. You can assign a pointer, pass the pointer to a method, follow the pointer in the method and change the data that was pointed to. However, you cannot change where that pointer points.</p>\n\n<p>In C++, Ada, Pascal and other languages that support pass-by-reference, you can actually change the variable that was passed.</p>\n\n<p>If Java had pass-by-reference semantics, the <code>foo</code> method we defined above would have changed where <code>myDog</code> was pointing when it assigned <code>someDog</code> on line BBB.</p>\n\n<p>Think of reference parameters as being aliases for the variable passed in. When that alias is assigned, so is the variable that was passed in.</p>\n"},{"comments":[{"owner":{"reputation":3303,"user_id":1505487,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/32a89e70bccdffd6f50c1ec96224ab2d?s=128&d=identicon&r=PG","display_name":"Solubris","link":"https://stackoverflow.com/users/1505487/solubris"},"edited":false,"score":0,"creation_date":1606345416,"post_id":85711,"comment_id":114940248,"content_license":"CC BY-SA 4.0","body":"This shows that java is not pass by value as it doesn&#39;t copy the whole object onto the stack like C++ does, as shown in the example above - ..., Dog obj,..."},{"owner":{"reputation":42574,"user_id":8701,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/369fe4f874d2b26fd2441a0e5017f894?s=128&d=identicon&r=PG","display_name":"Eclipse","link":"https://stackoverflow.com/users/8701/eclipse"},"reply_to_user":{"reputation":3303,"user_id":1505487,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/32a89e70bccdffd6f50c1ec96224ab2d?s=128&d=identicon&r=PG","display_name":"Solubris","link":"https://stackoverflow.com/users/1505487/solubris"},"edited":false,"score":0,"creation_date":1606428196,"post_id":85711,"comment_id":114967315,"content_license":"CC BY-SA 4.0","body":"No, Java passes references by value.  That&#39;s why when you overwrite objPtr in the java example, the original Dog object doesn&#39;t change.  But if modify the object being pointed to by objPtr, it does."}],"owner":{"reputation":42574,"user_id":8701,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/369fe4f874d2b26fd2441a0e5017f894?s=128&d=identicon&r=PG","display_name":"Eclipse","link":"https://stackoverflow.com/users/8701/eclipse"},"comment_count":2,"is_accepted":false,"community_owned_date":1347646975,"score":203,"last_activity_date":1474987377,"last_edit_date":1474987377,"creation_date":1221673123,"answer_id":85711,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Just to show the contrast, compare the following <a href=\"https://en.wikipedia.org/wiki/C++\" rel=\"noreferrer\">C++</a> and <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\" rel=\"noreferrer\">Java</a> snippets:</p>\n\n<p>In C++: <strong>Note: Bad code - memory leaks!</strong>  But it demonstrates the point.</p>\n\n<pre><code>void cppMethod(int val, int &amp;ref, Dog obj, Dog &amp;objRef, Dog *objPtr, Dog *&amp;objPtrRef)\n{\n    val = 7; // Modifies the copy\n    ref = 7; // Modifies the original variable\n    obj.SetName(\"obj\"); // Modifies the copy of Dog passed\n    objRef.SetName(\"objRef\"); // Modifies the original Dog passed\n    objPtr-&gt;SetName(\"objPtr\"); // Modifies the original Dog pointed to \n                               // by the copy of the pointer passed.\n    objPtr = new Dog(\"newObjPtr\");  // Modifies the copy of the pointer, \n                                   // leaving the original object alone.\n    objPtrRef-&gt;SetName(\"objRefPtr\"); // Modifies the original Dog pointed to \n                                    // by the original pointer passed. \n    objPtrRef = new Dog(\"newObjPtrRef\"); // Modifies the original pointer passed\n}\n\nint main()\n{\n    int a = 0;\n    int b = 0;\n    Dog d0 = Dog(\"d0\");\n    Dog d1 = Dog(\"d1\");\n    Dog *d2 = new Dog(\"d2\");\n    Dog *d3 = new Dog(\"d3\");\n    cppMethod(a, b, d0, d1, d2, d3);\n    // a is still set to 0\n    // b is now set to 7\n    // d0 still have name \"d0\"\n    // d1 now has name \"objRef\"\n    // d2 now has name \"objPtr\"\n    // d3 now has name \"newObjPtrRef\"\n}\n</code></pre>\n\n<p>In Java, </p>\n\n<pre><code>public static void javaMethod(int val, Dog objPtr)\n{\n   val = 7; // Modifies the copy\n   objPtr.SetName(\"objPtr\") // Modifies the original Dog pointed to \n                            // by the copy of the pointer passed.\n   objPtr = new Dog(\"newObjPtr\");  // Modifies the copy of the pointer, \n                                  // leaving the original object alone.\n}\n\npublic static void main()\n{\n    int a = 0;\n    Dog d0 = new Dog(\"d0\");\n    javaMethod(a, d0);\n    // a is still set to 0\n    // d0 now has name \"objPtr\"\n}\n</code></pre>\n\n<p>Java only has the two types of passing: by value for built-in types, and by value of the pointer for object types.</p>\n"},{"owner":{"reputation":1077,"user_id":54236,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/da4564c0cd535285f53473571cf285d9?s=128&d=identicon&r=PG","display_name":"Harald Schilly","link":"https://stackoverflow.com/users/54236/harald-schilly"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":9,"last_activity_date":1398833522,"last_edit_date":1398833522,"creation_date":1231792442,"answer_id":436924,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>It's a bit hard to understand, but Java always copies the value - the point is, normally the value is a reference. Therefore you end up with the same object without thinking about it...</p>\n"},{"owner":{"reputation":39290,"user_id":7488,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/fd633bcdc4aad15ea62e836d61f0dd8f?s=128&d=identicon&r=PG","display_name":"JacquesB","link":"https://stackoverflow.com/users/7488/jacquesb"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":123,"last_activity_date":1517912294,"last_edit_date":1517912294,"creation_date":1231793425,"answer_id":436969,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>The crux of the matter is that the word <em>reference</em> in the expression \"pass by reference\" means something completely different from the usual meaning of the word <em>reference</em> in Java. </p>\n\n<p>Usually in Java <em>reference</em> means a a <em>reference to an object</em>. But the technical terms <em>pass by reference/value</em> from programming language theory is talking about a <em>reference to the memory cell holding the variable</em>, which is something completely different.</p>\n"},{"owner":{"reputation":13967,"user_id":73019,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/d8776ad72b62e964f65c8fcfc0859b4a?s=128&d=identicon&r=PG","display_name":"Jared Oberhaus","link":"https://stackoverflow.com/users/73019/jared-oberhaus"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":51,"last_activity_date":1236493732,"creation_date":1236493732,"answer_id":623155,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>You can never pass by reference in Java, and one of the ways that is obvious is when you want to return more than one value from a method call. Consider the following bit of code in C++:</p>\n\n<pre><code>void getValues(int&amp; arg1, int&amp; arg2) {\n    arg1 = 1;\n    arg2 = 2;\n}\nvoid caller() {\n    int x;\n    int y;\n    getValues(x, y);\n    cout &lt;&lt; \"Result: \" &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Sometimes you want to use the same pattern in Java, but you can't; at least not directly. Instead you could do something like this:</p>\n\n<pre><code>void getValues(int[] arg1, int[] arg2) {\n    arg1[0] = 1;\n    arg2[0] = 2;\n}\nvoid caller() {\n    int[] x = new int[1];\n    int[] y = new int[1];\n    getValues(x, y);\n    System.out.println(\"Result: \" + x[0] + \" \" + y[0]);\n}\n</code></pre>\n\n<p>As was explained in previous answers, in Java you're passing a pointer to the array as a value into <code>getValues</code>. That is enough, because the method then modifies the array element, and by convention you're expecting element 0 to contain the return value. Obviously you can do this in other ways, such as structuring your code so this isn't necessary, or constructing a class that can contain the return value or allow it to be set. But the simple pattern available to you in C++ above is not available in Java.</p>\n"},{"owner":{"reputation":4606,"user_id":48402,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/5c8f5e525d9fa687c10f3bc5ab4b42b5?s=128&d=identicon&r=PG","display_name":"kukudas","link":"https://stackoverflow.com/users/48402/kukudas"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":58,"last_activity_date":1238695124,"last_edit_date":1238695124,"creation_date":1238621600,"answer_id":707416,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>As far as I know, Java only knows call by value. This means for primitive datatypes you will work with an copy and for objects you will work with an copy of the reference to the objects. However I think there are some pitfalls; for example, this will not work:</p>\n\n<pre><code>public static void swap(StringBuffer s1, StringBuffer s2) {\n    StringBuffer temp = s1;\n    s1 = s2;\n    s2 = temp;\n}\n\n\npublic static void main(String[] args) {\n    StringBuffer s1 = new StringBuffer(\"Hello\");\n    StringBuffer s2 = new StringBuffer(\"World\");\n    swap(s1, s2);\n    System.out.println(s1);\n    System.out.println(s2);\n}\n</code></pre>\n\n<p>This will populate Hello World and not World Hello because in the swap function you use copys which have no impact on the references in the main. But if your objects are not immutable you can change it for example:</p>\n\n<pre><code>public static void appendWorld(StringBuffer s1) {\n    s1.append(\" World\");\n}\n\npublic static void main(String[] args) {\n    StringBuffer s = new StringBuffer(\"Hello\");\n    appendWorld(s);\n    System.out.println(s);\n}\n</code></pre>\n\n<p>This will populate Hello World on the command line. If you change StringBuffer into String it will produce just Hello because String is immutable. For example:</p>\n\n<pre><code>public static void appendWorld(String s){\n    s = s+\" World\";\n}\n\npublic static void main(String[] args) {\n    String s = new String(\"Hello\");\n    appendWorld(s);\n    System.out.println(s);\n}\n</code></pre>\n\n<p>However you could make a wrapper for String like this which would make it able to use it with Strings:</p>\n\n<pre><code>class StringWrapper {\n    public String value;\n\n    public StringWrapper(String value) {\n        this.value = value;\n    }\n}\n\npublic static void appendWorld(StringWrapper s){\n    s.value = s.value +\" World\";\n}\n\npublic static void main(String[] args) {\n    StringWrapper s = new StringWrapper(\"Hello\");\n    appendWorld(s);\n    System.out.println(s.value);\n}\n</code></pre>\n\n<p>edit: i believe this is also the reason to use StringBuffer when it comes to \"adding\" two Strings because you can modifie the original object which u can't with immutable objects like String is.</p>\n"},{"owner":{"reputation":39,"user_id":238938,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/e0a190604dc3dd2ee7b66bb95c20ef7f?s=128&d=identicon&r=PG","display_name":"Rusty Shackleford","link":"https://stackoverflow.com/users/238938/rusty-shackleford"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":28,"last_activity_date":1261858762,"creation_date":1261858762,"answer_id":1964260,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>A few corrections to some posts.</p>\n\n<p>C does NOT support pass by reference. It is ALWAYS pass by value. C++ does support pass by reference, but is not the default and is quite dangerous.</p>\n\n<p>It doesn't matter what the value is in Java: primitive or address(roughly) of object, it is ALWAYS passed by value.</p>\n\n<p>If a Java object \"behaves\" like it is being passed by reference, that is a property of mutability and has absolutely nothing to do with passing mechanisms.</p>\n\n<p>I am not sure why this is so confusing, perhaps because so many Java \"programmers\" are not formally trained, and thus do not understand what is really going on in memory?</p>\n"},{"owner":{"reputation":34715,"user_id":184730,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/8ec7cdaaf6fd5ee313cb6228f08cd67c?s=128&d=identicon&r=PG","display_name":"fastcodejava","link":"https://stackoverflow.com/users/184730/fastcodejava"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":21,"last_activity_date":1261861511,"creation_date":1261861511,"answer_id":1964361,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>Java copies the reference by value. So if you change it to something else (e.g, using <code>new</code>) the reference does not change outside the method. For native types, it is always pass by value.</p>\n"},{"owner":{"reputation":1977,"user_id":212665,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FNE5j.jpg?s=128&g=1","display_name":"Vinay Lodha","link":"https://stackoverflow.com/users/212665/vinay-lodha"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":13,"last_activity_date":1281356518,"creation_date":1281356518,"answer_id":3439923,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>Have a look at this code. This code will not throw <code>NullPointerException</code>... It will print \"Vinay\"</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        String temp = \"Vinay\";\n        print(temp);\n        System.err.println(temp);\n    }\n\n    private static void print(String temp) {\n        temp = null;\n    }\n}\n</code></pre>\n\n<p>If Java is pass by reference then it should have thrown <code>NullPointerException</code> as reference is set to Null.</p>\n"},{"owner":{"reputation":333977,"user_id":2988,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG","display_name":"J&#246;rg W Mittag","link":"https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":156,"last_activity_date":1283897222,"creation_date":1283897222,"answer_id":3663123,"question_id":40480,"content_license":"CC BY-SA 2.5","body":"<p>I can't believe that nobody mentioned Barbara Liskov yet. When she designed CLU in 1974, she ran into this same terminology problem, and she invented the term <em>call by sharing</em> (also known as <em>call by object-sharing</em> and <em>call by object</em>) for this specific case of \"call by value where the value is a reference\".</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":7,"creation_date":1465271943,"post_id":6462053,"comment_id":62818353,"content_license":"CC BY-SA 3.0","body":"&#39;Pass by value&#39; is a standard term in computer science and has been since the 1950s. No point in complaining about it now."}],"owner":{"reputation":2497,"user_id":1951442,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/8cfe418ece3f950aa1f91f47712565e2?s=128&d=identicon&r=PG","display_name":"Swifty McSwifterton","link":"https://stackoverflow.com/users/1951442/swifty-mcswifterton"},"comment_count":1,"is_accepted":false,"community_owned_date":1347646975,"score":5,"last_activity_date":1308874397,"creation_date":1308874397,"answer_id":6462053,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>In my opinion, \"pass by value\" is a terrible way to singularly describe two similar but different events.  I guess they should have asked me first.</p>\n\n<p>With primitives we are passing the actual value of the primitive into the method (or constructor), be it the integer \"5\", the character \"c\", or what have you.  That actual value then becomes its own local primitive.  But with objects, all we are doing is giving the same object an additional reference (a local reference), so that we now have two references pointing to the same object.</p>\n\n<p>I hope this simple explanation helps.</p>\n"},{"owner":{"reputation":15591,"user_id":807231,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/rMoCe.jpg?s=128&g=1","display_name":"Marsellus Wallace","link":"https://stackoverflow.com/users/807231/marsellus-wallace"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":752,"last_activity_date":1515061042,"last_edit_date":1515061042,"creation_date":1313112139,"answer_id":7034719,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p><strong>This will give you some insights of how Java really works to the point that in your next discussion about Java passing by reference or passing by value you'll just smile :-)</strong></p>\n\n<p>Step one please erase from your mind that word that starts with 'p' \"_ _ _ _ _ _ _\", especially if you come from other programming languages. Java and 'p' cannot be written in the same book, forum, or even txt.</p>\n\n<p>Step two remember that when you pass an Object into a method you're passing the Object reference and not the Object itself.</p>\n\n<ul>\n<li><em>Student</em>: Master, does this mean that Java is pass-by-reference?</li>\n<li><em>Master</em>: Grasshopper, No.</li>\n</ul>\n\n<p>Now think of what an Object's reference/variable does/is:</p>\n\n<ol>\n<li><strong>A variable holds the bits that tell the JVM how to get to the referenced Object in memory (Heap).</strong></li>\n<li>When passing arguments to a method <strong>you ARE NOT passing the reference variable, but a copy of the bits in the reference variable</strong>. Something like this: 3bad086a. 3bad086a represents a way to get to the passed object.</li>\n<li>So you're just passing 3bad086a that it's the value of the reference.</li>\n<li>You're passing the value of the reference and not the reference itself (and not the object).</li>\n<li><strong><em>This value is actually COPIED and given to the method</em></strong>. </li>\n</ol>\n\n<p>In the following (please don't try to compile/execute this...):</p>\n\n<pre><code>1. Person person;\n2. person = new Person(\"Tom\");\n3. changeName(person);\n4.\n5. //I didn't use Person person below as an argument to be nice\n6. static void changeName(Person anotherReferenceToTheSamePersonObject) {\n7.     anotherReferenceToTheSamePersonObject.setName(\"Jerry\");\n8. }\n</code></pre>\n\n<p>What happens?</p>\n\n<ul>\n<li>The variable <em>person</em> is created in line #1 and it's null at the beginning.</li>\n<li>A new Person Object is created in line #2, stored in memory, and the variable <em>person</em> is given the reference to the Person object. That is, its address. Let's say 3bad086a.</li>\n<li>The variable <em>person</em> holding the address of the Object is passed to the function in line #3.</li>\n<li>In line #4 you can listen to the sound of silence </li>\n<li>Check the comment on line #5</li>\n<li>A method local variable -<em>anotherReferenceToTheSamePersonObject</em>- is created and then comes the magic in line #6:\n\n<ul>\n<li>The variable/reference <em>person</em> is copied bit-by-bit and passed to <em>anotherReferenceToTheSamePersonObject</em> inside the function.</li>\n<li>No new instances of Person are created.</li>\n<li>Both \"<em>person</em>\" and \"<em>anotherReferenceToTheSamePersonObject</em>\" hold the same value of 3bad086a.</li>\n<li>Don't try this but person==anotherReferenceToTheSamePersonObject would be true.</li>\n<li>Both variables have IDENTICAL COPIES of the reference and they both refer to the same Person Object, the SAME Object on the Heap and NOT A COPY.</li>\n</ul></li>\n</ul>\n\n<p>A picture is worth a thousand words:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Ba3hJ.jpg\" alt=\"Pass by Value\"></p>\n\n<p><strong>Note that the anotherReferenceToTheSamePersonObject arrows is directed towards the Object and not towards the variable person!</strong></p>\n\n<p>If you didn't get it then just trust me and remember that it's better to say that <strong>Java is pass by value</strong>. Well, <strong>pass by reference value</strong>. Oh well, even better is <strong><em>pass-by-copy-of-the-variable-value! ;)</em></strong></p>\n\n<p>Now feel free to hate me but note that given this <strong>there is no difference between passing primitive data types and Objects</strong> when talking about method arguments.</p>\n\n<p>You always pass a copy of the bits of the value of the reference!</p>\n\n<ul>\n<li>If it's a primitive data type these bits will contain the value of the primitive data type itself.</li>\n<li>If it's an Object the bits will contain the value of the address that tells the JVM how to get to the Object.</li>\n</ul>\n\n<blockquote>\n  <p>Java is pass-by-value because inside a method you can modify the referenced Object as much as you want but no matter how hard you try you'll never be able to modify the passed variable that will keep referencing (not p _ _ _ _ _ _ _) the same Object no matter what!</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>The changeName function above will never be able to modify the actual content (the bit values) of the passed reference. In other word changeName cannot make Person person refer to another Object.</p>\n</blockquote>\n\n<hr>\n\n<p>Of course you can cut it short and just say that  <strong>Java is pass-by-value!</strong></p>\n"},{"owner":{"reputation":8023,"user_id":258289,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/713a219be380d04ee57211b51e9ba326?s=128&d=identicon&r=PG","display_name":"Luigi R. Viggiano","link":"https://stackoverflow.com/users/258289/luigi-r-viggiano"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":7,"last_activity_date":1370595076,"last_edit_date":1370595076,"creation_date":1334867121,"answer_id":10236169,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Everything is passed by value. Primitives and Object references. But objects can be changed, if their interface allows it.</p>\n\n<p>When you pass an object to a method, you are passing a reference, and the object can be modified by the method implementation. </p>\n\n<pre><code>void bithday(Person p) {\n    p.age++;\n}\n</code></pre>\n\n<p>The reference of the object itself, is passed by value: you can reassign the parameter, but the change is not reflected back:</p>\n\n<pre><code>void renameToJon(Person p) { \n    p = new Person(\"Jon\"); // this will not work\n}\n\njack = new Person(\"Jack\");\nrenameToJon(jack);\nsysout(jack); // jack is unchanged\n</code></pre>\n\n<p>As matter of effect, \"p\" is reference (pointer to the object) and can't be changed. </p>\n\n<p>Primitive types are passed by value. Object's reference can be considered a primitive type too. </p>\n\n<p>To recap, everything is passed by value.</p>\n"},{"owner":{"reputation":3637,"user_id":1426433,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/yC94U.jpg?s=128&g=1","display_name":"Fernando Espinosa","link":"https://stackoverflow.com/users/1426433/fernando-espinosa"},"comment_count":0,"is_accepted":false,"community_owned_date":1347646975,"score":20,"last_activity_date":1343842286,"creation_date":1343842286,"answer_id":11764499,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>It's really quite, quite simple:</p>\n\n<p>For a variable of primitive type (eg. <code>int</code>, <code>boolean</code>, <code>char</code>, etc...), when you use its name for a method argument, you are passing the value contained in it (<code>5</code>, <code>true</code>, or <code>'c'</code>). This value gets \"copied\", and the variable retains its value even after the method invocation.</p>\n\n<p>For a variable of reference type (eg. <code>String</code>, <code>Object</code>, etc...), when you use its name for a method argument, you are passing the value contained in it (<em>the <strong>reference value</strong> that \"points\" to the object</em>). This <strong><em>reference value</em></strong> gets \"copied\", and the variable retains its value even after the method invocation. <strong><em>The reference variable keeps \"pointing\" to the same object.</em></strong></p>\n\n<p>Either way, you're always passing stuff by value.</p>\n\n<hr>\n\n<p>Compare this to say C++ where you can have a method to take an <code>int&amp;</code>, or in C# where you could have take a <code>ref int</code> (although, in this case, you also have to use the <code>ref</code> modifier when passing the variable's name to the method.)</p>\n"},{"comments":[{"owner":{"reputation":3550,"user_id":692626,"user_type":"registered","accept_rate":14,"profile_image":"https://www.gravatar.com/avatar/f4f5cc38634d2867922b9c98d206480b?s=128&d=identicon&r=PG","display_name":"dan carter","link":"https://stackoverflow.com/users/692626/dan-carter"},"edited":false,"score":8,"creation_date":1607330886,"post_id":12429953,"comment_id":115228345,"content_license":"CC BY-SA 4.0","body":"Java always passes arguments by value, but what you are passing by value is a reference to an object, not a copy of the object. Simple eh?"},{"owner":{"reputation":316,"user_id":8218402,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-ghJX1HKMzB4/AAAAAAAAAAI/AAAAAAAAAEw/VeOdnwZp4pQ/photo.jpg?sz=128","display_name":"Liam Bohl","link":"https://stackoverflow.com/users/8218402/liam-bohl"},"edited":false,"score":2,"creation_date":1611617371,"post_id":12429953,"comment_id":116505294,"content_license":"CC BY-SA 4.0","body":"This is a beautiful explanation. Thank you."}],"owner":{"reputation":105922,"user_id":597657,"user_type":"registered","accept_rate":99,"profile_image":"https://i.stack.imgur.com/0h5ec.jpg?s=128&g=1","display_name":"Eng.Fouad","link":"https://stackoverflow.com/users/597657/eng-fouad"},"comment_count":2,"is_accepted":false,"community_owned_date":1347646975,"score":1913,"last_activity_date":1607337432,"last_edit_date":1607337432,"creation_date":1347646975,"answer_id":12429953,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Java always passes arguments <em>by value</em>, NOT by reference.</p>\n<hr />\n<p>Let me explain this through an <a href=\"https://stackoverflow.com/a/9404727/597657\">example</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n     public static void main(String[] args) {\n          Foo f = new Foo(&quot;f&quot;);\n          changeReference(f); // It won't change the reference!\n          modifyReference(f); // It will modify the object that the reference variable &quot;f&quot; refers to!\n     }\n\n     public static void changeReference(Foo a) {\n          Foo b = new Foo(&quot;b&quot;);\n          a = b;\n     }\n\n     public static void modifyReference(Foo c) {\n          c.setAttribute(&quot;c&quot;);\n     }\n\n}\n</code></pre>\n<p>I will explain this in steps:</p>\n<ol>\n<li><p>Declaring a reference named <code>f</code> of type <code>Foo</code> and assign it a new object of type <code>Foo</code> with an attribute <code>&quot;f&quot;</code>.</p>\n<pre><code>Foo f = new Foo(&quot;f&quot;);\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/arXpP.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p>From the method side, a reference of type <code>Foo</code> with a name <code>a</code> is declared and it's initially assigned <code>null</code>.</p>\n<pre><code>public static void changeReference(Foo a)\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/k2LBD.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p>As you call the method <code>changeReference</code>, the reference <code>a</code> will be assigned the object which is passed as an argument.</p>\n<pre><code>changeReference(f);\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/1Ez74.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p>Declaring a reference named <code>b</code> of type <code>Foo</code> and assign it a new object of type <code>Foo</code> with an attribute <code>&quot;b&quot;</code>.</p>\n<pre><code>Foo b = new Foo(&quot;b&quot;);\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/Krx4N.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p><code>a = b</code> makes a new assignment to the reference <code>a</code>, <strong>not</strong> <code>f</code>, of the object whose attribute is <code>&quot;b&quot;</code>.</p>\n<p><img src=\"https://i.stack.imgur.com/rCluu.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p>As you call <code>modifyReference(Foo c)</code> method, a reference <code>c</code> is created and assigned the object with attribute <code>&quot;f&quot;</code>.</p>\n<p><img src=\"https://i.stack.imgur.com/PRZPg.png\" alt=\"enter image description here\" /></p>\n</li>\n<li><p><code>c.setAttribute(&quot;c&quot;);</code> will change the attribute of the object that reference <code>c</code> points to it, and it's the same object that reference <code>f</code> points to it.</p>\n<p><img src=\"https://i.stack.imgur.com/H9Qsf.png\" alt=\"enter image description here\" /></p>\n</li>\n</ol>\n<p>I hope you understand now how passing objects as arguments works in Java :)</p>\n"},{"owner":{"reputation":503,"user_id":1733754,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2a8cfbcf88d6e1940bd57c39d0629b6d?s=128&d=identicon&r=PG","display_name":"åé¾è±¹","link":"https://stackoverflow.com/users/1733754/%e5%94%90%e9%be%8d%e8%b1%b9"},"comment_count":0,"is_accepted":false,"community_owned_date":1350010804,"score":56,"last_activity_date":1440222612,"last_edit_date":1440222612,"creation_date":1350010804,"answer_id":12851599,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>No, it's not pass by reference.</p>\n\n<p>Java is pass by value according to the Java Language Specification:</p>\n\n<blockquote>\n  <p>When the method or constructor is invoked (Â§15.12), <strong>the values of the actual argument expressions initialize newly created parameter variables</strong>, each of the declared type, before execution of the body of the method or constructor. The Identifier that appears in the DeclaratorId may be used as a simple name in the body of the method or constructor to refer to the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1\" rel=\"noreferrer\">formal parameter</a>. </p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":1,"creation_date":1375437923,"post_id":14105447,"comment_id":26344356,"content_license":"CC BY-SA 3.0","body":"There is no such thing as a &#39;constant referenece&#39; in Java unless the programmer specifies &#39;finally&#39;."},{"owner":{"reputation":2507,"user_id":1678760,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/6TfNt.jpg?s=128&g=1","display_name":"fatma.ekici","link":"https://stackoverflow.com/users/1678760/fatma-ekici"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1378731983,"post_id":14105447,"comment_id":27547402,"content_license":"CC BY-SA 3.0","body":"What I meant by constant reference is, there is no way to change the reference itself by saying new MyClass() in a function. If I put it correctly, there object references are passed by value which means a copy of the reference is passed so you can change the data where that reference refers to but you can not change it with new operator and allocate a new object."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1411605707,"post_id":14105447,"comment_id":40770398,"content_license":"CC BY-SA 3.0","body":"So fix your answer. If it was a constant you couldn&#39;t reassign it inside the called method, and you can, unless you specify <code>final.</code>"}],"owner":{"reputation":2507,"user_id":1678760,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/6TfNt.jpg?s=128&g=1","display_name":"fatma.ekici","link":"https://stackoverflow.com/users/1678760/fatma-ekici"},"comment_count":3,"is_accepted":false,"community_owned_date":1356982546,"score":18,"last_activity_date":1356982546,"creation_date":1356982546,"answer_id":14105447,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java is pass by constant reference where a copy of the reference is passed which means that it is basically a pass by value. You might change the contents of the reference if the class is mutable but you cannot change the reference itself. In other words the address can not be changed since it is passed by value but the content that is pointed by the address can be changed. In case of immutable classes, the content of the reference cannot be changed either.</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1505642987,"post_id":16880062,"comment_id":79488796,"content_license":"CC BY-SA 3.0","body":"&#39;Pass its inner value&#39; is meaningless."},{"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1505666506,"post_id":16880062,"comment_id":79495390,"content_license":"CC BY-SA 3.0","body":"@EJP thanks for the note, excuse my bad English from 2013, I&#39;ve edited the whole thing, if you see a better wording, you may suggest or edit"},{"owner":{"user_type":"does_not_exist","display_name":"user6091735"},"edited":false,"score":0,"creation_date":1511022397,"post_id":16880062,"comment_id":81688881,"content_license":"CC BY-SA 3.0","body":"i would like to add one thing.if you have changed the name of cat instead of creating a new one, it will reflect in the memory even after the method returns"}],"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"comment_count":3,"is_accepted":false,"community_owned_date":1370151044,"score":8,"last_activity_date":1505666338,"last_edit_date":1505666338,"creation_date":1370151044,"answer_id":16880062,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java is always pass-by-value, the parameters are copies of what the variables passed, all Objects are defined using a reference, and reference is a variable that stores a memory address of where the object is in memory.</p>\n\n<p>Check the comments to understand what happens in execution; follow numbers as they show the flow of execution ..</p>\n\n<pre><code>class Example\n{\n    public static void test (Cat ref)\n    {\n        // 3 - &lt;ref&gt; is a copy of the reference &lt;a&gt;\n        // both currently reference Grumpy\n        System.out.println(ref.getName());\n\n        // 4 - now &lt;ref&gt; references a new &lt;Cat&gt; object named \"Nyan\"\n        ref = new Cat(\"Nyan\");\n\n        // 5 - this should print \"Nyan\"\n        System.out.println( ref.getName() );\n    }\n\n    public static void main (String [] args)\n    {\n        // 1 - a is a &lt;Cat&gt; reference that references a Cat object in memory with name \"Grumpy\"\n        Cat a = new Cat(\"Grumpy\");\n\n        // 2 - call to function test which takes a &lt;Cat&gt; reference\n        test (a);\n\n        // 6 - function call ends, and &lt;ref&gt; life-time ends\n        // \"Nyan\" object has no references and the Garbage\n        // Collector will remove it from memory when invoked\n\n        // 7 - this should print \"Grumpy\"\n        System.out.println(a.getName());\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":5336,"user_id":1255825,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/c2e0b7aaa9705618953d6fd5ecd2f160?s=128&d=identicon&r=PG","display_name":"JasonG","link":"https://stackoverflow.com/users/1255825/jasong"},"comment_count":0,"is_accepted":false,"community_owned_date":1372180334,"score":9,"last_activity_date":1465272194,"last_edit_date":1465272194,"creation_date":1372180334,"answer_id":17303467,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>In an attempt to add even more to this, I thought I'd include the SCJP Study Guide section on the topic. This is from the guide that is made to pass the Sun/Oracle test on the behaviour of Java so it's a good source to use for this discussion.</p>\n\n<blockquote>\n  <p>Passing Variables into Methods (Objective 7.3)</p>\n  \n  <p>7.3 Determine the effect upon object references and primitive values when they are passed into methods that perform assignments or other modifying operations on the parameters.</p>\n  \n  <p>Methods can be declared to take primitives and/or object references. You need to know how (or if) the caller's variable can be affected by the called method. The difference between object reference and primitive variables, when passed into methods, is huge and important. To understand this section, you'll need to be comfortable with the assignments section covered in the first part of this chapter.</p>\n  \n  <p>Passing Object Reference Variables</p>\n  \n  <p>When you pass an object variable into a method, you must keep in mind that you're passing the object reference, and not the actual object itself. Remember that a reference variable holds bits that represent (to the underlying VM) a way to get to a specific object in memory (on the heap). More importantly, you must remember that you aren't even passing the actual reference variable, but rather a copy of the reference variable. A copy of a variable means you get a copy of the bits in that variable, so when you pass a reference variable, you're passing a copy of the bits representing how to get to a specific object. In other words, both the caller and the called method will now have identical copies of the reference, and thus both will refer to the same exact (not a copy) object on the heap.</p>\n  \n  <p>For this example, we'll use the Dimension class from the java.awt package:</p>\n</blockquote>\n\n<pre><code>1. import java.awt.Dimension;\n2. class ReferenceTest {\n3.     public static void main (String [] args) {\n4.         Dimension d = new Dimension(5,10);\n5.         ReferenceTest rt = new ReferenceTest();\n6.         System.out.println(\"Before modify() d.height = \" + d.height);\n7.         rt.modify(d);\n8.         System.out.println(\"After modify() d.height = \"\n9.     }\n10.\n11.\n12.\n13.   }\n14. }\n</code></pre>\n\n<blockquote>\n  <p>When we run this class, we can see that the modify() method was indeed able to modify the original (and only) Dimension object created on line 4.</p>\n</blockquote>\n\n<pre>\nC:\\Java Projects\\Reference>java ReferenceTest\nBefore modify() d.height = 10\ndim = 11\nAfter modify() d.height = 11\n</pre>\n\n<blockquote>\n  <p>Notice when the Dimension object on line 4 is passed to the modify() method, any changes to the object that occur inside the method are being made to the object whose reference was passed. In the preceding example, reference variables d and dim both point to the same object.</p>\n  \n  <p>Does Java Use Pass-By-Value Semantics?</p>\n  \n  <p>If Java passes objects by passing the reference variable instead, does that mean Java uses pass-by-reference for objects? Not exactly, although you'll often hear and read that it does. Java is actually pass-by-value for all variables running within a single VM. Pass-by-value means pass-by-variable-value. And that means, pass-by-copy-of- the-variable! (There's that word copy again!)</p>\n  \n  <p>It makes no difference if you're passing primitive or reference variables, you are always passing a copy of the bits in the variable. So for a primitive variable, you're passing a copy of the bits representing the value. For example, if you pass an int variable with the value of 3, you're passing a copy of the bits representing 3. The called method then gets its own copy of the value, to do with it what it likes.</p>\n  \n  <p>And if you're passing an object reference variable, you're passing a copy of the bits representing the reference to an object. The called method then gets its own copy of the reference variable, to do with it what it likes. But because two identical reference variables refer to the exact same object, if the called method modifies the object (by invoking setter methods, for example), the caller will see that the object the caller's original variable refers to has also been changed. In the next section, we'll look at how the picture changes when we're talking about primitives.</p>\n  \n  <p>The bottom line on pass-by-value: the called method can't change the caller's variable, although for object reference variables, the called method can change the object the variable referred to. What's the difference between changing the variable and changing the object? For object references, it means the called method can't reassign the caller's original reference variable and make it refer to a different object, or null. For example, in the following code fragment,</p>\n</blockquote>\n\n<pre><code>        void bar() {\n           Foo f = new Foo();\n           doStuff(f);\n        }\n        void doStuff(Foo g) {\n           g.setName(\"Boo\");\n           g = new Foo();\n        }\n</code></pre>\n\n<blockquote>\n  <p>reassigning g does not reassign f! At the end of the bar() method, two Foo objects have been created, one referenced by the local variable f and one referenced by\n  the local (argument) variable g. Because the doStuff() method has a copy of the reference variable, it has a way to get to the original Foo object, for instance to call the setName() method. But, the doStuff() method does not have a way to get to the f reference variable. So doStuff() can change values within the object f refers to, but doStuff() can't change the actual contents (bit pattern) of f. In other words, doStuff() can change the state of the object that f refers to, but it can't make f refer to a different object!</p>\n  \n  <p>Passing Primitive Variables</p>\n  \n  <p>Let's look at what happens when a primitive variable is passed to a method:</p>\n</blockquote>\n\n<pre><code>class ReferenceTest {\n    public static void main (String [] args) {\n      int a = 1;\n      ReferenceTest rt = new ReferenceTest();\n      System.out.println(\"Before modify() a = \" + a);\n      rt.modify(a);\n      System.out.println(\"After modify() a = \" + a);\n    }\n    void modify(int number) {\n      number = number + 1;\n      System.out.println(\"number = \" + number);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>In this simple program, the variable a is passed to a method called modify(),\n  which increments the variable by 1. The resulting output looks like this:</p>\n</blockquote>\n\n<pre><code>  Before modify() a = 1\n  number = 2\n  After modify() a = 1\n</code></pre>\n\n<blockquote>\n  <p>Notice that a did not change after it was passed to the method. Remember, it was a copy of a that was passed to the method. When a primitive variable is passed to a method, it is passed by value, which means pass-by-copy-of-the-bits-in-the-variable.</p>\n</blockquote>\n"},{"owner":{"reputation":211,"user_id":1912964,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/16f779b71407273a7684844925d322f7?s=128&d=identicon&r=PG","display_name":"Gaurav","link":"https://stackoverflow.com/users/1912964/gaurav"},"comment_count":0,"is_accepted":false,"community_owned_date":1373437887,"score":33,"last_activity_date":1493440293,"last_edit_date":1493440293,"creation_date":1373437887,"answer_id":17563873,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java has only pass by value. A very simple example to validate this.</p>\n\n<pre><code>public void test() {\n    MyClass obj = null;\n    init(obj);\n    //After calling init method, obj still points to null\n    //this is because obj is passed as value and not as reference.\n}\nprivate void init(MyClass objVar) {\n    objVar = new MyClass();\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2651,"user_id":3613893,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/XUhbb.jpg?s=128&g=1","display_name":"Kachna","link":"https://stackoverflow.com/users/3613893/kachna"},"edited":false,"score":0,"creation_date":1456571187,"post_id":18287583,"comment_id":59017181,"content_license":"CC BY-SA 3.0","body":"in java we can do: <code>someArray = InitArray(someArray)</code> assuming we have this:  <code>static int [] InitArray( int[] arr){ ... return ...}</code>"},{"owner":{"reputation":14558,"user_id":1833961,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/WzG31.png?s=128&g=1","display_name":"bvdb","link":"https://stackoverflow.com/users/1833961/bvdb"},"reply_to_user":{"reputation":2651,"user_id":3613893,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/XUhbb.jpg?s=128&g=1","display_name":"Kachna","link":"https://stackoverflow.com/users/3613893/kachna"},"edited":false,"score":0,"creation_date":1456590494,"post_id":18287583,"comment_id":59023423,"content_license":"CC BY-SA 3.0","body":"You are correct. That&#39;s a possible alternative for a simple pass-by-reference. But pass-by-reference can do more powerful things. e.g. it could assign multiple values: e.g. <code>int[] array1; int[] array2; InnitArrays(out array1, out array2);</code> assuming that you create a method <code>static void InitArray(out int[] a1, out int[] a2){...}</code>"}],"owner":{"reputation":14558,"user_id":1833961,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/WzG31.png?s=128&g=1","display_name":"bvdb","link":"https://stackoverflow.com/users/1833961/bvdb"},"comment_count":2,"is_accepted":false,"community_owned_date":1376734191,"score":8,"last_activity_date":1405683047,"last_edit_date":1405683047,"creation_date":1376734191,"answer_id":18287583,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Shortest answer :)</p>\n\n<ul>\n<li>Java has pass-by-value (and pass-reference-by-value.) </li>\n<li><strong>C# also has pass-by-reference</strong></li>\n</ul>\n\n<p>In C# this is accomplished with the \"out\" and \"ref\" keywords. </p>\n\n<p>Pass By Reference: The variable is passed in such a way that <strong>a reassignment inside the method is reflected even outside the method.</strong></p>\n\n<p>Here follows <strong>an example of passing-by-reference (C#)</strong>.\nThis feature does not exist in java.</p>\n\n<pre><code>class Example\n{\n    static void InitArray(out int[] arr)\n    {\n        arr = new int[5] { 1, 2, 3, 4, 5 };\n    }\n\n    static void Main()\n    {\n        int[] someArray;\n        InitArray(out someArray);\n\n        // This is true !\n        boolean isTrue = (someArray[0] == 1);\n    }\n}\n</code></pre>\n\n<p>See also: <a href=\"http://msdn.microsoft.com/en-us/library/szasx730.aspx\" rel=\"noreferrer\" title=\"MSDN library: passing arrays by ref and out\">MSDN library (C#): passing arrays by ref and out</a></p>\n\n<p>See also: <a href=\"http://msdn.microsoft.com/en-us/library/0f66670z.aspx\" rel=\"noreferrer\" title=\"MSDN library: passing by reference\">MSDN library (C#): passing by by value and by reference</a></p>\n"},{"owner":{"reputation":13466,"user_id":543572,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/cEl37.jpg?s=128&g=1","display_name":"James Drinkard","link":"https://stackoverflow.com/users/543572/james-drinkard"},"comment_count":0,"is_accepted":false,"community_owned_date":1378326161,"score":5,"last_activity_date":1378832000,"last_edit_date":1378832000,"creation_date":1378326161,"answer_id":18623099,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>The bottom line on pass-by-value: the called method can't change the caller's\nvariable, although for object reference variables, the called method can change the\nobject the variable referred to. What's the difference between changing the variable\nand changing the object? For object references, it means the called method can't\nreassign the caller's original reference variable and make it refer to a different object,\nor null. </p>\n\n<p>I took this code and explanation from a book on Java Certification and made some minor changes.<br>\nI think it's a\ngood illustration to the pass by value of an object.  In the code below, \nreassigning g does not reassign f! At the end of the bar() method, two Foo objects\nhave been created, one referenced by the local variable f and one referenced by\nthe local (argument) variable g. </p>\n\n<p>Because the doStuff() method has a copy of the reference variable, it has a way to get \nto the original Foo object, for instance to call\nthe setName() method. But, the doStuff() method does not have a way to get to\nthe f reference variable. So doStuff() can change values within the object f refers\nto, but doStuff() can't change the actual contents (bit pattern) of f. In other\nwords, doStuff() can change the state of the object that f refers to, but it can't\nmake f refer to a different object!</p>\n\n<pre><code>package test.abc;\n\npublic class TestObject {\n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        bar();\n    }\n\n    static void bar() {\n        Foo f = new Foo();\n        System.out.println(\"Object reference for f: \" + f);\n        f.setName(\"James\");\n        doStuff(f);\n        System.out.println(f.getName());\n        //Can change the state of an object variable in f, but can't change the object reference for f.\n        //You still have 2 foo objects.\n        System.out.println(\"Object reference for f: \" + f);\n        }\n\n    static void doStuff(Foo g) {\n            g.setName(\"Boo\");\n            g = new Foo();\n            System.out.println(\"Object reference for g: \" + g);\n        }\n}\n\n\npackage test.abc;\n\npublic class Foo {\n    public String name = \"\";\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p><strong>Note that the object reference has not changed in the console output below:</strong></p>\n\n<p><strong>Console output:</strong></p>\n\n<p>Object reference for f: test.abc.Foo@62f72617</p>\n\n<p>Object reference for g: test.abc.Foo@4fe5e2c3</p>\n\n<p>Boo\nObject reference for f: test.abc.Foo@62f72617 </p>\n"},{"comments":[{"owner":{"reputation":156,"user_id":10095010,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c140fa45e66b53ac69c2663832990b77?s=128&d=identicon&r=PG&f=1","display_name":"Dude156","link":"https://stackoverflow.com/users/10095010/dude156"},"edited":false,"score":2,"creation_date":1599945752,"post_id":18740042,"comment_id":112934517,"content_license":"CC BY-SA 4.0","body":"Such an awesome answer that even a fool like myself was able to understand. I would add also amend that &quot;pass by value&quot; literally means that the literal value in the stack is passed."}],"owner":{"reputation":1480,"user_id":1917489,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/92dda5ac1578dacfd6240c893629d2e7?s=128&d=identicon&r=PG","display_name":"cutmancometh","link":"https://stackoverflow.com/users/1917489/cutmancometh"},"comment_count":1,"is_accepted":false,"community_owned_date":1378899270,"score":254,"last_activity_date":1515082727,"last_edit_date":1515082727,"creation_date":1378899270,"answer_id":18740042,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>I feel like arguing about \"pass-by-reference vs pass-by-value\" is not super-helpful.</p>\n\n<p>If you say, \"Java is pass-by-whatever (reference/value)\", in either case, you're not provide a complete answer. Here's some additional information that will hopefully aid in understanding what's happening in memory.</p>\n\n<p>Crash course on stack/heap before we get to the Java implementation:\nValues go on and off the stack in a nice orderly fashion, like a stack of plates at a cafeteria.\nMemory in the heap (also known as dynamic memory) is haphazard and disorganized. The JVM just finds space wherever it can, and frees it up as the variables that use it are no longer needed.</p>\n\n<p>Okay. First off, local primitives go on the stack. So this code:</p>\n\n<pre><code>int x = 3;\nfloat y = 101.1f;\nboolean amIAwesome = true;\n</code></pre>\n\n<p>results in this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/7nGKU.png\" alt=\"primitives on the stack\"></p>\n\n<p>When you declare and instantiate an object. The actual object goes on the heap. What goes on the stack? The address of the object on the heap. C++ programmers would call this a pointer, but some Java developers are against the word \"pointer\". Whatever. Just know that the address of the object goes on the stack.</p>\n\n<p>Like so:</p>\n\n<pre><code>int problems = 99;\nString name = \"Jay-Z\";\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/yTIYp.png\" alt=\"a b*7ch aint one!\"></p>\n\n<p>An array is an object, so it goes on the heap as well. And what about the objects in the array? They get their own heap space, and the address of each object goes inside the array.</p>\n\n<pre><code>JButton[] marxBros = new JButton[3];\nmarxBros[0] = new JButton(\"Groucho\");\nmarxBros[1] = new JButton(\"Zeppo\");\nmarxBros[2] = new JButton(\"Harpo\");\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/v2b33.png\" alt=\"marx brothers\"></p>\n\n<p>So, what gets passed in when you call a method? If you pass in an object, what you're actually passing in is the address of the object. Some might say the \"value\" of the address, and some say it's just a reference to the object. This is the genesis of the holy war between \"reference\" and \"value\" proponents. What you call it isn't as important as that you understand that what's getting passed in is the address to the object.</p>\n\n<pre><code>private static void shout(String name){\n    System.out.println(\"There goes \" + name + \"!\");\n}\n\npublic static void main(String[] args){\n    String hisName = \"John J. Jingleheimerschmitz\";\n    String myName = hisName;\n    shout(myName);\n}\n</code></pre>\n\n<p>One String gets created and space for it is allocated in the heap, and the address to the string is stored on the stack and given the identifier <code>hisName</code>, since the address of the second String is the same as the first, no new String is created and no new heap space is allocated, but a new identifier is created on the stack. Then we call <code>shout()</code>: a new stack frame is created and a new identifier, <code>name</code> is created and assigned the address of the already-existing String.</p>\n\n<p><img src=\"https://i.stack.imgur.com/q0prc.png\" alt=\"la da di da da da da\"></p>\n\n<p>So, value, reference? You say \"potato\".</p>\n"},{"owner":{"reputation":9006,"user_id":1931858,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f95ed4b484adea71cd0b6b157c6b5b94?s=128&d=identicon&r=PG","display_name":"user1931858","link":"https://stackoverflow.com/users/1931858/user1931858"},"comment_count":0,"is_accepted":false,"community_owned_date":1379901791,"score":8,"last_activity_date":1379901791,"creation_date":1379901791,"answer_id":18950805,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java passes parameters by value, but for object variables, the values are essentially references to objects. Since arrays are objects the following <a href=\"http://theoryapp.com/parameter-passing-in-java/\" rel=\"noreferrer\">example code</a> shows the difference.</p>\n\n<pre><code>public static void dummyIncrease(int[] x, int y)\n{\n    x[0]++;\n    y++;\n}\npublic static void main(String[] args)\n{\n    int[] arr = {3, 4, 5};\n    int b = 1;\n    dummyIncrease(arr, b);\n    // arr[0] is 4, but b is still 1\n}\n\nmain()\n  arr +---+       +---+---+---+\n      | # | ----&gt; | 3 | 4 | 5 |\n      +---+       +---+---+---+\n  b   +---+             ^\n      | 1 |             | \n      +---+             |\n                        |\ndummyIncrease()         |\n  x   +---+             |\n      | # | ------------+\n      +---+      \n  y   +---+ \n      | 1 | \n      +---+ \n</code></pre>\n"},{"owner":{"reputation":904,"user_id":1910406,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ca8d21b587e70c7a655a49c8870ff82c?s=128&d=identicon&r=PG","display_name":"Ganesh","link":"https://stackoverflow.com/users/1910406/ganesh"},"comment_count":0,"is_accepted":false,"community_owned_date":1381996470,"score":87,"last_activity_date":1523969866,"last_edit_date":1592644375,"creation_date":1381996470,"answer_id":19421107,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p><strong>Java is always pass by value, not pass by reference</strong></p>\n<p>First of all, we need to understand what pass by value and pass by reference are.</p>\n<p><strong>Pass by value means that you are making a copy in memory of the actual parameter's value that is passed in. This is a copy of the contents of the actual parameter</strong>.</p>\n<p><strong>Pass by reference (also called pass by address) means that a copy of the address of the actual parameter is stored</strong>.</p>\n<p>Sometimes Java can give the illusion of pass by reference. Let's see how it works by using the example below:</p>\n<pre><code>public class PassByValue {\n    public static void main(String[] args) {\n        Test t = new Test();\n        t.name = &quot;initialvalue&quot;;\n        new PassByValue().changeValue(t);\n        System.out.println(t.name);\n    }\n    \n    public void changeValue(Test f) {\n        f.name = &quot;changevalue&quot;;\n    }\n}\n\nclass Test {\n    String name;\n}\n</code></pre>\n<p>The output of this program is:</p>\n<blockquote>\n<pre><code>changevalue\n</code></pre>\n</blockquote>\n<p>Let's understand step by step:</p>\n<pre><code>Test t = new Test();\n</code></pre>\n<p>As we all know it will create an object in the heap and return the reference value back to t. For example, suppose the value of t is <code>0x100234</code> (we don't know the actual JVM internal value, this is just an example) .</p>\n<p><img src=\"https://i.stack.imgur.com/AVrhI.png\" alt=\"first illustration\" /></p>\n<pre><code>new PassByValue().changeValue(t);\n</code></pre>\n<p>When passing reference t to the function it will not directly pass the actual reference value of object test,  but it will create a copy of t and then pass it to the function. Since it is <strong>passing by value</strong>, it passes a copy of the variable rather than the actual reference of it. Since we said the value of t was <code>0x100234</code>, both t and f will have the same value and hence they will point to the same object.</p>\n<p><img src=\"https://i.stack.imgur.com/WwdPh.png\" alt=\"second illustration\" /></p>\n<p>If you change anything in the function using reference f it will modify the existing contents of the object. That is why we got the output <code>changevalue</code>,   which is updated in the function.</p>\n<p>To understand this more clearly, consider the following example:</p>\n<pre><code>public class PassByValue {\n    public static void main(String[] args) {\n        Test t = new Test();\n        t.name = &quot;initialvalue&quot;;\n        new PassByValue().changeRefence(t);\n        System.out.println(t.name);\n    }\n    \n    public void changeRefence(Test f) {\n        f = null;\n    }\n}\n\nclass Test {\n    String name;\n}\n</code></pre>\n<p>Will this throw a <code>NullPointerException</code>? No, because it only passes a copy of the reference.\nIn the case of passing by reference, it could have thrown a <code>NullPointerException</code>, as seen below:</p>\n<p><img src=\"https://i.stack.imgur.com/jH6KP.png\" alt=\"third illustration\" /></p>\n<p>Hopefully this will help.</p>\n"},{"comments":[{"owner":{"reputation":107659,"user_id":179850,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/6b2c535fac79e482b71f15de561f55ca?s=128&d=identicon&r=PG","display_name":"Gray","link":"https://stackoverflow.com/users/179850/gray"},"edited":false,"score":0,"creation_date":1511901234,"post_id":19970416,"comment_id":82037935,"content_license":"CC BY-SA 3.0","body":"This is very misleading.  You certainly <i>can</i> change the value of an argument from within a method."}],"owner":{"reputation":390,"user_id":1907916,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/QmRij.jpg?s=128&g=1","display_name":"Bhushan","link":"https://stackoverflow.com/users/1907916/bhushan"},"comment_count":1,"is_accepted":false,"community_owned_date":1384407825,"score":2,"last_activity_date":1384415802,"last_edit_date":1384415802,"creation_date":1384407825,"answer_id":19970416,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>The Java programming language passes arguments only by value, that is,\nyou cannot change the argument value in the calling method from within\nthe called method.</p>\n\n<hr>\n\n<p>However, when an object instance is passed as an argument to a method,\nthe value of the argument is not the object itself but a reference to the\nobject. You can change the contents of the object in the called method but\nnot the object reference.</p>\n\n<hr>\n\n<p>To many people, this looks like pass-by-reference, and behaviorally, it has\nmuch in common with pass-by-reference. However, there are two reasons\nthis is inaccurate.</p>\n\n<ul>\n<li><p>Firstly, the ability to change the thing passed into a\nmethod only applies to objects, not primitive values. </p></li>\n<li><p>Second, the actual\nvalue associated with a variable of object type is the reference to the\nobject, and not the object itself. This is an important distinction in other\nways, and if clearly understood, is entirely supporting of the point that\nthe Java programming language passes arguments by value.</p></li>\n</ul>\n\n<hr>\n\n<pre><code>The following code example illustrates this point:\n1 public class PassTest {\n2\n3   // Methods to change the current values\n4   public static void changeInt(int value) {\n5     value = 55;\n6  }\n7   public static void changeObjectRef(MyDate ref) {\n8     ref = new MyDate(1, 1, 2000);\n9  }\n10   public static void changeObjectAttr(MyDate ref) {\n11     ref.setDay(4);\n12   }\n13\n14 public static void main(String args[]) {\n15     MyDate date;\n16     int val;\n17\n18     // Assign the int\n19     val = 11;\n20     // Try to change it\n21     changeInt(val);\n22     // What is the current value?\n23     System.out.println(\"Int value is: \" + val);\n24\n25 // Assign the date\n26     date = new MyDate(22, 7, 1964);\n27     // Try to change it\n28     changeObjectRef(date);\n29     // What is the current value?\n30 System.out.println(\"MyDate: \" + date);\n31\n32 // Now change the day attribute\n33     // through the object reference\n34     changeObjectAttr(date);\n35     // What is the current value?\n36 System.out.println(\"MyDate: \" + date);\n37   }\n38 }\n</code></pre>\n\n<hr>\n\n<pre><code>This code outputs the following:\njava PassTest\nInt value is: 11\nMyDate: 22-7-1964\nMyDate: 4-7-1964\nThe MyDate object is not changed by the changeObjectRef method;\nhowever, the changeObjectAttr method changes the day attribute of the\nMyDate object.\n</code></pre>\n"},{"owner":{"reputation":9424,"user_id":922581,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/WQKkm.jpg?s=128&g=1","display_name":"Srle","link":"https://stackoverflow.com/users/922581/srle"},"comment_count":0,"is_accepted":false,"community_owned_date":1385049852,"score":88,"last_activity_date":1442416691,"last_edit_date":1442416691,"creation_date":1385049852,"answer_id":20125921,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>In java everything is reference, so when you have something like:\n    <code>Point pnt1 = new Point(0,0);</code> Java does following:</p>\n\n<ol>\n<li>Creates new Point object</li>\n<li>Creates new Point reference and initialize that reference to <em>point (refer to)</em> on previously created Point object.</li>\n<li>From here, through Point object life, you will access to that object through pnt1\n reference. So we can say that in Java you manipulate object through its reference.<br></li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/jM54f.png\" alt=\"enter image description here\"></p>\n\n<p><strong>Java doesn't pass method arguments by reference; it passes them by value.</strong> I will use example from <a href=\"http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html\" rel=\"noreferrer\">this site</a>: </p>\n\n<pre><code>public static void tricky(Point arg1, Point arg2) {\n  arg1.x = 100;\n  arg1.y = 100;\n  Point temp = arg1;\n  arg1 = arg2;\n  arg2 = temp;\n}\npublic static void main(String [] args) {\n  Point pnt1 = new Point(0,0);\n  Point pnt2 = new Point(0,0);\n  System.out.println(\"X1: \" + pnt1.x + \" Y1: \" +pnt1.y); \n  System.out.println(\"X2: \" + pnt2.x + \" Y2: \" +pnt2.y);\n  System.out.println(\" \");\n  tricky(pnt1,pnt2);\n  System.out.println(\"X1: \" + pnt1.x + \" Y1:\" + pnt1.y); \n  System.out.println(\"X2: \" + pnt2.x + \" Y2: \" +pnt2.y);  \n}\n</code></pre>\n\n<p>Flow of the program:</p>\n\n<pre><code>Point pnt1 = new Point(0,0);\nPoint pnt2 = new Point(0,0);\n</code></pre>\n\n<p>Creating two different Point object with two different reference associated.\n<img src=\"https://i.stack.imgur.com/5LIKC.png\" alt=\"enter image description here\"></p>\n\n<pre><code>System.out.println(\"X1: \" + pnt1.x + \" Y1: \" +pnt1.y); \nSystem.out.println(\"X2: \" + pnt2.x + \" Y2: \" +pnt2.y);\nSystem.out.println(\" \");\n</code></pre>\n\n<p>As expected output will be:</p>\n\n<pre><code>X1: 0     Y1: 0\nX2: 0     Y2: 0\n</code></pre>\n\n<p><strong>On this line 'pass-by-value' goes into the play...</strong> <br></p>\n\n<pre><code>tricky(pnt1,pnt2);           public void tricky(Point arg1, Point arg2);\n</code></pre>\n\n<p>References <code>pnt1</code> and <code>pnt2</code> are <strong>passed by value</strong> to the tricky method, which means that now yours references <code>pnt1</code> and <code>pnt2</code> have their <code>copies</code> named <code>arg1</code> and <code>arg2</code>.So <code>pnt1</code> and <code>arg1</code> <em>points</em> to the same object. (Same for the <code>pnt2</code> and <code>arg2</code>)\n<img src=\"https://i.stack.imgur.com/qd1GH.png\" alt=\"enter image description here\"></p>\n\n<p>In the <code>tricky</code> method:</p>\n\n<pre><code> arg1.x = 100;\n arg1.y = 100;\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/o4WT0.png\" alt=\"enter image description here\"></p>\n\n<p>Next in the <code>tricky</code> method</p>\n\n<pre><code>Point temp = arg1;\narg1 = arg2;\narg2 = temp;\n</code></pre>\n\n<p>Here, you first create new <code>temp</code> Point reference which will <em>point</em> on same place like <code>arg1</code> reference. Then you move reference <code>arg1</code> to <em>point</em> to the same place like <code>arg2</code> reference.\nFinally <code>arg2</code> will <em>point</em> to the same place like <code>temp</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/fX5Q3.png\" alt=\"enter image description here\"></p>\n\n<p>From here scope of <code>tricky</code> method is gone and you don't have access any more to the references: <code>arg1</code>, <code>arg2</code>, <code>temp</code>. <strong>But important note is that everything you do with these references when they are 'in life' will permanently affect object on which they are <em>point</em> to.</strong> </p>\n\n<p>So after executing method <code>tricky</code>, when you return to <code>main</code>, you have this situation:\n<img src=\"https://i.stack.imgur.com/LRETe.png\" alt=\"enter image description here\"></p>\n\n<p>So now, completely execution of program will be:</p>\n\n<pre><code>X1: 0         Y1: 0\nX2: 0         Y2: 0\nX1: 100       Y1: 100\nX2: 0         Y2: 0\n</code></pre>\n"},{"owner":{"reputation":57841,"user_id":2396539,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/nGigV.png?s=128&g=1","display_name":"Aniket Thakur","link":"https://stackoverflow.com/users/2396539/aniket-thakur"},"comment_count":0,"is_accepted":false,"community_owned_date":1386059205,"score":4,"last_activity_date":1386059205,"creation_date":1386059205,"answer_id":20346109,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p><strong>Java passes references to objects by value.</strong></p>\n\n<p>So if any modification is done to the Object to which the reference argument points it will be reflected back on the original object.</p>\n\n<p>But if the reference argument point to another Object still the original reference will point to original Object.</p>\n"},{"owner":{"reputation":2148,"user_id":216248,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/e897c9afcfcec3fef9ed461438ad3d38?s=128&d=identicon&r=PG","display_name":"karatedog","link":"https://stackoverflow.com/users/216248/karatedog"},"comment_count":0,"is_accepted":false,"community_owned_date":1386937393,"score":73,"last_activity_date":1451288187,"last_edit_date":1451288187,"creation_date":1386937393,"answer_id":20566453,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<h2>A reference is always a value when represented, no matter what language you use.</h2>\n\n<p>Getting an outside of the box view, let's look at Assembly or some low level memory management. At the CPU level a <em>reference</em> to anything immediately becomes a <em>value</em> if it gets written to memory or to one of the CPU registers. (That is why <em>pointer</em> is a good definition. It is a value, which has a purpose at the same time).</p>\n\n<p>Data in memory has a <strong>Location</strong> and at that location there is a value (byte,word, whatever). In Assembly we have a convenient solution to give a <strong>Name</strong> to certain <strong>Location</strong> (aka variable), but when compiling the code, the assembler simply replaces <strong>Name</strong> with the designated location just like your browser replaces domain names with IP addresses.</p>\n\n<p>Down to the core it is technically impossible to pass a reference to anything in any language without representing it (when it immediately becomes a value).</p>\n\n<p>Lets say we have a variable Foo, its <strong>Location</strong> is at the 47th byte in memory and its <strong>Value</strong> is 5. We have another variable <strong>Ref2Foo</strong> which is at 223rd byte in memory, and its value will be 47. This Ref2Foo might be a technical variable, not explicitly created by the program. If you just look at 5 and 47 without any other information, you will see just two <strong>Values</strong>.\nIf you use them as references then to reach to <code>5</code> we have to travel:</p>\n\n<pre><code>(Name)[Location] -&gt; [Value at the Location]\n---------------------\n(Ref2Foo)[223]  -&gt; 47\n(Foo)[47]       -&gt; 5\n</code></pre>\n\n<p>This is how jump-tables work. </p>\n\n<p>If we want to call a method/function/procedure with Foo's value, there are a few possible way to pass the variable to the method, depending on the <strong>language</strong> and its several method invocation modes:</p>\n\n<ol>\n<li>5 gets copied to one of the CPU registers (ie. EAX).</li>\n<li>5 gets PUSHd to the stack.</li>\n<li>47 gets copied to one of the CPU registers</li>\n<li>47 PUSHd to the stack.</li>\n<li>223 gets copied to one of the CPU registers.</li>\n<li>223 gets PUSHd to the stack.</li>\n</ol>\n\n<p>In every cases above a value - a <strong>copy</strong> of an existing value - has been created, it is now upto the receiving method to handle it. When you write \"Foo\" inside the method, it is either read out from EAX, or automatically  <strong>dereferenced</strong>, or double dereferenced, the process depends on how the language works and/or what the type of Foo dictates. This is hidden from the developer until she circumvents the dereferencing process. So a <em>reference</em> is a <em>value</em> when represented, because a reference is a value that has to be processed (at language level).</p>\n\n<p>Now we have passed Foo to the method:</p>\n\n<ul>\n<li>in case 1. and 2. if you change Foo (<code>Foo = 9</code>) it only affects local scope as you have a copy of the Value. From inside the method we cannot even determine where in memory the original Foo was located.</li>\n<li>in case 3. and 4. if you use default language constructs and change Foo (<code>Foo = 11</code>), it could change Foo globally (depends on the language, ie. Java or like Pascal's <code>procedure findMin(x, y, z: integer;</code><strong>var m</strong><code>: integer);</code>). However if the language allows you to circumvent the dereference process, you can change <code>47</code>, say to <code>49</code>. At that point Foo seems to have been changed if you read it, because you have changed the <strong>local pointer</strong> to it. And if you were to modify this Foo inside the method (<code>Foo = 12</code>) you will probably FUBAR the execution of the program (aka. segfault) because you will write to a different memory than expected, you can even modify an area that is destined to hold executable program and writing to it will modify running code (Foo is now not at <code>47</code>). BUT Foo's value of <code>47</code> did not change globally, only the one inside the method, because <code>47</code> was also a copy to the method.</li>\n<li>in case 5. and 6. if you modify <code>223</code> inside the method it creates the same mayhem as in 3. or 4. (a pointer, pointing to a now bad value, that is again used as a pointer) but this is still a local problem, as 223 was <strong>copied</strong>. However if you are able to dereference <code>Ref2Foo</code> (that is <code>223</code>), reach to and modify the pointed value <code>47</code>, say, to <code>49</code>, it will affect Foo <strong>globally</strong>, because in this case the methods got a copy of <code>223</code>  but the referenced <code>47</code> exists only once, and changing that to <code>49</code> will lead every <code>Ref2Foo</code> double-dereferencing to a wrong value.</li>\n</ul>\n\n<p>Nitpicking on insignificant details, even languages that do pass-by-reference will pass values to functions, but those functions know that they have to use it for dereferencing purposes. This pass-the-reference-as-value is just hidden from the programmer because it is practically useless and the terminology is only <em>pass-by-reference</em>.</p>\n\n<p>Strict <em>pass-by-value</em> is also useless, it would mean that a 100 Mbyte array should have to be copied every time we call a method with the array as argument, therefore Java cannot be stricly pass-by-value. Every language would pass a reference to this huge array (as a value) and either employs copy-on-write mechanism if that array can be changed locally inside the method or allows the method (as Java does) to modify the array globally (from the caller's view) and a few languages allows to modify the Value of the reference itself.</p>\n\n<p>So in short and in Java's own terminology, Java is <em>pass-by-value</em> where <em>value</em> can be: either a <strong>real value</strong> or a <strong>value</strong> that is a representation of a <strong>reference</strong>. </p>\n"},{"owner":{"reputation":18222,"user_id":779111,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/808763efea1a993c937ac96e7e83032f?s=128&d=identicon&r=PG","display_name":"JAN","link":"https://stackoverflow.com/users/779111/jan"},"comment_count":0,"is_accepted":false,"community_owned_date":1390407794,"score":7,"last_activity_date":1398833700,"last_edit_date":1398833700,"creation_date":1390407794,"answer_id":21288385,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Mr @Scott Stanchfield wrote an excellent answer. Here is the class that would you to verify\nexactly what he meant:</p>\n\n<pre><code>public class Dog {\n\n    String dog ;\n    static int x_static;\n    int y_not_static;\n\n    public String getName()\n    {\n        return this.dog;\n    }\n\n    public Dog(String dog)\n    {\n        this.dog = dog;\n    }\n\n    public void setName(String name)\n    {\n        this.dog = name;\n    }\n\n    public static void foo(Dog someDog)\n    {\n        x_static = 1;\n        // y_not_static = 2;  // not possible !!\n        someDog.setName(\"Max\");     // AAA\n        someDog = new Dog(\"Fifi\");  // BBB\n        someDog.setName(\"Rowlf\");   // CCC\n    }\n\n    public static void main(String args[])\n    {\n        Dog myDog = new Dog(\"Rover\");\n        foo(myDog);\n        System.out.println(myDog.getName());\n    }\n}\n</code></pre>\n\n<p>So, we pass from main() a dog called <code>Rover</code>, then we assign a new address to the pointer that we passed, but at the end, the name of the dog is not <code>Rover</code>, and not <code>Fifi</code>, and certainly not <code>Rowlf</code>, but <code>Max</code>.</p>\n"},{"owner":{"reputation":249530,"user_id":438154,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/827d86026ddc062f449ccedece1c52da?s=128&d=identicon&r=PG&f=1","display_name":"Sotirios Delimanolis","link":"https://stackoverflow.com/users/438154/sotirios-delimanolis"},"comment_count":0,"is_accepted":false,"community_owned_date":1404370091,"score":50,"last_activity_date":1466718898,"last_edit_date":1495541906,"creation_date":1404370091,"answer_id":24546764,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>I thought I'd contribute this answer to add more details from the Specifications.</p>\n\n<p>First, <a href=\"https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value\">What&#39;s the difference between passing by reference vs. passing by value?</a></p>\n\n<blockquote>\n  <p>Passing by reference means the called functions' parameter will be the\n  same as the callers' passed argument (not the value, but the identity\n  - the variable itself). </p>\n  \n  <p>Pass by value means the called functions' parameter will be a copy of\n  the callers' passed argument.</p>\n</blockquote>\n\n<p>Or from wikipedia, <a href=\"http://en.wikipedia.org/wiki/Call_by_reference#Call_by_reference\" rel=\"noreferrer\">on the subject of pass-by-reference</a></p>\n\n<blockquote>\n  <p>In call-by-reference evaluation (also referred to as\n  pass-by-reference), a function receives an implicit reference to a\n  variable used as argument, rather than a copy of its value. This\n  typically means that the function can modify (i.e. assign to) the\n  variable used as argumentâsomething that will be seen by its caller.</p>\n</blockquote>\n\n<p>And <a href=\"http://en.wikipedia.org/wiki/Call_by_value#Call_by_value\" rel=\"noreferrer\">on the subject of pass-by-value</a></p>\n\n<blockquote>\n  <p>In call-by-value, the argument expression is evaluated, and the\n  resulting value is bound to the corresponding variable in the function [...]. \n  If the function or procedure is able to assign values to its\n  parameters, only its local copy is assigned [...].</p>\n</blockquote>\n\n<p>Second, we need to know what Java uses in its method invocations. The <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.1\" rel=\"noreferrer\">Java Language Specification</a> states</p>\n\n<blockquote>\n  <p>When the method or constructor is invoked (Â§15.12), <strong>the values of the\n  actual argument expressions initialize newly created parameter\n  variables</strong>, each of the declared type, before execution of the body of\n  the method or constructor.</p>\n</blockquote>\n\n<p>So it assigns (or binds) the value of the argument to the corresponding parameter variable. </p>\n\n<p><strong>What is the value of the argument?</strong></p>\n\n<p>Let's consider reference types, the <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.4\" rel=\"noreferrer\">Java Virtual Machine Specification</a> states</p>\n\n<blockquote>\n  <p>There are three kinds of <strong>reference types</strong>: class types, array types,\n  and interface types. <strong>Their values are references to dynamically\n  created class instances, arrays, or class instances or arrays that\n  implement interfaces, respectively.</strong></p>\n</blockquote>\n\n<p>The <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.3.1\" rel=\"noreferrer\">Java Language Specification</a> also states</p>\n\n<blockquote>\n  <p><strong>The reference values (often just references) are pointers to these objects</strong>, and a special null reference, which refers to no object.</p>\n</blockquote>\n\n<p>The value of an argument (of some reference type) is a pointer to an object. Note that a variable, an invocation of a method with a reference type return type, and an instance creation expression (<code>new ...</code>) all resolve to a reference type value.</p>\n\n<p>So</p>\n\n<pre><code>public void method (String param) {}\n...\nString var = new String(\"ref\");\nmethod(var);\nmethod(var.toString());\nmethod(new String(\"ref\"));\n</code></pre>\n\n<p>all bind the value of a reference to a <code>String</code> instance to the method's newly created parameter, <code>param</code>. This is exactly what the definition of pass-by-value describes. As such, <strong>Java is pass-by-value</strong>.</p>\n\n<p><strong>The fact that you can follow the reference to invoke a method or access a field of the referenced object is completely irrelevant to the conversation.</strong> The definition of pass-by-reference was</p>\n\n<blockquote>\n  <p>This typically means that the function can modify (i.e. assign to) the\n  variable used as argumentâsomething that will be seen by its caller.</p>\n</blockquote>\n\n<p>In Java, modifying the variable means reassigning it. In Java, if you reassigned the variable within the method, it would go unnoticed to the caller. <strong>Modifying the object referenced by the variable is a different concept entirely.</strong> </p>\n\n<hr>\n\n<p>Primitive values are also defined in the Java Virtual Machine Specification, <a href=\"http://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.3\" rel=\"noreferrer\">here</a>. The value of the type is the corresponding integral or floating point value, encoded appropriately (8, 16, 32, 64, etc. bits).</p>\n"},{"owner":{"reputation":163,"user_id":1893773,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/xczD7.jpg?s=128&g=1","display_name":"Dustin Deus","link":"https://stackoverflow.com/users/1893773/dustin-deus"},"comment_count":0,"is_accepted":false,"community_owned_date":1405023559,"score":6,"last_activity_date":1405023559,"creation_date":1405023559,"answer_id":24685542,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p><strong>Understand it in 2 Steps:</strong> </p>\n\n<p>You can't change the reference to the object itself but you can work with this passed parameter as a reference to the object.</p>\n\n<p>If you want to change the value behind the reference you will only declare a new variable on the stack with the same name 'd'. Look at the references with the sign <code>@</code> and you will find out that the reference has been changed.</p>\n\n<pre><code>public static void foo(Dog d) {\n  d.Name = \"belly\";\n  System.out.println(d); //Reference: Dog@1540e19d\n\n  d = new Dog(\"wuffwuff\");\n  System.out.println(d); //Dog@677327b6\n}\npublic static void main(String[] args) throws Exception{\n  Dog lisa = new Dog(\"Lisa\");\n  foo(lisa);\n  System.out.println(lisa.Name); //belly\n}\n</code></pre>\n"},{"owner":{"reputation":39,"user_id":3961865,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4c8d0b9d0961f151b248afb35ee746e0?s=128&d=identicon&r=PG&f=1","display_name":"MichaÅ Å»bikowski","link":"https://stackoverflow.com/users/3961865/micha%c5%82-%c5%bbbikowski"},"comment_count":0,"is_accepted":false,"community_owned_date":1411604618,"score":20,"last_activity_date":1489141568,"last_edit_date":1489141568,"creation_date":1411604618,"answer_id":26028582,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Throughout all the answers we see that Java pass-by-value or rather as @Gevorg \nwrote: \"pass-by-copy-of-the-variable-value\" and this is the idea that we should have in mind all the time. </p>\n\n<p>I am focusing on examples that helped me understand the idea and it is rather addendum to previous answers.</p>\n\n<p>From [1] In Java you always are passing arguments by copy; that is you're always creating a new instance of the value inside the function. But there are certain behaviors that can make you think you're passing by reference.</p>\n\n<ul>\n<li><p>Passing by copy: When a variable is passed to a method/function, a copy is made (sometimes we hear that when you pass primitives, you're making copies).</p></li>\n<li><p>Passing by reference: When a variable is passed to a method/function, the code in the method/function operates on the original variable (You're still passing by copy, but references to values inside the complex object are parts of both versions of the variable, both the original and the version inside the function. The complex objects themselves are being copied, but the internal references are being retained)</p></li>\n</ul>\n\n<h2>Examples of Passing by copy/ by value</h2>\n\n<p><strong>Example from [ref 1]</strong></p>\n\n<pre><code>void incrementValue(int inFunction){\n  inFunction ++;\n  System.out.println(\"In function: \" + inFunction);\n}\n\nint original = 10;\nSystem.out.print(\"Original before: \" + original);\nincrementValue(original);\nSystem.out.println(\"Original after: \" + original);\n\nWe see in the console:\n &gt; Original before: 10\n &gt; In Function: 11\n &gt; Original after: 10 (NO CHANGE)\n</code></pre>\n\n<p><strong>Example from [ref 2]</strong></p>\n\n<blockquote>\n  <p>shows nicely the mechanism\n  <a href=\"https://www.youtube.com/watch?v=W2ysz_6AyJE&amp;list=PL6C11012B1B464EC5#t=502\" rel=\"noreferrer\">watch max 5 min</a></p>\n</blockquote>\n\n<h2>(Passing by reference) pass-by-copy-of-the-variable-value</h2>\n\n<p><strong>Example from [ref 1]</strong>\n(remember that an array is an object)</p>\n\n<pre><code>void incrementValu(int[] inFuncion){\n  inFunction[0]++;\n  System.out.println(\"In Function: \" + inFunction[0]);\n}\n\nint[] arOriginal = {10, 20, 30};\nSystem.out.println(\"Original before: \" + arOriginal[0]);\nincrementValue(arOriginal[]);\nSystem.out.println(\"Original before: \" + arOriginal[0]);\n\nWe see in the console:\n  &gt;Original before: 10\n  &gt;In Function: 11\n  &gt;Original before: 11 (CHANGE)\n</code></pre>\n\n<p>The complex objects themselves are being copied, but the internal references are being retained.</p>\n\n<p><strong>Example from[ref 3]</strong></p>\n\n<pre><code>package com.pritesh.programs;\n\nclass Rectangle {\n  int length;\n  int width;\n\n  Rectangle(int l, int b) {\n    length = l;\n    width = b;\n  }\n\n  void area(Rectangle r1) {\n    int areaOfRectangle = r1.length * r1.width;\n    System.out.println(\"Area of Rectangle : \" \n                            + areaOfRectangle);\n  }\n}\n\nclass RectangleDemo {\n  public static void main(String args[]) {\n    Rectangle r1 = new Rectangle(10, 20);\n    r1.area(r1);\n  }\n}\n</code></pre>\n\n<p>The area of the rectangle is 200 and the length=10 and width=20</p>\n\n<p><strong>Last thing</strong> I would like to share was this moment of the lecture:\n<strong><a href=\"https://www.youtube.com/watch?v=W8nNdNZ40EQ#t=1206\" rel=\"noreferrer\">Memory Allocation</a></strong>\nwhich I found very helpful in understanding the Java passing by value or rather âpass-by-copy-of-the-variable-valueâ as @Gevorg has written.</p>\n\n<ol>\n<li><a href=\"http://www.lynda.com/Android-tutorials/Passing-arguments-reference-value/86005/94989-4.html\" rel=\"noreferrer\">REF 1 Lynda.com</a></li>\n<li><a href=\"http://see.stanford.edu/see/courseinfo.aspx?coll=824a47e1-135f-4508-a5aa-866adcae1111\" rel=\"noreferrer\">REF 2 Professor Mehran Sahami</a>\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=W2ysz_6AyJE&amp;list=PL6C11012B1B464EC5#t=502\" rel=\"noreferrer\">watch max 5 min</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=W8nNdNZ40EQ#t=1206\" rel=\"noreferrer\">Memory Allocation</a></li>\n</ul></li>\n<li><a href=\"http://www.c4learn.com/\" rel=\"noreferrer\">REF 3 c4learn</a>\n\n<ul>\n<li><a href=\"http://www.c4learn.com/java/java-passing-object-as-parameter-to-method/\" rel=\"noreferrer\">passing-object-as-parameter-to-method</a></li>\n</ul></li>\n</ol>\n"},{"owner":{"reputation":1473,"user_id":2997238,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b70a115c69ba348bcdbbb86656aedd1c?s=128&d=identicon&r=PG","display_name":"drew7721","link":"https://stackoverflow.com/users/2997238/drew7721"},"comment_count":0,"is_accepted":false,"community_owned_date":1412570069,"score":6,"last_activity_date":1412570069,"creation_date":1412570069,"answer_id":26210057,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>There is a workaround in Java for the reference. Let me explain by this example:</p>\n\n<pre><code>public class Yo {\npublic static void foo(int x){\n    System.out.println(x); //out 2\n    x = x+2;\n    System.out.println(x); // out 4\n}\npublic static void foo(int[] x){\n    System.out.println(x[0]); //1\n    x[0] = x[0]+2;\n    System.out.println(x[0]); //3\n}\npublic static void main(String[] args) {\n    int t = 2;\n    foo(t);\n    System.out.println(t); // out 2 (t did not change in foo)\n\n    int[] tab = new int[]{1};\n    foo(tab);\n    System.out.println(tab[0]); // out 3 (tab[0] did change in foo)\n}}\n</code></pre>\n\n<p>I hope this helps!</p>\n"},{"comments":[{"owner":{"reputation":1127,"user_id":1684768,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3afd4bcec79eec82c803f3d9bd9bad9b?s=128&d=identicon&r=PG","display_name":"mrres1","link":"https://stackoverflow.com/users/1684768/mrres1"},"edited":false,"score":1,"creation_date":1422149421,"post_id":27608651,"comment_id":44637050,"content_license":"CC BY-SA 3.0","body":"You can only define one class per file.  This is not including nested and inner classes.  Considering this will be something a new programmer will be reading, you should explain this to the user; allowing them to duplicate the code on their machine."},{"owner":{"reputation":528,"user_id":2791256,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4dc44bdb58ae4af9f2257f10bd5be1de?s=128&d=identicon&r=PG&f=1","display_name":"MrBackend","link":"https://stackoverflow.com/users/2791256/mrbackend"},"reply_to_user":{"reputation":1127,"user_id":1684768,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3afd4bcec79eec82c803f3d9bd9bad9b?s=128&d=identicon&r=PG","display_name":"mrres1","link":"https://stackoverflow.com/users/1684768/mrres1"},"edited":false,"score":2,"creation_date":1426773186,"post_id":27608651,"comment_id":46515350,"content_license":"CC BY-SA 3.0","body":"@mrres1 Not entirely correct. You can define only one <i>public</i> top-level class/interface per file. Supporting several classes per file is a remnant from the first Java version, which didn&#39;t have nested classes, but it is still supported, though often frowned upon."}],"owner":{"reputation":75,"user_id":1695011,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f0f943c7f0c3f7066550f55c3e8d3ff6?s=128&d=identicon&r=PG","display_name":"Ramprasad","link":"https://stackoverflow.com/users/1695011/ramprasad"},"comment_count":2,"is_accepted":false,"community_owned_date":1419274099,"score":8,"last_activity_date":1419274099,"creation_date":1419274099,"answer_id":27608651,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p><strong>Simple program</strong></p>\n\n<pre><code>import java.io.*;\nclass Aclass\n{\n    public int a;\n}\npublic class test\n{\n    public static void foo_obj(Aclass obj)\n    {\n        obj.a=5;\n    }\n    public static void foo_int(int a)\n    {\n        a=3;\n    }\n    public static void main(String args[])\n    {\n        //test passing an object\n        Aclass ob = new Aclass();\n        ob.a=0;\n        foo_obj(ob);\n        System.out.println(ob.a);//prints 5\n\n        //test passing an integer\n        int i=0;\n        foo_int(i);\n        System.out.println(i);//prints 0\n    }\n}\n</code></pre>\n\n<p>From a C/C++ programmer's point of view, java uses pass by value, so for primitive data types (int, char etc) changes in the function does not reflect in the calling function. But when you pass an object and in the function you change its data members or call member functions which can change the state of the object, the calling function will get the changes.</p>\n"},{"comments":[{"owner":{"reputation":424,"user_id":3380611,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/qTs5i.png?s=128&g=1","display_name":"Mox","link":"https://stackoverflow.com/users/3380611/mox"},"edited":false,"score":0,"creation_date":1484739511,"post_id":28750315,"comment_id":70631379,"content_license":"CC BY-SA 3.0","body":"This actually doesn&#39;t explain anything in regards to potential by ref/by val property of Java."}],"owner":{"reputation":447,"user_id":1282030,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4e29605d797ea99b5e4ab2a460d4a14b?s=128&d=identicon&r=PG","display_name":"Jo&#227;o Oliveira","link":"https://stackoverflow.com/users/1282030/jo%c3%a3o-oliveira"},"comment_count":1,"is_accepted":false,"community_owned_date":1424976272,"score":5,"last_activity_date":1424976272,"creation_date":1424976272,"answer_id":28750315,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java passes everything by value!!</p>\n\n<p>//create an object by passing in a name and age:</p>\n\n<pre><code>PersonClass variable1 = new PersonClass(\"Mary\", 32);\n\nPersonClass variable2;\n</code></pre>\n\n<p>//Both variable2 and variable1 now reference the same object</p>\n\n<pre><code>variable2 = variable1; \n\n\nPersonClass variable3 = new PersonClass(\"Andre\", 45);\n</code></pre>\n\n<p>// variable1 now points to variable3</p>\n\n<pre><code>variable1 = variable3;\n</code></pre>\n\n<p>//WHAT IS OUTPUT BY THIS?</p>\n\n<pre><code>System.out.println(variable2);\nSystem.out.println(variable1);\n\nMary 32\nAndre 45\n</code></pre>\n\n<p>if you could understand this example we r done.\notherwise, please visit this webPage for detailed explanation:</p>\n\n<p><a href=\"http://www.programmerinterview.com/index.php/java-questions/does-java-pass-by-reference-or-by-value/\" rel=\"noreferrer\">webPage</a></p>\n"},{"owner":{"reputation":6244,"user_id":112670,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/zzLom.jpg?s=128&g=1","display_name":"Christian","link":"https://stackoverflow.com/users/112670/christian"},"comment_count":0,"is_accepted":false,"community_owned_date":1426714508,"score":25,"last_activity_date":1486839149,"last_edit_date":1486839149,"creation_date":1426714508,"answer_id":29133165,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java passes parameters by VALUE, and by value <strong>ONLY</strong>.</p>\n\n<p><strong>To cut long story short:</strong></p>\n\n<blockquote>\n  <p>For those coming from C#: <strong>THERE IS NO \"out\" parameter.</strong></p>\n  \n  <p>For those coming from PASCAL: <strong>THERE IS NO \"var\" parameter</strong>.</p>\n</blockquote>\n\n<p>It means you can't change the reference from the object itself, but you can always change the object's properties.</p>\n\n<p>A workaround is to use <code>StringBuilder</code> parameter instead <code>String</code>. And you can always use arrays!</p>\n"},{"owner":{"reputation":10060,"user_id":3250087,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/67b956d69ff2169289c6d1a2d7d36531?s=128&d=identicon&r=PG&f=1","display_name":"spiderman","link":"https://stackoverflow.com/users/3250087/spiderman"},"comment_count":0,"is_accepted":false,"community_owned_date":1431465847,"score":53,"last_activity_date":1431466202,"last_edit_date":1431466202,"creation_date":1431465847,"answer_id":30201678,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Let me try to explain my understanding with the help of four examples. Java is pass-by-value, and not pass-by-reference</p>\n\n<p>/**</p>\n\n<p>Pass By Value</p>\n\n<p>In Java, all parameters are passed by value, i.e. assigning a method argument is not visible to the caller.</p>\n\n<p>*/</p>\n\n<p><strong>Example 1:</strong></p>\n\n<pre><code>public class PassByValueString {\n    public static void main(String[] args) {\n        new PassByValueString().caller();\n    }\n\n    public void caller() {\n        String value = \"Nikhil\";\n        boolean valueflag = false;\n        String output = method(value, valueflag);\n        /*\n         * 'output' is insignificant in this example. we are more interested in\n         * 'value' and 'valueflag'\n         */\n        System.out.println(\"output : \" + output);\n        System.out.println(\"value : \" + value);\n        System.out.println(\"valueflag : \" + valueflag);\n\n    }\n\n    public String method(String value, boolean valueflag) {\n        value = \"Anand\";\n        valueflag = true;\n        return \"output\";\n    }\n}\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>output : output\nvalue : Nikhil\nvalueflag : false\n</code></pre>\n\n<p><strong>Example 2:</strong></p>\n\n<p>/**\n * \n * Pass By Value\n *\n */</p>\n\n<pre><code>public class PassByValueNewString {\n    public static void main(String[] args) {\n        new PassByValueNewString().caller();\n    }\n\n    public void caller() {\n        String value = new String(\"Nikhil\");\n        boolean valueflag = false;\n        String output = method(value, valueflag);\n        /*\n         * 'output' is insignificant in this example. we are more interested in\n         * 'value' and 'valueflag'\n         */\n        System.out.println(\"output : \" + output);\n        System.out.println(\"value : \" + value);\n        System.out.println(\"valueflag : \" + valueflag);\n\n    }\n\n    public String method(String value, boolean valueflag) {\n        value = \"Anand\";\n        valueflag = true;\n        return \"output\";\n    }\n}\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>output : output\nvalue : Nikhil\nvalueflag : false\n</code></pre>\n\n<p><strong>Example 3:</strong></p>\n\n<p>/**\n  This 'Pass By Value has a feeling of 'Pass By Reference'</p>\n\n<p>Some people say primitive types and 'String' are 'pass by value'\n  and objects are 'pass by reference'.</p>\n\n<p>But from this example, we can understand that it is infact pass by value only,\n  keeping in mind that here we are passing the reference as the value.\n  ie: reference is passed by value.\n  That's why are able to change and still it holds true after the local scope.\n  But we cannot change the actual reference outside the original scope.\n  what that means is demonstrated by next example of PassByValueObjectCase2.</p>\n\n<p>*/</p>\n\n<pre><code>public class PassByValueObjectCase1 {\n\n    private class Student {\n        int id;\n        String name;\n        public Student() {\n        }\n        public Student(int id, String name) {\n            super();\n            this.id = id;\n            this.name = name;\n        }\n        public int getId() {\n            return id;\n        }\n        public void setId(int id) {\n            this.id = id;\n        }\n        public String getName() {\n            return name;\n        }\n        public void setName(String name) {\n            this.name = name;\n        }\n        @Override\n        public String toString() {\n            return \"Student [id=\" + id + \", name=\" + name + \"]\";\n        }\n    }\n\n    public static void main(String[] args) {\n        new PassByValueObjectCase1().caller();\n    }\n\n    public void caller() {\n        Student student = new Student(10, \"Nikhil\");\n        String output = method(student);\n        /*\n         * 'output' is insignificant in this example. we are more interested in\n         * 'student'\n         */\n        System.out.println(\"output : \" + output);\n        System.out.println(\"student : \" + student);\n    }\n\n    public String method(Student student) {\n        student.setName(\"Anand\");\n        return \"output\";\n    }\n}\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>output : output\nstudent : Student [id=10, name=Anand]\n</code></pre>\n\n<p><strong>Example 4:</strong></p>\n\n<p>/**</p>\n\n<p>In addition to what was mentioned in Example3 (PassByValueObjectCase1.java),  we cannot change the actual reference outside the original scope.\"</p>\n\n<p>Note: I am not pasting the code for <code>private class Student</code>. The class definition for <code>Student</code> is same as Example3.</p>\n\n<p>*/</p>\n\n<pre><code>public class PassByValueObjectCase2 {\n\n    public static void main(String[] args) {\n        new PassByValueObjectCase2().caller();\n    }\n\n    public void caller() {\n        // student has the actual reference to a Student object created\n        // can we change this actual reference outside the local scope? Let's see\n        Student student = new Student(10, \"Nikhil\");\n        String output = method(student);\n        /*\n         * 'output' is insignificant in this example. we are more interested in\n         * 'student'\n         */\n        System.out.println(\"output : \" + output);\n        System.out.println(\"student : \" + student); // Will it print Nikhil or Anand?\n    }\n\n    public String method(Student student) {\n        student = new Student(20, \"Anand\");\n        return \"output\";\n    }\n\n}\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>output : output\nstudent : Student [id=10, name=Nikhil]\n</code></pre>\n"},{"owner":{"reputation":343,"user_id":4957499,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/n2458.jpg?s=128&g=1","display_name":"Placinta Alexandru","link":"https://stackoverflow.com/users/4957499/placinta-alexandru"},"comment_count":0,"is_accepted":false,"community_owned_date":1453379915,"score":17,"last_activity_date":1453379915,"creation_date":1453379915,"answer_id":34924074,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java always uses <strong>call by value</strong>. That means the method gets copy of all parameter values.</p>\n\n<p>Consider next 3 situations:</p>\n\n<h2>1) Trying to change primitive variable</h2>\n\n<pre><code>public static void increment(int x) { x++; }\n\nint a = 3;\nincrement(a);\n</code></pre>\n\n<p>x will copy value of a and will increment x, a remains the same</p>\n\n<h2>2) Trying to change primitive field of an object</h2>\n\n<pre><code>public static void increment(Person p) { p.age++; }\n\nPerson pers = new Person(20); // age = 20\nincrement(pers);\n</code></pre>\n\n<p>p will copy reference value of pers and will increment age field, variables are referencing to the same object so age is changed</p>\n\n<h2>3) Trying to change reference value of reference variables</h2>\n\n<pre><code>public static void swap(Person p1, Person p2) {\n    Person temp = p1;\n    p1 = p2;\n    p2 = temp;\n}\n\nPerson pers1 = new Person(10);\nPerson pers2 = new Person(20);\nswap(pers1, pers2);\n</code></pre>\n\n<p>after calling swap p1, p2 copy reference values from pers1 and pers2, are swapping with values, so pers1 and pers2 remain the same</p>\n\n<p>So. you can change only fields of objects in method passing copy of reference value to this object.</p>\n"},{"owner":{"reputation":1744,"user_id":5903395,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sIL9v.jpg?s=128&g=1","display_name":"Gee Bee","link":"https://stackoverflow.com/users/5903395/gee-bee"},"comment_count":0,"is_accepted":false,"community_owned_date":1458142169,"score":17,"last_activity_date":1458142169,"creation_date":1458142169,"answer_id":36040135,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>So many long answers. Let me give a simple one:</p>\n\n<ul>\n<li>Java always passes everything by value</li>\n<li>that means also references are passed by value</li>\n</ul>\n\n<p>In short, you can not modify value of any parameter passed, but you can call methods or change attributes of an object reference passed.</p>\n"},{"owner":{"reputation":1122,"user_id":2164304,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/n6m6j.jpg?s=128&g=1","display_name":"OverCoder","link":"https://stackoverflow.com/users/2164304/overcoder"},"comment_count":0,"is_accepted":false,"community_owned_date":1461594748,"score":10,"last_activity_date":1548452717,"last_edit_date":1548452717,"creation_date":1461594748,"answer_id":36843568,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>I made this little diagram that shows how the data gets created and passed</p>\n\n<p><a href=\"https://i.stack.imgur.com/77ppY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/77ppY.png\" alt=\"Diagram of how data is created and passed\"></a></p>\n\n<p>Note: Primitive values are passed as a value, the first reference to to that value is the method's argument</p>\n\n<p>That means:</p>\n\n<ul>\n<li>You can change the value of <code>myObject</code> <em>inside</em> the function</li>\n<li>But you can't change what <code>myObject</code> references to, inside the function, because <code>point</code> is not <code>myObject</code></li>\n<li>Remember, both <code>point</code> and <code>myObject</code> are <strong>references</strong>, different <strong>references</strong>, however, those references <strong>point</strong> at the same <code>new Point(0,0)</code></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":2,"creation_date":1465272308,"post_id":37190132,"comment_id":62818445,"content_license":"CC BY-SA 3.0","body":"Java has not redefined those terms. Nobody has. It has merely avoided the C term &#39;pointer&#39;."},{"owner":{"reputation":346,"user_id":658018,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/81ea98333954e3e8d764a3fdb3353703?s=128&d=identicon&r=PG","display_name":"Cdaragorn","link":"https://stackoverflow.com/users/658018/cdaragorn"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":7,"creation_date":1472677500,"post_id":37190132,"comment_id":65853962,"content_license":"CC BY-SA 3.0","body":"Those terms existed long before Java or C. Pointer was only ever a method for implementing one of them. If you accept Java&#39;s definition for them, then they become meaningless because by that definition, every language ever created is only Pass by Value."}],"owner":{"reputation":346,"user_id":658018,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/81ea98333954e3e8d764a3fdb3353703?s=128&d=identicon&r=PG","display_name":"Cdaragorn","link":"https://stackoverflow.com/users/658018/cdaragorn"},"comment_count":2,"is_accepted":false,"community_owned_date":1463063785,"score":8,"last_activity_date":1463063785,"creation_date":1463063785,"answer_id":37190132,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>A lot of the confusion surrounding this issue comes from the fact that Java has attempted to redefine what \"Pass by value\" and \"Pass by reference\" mean. It's important to understand that these are <a href=\"https://en.wikipedia.org/wiki/Jargon\" rel=\"noreferrer\">Industry Terms</a>, and cannot be correctly understood outside of that context. They are meant to help you as you code and are valuable to understand, so let's first go over what they mean. </p>\n\n<p>A good description of both can be found <a href=\"http://cplus.about.com/od/glossar1/g/passbyrefdefn.htm\" rel=\"noreferrer\">here</a>.</p>\n\n<p><strong>Pass By Value</strong> The value the function received is a copy of the object the caller is using. It is entirely unique to the function and anything you do to that object will only be seen within the function.</p>\n\n<p><strong>Pass By Reference</strong> The value the function received is a reference to the object the caller is using. Anything the function does to the object that value refers to will be seen by the caller and it will be working with those changes from that point on.</p>\n\n<p>As is clear from those definitions, the fact that the reference is passed by value is irrelevant. If we were to accept that definition, then these terms become meaningless and all languages everywhere are only Pass By Value.</p>\n\n<p>No matter how you pass the reference in, it can only ever be passed by value. That isn't the point. The point is that you passed a reference to your own object to the function, not a copy of it. The fact that you can throw away the reference you received is irrelevant. Again, if we accepted that definition, these terms become meaningless and everyone is always passing by value.</p>\n\n<p>And no, C++'s special \"pass by reference\" syntax is not the exclusive definition of pass by reference. It is purely a convenience syntax meant to make it so that you don't need to use pointer syntax after passing the pointer in. It is still passing a pointer, the compiler is just hiding that fact from you. It also still passes that pointer BY VALUE, the compiler is just hiding that from you.</p>\n\n<p>So, with this understanding, we can look at Java and see that it actually has both. All Java primitive types are always pass by value because you receive a copy of the caller's object and cannot modify their copy. All Java reference types are always pass by reference because you receive a reference to the caller's object and can directly modify their object. </p>\n\n<p>The fact that you cannot modify the caller's reference has nothing to do with pass by reference and is true in every language that supports pass by reference.</p>\n"},{"comments":[{"owner":{"reputation":8358,"user_id":2067492,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG","display_name":"matt","link":"https://stackoverflow.com/users/2067492/matt"},"edited":false,"score":0,"creation_date":1465978440,"post_id":37669835,"comment_id":63121427,"content_license":"CC BY-SA 3.0","body":"Is there an issue in your c++ version where your risking a segfault when <code>Foo(99)</code> goes out of scope but you reference it in your main method?"},{"owner":{"reputation":447,"user_id":1195605,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c0c6dd89063aab67029880f16afb019?s=128&d=identicon&r=PG","display_name":"Ravi Sanwal","link":"https://stackoverflow.com/users/1195605/ravi-sanwal"},"reply_to_user":{"reputation":8358,"user_id":2067492,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG","display_name":"matt","link":"https://stackoverflow.com/users/2067492/matt"},"edited":false,"score":0,"creation_date":1466090219,"post_id":37669835,"comment_id":63183509,"content_license":"CC BY-SA 3.0","body":"Indeed. Ah comes from using java for 10 years. But the idea still holds. And I fixed it now."},{"owner":{"reputation":8358,"user_id":2067492,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG","display_name":"matt","link":"https://stackoverflow.com/users/2067492/matt"},"edited":false,"score":0,"creation_date":1466098885,"post_id":37669835,"comment_id":63188845,"content_license":"CC BY-SA 3.0","body":"I think the previous was better because it would compile. I was just curious about the behavior, sorry about that."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":1,"creation_date":1501688464,"post_id":37669835,"comment_id":77891412,"content_license":"CC BY-SA 3.0","body":"This answer only helps for those coming from C++ background who are willing to define &quot;reference&quot; the way you have, according to C++&#39;s definition. That is not always the case."}],"owner":{"reputation":447,"user_id":1195605,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c0c6dd89063aab67029880f16afb019?s=128&d=identicon&r=PG","display_name":"Ravi Sanwal","link":"https://stackoverflow.com/users/1195605/ravi-sanwal"},"comment_count":4,"is_accepted":false,"community_owned_date":1465268477,"score":8,"last_activity_date":1466519436,"last_edit_date":1466519436,"creation_date":1465268477,"answer_id":37669835,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>There is a very simple way to understand this.\nLets's take C++ pass by reference.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Foo {\n    private:\n        int x;\n    public:\n        Foo(int val) {x = val;}\n        void foo()\n        {\n            cout&lt;&lt;x&lt;&lt;endl;\n        }\n};\n\nvoid bar(Foo&amp; ref)\n{\n    ref.foo();\n    ref = *(new Foo(99));\n    ref.foo();\n}\n\nint main()\n{\n   Foo f = Foo(1);\n   f.foo();\n   bar(f);\n   f.foo();\n\n   return 0;\n}\n</code></pre>\n\n<p>What is the outcome?</p>\n\n<pre>\n1\n1\n99\n99\n</pre>\n\n<p>So, after bar() assigned a new value to a \"reference\" passed in, it actually changed the one which was passed in from main itself, explaining the last f.foo() call from main printing 99.</p>\n\n<p>Now, lets see what java says.</p>\n\n<pre><code>public class Ref {\n\n    private static class Foo {\n        private int x;\n\n        private Foo(int x) {\n            this.x = x;\n        }\n\n        private void foo() {\n            System.out.println(x);\n        }\n    }\n\n    private static void bar(Foo f) {\n        f.foo();\n        f = new Foo(99);\n        f.foo();\n    }\n\n    public static void main(String[] args) {\n        Foo f = new Foo(1);\n        System.out.println(f.x);\n        bar(f);\n        System.out.println(f.x);\n    }\n\n}\n</code></pre>\n\n<p>It says:</p>\n\n<pre>\n1\n1\n99\n1\n</pre>\n\n<p>VoilÃ , the reference of Foo in main that was passed to bar, is still unchanged!</p>\n\n<p>This example clearly shows that java is not the same as C++ when we say \"pass by reference\". Essentially, java is passing \"references\" as \"values\" to functions, meaning java is pass by value.</p>\n"},{"owner":{"reputation":2328,"user_id":1767316,"user_type":"registered","accept_rate":42,"profile_image":"https://www.gravatar.com/avatar/96c6ce7849238a742734b338dda77a98?s=128&d=identicon&r=PG","display_name":"user1767316","link":"https://stackoverflow.com/users/1767316/user1767316"},"comment_count":0,"is_accepted":false,"community_owned_date":1469348999,"score":47,"last_activity_date":1579722850,"last_edit_date":1579722850,"creation_date":1469348999,"answer_id":38550131,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p><strong>In Java only references are passed and are passed by value:</strong></p>\n\n<p>Java arguments are <strong>all passed by value</strong> (the reference is copied when used by the method) :</p>\n\n<p>In the case of primitive types, Java behaviour is simple: \nThe value is copied in another instance of the primitive type.</p>\n\n<p>In case of Objects, this is the same: \nObject variables are pointers (buckets) holding only Objectâs <strong>address</strong> that was created using the \"new\" keyword, and are copied like primitive types.</p>\n\n<p>The behaviour can appear different from primitive types: Because the copied object-variable contains the same address (to the same Object).\nObject's <strong>content/members</strong> might still be modified within a method and later access outside, giving the illusion that the (containing) Object itself was passed by reference. </p>\n\n<p>\"String\" Objects appear to be a good <strong>counter-example</strong> to the urban legend saying that \"Objects are passed by reference\":</p>\n\n<p>In effect, using a method, you will never be able, to update the value of a String passed as argument:</p>\n\n<p>A String Object, holds characters by an array declared <strong>final</strong> that can't be modified.\nOnly the address of the Object might be replaced by another using \"new\". \nUsing \"new\" to update the variable, will not let the Object be accessed from outside, since the variable was initially passed by value and copied.</p>\n"},{"owner":{"reputation":182,"user_id":5128145,"user_type":"registered","accept_rate":0,"profile_image":"https://graph.facebook.com/996648693713404/picture?type=large","display_name":"Vivek Kumar","link":"https://stackoverflow.com/users/5128145/vivek-kumar"},"comment_count":0,"is_accepted":false,"community_owned_date":1474912519,"score":6,"last_activity_date":1474912830,"last_edit_date":1474912830,"creation_date":1474912519,"answer_id":39709353,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java does manipulate objects by reference, and all object variables are references. However, Java doesn't pass method arguments by reference; it passes them by value.</p>\n\n<p>Take theÂ badSwap()Â method for example:</p>\n\n<pre><code>    public void badSwap(int var1, int\n var2{ int temp = var1; var1 = var2; var2 =\n temp; }\n</code></pre>\n\n<p>WhenÂ badSwap()Â returns, the variables passed as arguments will still hold their original values. The method will also fail if we change the arguments type fromÂ intÂ toÂ Object, since Java passes object references by value as well. Now, here is where it gets tricky:</p>\n\n<pre><code>public void tricky(Point arg1, Point   arg2)\n{ arg1.x = 100; arg1.y = 100; Point temp = arg1; arg1 = arg2; arg2 = temp; }\npublic static void main(String [] args) { \n\n Point pnt1 = new Point(0,0); Point pnt2\n = new Point(0,0); System.out.println(\"X:\n \" + pnt1.x + \" Y: \" +pnt1.y);\n\n     System.out.println(\"X: \" + pnt2.x + \" Y:\n \" +pnt2.y); System.out.println(\" \");\n\n     tricky(pnt1,pnt2);\n System.out.println(\"X: \" + pnt1.x + \" Y:\" + pnt1.y);\n\n     System.out.println(\"X: \" + pnt2.x + \" Y: \" +pnt2.y); }\n</code></pre>\n\n<p>If we execute thisÂ main()Â method, we see the following output:</p>\n\n<p>X: 0 Y: 0 X: 0 Y: 0 X: 100 Y: 100 X: 0 Y: 0</p>\n\n<p>The method successfully alters the value ofpnt1, even though it is passed by value; however, a swap ofÂ pnt1Â andÂ pnt2Â fails! This is the major source of confusion. In themain()Â method,Â pnt1Â andÂ pnt2Â are nothing more than object references. When you passpnt1Â andÂ pnt2Â to theÂ tricky()Â method, Java passes the references by value just like any other parameter. This means the references passed to the method are actuallyÂ copiesÂ of the original references. Figure 1 below shows two references pointing to the same object after Java passes an object to a method.</p>\n\n<p>Java copies and passes theÂ referenceÂ by value, not the object. Thus, method manipulation will alter the objects, since the references point to the original objects. But since the references are copies, swaps will fail. As Figure 2 illustrates, the method references swap, but not the original references. Unfortunately, after a method call, you are left with only the unswapped original references. For a swap to succeed outside of the method call, we need to swap the original references, not the copies.</p>\n"},{"comments":[{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1501687539,"post_id":39767073,"comment_id":77890692,"content_license":"CC BY-SA 3.0","body":"You might want to clarify your last sentence. My first reaction to &quot;passing the values only and not pointers...&quot; is that your Java implementation probably does <i>exactly that</i>, passes a pointer. The fact that you cannot dereference that pointer seems irrelevant."}],"owner":{"reputation":5480,"user_id":5797598,"user_type":"registered","accept_rate":14,"profile_image":"https://www.gravatar.com/avatar/b446fe87f0452dd308732aa765933981?s=128&d=identicon&r=PG&f=1","display_name":"khakishoiab","link":"https://stackoverflow.com/users/5797598/khakishoiab"},"comment_count":1,"is_accepted":false,"community_owned_date":1475142824,"score":11,"last_activity_date":1475142824,"creation_date":1475142824,"answer_id":39767073,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>A simple test to check whether a language supports pass-by-reference is simply writing a traditional swap.\nCan you write a traditional swap(a,b) method/function in Java?</p>\n\n<p>A traditional swap method or function takes two arguments and swaps them such that variables passed into the function are changed outside the function. Its basic structure looks like</p>\n\n<p>(Non-Java) Basic swap function structure</p>\n\n<pre><code>swap(Type arg1, Type arg2) {\n    Type temp = arg1;\n    arg1 = arg2;\n    arg2 = temp;\n}\n</code></pre>\n\n<p>If you can write such a method/function in your language such that calling</p>\n\n<pre><code>Type var1 = ...;\nType var2 = ...;\nswap(var1,var2);\n</code></pre>\n\n<p>actually switches the values of the variables var1 and var2, the language supports pass-by-reference.\nBut <strong>Java does not allow such a thing</strong> as it supports passing the values only and not pointers or references.</p>\n"},{"owner":{"reputation":12865,"user_id":4990642,"user_type":"registered","accept_rate":53,"profile_image":"https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1","display_name":"snr","link":"https://stackoverflow.com/users/4990642/snr"},"comment_count":0,"is_accepted":false,"community_owned_date":1479142308,"score":14,"last_activity_date":1479142308,"creation_date":1479142308,"answer_id":40593867,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>The major cornerstone knowledge must be the quoted one,</p>\n\n<blockquote>\n  <p>When an object reference is passed to a method, the reference itself\n  is passed by use of <em>call-by-value</em>. However, since the value being\n  passed refers to an object, the copy of that value will still refer to\n  the same object referred to by its corresponding argument.</p>\n</blockquote>\n\n<p>Java: A Beginner's Guide, Sixth Edition, Herbert Schildt</p>\n"},{"owner":{"reputation":29,"user_id":7051714,"user_type":"registered","accept_rate":80,"profile_image":"https://lh4.googleusercontent.com/-vZe0zTb8eFY/AAAAAAAAAAI/AAAAAAAAAQg/B1JSBnMmGI0/photo.jpg?sz=128","display_name":"Taleev Aalam","link":"https://stackoverflow.com/users/7051714/taleev-aalam"},"comment_count":0,"is_accepted":false,"community_owned_date":1479297521,"score":5,"last_activity_date":1479297521,"last_edit_date":1592644375,"creation_date":1479297521,"answer_id":40631632,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>It seems everything is call by value in java as i have tried to understand by the following program</p>\n<p><strong>Class-S</strong></p>\n<pre><code>class S{\nString name=&quot;alam&quot;;\npublic void setName(String n){\nthis.name=n; \n}}\n</code></pre>\n<p><strong>Class-Sample</strong></p>\n<pre><code>    public class Sample{\n    public static void main(String args[]){\n    S s=new S();\n    S t=new S();\n    System.out.println(s.name);\n    System.out.println(t.name);\n    t.setName(&quot;taleev&quot;);\n    System.out.println(t.name);\n    System.out.println(s.name);\n    s.setName(&quot;Harry&quot;);\n    System.out.println(t.name);\n    System.out.println(s.name);\n    }}\n</code></pre>\n<p><strong>Output</strong></p>\n<blockquote>\n<p>alam</p>\n<p>alam</p>\n<p>taleev</p>\n<p>alam</p>\n<p>taleev</p>\n<p>harry</p>\n</blockquote>\n<p>As we have define class S with instance variable name with value <strong>taleev</strong> so for\nall the objects that we initialize from it will have the name variable with value of <strong>taleev</strong> but if we change the name's value of any objects then it is changing the name of only that copy of the class(Object) not for every class so after that also when we do <strong>System.out.println(s.name)</strong> it is printing <strong>taleev</strong> only we can not change the name's value that we have defined originally, and the value that we are changing is the object's value not the instance variable value so once we have define instance variable we are unable to change it</p>\n<p>So i think that is how it shows that java deals with <strong>values</strong> only not with the <strong>references</strong></p>\n<p>The memory allocation for the primitive variables can be understood by  <a href=\"http://www.informit.com/articles/article.aspx?p=31755&amp;seqNum=8\" rel=\"nofollow noreferrer\">this</a></p>\n"},{"owner":{"reputation":2293,"user_id":4958222,"user_type":"registered","accept_rate":75,"profile_image":"https://lh5.googleusercontent.com/-v1CfGQDxAMc/AAAAAAAAAAI/AAAAAAAABcE/K0ROeGDUG2w/photo.jpg?sz=128","display_name":"Rahul Kumar","link":"https://stackoverflow.com/users/4958222/rahul-kumar"},"comment_count":0,"is_accepted":false,"community_owned_date":1483086780,"score":17,"last_activity_date":1483979709,"last_edit_date":1483979709,"creation_date":1483086780,"answer_id":41393112,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java, for sure, without a doubt, is \"pass by value\". Also, since Java is (mostly) object-oriented and objects work with references, it's easy to get confused and think of it to be \"pass by reference\"</p>\n\n<p>Pass by value means you pass the value to the method and if the method changes the passed value, the real entity doesn't change. Pass by reference, on the other hand, means a reference is passed to the method, and if the method changes it, the passed object also changes.</p>\n\n<p>In Java, usually when we pass an object to a method, we basically pass the reference of the object as-a-value because that's how Java works; it works with references and addresses as far as Object in the heap goes.</p>\n\n<p>But to test if it is really pass by value or pass by reference, you can use a primitive type and references:</p>\n\n<pre><code>@Test\npublic void sampleTest(){\n    int i = 5;\n    incrementBy100(i);\n    System.out.println(\"passed ==&gt; \"+ i);\n    Integer j = new Integer(5);\n    incrementBy100(j);\n    System.out.println(\"passed ==&gt; \"+ j);\n}\n/**\n * @param i\n */\nprivate void incrementBy100(int i) {\n    i += 100;\n    System.out.println(\"incremented = \"+ i);\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>incremented = 105\npassed ==&gt; 5\nincremented = 105\npassed ==&gt; 5\n</code></pre>\n\n<p>So in both cases, whatever happens inside the method doesn't change the real Object, because the value of that object was passed, and not a reference to the object itself.</p>\n\n<p>But when you pass a custom object to a method, and the method and changes it, it will change the real object too, because even when you passed the object, you passed it's reference as a value to the method. Let's try another example:</p>\n\n<pre><code>@Test\npublic void sampleTest2(){\n    Person person = new Person(24, \"John\");\n    System.out.println(person);\n    alterPerson(person);\n    System.out.println(person);\n}\n\n/**\n * @param person\n */\nprivate void alterPerson(Person person) {\n    person.setAge(45);\n    Person altered = person;\n    altered.setName(\"Tom\");\n}\n\nprivate static class Person{\n    private int age;\n    private String name; \n\n    public Person(int age, String name) {\n        this.age=age;\n        this.name =name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder builder = new StringBuilder();\n        builder.append(\"Person [age=\");\n        builder.append(age);\n        builder.append(\", name=\");\n        builder.append(name);\n        builder.append(\"]\");\n        return builder.toString();\n    }\n\n}\n</code></pre>\n\n<p>In this case, the output is:</p>\n\n<pre><code>Person [age=24, name=John]\nPerson [age=45, name=Tom]\n</code></pre>\n"},{"owner":{"reputation":806,"user_id":1952852,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8dfa92044d56ff2a1fe5df317fd19790?s=128&d=identicon&r=PG","display_name":"Raja","link":"https://stackoverflow.com/users/1952852/raja"},"comment_count":0,"is_accepted":false,"community_owned_date":1485546707,"score":7,"last_activity_date":1485547813,"last_edit_date":1485547813,"creation_date":1485546707,"answer_id":41901960,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>I tried to simplify the examples above, keeping only the essense of the problem.\nLet me present this as a story that is easy to remember and apply correctly.\nThe story goes like this:\nYou have a pet dog, Jimmy, whose tail is 12 inches long.\nYou leave it with a vet for a few weeks while you are travelling abroad.</p>\n\n<p>The vet doesn't like the long tail of Jimmy, so he wants to cut it by half.\nBut being a good vet, he knows that he has no right to mutilate other people's dogs.\nSo he first makes a clone of the dog (with the <em>new</em> key word) and cuts the tail of the clone.\nWhen the dog finally returns to you, it has the original 12 inch tail in tact. Happy ending !</p>\n\n<p>The next time you travel, you take the dog, unwittingly, to a wicked vet. \nHe is also a hater of long tails, so he cuts it down to a miserable 2 inches. \nBut he does this to your dear Jimmy, not a clone of it.\nWhen you return, you are shocked to see Jimmy pathetically wagging a 2 inch stub.</p>\n\n<p>Moral of the story: When you pass on your pet, you are giving away whole and unfettered\ncustody of the pet to the vet. He is free to play any kind of havoc with it.\nPassing by <em>value</em>, by <em>reference</em>, by <em>pointer</em> are all just technical wrangling. \nUnless the vet clones it first, he ends up mutilating the original dog.</p>\n\n<pre><code>public class Doggie {\n\n    public static void main(String...args) {\n        System.out.println(\"At the owner's home:\");\n        Dog d = new Dog(12);\n        d.wag();\n        goodVet(d);\n        System.out.println(\"With the owner again:)\");\n        d.wag();\n        badVet(d);\n        System.out.println(\"With the owner again(:\");\n        d.wag();\n    }\n\n    public static void goodVet (Dog dog) {\n        System.out.println(\"At the good vet:\");\n        dog.wag();\n        dog = new Dog(12); // create a clone\n        dog.cutTail(6);    // cut the clone's tail\n        dog.wag();\n    }\n\n    public static void badVet (Dog dog) {\n        System.out.println(\"At the bad vet:\");\n        dog.wag();\n        dog.cutTail(2);   // cut the original dog's tail\n        dog.wag();\n    }    \n}\n\nclass Dog {\n\n    int tailLength;\n\n    public Dog(int originalLength) {\n        this.tailLength = originalLength;\n    }\n\n    public void cutTail (int newLength) {\n        this.tailLength = newLength;\n    }\n\n    public void wag()  {\n        System.out.println(\"Wagging my \" +tailLength +\" inch tail\");\n    }\n}\n\nOutput:\nAt the owner's home:\nWagging my 12 inch tail\nAt the good vet:\nWagging my 12 inch tail\nWagging my 6 inch tail\nWith the owner again:)\nWagging my 12 inch tail\nAt the bad vet:\nWagging my 12 inch tail\nWagging my 2 inch tail\nWith the owner again(:\nWagging my 2 inch tail\n</code></pre>\n"},{"owner":{"reputation":11543,"user_id":4251431,"user_type":"registered","accept_rate":80,"profile_image":"https://lh4.googleusercontent.com/-ovA4SCP-_wg/AAAAAAAAAAI/AAAAAAAAC-M/gGQW1h2xxPE/photo.jpg?sz=128","display_name":"Basheer AL-MOMANI","link":"https://stackoverflow.com/users/4251431/basheer-al-momani"},"comment_count":0,"is_accepted":false,"community_owned_date":1490866146,"score":12,"last_activity_date":1560542336,"last_edit_date":1560542336,"creation_date":1490866146,"answer_id":43113746,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Unlike some other languages, Java does not allow you to choose between pass-by-value and pass-by-reference.</p>\n\n<p>All arguments are passed by value. </p>\n\n<p>A method call can pass two <code>types of values</code>to a method</p>\n\n<ul>\n<li>copies of primitive values (e.g., values of type int and double)</li>\n<li>copies of references to objects.</li>\n</ul>\n\n<p><code>Objects themselves cannot be passed to methods</code>. When a method modifies a primitive-type parameter, changes to the parameter have no effect on the original argument value in the calling method.</p>\n\n<p>This is also true for reference-type parameters. If you modify a reference-type parameter so that it refers to another object, only the parameter refers to the new objectâthe reference stored in the callerâs variable still refers to the original object.</p>\n\n<p>References: <a href=\"https://www.safaribooksonline.com/library/view/javatm-how-to/9780133813036/ch07lev2sec11.html\" rel=\"noreferrer\">Javaâ¢ How To Program (Early Objects), Tenth Edition</a> </p>\n"},{"owner":{"reputation":161,"user_id":3664592,"user_type":"registered","profile_image":"https://i.stack.imgur.com/I2gv7.jpg?s=128&g=1","display_name":"Himanshu arora","link":"https://stackoverflow.com/users/3664592/himanshu-arora"},"comment_count":0,"is_accepted":false,"community_owned_date":1491630689,"score":75,"last_activity_date":1611240103,"last_edit_date":1611240103,"creation_date":1491630689,"answer_id":43290680,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Java is a call by value</p>\n<p>How it works</p>\n<ul>\n<li><p>You always pass a copy of the bits of the value of the reference!</p>\n</li>\n<li><p>If it's a primitive data type these bits contain the value of the primitive data type itself, That's why if we change the value of header inside the method then it does not reflect the changes outside.</p>\n</li>\n<li><p>If it's an object data type like <strong>Foo foo=new Foo()</strong> then in this case copy of the address of the object passes like file shortcut  , suppose we have a text file <strong>abc.txt</strong> at <strong>C:\\desktop</strong> and suppose we make shortcut of the same file and put this inside <strong>C:\\desktop\\abc-shortcut</strong> so when you access the file from <strong>C:\\desktop\\abc.txt</strong> and write <strong>'Stack Overflow'</strong> and close the file and again you open the file from shortcut then you write <strong>' is the largest online community for programmers to learn'</strong> then total file change will be <strong>'Stack Overflow is the largest online community for programmers to learn'</strong> which means it doesn't matter from where you open the file , each time we were accessing the same file , here we can assume <strong>Foo</strong> as a file and suppose foo stored at <strong>123hd7h</strong>(original address like <strong>C:\\desktop\\abc.txt</strong> ) address and <strong>234jdid</strong>(copied address like <strong>C:\\desktop\\abc-shortcut</strong> which actually contains the original address of the file inside) ..\nSo for better understanding make shortcut file and feel.</p>\n</li>\n</ul>\n"},{"owner":{"reputation":1567,"user_id":4233180,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-FXCjt68DFoA/AAAAAAAAAAI/AAAAAAAAACs/hqpMFb_4--c/photo.jpg?sz=128","display_name":"Supriya","link":"https://stackoverflow.com/users/4233180/supriya"},"comment_count":0,"is_accepted":false,"community_owned_date":1504464768,"score":9,"last_activity_date":1504464768,"creation_date":1504464768,"answer_id":46026822,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>Java is pass by value. </p>\n\n<p>There are already great answers on this thread. Somehow, I was never clear on pass by value/reference with respect to primitive data types and with respect to objects. Therefore, I tested it out for my satisfaction and clarity with the following piece of code; might help somebody seeking similar clarity:</p>\n\n<pre><code>class Test    {\n\npublic static void main (String[] args) throws java.lang.Exception\n{\n    // Primitive type\n    System.out.println(\"Primitve:\");\n    int a = 5;\n    primitiveFunc(a);\n    System.out.println(\"Three: \" + a);    //5\n\n    //Object\n    System.out.println(\"Object:\");\n    DummyObject dummyObject = new DummyObject();\n    System.out.println(\"One: \" + dummyObject.getObj());    //555\n    objectFunc(dummyObject);\n    System.out.println(\"Four: \" + dummyObject.getObj());    //666 (555 if line in method uncommented.)\n\n}\n\nprivate static void primitiveFunc(int b)    {\n    System.out.println(\"One: \" + b);    //5\n    b = 10;\n    System.out.println(\"Two:\" + b);    //10\n}\n\nprivate static void objectFunc(DummyObject b)   {\n    System.out.println(\"Two: \" + b.getObj());    //555\n    //b = new DummyObject();\n    b.setObj(666);\n    System.out.println(\"Three:\" + b.getObj());    //666\n}\n\n}\n\nclass DummyObject   {\n    private int obj = 555;\n    public int getObj() { return obj; }\n    public void setObj(int num) { obj = num; }\n}\n</code></pre>\n\n<p>If the line <code>b = new DummyObject()</code> is uncommented, the modifications made thereafter are made on a <em>new</em> object, a new instantiation. Hence, it is not reflected in the place where the method is called from. However, otherwise, the change is reflected as the modifications are only made on a \"reference\" of the object, i.e - b points to the same dummyObject. </p>\n\n<p>Illustrations in one of the answers in this thread (<a href=\"https://stackoverflow.com/a/12429953/4233180\">https://stackoverflow.com/a/12429953/4233180</a>) can help gain a deeper understanding.</p>\n"},{"owner":{"reputation":630,"user_id":7178104,"user_type":"registered","profile_image":"https://i.stack.imgur.com/j1OAJ.jpg?s=128&g=1","display_name":"Raj S. Rusia","link":"https://stackoverflow.com/users/7178104/raj-s-rusia"},"comment_count":0,"is_accepted":false,"community_owned_date":1504707202,"score":23,"last_activity_date":1514187301,"last_edit_date":1514187301,"creation_date":1504707202,"answer_id":46077533,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<p>One of the biggest confusion in Java programming language is whether Java is <strong>Pass by Value</strong> or <strong>Pass by Reference</strong>.</p>\n\n<p>First of all, we should understand what is meant by pass by value or pass by reference.</p>\n\n<p><strong>Pass by Value:</strong> The method parameter values are copied to another variable and then the copied object is passed, thatâs why itâs called pass by value.</p>\n\n<p><strong>Pass by Reference:</strong> An alias or reference to the actual parameter is passed to the method, thatâs why itâs called pass by reference.</p>\n\n<p>Letâs say we have a class Balloon like below.</p>\n\n<pre><code>public class Balloon {\n\n    private String color;\n\n    public Balloon(){}\n\n    public Balloon(String c){\n        this.color=c;\n    }\n\n    public String getColor() {\n        return color;\n    }\n\n    public void setColor(String color) {\n        this.color = color;\n    }\n}\n</code></pre>\n\n<p>And we have a simple program with a generic method to swap two objects, the class looks like below.</p>\n\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n\n        Balloon red = new Balloon(\"Red\"); //memory reference 50\n        Balloon blue = new Balloon(\"Blue\"); //memory reference 100\n\n        swap(red, blue);\n        System.out.println(\"red color=\"+red.getColor());\n        System.out.println(\"blue color=\"+blue.getColor());\n\n        foo(blue);\n        System.out.println(\"blue color=\"+blue.getColor());\n\n    }\n\n    private static void foo(Balloon balloon) { //baloon=100\n        balloon.setColor(\"Red\"); //baloon=100\n        balloon = new Balloon(\"Green\"); //baloon=200\n        balloon.setColor(\"Blue\"); //baloon = 200\n    }\n\n    //Generic swap method\n    public static void swap(Object o1, Object o2){\n        Object temp = o1;\n        o1=o2;\n        o2=temp;\n    }\n}\n</code></pre>\n\n<p>When we execute the above program, we get following output.</p>\n\n<pre><code>red color=Red\nblue color=Blue\nblue color=Red\n</code></pre>\n\n<p>If you look at the first two lines of the output, itâs clear that swap method didnât work. This is because Java is passed by value, this swap() method test can be used with any programming language to check whether itâs pass by value or pass by reference.</p>\n\n<p>Letâs analyze the program execution step by step.</p>\n\n<pre><code>Balloon red = new Balloon(\"Red\");\nBalloon blue = new Balloon(\"Blue\");\n</code></pre>\n\n<p>When we use the new operator to create an instance of a class, the instance is created and the variable contains the reference location of the memory where the object is saved. For our example, letâs assume that âredâ is pointing to 50 and âblueâ is pointing to 100 and these are the memory location of both Balloon objects.</p>\n\n<p>Now when we are calling swap() method, two new variables o1 and o2 are created pointing to 50 and 100 respectively.</p>\n\n<p>So below code snippet explains what happened in the swap() method execution.</p>\n\n<pre><code>public static void swap(Object o1, Object o2){ //o1=50, o2=100\n    Object temp = o1; //temp=50, o1=50, o2=100\n    o1=o2; //temp=50, o1=100, o2=100\n    o2=temp; //temp=50, o1=100, o2=50\n} //method terminated\n</code></pre>\n\n<p>Notice that we are changing values of o1 and o2 but they are copies of âredâ and âblueâ reference locations, so actually, there is no change in the values of âredâ and âblueâ and hence the output.</p>\n\n<p>If you have understood this far, you can easily understand the cause of confusion. Since the variables are just the reference to the objects, we get confused that we are passing the reference so Java is passed by reference. However, we are passing a copy of the reference and hence itâs pass by value. I hope it clears all the doubts now.</p>\n\n<p>Now letâs analyze <strong>foo()</strong> method execution.</p>\n\n<pre><code>private static void foo(Balloon balloon) { //baloon=100\n    balloon.setColor(\"Red\"); //baloon=100\n    balloon = new Balloon(\"Green\"); //baloon=200\n    balloon.setColor(\"Blue\"); //baloon = 200\n}\n</code></pre>\n\n<p>The first line is the important one when we call a method the method is called on the Object at the reference location. At this point, the balloon is pointing to 100 and hence itâs color is changed to Red.</p>\n\n<p>In the next line, balloon reference is changed to 200 and any further methods executed are happening on the object at memory location 200 and not having any effect on the object at memory location 100. This explains the third line of our program output printing blue color=Red.</p>\n\n<p>I hope above explanation clear all the doubts, just remember that variables are references or pointers and its copy is passed to the methods, so Java is always passed by value. It would be more clear when you will learn about Heap and Stack memory and where different objects and references are stored.</p>\n"},{"owner":{"reputation":15,"user_id":8808036,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JDdA8.jpg?s=128&g=1","display_name":"NAGHMAAN MOHASEEN","link":"https://stackoverflow.com/users/8808036/naghmaan-mohaseen"},"comment_count":0,"is_accepted":false,"community_owned_date":1508656124,"score":16,"last_activity_date":1511354300,"last_edit_date":1511354300,"creation_date":1508656124,"answer_id":46871427,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<h3>Java is strictly passed by value</h3>\n\n<p>When I say <strong><em>pass by value</em></strong> it means whenever caller has invoked the callee the arguments(ie: the data to be passed to the other function) <strong>is copied</strong> and placed in the formal parameters (callee's local variables for receiving the input). Java makes data communications from one function to other function only in a pass by value environment.</p>\n\n<p>An important point would be to know that even C language is strictly passed by value only:<br>\n<em>ie:</em> Data is copied from caller to the callee and more ever the operation performed by the callee are on the same memory location and \nwhat we pass them is the address of that location that we obtain from (&amp;) operator and the identifier used in the formal parameters are declared to be a pointer variable (*) using which we can get inside the memory location for accessing the data in it.</p>\n\n<p>Hence here the formal parameter is nothing but mere aliases for that location. And any modifications done on that location is visible where ever that scope of the variable (that identifies that location) is alive.</p>\n\n<p>In Java, there is no concept of pointers (<em>ie:</em> there is nothing called a pointer variable), although we can think of reference variable as a pointer technically in java we call it as a handle. The reason why we call the pointer to an address as a handle in java is  because a pointer variable is capable of performing not just single dereferencing but multiple dereferencing \nfor example: <code>int *p;</code> in P means p points to an integer\nand <code>int **p;</code> in C means p is pointer to a pointer to an integer\nwe dont have this facility in Java, so its absolutely correct and technically legitimate to say it as an handle, also there are rules for pointer arithmetic in C. Which allows performing arithmetic operation on pointers with constraints on it. </p>\n\n<p>In C we call such mechanism of passing address and receiving them with pointer variables as <em>pass by reference</em> since we are passing their addresses and receiving them as pointer variable in formal parameter but at the compiler level that address is copied into pointer variable (since data here is address even then its data ) hence we can be 100% sure that C is Strictly passed by value (as we are passing data only)</p>\n\n<p>(and if we pass the data directly in C we call that as pass by value.)</p>\n\n<p>In java when we do the same we do it with the handles; since they are not called pointer variables like in (as discussed above) even though we are passing the references we cannot say its pass by reference since we are not collecting that with a pointer variable in Java.</p>\n\n<p>Hence Java <strong>strictly use pass by value mechanism</strong> </p>\n"},{"owner":{"reputation":54199,"user_id":1697099,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/gerXo.png?s=128&g=1","display_name":"Premraj","link":"https://stackoverflow.com/users/1697099/premraj"},"comment_count":0,"is_accepted":false,"community_owned_date":1513419550,"score":10,"last_activity_date":1513419912,"last_edit_date":1513419912,"creation_date":1513419550,"answer_id":47844599,"question_id":40480,"content_license":"CC BY-SA 3.0","body":"<ul>\n<li><p><strong>passed by reference :</strong> caller and callee use same variable for parameter.  </p></li>\n<li><p><strong>passed by value :</strong> caller and callee have two independent variables with same value.  </p></li>\n<li>Java uses pass by value \n\n<ul>\n<li>When passing primitive data, it copies the value of primitive data type.</li>\n<li>When passing object, it copies the address of object and passes to callee method variable.</li>\n</ul></li>\n</ul>\n\n<p>Example using primitive data type: </p>\n\n<pre><code>public class PassByValuePrimitive {\n    public static void main(String[] args) {\n        int i=5;\n        System.out.println(i);  //prints 5\n        change(i);\n        System.out.println(i);  //prints 5\n    }\n\n\n    private static void change(int i) {\n        System.out.println(i);  //prints 5\n        i=10;\n        System.out.println(i); //prints 10\n\n    }\n}\n</code></pre>\n\n<p>Example using object:</p>\n\n<pre><code>public class PassByValueObject {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        list.add(\"prem\");\n        list.add(\"raj\");\n        new PassByValueObject().change(list);\n        System.out.println(list); // prints [prem, raj, ram]\n\n    }\n\n\n    private  void change(List list) {\n        System.out.println(list.get(0)); // prem\n        list.add(\"ram\");\n        list=null;\n        System.out.println(list.add(\"bheem\")); //gets NullPointerException\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2051,"user_id":1977836,"user_type":"registered","profile_image":"https://i.stack.imgur.com/34HNM.jpg?s=128&g=1","display_name":"Felypp Oliveira","link":"https://stackoverflow.com/users/1977836/felypp-oliveira"},"comment_count":0,"is_accepted":false,"community_owned_date":1517606636,"score":23,"last_activity_date":1544209359,"last_edit_date":1544209359,"creation_date":1517606636,"answer_id":48591063,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>This is the best way to answer the question imo...</p>\n\n<p>First, we must understand that, in Java, the <em>parameter passing behavior</em>...</p>\n\n<pre><code>public void foo(Object param)\n{\n  // some code in foo...\n}\n\npublic void bar()\n{\n  Object obj = new Object();\n\n  foo(obj);\n}\n</code></pre>\n\n<p>is exactly the same as...</p>\n\n<pre><code>public void bar()\n{\n  Object obj = new Object();\n\n  Object param = obj;\n\n  // some code in foo...\n}\n</code></pre>\n\n<p>not considering stack locations, which aren't relevant in this discussion.</p>\n\n<p>So, in fact, what we're looking for in Java is how <em>variable assignment</em> works. I found it in <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"noreferrer\">the docs</a> :</p>\n\n<blockquote>\n  <p>One of the most common operators that you'll encounter is the simple assignment operator \"=\" [...] <b>it assigns the value</b> on its right to the operand on its left:</p>\n  \n  <p>int cadence = 0;<br>\n   int speed = 0;<br>\n   int gear = 1;  </p>\n  \n  <p>This operator can also be used on objects to assign <b>object references</b> [...]</p>\n</blockquote>\n\n<p>It's clear how this operator acts in two distinct ways: assign values and assign references. The last, when it's an object... the first, when it isn't an object, that is, when it's a primitive. But so, can we understand that Java's function params can be <em>pass-by-value</em> and <em>pass-by-reference</em>? </p>\n\n<p>The truth is in the code. Let's try it:</p>\n\n<pre><code>public class AssignmentEvaluation\n{\n  static public class MyInteger\n  {\n    public int value = 0;\n  }\n\n  static public void main(String[] args)\n  {\n    System.out.println(\"Assignment operator evaluation using two MyInteger objects named height and width\\n\");\n\n    MyInteger height = new MyInteger();\n    MyInteger width  = new MyInteger();\n\n    System.out.println(\"[1] Assign distinct integers to height and width values\");\n\n    height.value = 9;\n    width.value  = 1;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", we are different things! \\n\");\n\n    System.out.println(\"[2] Assign to height's value the width's value\");\n\n    height.value = width.value;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", are we the same thing now? \\n\");\n\n    System.out.println(\"[3] Assign to height's value an integer other than width's value\");\n\n    height.value = 9;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", we are different things yet! \\n\");\n\n    System.out.println(\"[4] Assign to height the width object\");\n\n    height = width;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", are we the same thing now? \\n\");\n\n    System.out.println(\"[5] Assign to height's value an integer other than width's value\");\n\n    height.value = 9;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", we are the same thing now! \\n\");\n\n    System.out.println(\"[6] Assign to height a new MyInteger and an integer other than width's value\");\n\n    height = new MyInteger();\n    height.value = 1;\n\n    System.out.println(\"-&gt;  height is \" + height.value + \" and width is \" + width.value + \", we are different things again! \\n\");\n  }\n}\n</code></pre>\n\n<p>This is the output of my run:</p>\n\n<pre>\nAssignment operator evaluation using two MyInteger objects named height and width\n\n[1] Assign distinct integers to height and width values\n->  height is 9 and width is 1, we are different things! \n\n[2] Assign to height's value the width's value\n->  height is 1 and width is 1, are we the same thing now? \n\n[3] Assign to height's value an integer other than width's value\n->  height is 9 and width is 1, we are different things yet! \n\n[4] Assign to height the width object\n->  height is 1 and width is 1, are we the same thing now? \n\n[5] Assign to height's value an integer other than width's value\n->  height is 9 and width is 9, we are the same thing now! \n\n[6] Assign to height a new MyInteger and an integer other than width's value\n->  height is 1 and width is 9, we are different things again! \n</pre>\n\n<p>In <em>[2]</em> we have distinct objects and assign one variable's value to the other. But after assigning a new value in <em>[3]</em> the objects had different values, which means that in <em>[2]</em> the assigned value was a copy of the primitive variable, usually called <strong>pass-by-value</strong>, otherwise, the values printed in <em>[3]</em> should be the same.</p>\n\n<p>In <em>[4]</em> we still have distinct objects and assign one object to the other. And after assigning a new value in <em>[5]</em> the objects had the same values, which means that in <em>[4]</em> the assigned object was not a copy of the other, which should be called <strong>pass-by-reference</strong>. But, if we look carefully in <em>[6]</em>, we can't be so sure that no copy was done... ?????</p>\n\n<p>We can't be so sure because in <em>[6]</em> the objects were the same, then we assigned a new object to one of them, and after, the objects had different values! How can they be distinct now if they were the same? They should be the same here too!  ?????</p>\n\n<p>We'll need to remember <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"noreferrer\">the docs</a> to understand what's going on:</p>\n\n<blockquote>\n  <p>This operator can also be used on objects to assign <b>object references</b></p>\n</blockquote>\n\n<p>So our two variables were storing references... our variables had the same reference after <em>[4]</em> and different references after <em>[6]</em>... if such a thing is possible, this means that assignment of objects is done by copy of the object's reference, otherwise, if it was not a copy of reference, the printed value of the variables in <em>[6]</em> should be the same. So objects (references), just like primitives, are copied to variables through assignment, what people usually call <em>pass-by-value</em>. That's the only <em>pass-by-</em> in Java.</p>\n"},{"owner":{"reputation":3544,"user_id":3216970,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5ec661ea7a240654ec958f063478c964?s=128&d=identicon&r=PG&f=1","display_name":"mc01","link":"https://stackoverflow.com/users/3216970/mc01"},"comment_count":0,"is_accepted":false,"community_owned_date":1521242734,"score":10,"last_activity_date":1521242734,"last_edit_date":1592644375,"creation_date":1521242734,"answer_id":49330809,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<h2>PT 1: Of Realty Listings</h2>\n<p>There is a blue, 120sq-ft &quot;Tiny House&quot; currently parked at 1234 Main St with a nicely manicured lawn &amp; flower bed out front.</p>\n<p>A Realtor with a local firm is hired and told to keep a listing for that house.</p>\n<p>Let's call that Realtor &quot;Bob.&quot; Hi Bob.</p>\n<p>Bob keeps his Listing, which he calls <code>tinyHouseAt1234Main</code>, up to date with a webcam that allows him to note any changes to the actual house in real time. He also keeps a tally of how many people have asked about the listing.\nBob's integer <code>viewTally</code> for the house is at 42 today.</p>\n<p>Whenever someone wants info about the blue Tiny House at 1234 Main St, they ask Bob.</p>\n<p>Bob looks up his Listing <code>tinyHouseAt1234Main</code> and tells them all about it - the color, the nice lawn, the loft bed and the composting toilet, etc. Then he adds their inquiry to his <code>viewTally</code>. He doesn't tell them the real, physical address though, because Bob's firm specializes in Tiny Houses that could be moved at any time. The tally is now 43.</p>\n<p>At another firm, Realtors might explicitly say their listing &quot;points&quot; to the house at 1234 Main St, denoting this with a little <code>*</code> next to it, because they mainly deal with houses that rarely ever move (though presumably there are reasons for doing so). Bob's firm doesn't bother doing this.</p>\n<p>Now, of course Bob doesn't physically go and put the <em>actual</em> house on a truck to show it to clients directly - that would be impractical and a ridiculous waste of resources. Passing a full copy of his tally sheet is one thing, but passing around the whole house all the time is costly and ridiculous.</p>\n<p>(Aside: Bob's firm also doesn't 3D print new &amp; unique copies of a listed house every single time someone asks about it. That's what the upstart, similarly named web-based firm &amp; its spinoffs do - that's expensive and slower, and people often get the 2 firms confused, but they're quite popular anyway).</p>\n<p>At some other, older firms closer to the Sea, a realtor like Bob might not even exist to manage the Listings. Clients might instead consult the Rolodex &quot;Annie&quot; (<code>&amp;</code> for short) for the direct address of the house. Instead of reading off the referenced house details from the listing like Bob does, clients instead get the house address from Annie (<code>&amp;</code>), and go directly to 1234 Main St, sometimes w/no idea what they might find there.</p>\n<p>One day, Bob's firm begins offering a new automated service that needs the listing for a house the client is interested in.</p>\n<p>Well, the person with that info is Bob, so the client has Bob call up the service and send it a copy of the listing.</p>\n<p><code>jobKillingAutomatedListingService(Listing tinyHouseAt1234Main, int viewTally)</code> Bob sends along ...</p>\n<p>The service, on its end, calls this Listing <code>houseToLookAt</code>, but really what it receives is an exact copy of Bob's listing, with the exact same VALUEs in it, that refer to the house at 1234 Main St.</p>\n<p>This new service also has its own internal tally of how many people have viewed the listing. The service accepts Bob's tally out of professional courtesy, but it doesn't really care and overwrites it entirely with its own local copy anyway. It's tally for today is 1, while Bob's is still 43.</p>\n<p>The realty firms call this &quot;pass-by-value&quot; since Bob's passing the current value of his <code>viewTally</code> and his Listing <code>tinyHouseAt1234Main</code>. He's not actually passing along the entire physical house, because that's impractical. Nor is he passing the real physical address like Annie(<code>&amp;</code>) would do.</p>\n<p>But he IS passing a copy of <em>the value OF</em> the reference he has to the house. Seems like a silly pedantic difference in some ways, but that's how his firm works ...\n..............</p>\n<h2>PT II: Where things get confusing and dangerous ...</h2>\n<p>The new automated service, not being all functional and math-oriented like some other trendy financial &amp; scientific firms, can have unforeseen side effects...</p>\n<p>Once given a Listing object it allows clients to <em>actually</em> repaint the REAL house at 1234 Main St, using a remote drone robot fleet! It allows clients to control a robot bulldozer to ACTUALLY dig up the flower bed! This is madness!!!</p>\n<p>The service also lets clients completely redirect <code>houseToLookAt</code> to some other house at another address, without involving Bob or his listing. All of a sudden they could be looking at 4321 Elm St. instead, which has no connection whatsoever to Bob's listing (thankfully they can't do anymore damage).</p>\n<p>Bob watches all this on his realtime webcam.\nResigned to the drudgery of his sole job responsibility, he tells clients about the new ugly paint job &amp; sudden lack of curb appeal. His Listing <em>is</em> still for 1234 Main St., after all. The new service's <code>houseToLookAt</code> couldn't change that. Bob reports the details of his <code>tinyHouseAt1234Main</code> accurately and dutifully as always, until he gets fired or the house is destroyed entirely by The Nothing.</p>\n<p>Really the only thing the service CAN'T do with its <code>houseToLookAt</code> copy of the Bob's original listing is change the address from 1234 Main St. to some other address, or to a void of nothingness, or to some random type of object like a Platypus. Bob's Listing still always points to 1234 Main St, for whatever it's still worth. He passes its current value around like always.</p>\n<p>This bizarre side-effect of passing a listing to the new automated service is confusing for people who ask about how it works. Really, what's the difference between the ability to remotely control robots that alter the state of the house at 1234 Main, vs. <em>actually</em> physically going there and wreaking havoc because Annie gave you the address??</p>\n<p>Seems like kind of a nitpicky semantic argument if what you generally care about is the <em>state</em> of the house in the listing being copied and passed around, right?</p>\n<p>I mean, if you were in the business of actually picking up houses and physically moving them to other addresses (not like mobile or Tiny Homes where that's sort of an expected function of the platform), or you were accessing, renaming, and shuffling entire neighborhoods like some sort of low-level God-playing madman, THEN maybe you'd care more about passing around those specific address references instead of just copies of the the latest value of the house details ...</p>\n"},{"owner":{"reputation":467,"user_id":4109266,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/fA4Tx.jpg?s=128&g=1","display_name":"Michael","link":"https://stackoverflow.com/users/4109266/michael"},"comment_count":0,"is_accepted":false,"community_owned_date":1522799290,"score":35,"last_activity_date":1588450710,"last_edit_date":1588450710,"creation_date":1522799290,"answer_id":49640653,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Unlike some other languages, Java does not allow you to choose between pass-by-value and pass-by-referenceâall arguments are passed by value. A method call can pass two types of values to a methodâcopies of primitive values (e.g., values of int and double) and copies of references to objects.</p>\n\n<p>When a method modifies a primitive-type parameter, changes to the parameter have no effect on the original argument value in the calling method.</p>\n\n<p>When it comes to objects, objects themselves cannot be passed to methods. So we pass the reference(address) of the object. We can manipulate the original object using this reference.</p>\n\n<p><strong>How Java creates and stores objects:</strong> When we create an object we store the objectâs address in a reference variable. Let's analyze the following statement.</p>\n\n<pre><code>Account account1 = new Account();\n</code></pre>\n\n<p>âAccount account1â is the type and name of the reference variable, â=â is the assignment operator, ânewâ asks for the required amount of space from the system. The constructor to the right of keyword new which creates the object is called implicitly by the keyword new. Address of the created object(result of right value, which is an expression called \"class instance creation expression\") is assigned to the left value (which is a reference variable with a name and a type specified) using the assign operator.</p>\n\n<p>Although an objectâs reference is passed by value, a method can still interact with the referenced object by calling its public methods using the copy of the objectâs reference. Since the reference stored in the parameter is a copy of the reference that was passed as an argument, the parameter in the called method and the argument in the calling method refer to the same object in memory.</p>\n\n<p>Passing references to arrays, instead of the array objects themselves, makes sense for performance reasons. Because everything in Java is passed by value, if array objects were passed,\na copy of each element would be passed. For large arrays, this would waste time and consume\nconsiderable storage for the copies of the elements.</p>\n\n<p>In the image below you can see we have two reference variables(These are called pointers in C/C++, and I think that term makes it easier to understand this feature.) in the main method. Primitive and reference variables are kept in stack memory(left side in images below). array1 and array2 reference variables \"point\" (as C/C++ programmers call it) or reference to a and b arrays respectively, which are objects (values these reference variables hold are addresses of objects) in heap memory (right side in images below).</p>\n\n<p><a href=\"https://i.stack.imgur.com/sF7QZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sF7QZ.png\" alt=\"Pass by value example 1\"></a></p>\n\n<p>If we pass the value of array1 reference variable as an argument to the reverseArray method, a reference variable is created in the method and that reference variable starts pointing to the same array (a). </p>\n\n<pre><code>public class Test\n{\n    public static void reverseArray(int[] array1)\n    {\n        // ...\n    }\n\n    public static void main(String[] args)\n    {\n        int[] array1 = { 1, 10, -7 };\n        int[] array2 = { 5, -190, 0 };\n\n        reverseArray(array1);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/W1wgZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/W1wgZ.png\" alt=\"Pass by value example 2\"></a></p>\n\n<p>So, if we say </p>\n\n<pre><code>array1[0] = 5;\n</code></pre>\n\n<p>in reverseArray method, it will make a change in array a.</p>\n\n<p>We have another reference variable in reverseArray method (array2) that points to an array c. If we were to say </p>\n\n<pre><code>array1 = array2;\n</code></pre>\n\n<p>in reverseArray method, then the reference variable array1 in method reverseArray would stop pointing to array a and start pointing to array c (Dotted line in second image).</p>\n\n<p>If we return value of reference variable array2 as the return value of method reverseArray and assign this value to reference variable array1 in main method, array1 in main will start pointing to array c.</p>\n\n<p>So let's write all the things we have done at once now.</p>\n\n<pre><code>public class Test\n{\n    public static int[] reverseArray(int[] array1)\n    {\n        int[] array2 = { -7, 0, -1 };\n\n        array1[0] = 5; // array a becomes 5, 10, -7\n\n        array1 = array2; /* array1 of reverseArray starts\n          pointing to c instead of a (not shown in image below) */\n        return array2;\n    }\n\n    public static void main(String[] args)\n    {\n        int[] array1 = { 1, 10, -7 };\n        int[] array2 = { 5, -190, 0 };\n\n        array1 = reverseArray(array1); /* array1 of \n         main starts pointing to c instead of a */\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5hRyX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5hRyX.png\" alt=\"enter image description here\"></a></p>\n\n<p>And now that reverseArray method is over, its reference variables(array1 and array2) are gone. Which means we now only have the two reference variables in main method array1 and array2 which point to c and b arrays respectively. No reference variable is pointing to object (array) a. So it is eligible for garbage collection.</p>\n\n<p>You could also assign value of array2 in main to array1. array1 would start pointing to b.</p>\n"},{"comments":[{"owner":{"reputation":1375,"user_id":352035,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5e04ebdfaafc326122015749a5706191?s=128&d=identicon&r=PG","display_name":"AutomatedMike","link":"https://stackoverflow.com/users/352035/automatedmike"},"edited":false,"score":0,"creation_date":1556885886,"post_id":50391764,"comment_id":98589903,"content_license":"CC BY-SA 4.0","body":"Describing java as &quot;pass-by-value&quot; is highly misleading.  For non-primitive types Java uses &quot;pass by value of the reference&quot;.  &quot;Pass by value&quot; implies the value is copied when passed to a method.  It is not, the reference is copied."}],"owner":{"reputation":121,"user_id":5092157,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0670eae48c74ffa13c59cb95f84fe515?s=128&d=identicon&r=PG&f=1","display_name":"asok","link":"https://stackoverflow.com/users/5092157/asok"},"comment_count":1,"is_accepted":false,"community_owned_date":1526560906,"score":8,"last_activity_date":1556155173,"last_edit_date":1556155173,"creation_date":1526560906,"answer_id":50391764,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Java is only passed by value. there is no pass by reference, for example, you can see the following example.</p>\n\n<pre><code>package com.asok.cop.example.task;\npublic class Example {\n    int data = 50;\n\n    void change(int data) {\n        data = data + 100;// changes will be in the local variable \n        System.out.println(\"after add \" + data);\n        }\n\n    public static void main(String args[]) {\n        Example op = new Example();\n        System.out.println(\"before change \" + op.data);\n        op.change(500);\n        System.out.println(\"after change \" + op.data);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>before change 50\nafter add 600\nafter change 50\n</code></pre>\n\n<p>as Michael says in the comments:</p>\n\n<blockquote>\n  <p>objects are still passed by value even though operations on them behave like pass-by-reference. Consider <code>void changePerson(Person person){ person = new Person(); }</code> the callers reference to the person object will remain unchanged. Objects themselves are passed by value but their members can be affected by changes. To be true pass-by-reference, we would have to be able to reassign the argument to a new object and have the change be reflected in the caller.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":581,"user_id":423941,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/250ed5031701da04dac15ef00af2941c?s=128&d=identicon&r=PG","display_name":"Dennis","link":"https://stackoverflow.com/users/423941/dennis"},"edited":false,"score":0,"creation_date":1535231314,"post_id":51522896,"comment_id":90992877,"content_license":"CC BY-SA 4.0","body":"I&#39;m not sure it&#39;s technically correct to mention that copies are made for primitive types. Primitive types are immutable which is why they cannot be modified inside a method they are passed to.  The difference is negligible for things like numbers, but there is an important difference for potentially large strings."},{"owner":{"reputation":3273,"user_id":1047418,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3deab5aa1be96fe145d3103251263523?s=128&d=identicon&r=PG","display_name":"Torben","link":"https://stackoverflow.com/users/1047418/torben"},"edited":false,"score":12,"creation_date":1538541621,"post_id":51522896,"comment_id":92173453,"content_license":"CC BY-SA 4.0","body":"This answer is completely incorrect and only creates confusion. Java is a pure pass-by-value language. What confuses you is that the value can be a pointer to an object. Pass-by-reference means one would be able to change the identity of an object at the caller&#39;s side. E.g. assigning a new object to a method parameter would also affect the pointer that was passed in the code that called the method."},{"owner":{"reputation":4872,"user_id":3307720,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/a9af81f6e3d88cba98772f0419f85214?s=128&d=identicon&r=PG&f=1","display_name":"nasch","link":"https://stackoverflow.com/users/3307720/nasch"},"reply_to_user":{"reputation":581,"user_id":423941,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/250ed5031701da04dac15ef00af2941c?s=128&d=identicon&r=PG","display_name":"Dennis","link":"https://stackoverflow.com/users/423941/dennis"},"edited":false,"score":1,"creation_date":1545936578,"post_id":51522896,"comment_id":94737569,"content_license":"CC BY-SA 4.0","body":"@Dennis Strings are not primitives, they&#39;re objects."},{"owner":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"edited":false,"score":1,"creation_date":1548201716,"post_id":51522896,"comment_id":95456216,"content_license":"CC BY-SA 4.0","body":"It&#39;s not about what&#39;s &quot;In your book.&quot;  &quot;Pass by reference&quot; and &quot;Pass by value&quot; are industry standard terms which have very specific definitions. By those definitions Java is &quot;Pass by value&quot; without exceptions."},{"owner":{"reputation":1513,"user_id":666583,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0183a50288bea023fd56b6ff59dd86c9?s=128&d=identicon&r=PG&f=1","display_name":"AndrewF","link":"https://stackoverflow.com/users/666583/andrewf"},"edited":false,"score":0,"creation_date":1577232047,"post_id":51522896,"comment_id":105126760,"content_license":"CC BY-SA 4.0","body":"&quot;Passing an object&quot; is not a valid operation in Java. You pass a reference to an object. Doing so is <i>not</i> called &quot;passing by reference&quot;. It is called &quot;passing by value&quot;. The reference passed is a <i>value</i>, which is <i>copied</i> to a new place on the stack for the method to use, just like any primitive value."},{"owner":{"reputation":3303,"user_id":1505487,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/32a89e70bccdffd6f50c1ec96224ab2d?s=128&d=identicon&r=PG","display_name":"Solubris","link":"https://stackoverflow.com/users/1505487/solubris"},"edited":false,"score":1,"creation_date":1606346708,"post_id":51522896,"comment_id":114940516,"content_license":"CC BY-SA 4.0","body":"C++ has true pass by value where it copies all the fields of the object onto the stack. Java doesn&#39;t do this so its not pass by value.."},{"owner":{"reputation":34769,"user_id":86604,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/329af917389e6cf8e146c03012f5319a?s=128&d=identicon&r=PG","display_name":"Ingo","link":"https://stackoverflow.com/users/86604/ingo"},"edited":false,"score":0,"creation_date":1606819442,"post_id":51522896,"comment_id":115071122,"content_license":"CC BY-SA 4.0","body":"People who know only Java will never understand that &quot;passing by reference&quot; means nothing else than passing a reference (which is, basically, a pointer) by value. Which. of course, is what the JVM does."}],"owner":{"reputation":46639,"user_id":5535245,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1","display_name":"georgeawg","link":"https://stackoverflow.com/users/5535245/georgeawg"},"comment_count":7,"is_accepted":false,"community_owned_date":1532533246,"score":11,"last_activity_date":1534546478,"last_edit_date":1534546478,"creation_date":1532533246,"answer_id":51522896,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<h2>Java passes primitive types by value and class types by reference</h2>\n\n<p>Now, people like to bicker endlessly about whether \"pass by reference\" is the correct way to describe what Java et al. actually do. The point is this:</p>\n\n<ol>\n<li>Passing an object does not copy the object.</li>\n<li>An object passed to a function can have its members modified by the function.</li>\n<li>A primitive value passed to a function cannot be modified by the function. A copy is made.</li>\n</ol>\n\n<p>In my book that's called passing by reference.</p>\n\n<p>&#8212; <a href=\"https://www.quora.com/profile/Brian-Bi\" rel=\"noreferrer\">Brian Bi</a> - <a href=\"https://www.quora.com/Which-programming-languages-are-pass-by-reference#\" rel=\"noreferrer\">Which programming languages are pass by reference?</a></p>\n"},{"owner":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"comment_count":0,"is_accepted":false,"community_owned_date":1548452250,"score":81,"last_activity_date":1586027143,"last_edit_date":1586027143,"creation_date":1548452250,"answer_id":54373107,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>There are already great answers that cover this. I wanted to make a small contribution by sharing a <strong>very simple example</strong> (which will compile) contrasting the behaviors between Pass-by-reference in c++ and Pass-by-value in Java.</p>\n\n<p>A few points:</p>\n\n<ol>\n<li>The term \"reference\" is a overloaded with two separate meanings. In Java it simply means a pointer, but in the context of \"Pass-by-reference\" it means a handle to the original variable which was passed in.</li>\n<li><strong>Java is Pass-by-value</strong>. Java is a descendent of C (among other languages). Before C, several (but not all) earlier languages like FORTRAN and COBOL supported PBR, but C did not. PBR allowed these other languages to make changes to the passed variables inside sub-routines. In order to accomplish the same thing (i.e. change the values of variables inside functions), C programmers passed pointers to variables into functions. Languages inspired by C, such as Java, borrowed this idea and continue to pass pointer to methods as C did, except that Java calls its pointers References. Again, this is a different use of the word \"Reference\" than in \"Pass-By-Reference\".</li>\n<li><strong>C++ allows Pass-by-reference</strong> by declaring a reference parameter using the \"&amp;\" character (which happens to be the same character used to indicate \"the address of a variable\" in both C and C++). For example, if we pass in a pointer by reference, the parameter and the argument are not just pointing to the same object. Rather, they are the same variable. If one gets set to a different address or to null, so does the other.</li>\n<li>In the C++ example below I'm passing a <strong>pointer</strong> to a null terminated string <strong>by reference</strong>. And in the Java example below I'm passing a Java reference to a String (again, the same as a pointer to a String) by value. Notice the output in the comments.</li>\n</ol>\n\n<p>C++ pass by reference example:</p>\n\n<pre><code>using namespace std;\n#include &lt;iostream&gt;\n\nvoid change (char *&amp;str){   // the '&amp;' makes this a reference parameter\n    str = NULL;\n}\n\nint main()\n{\n    char *str = \"not Null\";\n    change(str);\n    cout&lt;&lt;\"str is \" &lt;&lt; str;      // ==&gt;str is &lt;null&gt;\n}\n</code></pre>\n\n<p>Java pass \"a Java reference\" by value example</p>\n\n<pre><code>public class ValueDemo{\n\n    public void change (String str){\n        str = null;\n    }\n\n     public static void main(String []args){\n        ValueDemo vd = new ValueDemo();\n        String str = \"not null\";\n        vd.change(str);\n        System.out.println(\"str is \" + str);    // ==&gt; str is not null!!\n                                                // Note that if \"str\" was\n                                                // passed-by-reference, it\n                                                // WOULD BE NULL after the\n                                                // call to change().\n     }\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Several people have written comments which seem to indicate that either they are not looking at my examples or they don't get the c++ example. Not sure where the disconnect is, but guessing the c++ example is not clear. I'm posting the same example in pascal because I think pass-by-reference looks cleaner in pascal, but I could be wrong. I might just be confusing people more; I hope not.</p>\n\n<p>In pascal, parameters passed-by-reference are called \"var parameters\". In the procedure setToNil below, please note the keyword 'var' which precedes the parameter 'ptr'. When a pointer is passed to this procedure, it will be passed <strong>by reference</strong>. Note the behavior: when this procedure sets ptr to nil (that's pascal speak for NULL), it will set the argument to nil--you can't do that in Java.</p>\n\n<pre><code>program passByRefDemo;\ntype \n   iptr = ^integer;\nvar\n   ptr: iptr;\n\n   procedure setToNil(var ptr : iptr);\n   begin\n       ptr := nil;\n   end;\n\nbegin\n   new(ptr);\n   ptr^ := 10;\n   setToNil(ptr);\n   if (ptr = nil) then\n       writeln('ptr seems to be nil');     { ptr should be nil, so this line will run. }\nend.\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Some excerpts from <strong>\"THE Java Programming Language\"</strong> by Ken Arnold, <strong>James Gosling (the guy who invented Java)</strong>, and David Holmes, chapter 2, section 2.6.5</p>\n\n<blockquote>\n  <p><strong>All parameters to methods are passed \"by value\"</strong>. In other words,\n  values of parameter variables in a method are copies of the invoker\n  specified as arguments.</p>\n</blockquote>\n\n<p>He goes on to make the same point regarding objects . . . </p>\n\n<blockquote>\n  <p>You should note that when the parameter is an object reference, it is\n  the object reference-not the object itself-that is <strong>passed \"by value\"</strong>.</p>\n</blockquote>\n\n<p>And towards the end of the same section he makes a broader statement about java being only pass by value and never pass by reference.</p>\n\n<blockquote>\n  <p>The Java programming language <strong>does not pass objects by reference; it</strong>\n  <strong>passes object references by value</strong>. Because two copies of the same\n  reference refer to the same actual object, changes made through one\n  reference variable are visible through the other. There is exactly one\n  parameter passing mode-<strong>pass by value</strong>-and that helps keep things\n  simple.</p>\n</blockquote>\n\n<p>This section of the book has a great explanation of parameter passing in Java and of the distinction between pass-by-reference and pass-by-value and it's by the creator of Java. I would encourage anyone to read it, especially if you're still not convinced.</p>\n\n<p>I think the difference between the two models is very subtle and unless you've done programming where you actually used pass-by-reference, it's easy to miss where two models differ.</p>\n\n<p>I hope this settles the debate, but probably won't.</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>I might be a little obsessed with this post. Probably because I feel that the makers of Java inadvertently spread misinformation. If instead of using the word \"reference\" for pointers they had used something else, say \ndingleberry, there would've been no problem. You could say, \"Java passes dingleberries by value and not by reference\", and nobody would be confused.</p>\n\n<p>That's the reason only Java developers have issue with this. They look at the word \"reference\" and think they know exactly what that means, so they don't even bother to consider the opposing argument.</p>\n\n<p>Anyway, I noticed a comment in an older post, which made a balloon analogy which I really liked. So much so that I decided to glue together some clip-art to make a set of cartoons to illustrate the point.</p>\n\n<p><strong>Passing a reference by value</strong>--Changes to the reference are not reflected in the caller's scope, but the changes to the object are. This is because the reference is copied, but the both the original and the copy refer to the same object.\n<a href=\"https://i.stack.imgur.com/RvkqU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RvkqU.png\" alt=\"Passing Object references By Value\"></a></p>\n\n<p><strong>Pass by reference</strong>--There is no copy of the reference. Single reference is shared by both the caller and the function being called. Any changes to the reference or the Object's data are reflected in the caller's scope.\n<a href=\"https://i.stack.imgur.com/SHXkC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SHXkC.png\" alt=\"Pass by reference\"></a></p>\n\n<p><strong>EDIT 4</strong></p>\n\n<p>I have seen posts on this topic which describe the low level implementation of parameter passing in Java, which I think is great and very helpful because it makes an abstract idea concrete. However, to me the question is more about <strong>the behavior described in the language specification</strong> than about the technical implementation of the behavior. This is an exerpt from the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.1\" rel=\"noreferrer\">Java Language Specification, section 8.4.1</a> :</p>\n\n<blockquote>\n  <p>When the method or constructor is invoked (Â§15.12), <strong>the values of the\n  actual argument expressions initialize newly created parameter\n  variables, each of the declared type, before execution of the body of\n  the method or constructor.</strong> The Identifier that appears in the\n  DeclaratorId may be used as a simple name in the body of the method or\n  constructor to refer to the formal parameter.</p>\n</blockquote>\n\n<p>Which means, java creates a copy of the passed parameters before executing a method. Like most people who studied compilers in college, I used <a href=\"https://rads.stackoverflow.com/amzn/click/com/0201100886\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">\"The Dragon Book\"</a> which is <strong>THE</strong> compilers book. It has a good description of \"Call-by-value\" and \"Call-by-Reference\" in Chapter 1. The Call-by-value description matches up with Java Specs exactly.</p>\n\n<p>Back when I studied compilers-in the 90's, I used the first edition of the book from 1986 which pre-dated Java by about 9 or 10 years. However, I just ran across a copy of the <a href=\"https://rads.stackoverflow.com/amzn/click/com/B009TGD06W\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">2nd Eddition</a> from 2007 <strong>which actually mentions Java!</strong> Section 1.6.6 labeled \"Parameter Passing Mechanisms\" describes parameter passing pretty nicely. Here is an excerpt under the heading \"Call-by-value\" which mentions Java:</p>\n\n<blockquote>\n  <p>In call-by-value, the actual parameter is evaluated (if it is an\n  expression) or copied (if it is a variable). The value is placed in\n  the location belonging to the corresponding formal parameter of the\n  called procedure. <strong>This method is used in C and Java, and is a common\n  option in C++ , as well as in most other languages.</strong></p>\n</blockquote>\n"},{"owner":{"reputation":2566,"user_id":959876,"user_type":"registered","profile_image":"https://i.stack.imgur.com/7fYC4.jpg?s=128&g=1","display_name":"moldovean","link":"https://stackoverflow.com/users/959876/moldovean"},"comment_count":0,"is_accepted":false,"community_owned_date":1556635845,"score":12,"last_activity_date":1556635845,"creation_date":1556635845,"answer_id":55923549,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Long story short: </p>\n\n<ol>\n<li>Non-primitives: Java passes the <em>Value of the Reference</em>.  </li>\n<li>Primitives: just value. </li>\n</ol>\n\n<p>The End.</p>\n\n<p>(2) is too easy. Now if you want to think of what (1) implies, imagine you have a class Apple:</p>\n\n<pre><code>class Apple {\n    private double weight;\n    public Apple(double weight) {\n        this.weight = weight;\n    }\n    // getters and setters ...\n\n}\n</code></pre>\n\n<p>then when you pass an instance of this class to the main method:</p>\n\n<pre><code>class Main {\n    public static void main(String[] args) {\n        Apple apple = new Apple(3.14);\n        transmogrify(apple);\n        System.out.println(apple.getWeight()+ \" the goose drank wine...\";\n\n    }\n\n    private static void transmogrify(Apple apple) {\n        // does something with apple ...\n        apple.setWeight(apple.getWeight()+0.55);\n    }\n}\n</code></pre>\n\n<p>oh.. but you probably know that, you're interested in what happens when you do something like this:</p>\n\n<pre><code>class Main {\n    public static void main(String[] args) {\n        Apple apple = new Apple(3.14);\n        transmogrify(apple);\n        System.out.println(\"Who ate my: \"+apple.getWeight()); // will it still be 3.14? \n\n    }\n\n    private static void transmogrify(Apple apple) {\n        // assign a new apple to the reference passed...\n        apple = new Apple(2.71);\n    }\n\n\n}\n</code></pre>\n"},{"owner":{"reputation":109,"user_id":9892438,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-zClReelxPio/AAAAAAAAAAI/AAAAAAAAAA4/Odp25J4l0QI/photo.jpg?sz=128","display_name":"Amit Sharma","link":"https://stackoverflow.com/users/9892438/amit-sharma"},"comment_count":0,"is_accepted":false,"community_owned_date":1563340243,"score":4,"last_activity_date":1563340243,"creation_date":1563340243,"answer_id":57068881,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p><strong>Java passes parameters by value, There is no option of passing a reference in Java.</strong></p>\n\n<p>But at the complier binding level layer, It uses reference internally not exposed to the user.</p>\n\n<p>It is essential as it saves a lot of memory and improves speed.</p>\n"},{"owner":{"reputation":41,"user_id":3957354,"user_type":"registered","profile_image":"https://i.stack.imgur.com/D5qSC.jpg?s=128&g=1","display_name":"natwar kumar","link":"https://stackoverflow.com/users/3957354/natwar-kumar"},"comment_count":0,"is_accepted":false,"community_owned_date":1564199762,"score":4,"last_activity_date":1567798215,"last_edit_date":1567798215,"creation_date":1564199762,"answer_id":57229012,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<pre><code>public class Test {\n\n    static class Dog {\n        String name;\n\n        @Override\n        public int hashCode() {\n            final int prime = 31;\n            int result = 1;\n            result = prime * result + ((name == null) ? 0 : name.hashCode());\n            return result;\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            if (this == obj)\n                return true;\n            if (obj == null)\n                return false;\n            if (getClass() != obj.getClass())\n                return false;\n            Dog other = (Dog) obj;\n            if (name == null) {\n                if (other.name != null)\n                    return false;\n            } else if (!name.equals(other.name))\n                return false;\n            return true;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String nb) {\n            this.name = nb;\n        }\n\n        Dog(String sd) {\n            this.name = sd;\n        }\n    }\n    /**\n     * \n     * @param args\n     */\n    public static void main(String[] args) {\n        Dog aDog = new Dog(\"Max\");\n\n        // we pass the object to foo\n        foo(aDog);\n        Dog oldDog = aDog;\n\n        System.out.println(\" 1: \" + aDog.getName().equals(\"Max\")); // false\n        System.out.println(\" 2 \" + aDog.getName().equals(\"huahua\")); // false\n        System.out.println(\" 3 \" + aDog.getName().equals(\"moron\")); // true\n        System.out.println(\" 4 \" + \" \" + (aDog == oldDog)); // true\n\n        // part2\n        Dog aDog1 = new Dog(\"Max\");\n\n        foo(aDog1, 5);\n        Dog oldDog1 = aDog;\n\n        System.out.println(\" 5 : \" + aDog1.getName().equals(\"huahua\")); // true\n        System.out.println(\" part2 : \" + (aDog1 == oldDog1)); // false\n\n        Dog oldDog2 = foo(aDog1, 5, 6);\n        System.out.println(\" 6 \" + (aDog1 == oldDog2)); // true\n        System.out.println(\" 7 \" + (aDog1 == oldDog)); // false\n        System.out.println(\" 8 \" + (aDog == oldDog2)); // false\n    }\n\n    /**\n     * \n     * @param d\n     */\n    public static void foo(Dog d) {\n        System.out.println(d.getName().equals(\"Max\")); // true\n\n        d.setName(\"moron\");\n\n        d = new Dog(\"huahua\");\n        System.out.println(\" -:-  \" + d.getName().equals(\"huahua\")); // true\n    }\n\n    /**\n     * \n     * @param d\n     * @param a\n     */\n    public static void foo(Dog d, int a) {\n        d.getName().equals(\"Max\"); // true\n\n        d.setName(\"huahua\");\n    }\n\n    /**\n     * \n     * @param d\n     * @param a\n     * @param b\n     * @return\n     */\n    public static Dog foo(Dog d, int a, int b) {\n        d.getName().equals(\"Max\"); // true\n        d.setName(\"huahua\");\n        return d;\n    }\n}\n</code></pre>\n\n<p>The sample code to demonstrate the impact of changes to the  object at different functions . </p>\n"},{"owner":{"reputation":173,"user_id":10240338,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7e77cb06acb8a5de721a167f98774a72?s=128&d=identicon&r=PG&f=1","display_name":"grindlewald","link":"https://stackoverflow.com/users/10240338/grindlewald"},"comment_count":0,"is_accepted":false,"community_owned_date":1566503229,"score":5,"last_activity_date":1566505055,"last_edit_date":1566505055,"creation_date":1566503229,"answer_id":57616177,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>First let's understand Memory allocation in Java:\nStack and Heap are part of Memory that JVM allocates for different purposes. The stack memory is pre-allocated to thread, when it is created, therefore, a thread cannot access the Stack of other thread. But Heap is available to all threads in a program.</p>\n\n<p>For a thread, Stack stores all local data, metadata of program, primitive type data and object reference. And, Heap is responsible for storage of actual object.</p>\n\n<pre><code>Book book = new Book(\"Effective Java\");\n</code></pre>\n\n<p>In the above example, the reference variable is \"book\" which is stored in stack. The instance created by new operator -> new Book(\"Effective Java\") is stored in Heap. The ref variable \"book\" has address of the object allocated in Heap. Let's say the address is 1001.</p>\n\n<p><a href=\"https://i.stack.imgur.com/uw7tE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uw7tE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Consider passing a primitive data type i.e. int, float, double etc.</p>\n\n<pre><code>public class PrimitiveTypeExample { \n    public static void main(string[] args) {\n       int num = 10;\n       System.out.println(\"Value before calling method: \" + num);\n       printNum(num);\n       System.out.println(\"Value after calling method: \" + num);\n    }\n    public static void printNum(int num){\n       num = num + 10;\n       System.out.println(\"Value inside printNum method: \" + num);\n    }\n}\n</code></pre>\n\n<p>Output is:\nValue before calling method: 10\nValue inside printNum method: 20\nValue after calling method: 10</p>\n\n<p>int num =10; -> this allocates the memory for \"int\" in Stack of the running thread, because, it is a primitive type.  Now when printNum(..) is called, a private stack is created within the same thread. When \"num\" is passed to this method, a copy of \"num\" is created in the method stack frame.\nnum = num+10; -> this adds 10 and modifies the the int variable within the method stack frame.\nTherefore, the original num outside the method stack frame remains unchanged.</p>\n\n<p>Consider, the example of passing the object of a custom class as an argument.</p>\n\n<p><a href=\"https://i.stack.imgur.com/J1XRW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/J1XRW.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the above example, ref variable \"book\" resides in stack of thread executing the program, and the object of class Book is created in Heap space when program executes new Book(). This memory location in Heap is referred by \"book\". When \"book\" is passed as method argument, a copy  of \"book\" is created in  private stack frame of method within the same stack of thread. Therefore, the copied reference variable points to the same object of class \"Book\" in the Heap.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ggqd5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ggqd5.png\" alt=\"enter image description here\"></a></p>\n\n<p>The reference variable within method stack frame sets a new value to same object. Therefore, it is reflected when original ref variable \"book\" gets its value.\nNote that in case of passing reference variable, if it is initialized again in called method, it then points to new memory location and any operation does not affect the previous object in the Heap.</p>\n\n<p>Therefore, when anything is passed as method argument, it is always the Stack entity - either primitive or reference variable. We never pass something that is stored in Heap. Hence, in Java, we always pass the value in the stack, and it is pass by value.</p>\n"},{"owner":{"reputation":59,"user_id":11725130,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b514002eb9fd47984b587804983c3512?s=128&d=identicon&r=PG&f=1","display_name":"Rose","link":"https://stackoverflow.com/users/11725130/rose"},"comment_count":0,"is_accepted":false,"community_owned_date":1569053347,"score":3,"last_activity_date":1569053347,"creation_date":1569053347,"answer_id":58038425,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>I think this simple explanation might help you understand as I wanted to understand this same thing when I was struggling through this.</p>\n\n<p>When you pass a primitive data to a function call it's content is being copied to the function's argument and when you pass an object it's reference is being copied to the function's argument. Speaking of object, you can't change the copied reference-<em>the argument variable is referencing to</em> in the calling function.</p>\n\n<p>Consider this simple example, String is an object in java and when you change the content of a string the reference variable will now point to some new reference as String objects are immutable in java.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String name=\"Mehrose\";  // name referencing to 100\n\nChangeContenet(String name){\n name=\"Michael\"; // refernce has changed to 1001\n\n} \nSystem.out.print(name);  //displays Mehrose\n</code></pre>\n\n<p>Fairly simple because as I mentioned you are not allowed to change the copied reference in the calling function. But the problem is with the array when you pass an array of String/Object. Let us see.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>String names[]={\"Mehrose\",\"Michael\"};\n\nchangeContent(String[] names){\n  names[0]=\"Rose\";\n  names[1]=\"Janet\"\n\n}\n\nSystem.out.println(Arrays.toString(names)); //displays [Rose,Janet]\n</code></pre>\n\n<p>As we said that we can't change the copied reference in the function call and we also have seen in the case of a single String object. The reason is names[] variable referencing to let's say 200 and names[0] referencing to 205 and so on. You see we didn't change the names[] reference it still points to the old same reference still after the function call but now names[0] and names[1] reference has been changed. We Still stand on our definition that we can't change the reference variable's reference so we didn't.</p>\n\n<p>The same thing happens when you pass a Student object to a method and you are still able to change the Student name or other attributes, the point is we are not changing the actual Student object rather we are changing the contents of it</p>\n\n<p>You can't do this</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Student student1= new Student(\"Mehrose\");\n\nchangeContent(Student Obj){\n obj= new Student(\"Michael\") //invalid\n obj.setName(\"Michael\")  //valid\n\n}\n</code></pre>\n"},{"owner":{"reputation":1592,"user_id":7888956,"user_type":"registered","profile_image":"https://i.stack.imgur.com/vfzrr.png?s=128&g=1","display_name":"DeC","link":"https://stackoverflow.com/users/7888956/dec"},"comment_count":0,"is_accepted":false,"community_owned_date":1575281531,"score":7,"last_activity_date":1578034062,"last_edit_date":1578034062,"creation_date":1572924323,"answer_id":58704042,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>A: Java does manipulate objects by reference, and all object variables are references. However, Java doesn't pass method arguments by reference; it passes them by value.</p>\n\n<p>Take the badSwap() method for example:</p>\n\n<pre><code>public void badSwap(int var1, int var2)\n{\n  int temp = var1;\n  var1 = var2;\n  var2 = temp;\n}\n</code></pre>\n\n<p>When badSwap() returns, the variables passed as arguments will still hold their original values. The method will also fail if we change the arguments type from int to Object, since Java passes object references by value as well. Now, here is where it gets tricky:</p>\n\n<pre><code>public void tricky(Point arg1, Point arg2)\n{\n  arg1.x = 100;\n  arg1.y = 100;\n  Point temp = arg1;\n  arg1 = arg2;\n  arg2 = temp;\n}\npublic static void main(String [] args)\n{\n  Point pnt1 = new Point(0,0);\n  Point pnt2 = new Point(0,0);\n  System.out.println(\"X: \" + pnt1.x + \" Y: \" +pnt1.y); \n  System.out.println(\"X: \" + pnt2.x + \" Y: \" +pnt2.y);\n  System.out.println(\" \");\n  tricky(pnt1,pnt2);\n  System.out.println(\"X: \" + pnt1.x + \" Y:\" + pnt1.y); \n  System.out.println(\"X: \" + pnt2.x + \" Y: \" +pnt2.y);  \n}\n</code></pre>\n\n<p>If we execute this main() method, we see the following output:</p>\n\n<pre><code>X: 0 Y: 0\nX: 0 Y: 0\nX: 100 Y: 100\nX: 0 Y: 0\n</code></pre>\n\n<p>The method successfully alters the value of pnt1, even though it is passed by value; however, a swap of pnt1 and pnt2 fails! This is the major source of confusion. In the main() method, pnt1 and pnt2 are nothing more than object references. When you pass pnt1 and pnt2 to the tricky() method, Java passes the references by value just like any other parameter. This means the references passed to the method are actually copies of the original references. Figure 1 below shows two references pointing to the same object after Java passes an object to a method.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wLEj7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wLEj7.png\" alt=\"enter image description here\"></a><br>\nFigure 1. After being passed to a method, an object will have at least two references</p>\n\n<p>Java copies and passes the reference by value, not the object. Thus, method manipulation will alter the objects, since the references point to the original objects. But since the references are copies, swaps will fail.The method references swap, but not the original references. Unfortunately, after a method call, you are left with only the unswapped original references. For a swap to succeed outside of the method call, we need to swap the original references, not the copies.</p>\n"},{"comments":[{"owner":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"edited":false,"score":4,"creation_date":1582237478,"post_id":60141523,"comment_id":106718686,"content_license":"CC BY-SA 4.0","body":"Object references (i.e. pointers) are passed by value and primitives are also passed by value. Meaning everything is always passed by value. I think the operative term here is Pass-by-value."},{"owner":{"reputation":177,"user_id":5486740,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/4eb73c504cc814bbc4d8ad060a3e0e30?s=128&d=identicon&r=PG&f=1","display_name":"Mr.Robot","link":"https://stackoverflow.com/users/5486740/mr-robot"},"reply_to_user":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"edited":false,"score":3,"creation_date":1585844885,"post_id":60141523,"comment_id":107913149,"content_license":"CC BY-SA 4.0","body":"I think Java Language Architect, who is leading Project Amber and Project Valhalla is a credible source to claim that it is not pass by value."},{"owner":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"edited":false,"score":0,"creation_date":1585851478,"post_id":60141523,"comment_id":107916806,"content_license":"CC BY-SA 4.0","body":"First, I don&#39;t think he&#39;s more credible than James Gosling, the creator of Java who clearly state in his book, &quot;THE Java Programming Language&quot;, that Java is indeed Pass-by-value (Chapter 2, section 2.6.5).  Second, although Goetz says it&#39;s neither PBV or PBR, he then goes on to say that references are PASSED BY VALUE, thereby contradicting himself. If you know Java, you also know that primitives are also PASSED BY VALUE. Since everything in Java is passed by value, Java is a PASS BY VALUE language."},{"owner":{"reputation":1191,"user_id":1028560,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0357781c153374f699360c669c31b4fa?s=128&d=identicon&r=PG","display_name":"Sanjeev","link":"https://stackoverflow.com/users/1028560/sanjeev"},"edited":false,"score":0,"creation_date":1585853392,"post_id":60141523,"comment_id":107917786,"content_license":"CC BY-SA 4.0","body":"Other sources who are way more credible than Goetz are Aho, Lam, Sethi, and Ullman who are well known for their book &quot;Compilers: Principles, Techniques, and Tools&quot;, the standard college text book for compiler construction. The 2nd eddition section 1.6.6 of this book also states that Java is Pass-by-value."},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":3,"creation_date":1586086851,"post_id":60141523,"comment_id":107990767,"content_license":"CC BY-SA 4.0","body":"And the most relevant reference of all is the Java Language Specification which states <i>&quot;The effect of this is to assign the argument values to corresponding freshly created parameter variables of the method&quot;</i>.  (15.12.4.5).  Note that it is avoiding the terminological confusion by not saying &quot;pass by ...&quot; at all. (FWIW, I disagree with the Goetz&#39;s characterization of &quot;pass by value&quot; and &quot;pass references by value&quot; as being semantically different.  And I agree that he is contradicting himself.)"},{"owner":{"reputation":1572,"user_id":2545722,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/3b245d38494a4043d5f0d4fdc15b1c74?s=128&d=identicon&r=PG","display_name":"AFP_555","link":"https://stackoverflow.com/users/2545722/afp-555"},"edited":false,"score":0,"creation_date":1605615088,"post_id":60141523,"comment_id":114699016,"content_license":"CC BY-SA 4.0","body":"This is the only answer that made sense so far. The objects are not passed as pure values because they aren&#39;t copied like in the C++ pass-by-value way."}],"owner":{"reputation":177,"user_id":5486740,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/4eb73c504cc814bbc4d8ad060a3e0e30?s=128&d=identicon&r=PG&f=1","display_name":"Mr.Robot","link":"https://stackoverflow.com/users/5486740/mr-robot"},"comment_count":6,"is_accepted":false,"community_owned_date":1581283803,"score":12,"last_activity_date":1607379643,"last_edit_date":1607379643,"creation_date":1581283803,"answer_id":60141523,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>I see that all answers contain the same: pass by value. However, a recent Brian Goetz update on project Valhalla actually answers it differently:</p>\n<blockquote>\n<p>Indeed, it is a common âgotchaâ question about whether Java objects are passed by value or by reference, and <strong>the answer is âneitherâ: object references are passed by value.</strong></p>\n</blockquote>\n<p>You can read more here: <a href=\"http://cr.openjdk.java.net/%7Ebriangoetz/valhalla/sov/02-object-model.html\" rel=\"nofollow noreferrer\">State of Valhalla. Section 2: Language Model</a></p>\n<p><strong>Edit:</strong> Brian Goetz is Java Language Architect, leading such projects as Project Valhalla and Project Amber.</p>\n<p><strong>Edit-2020-12-08</strong>: Updated <a href=\"https://github.com/openjdk/valhalla-docs/blob/main/site/design-notes/state-of-valhalla/02-object-model.md\" rel=\"nofollow noreferrer\">State of Valhalla</a></p>\n"},{"owner":{"reputation":417,"user_id":2825515,"user_type":"registered","profile_image":"https://i.stack.imgur.com/O2wr6.jpg?s=128&g=1","display_name":"Saranga  kapilarathna","link":"https://stackoverflow.com/users/2825515/saranga-kapilarathna"},"comment_count":0,"is_accepted":false,"community_owned_date":1584074716,"score":1,"last_activity_date":1584074716,"creation_date":1584074716,"answer_id":60664984,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Please read  this.</p>\n\n<p>Many programming languages allow passing parameters by reference or by value. In Java, we can only pass parameters by value. This imposes some limits and also raises questions. For instance, if the parameter value is changed in the method, what happens to the value following method execution? You may also wonder how Java manages object values in the memory heap. This Java Challenger helps you resolve these and other common questions about object references in Java.</p>\n\n<p>For the more:</p>\n\n<p><a href=\"https://www.javaworld.com/article/3512039/does-java-pass-by-reference-or-pass-by-value.html\" rel=\"nofollow noreferrer\">https://www.javaworld.com/article/3512039/does-java-pass-by-reference-or-pass-by-value.html</a></p>\n"},{"comments":[{"owner":{"reputation":116,"user_id":8421291,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-8XVYso4qYxc/AAAAAAAAAAI/AAAAAAAAHIA/63UVRnCpc8M/photo.jpg?sz=128","display_name":"Abhishek Attri","link":"https://stackoverflow.com/users/8421291/abhishek-attri"},"edited":false,"score":0,"creation_date":1608631530,"post_id":64289407,"comment_id":115636187,"content_license":"CC BY-SA 4.0","body":"Crisp and clear!"}],"owner":{"reputation":8265,"user_id":511804,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/f80c32df1d3e07e85e4806dcaeb01d58?s=128&d=identicon&r=PG","display_name":"Alexandr","link":"https://stackoverflow.com/users/511804/alexandr"},"comment_count":1,"is_accepted":false,"community_owned_date":1602296852,"score":4,"last_activity_date":1608653158,"last_edit_date":1608653158,"creation_date":1602296852,"answer_id":64289407,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>I'd say it in another way:</p>\n<p>In java references are passed (but not objects) and these references are passed-by-value  (the reference itself is copied and you have 2 references as a result and you have no control under the 1st reference in the method).</p>\n<p>Just saying: pass-by-value might be not clear enough for beginners. For instance in Python the same situation but there are articles, which describe that they call it <code>pass-by-reference</code>, only cause references are used.</p>\n"},{"comments":[{"owner":{"reputation":828,"user_id":8439576,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0Jdn9.jpg?s=128&g=1","display_name":"Mohith7548","link":"https://stackoverflow.com/users/8439576/mohith7548"},"edited":false,"score":0,"creation_date":1604399215,"post_id":64409378,"comment_id":114329702,"content_license":"CC BY-SA 4.0","body":"Running this program should help anyone understand this concept. <a href=\"https://pastebin.com/VEc8NQcX\" rel=\"nofollow noreferrer\">pastebin.com/VEc8NQcX</a>"},{"owner":{"reputation":306,"user_id":5437033,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3ae8934ac0d0201fb7a2464c8756e521?s=128&d=identicon&r=PG&f=1","display_name":"Chrispher","link":"https://stackoverflow.com/users/5437033/chrispher"},"edited":false,"score":0,"creation_date":1605355076,"post_id":64409378,"comment_id":114627853,"content_license":"CC BY-SA 4.0","body":"In this example you&#39;ve not copied the Student object, so I think saying &quot;passing a copy of the value also changes the real value of the object&quot; is misleading.  The thing that you are copying, and passing-by-value, is the <i>reference</i> to the object. The object stays living on the heap, and there&#39;s just one of them. That&#39;s why when you use the new reference to mutate the object, you&#39;re mutating it for everyone else that has a reference to the object. There&#39;s only one object.  When the argument of the function is a primitive type, not a reference to an object, it is also copied."}],"owner":{"reputation":252,"user_id":6582191,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AEh6p.jpg?s=128&g=1","display_name":"Duleepa Wickramasinghe","link":"https://stackoverflow.com/users/6582191/duleepa-wickramasinghe"},"comment_count":2,"is_accepted":false,"community_owned_date":1602990961,"score":7,"last_activity_date":1603002530,"last_edit_date":1603002530,"creation_date":1602990961,"answer_id":64409378,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p><strong>Java always passes parameters by value.</strong>\n<br>All object references in Java are passed by value. This means that a copy of the value will be passed to a method. But the trick is that passing a copy of the value also changes the real value of the object.</p>\n<p>Please refer to the below example,</p>\n<pre><code>public class ObjectReferenceExample {\n\n    public static void main(String... doYourBest) {\n            Student student = new Student();\n            transformIntoHomer(student);\n            System.out.println(student.name);\n    }\n\n    static void transformIntoDuleepa(Student student) {\n            student.name = &quot;Duleepa&quot;;\n    }\n}\nclass Student {\n    String name;\n}\n</code></pre>\n<p>In this case, it will be Duleepa!\n<br>The reason is that Java object variables are simply references that point to real objects in the memory heap.\nTherefore, even though Java passes parameters to methods by value, if the variable points to an object reference, the real object will also be changed.</p>\n"},{"owner":{"reputation":269,"user_id":11913248,"user_type":"registered","profile_image":"https://i.stack.imgur.com/4Bfq0.jpg?s=128&g=1","display_name":"Pallav Khare","link":"https://stackoverflow.com/users/11913248/pallav-khare"},"comment_count":0,"is_accepted":false,"community_owned_date":1605982662,"score":3,"last_activity_date":1605982662,"creation_date":1605982662,"answer_id":64946506,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Java is always pass by value, not pass by reference</p>\n<p>First of all, we need to understand what pass by value and pass by reference are.</p>\n<p>Pass by value means that you are making a copy in memory of the actual parameter's value that is passed in. This is a copy of the contents of the actual parameter.</p>\n<p>Pass by reference (also called pass by address) means that a copy of the address of the actual parameter is stored.</p>\n<p>Sometimes Java can give the illusion of pass by reference. Let's see how it works by using the example below:</p>\n<pre><code>public class PassByValue {\n    public static void main(String[] args) {\n        Test t = new Test();\n        t.name = &quot;initialvalue&quot;;\n        new PassByValue().changeValue(t);\n        System.out.println(t.name);\n    }\n    \n    public void changeValue(Test f) {\n        f.name = &quot;changevalue&quot;;\n    }\n}\n\nclass Test {\n    String name;\n}\n</code></pre>\n<p>The output of this program is:</p>\n<p>changevalue\nLet's understand step by step:</p>\n<p>Test t = new Test();\nAs we all know it will create an object in the heap and return the reference value back to t. For example, suppose the value of t is 0x100234 (we don't know the actual JVM internal value, this is just an example) .</p>\n<p>first illustration</p>\n<pre><code>new PassByValue().changeValue(t);\n</code></pre>\n<p>When passing reference t to the function it will not directly pass the actual reference value of object test, but it will create a copy of t and then pass it to the function. Since it is passing by value, it passes a copy of the variable rather than the actual reference of it. Since we said the value of t was 0x100234, both t and f will have the same value and hence they will point to the same object.</p>\n<p>second illustration</p>\n<p>If you change anything in the function using reference f it will modify the existing contents of the object. That is why we got the output changevalue, which is updated in the function.</p>\n<p>To understand this more clearly, consider the following example:</p>\n<pre><code>public class PassByValue {\n    public static void main(String[] args) {\n        Test t = new Test();\n        t.name = &quot;initialvalue&quot;;\n        new PassByValue().changeRefence(t);\n        System.out.println(t.name);\n    }\n    \n    public void changeRefence(Test f) {\n        f = null;\n    }\n}\n\nclass Test {\n    String name;\n}\n</code></pre>\n<p>Will this throw a NullPointerException? No, because it only passes a copy of the reference. In the case of passing by reference, it could have thrown a NullPointerException, as seen below:</p>\n<p>third illustration</p>\n<p>Hopefully this will help.</p>\n"},{"owner":{"reputation":805,"user_id":8932910,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b8ed75b474f7bc5dcf6dfb8c778d17a2?s=128&d=identicon&r=PG&f=1","display_name":"jack","link":"https://stackoverflow.com/users/8932910/jack"},"comment_count":0,"is_accepted":false,"community_owned_date":1609015769,"score":8,"last_activity_date":1609016307,"last_edit_date":1609016307,"creation_date":1609015769,"answer_id":65460603,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Not to repeat, but one point to those who might still be confused after reading many answers:</p>\n<ul>\n<li><code>pass by value</code> in Java is <strong>NOT EQUAL</strong> to <code>pass by value</code> in C++, though it sounds like that, which is probably why there's confusion</li>\n</ul>\n<p>Breaking it down:</p>\n<ul>\n<li><code>pass by value</code> in C++ means passing the value of the object (if object), literarily the copy of the object</li>\n<li><code>pass by value</code> in Java means passing the address value of the object (if object), not really the &quot;value&quot; (a copy) of the object like C++</li>\n<li>By <code>pass by value</code> in Java, operating on an object (e.g. <code>myObj.setName(&quot;new&quot;)</code>) inside a function <strong>has effects</strong> on the object outside the function; by <code>pass by value</code> in C++, it has <strong>NO</strong> effects on the one outside.</li>\n<li>However, by <code>pass by reference</code> in C++, operating on an object in a function <strong>DOES</strong> have effects on the one outside! Similar (<em>just similar, not the same</em>) to <code>pass by value</code> in Java, no?.. and people always repeat &quot;<em>there's no pass by reference in Java</em>&quot;, =&gt; <strong>BOOM, confusion starts...</strong></li>\n</ul>\n<p>So, friends, all is just about the <strong>difference</strong> of terminology definition (across languages), you just need to know how it works and that's it (<em>though sometimes a bit confusing how it's called I admit</em>)!</p>\n"},{"owner":{"reputation":115,"user_id":5003351,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/88284011adae96891786274498272eb9?s=128&d=identicon&r=PG&f=1","display_name":"&#246;mer.bozkurt","link":"https://stackoverflow.com/users/5003351/%c3%b6mer-bozkurt"},"comment_count":0,"is_accepted":false,"community_owned_date":1615036933,"score":0,"last_activity_date":1615036933,"creation_date":1615036933,"answer_id":66506089,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>If you want it to put into a single sentence to understand and remember easily, simplest answer:</p>\n<p>Java is always <strong>pass the value with a new reference</strong></p>\n<p>(So you can modify the original object but can not access the original reference)</p>\n"},{"owner":{"reputation":150,"user_id":4086871,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dae3f3096e52f06c5a4e3c18866a1610?s=128&d=identicon&r=PG&f=1","display_name":"charles","link":"https://stackoverflow.com/users/4086871/charles"},"comment_count":0,"is_accepted":false,"community_owned_date":1615170277,"score":1,"last_activity_date":1615170277,"creation_date":1615170277,"answer_id":66523582,"question_id":40480,"content_license":"CC BY-SA 4.0","body":"<p>Here a more precise definition:</p>\n<ul>\n<li><strong>Pass/call by value:</strong> Formal parameter is like a local variable in\nscope of function, it evaluates to actual parameter at the moment of\nfunction call.</li>\n<li><strong>Pass/call by reference:</strong> Formal parameter is just a alias for the real\nvalue, any change of it in the scope of function can have side\neffects outside in any other part of code.</li>\n</ul>\n<p>So in C/C++ you can create a function that swaps two values passed by reference:</p>\n<pre><code>void swap(int&amp; a, int&amp; b) \n{\n    int&amp; tmp = a;\n    a = b;\n    b = tmp;\n}\n</code></pre>\n<p>You can see it has a unique reference to a and b, so we do not have a copy, tmp just hold unique references.</p>\n<p>The same function in java does not have side effects, the parameter passing is just like the code above without references.</p>\n<p>Although java work with pointers/references, the parameters are not unique pointers, in each attribution, they are copied instead just assigned like C/C++</p>\n"}],"owner":{"reputation":4715,"user_id":4315,"user_type":"registered","display_name":"user4315","link":"https://stackoverflow.com/users/4315/user4315"},"comment_count":7,"is_answered":true,"view_count":2134848,"protected_date":1308938923,"answer_count":86,"community_owned_date":1347646975,"score":6949,"last_activity_date":1615170277,"creation_date":1220386469,"last_edit_date":1596698646,"question_id":40480,"link":"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value","title":"Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?","body":"<p>I always thought Java uses <strong>pass-by-reference</strong>.</p>\n<p>However, I've seen a couple of blog posts (for example, <a href=\"http://javadude.com/articles/passbyvalue.htm\" rel=\"noreferrer\">this blog</a>) that claim that it isn't (the blog post says that Java uses <strong>pass-by-value</strong>).</p>\n<p>I don't think I understand the distinction they're making.</p>\n<p>What is the explanation?</p>\n"},{"tags":["java","string","io","stream","inputstream"],"comments":[{"owner":{"reputation":4283,"user_id":6304094,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ca5952420104811d556385f320dd6f09?s=128&d=identicon&r=PG&f=1","display_name":"Kevin Anderson","link":"https://stackoverflow.com/users/6304094/kevin-anderson"},"edited":false,"score":0,"creation_date":1602165739,"post_id":309424,"comment_id":113639095,"content_license":"CC BY-SA 4.0","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":0,"creation_date":1604051543,"post_id":309424,"comment_id":114235005,"content_license":"CC BY-SA 4.0","body":"Remember that you need to take the encoding of the input stream in consideration.  The system default is not necessarily always the one you wan.t"}],"answers":[{"comments":[{"owner":{"reputation":562,"user_id":2077582,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7696f4e5f954935321518327f95306d1?s=128&d=identicon&r=PG","display_name":"RCB","link":"https://stackoverflow.com/users/2077582/rcb"},"edited":false,"score":0,"creation_date":1593703580,"post_id":309448,"comment_id":110878970,"content_license":"CC BY-SA 4.0","body":"Did the toString get deprecated? I see <code>IOUtils.convertStreamToString()</code>"}],"owner":{"reputation":28262,"user_id":21590,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/d21e4f986f5b05d89b0070b37e296a87?s=128&d=identicon&r=PG","display_name":"Harry Lime","link":"https://stackoverflow.com/users/21590/harry-lime"},"comment_count":1,"is_accepted":true,"score":2654,"last_activity_date":1526908190,"last_edit_date":1526908190,"creation_date":1227286460,"answer_id":309448,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>A nice way to do this is using <a href=\"http://commons.apache.org/\" rel=\"noreferrer\">Apache commons</a> <code><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>... something like</p>\n\n<pre><code>StringWriter writer = new StringWriter();\nIOUtils.copy(inputStream, writer, encoding);\nString theString = writer.toString();\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>// NB: does not close inputStream, you'll have to use try-with-resources for that\nString theString = IOUtils.toString(inputStream, encoding); \n</code></pre>\n\n<p>Alternatively, you could use <code>ByteArrayOutputStream</code> if you don't want to mix your Streams and Writers</p>\n"},{"owner":{"reputation":4805,"user_id":4100,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f2ffcd63c3f62b86a905ebe89da2c69d?s=128&d=identicon&r=PG","display_name":"Paul de Vrieze","link":"https://stackoverflow.com/users/4100/paul-de-vrieze"},"comment_count":0,"is_accepted":false,"community_owned_date":1353168508,"score":306,"last_activity_date":1436955825,"last_edit_date":1436955825,"creation_date":1227292451,"answer_id":309718,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Taking into account file one should first get a <code>java.io.Reader</code> instance. This can then be read and added to a <code>StringBuilder</code> (we don't need <code>StringBuffer</code> if we are not accessing it in multiple threads, and <code>StringBuilder</code> is faster). The trick here is that we work in blocks, and as such don't need other buffering streams. The block size is parameterized for run-time performance optimization.</p>\n\n<pre><code>public static String slurp(final InputStream is, final int bufferSize) {\n    final char[] buffer = new char[bufferSize];\n    final StringBuilder out = new StringBuilder();\n    try (Reader in = new InputStreamReader(is, \"UTF-8\")) {\n        for (;;) {\n            int rsz = in.read(buffer, 0, buffer.length);\n            if (rsz &lt; 0)\n                break;\n            out.append(buffer, 0, rsz);\n        }\n    }\n    catch (UnsupportedEncodingException ex) {\n        /* ... */\n    }\n    catch (IOException ex) {\n        /* ... */\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1478,"user_id":3425489,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/pvkCq.jpg?s=128&g=1","display_name":"Shantaram Tupe","link":"https://stackoverflow.com/users/3425489/shantaram-tupe"},"edited":false,"score":0,"creation_date":1614168393,"post_id":350723,"comment_id":117301957,"content_license":"CC BY-SA 4.0","body":"Trying to get back InputStream, not working <a href=\"https://stackoverflow.com/q/66349701/3425489\">stackoverflow.com/q/66349701/3425489</a>"}],"owner":{"reputation":9899,"user_id":31892,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/22aa27d8821b495e095f79dd331ef3d4?s=128&d=identicon&r=PG","display_name":"Chinnery","link":"https://stackoverflow.com/users/31892/chinnery"},"comment_count":1,"is_accepted":false,"score":864,"last_activity_date":1546684172,"last_edit_date":1546684172,"creation_date":1228767222,"answer_id":350723,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Apache Commons allows:</p>\n\n<pre><code>String myString = IOUtils.toString(myInputStream, \"UTF-8\");\n</code></pre>\n\n<p>Of course, you could choose other character encodings besides UTF-8.</p>\n\n<p>Also see: (<a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String\" rel=\"noreferrer\">documentation</a>)</p>\n"},{"owner":{"reputation":1260,"user_id":57541,"user_type":"registered","profile_image":"https://i.stack.imgur.com/3ATwT.jpg?s=128&g=1","display_name":"Jon Moore","link":"https://stackoverflow.com/users/57541/jon-moore"},"comment_count":0,"is_accepted":false,"score":70,"last_activity_date":1546684205,"last_edit_date":1546684205,"creation_date":1244668031,"answer_id":978162,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Use:</p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\nimport java.io.IOException;\n\npublic static String readInputStreamAsString(InputStream in)\n    throws IOException {\n\n    BufferedInputStream bis = new BufferedInputStream(in);\n    ByteArrayOutputStream buf = new ByteArrayOutputStream();\n    int result = bis.read();\n    while(result != -1) {\n      byte b = (byte)result;\n      buf.write(b);\n      result = bis.read();\n    }\n    return buf.toString();\n}\n</code></pre>\n"},{"owner":{"reputation":2025,"user_id":344029,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ogaEc.png?s=128&g=1","display_name":"DJDaveMark","link":"https://stackoverflow.com/users/344029/djdavemark"},"comment_count":0,"is_accepted":false,"score":22,"last_activity_date":1546684261,"last_edit_date":1546684261,"creation_date":1274187473,"answer_id":2857414,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>If you can't use Commons IO (FileUtils/IOUtils/CopyUtils), here's an example using a BufferedReader to read the file line by line:</p>\n\n<pre><code>public class StringFromFile {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFile.class.getResourceAsStream(\"file.txt\");\n        BufferedReader br = new BufferedReader(new InputStreamReader(is/*, \"UTF-8\"*/));\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        StringBuilder builder = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(String line=br.readLine(); line!=null; line=br.readLine()) {\n                builder.append(line);\n                builder.append('\\n');\n            }\n        } \n        catch (IOException ignore) { }\n\n        String text = builder.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n\n<p>Or if you want raw speed I'd propose a variation on what Paul de Vrieze suggested (which avoids using a StringWriter (which uses a StringBuffer internally):</p>\n\n<pre><code>public class StringFromFileFast {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFileFast.class.getResourceAsStream(\"file.txt\");\n        InputStreamReader input = new InputStreamReader(is/*, \"UTF-8\"*/);\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        final char[] buffer = new char[CHARS_PER_PAGE];\n        StringBuilder output = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(int read = input.read(buffer, 0, buffer.length);\n                    read != -1;\n                    read = input.read(buffer, 0, buffer.length)) {\n                output.append(buffer, 0, read);\n            }\n        } catch (IOException ignore) { }\n\n        String text = output.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2531,"user_id":151614,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8befd100204a47f55d422e6d46ee039d?s=128&d=identicon&r=PG","display_name":"Sakuraba","link":"https://stackoverflow.com/users/151614/sakuraba"},"comment_count":0,"is_accepted":false,"score":175,"last_activity_date":1359563754,"last_edit_date":1359563754,"creation_date":1279036584,"answer_id":3238954,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>If you are using Google-Collections/Guava you could do the following:</p>\n\n<pre><code>InputStream stream = ...\nString content = CharStreams.toString(new InputStreamReader(stream, Charsets.UTF_8));\nCloseables.closeQuietly(stream);\n</code></pre>\n\n<p>Note that the second parameter (i.e. Charsets.UTF_8) for the <code>InputStreamReader</code> isn't necessary, but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n"},{"comments":[{"owner":{"reputation":219,"user_id":4425158,"user_type":"registered","profile_image":"https://i.stack.imgur.com/dDD2R.jpg?s=128&g=1","display_name":"Oleg Markelov","link":"https://stackoverflow.com/users/4425158/oleg-markelov"},"edited":false,"score":0,"creation_date":1603087998,"post_id":5445161,"comment_id":113914255,"content_license":"CC BY-SA 4.0","body":"Shouldn&#39;t we close the scanner before returning the value?"},{"owner":{"reputation":29751,"user_id":43151,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0886310289840857f4763f2559b740c?s=128&d=identicon&r=PG","display_name":"Pavel Repin","link":"https://stackoverflow.com/users/43151/pavel-repin"},"reply_to_user":{"reputation":219,"user_id":4425158,"user_type":"registered","profile_image":"https://i.stack.imgur.com/dDD2R.jpg?s=128&g=1","display_name":"Oleg Markelov","link":"https://stackoverflow.com/users/4425158/oleg-markelov"},"edited":false,"score":0,"creation_date":1604952302,"post_id":5445161,"comment_id":114499352,"content_license":"CC BY-SA 4.0","body":"@OlegMarkelov probably."}],"owner":{"reputation":29751,"user_id":43151,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0886310289840857f4763f2559b740c?s=128&d=identicon&r=PG","display_name":"Pavel Repin","link":"https://stackoverflow.com/users/43151/pavel-repin"},"comment_count":2,"is_accepted":false,"score":2328,"last_activity_date":1546684434,"last_edit_date":1546684434,"creation_date":1301172025,"answer_id":5445161,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Here's a way using only the standard Java library (note that the stream is not closed, your mileage may vary).</p>\n\n<pre><code>static String convertStreamToString(java.io.InputStream is) {\n    java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n    return s.hasNext() ? s.next() : \"\";\n}\n</code></pre>\n\n<p>I learned this trick from <a href=\"https://community.oracle.com/blogs/pat/2004/10/23/stupid-scanner-tricks\" rel=\"noreferrer\">\"Stupid Scanner tricks\"</a> article. The reason it works is because <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">Scanner</a> iterates over tokens in the stream, and in this case we separate tokens using \"beginning of the input boundary\" (\\A), thus giving us only one token for the entire contents of the stream.</p>\n\n<p><strong>Note, if you need to be specific about the input stream's encoding, you can provide the second argument to <code>Scanner</code> constructor that indicates what character set to use (e.g. \"UTF-8\").</strong></p>\n\n<p>Hat tip goes also to <a href=\"https://stackoverflow.com/users/68127/jacob-gabrielson\">Jacob</a>, who once pointed me to the said article.</p>\n"},{"owner":{"reputation":3865,"user_id":559185,"user_type":"registered","accept_rate":68,"profile_image":"https://i.stack.imgur.com/0L0Kw.png?s=128&g=1","display_name":"sampathpremarathna","link":"https://stackoverflow.com/users/559185/sampathpremarathna"},"comment_count":0,"is_accepted":false,"score":257,"last_activity_date":1546684500,"last_edit_date":1546684500,"creation_date":1312446584,"answer_id":6938341,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Use:</p>\n\n<pre><code>InputStream in = /* Your InputStream */;\nStringBuilder sb = new StringBuilder();\nBufferedReader br = new BufferedReader(new InputStreamReader(in));\nString read;\n\nwhile ((read=br.readLine()) != null) {\n    //System.out.println(read);\n    sb.append(read);\n}\n\nbr.close();\nreturn sb.toString();\n</code></pre>\n"},{"owner":{"reputation":1099,"user_id":370547,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/567206ae95ef2022a89b05a030c3b15b?s=128&d=identicon&r=PG","display_name":"Brett Holt","link":"https://stackoverflow.com/users/370547/brett-holt"},"comment_count":0,"is_accepted":false,"score":35,"last_activity_date":1508230523,"last_edit_date":1508230523,"creation_date":1318440181,"answer_id":7743991,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>I ran some timing tests because time matters, always.<br/></p>\n\n<p>I attempted to get the response into a String 3 different ways. (shown below)<br/>\nI left out try/catch blocks for the sake readability.<br/></p>\n\n<p>To give context, this is the preceding code for all 3 approaches:<br/></p>\n\n<pre><code>   String response;\n   String url = \"www.blah.com/path?key=value\";\n   GetMethod method = new GetMethod(url);\n   int status = client.executeMethod(method);\n</code></pre>\n\n<p>1)<br/></p>\n\n<pre><code> response = method.getResponseBodyAsString();\n</code></pre>\n\n<p>2)<br/></p>\n\n<pre><code>InputStream resp = method.getResponseBodyAsStream();\nInputStreamReader is=new InputStreamReader(resp);\nBufferedReader br=new BufferedReader(is);\nString read = null;\nStringBuffer sb = new StringBuffer();\nwhile((read = br.readLine()) != null) {\n    sb.append(read);\n}\nresponse = sb.toString();\n</code></pre>\n\n<p>3)<br/></p>\n\n<pre><code>InputStream iStream  = method.getResponseBodyAsStream();\nStringWriter writer = new StringWriter();\nIOUtils.copy(iStream, writer, \"UTF-8\");\nresponse = writer.toString();\n</code></pre>\n\n<p>So, after running 500 tests on each approach with the same request/response data, here are the numbers. Once again, these are my findings and your findings may not be exactly the same, but I wrote this to give some indication to others of the efficiency differences of these approaches.</p>\n\n<p>Ranks:<br/>\nApproach #1<br/>\nApproach #3 - 2.6% slower than #1<br/>\nApproach #2 - 4.3% slower than #1<br/></p>\n\n<p>Any of these approaches is an appropriate solution for grabbing a response and creating a String from it.</p>\n"},{"owner":{"reputation":15452,"user_id":828757,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/37ce082c85173317772af80b64345526?s=128&d=identicon&r=PG","display_name":"Jack","link":"https://stackoverflow.com/users/828757/jack"},"comment_count":0,"is_accepted":false,"score":26,"last_activity_date":1331105530,"last_edit_date":1495541909,"creation_date":1331105530,"answer_id":9597413,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>If you were feeling adventurous, you could mix Scala and Java and end up with this:</p>\n\n<pre><code>scala.io.Source.fromInputStream(is).mkString(\"\")\n</code></pre>\n\n<p>Mixing Java and Scala code and libraries has it's benefits.</p>\n\n<p>See full description here: <a href=\"https://stackoverflow.com/q/5221524/828757\">Idiomatic way to convert an InputStream to a String in Scala</a></p>\n"},{"owner":{"reputation":748,"user_id":458244,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/37b1a2f47e378dd6f511c21ea5ed506e?s=128&d=identicon&r=PG","display_name":"TKH","link":"https://stackoverflow.com/users/458244/tkh"},"comment_count":0,"is_accepted":false,"score":27,"last_activity_date":1347474672,"last_edit_date":1347474672,"creation_date":1333137151,"answer_id":9949592,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Here's more-or-less sampath's answer, cleaned up a bit and represented as a function:</p>\n\n<pre><code>String streamToString(InputStream in) throws IOException {\n  StringBuilder out = new StringBuilder();\n  BufferedReader br = new BufferedReader(new InputStreamReader(in));\n  for(String line = br.readLine(); line != null; line = br.readLine()) \n    out.append(line);\n  br.close();\n  return out.toString();\n}\n</code></pre>\n"},{"owner":{"reputation":9416,"user_id":348189,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/29b1970e8e3ec8cbd13bbc02a8d7a22c?s=128&d=identicon&r=PG","display_name":"TacB0sS","link":"https://stackoverflow.com/users/348189/tacb0ss"},"comment_count":0,"is_accepted":false,"score":127,"last_activity_date":1563914325,"last_edit_date":1563914325,"creation_date":1336508651,"answer_id":10505933,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>This is the best pure Java solution that fits perfectly for Android and any other JVM.</p>\n\n<p>This solution works amazingly well... it is simple, fast, and works on small and large streams just the same!! (see benchmark above.. <strong>No. 8</strong>)</p>\n\n<pre><code>public String readFullyAsString(InputStream inputStream, String encoding)\n        throws IOException {\n    return readFully(inputStream).toString(encoding);\n}\n\npublic byte[] readFullyAsBytes(InputStream inputStream)\n        throws IOException {\n    return readFully(inputStream).toByteArray();\n}\n\nprivate ByteArrayOutputStream readFully(InputStream inputStream)\n        throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    byte[] buffer = new byte[1024];\n    int length = 0;\n    while ((length = inputStream.read(buffer)) != -1) {\n        baos.write(buffer, 0, length);\n    }\n    return baos;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1174,"user_id":674856,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/959dcf1e004eb5e9e42b22346ce370c7?s=128&d=identicon&r=PG","display_name":"XXL","link":"https://stackoverflow.com/users/674856/xxl"},"edited":false,"score":1,"creation_date":1342782813,"post_id":11566262,"comment_id":15318282,"content_license":"CC BY-SA 3.0","body":"I get <code>java.io.StreamCorruptedException: invalid stream header</code>"},{"owner":{"reputation":32802,"user_id":48136,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f31c7fbcbb0766d0632d96fd7e74b649?s=128&d=identicon&r=PG","display_name":"Brice","link":"https://stackoverflow.com/users/48136/brice"},"edited":false,"score":3,"creation_date":1364998633,"post_id":11566262,"comment_id":22450251,"content_license":"CC BY-SA 3.0","body":"<code>ObjectInputStream</code> is about deserialization, and the stream have to respect the serialization protocol to work, which may not always true in the context of this question."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1546684644,"post_id":11566262,"comment_id":94936700,"content_license":"CC BY-SA 4.0","body":"An explanation would be in order."}],"owner":{"reputation":421,"user_id":772549,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/f6ec07c16857a31a20fbea3dfc4a3816?s=128&d=identicon&r=PG","display_name":"soBinary","link":"https://stackoverflow.com/users/772549/sobinary"},"comment_count":3,"is_accepted":false,"score":-9,"last_activity_date":1342719219,"creation_date":1342719219,"answer_id":11566262,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Quick and easy:</p>\n\n<pre><code>String result = (String)new ObjectInputStream( inputStream ).readObject();\n</code></pre>\n"},{"owner":{"reputation":352,"user_id":1548325,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/75ac98dd52c8b393234b824f55dcdc49?s=128&d=identicon&r=PG","display_name":"Anand N","link":"https://stackoverflow.com/users/1548325/anand-n"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1450257814,"last_edit_date":1450257814,"creation_date":1343125159,"answer_id":11628754,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>The below code worked for me. </p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nbyte[] buffer = new byte[bi.available() ];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>Please note, according to Java docs, the <code>available()</code> method might not work with <code>InputStream</code> but always works with <code>BufferedInputStream</code>.\nIn case you don't want to use <code>available()</code> method we can always use the below code</p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nFile f = new File(url.getPath());\nbyte[] buffer = new byte[ (int) f.length()];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>I am not sure if there will be any encoding issues. Please comment, if there will be any issues with the code.</p>\n"},{"owner":{"reputation":159,"user_id":1794244,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/66304aaee3b9e8d537524ad0c626a47d?s=128&d=identicon&r=PG","display_name":"Matt Shannon","link":"https://stackoverflow.com/users/1794244/matt-shannon"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1407904209,"last_edit_date":1407904209,"creation_date":1351859873,"answer_id":13195413,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Here's how to do it using just the JDK using byte array buffers. This is actually how the commons-io <code>IOUtils.copy()</code> methods all work. You can replace <code>byte[]</code> with <code>char[]</code> if you're copying from a <code>Reader</code> instead of an <code>InputStream</code>.</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\n\n...\n\nInputStream is = ....\nByteArrayOutputStream baos = new ByteArrayOutputStream(8192);\nbyte[] buffer = new byte[8192];\nint count = 0;\ntry {\n  while ((count = is.read(buffer)) != -1) {\n    baos.write(buffer, 0, count);\n  }\n}\nfinally {\n  try {\n    is.close();\n  }\n  catch (Exception ignore) {\n  }\n}\n\nString charset = \"UTF-8\";\nString inputStreamAsString = baos.toString(charset);\n</code></pre>\n"},{"owner":{"reputation":9261,"user_id":1506477,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a5d48d8856ee5051fbb431cd0cf12deb?s=128&d=identicon&r=PG","display_name":"Thamme Gowda","link":"https://stackoverflow.com/users/1506477/thamme-gowda"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1487964531,"last_edit_date":1487964531,"creation_date":1353155945,"answer_id":13430647,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Make sure to close the streams at end if you use Stream Readers</p>\n\n<pre><code>private String readStream(InputStream iStream) throws IOException {\n    //build a Stream Reader, it can read char by char\n    InputStreamReader iStreamReader = new InputStreamReader(iStream);\n    //build a buffered Reader, so that i can read whole line at once\n    BufferedReader bReader = new BufferedReader(iStreamReader);\n    String line = null;\n    StringBuilder builder = new StringBuilder();\n    while((line = bReader.readLine()) != null) {  //Read till end\n        builder.append(line);\n        builder.append(\"\\n\"); // append new line to preserve lines\n    }\n    bReader.close();         //close all opened stuff\n    iStreamReader.close();\n    //iStream.close(); //EDIT: Let the creator of the stream close it!\n                       // some readers may auto close the inner stream\n    return builder.toString();\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT: On JDK 7+, you can use try-with-resources construct.</p>\n\n<pre><code>/**\n * Reads the stream into a string\n * @param iStream the input stream\n * @return the string read from the stream\n * @throws IOException when an IO error occurs\n */\nprivate String readStream(InputStream iStream) throws IOException {\n\n    //Buffered reader allows us to read line by line\n    try (BufferedReader bReader =\n                 new BufferedReader(new InputStreamReader(iStream))){\n        StringBuilder builder = new StringBuilder();\n        String line;\n        while((line = bReader.readLine()) != null) {  //Read till end\n            builder.append(line);\n            builder.append(\"\\n\"); // append new line to preserve lines\n        }\n        return builder.toString();\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":261887,"user_id":24874,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/b85169daf0d165b94ea4fa70f409686c?s=128&d=identicon&r=PG","display_name":"Drew Noakes","link":"https://stackoverflow.com/users/24874/drew-noakes"},"comment_count":0,"is_accepted":false,"score":66,"last_activity_date":1386434370,"last_edit_date":1386434370,"creation_date":1357011827,"answer_id":14107694,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Here's the most elegant, pure-Java (no library) solution I came up with after some experimentation:</p>\n\n<pre><code>public static String fromStream(InputStream in) throws IOException\n{\n    BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n    StringBuilder out = new StringBuilder();\n    String newLine = System.getProperty(\"line.separator\");\n    String line;\n    while ((line = reader.readLine()) != null) {\n        out.append(line);\n        out.append(newLine);\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"user_type":"does_not_exist","display_name":"user246645"},"edited":false,"score":1,"creation_date":1383906449,"post_id":15315403,"comment_id":29532479,"content_license":"CC BY-SA 3.0","body":"Since you&#39;re using <code>buffer</code> variable locally with no chance of being shared across multiple threads you should consider changing its type to <code>StringBuilder</code>, to avoid the overhead of (useless) synchronization."},{"owner":{"reputation":3314,"user_id":903998,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1","display_name":"Victor","link":"https://stackoverflow.com/users/903998/victor"},"edited":false,"score":0,"creation_date":1383927584,"post_id":15315403,"comment_id":29544475,"content_license":"CC BY-SA 3.0","body":"That&#39;s a good point alex!. I thing that we both agree that this method isn&#39;t thread-safe in many ways. Even the input stream operations aren&#39;t thread-safe."},{"owner":{"reputation":476,"user_id":281508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cef20083dd0ec9e28eb6345b534c9119?s=128&d=identicon&r=PG","display_name":"Vlad Lifliand","link":"https://stackoverflow.com/users/281508/vlad-lifliand"},"edited":false,"score":1,"creation_date":1407538065,"post_id":15315403,"comment_id":39269492,"content_license":"CC BY-SA 3.0","body":"If the stream contains UTF-8 character that spans across several lines, this algorithm can cut the character in two breaking the string."},{"owner":{"reputation":13800,"user_id":3554264,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1","display_name":"Christian Hujer","link":"https://stackoverflow.com/users/3554264/christian-hujer"},"reply_to_user":{"reputation":476,"user_id":281508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cef20083dd0ec9e28eb6345b534c9119?s=128&d=identicon&r=PG","display_name":"Vlad Lifliand","link":"https://stackoverflow.com/users/281508/vlad-lifliand"},"edited":false,"score":1,"creation_date":1454277901,"post_id":15315403,"comment_id":57960741,"content_license":"CC BY-SA 3.0","body":"@VladLifliand How exactly would a UTF-8 character manage to span across several lines? That&#39;s impossible by definition. You probably meant something else."},{"owner":{"reputation":1444,"user_id":1548776,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zD3sy.jpg?s=128&g=1","display_name":"á´ ÉªÉ´á´á´É´á´","link":"https://stackoverflow.com/users/1548776/%e1%b4%a0%c9%aa%c9%b4%e1%b4%84%e1%b4%87%c9%b4%e1%b4%9b"},"reply_to_user":{"reputation":13800,"user_id":3554264,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1","display_name":"Christian Hujer","link":"https://stackoverflow.com/users/3554264/christian-hujer"},"edited":false,"score":0,"creation_date":1552853251,"post_id":15315403,"comment_id":97158695,"content_license":"CC BY-SA 4.0","body":"@ChristianHujer He probably means <code>buffers</code> instead of <code>lines</code>. UTF-8 codepoints/characters can be multi-byte."},{"owner":{"reputation":13800,"user_id":3554264,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/TbLcc.jpg?s=128&g=1","display_name":"Christian Hujer","link":"https://stackoverflow.com/users/3554264/christian-hujer"},"edited":false,"score":0,"creation_date":1552982863,"post_id":15315403,"comment_id":97205473,"content_license":"CC BY-SA 4.0","body":"Oh yes, they can, and most of them are, multi-byte in UTF-8. Only US-ASCII-7 is not multi-byte in UTF-8. If it&#39;s buffers, as in the code, it makes sense. Just not with lines."}],"owner":{"reputation":3314,"user_id":903998,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1","display_name":"Victor","link":"https://stackoverflow.com/users/903998/victor"},"comment_count":6,"is_accepted":false,"score":5,"last_activity_date":1546684688,"last_edit_date":1546684688,"creation_date":1362860029,"answer_id":15315403,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Well, you can program it for yourself... It's not complicated...</p>\n\n<pre><code>String Inputstream2String (InputStream is) throws IOException\n    {\n        final int PKG_SIZE = 1024;\n        byte[] data = new byte [PKG_SIZE];\n        StringBuilder buffer = new StringBuilder(PKG_SIZE * 10);\n        int size;\n\n        size = is.read(data, 0, data.length);\n        while (size &gt; 0)\n        {\n            String str = new String(data, 0, size);\n            buffer.append(str);\n            size = is.read(data, 0, data.length);\n        }\n        return buffer.toString();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2987,"user_id":821436,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/edcb51e9ac2b871608bb11cdb7bd3ddd?s=128&d=identicon&r=PG&f=1","display_name":"Martin Schr&#246;der","link":"https://stackoverflow.com/users/821436/martin-schr%c3%b6der"},"edited":false,"score":0,"creation_date":1368631412,"post_id":16487716,"comment_id":23806798,"content_license":"CC BY-SA 3.0","body":"See the commet by ChristofferHammarstr&#246;m in the answer by HarryLime."},{"owner":{"reputation":1,"user_id":2370932,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a30d1cf5f308365d64e8bae3e69f1ec9?s=128&d=identicon&r=PG","display_name":"FK386","link":"https://stackoverflow.com/users/2370932/fk386"},"reply_to_user":{"reputation":2987,"user_id":821436,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/edcb51e9ac2b871608bb11cdb7bd3ddd?s=128&d=identicon&r=PG&f=1","display_name":"Martin Schr&#246;der","link":"https://stackoverflow.com/users/821436/martin-schr%c3%b6der"},"edited":false,"score":0,"creation_date":1485533166,"post_id":16487716,"comment_id":70978697,"content_license":"CC BY-SA 3.0","body":"There is nothing in the question that would remotely suggest to which charset to convert to or that the solution should be immune to any charset."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1546684719,"post_id":16487716,"comment_id":94936722,"content_license":"CC BY-SA 4.0","body":"An explanation would be in order."}],"owner":{"reputation":1,"user_id":2370932,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a30d1cf5f308365d64e8bae3e69f1ec9?s=128&d=identicon&r=PG","display_name":"FK386","link":"https://stackoverflow.com/users/2370932/fk386"},"comment_count":3,"is_accepted":false,"score":-3,"last_activity_date":1368206715,"creation_date":1368206715,"answer_id":16487716,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<pre><code>  InputStream IS=new URL(\"http://www.petrol.si/api/gas_prices.json\").openStream();   \n\n  ByteArrayOutputStream BAOS=new ByteArrayOutputStream();\n  IOUtils.copy(IS, BAOS);\n  String d= new String(BAOS.toByteArray(),\"UTF-8\");           \n\nSystem.out.println(d);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2294,"user_id":1851302,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/IwbKa.jpg?s=128&g=1","display_name":"KNU","link":"https://stackoverflow.com/users/1851302/knu"},"edited":false,"score":0,"creation_date":1396870466,"post_id":16839350,"comment_id":34967643,"content_license":"CC BY-SA 3.0","body":"will it work if last 2 lines are inserted in <code>do-while</code> loop?"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1487895005,"post_id":16839350,"comment_id":72002582,"content_license":"CC BY-SA 3.0","body":"There is nothing in the question about lines."}],"owner":{"reputation":69,"user_id":2435085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c82e330993bd5e8529ac6f13eaed032?s=128&d=identicon&r=PG","display_name":"Omkar Khot","link":"https://stackoverflow.com/users/2435085/omkar-khot"},"comment_count":2,"is_accepted":false,"score":2,"last_activity_date":1450257870,"last_edit_date":1450257870,"creation_date":1369925544,"answer_id":16839350,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<pre><code>InputStreamReader i = new InputStreamReader(s);\nBufferedReader str = new BufferedReader(i);\nString msg = str.readLine();\nSystem.out.println(msg);\n</code></pre>\n\n<p>Here s is your <code>InputStream</code> object which will get convert into <code>String</code> </p>\n"},{"owner":{"reputation":1503,"user_id":428594,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0a6486ff56dcfe546eb23d7bba908aa2?s=128&d=identicon&r=PG","display_name":"voidmain","link":"https://stackoverflow.com/users/428594/voidmain"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1386265987,"creation_date":1386265987,"answer_id":20407168,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>JDK 7/8 answer that closes the stream and still throws an IOException:</p>\n\n<pre><code>StringBuilder build = new StringBuilder();\nbyte[] buf = new byte[1024];\nint length;\ntry (InputStream is = getInputStream()) {\n  while ((length = is.read(buf)) != -1) {\n    build.append(new String(buf, 0, length));\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":11877,"user_id":1121249,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/LkDcL.png?s=128&g=1","display_name":"rkosegi","link":"https://stackoverflow.com/users/1121249/rkosegi"},"edited":false,"score":1,"creation_date":1538594037,"post_id":21163930,"comment_id":92201575,"content_license":"CC BY-SA 4.0","body":"What is difference between first 2 methods?"}],"owner":{"reputation":3935,"user_id":2217011,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/tqsPN.jpg?s=128&g=1","display_name":"Rys","link":"https://stackoverflow.com/users/2217011/rys"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1546685462,"last_edit_date":1546685462,"creation_date":1389881025,"answer_id":21163930,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>You can use Apache Commons.</p>\n\n<p>In the IOUtils you can find the toString method with three helpful implementations.</p>\n\n<pre><code>public static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input, String encoding)\n            throws IOException {\n        return toString(input, Charsets.toCharset(encoding));\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":10069,"user_id":2470524,"user_type":"registered","accept_rate":34,"profile_image":"https://www.gravatar.com/avatar/30572a95a69e05b8c921c1ac6672cb63?s=128&d=identicon&r=PG","display_name":"Fred","link":"https://stackoverflow.com/users/2470524/fred"},"edited":false,"score":2,"creation_date":1392909874,"post_id":21619906,"comment_id":33186444,"content_license":"CC BY-SA 3.0","body":"String concatenation in a loop with the <code>+=</code> operator is not a good idea. It is better to use a <code>StringBuilder</code> or a <code>StringBuffer</code>."}],"owner":{"reputation":5519,"user_id":2534090,"user_type":"registered","accept_rate":34,"profile_image":"https://i.stack.imgur.com/DeBhf.png?s=128&g=1","display_name":"JavaTechnical","link":"https://stackoverflow.com/users/2534090/javatechnical"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1450257972,"last_edit_date":1450257972,"creation_date":1391750231,"answer_id":21619906,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Try these 4 statements..</p>\n\n<p>As per the point recalled by Fred, it is not recommended to append a <code>String</code> with <code>+=</code> operator since every time a new <code>char</code> is appended to the existing <code>String</code> creating a new <code>String</code> object again and assigning its address to <code>st</code> while the old <code>st</code> object becomes garbage.</p>\n\n<pre><code>public String convertStreamToString(InputStream is)\n{\n    int k;\n    StringBuffer sb=new StringBuffer();\n    while((k=fin.read()) != -1)\n    {\n        sb.append((char)k);\n    }\n    return sb.toString();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Not recommended, but this is also a way</strong></p>\n\n<pre><code>public String convertStreamToString(InputStream is) { \n    int k;\n    String st=\"\";\n    while((k=is.read()) != -1)\n    {\n        st+=(char)k;\n    }\n    return st;\n}\n</code></pre>\n"},{"owner":{"reputation":10069,"user_id":2470524,"user_type":"registered","accept_rate":34,"profile_image":"https://www.gravatar.com/avatar/30572a95a69e05b8c921c1ac6672cb63?s=128&d=identicon&r=PG","display_name":"Fred","link":"https://stackoverflow.com/users/2470524/fred"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1392910139,"creation_date":1392910139,"answer_id":21912248,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>This snippet was found in \\sdk\\samples\\android-19\\connectivity\\NetworkConnect\\NetworkConnectSample\\src\\main\\java\\com\\example\\android\\networkconnect\\MainActivity.java which is licensed under Apache License, Version 2.0 and written by Google.</p>\n\n<pre><code>/** Reads an InputStream and converts it to a String.\n * @param stream InputStream containing HTML from targeted site.\n * @param len Length of string that this method returns.\n * @return String concatenated according to len parameter.\n * @throws java.io.IOException\n * @throws java.io.UnsupportedEncodingException\n */\nprivate String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {\n    Reader reader = null;\n    reader = new InputStreamReader(stream, \"UTF-8\");\n    char[] buffer = new char[len];\n    reader.read(buffer);\n    return new String(buffer);\n}\n</code></pre>\n"},{"owner":{"reputation":5075,"user_id":1055284,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/e1kcy.jpg?s=128&g=1","display_name":"Ben Barkay","link":"https://stackoverflow.com/users/1055284/ben-barkay"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1392918378,"last_edit_date":1392918378,"creation_date":1392917078,"answer_id":21915153,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>I have written a class that does just that, so I figured I'd share it with everyone. Sometimes you don't want to add Apache Commons just for one thing, and want something dumber than Scanner that doesn't examine the content.</p>\n\n<p>Usage is as follows</p>\n\n<pre><code>// Read from InputStream\nString data = new ReaderSink(inputStream, Charset.forName(\"UTF-8\")).drain();\n\n// Read from File\ndata = new ReaderSink(file, Charset.forName(\"UTF-8\")).drain();\n\n// Drain input stream to console\nnew ReaderSink(inputStream, Charset.forName(\"UTF-8\")).drainTo(System.out);\n</code></pre>\n\n<p>Here is the code for ReaderSink:</p>\n\n<pre><code>import java.io.*;\nimport java.nio.charset.Charset;\n\n/**\n * A simple sink class that drains a {@link Reader} to a {@link String} or\n * to a {@link Writer}.\n *\n * @author Ben Barkay\n * @version 2/20/2014\n */\npublic class ReaderSink {\n    /**\n     * The default buffer size to use if no buffer size was specified.\n     */\n    public static final int DEFAULT_BUFFER_SIZE = 1024;\n\n    /**\n     * The {@link Reader} that will be drained.\n     */\n    private final Reader in;\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified file and charset.\n     * @param file      The file to read from.\n     * @param charset   The charset to use.\n     * @throws FileNotFoundException    If the file was not found on the filesystem.\n     */\n    public ReaderSink(File file, Charset charset) throws FileNotFoundException {\n        this(new FileInputStream(file), charset);\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link InputStream}.\n     * @param in        The {@link InputStream} to drain.\n     * @param charset   The charset to use.\n     */\n    public ReaderSink(InputStream in, Charset charset) {\n        this(new InputStreamReader(in, charset));\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link Reader}.\n     * @param in    The reader to drain.\n     */\n    public ReaderSink(Reader in) {\n        this.in = in;\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain() throws IOException {\n        return drain(DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information.\n     * @param bufferSize    The size of the buffer to use when reading.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain(int bufferSize) throws IOException {\n        StringWriter stringWriter = new StringWriter();\n        drainTo(stringWriter, bufferSize);\n        return stringWriter.toString();\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @param out   The {@link Writer} to write to.\n     */\n    public void drainTo(Writer out) throws IOException {\n        drainTo(out, DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}.\n     * @param out           The {@link Writer} to write to.\n     * @param bufferSize    The size of the buffer to use when reader.\n     */\n    public void drainTo(Writer out, int bufferSize) throws IOException {\n        char[] buffer = new char[bufferSize];\n        int read;\n        while ((read = in.read(buffer)) &gt; -1) {\n            out.write(buffer, 0, read);\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2958,"user_id":978136,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/b677c7557817a1708d4f6e3d89afbac9?s=128&d=identicon&r=PG&f=1","display_name":"laksys","link":"https://stackoverflow.com/users/978136/laksys"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1450257636,"last_edit_date":1450257636,"creation_date":1397039872,"answer_id":22960005,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Here is the complete method for converting <code>InputStream</code> into <code>String</code> without using any third party library. Use <code>StringBuilder</code> for single threaded environment otherwise use <code>StringBuffer</code>.  </p>\n\n<pre><code>public static String getString( InputStream is) throws IOException {\n    int ch;\n    StringBuilder sb = new StringBuilder();\n    while((ch = is.read()) != -1)\n        sb.append((char)ch);\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":25692,"user_id":305973,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/cd49db0b676767ea4358b1047c4cddd2?s=128&d=identicon&r=PG","display_name":"robinst","link":"https://stackoverflow.com/users/305973/robinst"},"edited":false,"score":4,"creation_date":1407995511,"post_id":23615823,"comment_id":39433231,"content_license":"CC BY-SA 3.0","body":"-1. Just because something is available doesn&#39;t mean it should be used. When you switch the logging provider, you&#39;re going to have to replace this. Also, it looks like it is internal and shouldn&#39;t really be used outside of log4j."}],"owner":{"reputation":3695,"user_id":262379,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/b8bcd362d67c89dbb8dc7b0418109597?s=128&d=identicon&r=PG","display_name":"Dinis Cruz","link":"https://stackoverflow.com/users/262379/dinis-cruz"},"comment_count":1,"is_accepted":false,"score":-1,"last_activity_date":1399917879,"creation_date":1399917879,"answer_id":23615823,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>I had log4j available, so I was able to use the org.apache.log4j.lf5.util.StreamUtils.getBytes to get the bytes, which I was able to convert into a string using the String ctor</p>\n\n<pre><code>String result = new String(StreamUtils.getBytes(inputStream));\n</code></pre>\n"},{"owner":{"reputation":11423,"user_id":980442,"user_type":"registered","accept_rate":25,"profile_image":"https://i.stack.imgur.com/O6GeW.jpg?s=128&g=1","display_name":"Daniel De Le&#243;n","link":"https://stackoverflow.com/users/980442/daniel-de-le%c3%b3n"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1561010248,"last_edit_date":1561010248,"creation_date":1402213590,"answer_id":24104048,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>This one is nice because:</p>\n\n<ul>\n<li>It safely handles the Charset.</li>\n<li>You control the read buffer size.</li>\n<li>You can provision the length of the builder and it doesn't have to be an exact value.</li>\n<li>Is free from library dependencies.</li>\n<li>Is for Java 7 or higher.</li>\n</ul>\n\n<p><em>How to do it?</em></p>\n\n<pre><code>public static String convertStreamToString(InputStream is) throws IOException {\n   StringBuilder sb = new StringBuilder(2048); // Define a size if you have an idea of it.\n   char[] read = new char[128]; // Your buffer size.\n   try (InputStreamReader ir = new InputStreamReader(is, StandardCharsets.UTF_8)) {\n     for (int i; -1 != (i = ir.read(read)); sb.append(read, 0, i));\n   }\n   return sb.toString();\n}\n</code></pre>\n\n<p>For JDK 9</p>\n\n<pre><code>public static String inputStreamString(InputStream inputStream) throws IOException {\n    try (inputStream) {\n        return new String(inputStream.readAllBytes(), StandardCharsets.UTF_8);\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":3695,"user_id":3040627,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/9e7231733dbc07f40f96db5a587ee6ca?s=128&d=identicon&r=PG","display_name":"Simon Kuang","link":"https://stackoverflow.com/users/3040627/simon-kuang"},"comment_count":0,"is_accepted":false,"score":41,"last_activity_date":1436958234,"last_edit_date":1436958234,"creation_date":1405619882,"answer_id":24810414,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>I'd use some Java 8 tricks.</p>\n\n<pre><code>public static String streamToString(final InputStream inputStream) throws Exception {\n    // buffering optional\n    try\n    (\n        final BufferedReader br\n           = new BufferedReader(new InputStreamReader(inputStream))\n    ) {\n        // parallel optional\n        return br.lines().parallel().collect(Collectors.joining(\"\\n\"));\n    } catch (final IOException e) {\n        throw new RuntimeException(e);\n        // whatever.\n    }\n}\n</code></pre>\n\n<p>Essentially the same as some other answers except more succinct.</p>\n"},{"owner":{"reputation":4898,"user_id":2420519,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/0d30c42d5ee2da9d89a8c146000a7dc6?s=128&d=identicon&r=PG","display_name":"Hai Zhang","link":"https://stackoverflow.com/users/2420519/hai-zhang"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1444451848,"last_edit_date":1444451848,"creation_date":1407059276,"answer_id":25103484,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>This is an answer adapted from <code>org.apache.commons.io.IOUtils</code> <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/2.4/org/apache/commons/io/IOUtils.java\" rel=\"noreferrer\">source code</a>, for those who want to have the apache implementation but do not want the whole library.</p>\n\n<pre><code>private static final int BUFFER_SIZE = 4 * 1024;\n\npublic static String inputStreamToString(InputStream inputStream, String charsetName)\n        throws IOException {\n    StringBuilder builder = new StringBuilder();\n    InputStreamReader reader = new InputStreamReader(inputStream, charsetName);\n    char[] buffer = new char[BUFFER_SIZE];\n    int length;\n    while ((length = reader.read(buffer)) != -1) {\n        builder.append(buffer, 0, length);\n    }\n    return builder.toString();\n}\n</code></pre>\n"},{"owner":{"reputation":4774,"user_id":3129572,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YjXYb.jpg?s=128&g=1","display_name":"Vaishali Sutariya","link":"https://stackoverflow.com/users/3129572/vaishali-sutariya"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1453994702,"last_edit_date":1453994702,"creation_date":1408969846,"answer_id":25486003,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<pre><code>InputStream is = Context.openFileInput(someFileName); // whatever format you have\n\nByteArrayOutputStream bos = new ByteArrayOutputStream();\n\nbyte[] b = new byte[8192];\nfor (int bytesRead; (bytesRead = is.read(b)) != -1;) {\n    bos.write(b, 0, bytesRead);\n}\n\nString output = bos.toString(someEncoding);\n</code></pre>\n"},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1410423745,"creation_date":1410423745,"answer_id":25782577,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>The following doesn't address the original question, but rather some of the responses.</p>\n\n<p>Several responses suggest loops of the form</p>\n\n<pre><code>String line = null;\nwhile((line = reader.readLine()) != null) {\n  // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for(String line = reader.readLine(); line != null; line = reader.readLine()) {\n    // ...\n}\n</code></pre>\n\n<p>The first form pollutes the namespace of the enclosing scope by declaring a variable \"read\" in the enclosing scope that will not be used for anything outside the for loop. The second form duplicates the readline() call.</p>\n\n<p>Here is a much cleaner way of writing this sort of loop in Java. It turns out that the first clause in a for-loop doesn't require an actual initializer value. This keeps the scope of the variable \"line\" to within the body of the for loop. Much more elegant! I haven't seen anybody using this form anywhere (I randomly discovered it one day years ago), but I use it all the time.</p>\n\n<pre><code>for (String line; (line = reader.readLine()) != null; ) {\n    //...\n}\n</code></pre>\n"},{"owner":{"reputation":7450,"user_id":159679,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/450f7e984216da4c72cd521fcbaf8316?s=128&d=identicon&r=PG","display_name":"Alex","link":"https://stackoverflow.com/users/159679/alex"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1423012344,"creation_date":1423012344,"answer_id":28311797,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Kotlin users simply do:</p>\n\n<pre><code>println(InputStreamReader(is).readText())\n</code></pre>\n\n<p>whereas </p>\n\n<pre><code>readText()\n</code></pre>\n\n<p>is Kotlin standard libraryâs built-in extension method.</p>\n"},{"owner":{"reputation":11023,"user_id":639687,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/367828dd86c0336d80700d4d4086cd33?s=128&d=identicon&r=PG","display_name":"czerny","link":"https://stackoverflow.com/users/639687/czerny"},"comment_count":0,"is_accepted":false,"score":34,"last_activity_date":1424976625,"last_edit_date":1495542893,"creation_date":1424975992,"answer_id":28750240,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Pure Java solution using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\">Stream</a>s, works since Java 8.</p>\n\n\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.stream.Collectors;\n\n// ...\npublic static String inputStreamToString(InputStream is) throws IOException {\n    try (BufferedReader br = new BufferedReader(new InputStreamReader(is))) {\n        return br.lines().collect(Collectors.joining(System.lineSeparator()));\n    }\n}\n</code></pre>\n\n<p>As mentioned by Christoffer HammarstrÃ¶m below <a href=\"https://stackoverflow.com/a/309448/639687\">other answer</a> it is safer to explicitly specify the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html\" rel=\"noreferrer\">Charset</a>. I.e. The InputStreamReader constructor can be changes as follows:</p>\n\n\n\n<pre><code>new InputStreamReader(is, Charset.forName(\"UTF-8\"))\n</code></pre>\n"},{"owner":{"reputation":20767,"user_id":603516,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG","display_name":"Vadzim","link":"https://stackoverflow.com/users/603516/vadzim"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1436957452,"last_edit_date":1436957452,"creation_date":1436448056,"answer_id":31318764,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p><a href=\"https://code.google.com/p/guava-libraries/wiki/IOExplained\" rel=\"nofollow\">Guava provides</a> much shorter efficient autoclosing solution in case when input stream comes from classpath resource (which seems to be popular task):</p>\n\n<pre><code>byte[] bytes = Resources.toByteArray(classLoader.getResource(path));\n</code></pre>\n\n<p>or </p>\n\n<pre><code>String text = Resources.toString(classLoader.getResource(path), StandardCharsets.UTF_8);\n</code></pre>\n\n<p>There is also general concept of <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/ByteSource.html\" rel=\"nofollow\">ByteSource</a> and <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/CharSource.html\" rel=\"nofollow\">CharSource</a> that gently take care of both opening and closing the stream.</p>\n\n<p>So, for example, instead of explicitly opening a small file to read its contents:</p>\n\n<pre><code>String content = Files.asCharSource(new File(\"robots.txt\"), StandardCharsets.UTF_8).read();\nbyte[] data = Files.asByteSource(new File(\"favicon.ico\")).read();\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>String content = Files.toString(new File(\"robots.txt\"), StandardCharsets.UTF_8);\nbyte[] data = Files.toByteArray(new File(\"favicon.ico\"));\n</code></pre>\n"},{"owner":{"reputation":571,"user_id":1684528,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/08357a9fcfa46b6758697e0be9bcc2d8?s=128&d=identicon&r=PG","display_name":"Christian R&#228;del","link":"https://stackoverflow.com/users/1684528/christian-r%c3%a4del"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1441192767,"creation_date":1441192767,"answer_id":32351730,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Here's my <strong>Java 8</strong> based solution, which uses the <em>new Stream API</em> to collect all lines from an <code>InputStream</code>:</p>\n\n<pre><code>public static String toString(InputStream inputStream) {\n    BufferedReader reader = new BufferedReader(\n        new InputStreamReader(inputStream));\n    return reader.lines().collect(Collectors.joining(\n        System.getProperty(\"line.separator\")));\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4328,"user_id":1108305,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=128&d=identicon&r=PG","display_name":"M. Justin","link":"https://stackoverflow.com/users/1108305/m-justin"},"edited":false,"score":0,"creation_date":1605773156,"post_id":32352386,"comment_id":114755958,"content_license":"CC BY-SA 4.0","body":"I benchmarked this <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java?page=2&amp;tab=oldest#comment114755893_35446009\">here</a>, and found this to be the fastest solution on my machine, running in about 60% the time of the next-fastest solution benchmarked."}],"owner":{"reputation":85467,"user_id":4856258,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/d9ea19ceff450eb6e272da697ced62dc?s=128&d=identicon&r=PG&f=1","display_name":"Tagir Valeev","link":"https://stackoverflow.com/users/4856258/tagir-valeev"},"comment_count":1,"is_accepted":false,"score":112,"last_activity_date":1605739835,"last_edit_date":1605739835,"creation_date":1441194645,"answer_id":32352386,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>For completeness here is <strong>Java 9</strong> solution:</p>\n<pre><code>public static String toString(InputStream input) throws IOException {\n    return new String(input.readAllBytes(), StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>This uses the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--\" rel=\"noreferrer\"><code>readAllBytes</code></a> method which was added to Java 9.</p>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1547645619,"post_id":33748600,"comment_id":95261948,"content_license":"CC BY-SA 4.0","body":"It is not just a bad choice.  It will fail with a <code>StackOverflowError</code> if the input stream contains more than a few hundred characters."},{"owner":{"reputation":4207,"user_id":8200485,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/ONjhQ.jpg?s=128&g=1","display_name":"HyperNeutrino","link":"https://stackoverflow.com/users/8200485/hyperneutrino"},"reply_to_user":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1547656232,"post_id":33748600,"comment_id":95268568,"content_license":"CC BY-SA 4.0","body":"@StephenC That constitutes a bad choice in my opinion"},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":3,"creation_date":1547677242,"post_id":33748600,"comment_id":95278499,"content_license":"CC BY-SA 4.0","body":"I agree.  It is a &quot;bad choice&quot; to use a method that doesn&#39;t work (except in trivial cases).   But not <b>just</b> a &quot;bad choice&quot;.   Anyhow, I am down voting because this is wrong ... not because it is a &quot;bad choice&quot;.   And also because you don&#39;t explain <i>why</i> this approach should not be used."},{"owner":{"reputation":4207,"user_id":8200485,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/ONjhQ.jpg?s=128&g=1","display_name":"HyperNeutrino","link":"https://stackoverflow.com/users/8200485/hyperneutrino"},"reply_to_user":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1547740020,"post_id":33748600,"comment_id":95303638,"content_license":"CC BY-SA 4.0","body":"@StephenC I don&#39;t fundamentally agree with you, but thank you for at least leaving a comment instead of just fly-by downvoting. Recursion overflow issues are system limitations, and this method is not wrong, it just causes memory issues faster (albeit MUCH faster) than other methods."},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":1,"creation_date":1547764252,"post_id":33748600,"comment_id":95314920,"content_license":"CC BY-SA 4.0","body":"For the Java language and implementations, the absence of tail-call optimization is a deliberate design choice; see <a href=\"https://softwareengineering.stackexchange.com/questions/272061/why-doesnt-java-have-optimization-for-tail-recursion-at-all\" title=\"why doesnt java have optimization for tail recursion at all\">softwareengineering.stackexchange.com/questions/272061/&hellip;</a>.  It should be viewed as inherent to Java.  Certainly it is common to all extant mainstream Java implementations ... including Android."},{"owner":{"reputation":2877,"user_id":4759176,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/0U1e5.jpg?s=128&g=1","display_name":"parsecer","link":"https://stackoverflow.com/users/4759176/parsecer"},"edited":false,"score":0,"creation_date":1557790109,"post_id":33748600,"comment_id":98874872,"content_license":"CC BY-SA 4.0","body":"I liked your method, it&#39;s highly unusual. However, I don&#39;t get why it would &quot;cause memory issues much faster&quot;?"},{"owner":{"reputation":4207,"user_id":8200485,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/ONjhQ.jpg?s=128&g=1","display_name":"HyperNeutrino","link":"https://stackoverflow.com/users/8200485/hyperneutrino"},"reply_to_user":{"reputation":2877,"user_id":4759176,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/0U1e5.jpg?s=128&g=1","display_name":"parsecer","link":"https://stackoverflow.com/users/4759176/parsecer"},"edited":false,"score":1,"creation_date":1557858027,"post_id":33748600,"comment_id":98903831,"content_license":"CC BY-SA 4.0","body":"@parsecer because instead of running out when the RAM can&#39;t handle the memory being used, it dies when the stack can&#39;t handle more stack calls, which is a lot smaller of a number on any reasonable system."}],"owner":{"reputation":4207,"user_id":8200485,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/ONjhQ.jpg?s=128&g=1","display_name":"HyperNeutrino","link":"https://stackoverflow.com/users/8200485/hyperneutrino"},"comment_count":7,"is_accepted":false,"score":-1,"last_activity_date":1547740036,"last_edit_date":1547740036,"creation_date":1447730582,"answer_id":33748600,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Note: This probably isn't a good idea. This method uses recursion and thus will hit a <code>StackOverflowError</code> very quickly:</p>\n\n<pre><code>public String read (InputStream is) {\n    byte next = is.read();\n    return next == -1 ? \"\" : next + read(is); // Recursive part: reads next byte recursively\n}\n</code></pre>\n\n<p>Please don't downvote this just because it's a bad choice to use; this was mostly creative :)</p>\n"},{"comments":[{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"edited":false,"score":0,"creation_date":1522940222,"post_id":34451847,"comment_id":86361934,"content_license":"CC BY-SA 3.0","body":"Note that this solution is the most inefficient based on my <a href=\"https://stackoverflow.com/a/48775964/1129332\">benchmark results</a>"}],"owner":{"reputation":31448,"user_id":1063716,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/594dfa12a4f922652c182c46b6bc2de3?s=128&d=identicon&r=PG","display_name":"Steve Chambers","link":"https://stackoverflow.com/users/1063716/steve-chambers"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1519592021,"last_edit_date":1519592021,"creation_date":1450955333,"answer_id":34451847,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Based on the second part of <a href=\"https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string?page=1&amp;tab=votes#309448\">the accepted Apache Commons answer</a> but with the small gap filled in for always closing the stream:</p>\n\n<pre><code>    String theString;\n    try {\n        theString = IOUtils.toString(inputStream, encoding);\n    } finally {\n        IOUtils.closeQuietly(inputStream);\n    }\n</code></pre>\n"},{"owner":{"reputation":801,"user_id":4515400,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/JjvHb.png?s=128&g=1","display_name":"libnull-dev","link":"https://stackoverflow.com/users/4515400/libnull-dev"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1529480249,"last_edit_date":1529480249,"creation_date":1453386518,"answer_id":34926427,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>In terms of <code>reduce</code>, and <code>concat</code> it can be expressed in Java 8 as:</p>\n\n<pre><code>String fromFile = new BufferedReader(new   \nInputStreamReader(inputStream)).lines().reduce(String::concat).get();\n</code></pre>\n"},{"owner":{"reputation":8724,"user_id":2428802,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4d58ba93ec223d23b2fd6216aa52c5a6?s=128&d=identicon&r=PG","display_name":"jmehrens","link":"https://stackoverflow.com/users/2428802/jmehrens"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1511880448,"last_edit_date":1511880448,"creation_date":1453996521,"answer_id":35066091,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Use the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#transferTo-java.io.OutputStream-\" rel=\"noreferrer\">java.io.InputStream.transferTo(OutputStream)</a> supported in Java 9 and the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/ByteArrayOutputStream.html#toString-java.lang.String-\" rel=\"noreferrer\">ByteArrayOutputStream.toString(String)</a> which takes the charset name:</p>\n\n<pre><code>public static String gobble(InputStream in, String charsetName) throws IOException {\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\n    in.transferTo(bos);\n    return bos.toString(charsetName);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":31448,"user_id":1063716,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/594dfa12a4f922652c182c46b6bc2de3?s=128&d=identicon&r=PG","display_name":"Steve Chambers","link":"https://stackoverflow.com/users/1063716/steve-chambers"},"edited":false,"score":0,"creation_date":1596280583,"post_id":35446009,"comment_id":111765491,"content_license":"CC BY-SA 4.0","body":"Nice work. Could be useful to provide a tl;dr summary at the bottom, i.e. throwing out the solutions that have problems with line breaks / unicode and then (out of those that remain) saying which is fastest with or without external libraries."},{"owner":{"reputation":1007,"user_id":4374150,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/ODuVG.jpg?s=128&g=1","display_name":"Paula Livingstone","link":"https://stackoverflow.com/users/4374150/paula-livingstone"},"edited":false,"score":1,"creation_date":1597869436,"post_id":35446009,"comment_id":112277376,"content_license":"CC BY-SA 4.0","body":"What is the reset(); for in 11?"},{"owner":{"reputation":237,"user_id":9925065,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7a6b5dc51d4ea45c3edee30003d142ee?s=128&d=identicon&r=PG&f=1","display_name":"Gigino","link":"https://stackoverflow.com/users/9925065/gigino"},"edited":false,"score":14,"creation_date":1598425177,"post_id":35446009,"comment_id":112450928,"content_license":"CC BY-SA 4.0","body":"It seems this answer is incomplete"},{"owner":{"reputation":179,"user_id":2410470,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1f22c53e7cea40477dfda51af07da3b4?s=128&d=identicon&r=PG&f=1","display_name":"bbarke","link":"https://stackoverflow.com/users/2410470/bbarke"},"edited":false,"score":2,"creation_date":1602021882,"post_id":35446009,"comment_id":113587090,"content_license":"CC BY-SA 4.0","body":"I need to bookmark this answer, I come here way too often"},{"owner":{"reputation":4328,"user_id":1108305,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=128&d=identicon&r=PG","display_name":"M. Justin","link":"https://stackoverflow.com/users/1108305/m-justin"},"edited":false,"score":0,"creation_date":1605773006,"post_id":35446009,"comment_id":114755893,"content_license":"CC BY-SA 4.0","body":"I was curious about the Java 9 <code>InputStream.transferTo</code> and Java 10 <code>Reader.transferTo</code> solutions that were added since this answer was posted, so I checked out the linked code and added benchmarks for them.  I only tested the &quot;big string&quot; benchmarks.  <code>InputStream.transferTo</code> was the fastest of all the solutions tested, running in 60% of the time as <code>test8</code> did on my machine.  <code>Reader.transferTo</code> was slower than <code>test8</code>, but faster than all the other tests.  That said, it ran in 95% of the time as <code>test1</code>, so it&#39;s not a significant improvement."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":1,"creation_date":1614478208,"post_id":35446009,"comment_id":117397309,"content_license":"CC BY-SA 4.0","body":"I converted all the <code>while</code> loops to <code>for</code> loops in an edit to this post, to avoid polluting the namespace with a variable that isn&#39;t used outside the loop. It&#39;s a neat trick that works in most Java reader/writer loops."}],"owner":{"reputation":48686,"user_id":4318868,"user_type":"registered","profile_image":"https://i.stack.imgur.com/p6Tpv.jpg?s=128&g=1","display_name":"Slava Vedenin","link":"https://stackoverflow.com/users/4318868/slava-vedenin"},"comment_count":6,"is_accepted":false,"score":2779,"last_activity_date":1614478040,"last_edit_date":1614478040,"creation_date":1455670728,"answer_id":35446009,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Summarize other answers I found 11 main ways to do this (see below). And I wrote some performance tests (see results below):</p>\n<p><strong>Ways to convert an InputStream to a String:</strong></p>\n<ol>\n<li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p>\n<pre><code> String result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\n</code></pre>\n</li>\n<li><p>Using <code>CharStreams</code> (Guava)</p>\n<pre><code> String result = CharStreams.toString(new InputStreamReader(\n       inputStream, Charsets.UTF_8));\n</code></pre>\n</li>\n<li><p>Using <code>Scanner</code> (JDK)</p>\n<pre><code> Scanner s = new Scanner(inputStream).useDelimiter(&quot;\\\\A&quot;);\n String result = s.hasNext() ? s.next() : &quot;&quot;;\n</code></pre>\n</li>\n<li><p>Using <strong>Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n   .lines().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <strong>parallel Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n    .lines().parallel().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <code>InputStreamReader</code> and <code>StringBuilder</code> (JDK)</p>\n<pre><code> int bufferSize = 1024;\n char[] buffer = new char[bufferSize];\n StringBuilder out = new StringBuilder();\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\n     out.append(buffer, 0, numRead);\n }\n return out.toString();\n</code></pre>\n</li>\n<li><p>Using <code>StringWriter</code> and <code>IOUtils.copy</code> (Apache Commons)</p>\n<pre><code> StringWriter writer = new StringWriter();\n IOUtils.copy(inputStream, writer, &quot;UTF-8&quot;);\n return writer.toString();\n</code></pre>\n</li>\n<li><p>Using <code>ByteArrayOutputStream</code> and <code>inputStream.read</code> (JDK)</p>\n<pre><code> ByteArrayOutputStream result = new ByteArrayOutputStream();\n byte[] buffer = new byte[1024];\n for (int length; (length = inputStream.read(buffer)) != -1; ) {\n     result.write(buffer, 0, length);\n }\n // StandardCharsets.UTF_8.name() &gt; JDK 7\n return result.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>BufferedReader</code> (JDK). <strong>Warning:</strong> This solution converts different line breaks (like <code>\\n\\r</code>) to <code>line.separator</code> system property (for example, in Windows to &quot;\\r\\n&quot;).</p>\n<pre><code> String newLine = System.getProperty(&quot;line.separator&quot;);\n BufferedReader reader = new BufferedReader(\n         new InputStreamReader(inputStream));\n StringBuilder result = new StringBuilder();\n for (String line; (line = reader.readLine()) != null; ) {\n     if (result.length() &gt; 0) {\n         result.append(newLine);\n     }\n     result.append(line);\n }\n return result.toString();\n</code></pre>\n</li>\n<li><p>Using <code>BufferedInputStream</code> and <code>ByteArrayOutputStream</code> (JDK)</p>\n<pre><code>BufferedInputStream bis = new BufferedInputStream(inputStream);\nByteArrayOutputStream buf = new ByteArrayOutputStream();\nfor (int result = bis.read(); result != -1; result = bis.read()) {\n    buf.write((byte) result);\n}\n// StandardCharsets.UTF_8.name() &gt; JDK 7\nreturn buf.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>inputStream.read()</code> and <code>StringBuilder</code> (JDK). <strong>Warning</strong>: This solution has problems with Unicode, for example with Russian text (works correctly only with non-Unicode text)</p>\n<pre><code>StringBuilder sb = new StringBuilder();\nfor (int ch; (ch = inputStream.read()) != -1; ) {\n    sb.append((char) ch);\n}\nreturn sb.toString();\n</code></pre>\n</li>\n</ol>\n<p><strong>Warning</strong>:</p>\n<ol>\n<li><p>Solutions 4, 5 and 9 convert different line breaks to one.</p>\n</li>\n<li><p>Solution 11 can't work correctly with Unicode text</p>\n</li>\n</ol>\n<p><strong>Performance tests</strong></p>\n<p>Performance tests for small <code>String</code> (length = 175), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertInputStreamToStringBenchmark.java\" rel=\"noreferrer\">github</a> (mode = Average Time, system = Linux, score 1,343 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>              Benchmark                         Mode  Cnt   Score   Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   1,343 Â± 0,028  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   6,980 Â± 0,404  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   7,437 Â± 0,735  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10   8,977 Â± 0,328  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10  10,613 Â± 0,599  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10  10,605 Â± 0,527  us/op\n 3. Scanner (JDK)                               avgt   10  12,083 Â± 0,293  us/op\n 2. CharStreams (guava)                         avgt   10  12,999 Â± 0,514  us/op\n 4. Stream Api (Java 8)                         avgt   10  15,811 Â± 0,605  us/op\n 9. BufferedReader (JDK)                        avgt   10  16,038 Â± 0,711  us/op\n 5. parallel Stream Api (Java 8)                avgt   10  21,544 Â± 0,583  us/op\n</code></pre>\n<p>Performance tests for big <code>String</code> (length = 50100), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertBigStringToInputStreamBenchmark.java\" rel=\"noreferrer\">github</a> (mode = Average Time, system = Linux, score 200,715 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>               Benchmark                        Mode  Cnt   Score        Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   200,715 Â±   18,103  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10   300,019 Â±    8,751  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   347,616 Â±  130,348  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10   352,791 Â±  105,337  us/op\n 2. CharStreams (guava)                         avgt   10   420,137 Â±   59,877  us/op\n 9. BufferedReader (JDK)                        avgt   10   632,028 Â±   17,002  us/op\n 5. parallel Stream Api (Java 8)                avgt   10   662,999 Â±   46,199  us/op\n 4. Stream Api (Java 8)                         avgt   10   701,269 Â±   82,296  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   740,837 Â±    5,613  us/op\n 3. Scanner (JDK)                               avgt   10   751,417 Â±   62,026  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10  2919,350 Â± 1101,942  us/op\n</code></pre>\n<p>Graphs (performance tests depending on Input Stream length in Windows 7 system)<br />\n<a href=\"https://i.stack.imgur.com/AYYhz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AYYhz.png\" alt=\"enter image description here\" /></a></p>\n<p>Performance test (Average Time) depending on Input Stream length in Windows 7 system:</p>\n<pre class=\"lang-none prettyprint-override\"><code> length  182    546     1092    3276    9828    29484   58968\n\n test8  0.38    0.938   1.868   4.448   13.412  36.459  72.708\n test4  2.362   3.609   5.573   12.769  40.74   81.415  159.864\n test5  3.881   5.075   6.904   14.123  50.258  129.937 166.162\n test9  2.237   3.493   5.422   11.977  45.98   89.336  177.39\n test6  1.261   2.12    4.38    10.698  31.821  86.106  186.636\n test7  1.601   2.391   3.646   8.367   38.196  110.221 211.016\n test1  1.529   2.381   3.527   8.411   40.551  105.16  212.573\n test3  3.035   3.934   8.606   20.858  61.571  118.744 235.428\n test2  3.136   6.238   10.508  33.48   43.532  118.044 239.481\n test10 1.593   4.736   7.527   20.557  59.856  162.907 323.147\n test11 3.913   11.506  23.26   68.644  207.591 600.444 1211.545\n</code></pre>\n"},{"owner":{"reputation":184,"user_id":5735806,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b4118fdf1e5976ea0da508441c4cfb02?s=128&d=identicon&r=PG&f=1","display_name":"Jitender Chahar","link":"https://stackoverflow.com/users/5735806/jitender-chahar"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1456766314,"creation_date":1456766314,"answer_id":35705517,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Method to convert inputStream to String</p>\n\n<pre><code>public static String getStringFromInputStream(InputStream inputStream) {\n\n    BufferedReader bufferedReader = null;\n    StringBuilder stringBuilder = new StringBuilder();\n    String line;\n\n    try {\n        bufferedReader = new BufferedReader(new InputStreamReader(\n                inputStream));\n        while ((line = bufferedReader.readLine()) != null) {\n            stringBuilder.append(line);\n        }\n    } catch (IOException e) {\n        logger.error(e.getMessage());\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException e) {\n                logger.error(e.getMessage());\n            }\n        }\n    }\n    return stringBuilder.toString();\n}\n</code></pre>\n"},{"owner":{"reputation":2295,"user_id":1586864,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/07995256aaaf615a1cb4bd0bd007ee24?s=128&d=identicon&r=PG","display_name":"Harsh","link":"https://stackoverflow.com/users/1586864/harsh"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1457590179,"last_edit_date":1457590179,"creation_date":1457589710,"answer_id":35908771,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<pre><code>InputStream  inputStream = null;\nBufferedReader bufferedReader = null;\ntry {\n    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n    String stringBuilder = new StringBuilder();\n    String content;\n    while((content = bufferedReader.readLine()) != null){\n        stringBuilder.append(content);\n    }\n    System.out.println(\"content of file::\" + stringBuilder.toString());\n}\ncatch (IOException e) {\n            e.printStackTrace();\n        }finally{           \n            if(bufferedReader != null){\n                try{\n                    bufferedReader.close();\n                }catch(IoException ex){\n                   ex.printStackTrace();\n            }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1547645235,"post_id":37452030,"comment_id":95261706,"content_license":"CC BY-SA 4.0","body":"This does not answer the Question."}],"owner":{"reputation":663,"user_id":625114,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0b8f20d9c0c852472b8a82abdf9abeea?s=128&d=identicon&r=PG","display_name":"Ravi","link":"https://stackoverflow.com/users/625114/ravi"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1546735270,"last_edit_date":1546735270,"creation_date":1464239269,"answer_id":37452030,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>Also you can get InputStream from a specified resource path:</p>\n\n<pre><code>public static InputStream getResourceAsStream(String path)\n{\n    InputStream myiInputStream = ClassName.class.getResourceAsStream(path);\n    if (null == myiInputStream)\n    {\n        mylogger.info(\"Can't find path = \", path);\n    }\n\n    return myiInputStream;\n}\n</code></pre>\n\n<p>To get InputStream from a specific path:</p>\n\n<pre><code>public static URL getResource(String path)\n{\n    URL myURL = ClassName.class.getResource(path);\n    if (null == myURL)\n    {\n        mylogger.info(\"Can't find resource path = \", path);\n    }\n    return myURL;\n}\n</code></pre>\n"},{"owner":{"reputation":10142,"user_id":285288,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/321b2437e25c1885cb0edbde62bbf530?s=128&d=identicon&r=PG","display_name":"James","link":"https://stackoverflow.com/users/285288/james"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1500632654,"last_edit_date":1500632654,"creation_date":1469825905,"answer_id":38667387,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>Another one, for all the Spring users:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport org.springframework.util.FileCopyUtils;\n\npublic String convertStreamToString(InputStream is) throws IOException { \n    return new String(FileCopyUtils.copyToByteArray(is), StandardCharsets.UTF_8);\n}\n</code></pre>\n\n<p>The utility methods in <code>org.springframework.util.StreamUtils</code> are similar to the ones in <code>FileCopyUtils</code>, but they leave the stream open when done.</p>\n"},{"owner":{"reputation":3460,"user_id":2194364,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/00330b200be5730c3499104448dc25a0?s=128&d=identicon&r=PG","display_name":"Raghu K Nair","link":"https://stackoverflow.com/users/2194364/raghu-k-nair"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1470773906,"creation_date":1470773906,"answer_id":38859690,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>The easiest way in JDK is with the following code snipplets. </p>\n\n<pre><code>String convertToString(InputStream in){\n    String resource = new Scanner(in).useDelimiter(\"\\\\Z\").next();\n    return resource;\n}\n</code></pre>\n"},{"owner":{"reputation":119,"user_id":550742,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2f3425a555dee011bae5d2327193f391?s=128&d=identicon&r=PG","display_name":"Hao Zheng","link":"https://stackoverflow.com/users/550742/hao-zheng"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1483940573,"creation_date":1483940573,"answer_id":41541671,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<pre><code>public String read(InputStream in) throws IOException {\n    try (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\n        return buffer.lines().collect(Collectors.joining(\"\\n\"));\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":14070,"user_id":378151,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/0e548cf2f32966f42bd0d1e07b4d8108?s=128&d=identicon&r=PG","display_name":"Snekse","link":"https://stackoverflow.com/users/378151/snekse"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1529480221,"last_edit_date":1529480221,"creation_date":1485459623,"answer_id":41881604,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html#getText()\" rel=\"nofollow noreferrer\">In Groovy</a></p>\n\n<pre><code>inputStream.getText()\n</code></pre>\n"},{"owner":{"reputation":518,"user_id":6926281,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/6ea83507ac9a5f267de268122e3150ea?s=128&d=identicon&r=PG&f=1","display_name":"Halfacht","link":"https://stackoverflow.com/users/6926281/halfacht"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1494416287,"last_edit_date":1495535499,"creation_date":1494416287,"answer_id":43891396,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p><em>Raghu K Nair</em> Was the only one using a scanner.\nThe code I use is a little different:</p>\n\n<pre><code>String convertToString(InputStream in){\n    Scanner scanner = new Scanner(in)\n    scanner.useDelimiter(\"\\\\A\");\n\n    boolean hasInput = scanner.hasNext();\n    if (hasInput) {\n        return scanner.next();\n    } else {\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>About Delimiters: <a href=\"https://stackoverflow.com/questions/28766377/how-do-i-use-a-delimiter-in-java-scanner\">How do I use a delimiter in Java Scanner?</a></p>\n"},{"owner":{"reputation":92649,"user_id":187141,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG","display_name":"yegor256","link":"https://stackoverflow.com/users/187141/yegor256"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1502046874,"last_edit_date":1502046874,"creation_date":1502042910,"answer_id":45535091,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>You can use <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>String text = new TextOf(inputStream).asString();\n</code></pre>\n\n<p>UTF-8 encoding is the default one. If you need another one:</p>\n\n<pre><code>String text = new TextOf(inputStream, \"UTF-16\").asString();\n</code></pre>\n"},{"owner":{"reputation":9327,"user_id":2735286,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1","display_name":"gil.fernandes","link":"https://stackoverflow.com/users/2735286/gil-fernandes"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1508579173,"creation_date":1508579173,"answer_id":46861979,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>This solution to this question is not the simplest, but since NIO streams and channels have not been mentioned, here goes a version which uses NIO channels and a ByteBuffer to convert a stream into a string.</p>\n\n<pre><code>public static String streamToStringChannel(InputStream in, String encoding, int bufSize) throws IOException {\n    ReadableByteChannel channel = Channels.newChannel(in);\n    ByteBuffer byteBuffer = ByteBuffer.allocate(bufSize);\n    ByteArrayOutputStream bout = new ByteArrayOutputStream();\n    WritableByteChannel outChannel = Channels.newChannel(bout);\n    while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n        byteBuffer.flip();  //make buffer ready for write\n        outChannel.write(byteBuffer);\n        byteBuffer.compact(); //make buffer ready for reading\n    }\n    channel.close();\n    outChannel.close();\n    return bout.toString(encoding);\n}\n</code></pre>\n\n<p>Here is an example how to use it:</p>\n\n<pre><code>try (InputStream in = new FileInputStream(\"/tmp/large_file.xml\")) {\n    String x = streamToStringChannel(in, \"UTF-8\", 1);\n    System.out.println(x);\n}\n</code></pre>\n\n<p>The performance of this method should be good for large files.</p>\n"},{"comments":[{"owner":{"reputation":99,"user_id":1788304,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9334afbe0d50b3e9996a07ee3dbe7e53?s=128&d=identicon&r=PG","display_name":"Dalibor","link":"https://stackoverflow.com/users/1788304/dalibor"},"edited":false,"score":0,"creation_date":1558044484,"post_id":48775964,"comment_id":98980827,"content_license":"CC BY-SA 4.0","body":"<a href=\"http://tutorials.jenkov.com/java-performance/jmh.html#why-are-java-microbenchmarks-hard\" rel=\"nofollow noreferrer\">Making benchmarks in Java is not easy</a> (especially because of JIT). After reading Benchmark source code, I&#39;m convinced that those values above are not precise and everyone should be careful by believing them."},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":99,"user_id":1788304,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9334afbe0d50b3e9996a07ee3dbe7e53?s=128&d=identicon&r=PG","display_name":"Dalibor","link":"https://stackoverflow.com/users/1788304/dalibor"},"edited":false,"score":0,"creation_date":1559052388,"post_id":48775964,"comment_id":99293075,"content_license":"CC BY-SA 4.0","body":"@Dalibor you probably should provide more reasoning for your claim rather than just a link."},{"owner":{"reputation":99,"user_id":1788304,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9334afbe0d50b3e9996a07ee3dbe7e53?s=128&d=identicon&r=PG","display_name":"Dalibor","link":"https://stackoverflow.com/users/1788304/dalibor"},"edited":false,"score":0,"creation_date":1559167486,"post_id":48775964,"comment_id":99340835,"content_license":"CC BY-SA 4.0","body":"I think that it is really known fact that it is not easy to make your own benchmark. For those who do not know that, there is link ;)"},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":99,"user_id":1788304,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9334afbe0d50b3e9996a07ee3dbe7e53?s=128&d=identicon&r=PG","display_name":"Dalibor","link":"https://stackoverflow.com/users/1788304/dalibor"},"edited":false,"score":0,"creation_date":1559174207,"post_id":48775964,"comment_id":99342376,"content_license":"CC BY-SA 4.0","body":"@Dalibor I am perhaps not the best, but I have a good understanding of Java benchmarks, so unless you can point out a specific problem, you are just misleading, and I will not continue the conversation with you under those conditions."},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1573843681,"post_id":48775964,"comment_id":104033266,"content_license":"CC BY-SA 4.0","body":"Mostly I agree with Dalibor. You say you have a &quot;good understanding of Java benchmarks&quot;, but you seem to have implemented the most naive approach while being apparently ignorant of the well known issues of this approach. For starters, read every post on this question: <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1573851578,"post_id":48775964,"comment_id":104036362,"content_license":"CC BY-SA 4.0","body":"@DavidS my test complies with the rules in the excepted answer that you linked. Are you able to point out for any problem in my implementation?"},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1573854956,"post_id":48775964,"comment_id":104037566,"content_license":"CC BY-SA 4.0","body":"From the accepted answer: Rule 0: Read the paper, which essentially warns against attempting a micro-benchmark. Rule 1: You have no warm up phase. Rule 2-3: You&#39;ve given no indication you used these flags. Rule 8: Use a library like JMH. With 135 votes in the comments: Don&#39;t use <code>System.currentTimeMillis()</code>. Moving on to other highly voted answers. Jon Skeet: use <code>System.gc()</code> between iterations, and run your test long enough to measure the results in seconds, not milliseconds. Mixing tests in a single JVM run is bad, as the compiler optimizations done for one test will impact another."},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574198796,"post_id":48775964,"comment_id":104144510,"content_license":"CC BY-SA 4.0","body":"I have some free time, so here are a few more. Rule 5: You include the first iteration in your timing phase. Rule 6: You have used no special tools to &quot;read the compilers mind&quot;. Rule 7: You have given no indication that you used these flags. There, I think that about covers it. I think that&#39;s every rule except for rule 4."},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574220994,"post_id":48775964,"comment_id":104150439,"content_license":"CC BY-SA 4.0","body":"@DavidS Rule 0,8: As I already mentioned, I know what I am doing, so this one does not applies here, there is more than one way to do things. Rule 1: of course I do, read my code more carefully, the test is called before the timer starts to worm up! As for System.gc(), it&#39;s just hint for for the system, you cannot trust it to do anything."},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574221108,"post_id":48775964,"comment_id":104150461,"content_license":"CC BY-SA 4.0","body":"@DavidS if you disagree with my implementation, run your own banchmark using what ever library you want and bring your results here. I be happy to compare"},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574272946,"post_id":48775964,"comment_id":104176596,"content_license":"CC BY-SA 4.0","body":"You asked me to point out the problems. I have done so. I&#39;m almost done trying to convince you, but here we go one more time. Rule 1: A single iteration is not a &quot;warm up&quot;: the JIT compiler optimizes after thousands of iterations, not one. <code>System.gc</code> is a just a hint, but it&#39;s a very reliable one, and it would improve your tests. Finally, you are ignoring all of the other points: compiler flags, currentTimeMillis, splitting tests across multiple JVM runs. These are the serious problems with your attempt at benchmarking. I did not make them up myself: they are well known practices and tools."},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574284613,"post_id":48775964,"comment_id":104182091,"content_license":"CC BY-SA 4.0","body":"@DavidS I think you are miss reading this. Check out the input size. It&#39;s 1M byte array. Iterating on it once means the underline stream implementation is going todo a lot of loops."},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":0,"creation_date":1574285560,"post_id":48775964,"comment_id":104182456,"content_license":"CC BY-SA 4.0","body":"How many loops for warm-up? Will the loop count vary by algorithm used? Will it be enough to ensure the JIT compiler has achieved optimization? How would you know when it is enough? Wouldn&#39;t it be better to explicitly declare a warm-up phase with a known-number of iterations instead of relying on the underlying stream implementation?  Wouldn&#39;t it be better to use a tool like JMH instead of trying to account for all of this?"}],"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"comment_count":13,"is_accepted":false,"score":57,"last_activity_date":1546735559,"last_edit_date":1546735559,"creation_date":1518557408,"answer_id":48775964,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>I did a benchmark upon 14 distinct answers here (sorry for not providing credits but there are too many duplicates).</p>\n\n<p>The result is very surprising. It turns out that Apache <strong>IOUtils</strong> is the slowest and <code>ByteArrayOutputStream</code> is the fastest solutions:</p>\n\n<p>So first here is the best method:</p>\n\n<pre><code>public String inputStreamToString(InputStream inputStream) throws IOException {\n    try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = inputStream.read(buffer)) != -1) {\n            result.write(buffer, 0, length);\n        }\n\n        return result.toString(UTF_8);\n    }\n}\n</code></pre>\n\n<h2>Benchmark results, of 20 MB random bytes in 20 cycles</h2>\n\n<p>Time in milliseconds</p>\n\n<ul>\n<li>ByteArrayOutputStreamTest: 194</li>\n<li>NioStream: 198</li>\n<li>Java9ISTransferTo: 201</li>\n<li>Java9ISReadAllBytes: 205</li>\n<li>BufferedInputStreamVsByteArrayOutputStream: 314</li>\n<li>ApacheStringWriter2: 574</li>\n<li>GuavaCharStreams: 589</li>\n<li>ScannerReaderNoNextTest: 614</li>\n<li>ScannerReader: 633</li>\n<li>ApacheStringWriter: 1544</li>\n<li>StreamApi: Error</li>\n<li>ParallelStreamApi: Error</li>\n<li>BufferReaderTest: Error</li>\n<li>InputStreamAndStringBuilder: Error</li>\n</ul>\n\n<h2>Benchmark source code</h2>\n\n<pre><code>import com.google.common.io.CharStreams;\nimport org.apache.commons.io.IOUtils;\n\nimport java.io.*;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.Channels;\nimport java.nio.channels.ReadableByteChannel;\nimport java.nio.channels.WritableByteChannel;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.stream.Collectors;\n\n/**\n * Created by Ilya Gazman on 2/13/18.\n */\npublic class InputStreamToString {\n\n\n    private static final String UTF_8 = \"UTF-8\";\n\n    public static void main(String... args) {\n        log(\"App started\");\n        byte[] bytes = new byte[1024 * 1024];\n        new Random().nextBytes(bytes);\n        log(\"Stream is ready\\n\");\n\n        try {\n            test(bytes);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void test(byte[] bytes) throws IOException {\n        List&lt;Stringify&gt; tests = Arrays.asList(\n                new ApacheStringWriter(),\n                new ApacheStringWriter2(),\n                new NioStream(),\n                new ScannerReader(),\n                new ScannerReaderNoNextTest(),\n                new GuavaCharStreams(),\n                new StreamApi(),\n                new ParallelStreamApi(),\n                new ByteArrayOutputStreamTest(),\n                new BufferReaderTest(),\n                new BufferedInputStreamVsByteArrayOutputStream(),\n                new InputStreamAndStringBuilder(),\n                new Java9ISTransferTo(),\n                new Java9ISReadAllBytes()\n        );\n\n        String solution = new String(bytes, \"UTF-8\");\n\n        for (Stringify test : tests) {\n            try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                String s = test.inputStreamToString(inputStream);\n                if (!s.equals(solution)) {\n                    log(test.name() + \": Error\");\n                    continue;\n                }\n            }\n            long startTime = System.currentTimeMillis();\n            for (int i = 0; i &lt; 20; i++) {\n                try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                    test.inputStreamToString(inputStream);\n                }\n            }\n            log(test.name() + \": \" + (System.currentTimeMillis() - startTime));\n        }\n    }\n\n    private static void log(String message) {\n        System.out.println(message);\n    }\n\n    interface Stringify {\n        String inputStreamToString(InputStream inputStream) throws IOException;\n\n        default String name() {\n            return this.getClass().getSimpleName();\n        }\n    }\n\n    static class ApacheStringWriter implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            StringWriter writer = new StringWriter();\n            IOUtils.copy(inputStream, writer, UTF_8);\n            return writer.toString();\n        }\n    }\n\n    static class ApacheStringWriter2 implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return IOUtils.toString(inputStream, UTF_8);\n        }\n    }\n\n    static class NioStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream in) throws IOException {\n            ReadableByteChannel channel = Channels.newChannel(in);\n            ByteBuffer byteBuffer = ByteBuffer.allocate(1024 * 16);\n            ByteArrayOutputStream bout = new ByteArrayOutputStream();\n            WritableByteChannel outChannel = Channels.newChannel(bout);\n            while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n                byteBuffer.flip();  //make buffer ready for write\n                outChannel.write(byteBuffer);\n                byteBuffer.compact(); //make buffer ready for reading\n            }\n            channel.close();\n            outChannel.close();\n            return bout.toString(UTF_8);\n        }\n    }\n\n    static class ScannerReader implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.hasNext() ? s.next() : \"\";\n        }\n    }\n\n    static class ScannerReaderNoNextTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.next();\n        }\n    }\n\n    static class GuavaCharStreams implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            return CharStreams.toString(new InputStreamReader(\n                    is, UTF_8));\n        }\n    }\n\n    static class StreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream))\n                    .lines().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ParallelStreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream)).lines()\n                    .parallel().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ByteArrayOutputStreamTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n                byte[] buffer = new byte[1024];\n                int length;\n                while ((length = inputStream.read(buffer)) != -1) {\n                    result.write(buffer, 0, length);\n                }\n\n                return result.toString(UTF_8);\n            }\n        }\n    }\n\n    static class BufferReaderTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            String newLine = System.getProperty(\"line.separator\");\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            StringBuilder result = new StringBuilder(UTF_8);\n            String line;\n            boolean flag = false;\n            while ((line = reader.readLine()) != null) {\n                result.append(flag ? newLine : \"\").append(line);\n                flag = true;\n            }\n            return result.toString();\n        }\n    }\n\n    static class BufferedInputStreamVsByteArrayOutputStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            BufferedInputStream bis = new BufferedInputStream(inputStream);\n            ByteArrayOutputStream buf = new ByteArrayOutputStream();\n            int result = bis.read();\n            while (result != -1) {\n                buf.write((byte) result);\n                result = bis.read();\n            }\n\n            return buf.toString(UTF_8);\n        }\n    }\n\n    static class InputStreamAndStringBuilder implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            int ch;\n            StringBuilder sb = new StringBuilder(UTF_8);\n            while ((ch = inputStream.read()) != -1)\n                sb.append((char) ch);\n            return sb.toString();\n        }\n    }\n\n    static class Java9ISTransferTo implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            inputStream.transferTo(bos);\n            return bos.toString(UTF_8);\n        }\n    }\n\n    static class Java9ISReadAllBytes implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new String(inputStream.readAllBytes(), UTF_8);\n        }\n    }\n\n}\n</code></pre>\n"},{"owner":{"reputation":2301,"user_id":2764007,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0HjMV.jpg?s=128&g=1","display_name":"drakeet","link":"https://stackoverflow.com/users/2764007/drakeet"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1523105603,"creation_date":1523105603,"answer_id":49707572,"question_id":309424,"content_license":"CC BY-SA 3.0","body":"<p>With Okio:</p>\n\n<pre><code>String result = Okio.buffer(Okio.source(inputStream)).readUtf8();\n</code></pre>\n"},{"owner":{"reputation":125,"user_id":8558398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dd31eb4d403f5b9f85bd13c8c136891a?s=128&d=identicon&r=PG&f=1","display_name":"13hola","link":"https://stackoverflow.com/users/8558398/13hola"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1567931212,"last_edit_date":1567931212,"creation_date":1530189951,"answer_id":51083322,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>I have created this code, and it works. There are no required external plug-ins.</p>\n\n<p>There is a converter <code>String</code> to <code>Stream</code> and <code>Stream</code> to <code>String</code>:</p>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.InputStream;\n\npublic class STRINGTOSTREAM {\n\n    public static void main(String[] args)\n    {\n        String text = \"Hello Bhola..!\\nMy Name Is Kishan \";\n\n        InputStream strm = new ByteArrayInputStream(text.getBytes());    // Convert String to Stream\n\n        String data = streamTostring(strm);\n\n        System.out.println(data);\n    }\n\n    static String streamTostring(InputStream stream)\n    {\n        String data = \"\";\n\n        try\n        {\n            StringBuilder stringbuld = new StringBuilder();\n            int i;\n            while ((i=stream.read())!=-1)\n            {\n                stringbuld.append((char)i);\n            }\n            data = stringbuld.toString();\n        }\n        catch(Exception e)\n        {\n            data = \"No data Streamed.\";\n        }\n        return data;\n    }\n</code></pre>\n"},{"owner":{"reputation":5918,"user_id":2599133,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ac535b1006ecd310ccecd34e92f5ccb7?s=128&d=identicon&r=PG","display_name":"Hans Brende","link":"https://stackoverflow.com/users/2599133/hans-brende"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1542049907,"last_edit_date":1542049907,"creation_date":1541632897,"answer_id":53199396,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<h1>ISO-8859-1</h1>\n\n<p>Here is a <strong>very</strong> performant way to do this if you know your input stream's encoding is ISO-8859-1 or ASCII. It (1) avoids the unnecessary synchronization present in <code>StringWriter</code>'s internal <code>StringBuffer</code>, (2) avoids the overhead of <code>InputStreamReader</code>, and (3) minimizes the number of times <code>StringBuilder</code>'s internal <code>char</code> array must be copied.</p>\n\n<pre><code>public static String iso_8859_1(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<h1>UTF-8</h1>\n\n<p>The same general strategy may be used for a stream encoded with UTF-8: </p>\n\n<pre><code>public static String utf8(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt;= 0) {\n                chars.appendCodePoint(state);\n            } else if (state == -1) { //error\n                state = 0;\n                chars.append('\\uFFFD'); //replacement char\n            }\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<p>where the <code>nextStateUtf8()</code> function is defined as follows:</p>\n\n<pre><code>/**\n * Returns the next UTF-8 state given the next byte of input and the current state.\n * If the input byte is the last byte in a valid UTF-8 byte sequence,\n * the returned state will be the corresponding unicode character (in the range of 0 through 0x10FFFF).\n * Otherwise, a negative integer is returned. A state of -1 is returned whenever an\n * invalid UTF-8 byte sequence is detected.\n */\nstatic int nextStateUtf8(int currentState, byte nextByte) {\n    switch (currentState &amp; 0xF0000000) {\n        case 0:\n            if ((nextByte &amp; 0x80) == 0) { //0 trailing bytes (ASCII)\n                return nextByte;\n            } else if ((nextByte &amp; 0xE0) == 0xC0) { //1 trailing byte\n                if (nextByte == (byte) 0xC0 || nextByte == (byte) 0xC1) { //0xCO &amp; 0xC1 are overlong\n                    return -1;\n                } else {\n                    return nextByte &amp; 0xC000001F;\n                }\n            } else if ((nextByte &amp; 0xF0) == 0xE0) { //2 trailing bytes\n                if (nextByte == (byte) 0xE0) { //possibly overlong\n                    return nextByte &amp; 0xA000000F;\n                } else if (nextByte == (byte) 0xED) { //possibly surrogate\n                    return nextByte &amp; 0xB000000F;\n                } else {\n                    return nextByte &amp; 0x9000000F;\n                }\n            } else if ((nextByte &amp; 0xFC) == 0xF0) { //3 trailing bytes\n                if (nextByte == (byte) 0xF0) { //possibly overlong\n                    return nextByte &amp; 0x80000007;\n                } else {\n                    return nextByte &amp; 0xE0000007;\n                }\n            } else if (nextByte == (byte) 0xF4) { //3 trailing bytes, possibly undefined\n                return nextByte &amp; 0xD0000007;\n            } else {\n                return -1;\n            }\n        case 0xE0000000: //3rd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x80000000: //3rd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 || (nextByte &amp; 0xF0) == 0x90 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0xD0000000: //3rd-to-last continuation byte, check undefined\n            return (nextByte &amp; 0xF0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x90000000: //2nd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xA0000000: //2nd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xB0000000: //2nd-to-last continuation byte, check surrogate\n            return (nextByte &amp; 0xE0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xC0000000: //last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x3F : -1;\n        default:\n            return -1;\n    }\n}\n</code></pre>\n\n<h1>Auto-Detect Encoding</h1>\n\n<p>If your input stream was encoded using either ASCII or ISO-8859-1 or UTF-8, but you're not sure which, we can use a similar method to the last, but with an additional encoding-detection component to <em>auto-detect</em> the encoding before returning the string.</p>\n\n<pre><code>public static String autoDetect(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    boolean ascii = true;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt; 0x7F)\n                ascii = false;\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n\n    if (ascii || state &lt; 0) { //probably not UTF-8\n        return chars.toString();\n    }\n    //probably UTF-8\n    int pos = 0;\n    char[] charBuf = new char[2];\n    for (int i = 0, len = chars.length(); i &lt; len; i++) {\n        if ((state = nextStateUtf8(state, (byte)chars.charAt(i))) &gt;= 0) {\n            boolean hi = Character.toChars(state, charBuf, 0) == 2;\n            chars.setCharAt(pos++, charBuf[0]);\n            if (hi) {\n                chars.setCharAt(pos++, charBuf[1]);\n            }\n        }\n    }\n    return chars.substring(0, pos);\n}\n</code></pre>\n\n<p>If your input stream has an encoding that is neither ISO-8859-1 nor ASCII nor UTF-8, then I defer to the other answers already present.</p>\n"},{"comments":[{"owner":{"reputation":608,"user_id":6944068,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/af770f19fffb8ff2e81681f4141c11ea?s=128&d=identicon&r=PG","display_name":"toolforger","link":"https://stackoverflow.com/users/6944068/toolforger"},"edited":false,"score":0,"creation_date":1579681786,"post_id":55393395,"comment_id":105843150,"content_license":"CC BY-SA 4.0","body":"IOUtils has a simpler function for that."}],"owner":{"reputation":1062,"user_id":7484853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/OGdX0.jpg?s=128&g=1","display_name":"Hasee Amarathunga","link":"https://stackoverflow.com/users/7484853/hasee-amarathunga"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1553762976,"creation_date":1553762976,"answer_id":55393395,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>I suggest the <strong>StringWriter</strong> class for that problem.</p>\n\n<pre><code>StringWriter wt= new StringWriter();\nIOUtils.copy(inputStream, wt, encoding);\nString st= wt.toString();\n</code></pre>\n"},{"owner":{"user_type":"does_not_exist","display_name":"user12402945"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1574254498,"last_edit_date":1574254498,"creation_date":1574254164,"answer_id":58954758,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p>This Code is for New Java Learners: </p>\n\n<pre><code>     private String textDataFromFile;\n\npublic String getFromFile(InputStream myInputStream) throws FileNotFoundException, IOException {\n\n      BufferedReader bufferReader = new BufferedReader (new InputStreamReader(myInputStream));\n\n       StringBuilder stringBuilder = new StringBuilder();\n\n  String eachStringLine;\n\n    while((eachStringLine=bufferReader.readLine()) != null){          \n        stringBuilder.append(eachStringLine).append(\"\\n\");\n    }\n\n   textDataFromFile = stringBuilder.toString(); \n\n\n\n  return textDataFromFile;\n\n}\n</code></pre>\n"},{"owner":{"reputation":11023,"user_id":639687,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/367828dd86c0336d80700d4d4086cd33?s=128&d=identicon&r=PG","display_name":"czerny","link":"https://stackoverflow.com/users/639687/czerny"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1586045027,"creation_date":1586045027,"answer_id":61036395,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<pre><code>String inputStreamToString(InputStream inputStream, Charset charset) throws IOException {\n    try (\n            final StringWriter writer = new StringWriter();\n            final InputStreamReader reader = new InputStreamReader(inputStream, charset)\n        ) {\n        reader.transferTo(writer);\n        return writer.toString();\n    }\n}\n</code></pre>\n\n<ul>\n<li>pure Java standard library solution - no libs</li>\n<li>since Java 10 - <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/io/Reader.html#transferTo(java.io.Writer)\" rel=\"noreferrer\">Reader#transferTo(java.io.Writer)</a></li>\n<li>loopless solution</li>\n<li>no new line character handling</li>\n</ul>\n"},{"owner":{"reputation":629,"user_id":11199879,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0a9c56c2190957960c9463c03486df8?s=128&d=identicon&r=PG&f=1","display_name":"Kaplan","link":"https://stackoverflow.com/users/11199879/kaplan"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1615011999,"last_edit_date":1615011999,"creation_date":1607781039,"answer_id":65265664,"question_id":309424,"content_license":"CC BY-SA 4.0","body":"<p><em>if You need to convert the string to a specific character set</em> <strong>w/o external libraries</strong> <em>then:</em></p>\n<pre><code>public String convertStreamToString(InputStream is) throws IOException {\n  try (ByteArrayOutputStream baos = new ByteArrayOutputStream();) {\n    is.transferTo(baos);\n    return baos.toString(StandardCharsets.UTF_8);\n  }\n}\n</code></pre>\n"}],"owner":{"reputation":43555,"user_id":16616,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/PNeie.png?s=128&g=1","display_name":"Johnny Maelstrom","link":"https://stackoverflow.com/users/16616/johnny-maelstrom"},"comment_count":2,"is_answered":true,"view_count":2232958,"protected_date":1370840953,"accepted_answer_id":309448,"answer_count":60,"score":4271,"last_activity_date":1615011999,"creation_date":1227286060,"last_edit_date":1546684106,"question_id":309424,"link":"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java","title":"How do I read / convert an InputStream into a String in Java?","body":"<p>If you have a <code>java.io.InputStream</code> object, how should you process that object and produce a <code>String</code>?</p>\n\n<hr>\n\n<p>Suppose I have an <code>InputStream</code> that contains text data, and I want to convert it to a <code>String</code>, so for example I can write that to a log file.</p>\n\n<p>What is the easiest way to take the <code>InputStream</code> and convert it to a <code>String</code>?</p>\n\n<pre><code>public String convertStreamToString(InputStream is) {\n    // ???\n}\n</code></pre>\n"},{"tags":["java","nullpointerexception","null"],"comments":[{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"reply_to_user":{"reputation":21894,"user_id":37298,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/1c81239ef2dbd47eaaa8e8e44e9ebb93?s=128&d=identicon&r=PG","display_name":"Shervin Asgari","link":"https://stackoverflow.com/users/37298/shervin-asgari"},"edited":false,"score":131,"creation_date":1280740640,"post_id":271526,"comment_id":3520844,"content_license":"CC BY-SA 2.5","body":"@Shervin Encouraging nulls makes the code less understandable and less reliable."},{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"edited":false,"score":77,"creation_date":1339184414,"post_id":271526,"comment_id":14300015,"content_license":"CC BY-SA 3.0","body":"Not using null is superior to most other suggestions here. Throw exceptions, don&#39;t return or allow nulls. BTW - &#39;assert&#39; keyword is useless, because it&#39;s disabled by default. Use an always-enabled failure mechanism"},{"owner":{"reputation":774,"user_id":1490962,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/kICqY.jpg?s=128&g=1","display_name":"Bhushankumar Lilapara","link":"https://stackoverflow.com/users/1490962/bhushankumar-lilapara"},"edited":false,"score":0,"creation_date":1369908930,"post_id":271526,"comment_id":24270661,"content_license":"CC BY-SA 3.0","body":"You can create class that will check for null values or null object. That will help you improving reuse-ability.. <a href=\"http://stackoverflow.com/a/16833309/1490962\">stackoverflow.com/a/16833309/1490962</a>"},{"owner":{"reputation":5871,"user_id":1870054,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/QJydN.jpg?s=128&g=1","display_name":"wener","link":"https://stackoverflow.com/users/1870054/wener"},"edited":false,"score":0,"creation_date":1381342881,"post_id":271526,"comment_id":28546303,"content_license":"CC BY-SA 3.0","body":"use <a href=\"http://projectlombok.org/\" rel=\"nofollow noreferrer\">Lombok</a>, you got <a href=\"http://projectlombok.org/features/NonNull.html\" rel=\"nofollow noreferrer\">@NotNull</a>"},{"owner":{"reputation":7959,"user_id":1183884,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/540298d74d0fab2a8a3c0fa26aca24c3?s=128&d=identicon&r=PG","display_name":"BlueCacti","link":"https://stackoverflow.com/users/1183884/bluecacti"},"edited":false,"score":0,"creation_date":1407915432,"post_id":271526,"comment_id":39394988,"content_license":"CC BY-SA 3.0","body":"Isn&#39;t there are Design Pattern that speaks about making a null-object? So when instantiating a new object, you always use this null object (same super class, same [but empty] methods) and later on you set the object to the full object when you need it. You might want to check out a similar question: <a href=\"https://stackoverflow.com/questions/9162371/what-are-good-light-weight-design-patterns-for-avoid-nulls-in-java?rq=1\" title=\"what are good light weight design patterns for avoid nulls in java\">stackoverflow.com/questions/9162371/&hellip;</a> and this info about the Null Object Pattern: <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_Object_pattern</a>"},{"owner":{"reputation":1276,"user_id":1856235,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b0c6380e97350fd48c09f2debc906ddf?s=128&d=identicon&r=PG","display_name":"Andrii Polunin","link":"https://stackoverflow.com/users/1856235/andrii-polunin"},"edited":false,"score":1,"creation_date":1459775150,"post_id":271526,"comment_id":60423263,"content_license":"CC BY-SA 3.0","body":"Nulls should be avoided in high-level code. Tony Hoare, who invented null references, calls them &quot;a billion-dollar mistake&quot;. Take a look <a href=\"http://www.softwaregeek.net/2016/04/how-to-avoid-null-checks-in-java.html\" rel=\"nofollow noreferrer\">here</a> for some ideas."},{"owner":{"reputation":177,"user_id":2208556,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/5804da6dfc5a885f987dca203b514106?s=128&d=identicon&r=PG","display_name":"Robert R Evans","link":"https://stackoverflow.com/users/2208556/robert-r-evans"},"edited":false,"score":2,"creation_date":1466701361,"post_id":271526,"comment_id":63439111,"content_license":"CC BY-SA 3.0","body":"Seems to be in Java 8: static Objects.isNull(Object o) <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Objects.html</a>"},{"owner":{"reputation":151,"user_id":2787149,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/ba50d872bad0cacbaa0ec75cc3351539?s=128&d=identicon&r=PG","display_name":"Abhishek kapoor","link":"https://stackoverflow.com/users/2787149/abhishek-kapoor"},"edited":false,"score":1,"creation_date":1488258825,"post_id":271526,"comment_id":72139761,"content_license":"CC BY-SA 3.0","body":"How about wrapping the object with Optional . Use optional where ever you see possibility of nulls"}],"answers":[{"comments":[{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":17,"creation_date":1256979737,"post_id":271553,"comment_id":1525273,"content_license":"CC BY-SA 2.5","body":"Problem is that usually you loose context as the NullPointerException does not indicate WHICH variable was null, and you may have several &quot;.&quot;-operations on the line.  Using &quot;if (foo == null) throw new RuntimeException(&quot;foo == null&quot;)&quot; allows you to state explicitly WHAT was wrong, giving your stack trace much more value to those who have to fix it."},{"owner":{"reputation":3076,"user_id":204840,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/ea10c056f09285737ff0daf8a62e176f?s=128&d=identicon&r=PG","display_name":"cthulhu","link":"https://stackoverflow.com/users/204840/cthulhu"},"edited":false,"score":1,"creation_date":1295355181,"post_id":271553,"comment_id":5218513,"content_license":"CC BY-SA 2.5","body":"With Andersen - I would love Java&#39;s exception system to be able to include the name of a variable that&#39;s being worked upon, so that NullPointerExceptions would not only indicate the line the exception occurred on, but also the variable name. This should work just fine in unobfuscated software."},{"owner":{"reputation":5620,"user_id":2047962,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/646f5fd223be663d5e27df09b0f1b0ef?s=128&d=identicon&r=PG","display_name":"RustyTheBoyRobot","link":"https://stackoverflow.com/users/2047962/rustytheboyrobot"},"edited":false,"score":3,"creation_date":1366132330,"post_id":271553,"comment_id":22890506,"content_license":"CC BY-SA 3.0","body":"I had a professor that preached against method call chaining. His theory was that you should be wary of call chains that were longer than 2 methods. I don&#39;t know if that&#39;s a hard rule, but it definitely removes most of the problems with NPE stack traces."}],"owner":{"reputation":1618,"user_id":32168,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/71678040a694af81b503b6e55209f6a6?s=128&d=identicon&r=PG","display_name":"Jim Nelson","link":"https://stackoverflow.com/users/32168/jim-nelson"},"comment_count":3,"is_accepted":false,"community_owned_date":1319187757,"score":78,"last_activity_date":1226047824,"creation_date":1226047824,"answer_id":271553,"question_id":271526,"content_license":"CC BY-SA 2.5","body":"<p>Rather than Null Object Pattern -- which has its uses -- you might consider situations where the null object is a bug.</p>\n\n<p>When the exception is thrown, examine the stack trace and work through the bug.</p>\n"},{"comments":[{"owner":{"reputation":8196,"user_id":3779853,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/1cbdb458aafbdc1095f165a616444917?s=128&d=identicon&r=PG&f=1","display_name":"phil294","link":"https://stackoverflow.com/users/3779853/phil294"},"edited":false,"score":3,"creation_date":1488070481,"post_id":271557,"comment_id":72069008,"content_license":"CC BY-SA 3.0","body":"No, <a href=\"http://stackoverflow.com/a/21245984/3779853\">do not use assertions in production code</a>."}],"owner":{"reputation":12046,"user_id":12719,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7035cec2436e927067addeeb5266bd36?s=128&d=identicon&r=PG","display_name":"pgras","link":"https://stackoverflow.com/users/12719/pgras"},"comment_count":1,"is_accepted":false,"community_owned_date":1319187757,"score":100,"last_activity_date":1250261088,"last_edit_date":1250261088,"creation_date":1226048126,"answer_id":271557,"question_id":271526,"content_license":"CC BY-SA 2.5","body":"<ul>\n<li>If you consider an object should not be null (or it is a bug) use an assert.</li>\n<li>If your method doesn't accept null params say it in the javadoc and use an assert.</li>\n</ul>\n\n<p>You have to check for object != null only if you want to handle the case where the object may be null...</p>\n\n<p>There is a proposal to add new annotations in Java7 to help with null / notnull params:\n<a href=\"http://tech.puredanger.com/java7/#jsr308\" rel=\"noreferrer\">http://tech.puredanger.com/java7/#jsr308</a></p>\n"},{"comments":[{"owner":{"reputation":5705,"user_id":1296660,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2d70e7bf08fe2e1e0d29edc68bf60651?s=128&d=identicon&r=PG","display_name":"Supericy","link":"https://stackoverflow.com/users/1296660/supericy"},"edited":false,"score":2,"creation_date":1371153718,"post_id":271576,"comment_id":24730588,"content_license":"CC BY-SA 3.0","body":"But then you have to assume <code>equals</code> (could be any method) will handle null correctly. Really all this is doing is passing the responsibility to someone else (or another method)."},{"owner":{"reputation":9193,"user_id":881272,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/f4daab0a92c07d1ec95556c4ab5f0159?s=128&d=identicon&r=PG","display_name":"Angelo Fuchs","link":"https://stackoverflow.com/users/881272/angelo-fuchs"},"reply_to_user":{"reputation":5705,"user_id":1296660,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2d70e7bf08fe2e1e0d29edc68bf60651?s=128&d=identicon&r=PG","display_name":"Supericy","link":"https://stackoverflow.com/users/1296660/supericy"},"edited":false,"score":4,"creation_date":1375169190,"post_id":271576,"comment_id":26216028,"content_license":"CC BY-SA 3.0","body":"@Supericy Basically yes, but <code>equals</code> (or whatever method) has to check for <code>null</code> anyway. Or state explicitly that it does not."}],"owner":{"reputation":461832,"user_id":34509,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1","display_name":"Johannes Schaub - litb","link":"https://stackoverflow.com/users/34509/johannes-schaub-litb"},"comment_count":2,"is_accepted":false,"community_owned_date":1319187757,"score":77,"last_activity_date":1450206171,"last_edit_date":1450206171,"creation_date":1226048651,"answer_id":271576,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Sometimes, you have methods that operate on its parameters that define a symmetric operation:</p>\n\n<pre><code>a.f(b); &lt;-&gt; b.f(a);\n</code></pre>\n\n<p>If you know b can never be null, you can just swap it. It is most useful for equals:\nInstead of <code>foo.equals(\"bar\");</code> better do <code>\"bar\".equals(foo);</code>.</p>\n"},{"comments":[{"owner":{"reputation":5510,"user_id":184456,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/e14ef2fea2bc08372df32cf3fe036365?s=128&d=identicon&r=PG","display_name":"monojohnny","link":"https://stackoverflow.com/users/184456/monojohnny"},"edited":false,"score":5,"creation_date":1263477456,"post_id":271587,"comment_id":1993029,"content_license":"CC BY-SA 2.5","body":"Also you can use the more generic version from Apache Commons, quite useful at the start of methods to check params I find.   Validate.notNull( object, &quot;object must not be null&quot;);  <a href=\"http://commons.apache.org/lang/apidocs/org/apache/commons/lang/Validate.html\" rel=\"nofollow noreferrer\">commons.apache.org/lang/apidocs/org/apache/commons/lang/&hellip;</a>"},{"owner":{"reputation":544,"user_id":2403791,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1b3c49a61a98f8311bf713b22cae10c3?s=128&d=identicon&r=PG","display_name":"Kurapika","link":"https://stackoverflow.com/users/2403791/kurapika"},"reply_to_user":{"reputation":5510,"user_id":184456,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/e14ef2fea2bc08372df32cf3fe036365?s=128&d=identicon&r=PG","display_name":"monojohnny","link":"https://stackoverflow.com/users/184456/monojohnny"},"edited":false,"score":0,"creation_date":1512835411,"post_id":271587,"comment_id":82421359,"content_license":"CC BY-SA 3.0","body":"@monojohnny  does Validate use Assert statements into?. i ask that because Assert may be activate / deactivate on JVM and it&#39;s suggest do not use in production."},{"owner":{"reputation":5510,"user_id":184456,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/e14ef2fea2bc08372df32cf3fe036365?s=128&d=identicon&r=PG","display_name":"monojohnny","link":"https://stackoverflow.com/users/184456/monojohnny"},"edited":false,"score":0,"creation_date":1515249925,"post_id":271587,"comment_id":83233569,"content_license":"CC BY-SA 3.0","body":"Don&#39;t think so - I believe it just throws a RuntimeException if validation fails"}],"owner":{"reputation":16719,"user_id":27657,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/7b718f1f997edffed8e17f7875dea15f?s=128&d=identicon&r=PG","display_name":"javamonkey79","link":"https://stackoverflow.com/users/27657/javamonkey79"},"comment_count":3,"is_accepted":false,"community_owned_date":1319187757,"score":129,"last_activity_date":1456229653,"last_edit_date":1456229653,"creation_date":1226049019,"answer_id":271587,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Depending on what kind of objects you are checking you may be able to use some of the classes in the apache commons such as: <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">apache commons lang</a> and <a href=\"http://commons.apache.org/collections/\" rel=\"noreferrer\">apache commons collections</a></p>\n\n<p>Example: </p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isBlank( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>or (depending on what you need to check):</p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isEmpty( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>The StringUtils class is only one of many; there are quite a few good classes in the commons that do null safe manipulation.</p>\n\n<p>Here follows an example of how you can use null vallidation in JAVA when you include apache library(commons-lang-2.4.jar)</p>\n\n<pre><code>public DOCUMENT read(String xml, ValidationEventHandler validationEventHandler) {\n    Validate.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n    return read(new StringReader(xml), true, validationEventHandler);\n}\n</code></pre>\n\n<p>And if you are using Spring, Spring also has the same functionality in its package, see library(spring-2.4.6.jar) </p>\n\n<p>Example on how to use this static classf from spring(org.springframework.util.Assert)</p>\n\n<pre><code>Assert.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":96,"creation_date":1312908433,"post_id":271616,"comment_id":8355749,"content_license":"CC BY-SA 3.0","body":"What&#39;s the point in throwing IllegalArgumentException? I think NullPointerException would be clearer, and that would also be thrown if you don&#39;t do the null-check yourself. I&#39;d either use assert or nothing at all."},{"owner":{"reputation":1534,"user_id":28683,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/a0c8f93b24e49cb948b9a0da84a05ddf?s=128&d=identicon&r=PG&f=1","display_name":"myplacedk","link":"https://stackoverflow.com/users/28683/myplacedk"},"reply_to_user":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":23,"creation_date":1313411219,"post_id":271616,"comment_id":8451120,"content_license":"CC BY-SA 3.0","body":"It&#39;s unlikely that every other value than null is acceptable. You could have IllegalArgumentException, OutOfRageException etc etc. Sometimes this makes sense. Other times you end up creating a lot of exception classes that doesn&#39;t add any value, then you just use IllegalArgumentException. It doesn&#39;t makes sense to have one exception for null-input, and another one for everything else."},{"owner":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":7,"creation_date":1314012014,"post_id":271616,"comment_id":8571644,"content_license":"CC BY-SA 3.0","body":"Yes, I agree to fail-fast-principle, but in the example given above, the value is not passed on, but is the object on which a method shall be called. So it fails equallys fast, and adding a null check just to throw an exception that would be thrown anyway at the same time and place doesn&#39;t seem to make debugging any easier."},{"owner":{"reputation":1127,"user_id":200802,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/871836155872409e8d2b2a79e4c828d4?s=128&d=identicon&r=PG","display_name":"charstar","link":"https://stackoverflow.com/users/200802/charstar"},"reply_to_user":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":3,"creation_date":1322906042,"post_id":271616,"comment_id":10323356,"content_license":"CC BY-SA 3.0","body":"I agree with @Axel in that IllegalArgumentException implies (as I use it anyway) that a precondition for the argument does not hold as it pertains to a <i>constraint</i> on the parameter. A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint. To maintain a defensive fail-fast strategy, there&#39;s nothing stopping anyone for checking for a null and throwing a NullPointerException... which exactly conveys what happened, namely, &quot;you didn&#39;t program it right&quot; :)"},{"owner":{"reputation":3773,"user_id":197101,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/bfb58616b94d2dd92e9652697e8c5f65?s=128&d=identicon&r=PG","display_name":"Visionary Software Solutions","link":"https://stackoverflow.com/users/197101/visionary-software-solutions"},"edited":false,"score":2,"creation_date":1347042203,"post_id":271616,"comment_id":16538947,"content_license":"CC BY-SA 3.0","body":"&quot;A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint.&quot; Naive. You can use this as a security hole to DoS or attempt to gain stacktrace info (if such information is not supressed). <a href=\"http://osvdb.org/show/osvdb/67379\" rel=\"nofollow noreferrer\">osvdb.org/show/osvdb/67379</a>   If your API is public and you don&#39;t explicitly define the boundaries you accept--both through API docs and whatever tools you can use to ensure validity of the contract-- the caller&#39;s free to do whatever they want. <b>You</b> are the one who didn&#39;t program right then, not the caller."},{"owner":{"reputation":17601,"user_id":298029,"user_type":"registered","profile_image":"https://i.stack.imgur.com/lcPr5.png?s=128&g=1","display_name":"fgb","link":"https://stackoverflow.com/users/298029/fgb"},"edited":false,"score":8,"creation_date":1365381575,"post_id":271616,"comment_id":22590312,"content_license":"CC BY-SA 3.0","body":"A security hole? The JDK is full of code like this. If you don&#39;t want the user to see stacktraces, then just disable them. No one implied that the behaviour is not documented. MySQL is written in C where dereferencing null pointers is undefined behaviour, nothing like throwing an exception."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":9,"creation_date":1366500901,"post_id":271616,"comment_id":23034519,"content_license":"CC BY-SA 3.0","body":"<code>throw new IllegalArgumentException(&quot;object==null&quot;)</code>"},{"owner":{"reputation":76229,"user_id":330057,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/i6yM6.png?s=128&g=1","display_name":"corsiKa","link":"https://stackoverflow.com/users/330057/corsika"},"edited":false,"score":2,"creation_date":1371165407,"post_id":271616,"comment_id":24735455,"content_license":"CC BY-SA 3.0","body":"@myplacedk I think it does make sense to have a different exception for null values passed in that from improper values passed in. The two are usually results of different types of programming errors. Null values usually arise from some required computation not happening, while other problems usually arise from required computations being incorrect."},{"owner":{"reputation":2768,"user_id":1733377,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/S3e4a.jpg?s=128&g=1","display_name":"Michael Plautz","link":"https://stackoverflow.com/users/1733377/michael-plautz"},"reply_to_user":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":1,"creation_date":1431482489,"post_id":271616,"comment_id":48513976,"content_license":"CC BY-SA 3.0","body":"@Axel the whole point of using anything other than RuntimeException is the descriptiveness of the Exception. Why IllegalArgumentException over NullPointerException? Because when you are debugging an exception caused by this, the IllegalArgumentException is abundantly more obvious, especially when you put a message on it. This especially applies to enterprise applications when NullPointerExceptions creep up (yes, these happen in enterprise applications). In this same example, the programmer may not have control over whether or not assertions get processed by the JVM."},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"edited":false,"score":7,"creation_date":1471022939,"post_id":271616,"comment_id":65203727,"content_license":"CC BY-SA 3.0","body":"1/2 I have to agree that a <code>IllegalArgumentException</code> is better than a plain-vanilla <code>NPE</code> for these type of situations. I see a NPE as an indication that somewhere in the code, something unsafely de-referenced an expression that happened to be null (assuming all known and declared preconditions and invariants were met). An illegal argument exception OTH tells me a well-known precondition or invariant was not met."},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"edited":false,"score":7,"creation_date":1471023227,"post_id":271616,"comment_id":65203849,"content_license":"CC BY-SA 3.0","body":"2/2 - That is, a NPE tells me there is a yet-undocumented null bug within the method (or within the methods it calls) or that there is a null precondition that we have not coded for. An illegal argument exception tells there is a bug <i>outside</i> of this method lying somewhere along the call chain that leads to the current method. Sticking to this pattern (within reason obviously), it does lead to faster root-cause analysis of errors (specially the nasty, intertwined ones.)"},{"owner":{"reputation":35045,"user_id":2891664,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1","display_name":"Radiodef","link":"https://stackoverflow.com/users/2891664/radiodef"},"edited":false,"score":2,"creation_date":1494193887,"post_id":271616,"comment_id":74710692,"content_license":"CC BY-SA 3.0","body":"Throwing <code>NullPointerException</code> is the Java convention. See e.g. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull</code></a> which is <i>&quot;primarily for doing parameter validation in methods and constructors&quot;</i> and throws <code>NullPointerException</code>. There is also simply the doc for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html\" rel=\"nofollow noreferrer\"><code>NullPointerException</code></a> which states that <i>&quot;applications should throw instances of this class to indicate other illegal uses of the <code>null</code> object&quot;</i>."}],"owner":{"reputation":1534,"user_id":28683,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/a0c8f93b24e49cb948b9a0da84a05ddf?s=128&d=identicon&r=PG&f=1","display_name":"myplacedk","link":"https://stackoverflow.com/users/28683/myplacedk"},"comment_count":12,"is_accepted":false,"community_owned_date":1319187757,"score":331,"last_activity_date":1468918966,"last_edit_date":1468918966,"creation_date":1226050020,"answer_id":271616,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<h2>If null-values are not allowed</h2>\n\n<p>If your method is called externally, start with something like this:</p>\n\n<pre><code>public void method(Object object) {\n  if (object == null) {\n    throw new IllegalArgumentException(\"...\");\n  }\n</code></pre>\n\n<p>Then, in the rest of that method, you'll know that <code>object</code> is not null.</p>\n\n<p>If it is an internal method (not part of an API), just document that it cannot be null, and that's it.</p>\n\n<p>Example:</p>\n\n<pre><code>public String getFirst3Chars(String text) {\n  return text.subString(0, 3);\n}\n</code></pre>\n\n<p>However, if your method just passes the value on, and the next method passes it on etc. it could get problematic. In that case you may want to check the argument as above.</p>\n\n<h2>If null is allowed</h2>\n\n<p>This really depends. If find that I often do something like this:</p>\n\n<pre><code>if (object == null) {\n  // something\n} else {\n  // something else\n}\n</code></pre>\n\n<p>So I branch, and do two completely different things. There is no ugly code snippet, because I really need to do two different things depending on the data. For example, should I work on the input, or should I calculate a good default value?</p>\n\n<hr>\n\n<p>It's actually rare for me to use the idiom \"<code>if (object != null &amp;&amp; ...</code>\".</p>\n\n<p>It may be easier to give you examples, if you show examples of where you typically use the idiom.</p>\n"},{"owner":{"reputation":37988,"user_id":6610,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG","display_name":"xtofl","link":"https://stackoverflow.com/users/6610/xtofl"},"comment_count":0,"is_accepted":false,"community_owned_date":1319187757,"score":37,"last_activity_date":1593087868,"last_edit_date":1593087868,"creation_date":1226050037,"answer_id":271617,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>Asking that question points out that you may be interested in error handling strategies.  How and where to handle errors is a pervasive architectural question.  There are several ways to do this.</p>\n<p>My favorite: allow the Exceptions to ripple through - catch them at the 'main loop' or in some other function with the appropriate responsibilities.  Checking for error conditions and handling them appropriately can be seen as a specialized responsibility.</p>\n<p>Sure do have a look at Aspect Oriented Programming, too - they have neat ways to insert <code>if( o == null ) handleNull()</code> into your bytecode.</p>\n"},{"owner":{"user_type":"does_not_exist","display_name":"Stuart Axon"},"comment_count":0,"is_accepted":false,"community_owned_date":1319187757,"score":6,"last_activity_date":1314006237,"last_edit_date":1314006237,"creation_date":1226054627,"answer_id":271735,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Wherever you pass an array or a Vector, initialise these to empty ones, instead of null.  - This way you can avoid lots of checking for null and all is good :)</p>\n\n<pre><code>public class NonNullThing {\n\n   Vector vectorField = new Vector();\n\n   int[] arrayField = new int[0];\n\n   public NonNullThing() {\n\n      // etc\n\n   }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":641,"creation_date":1226082982,"post_id":271874,"comment_id":126581,"content_license":"CC BY-SA 2.5","body":"I disagree with your statements for the DO_NOTHING action.  If the find action method cannot find an action, then returning null is the right thing to do.  You&#39;ve &quot;found&quot; an action in your code which isn&#39;t really found, which violates the principle of the method, to find a useable action."},{"owner":{"reputation":5999,"user_id":14204,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/8ed0735822eb58410f2ef73bdbc7f264?s=128&d=identicon&r=PG","display_name":"Laplie Anderson","link":"https://stackoverflow.com/users/14204/laplie-anderson"},"edited":false,"score":268,"creation_date":1226627597,"post_id":271874,"comment_id":137945,"content_license":"CC BY-SA 2.5","body":"I agree that null is overused in Java, especially with lists.  So many apis would be better if they return an empty list/array/collection instead of null.  Many times, null is used where an exception should be thrown instead.  An exception should be thrown if the parser can&#39;t parse."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":6,"creation_date":1243338183,"post_id":271874,"comment_id":718060,"content_license":"CC BY-SA 2.5","body":"I think it should be possible in the source code to specify that null is never returned from method X and that a given parameter should NOT be null and it is an error to pass one."},{"owner":{"reputation":15340,"user_id":48553,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG","display_name":"Steven Evers","link":"https://stackoverflow.com/users/48553/steven-evers"},"edited":false,"score":94,"creation_date":1248323211,"post_id":271874,"comment_id":989399,"content_license":"CC BY-SA 2.5","body":"The latter example here is, IIRC, the Null Object design pattern."},{"owner":{"reputation":9503,"user_id":37740,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/f4ee2ca01556290d92524f734c6299d4?s=128&d=identicon&r=PG","display_name":"DragonBorn","link":"https://stackoverflow.com/users/37740/dragonborn"},"edited":false,"score":15,"creation_date":1259590866,"post_id":271874,"comment_id":1710194,"content_license":"CC BY-SA 2.5","body":"Assertion is good for TESTING. It&#39;s dangerous to use on PROD."},{"owner":{"reputation":4866,"user_id":74098,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/7e45e2094327506ac564ba1ce114cd00?s=128&d=identicon&r=PG","display_name":"Cshah","link":"https://stackoverflow.com/users/74098/cshah"},"edited":false,"score":12,"creation_date":1265900215,"post_id":271874,"comment_id":2202521,"content_license":"CC BY-SA 2.5","body":"I disagree with DO_NOTHING because although it eliminates that null check, the resultant behaviour is unexpected. If null is an unexpected input to your method then it is pertinent that your method throws NPE so that the caller is aware and things are logged(A fail fast behaviour). With using DO_NOTHING, its like everything passed but the resultant action didnt take place and users will redo the action (resubmitting the form). I agree to return empty lists, objects but not nulls as return values but dont agree to the DO_NOTHING illustrated above. But NPE&#39;s shouldnt display stacktrace on UI"},{"owner":{"reputation":8429,"user_id":219394,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/be6af8c75baccb49c9f0e6158c505973?s=128&d=identicon&r=PG","display_name":"Kevin Brock","link":"https://stackoverflow.com/users/219394/kevin-brock"},"reply_to_user":{"reputation":4866,"user_id":74098,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/7e45e2094327506ac564ba1ce114cd00?s=128&d=identicon&r=PG","display_name":"Cshah","link":"https://stackoverflow.com/users/74098/cshah"},"edited":false,"score":62,"creation_date":1267791942,"post_id":271874,"comment_id":2364445,"content_license":"CC BY-SA 2.5","body":"@Cshah (and MetroidFan2002). Simple, put that into the contract and then it is clear that a non-found returned action will do nothing. If this is important information to the caller, then provide a way to discover that it was a non-found action (i.e. provide a method to check if the result was the DO_NOTHING object). Alternatively, if action should normally be found then you still should not return null but instead throw an exception specifically indicating that condition - this still results in better code. If desired, provide a separate method returning boolean to check if action exists."},{"owner":{"reputation":11106,"user_id":10522,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/8396048b39279996e7ee6c1acdac2bf7?s=128&d=identicon&r=PG","display_name":"Berlin Brown","link":"https://stackoverflow.com/users/10522/berlin-brown"},"edited":false,"score":2,"creation_date":1300138382,"post_id":271874,"comment_id":5982720,"content_license":"CC BY-SA 2.5","body":"I am defensive in my coding and do the null checks.  Especially in a J2EE environment.  My thinking is that anything that can be null...could potentially be null at some point.  Contractually, in most cases I don&#39;t want to throw an illegalarg exception or nullpointer because Java shouldn&#39;t have null refs in the first place.  In most cases, I try to find a default return value and fail fast with the default value/expected return value."},{"owner":{"reputation":714,"user_id":151909,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/5e46ac54d86d3f19fb3543503df3a230?s=128&d=identicon&r=PG","display_name":"gshauger","link":"https://stackoverflow.com/users/151909/gshauger"},"edited":false,"score":37,"creation_date":1304483612,"post_id":271874,"comment_id":6760383,"content_license":"CC BY-SA 3.0","body":"Concise does not equal quality code.  I&#39;m sorry you think so.  Your code hides situations where an error would be advantageous."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"reply_to_user":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":6,"creation_date":1315173096,"post_id":271874,"comment_id":8799265,"content_license":"CC BY-SA 3.0","body":"@MetroidFan, if you return a valid Action which doesn&#39;t do anything you have a simpler caller without a branch.  Branches cause additional complexity, and keeping them as few as possible makes for simpler testing."},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"reply_to_user":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":9,"creation_date":1315176959,"post_id":271874,"comment_id":8799704,"content_license":"CC BY-SA 3.0","body":"@Thorbj&#248;rn Ravn Andersen By hiding the possibility that the findAction method may <i>not</i> find an action, you&#39;ve now done logic that, while it doesn&#39;t break the program, may result in undesired effects that aren&#39;t found until a much later stage (possibly in production).  Depending on if findAction really can be expected to not find anything, this is highly undesireable - returning null or throwing an exception, like imaginaryboy suggests, are better approaches so that they can be explicitly checked for and paths taken to account for the lack of finding an action."},{"owner":{"reputation":13693,"user_id":80701,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/d9391c16473dad5e699e1ca91b874663?s=128&d=identicon&r=PG","display_name":"monksy","link":"https://stackoverflow.com/users/80701/monksy"},"edited":false,"score":4,"creation_date":1316444169,"post_id":271874,"comment_id":9042781,"content_license":"CC BY-SA 3.0","body":"Whats the point of using assertions when they only fail for you? Yes you can catch stuff while you&#39;re working on it, but in production how will they help if you never hear about that in odd situations?"},{"owner":{"reputation":45503,"user_id":177883,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/1e1f4dbb6e64ed8de79766168a3db197?s=128&d=identicon&r=PG","display_name":"DarthVader","link":"https://stackoverflow.com/users/177883/darthvader"},"edited":false,"score":18,"creation_date":1317775492,"post_id":271874,"comment_id":9301640,"content_license":"CC BY-SA 3.0","body":"There is nothing wrong with checking null values, and I have seen lot of senior/rockstar developers who check for null values everywhere. Also, null checking is one of the cheapest operation in a programming language."},{"owner":{"reputation":1688,"user_id":445367,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6aa3490c6f4f76acd5d706b9bc0ff54a?s=128&d=identicon&r=PG","display_name":"Eelco","link":"https://stackoverflow.com/users/445367/eelco"},"edited":false,"score":12,"creation_date":1328677734,"post_id":271874,"comment_id":11561628,"content_license":"CC BY-SA 3.0","body":"Agreed with DarthVader. I&#39;d argue that not being defensive enough is the junior thing to do. There are very few libraries out there, and very few coders in my experience that have the discipline to completely describe their contracts (and that includes whether nulls might be returned/ are acceptable values for arguments), so often there isn&#39;t much to trust."},{"owner":{"reputation":1171,"user_id":818060,"user_type":"registered","profile_image":"https://i.stack.imgur.com/53YxL.jpg?s=128&g=1","display_name":"Sal","link":"https://stackoverflow.com/users/818060/sal"},"reply_to_user":{"reputation":9503,"user_id":37740,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/f4ee2ca01556290d92524f734c6299d4?s=128&d=identicon&r=PG","display_name":"DragonBorn","link":"https://stackoverflow.com/users/37740/dragonborn"},"edited":false,"score":0,"creation_date":1346014095,"post_id":271874,"comment_id":16229356,"content_license":"CC BY-SA 3.0","body":"@Saj: Why Assertions are only good for testing and dangerous for productive systems? If there is a condition that leads to an error it has to fail also in production. Nevertheless it&#39;s important to have some JUnit test or integration test that checks that assertion.  Furthermore enable assertions with &quot;-ea&quot;"},{"owner":{"reputation":2953,"user_id":241750,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/a265b98dbc06ea425be8f643c9270533?s=128&d=identicon&r=PG","display_name":"Sebastian","link":"https://stackoverflow.com/users/241750/sebastian"},"edited":false,"score":0,"creation_date":1347656258,"post_id":271874,"comment_id":16714109,"content_license":"CC BY-SA 3.0","body":"In the &quot;compare&quot; code your perspective is being unveiled for the fact that if you have nothing to do when <code>NULL</code> is returned for <code>action</code> then why checking for <code>NULL</code>? You make the code looks uglier than just a checking for a non <code>NULL</code> value. Avoiding coding styles, I prefer the way I&#39;ve seen in some android api code while asking for <code>NULL</code>. They just return if the involved method can&#39;t continue working even thought method profile returns void. And if you have to, arrange things previous the return statement. Of course, you are returning and breaking the normal flow of a high level language."},{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"edited":false,"score":2,"creation_date":1350530936,"post_id":271874,"comment_id":17549320,"content_license":"CC BY-SA 3.0","body":"assert is unusable for me, because it has to be explicitly enabled - I want my assertions to always be enabled. Someone said: &quot;but in production how will they help if you never hear about that in odd situations?&quot; Easy - you get an exact and crystal clear failure as near to the root cause of the problem as possible, and can easily patch it with much less effort than reverse engineering the entire system trying to figure out where the failure was. That is why design by contract, fail-fast, no-null design is the only way to go.... and never use &#39;assert&#39;, use a mechanism that is always enabled...."},{"owner":{"reputation":3744,"user_id":726047,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/ea297b7821fd8047fc91a696c791a28b?s=128&d=identicon&r=PG","display_name":"Matthew Kirkley","link":"https://stackoverflow.com/users/726047/matthew-kirkley"},"edited":false,"score":11,"creation_date":1356006313,"post_id":271874,"comment_id":19276614,"content_license":"CC BY-SA 3.0","body":"Instead of the  DO_NOTHING action I would probably create a hasAction(userInput) method, returning a true or false if there is a valid action for that userInput.  Then findAction would return the action or throw an Exception ActionNotFoundException"},{"owner":{"reputation":867,"user_id":452944,"user_type":"registered","accept_rate":42,"profile_image":"https://i.stack.imgur.com/s8Euo.jpg?s=128&g=1","display_name":"FidEliO","link":"https://stackoverflow.com/users/452944/fidelio"},"edited":false,"score":0,"creation_date":1356348262,"post_id":271874,"comment_id":19362809,"content_license":"CC BY-SA 3.0","body":"&quot;although my testing has shown next to no performance impact from assertions&quot;. Your assumption is not based on Oracle documentation. It can highly affect performance in type of system that includes real-time computation."},{"owner":{"reputation":15289,"user_id":444668,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG","display_name":"Jonathan","link":"https://stackoverflow.com/users/444668/jonathan"},"edited":false,"score":1,"creation_date":1357861244,"post_id":271874,"comment_id":19808623,"content_license":"CC BY-SA 3.0","body":"I agree with  MetroidFan2002. he is spot on. returning null can sometimes happen and it is not dirty at all to check for nulls. by all means if you can avoid nulls and always initialise your contracts then you wont need to check nulls"},{"owner":{"reputation":3012,"user_id":704335,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/GwNjA.png?s=128&g=1","display_name":"Timmos","link":"https://stackoverflow.com/users/704335/timmos"},"reply_to_user":{"reputation":15340,"user_id":48553,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/9f841250f16164ae270f1ce286171165?s=128&d=identicon&r=PG","display_name":"Steven Evers","link":"https://stackoverflow.com/users/48553/steven-evers"},"edited":false,"score":6,"creation_date":1358439849,"post_id":271874,"comment_id":20006392,"content_license":"CC BY-SA 3.0","body":"@SnOrfus +1 for mentioning the Null Object design pattern. I learned something here. See <a href=\"http://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_Object_pattern</a>"},{"owner":{"reputation":5772,"user_id":1427758,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/wkL75.jpg?s=128&g=1","display_name":"Anders Lind&#233;n","link":"https://stackoverflow.com/users/1427758/anders-lind%c3%a9n"},"edited":false,"score":2,"creation_date":1358803699,"post_id":271874,"comment_id":20118847,"content_license":"CC BY-SA 3.0","body":"I never return null so I never check return values for null. I never need to think about which variables that are valid. They all are. I never pass null to a method so I never need any input validation in my methods. If it would feel logical to actually have a method that allows a null parameter to be passed, I create two methods instead. Minimizing code duplication by breaking out commons is then important."},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":5,"creation_date":1362618270,"post_id":271874,"comment_id":21526151,"content_license":"CC BY-SA 3.0","body":"I&#39;m against code bloat and agree with this solution. Explicitly checking for NULLs is an anti-pattern IMHO. The Java way is to throw *NotFound/InvalidAccess etc. exceptions which avoids the necessity for the caller to explicitly handle irregular situations. I even go further: use arg.equals(&quot;foo&quot;) instead of &quot;foo&quot;.equals(arg), or use native types (long instead of Long) to implicitly FORCE NPE. Fortunately, when returning a null object, the caller can still try to call a method on that null value and force a NPE. :-)))))"},{"owner":{"reputation":1064,"user_id":378606,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/goEf1.jpg?s=128&g=1","display_name":"Ryan Bennetts","link":"https://stackoverflow.com/users/378606/ryan-bennetts"},"edited":false,"score":7,"creation_date":1366716793,"post_id":271874,"comment_id":23107364,"content_license":"CC BY-SA 3.0","body":"Often, the behaviour you want to implement if an object is null will be similar no matter where you receive the null object. As others have noted, the answer&#39;s DO_NOTHING action is, in fact, The Null Object Pattern (<a href=\"http://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_Object_pattern</a>) which collects this &#39;what do we do if it&#39;s null?&#39; logic in one place and so reduces duplication. However, the Null Object Pattern is really just a more limited version of Martin Fowler&#39;s Special Case Pattern: (<a href=\"http://martinfowler.com/eaaCatalog/specialCase.html\" rel=\"nofollow noreferrer\">martinfowler.com/eaaCatalog/specialCase.html</a>) which is great for eliminating checks for values other than null too."},{"owner":{"reputation":2811,"user_id":173074,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/328bcf45b24e219e3ea9f4c57017b9b1?s=128&d=identicon&r=PG","display_name":"Ricky Clarkson","link":"https://stackoverflow.com/users/173074/ricky-clarkson"},"edited":false,"score":2,"creation_date":1371578448,"post_id":271874,"comment_id":24869695,"content_license":"CC BY-SA 3.0","body":"I&#39;d go for Optional/Option or an exception here.  Returning null is just poison for your caller; they&#39;ll forget to handle it and see a problem far away from the call site."},{"owner":{"reputation":889,"user_id":8735,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a904fdd6d7dbee2b0c86b5f4b27b1dbd?s=128&d=identicon&r=PG","display_name":"Travis Wilson","link":"https://stackoverflow.com/users/8735/travis-wilson"},"reply_to_user":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":2,"creation_date":1393443393,"post_id":271874,"comment_id":33435214,"content_license":"CC BY-SA 3.0","body":"@MetroidFan2002: agreed re: DO_NOTHING, but not quite.  If the find action method cannot find an action, then the method didn&#39;t do what it said it would do. In that case it should not return. It should throw."},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"reply_to_user":{"reputation":889,"user_id":8735,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a904fdd6d7dbee2b0c86b5f4b27b1dbd?s=128&d=identicon&r=PG","display_name":"Travis Wilson","link":"https://stackoverflow.com/users/8735/travis-wilson"},"edited":false,"score":1,"creation_date":1393521708,"post_id":271874,"comment_id":33478205,"content_license":"CC BY-SA 3.0","body":"@TravisWilson If the method was going to throw something, it should throw IllegalArgumentException, not NPE, because it&#39;s explicitly checking for null and doing something with it.  IAE would also handle getting non-null input and not being able to find anything for it as well.  But, nowadays with Java 5+, I would throw NPE IFF the method took an enum constant as a parameter, since you&#39;d have something (one for each enum constant) or nothing if proper practices with enums were observed."},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"reply_to_user":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":1,"creation_date":1393521839,"post_id":271874,"comment_id":33478287,"content_license":"CC BY-SA 3.0","body":"@user1050755 What you are doing with strings is both dangerous and naive.  When you do checking against a literal, you want to know if that literal matches, not if the string is null.  The naive way to do that is as you&#39;ve suggested, with a useless null check: if(stringVar != null &amp;&amp; stringVar.equals(&quot;literal&quot;))  But, this forces you to directly send in null input for testing coverage, resulting in unneeded branches.  &quot;&quot;.equals(stringVar) will always work regardless.  If you know the literal to check on, you should always do this - it&#39;s the safest, easy to read and doesn&#39;t do extra conditions."},{"owner":{"reputation":744,"user_id":1476154,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/d878b45af06f96aa81304df6c694e6af?s=128&d=identicon&r=PG","display_name":"grinch","link":"https://stackoverflow.com/users/1476154/grinch"},"edited":false,"score":3,"creation_date":1393593806,"post_id":271874,"comment_id":33515027,"content_license":"CC BY-SA 3.0","body":"I don&#39;t get why everyone is hating the DO_NOTHING. Sure, in this example it is minimalistic - but this is a programming language... add in an &quot;isEmptyAction()&quot; method to the class... the point is to ENCODE the state of the objects, not return some cryptic-lack-of-a-value that you somehow have to just know to check for... &quot;isEmptyAction()&quot; is an actual API that encodes the fact that an action might be empty/do nothing. Much much much cleaner, imo (and many others, hence the fact that it is it&#39;s own defined design pattern ...)"},{"owner":{"reputation":889,"user_id":8735,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a904fdd6d7dbee2b0c86b5f4b27b1dbd?s=128&d=identicon&r=PG","display_name":"Travis Wilson","link":"https://stackoverflow.com/users/8735/travis-wilson"},"reply_to_user":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":0,"creation_date":1393608978,"post_id":271874,"comment_id":33525735,"content_license":"CC BY-SA 3.0","body":"@MetroidFan2002: absolutely. NPE is not usually the right thing to throw. Not finding a method is a totally legitimate outcome so it should be something specific that the consumer is required to catch. Maybe it&#39;s a result of bad input, in which case I like IllegalArgumentException (but am not thrilled that it&#39;s a RuntimeException). Also by this rule: if the method says it might return an action that does nothing (say, for consumer&#39;s convenience), then returning DO_NOTHING is fine."},{"owner":{"reputation":43377,"user_id":1477667,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/trgKM.jpg?s=128&g=1","display_name":"dfeuer","link":"https://stackoverflow.com/users/1477667/dfeuer"},"edited":false,"score":3,"creation_date":1396228309,"post_id":271874,"comment_id":34681389,"content_license":"CC BY-SA 3.0","body":"Throwing NPE is a very sensible thing to throw when something is null <i>that shouldn&#39;t be</i>. By the way, you should be careful if you&#39;re dealing with concurrency, because something that&#39;s not null when you check it might be null when you use it."},{"owner":{"reputation":632,"user_id":1011979,"user_type":"registered","profile_image":"https://i.stack.imgur.com/w5ptB.jpg?s=128&g=1","display_name":"UFL1138","link":"https://stackoverflow.com/users/1011979/ufl1138"},"reply_to_user":{"reputation":43377,"user_id":1477667,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/trgKM.jpg?s=128&g=1","display_name":"dfeuer","link":"https://stackoverflow.com/users/1477667/dfeuer"},"edited":false,"score":0,"creation_date":1400170553,"post_id":271874,"comment_id":36387573,"content_license":"CC BY-SA 3.0","body":"I just added the final two suggestions to the answer -- the try/catch and the more-meaningful default action.  @dfeuer I don&#39;t think NPE makes sense unless &#39;someInput&#39; is null.  I agree with Travis Wilson that IllegalArgumentException also is not ideal, although it&#39;s not inappropriate.  My suggestion is a custom exception with a meaningful message that can be shown to the user that supplied the bad input."},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"reply_to_user":{"reputation":20138,"user_id":29182,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/af3daf5de4ebd0531d978fad803a46a0?s=128&d=identicon&r=PG","display_name":"Ziggy","link":"https://stackoverflow.com/users/29182/ziggy"},"edited":false,"score":5,"creation_date":1403323588,"post_id":271874,"comment_id":37624891,"content_license":"CC BY-SA 3.0","body":"@Ziggy It&#39;s not that I disagree with the null object pattern, and I use it all the time.  It&#39;s that in this particular case, the method signature is <i>findAction</i>  A DO_NOTHING action, by definition, is NOT FOUND!  That&#39;s lying to your user.  And having the user have to check for DO_NOTHING violates polymorphism - now not <i>all</i> your instances can be used interchangeably.  To put it in perspective, let&#39;s say the method was BigDecimal findBigDecimal(String whatever) - The Null Object pattern does <i>not</i> work here.  Finding something lies to you if zero is returned."},{"owner":{"reputation":30506,"user_id":116509,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/GsYqn.jpg?s=128&g=1","display_name":"artbristol","link":"https://stackoverflow.com/users/116509/artbristol"},"edited":false,"score":0,"creation_date":1406644307,"post_id":271874,"comment_id":38904067,"content_license":"CC BY-SA 3.0","body":"Null Object pattern is more useful than <code>null</code> because sometimes the result isn&#39;t used immediately - it could be stored in a field, for example. You can then distinguish between <code>null</code> caused by an uninitialized field (probably a programming error), vs null as a result of some action."},{"owner":{"reputation":359,"user_id":1264657,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/98adc4bbbc6c1180272e58c42d9f4956?s=128&d=identicon&r=PG","display_name":"Dilruk","link":"https://stackoverflow.com/users/1264657/dilruk"},"edited":false,"score":2,"creation_date":1406832679,"post_id":271874,"comment_id":38996254,"content_license":"CC BY-SA 3.0","body":"CAUTION: Assertions can be disabled and are found to be disabled in production environments."},{"owner":{"reputation":997,"user_id":202630,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0f96121fd8f9dd5c98f38a33c3dc7114?s=128&d=identicon&r=PG","display_name":"Kemal Erdogan","link":"https://stackoverflow.com/users/202630/kemal-erdogan"},"edited":false,"score":1,"creation_date":1410876370,"post_id":271874,"comment_id":40484245,"content_license":"CC BY-SA 3.0","body":"null object pattern is useful for only simple cases because of java&#39;s lack of multiple inheritance. Unfortunately, null is the only value that can stand for an arbitrary object and that is why it is used so widely."},{"owner":{"reputation":416,"user_id":1367414,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ff8fb2b91d470633184505d5e1f15366?s=128&d=identicon&r=PG","display_name":"Xunnamius","link":"https://stackoverflow.com/users/1367414/xunnamius"},"edited":false,"score":0,"creation_date":1415068263,"post_id":271874,"comment_id":42042434,"content_license":"CC BY-SA 3.0","body":"I find myself using the Null Object DP when having the API &quot;always available&quot; is relevant (such as with the Strategy pattern), but I typically find myself simply throwing verbose and meaningful exceptions. I can&#39;t remember the last time I explicitly checked for null in Java (or any real OO language); then again, I don&#39;t code in Java all that often.  I just want to say: this was an epic conversation and a very enlightening read. This is why I come to SO. Thank you all for participating in this."},{"owner":{"reputation":23294,"user_id":3705127,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/b03aedaddfa4dc1c2b331f318a724ec7?s=128&d=identicon&r=PG&f=1","display_name":"sprinter","link":"https://stackoverflow.com/users/3705127/sprinter"},"edited":false,"score":5,"creation_date":1419391715,"post_id":271874,"comment_id":43682532,"content_license":"CC BY-SA 3.0","body":"There is a much better solution for this now in Java8: use an Optional as your return value to represent a nullable value. That way the caller knows that it is an optional value and can use all the methods that Optional provides for handling the value."},{"owner":{"reputation":1404,"user_id":1997707,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/86a28f715dee63c5aec328fc2374b4bd?s=128&d=identicon&r=PG","display_name":"John Mercier","link":"https://stackoverflow.com/users/1997707/john-mercier"},"reply_to_user":{"reputation":23294,"user_id":3705127,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/b03aedaddfa4dc1c2b331f318a724ec7?s=128&d=identicon&r=PG&f=1","display_name":"sprinter","link":"https://stackoverflow.com/users/3705127/sprinter"},"edited":false,"score":1,"creation_date":1424800722,"post_id":271874,"comment_id":45695711,"content_license":"CC BY-SA 3.0","body":"I like the idea of a DO_NOTHING action but nobody seems to mention throwing an IllegalArgumentException. If the argument is invalid this seems like a good response. The method will need to have proper documentation either way. Also @sprinter returning a DO_NOTHING action is very similar to Optional. Both have the goal of not returning null. I&#39;m not convinced that Optional is &quot;a much better solution&quot; though."},{"owner":{"reputation":8749,"user_id":1953590,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/b7f981d575a65b685a5ead903fcbfbf6?s=128&d=identicon&r=PG&f=1","display_name":"Kevin Krumwiede","link":"https://stackoverflow.com/users/1953590/kevin-krumwiede"},"edited":false,"score":4,"creation_date":1425926907,"post_id":271874,"comment_id":46153003,"content_license":"CC BY-SA 3.0","body":"By and large, the problem is not that developers don&#39;t know or trust the contracts; the problem is that there <i>are</i> no contracts.  In my experience with the Android SDKs published by several hardware vendors, there is either no documentation or no useful documentation.  The code mills in Hong Kong and Bangalore have never even heard of Javadoc."},{"owner":{"reputation":5651,"user_id":2950618,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/4EUKo.jpg?s=128&g=1","display_name":"Josh","link":"https://stackoverflow.com/users/2950618/josh"},"edited":false,"score":1,"creation_date":1437126804,"post_id":271874,"comment_id":50911406,"content_license":"CC BY-SA 3.0","body":"As an electronic eng. turned into a programmer, this topics spin my head as I try to learn more XD"},{"owner":{"reputation":344,"user_id":1548580,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5a8125420b52efb09255cd8ddcb0eb9f?s=128&d=identicon&r=PG","display_name":"Demonblack","link":"https://stackoverflow.com/users/1548580/demonblack"},"edited":false,"score":0,"creation_date":1473871663,"post_id":271874,"comment_id":66308941,"content_license":"CC BY-SA 3.0","body":"throwing an Error just because someone passed a null file path to your file opener thingy is extremely overkill. Imagine if someone used that inside an application server."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":1,"creation_date":1479899672,"post_id":271874,"comment_id":68750281,"content_license":"CC BY-SA 3.0","body":"The real question is WHEN null is valid response and when is not. And what would be that very contract for software to be least cluttered with boilerplate code."},{"owner":{"reputation":395,"user_id":5649397,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-wUyZ0To9Eeg/AAAAAAAAAAI/AAAAAAAACOw/L0taSLzpRPk/photo.jpg?sz=128","display_name":"Pascal Schneider","link":"https://stackoverflow.com/users/5649397/pascal-schneider"},"edited":false,"score":1,"creation_date":1488207646,"post_id":271874,"comment_id":72117329,"content_license":"CC BY-SA 3.0","body":"Since Java 8, I always use Optional for cases like this. From the point of readybility it&#39;s not a big difference IMO, but it looks a bit more aesthetic. So instead of <code>if (obj != null)</code> I write <code>if (objOpt.isPresent())</code>"},{"owner":{"reputation":2186,"user_id":4669984,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6e14021aae7f6d223e60ac4bd035440f?s=128&d=identicon&r=PG","display_name":"Tarun Maganti","link":"https://stackoverflow.com/users/4669984/tarun-maganti"},"reply_to_user":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":0,"creation_date":1491903809,"post_id":271874,"comment_id":73747704,"content_license":"CC BY-SA 3.0","body":"@MetroidFan2002 Added to your statement - <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern#Criticism\" rel=\"nofollow noreferrer\">Criticism of NullObjectPattern</a>"},{"owner":{"reputation":499,"user_id":2146861,"user_type":"registered","profile_image":"https://i.stack.imgur.com/n0OZi.png?s=128&g=1","display_name":"Osmar","link":"https://stackoverflow.com/users/2146861/osmar"},"edited":false,"score":2,"creation_date":1514387838,"post_id":271874,"comment_id":82957104,"content_license":"CC BY-SA 3.0","body":"I&#39;ve seen too many dumb NullPointer exceptions in Production as to think that defensively checking for nulls is a &quot;Junior to Intermediate developers problem&quot;   In my opinion, always, always do Null checking"},{"owner":{"reputation":933,"user_id":2315306,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/7669fc69a2d2b76324952a5858be06e5?s=128&d=identicon&r=PG","display_name":"Singed","link":"https://stackoverflow.com/users/2315306/singed"},"reply_to_user":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":2,"creation_date":1516653856,"post_id":271874,"comment_id":83767648,"content_license":"CC BY-SA 3.0","body":"@MetroidFan2002  &quot;If the find action method cannot find an action, then returning null is the right thing to do&quot; This is totally up to the designer of the program to decide whether an action that doesn&#39;t do anything fits his use case. it is totally valid to return an action that doesn&#39;t do anything if it fits your design. You imply that real/fake action differentiation is important to the caller, but both approaches are valid according to your use case.  The case where not found action is important to the caller is also legit, but can be communicated through other means than returning null"},{"owner":{"reputation":808,"user_id":7417104,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0118a89d1f7d3ce5ae8b308fbd99d10e?s=128&d=identicon&r=PG&f=1","display_name":"JFreeman","link":"https://stackoverflow.com/users/7417104/jfreeman"},"edited":false,"score":0,"creation_date":1516867472,"post_id":271874,"comment_id":83867327,"content_license":"CC BY-SA 3.0","body":"As a person new to java i find it interesting that people would find it useful to do this. Why would a programmer not always instead write a <code>try</code>/<code>catch</code> statement and use that to avoid and resolve errors?"},{"owner":{"reputation":3683,"user_id":203476,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/838b591b09fc19aae77b84c63ddbe633?s=128&d=identicon&r=PG","display_name":"Rasmus Kaj","link":"https://stackoverflow.com/users/203476/rasmus-kaj"},"edited":false,"score":1,"creation_date":1518096794,"post_id":271874,"comment_id":84370984,"content_license":"CC BY-SA 3.0","body":"The second half of this example basically says do not use Java.  While that might be a good idea, sometimes you don&#39;t have a choise.  And in java, null is a valid value."},{"owner":{"reputation":8069,"user_id":11892,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/7e11e5f17f34e61ead04b0e78aa68e2a?s=128&d=identicon&r=PG","display_name":"bltxd","link":"https://stackoverflow.com/users/11892/bltxd"},"edited":false,"score":1,"creation_date":1519392070,"post_id":271874,"comment_id":84903771,"content_license":"CC BY-SA 3.0","body":"A find method opens up the possibility that it didn&#39;t find what we were looking for. A habit that works well for me is to use 2 distinct verbs for functions which can obviously fail: findXXX may fail and as such may return null or better an option, getXXX may only fail by throwing an exception. I&#39;ve also seen variants such as find vs find_exn or find vs find_opt. One way or the other, as long as the usage is regular this is fine."},{"owner":{"reputation":344,"user_id":1548580,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5a8125420b52efb09255cd8ddcb0eb9f?s=128&d=identicon&r=PG","display_name":"Demonblack","link":"https://stackoverflow.com/users/1548580/demonblack"},"edited":false,"score":0,"creation_date":1566818133,"post_id":271874,"comment_id":101763248,"content_license":"CC BY-SA 4.0","body":"The NOP approach is almost never a good one, in my opinion. Like others have said, it may hide deeper flaws in your program so that they only get found in production after weeks of troubleshooting. That&#39;s not always the case, obviously, but I would be extremely wary of using it. The rigorous and arguably correct answer to &quot;find me X&quot; when you don&#39;t find it is to return null if you expect it to possibly not be found, or throw an exception if it&#39;s not an expected outcome. (e.g. I would expect a findByName method to be able to return null, but a getById never should.)"},{"owner":{"reputation":4680,"user_id":4619958,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/cVA9W.png?s=128&g=1","display_name":"ch271828n","link":"https://stackoverflow.com/users/4619958/ch271828n"},"edited":false,"score":0,"creation_date":1583145188,"post_id":271874,"comment_id":107004848,"content_license":"CC BY-SA 4.0","body":"How about using the <code>Optional&lt;T&gt;</code>?"},{"owner":{"reputation":11425,"user_id":1540818,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1","display_name":"Joffrey","link":"https://stackoverflow.com/users/1540818/joffrey"},"edited":false,"score":0,"creation_date":1583250561,"post_id":271874,"comment_id":107049019,"content_license":"CC BY-SA 4.0","body":"How about using Kotlin?"},{"owner":{"reputation":705,"user_id":1346501,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/4dd33cc129cd1ee5806028665edd1255?s=128&d=identicon&r=PG","display_name":"Vanja D.","link":"https://stackoverflow.com/users/1346501/vanja-d"},"edited":false,"score":1,"creation_date":1601995745,"post_id":271874,"comment_id":113576009,"content_license":"CC BY-SA 4.0","body":"There is no one-good-pattern, common sense should dictate approaches. Contracts, null-checks, null-object-patterns, empty strings, assertions, try-catch blocks - they are all valid for their specific use-case. The programmers&#39; quest for the one true golden hammer for all nails is for me just an excuse to fall-back on a &quot;agreed approach&quot; and not think and design your code properly. Sometimes you need a NOP, sometimes you need to fail fast, sometimes you need to simplify and set empty values as defaults. Just do whatever makes the system most robust, reliable, maintainable and error-free."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":0,"creation_date":1609007067,"post_id":271874,"comment_id":115729449,"content_license":"CC BY-SA 4.0","body":"I believe that having asserts disabled by default was an incorrect decision.  The default should be the safest, and then you can add tuning flags to your production deployment."}],"owner":{"reputation":573319,"user_id":18393,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/2f364c2e36b52bc80296cbf23da8b231?s=128&d=identicon&r=PG","display_name":"cletus","link":"https://stackoverflow.com/users/18393/cletus"},"comment_count":55,"is_accepted":true,"community_owned_date":1319187757,"score":2716,"last_activity_date":1435357953,"last_edit_date":1435357953,"creation_date":1226059600,"answer_id":271874,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>This to me sounds like a reasonably common problem that junior to intermediate developers tend to face at some point: they either don't know or don't trust the contracts they are participating in and defensively overcheck for nulls.  Additionally, when writing their own code, they tend to rely on returning nulls to indicate something thus requiring the caller to check for nulls.</p>\n\n<p>To put this another way, there are two instances where null checking comes up:</p>\n\n<ol>\n<li><p>Where null is a valid response in terms of the contract; and</p></li>\n<li><p>Where it isn't a valid response.</p></li>\n</ol>\n\n<p>(2) is easy.  Either use <code>assert</code> statements (assertions) or allow failure (for example,  <a href=\"http://docs.oracle.com/javase/6/docs/api/index.html?java/lang/NullPointerException.html\" rel=\"noreferrer\">NullPointerException</a>).  Assertions are a highly-underused Java feature that was added in 1.4.  The syntax is:</p>\n\n<pre><code>assert &lt;condition&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>assert &lt;condition&gt; : &lt;object&gt;\n</code></pre>\n\n<p>where <code>&lt;condition&gt;</code> is a boolean expression and <code>&lt;object&gt;</code> is an object whose <code>toString()</code> method's output will be included in the error.</p>\n\n<p>An <code>assert</code> statement throws an <code>Error</code> (<code>AssertionError</code>) if the condition is not true.  By default, Java ignores assertions.  You can enable assertions by passing the option <code>-ea</code> to the JVM.  You can enable and disable assertions for individual classes and packages.  This means that you can validate code with the assertions while developing and testing, and disable them in a production environment, although my testing has shown next to no performance impact from assertions.</p>\n\n<p>Not using assertions in this case is OK because the code will just fail, which is what will happen if you use assertions.  The only difference is that with assertions it might happen sooner, in a more-meaningful way and possibly with extra information, which may help you to figure out why it happened if you weren't expecting it.</p>\n\n<p>(1) is a little harder.  If you have no control over the code you're calling then you're stuck.  If null is a valid response, you have to check for it.</p>\n\n<p>If it's code that you do control, however (and this is often the case), then it's a different story.  Avoid using nulls as a response.  With methods that return collections, it's easy: return empty collections (or arrays) instead of nulls pretty much all the time.</p>\n\n<p>With non-collections it might be harder.  Consider this as an example: if you have these interfaces:</p>\n\n<pre><code>public interface Action {\n  void doSomething();\n}\n\npublic interface Parser {\n  Action findAction(String userInput);\n}\n</code></pre>\n\n<p>where Parser takes raw user input and finds something to do, perhaps if you're implementing a command line interface for something.  Now you might make the contract that it returns null if there's no appropriate action.  That leads the null checking you're talking about.</p>\n\n<p>An alternative solution is to never return null and instead use the <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"noreferrer\">Null Object pattern</a>:</p>\n\n<pre><code>public class MyParser implements Parser {\n  private static Action DO_NOTHING = new Action() {\n    public void doSomething() { /* do nothing */ }\n  };\n\n  public Action findAction(String userInput) {\n    // ...\n    if ( /* we can't find any actions */ ) {\n      return DO_NOTHING;\n    }\n  }\n}\n</code></pre>\n\n<p>Compare:</p>\n\n<pre><code>Parser parser = ParserFactory.getParser();\nif (parser == null) {\n  // now what?\n  // this would be an example of where null isn't (or shouldn't be) a valid response\n}\nAction action = parser.findAction(someInput);\nif (action == null) {\n  // do nothing\n} else {\n  action.doSomething();\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>ParserFactory.getParser().findAction(someInput).doSomething();\n</code></pre>\n\n<p>which is a much better design because it leads to more concise code.</p>\n\n<p>That said, perhaps it is entirely appropriate for the findAction() method to throw an Exception with a meaningful error message -- especially in this case where you are relying on user input.  It would be much better for the findAction method to throw an Exception than for the calling method to blow up with a simple NullPointerException with no explanation.</p>\n\n<pre><code>try {\n    ParserFactory.getParser().findAction(someInput).doSomething();\n} catch(ActionNotFoundException anfe) {\n    userConsole.err(anfe.getMessage());\n}\n</code></pre>\n\n<p>Or if you think the try/catch mechanism is too ugly, rather than Do Nothing your default action should provide feedback to the user.</p>\n\n<pre><code>public Action findAction(final String userInput) {\n    /* Code to return requested Action if found */\n    return new Action() {\n        public void doSomething() {\n            userConsole.err(\"Action not found: \" + userInput);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3245,"user_id":181551,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/5bdec1e17ffb5c23f339bf527434a067?s=128&d=identicon&r=PG","display_name":"Alex Worden","link":"https://stackoverflow.com/users/181551/alex-worden"},"edited":false,"score":42,"creation_date":1306174456,"post_id":275869,"comment_id":7073436,"content_license":"CC BY-SA 3.0","body":"I agree - only in that situation. I can&#39;t stand programmers that have taken this to the next unnecessary level and write if (null != myVar)... just looks ugly to me and serves no purpose!"},{"owner":{"reputation":2283,"user_id":707372,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/f8bd30bbbd029804a5dfe8aa210dba15?s=128&d=identicon&r=PG","display_name":"Stef","link":"https://stackoverflow.com/users/707372/stef"},"edited":false,"score":20,"creation_date":1316740838,"post_id":275869,"comment_id":9112892,"content_license":"CC BY-SA 3.0","body":"This is a particular example, probably the most used, of a general good practice: if you know it, always do <code>&lt;object that you know that is not null&gt;.equals(&lt;object that might be null&gt;);</code>. It works for other methods other than <code>equals</code> if you know the contract and those methods can handle <code>null</code> parameters."},{"owner":{"reputation":4547,"user_id":335227,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/9686693c6b9ac45105929e9fadf60cc5?s=128&d=identicon&r=PG","display_name":"Erin Drummond","link":"https://stackoverflow.com/users/335227/erin-drummond"},"edited":false,"score":9,"creation_date":1380569824,"post_id":275869,"comment_id":28243298,"content_license":"CC BY-SA 3.0","body":"This is the first example I have seen of <a href=\"http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html\" rel=\"nofollow noreferrer\">Yoda Conditions</a> that actually makes sense"},{"owner":{"reputation":10277,"user_id":1022330,"user_type":"registered","accept_rate":51,"profile_image":"https://i.stack.imgur.com/sfSrX.png?s=128&g=1","display_name":"Oliver Watkins","link":"https://stackoverflow.com/users/1022330/oliver-watkins"},"edited":false,"score":6,"creation_date":1399880942,"post_id":275869,"comment_id":36232608,"content_license":"CC BY-SA 3.0","body":"NullPointerExceptions are thrown for a reason. They are thrown because an object is null where it shouldn&#39;t be. It is the programmers job to FIX this, not HIDE the problem."},{"owner":{"reputation":4160,"user_id":528617,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/4hEuv.png?s=128&g=1","display_name":"Arnab Datta","link":"https://stackoverflow.com/users/528617/arnab-datta"},"edited":false,"score":0,"creation_date":1448528235,"post_id":275869,"comment_id":55628422,"content_license":"CC BY-SA 3.0","body":"This only hides the problem. What if you are using  <code>foo</code> later on? If a variable shouldn&#39;t be null, but is...your app needs to get a NPE so you as the developer can actually fix the underlying reason."}],"owner":{"reputation":8816,"user_id":35915,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/db138ec73265ba36523518cb94544da5?s=128&d=identicon&r=PG","display_name":"echox","link":"https://stackoverflow.com/users/35915/echox"},"comment_count":5,"is_accepted":false,"community_owned_date":1319187757,"score":197,"last_activity_date":1527262430,"last_edit_date":1527262430,"creation_date":1226233498,"answer_id":275869,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>Only for this situation -</p>\n\n<p>Not checking if a variable is null before invoking an equals method (a string compare example below):</p>\n\n<pre><code>if ( foo.equals(\"bar\") ) {\n // ...\n}\n</code></pre>\n\n<p>will result in a <code>NullPointerException</code> if <code>foo</code> doesn't exist.</p>\n\n<p>You can avoid that if you compare your <code>String</code>s like this:</p>\n\n<pre><code>if ( \"bar\".equals(foo) ) {\n // ...\n}\n</code></pre>\n"},{"owner":{"reputation":182757,"user_id":20654,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/94066dfa49c2feb14706cb081848fda7?s=128&d=identicon&r=PG","display_name":"OscarRyz","link":"https://stackoverflow.com/users/20654/oscarryz"},"comment_count":0,"is_accepted":false,"community_owned_date":1226614084,"score":22,"last_activity_date":1380578784,"last_edit_date":1380578784,"creation_date":1226614084,"answer_id":288524,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I've tried the <code>NullObjectPattern</code> but for me is not always the best way to go. There are sometimes when a \"no action\" is not appropiate.</p>\n\n<p><code>NullPointerException</code> is a <em>Runtime exception</em> that means it's developers fault and with enough experience it tells you exactly where is the error.</p>\n\n<p>Now to the answer:</p>\n\n<p>Try to make all your attributes and its accessors as private as possible or avoid to  expose them to the clients at all. You can have the argument values in the constructor of course, but by reducing the scope you don't let the client class pass an invalid value. If you need to modify the values, you can always create a new <code>object</code>.  You check the values in the constructor only <strong>once</strong> and in the rest of the methods you can be almost sure that the values are not null.</p>\n\n<p>Of course, experience is the better way to understand and apply this suggestion.</p>\n\n<p>Byte!</p>\n"},{"comments":[{"owner":{"reputation":1438,"user_id":27241,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/711b8e982c036b7ba32e521245b5921f?s=128&d=identicon&r=PG","display_name":"mysomic","link":"https://stackoverflow.com/users/27241/mysomic"},"edited":false,"score":71,"creation_date":1242689180,"post_id":397740,"comment_id":687430,"content_license":"CC BY-SA 2.5","body":"mmm, what is the difference? p.getAge() would throw the same NPE with less overhead and a clearer stack trace. What am I missing?"},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":16,"creation_date":1243338977,"post_id":397740,"comment_id":718130,"content_license":"CC BY-SA 2.5","body":"It is better to throw an IllegalArgumentException(&quot;e == null&quot;) in your example as it clearly indicates that it is a programmer-intended exception (along with enough information to actually allow the maintainer to identify the problem).  NullPointerExceptions should be reserved for the JVM, as it then clearly indicates that this was unintentional (and usually happens somewhere hard to identify)"},{"owner":{"reputation":10537,"user_id":454470,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9980ffbd4749bf379df1a38e16f42f17?s=128&d=identicon&r=PG","display_name":"Steven Benitez","link":"https://stackoverflow.com/users/454470/steven-benitez"},"edited":false,"score":6,"creation_date":1297630552,"post_id":397740,"comment_id":5570462,"content_license":"CC BY-SA 2.5","body":"This is now part of Google Guava."},{"owner":{"reputation":3245,"user_id":181551,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/5bdec1e17ffb5c23f339bf527434a067?s=128&d=identicon&r=PG","display_name":"Alex Worden","link":"https://stackoverflow.com/users/181551/alex-worden"},"edited":false,"score":35,"creation_date":1335208270,"post_id":397740,"comment_id":13234275,"content_license":"CC BY-SA 3.0","body":"Smells like over-engineering to me. Just let the JVM throw an NPE and don&#39;t clutter your code with this junk."},{"owner":{"reputation":6616,"user_id":886749,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/d8206b3ff36c7985108359f97562a9a4?s=128&d=identicon&r=PG","display_name":"Cory Kendall","link":"https://stackoverflow.com/users/886749/cory-kendall"},"edited":false,"score":6,"creation_date":1353565563,"post_id":397740,"comment_id":18487290,"content_license":"CC BY-SA 3.0","body":"I like it and open most methods and constructors with explicit checks on the arguments; if there is an error, methods always fail on the first few lines and I know the offending reference without finding something like <code>getThing().getItsThing().getOtherThing().wowEncapsulationIsB&zwnj;&#8203;roken().setLol(&quot;hi&quot;)&zwnj;&#8203;;</code>"},{"owner":{"reputation":607,"user_id":153339,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a30f8217f504fd0aba5aaa0ba7afb817?s=128&d=identicon&r=PG","display_name":"Matt","link":"https://stackoverflow.com/users/153339/matt"},"edited":false,"score":2,"creation_date":1407902981,"post_id":397740,"comment_id":39390256,"content_license":"CC BY-SA 3.0","body":"Java 1.7 added the <code>java.util.Objects.requireNonNull</code> method (amongst others) that does exactly this. It&#39;s such a common idiom that I&#39;m amazed it took this long!"},{"owner":{"reputation":694,"user_id":2375159,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/5909970eca6cbf5c556a80490140361a?s=128&d=identicon&r=PG&f=1","display_name":"gorefest","link":"https://stackoverflow.com/users/2375159/gorefest"},"edited":false,"score":0,"creation_date":1540839703,"post_id":397740,"comment_id":93003825,"content_license":"CC BY-SA 4.0","body":"just for interest... what is the difference between checkNotNull(bla).foo() and bla.foo() if both may throw a NPE in case of null? zero benefits, right?"},{"owner":{"reputation":602,"user_id":6122976,"user_type":"registered","profile_image":"https://i.stack.imgur.com/7Mc2a.jpg?s=128&g=1","display_name":"wilmol","link":"https://stackoverflow.com/users/6122976/wilmol"},"reply_to_user":{"reputation":694,"user_id":2375159,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/5909970eca6cbf5c556a80490140361a?s=128&d=identicon&r=PG&f=1","display_name":"gorefest","link":"https://stackoverflow.com/users/2375159/gorefest"},"edited":false,"score":0,"creation_date":1563761706,"post_id":397740,"comment_id":100792549,"content_license":"CC BY-SA 4.0","body":"@gorefest <code>checkNotNull</code> returns the value, so you can assign your fields in constructor with it. E.g. <code>this.foo = checkNotNull(foo)</code>, also more readable (it shows you want to enforce non nulls, not some random method call), also what if the param has no methods to call, or methods require many arguments. Lastly <code>checkNotNull</code> supports custom error message."}],"owner":{"reputation":7432,"user_id":1356709,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/7cb1b8575a9a8c332a51b345550a3c6b?s=128&d=identicon&r=PG","display_name":"user2427","link":"https://stackoverflow.com/users/1356709/user2427"},"comment_count":8,"is_accepted":false,"community_owned_date":1319187757,"score":79,"last_activity_date":1442678747,"last_edit_date":1442678747,"creation_date":1230558607,"answer_id":397740,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>The Google collections framework offers a good and elegant way to achieve the null check.</p>\n\n<p>There is a method in a library class like this:</p>\n\n<pre><code>static &lt;T&gt; T checkNotNull(T e) {\n   if (e == null) {\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n\n<p>And the usage is (with <code>import static</code>):</p>\n\n<pre><code>...\nvoid foo(int a, Person p) {\n   if (checkNotNull(p).getAge() &gt; a) {\n      ...\n   }\n   else {\n      ...\n   }\n}\n...\n</code></pre>\n\n<p>Or in your example:</p>\n\n<pre><code>checkNotNull(someobject).doCalc();\n</code></pre>\n"},{"comments":[{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":21,"creation_date":1243338843,"post_id":452820,"comment_id":718115,"content_license":"CC BY-SA 2.5","body":"I think this is wrong.  There should be a way to specify that a given variable is ALWAYS non-null."},{"owner":{"reputation":10412,"user_id":1996,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/5fcecc0c487aacd484a51351f2a8d595?s=128&d=identicon&r=PG","display_name":"Boris Terzic","link":"https://stackoverflow.com/users/1996/boris-terzic"},"edited":false,"score":5,"creation_date":1251572194,"post_id":452820,"comment_id":1188327,"content_license":"CC BY-SA 2.5","body":"Update: the proposal will not make Java7. See <a href=\"http://blogs.sun.com/darcy/entry/project_coin_final_five\" rel=\"nofollow noreferrer\">blogs.sun.com/darcy/entry/project_coin_final_five</a> ."},{"owner":{"reputation":19374,"user_id":13140,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/f0720ad6a8c5589e573d15e9a75438d4?s=128&d=identicon&r=PG","display_name":"Ogre Psalm33","link":"https://stackoverflow.com/users/13140/ogre-psalm33"},"edited":false,"score":2,"creation_date":1291986031,"post_id":452820,"comment_id":4807915,"content_license":"CC BY-SA 2.5","body":"But on the same page, see the link to <a href=\"http://types.cs.washington.edu/jsr308/\" rel=\"nofollow noreferrer\">types.cs.washington.edu/jsr308</a> for info about using the Checker framework to add the @Nullable and @NonNull type annotations in Java 7."},{"owner":{"reputation":10397,"user_id":346741,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/a6d0a3771b08d19c92ca8c8edb262fb0?s=128&d=identicon&r=PG","display_name":"Rob","link":"https://stackoverflow.com/users/346741/rob"},"edited":false,"score":10,"creation_date":1337169118,"post_id":452820,"comment_id":13759049,"content_license":"CC BY-SA 3.0","body":"Interesting idea but the choice of syntax is absurd; I don&#39;t want a codebase full of question marks pinned into every joint."},{"owner":{"reputation":20209,"user_id":446921,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/db9ae27234bc59746a27fd63accabd12?s=128&d=identicon&r=PG","display_name":"Muhd","link":"https://stackoverflow.com/users/446921/muhd"},"edited":false,"score":8,"creation_date":1360968803,"post_id":452820,"comment_id":20906944,"content_license":"CC BY-SA 3.0","body":"This operator exists in <a href=\"http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator\" rel=\"nofollow noreferrer\">Groovy</a>, so those who want to use it still have that as an option."},{"owner":{"reputation":23294,"user_id":3705127,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/b03aedaddfa4dc1c2b331f318a724ec7?s=128&d=identicon&r=PG&f=1","display_name":"sprinter","link":"https://stackoverflow.com/users/3705127/sprinter"},"edited":false,"score":3,"creation_date":1419391793,"post_id":452820,"comment_id":43682548,"content_license":"CC BY-SA 3.0","body":"Optional was added to Java8"},{"owner":{"reputation":1192,"user_id":5394981,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fc5b4002ea2221d26b83f57a432d6005?s=128&d=identicon&r=PG&f=1","display_name":"Victor","link":"https://stackoverflow.com/users/5394981/victor"},"edited":false,"score":9,"creation_date":1443733040,"post_id":452820,"comment_id":53622754,"content_license":"CC BY-SA 3.0","body":"This is the most ingenious idea I&#39;ve seen. It should be added to every sensible language of the C syntax. I&#39;d rather &quot;pin question marks&quot; everywhere than scroll through screenful of lines or dodge &quot;guard clauses&quot; all day."},{"owner":{"reputation":14558,"user_id":1833961,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/WzG31.png?s=128&g=1","display_name":"bvdb","link":"https://stackoverflow.com/users/1833961/bvdb"},"edited":false,"score":4,"creation_date":1461420745,"post_id":452820,"comment_id":61196583,"content_license":"CC BY-SA 3.0","body":"Tony Hoare apologised for inventing <code>null</code>. But an even bigger mistake is to pick a strategy, to stick to it for over 20 years until billions lines of code are written, to then finally change your mind. This <code>.?</code> was like a last chance to keep java &quot;clean&quot;. It&#39;s a very simple syntactical solution. But instead they prefer to throw in a handful of different <code>@Nullable</code> and <code>Option</code> classes, empty collections, empty objects. The goal was to make nullability easier. But instead they added many layers of complexity. In the end, this will split the java community and will drive it to distruction."},{"owner":{"reputation":1731,"user_id":2683399,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/9fb725b3ff34efdbbf8a020a3ed30877?s=128&d=identicon&r=PG&f=1","display_name":"IceArdor","link":"https://stackoverflow.com/users/2683399/iceardor"},"edited":false,"score":4,"creation_date":1494578014,"post_id":452820,"comment_id":74898410,"content_license":"CC BY-SA 3.0","body":"Kotlin has the null safe call operators, too. <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/null-safety.html#safe-calls</a>"}],"owner":{"reputation":247550,"user_id":3474,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ffbf4e85b8ffbae4e9039b9c0cf07bc8?s=128&d=identicon&r=PG","display_name":"erickson","link":"https://stackoverflow.com/users/3474/erickson"},"comment_count":9,"is_accepted":false,"community_owned_date":1319187757,"score":243,"last_activity_date":1442790747,"last_edit_date":1442790747,"creation_date":1232168915,"answer_id":452820,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Wow, I almost hate to add another answer when we have 57 different ways to recommend the <code>NullObject pattern</code>, but I think that some people interested in this question may like to know that there is a proposal on the table for Java 7 to add <a href=\"http://tech.puredanger.com/java7/#null\" rel=\"noreferrer\">\"null-safe handling\"</a>&mdash;a streamlined syntax for if-not-equal-null logic.</p>\n\n<p>The example given by Alex Miller looks like this:</p>\n\n<pre><code>public String getPostcode(Person person) {  \n  return person?.getAddress()?.getPostcode();  \n}  \n</code></pre>\n\n<p>The <code>?.</code> means only de-reference the left identifier if it is not null, otherwise evaluate the remainder of the expression as <code>null</code>. Some people, like Java Posse member Dick Wall and the <a href=\"http://blog.joda.org/2008/12/jdk-7-language-changes-devoxx-votes_3751.html\" rel=\"noreferrer\">voters at Devoxx</a> really love this proposal, but there is opposition too, on the grounds that it will actually encourage more use of <code>null</code> as a sentinel value.</p>\n\n<hr>\n\n<p><em>Update:</em> An <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html\" rel=\"noreferrer\">official proposal</a> for a null-safe operator in Java 7 has been submitted under <a href=\"http://openjdk.java.net/projects/coin/\" rel=\"noreferrer\">Project Coin.</a> The syntax is a little different than the example above, but it's the same notion.</p>\n\n<hr>\n\n<p><em>Update:</em> The null-safe operator proposal didn't make it into Project Coin. So, you won't be seeing this syntax in Java 7.</p>\n"},{"comments":[{"owner":{"reputation":472,"user_id":2583402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aa7cdd11f37d46816f9d546652d4deb8?s=128&d=identicon&r=PG","display_name":"mtsahakis","link":"https://stackoverflow.com/users/2583402/mtsahakis"},"edited":false,"score":4,"creation_date":1537212543,"post_id":1202969,"comment_id":91693787,"content_license":"CC BY-SA 4.0","body":"I am not familiar with Nice, but Kotlin implements the same idea, have nullable and not-null types build into the language&#39;s type system. A lot more concise than Optionals or null Object pattern."}],"owner":{"reputation":324869,"user_id":16883,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0382297f273df0a544b0c6c2734de096?s=128&d=identicon&r=PG","display_name":"Michael Borgwardt","link":"https://stackoverflow.com/users/16883/michael-borgwardt"},"comment_count":1,"is_accepted":false,"community_owned_date":1319187757,"score":52,"last_activity_date":1442678955,"last_edit_date":1442678955,"creation_date":1248900758,"answer_id":1202969,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Ultimately, the only way to completely solve this problem is by using a different programming language:</p>\n\n<ul>\n<li>In Objective-C, you can do the equivalent of invoking a method on <code>nil</code>, and absolutely nothing will happen. This makes most null checks unnecessary, but it can make errors much harder to diagnose.</li>\n<li>In <a href=\"http://nice.sourceforge.net/safety.html#id2487946\" rel=\"noreferrer\">Nice</a>, a Java-derived language, there are two versions of all types: a potentially-null version and a not-null version. You can only invoke methods on not-null types. Potentially-null types can be converted to not-null types through explicit checking for null. This makes it much easier to know where null checks are necessary and where they aren't.</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":1691,"user_id":59441,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/2f8365a8819284083d016a849f6fad95?s=128&d=identicon&r=PG","display_name":"Ben Hardy","link":"https://stackoverflow.com/users/59441/ben-hardy"},"edited":false,"score":22,"creation_date":1305916263,"post_id":2064441,"comment_id":7037844,"content_license":"CC BY-SA 3.0","body":"Indeed, the Option pattern is awesome. Some Java equivalents exist. Guava contains a limited version of this called Optional which leaves out most of the functional stuff. In Haskell, this pattern is called Maybe."},{"owner":{"reputation":19024,"user_id":90874,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/ca9ad8740c96cb9cc002423ab38ee930?s=128&d=identicon&r=PG","display_name":"thSoft","link":"https://stackoverflow.com/users/90874/thsoft"},"reply_to_user":{"reputation":4546,"user_id":4206,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/cd40128e044f39d7063b5cfdeace80f6?s=128&d=identicon&r=PG","display_name":"Luca Molteni","link":"https://stackoverflow.com/users/4206/luca-molteni"},"edited":false,"score":0,"creation_date":1315774751,"post_id":2064441,"comment_id":8911858,"content_license":"CC BY-SA 3.0","body":"@Luca Molteni: You&#39;re absolutely right, I already commented on the post to request expanding it. :)"},{"owner":{"reputation":13924,"user_id":315677,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/s1vD0.png?s=128&g=1","display_name":"Pierre Henry","link":"https://stackoverflow.com/users/315677/pierre-henry"},"edited":false,"score":10,"creation_date":1366901953,"post_id":2064441,"comment_id":23194192,"content_license":"CC BY-SA 3.0","body":"An Optional class will be available in Java 8"},{"owner":{"reputation":19024,"user_id":90874,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/ca9ad8740c96cb9cc002423ab38ee930?s=128&d=identicon&r=PG","display_name":"thSoft","link":"https://stackoverflow.com/users/90874/thsoft"},"edited":false,"score":1,"creation_date":1366903685,"post_id":2064441,"comment_id":23195349,"content_license":"CC BY-SA 3.0","body":"...and it doesn&#39;t (yet) have map nor flatMap: <a href=\"http://download.java.net/jdk8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">download.java.net/jdk8/docs/api/java/util/Optional.html</a>"},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"edited":false,"score":3,"creation_date":1383538557,"post_id":2064441,"comment_id":29368433,"content_license":"CC BY-SA 3.0","body":"The Optional pattern doesn&#39;t solve anything; instead of one potentially null object, now you have two."},{"owner":{"reputation":27974,"user_id":706317,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/1mafF.jpg?s=128&g=1","display_name":"ZhekaKozlov","link":"https://stackoverflow.com/users/706317/zhekakozlov"},"edited":false,"score":0,"creation_date":1386652072,"post_id":2064441,"comment_id":30618761,"content_license":"CC BY-SA 3.0","body":"Also, look at Functional Guava Extensions (fugue). This library also has its own Option."},{"owner":{"reputation":27563,"user_id":180719,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/AWsdT.png?s=128&g=1","display_name":"Olivier Gr&#233;goire","link":"https://stackoverflow.com/users/180719/olivier-gr%c3%a9goire"},"edited":false,"score":0,"creation_date":1456850880,"post_id":2064441,"comment_id":59132166,"content_license":"CC BY-SA 3.0","body":"Guava&#39;s <code>Optional</code> is not good in this case as <code>transform</code> throws an NPE when the function returns <code>null</code>."}],"owner":{"reputation":19024,"user_id":90874,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/ca9ad8740c96cb9cc002423ab38ee930?s=128&d=identicon&r=PG","display_name":"thSoft","link":"https://stackoverflow.com/users/90874/thsoft"},"comment_count":7,"is_accepted":false,"community_owned_date":1319187757,"score":201,"last_activity_date":1508841520,"last_edit_date":1508841520,"creation_date":1263476706,"answer_id":2064441,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<h2>If undefined values are not permitted:</h2>\n\n<p>You might configure your IDE to warn you about potential null dereferencing. E.g. in Eclipse, see <em>Preferences > Java > Compiler > Errors/Warnings/Null analysis</em>.</p>\n\n<h2>If undefined values are permitted:</h2>\n\n<p><em>If you want to define a new API where undefined values make sense</em>, use the <a href=\"http://www.codecommit.com/blog/scala/the-option-pattern\" rel=\"noreferrer\">Option Pattern</a> (may be familiar from functional languages). It has the following advantages:</p>\n\n<ul>\n<li>It is stated explicitly in the API whether an input or output exists or not.</li>\n<li>The compiler forces you to handle the \"undefined\" case.</li>\n<li><a href=\"http://james-iry.blogspot.com/2007/08/martians-vs-monads-null-considered.html\" rel=\"noreferrer\">Option is a monad</a>, so there is no need for verbose null checking, just use map/foreach/getOrElse or a similar combinator to safely use the value <a href=\"http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html\" rel=\"noreferrer\">(example)</a>.</li>\n</ul>\n\n<p>Java 8 has a built-in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class (recommended); for earlier versions, there are library alternatives, for example <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> or <a href=\"http://code.google.com/p/functionaljava\" rel=\"noreferrer\">FunctionalJava</a>'s <a href=\"http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html\" rel=\"noreferrer\"><code>Option</code></a>. But like many functional-style patterns, using Option in Java (even 8) results in quite some boilerplate, which you can reduce using a less verbose JVM language, e.g. Scala or Xtend.</p>\n\n<p><em>If you have to deal with an API which might return nulls</em>, you can't do much in Java. Xtend and Groovy have the <a href=\"https://www.eclipse.org/xtend/documentation.html#operators\" rel=\"noreferrer\">Elvis operator</a> <code>?:</code> and the <a href=\"https://www.eclipse.org/xtend/documentation.html#nullSafeFeatureCalls\" rel=\"noreferrer\">null-safe dereference operator</a> <code>?.</code>, but note that this returns null in case of a null reference, so it just \"defers\" the proper handling of null.</p>\n"},{"comments":[{"owner":{"reputation":439,"user_id":271075,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/80b5b63be59f6536705e4df9d1241221?s=128&d=identicon&r=PG","display_name":"Jacek S","link":"https://stackoverflow.com/users/271075/jacek-s"},"edited":false,"score":125,"creation_date":1273336438,"post_id":2386013,"comment_id":2831298,"content_license":"CC BY-SA 2.5","body":"<code>@NotNull</code>, <code>@Nullable</code> and other nullness annotations are part of <a href=\"http://jcp.org/en/jsr/detail?id=305\" rel=\"nofollow noreferrer\">JSR 305</a>. You can also use them to detect potential problems with tools like <a href=\"http://findbugs.sourceforge.net/\" rel=\"nofollow noreferrer\">FindBugs</a>."},{"owner":{"reputation":73321,"user_id":56285,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/0u454.jpg?s=128&g=1","display_name":"Jonik","link":"https://stackoverflow.com/users/56285/jonik"},"edited":false,"score":33,"creation_date":1309476835,"post_id":2386013,"comment_id":7706486,"content_license":"CC BY-SA 3.0","body":"I find it strangely annoying that the <code>@NotNull</code> &amp; <code>@Nullable</code> interfaces live in the package <code>com.sun.istack.internal</code>. (I guess I associate com.sun with warnings about using a proprietary API.)"},{"owner":{"reputation":4452,"user_id":851578,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/57e336ff44dbfab100d50f95f39e3f10?s=128&d=identicon&r=PG","display_name":"Java Ka Baby","link":"https://stackoverflow.com/users/851578/java-ka-baby"},"edited":false,"score":21,"creation_date":1315474792,"post_id":2386013,"comment_id":8861305,"content_license":"CC BY-SA 3.0","body":"code portability goes null with jetbrains.I would think twice(square) before tying down to ide level.Like Jacek S said they are part of JSR any way which I thought was JSR303 by the way."},{"owner":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"edited":false,"score":1,"creation_date":1345186935,"post_id":2386013,"comment_id":16006500,"content_license":"CC BY-SA 3.0","body":"Why doesn&#39;t the 2nd one compile though?"},{"owner":{"reputation":14446,"user_id":939023,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/cc1c360a02934b88beef98cb3bbd9086?s=128&d=identicon&r=PG","display_name":"Shivan Dragon","link":"https://stackoverflow.com/users/939023/shivan-dragon"},"edited":false,"score":10,"creation_date":1345364665,"post_id":2386013,"comment_id":16048122,"content_license":"CC BY-SA 3.0","body":"I really don&#39;t think that using a custom compiler is a viable solution to this problem."},{"owner":{"reputation":6663,"user_id":254343,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/YEat6.png?s=128&g=1","display_name":"amn","link":"https://stackoverflow.com/users/254343/amn"},"edited":false,"score":67,"creation_date":1363772963,"post_id":2386013,"comment_id":21981559,"content_license":"CC BY-SA 3.0","body":"The good thing about annotations, which <code>@NotNull</code> and <code>@Nullable</code> are is that they nicely degrade when the source code is built by a system that doesn&#39;t understand them. So, in effect, the argument that the code is not portable may be invalid - if you use a system that supports and understands these annotations, you get the added benefit of stricter error checking, otherwise you get less of it but your code should still build fine, and the quality of your running program is THE SAME, because these annotations were not enforced at runtime anyway. Besides, all compilers are custom ;-)"},{"owner":{"reputation":36577,"user_id":671543,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG","display_name":"njzk2","link":"https://stackoverflow.com/users/671543/njzk2"},"edited":false,"score":0,"creation_date":1393856775,"post_id":2386013,"comment_id":33610057,"content_license":"CC BY-SA 3.0","body":"in your example you call <code>helloWorld</code> twice. This is terrible. you have no idea what could be the consequences !"},{"owner":{"reputation":43194,"user_id":106261,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/c6e6d6c8ca22de9d91745bce5b8e0399?s=128&d=identicon&r=PG","display_name":"NimChimpsky","link":"https://stackoverflow.com/users/106261/nimchimpsky"},"reply_to_user":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"edited":false,"score":0,"creation_date":1400157162,"post_id":2386013,"comment_id":36377280,"content_license":"CC BY-SA 3.0","body":"@Mechanicalsnail becuase it only ever returns &quot;hello world&quot;, and can never return null."},{"owner":{"reputation":2032,"user_id":1723372,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ExGxf.jpg?s=128&g=1","display_name":"shaktiman_droid","link":"https://stackoverflow.com/users/1723372/shaktiman-droid"},"reply_to_user":{"reputation":439,"user_id":271075,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/80b5b63be59f6536705e4df9d1241221?s=128&d=identicon&r=PG","display_name":"Jacek S","link":"https://stackoverflow.com/users/271075/jacek-s"},"edited":false,"score":1,"creation_date":1411753327,"post_id":2386013,"comment_id":40837415,"content_license":"CC BY-SA 3.0","body":"@JacekS Just for information - for Android development, As of version 19.1 of the Android support library, <code>@NotNull</code> and <code>@Nullable</code> annotation support has been added. So basically all Android developer can take advantage of it. It won&#39;t be IDE specific anymore. More information regarding support annotations here - <a href=\"http://tools.android.com/tech-docs/support-annotations\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/support-annotations</a>"},{"owner":{"reputation":53469,"user_id":2864740,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1","display_name":"user2864740","link":"https://stackoverflow.com/users/2864740/user2864740"},"edited":false,"score":2,"creation_date":1423065906,"post_id":2386013,"comment_id":44999339,"content_license":"CC BY-SA 3.0","body":"Arguments against <code>@Nullable</code>/<code>@NotNull</code> for &quot;compatibility&quot; are missing the point. They are only there to help tools (from a static analysis) ensure that these basic contracts are met - they do <i>not</i> replace proper null handling, when such is appropriate per the contract (or possible per the input source). While it would be <i>awesome</i> if Java and C# (and the run-times) actually supported not-null reference types in the Type System, using better static analysis tooling (and explicit annotated contracts) goes a long way to reduce the 100 trillion dollar mistake that is Algo, is Java, is C# .."},{"owner":{"reputation":4211,"user_id":1026453,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/63c564d87d2cb4b19ecab12094534b9b?s=128&d=identicon&r=PG","display_name":"DuncanKinnear","link":"https://stackoverflow.com/users/1026453/duncankinnear"},"edited":false,"score":0,"creation_date":1434667895,"post_id":2386013,"comment_id":49890792,"content_license":"CC BY-SA 3.0","body":"Netbeans also has support for <code>@NotNull</code> and <code>@Nullable</code>."},{"owner":{"reputation":7063,"user_id":4611488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RJRZa.png?s=128&g=1","display_name":"Stephan Herrmann","link":"https://stackoverflow.com/users/4611488/stephan-herrmann"},"edited":false,"score":1,"creation_date":1438111503,"post_id":2386013,"comment_id":51312364,"content_license":"CC BY-SA 3.0","body":"It&#39;s worth noting that TYPE_USE annotations (since Java 8) let you treat null annotations as an integral part of the type system, including in particular generics. This means that conceptually <b>all contract violations can be detected by the compiler</b>. Eclipse supports this since Java 8 was released, see <a href=\"http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm\" rel=\"nofollow noreferrer\">help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/&hellip;</a>"},{"owner":{"reputation":2238,"user_id":446106,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG","display_name":"mwfearnley","link":"https://stackoverflow.com/users/446106/mwfearnley"},"edited":false,"score":0,"creation_date":1497364114,"post_id":2386013,"comment_id":76040645,"content_license":"CC BY-SA 3.0","body":"What error message does the second example give (in IntelliJ IDEA)?"},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1523984383,"post_id":2386013,"comment_id":86783334,"content_license":"CC BY-SA 3.0","body":"This should now be the primary answer, I believe the accepted answer was accepted before these annotations were available.  I wonder if there is a way to get it promoted to the top at least..."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"reply_to_user":{"reputation":2238,"user_id":446106,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f85c140d1efdc501c26c0e911c6bd5d0?s=128&d=identicon&r=PG","display_name":"mwfearnley","link":"https://stackoverflow.com/users/446106/mwfearnley"},"edited":false,"score":0,"creation_date":1523984542,"post_id":2386013,"comment_id":86783421,"content_license":"CC BY-SA 3.0","body":"@mwfearnley I believe the comment on the second answer was incorrect, Nullable is more of a warning to the developer and I don&#39;t think the compiler proves that it can be null (Since an overridden method could return null).  What it DOES mean is that it can&#39;t be passed to a NotNull without being protected by a null check."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1523984661,"post_id":2386013,"comment_id":86783490,"content_license":"CC BY-SA 3.0","body":"By the way, the implementations of the checkers are not all consistent!  Eclipse&#39;s checker is a good deal better than IntelliJ&#39;s (although I&#39;ve been using IntelliJ&#39;s, it&#39;s definitely better than nothing).  Eclipses has much better handling of un-annotated variables. <a href=\"https://stackoverflow.com/questions/48349393/can-i-make-intellij-nonnull-nullable-annotations-act-like-eclipse?noredirect=1\" title=\"can i make intellij nonnull nullable annotations act like eclipse\">stackoverflow.com/questions/48349393/&hellip;</a>"}],"owner":{"reputation":4546,"user_id":4206,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/cd40128e044f39d7063b5cfdeace80f6?s=128&d=identicon&r=PG","display_name":"Luca Molteni","link":"https://stackoverflow.com/users/4206/luca-molteni"},"comment_count":16,"is_accepted":false,"community_owned_date":1319187757,"score":663,"last_activity_date":1546549435,"last_edit_date":1546549435,"creation_date":1267785079,"answer_id":2386013,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>If you use (or planning to use) a Java IDE like <a href=\"https://www.jetbrains.com/idea/\" rel=\"noreferrer\">JetBrains IntelliJ IDEA</a>, <a href=\"https://www.eclipse.org/\" rel=\"noreferrer\">Eclipse</a> or <a href=\"https://netbeans.org/\" rel=\"noreferrer\">Netbeans</a> or a tool like findbugs then you can use annotations to solve this problem.</p>\n\n<p>Basically, you've got <code>@Nullable</code> and <code>@NotNull</code>.</p>\n\n<p>You can use in method and parameters, like this:</p>\n\n<pre><code>@NotNull public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@Nullable public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>The second example won't compile (in IntelliJ IDEA).</p>\n\n<p>When you use the first <code>helloWorld()</code> function in another piece of code:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    String result = helloWorld();\n    if(result != null) {\n        System.out.println(result);\n    }\n}\n</code></pre>\n\n<p>Now the IntelliJ IDEA compiler will tell you that the check is useless, since the <code>helloWorld()</code> function won't return <code>null</code>, ever.</p>\n\n<p>Using parameter</p>\n\n<pre><code>void someMethod(@NotNull someParameter) { }\n</code></pre>\n\n<p>if you write something like:</p>\n\n<pre><code>someMethod(null);\n</code></pre>\n\n<p>This won't compile.</p>\n\n<p>Last example using <code>@Nullable</code></p>\n\n<pre><code>@Nullable iWantToDestroyEverything() { return null; }\n</code></pre>\n\n<p>Doing this</p>\n\n<pre><code>iWantToDestroyEverything().something();\n</code></pre>\n\n<p>And you can be sure that this won't happen. :)</p>\n\n<p>It's a nice way to let the compiler check something more than it usually does and to enforce your contracts to be stronger. Unfortunately, it's not supported by all the compilers.</p>\n\n<p>In IntelliJ IDEA 10.5 and on, they added support for any other <code>@Nullable</code> <code>@NotNull</code> implementations.</p>\n\n<p>See blog post <em><a href=\"https://blog.jetbrains.com/idea/2011/03/more-flexible-and-configurable-nullublenotnull-annotations/\" rel=\"noreferrer\">More flexible and configurable @Nullable/@NotNull annotations</a></em>.</p>\n"},{"owner":{"reputation":1,"user_id":346135,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/bb0aa8cbff961444b8a2455e0968574d?s=128&d=identicon&r=PG","display_name":"daniel","link":"https://stackoverflow.com/users/346135/daniel"},"comment_count":0,"is_accepted":false,"community_owned_date":1319187757,"score":0,"last_activity_date":1442682274,"last_edit_date":1442682274,"creation_date":1274361407,"answer_id":2874026,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>For utility classes, you can check that parameters are not null.</p>\n\n<p>In all other cases, you may not have to. Use encapsulation as much as possible, thus reducing the places you feel tempted to check for null.</p>\n"},{"comments":[{"owner":{"reputation":11992,"user_id":17713,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/w0PfJ.jpg?s=128&g=1","display_name":"Matthias Meid","link":"https://stackoverflow.com/users/17713/matthias-meid"},"edited":false,"score":2,"creation_date":1282024442,"post_id":3499225,"comment_id":3656666,"content_license":"CC BY-SA 2.5","body":"Mh, why that? Please don&#39;t feel any defensive, I&#39;d just like to learn more about Java :)"},{"owner":{"reputation":20807,"user_id":65977,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/e689265ee24e0874ae8a90827c4783e7?s=128&d=identicon&r=PG","display_name":"MatrixFrog","link":"https://stackoverflow.com/users/65977/matrixfrog"},"reply_to_user":{"reputation":11992,"user_id":17713,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/w0PfJ.jpg?s=128&g=1","display_name":"Matthias Meid","link":"https://stackoverflow.com/users/17713/matthias-meid"},"edited":false,"score":9,"creation_date":1308701102,"post_id":3499225,"comment_id":7549874,"content_license":"CC BY-SA 3.0","body":"@Mudu As a general rule, I prefer the expression in an if statement to be a more &quot;positive&quot; statement, rather than a &quot;negative&quot; one. So if I saw <code>if (!something) { x(); } else { y(); }</code> I would be inclined to refactor it as <code>if (something) { y(); } else { x(); }</code> (though one could argue that <code>!= null</code> is the more positive option...). But more importantly, the important part of the code is not wrapped inside <code>{}</code>s and you have one level less of indentation for most of the method. I don&#39;t know if that was fastcodejava&#39;s reasoning but that would be mine."},{"owner":{"reputation":20116,"user_id":1173112,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1","display_name":"Koray Tugay","link":"https://stackoverflow.com/users/1173112/koray-tugay"},"edited":false,"score":2,"creation_date":1450215897,"post_id":3499225,"comment_id":56341893,"content_license":"CC BY-SA 3.0","body":"This is what I tend to do as well.. Keeps the code clean in my opinon."},{"owner":{"reputation":81,"user_id":11055122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/7yf0z.png?s=128&g=1","display_name":"Skaldebane","link":"https://stackoverflow.com/users/11055122/skaldebane"},"reply_to_user":{"reputation":20807,"user_id":65977,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/e689265ee24e0874ae8a90827c4783e7?s=128&d=identicon&r=PG","display_name":"MatrixFrog","link":"https://stackoverflow.com/users/65977/matrixfrog"},"edited":false,"score":0,"creation_date":1592865680,"post_id":3499225,"comment_id":110573126,"content_license":"CC BY-SA 4.0","body":"@MatrixFrog Yeah that makes the code cleaner and easily readable, as you see the important code (when everything function without errors) first."}],"owner":{"reputation":34715,"user_id":184730,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/8ec7cdaaf6fd5ee313cb6228f08cd67c?s=128&d=identicon&r=PG","display_name":"fastcodejava","link":"https://stackoverflow.com/users/184730/fastcodejava"},"comment_count":4,"is_accepted":false,"community_owned_date":1319187757,"score":37,"last_activity_date":1442682879,"last_edit_date":1442682879,"creation_date":1282017585,"answer_id":3499225,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>In addition to using <code>assert</code> you can use the following:</p>\n\n<pre><code>if (someobject == null) {\n    // Handle null here then move on.\n}\n</code></pre>\n\n<p>This is slightly better than:</p>\n\n<pre><code>if (someobject != null) {\n    .....\n    .....\n\n\n\n    .....\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":14251,"user_id":241824,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/71aaa3b1e0f75ff4a25b2496de51458d?s=128&d=identicon&r=PG","display_name":"Sawyer","link":"https://stackoverflow.com/users/241824/sawyer"},"edited":false,"score":2,"creation_date":1313559726,"post_id":3925191,"comment_id":8485465,"content_license":"CC BY-SA 3.0","body":"What&#39;s wrong with this method, I think @tltester just want to give a default value if the it&#39;s null, which make sense."},{"owner":{"reputation":3707,"user_id":106350,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/b5c3d52c556ac42cfeb22d5557768f7d?s=128&d=identicon&r=PG","display_name":"ivant","link":"https://stackoverflow.com/users/106350/ivant"},"edited":false,"score":1,"creation_date":1429171471,"post_id":3925191,"comment_id":47475928,"content_license":"CC BY-SA 3.0","body":"There is such a method in Apache commons-lang: <code>ObjectUtils.defaultIfNull()</code>. There is one more general: <code>ObjectUtils.firstNonNull()</code>, which can be used to implement a degrading strategy: <code>firstNonNull(bestChoice, secondBest, thirdBest, fallBack);</code>"}],"owner":{"reputation":31,"user_id":474659,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/df1e7cbb9d915b3a2576eb36d2888784?s=128&d=identicon&r=PG","display_name":"tltester","link":"https://stackoverflow.com/users/474659/tltester"},"comment_count":2,"is_accepted":false,"community_owned_date":1319187757,"score":11,"last_activity_date":1442683075,"last_edit_date":1442683075,"creation_date":1286982884,"answer_id":3925191,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<pre><code>public static &lt;T&gt; T ifNull(T toCheck, T ifNull) {\n    if (toCheck == null) {\n           return ifNull;\n    }\n    return toCheck;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"edited":false,"score":5,"creation_date":1345187108,"post_id":5023357,"comment_id":16006562,"content_license":"CC BY-SA 3.0","body":"-1. That&#39;s even worse. Now instead of crashing if you forget to test, your program silently propagates an incorrect value."}],"owner":{"reputation":195,"user_id":10324,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c30a5161c695d10539f65b2f30284b7e?s=128&d=identicon&r=PG","display_name":"LarryN","link":"https://stackoverflow.com/users/10324/larryn"},"comment_count":1,"is_accepted":false,"community_owned_date":1319187757,"score":-4,"last_activity_date":1297898075,"creation_date":1297898075,"answer_id":5023357,"question_id":271526,"content_license":"CC BY-SA 2.5","body":"<p>Another suggestion is to program defensively - where your classes/functions provide default values that are known and safe, and where null is reserved for true errors/exceptions.</p>\n\n<p>For example, instead of functions that return Strings returning null when there is a problem (say converting a number to a string), have them return an empty String (\"\"). You still have to test the return value before proceeding, but there would be no special cases for exceptions. An additional benefit of this style of programming is that your program will be able to differentiate and respond accordingly between normal operations and exceptions.</p>\n"},{"owner":{"reputation":389,"user_id":250816,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/a6866ad544abac305f4139a7d1cb656d?s=128&d=identicon&r=PG","display_name":"Leen Toelen","link":"https://stackoverflow.com/users/250816/leen-toelen"},"comment_count":0,"is_accepted":false,"community_owned_date":1319187757,"score":8,"last_activity_date":1442683679,"last_edit_date":1442683679,"creation_date":1299794454,"answer_id":5266443,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>You can use <a href=\"http://findbugs.sourceforge.net\" rel=\"nofollow noreferrer\">FindBugs</a>. They also have an <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a> plugin) that helps you find duplicate null checks (among other things), but keep in mind that sometimes you should opt for defensive programming. There is also <a href=\"http://code.google.com/p/cofoja/\" rel=\"nofollow noreferrer\">Contracts for Java</a> which may be helpful.</p>\n"},{"comments":[{"owner":{"reputation":1827,"user_id":957595,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/00d09ab277282a1b54b2e325ced6f774?s=128&d=identicon&r=PG","display_name":"Paul Jackson","link":"https://stackoverflow.com/users/957595/paul-jackson"},"edited":false,"score":3,"creation_date":1321247217,"post_id":5311857,"comment_id":9957008,"content_license":"CC BY-SA 3.0","body":"Absolutely. Applications that just throw the error and crash are of higher quality because there is no doubt when they are not working. Applications that swallow the errors at best degrade gracefully but usually don&#39;t work in ways that are difficult to notice and don&#39;t get fixed. And when the problem is noticed they are much harder to debug."}],"owner":{"reputation":413,"user_id":634475,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d958ce12cc98489835c87324ba164e30?s=128&d=identicon&r=PG","display_name":"Oleg","link":"https://stackoverflow.com/users/634475/oleg"},"comment_count":1,"is_accepted":false,"community_owned_date":1319187757,"score":38,"last_activity_date":1442689235,"last_edit_date":1442689235,"creation_date":1300192945,"answer_id":5311857,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Common \"problem\" in Java indeed.</p>\n\n<p>First, my thoughts on this:</p>\n\n<p>I consider that it is bad to \"eat\" something when NULL was passed where NULL isn't a valid value. If you're not exiting the method with some sort of error then it means nothing went wrong in your method which is not true. Then you probably return null in this case, and in the receiving method you again check for null, and it never ends, and you end up with \"if != null\", etc..</p>\n\n<p>So, IMHO, null must be a critical error which prevents further execution (that is, where null is not a valid value).</p>\n\n<p>The way I solve this problem is this:</p>\n\n<p>First, I follow this convention:</p>\n\n<ol>\n<li>All public methods / API always check its arguments for null</li>\n<li>All private methods do not check for null since they are controlled methods (just let die with nullpointer exception in case it wasn't handled above)</li>\n<li>The only other methods which do not check for null are utility methods. They are public, but if you call them for some reason, you know what parameters you pass. This is like trying to boil water in the kettle without providing water...</li>\n</ol>\n\n<p>And finally, in the code, the first line of the public method goes like this:</p>\n\n<pre><code>ValidationUtils.getNullValidator().addParam(plans, \"plans\").addParam(persons, \"persons\").validate();\n</code></pre>\n\n<p>Note that addParam() returns self, so that you can add more parameters to check.</p>\n\n<p>Method <code>validate()</code> will throw checked <code>ValidationException</code> if any of the parameters is null (checked or unchecked is more a design/taste issue, but my <code>ValidationException</code> is checked).</p>\n\n<pre><code>void validate() throws ValidationException;\n</code></pre>\n\n<p>The message will contain the following text if, for example, \"plans\" is null:</p>\n\n<p>\"<strong>Illegal argument value null is encountered for parameter [plans]</strong>\"</p>\n\n<p>As you can see, the second value in the addParam() method (string) is needed for the user message, because you cannot easily detect passed-in variable name, even with reflection (not subject of this post anyway...).</p>\n\n<p>And yes, we know that beyond this line we will no longer encounter a null value so we just safely invoke methods on those objects.</p>\n\n<p>This way, the code is clean, easy maintainable and readable.</p>\n"},{"comments":[{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"edited":false,"score":2,"creation_date":1350531331,"post_id":6101200,"comment_id":17549406,"content_license":"CC BY-SA 3.0","body":"better to use assertions, i.e Contract.notNull(abc, &quot;abc must be non-null, did it fail to load during xyz?&quot;); - this is a more compact way than doing an if (abc!=null) { throw new RuntimeException...}"}],"owner":{"reputation":3245,"user_id":181551,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/5bdec1e17ffb5c23f339bf527434a067?s=128&d=identicon&r=PG","display_name":"Alex Worden","link":"https://stackoverflow.com/users/181551/alex-worden"},"comment_count":1,"is_accepted":false,"community_owned_date":1319187757,"score":93,"last_activity_date":1335208149,"last_edit_date":1335208149,"creation_date":1306174694,"answer_id":6101200,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I'm a fan of \"fail fast\" code. Ask yourself - are you doing something useful in the case where the parameter is null? If you don't have a clear answer for what your code should do in that case... I.e. it should never be null in the first place, then ignore it and allow a NullPointerException to be thrown. The calling code will make just as much sense of an NPE as it would an IllegalArgumentException, but it'll be easier for the developer to debug and understand what went wrong if an NPE is thrown rather than your code attempting to execute some other unexpected contingency logic - which ultimately results in the application failing anyway. </p>\n"},{"comments":[{"owner":{"reputation":500,"user_id":1661531,"user_type":"registered","accept_rate":25,"profile_image":"https://i.stack.imgur.com/cUvKN.jpg?s=128&g=1","display_name":"ivan.aguirre","link":"https://stackoverflow.com/users/1661531/ivan-aguirre"},"edited":false,"score":0,"creation_date":1373662779,"post_id":7140229,"comment_id":25657276,"content_license":"CC BY-SA 3.0","body":"Michael Feathers has written an short and interesthing text about approaches like the one you mentioned:  <a href=\"http://manuelp.newsblur.com/site/424/\" rel=\"nofollow noreferrer\">manuelp.newsblur.com/site/424</a>"},{"owner":{"reputation":81,"user_id":11055122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/7yf0z.png?s=128&g=1","display_name":"Skaldebane","link":"https://stackoverflow.com/users/11055122/skaldebane"},"edited":false,"score":0,"creation_date":1593035383,"post_id":7140229,"comment_id":110642758,"content_license":"CC BY-SA 4.0","body":"If there&#39;s anything I appreciated most about this answer, it&#39;s the &quot;careful design&quot; tip. Whether it boils down to writing code, fixing bugs or checking for nullity, it&#39;s DAMN CRUCIAL to make an overall good design and organisation in code, to avoid many redundancies that we still have to deal with today because of bad design choices made a long time ago..."}],"owner":{"reputation":1,"user_id":904825,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/b723f01eb372a7097cb87f6b6c20c42c?s=128&d=identicon&r=PG","display_name":"Mr Palo","link":"https://stackoverflow.com/users/904825/mr-palo"},"comment_count":2,"is_accepted":false,"community_owned_date":1319187757,"score":23,"last_activity_date":1463021370,"last_edit_date":1463021370,"creation_date":1313951623,"answer_id":7140229,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I like articles from Nat Pryce. Here are the links:</p>\n\n<ul>\n<li><a href=\"http://www.natpryce.com/articles/000778.html\" rel=\"noreferrer\">Avoiding Nulls with Polymorphic Dispatch</a></li>\n<li><a href=\"http://www.natpryce.com/articles/000777.html\" rel=\"noreferrer\">Avoiding Nulls with \"Tell, Don't Ask\" Style</a></li>\n</ul>\n\n<p>In the articles there is also a link to a Git repository for a Java Maybe Type which I find interesting, but I don't think it alone could decrease the\nchecking code bloat. After doing some research on the Internet, I think <strong>!= null</strong> code bloat could be decreased mainly by careful design.</p>\n"},{"comments":[{"owner":{"reputation":3022,"user_id":69471,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02e56b30e8b319fd2e29b13a778a3f7f?s=128&d=identicon&r=PG","display_name":"TMN","link":"https://stackoverflow.com/users/69471/tmn"},"edited":false,"score":8,"creation_date":1321992447,"post_id":7847199,"comment_id":10126096,"content_license":"CC BY-SA 3.0","body":"If you&#39;re constantly going to negate the return value, wouldn&#39;t it be better to simply write a function <code>isNotNull</code>?  Doesn&#39;t that more clearly indicate your intent?"},{"owner":{"reputation":9974,"user_id":571271,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/c7df323c25e9009c7c71691fac4f67f1?s=128&d=identicon&r=PG","display_name":"jeha","link":"https://stackoverflow.com/users/571271/jeha"},"reply_to_user":{"reputation":3022,"user_id":69471,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02e56b30e8b319fd2e29b13a778a3f7f?s=128&d=identicon&r=PG","display_name":"TMN","link":"https://stackoverflow.com/users/69471/tmn"},"edited":false,"score":0,"creation_date":1321992854,"post_id":7847199,"comment_id":10126240,"content_license":"CC BY-SA 3.0","body":"@TMN: your are right, ideally I&#39;d like to have both a <code>isNull</code> and <code>isNotNull</code> method."},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":25,"creation_date":1362619637,"post_id":7847199,"comment_id":21526482,"content_license":"CC BY-SA 3.0","body":"I fail to see how this is more concise than &quot;someobject != null&quot;."},{"owner":{"reputation":1731,"user_id":2683399,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/9fb725b3ff34efdbbf8a020a3ed30877?s=128&d=identicon&r=PG&f=1","display_name":"IceArdor","link":"https://stackoverflow.com/users/2683399/iceardor"},"edited":false,"score":0,"creation_date":1494577708,"post_id":7847199,"comment_id":74898232,"content_license":"CC BY-SA 3.0","body":"Compile-time and run-time dev tools like findbugs will have a harder time identifying duplicate null checks. Also, you better hope Java inlines that isNull function,"}],"owner":{"reputation":9974,"user_id":571271,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/c7df323c25e9009c7c71691fac4f67f1?s=128&d=identicon&r=PG","display_name":"jeha","link":"https://stackoverflow.com/users/571271/jeha"},"comment_count":4,"is_accepted":false,"community_owned_date":1319187757,"score":6,"last_activity_date":1442690333,"last_edit_date":1442690333,"creation_date":1319187757,"answer_id":7847199,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>One more alternative:</p>\n\n<p>The following simple function helps to hide the null-check (I don't know why, but I haven't found it as part of the same <em>common</em> library):</p>\n\n<pre><code>public static &lt;T&gt; boolean isNull(T argument) {\n    return (argument == null);\n}\n</code></pre>\n\n<p>You could now write</p>\n\n<pre><code>if (!isNull(someobject)) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>which is IMO a better way of expressing <code>!= null</code>.</p>\n"},{"comments":[{"owner":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"edited":false,"score":0,"creation_date":1345186858,"post_id":8212184,"comment_id":16006472,"content_license":"CC BY-SA 3.0","body":"Just because it was <i>intended</i> to mean &quot;no data&quot; doesn&#39;t mean it <i>should</i> be used. The language implementation of <code>null</code> sucks."},{"owner":{"reputation":30506,"user_id":116509,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/GsYqn.jpg?s=128&g=1","display_name":"artbristol","link":"https://stackoverflow.com/users/116509/artbristol"},"edited":false,"score":6,"creation_date":1379148297,"post_id":8212184,"comment_id":27724300,"content_license":"CC BY-SA 3.0","body":"Catching <code>NullPointerException</code> and returning <code>null</code> is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null."},{"owner":{"reputation":12380,"user_id":234954,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/f4aba9ddb6b8a1cb84962cd54a53ee98?s=128&d=identicon&r=PG","display_name":"jmoreno","link":"https://stackoverflow.com/users/234954/jmoreno"},"edited":false,"score":0,"creation_date":1384755501,"post_id":8212184,"comment_id":29847708,"content_license":"CC BY-SA 3.0","body":"The problem with your example is that getPhotoOfThePerson really has no business deciding whether or not to return a photo or how to deal with a null person -- a straightforward reading of the method name indicates that it returns a photo of a person.  It shouldn&#39;t return null because it doesn&#39;t (and shouldn&#39;t) know how the caller will handle a null photo.  The caller on the other hand should know what to do when the person is null.  Java doesn&#39;t have null propogation, which would eliminate the problem, as then it would know enough about how nulls are handled to go ahead and use it."},{"owner":{"reputation":2216,"user_id":1272233,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/07cc66e13f0eb3901c15c9580aa1a78b?s=128&d=identicon&r=PG","display_name":"Doval","link":"https://stackoverflow.com/users/1272233/doval"},"edited":false,"score":23,"creation_date":1384963045,"post_id":8212184,"comment_id":29949417,"content_license":"CC BY-SA 3.0","body":"I&#39;d downvote if I had the reputation. Not only is null not necessary, it&#39;s a hole in the type system. Assigning a Tree to a List is a type error because trees are not values of type List; by that same logic, assigning null should be a type error because null is not a value of type Object, or any useful type for that matter. <a href=\"http://en.wikipedia.org/wiki/Tony_Hoare\" rel=\"nofollow noreferrer\">Even the man that invented null</a> considers it his &quot;billion-dollar mistake&quot;. The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1396346178,"post_id":8212184,"comment_id":34735578,"content_license":"CC BY-SA 3.0","body":"As of &quot;Assigning a Tree to a List&quot; you were not talking about Java, did you? Because Java is &#39;compile time strict type&#39; language (it&#39;s memory model differ from C++, C# though). Java compiler will not give you an opportunity to assign Tree to a List."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":2,"creation_date":1396350375,"post_id":8212184,"comment_id":34738391,"content_license":"CC BY-SA 3.0","body":"As of &quot;Maybe&lt;T&gt; or Optional&lt;T&gt;&quot; you still need to write code like <code>if (maybeNull.hasValue()) {...}</code> so what is the difference with <code>if (maybeNull != null)) {...}</code>?"},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1396351058,"post_id":8212184,"comment_id":34738895,"content_license":"CC BY-SA 3.0","body":"As of &quot;Java doesn&#39;t have null propagation, which would eliminate the problem&quot;, usually propagation is about &#39;exceptional cases&#39;. But data availability or non-availability is a common business flow in most cases. If it is something exceptional in data non-availability (which is dictated by business) you should explicitly throw reasonable exception with a reasonable message. Null propagation (with line number inside?..) would be really horrible as for me."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":1,"creation_date":1396351970,"post_id":8212184,"comment_id":34739517,"content_license":"CC BY-SA 3.0","body":"As of &quot;catching NullPointerException and returning null is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null&quot;. I&#39;m totally agree! In those cases you should write a dozen of &#39;if&#39; statements or throw NPE if business logic imply data in-place, or use null-safe operator from new Java. But there are cases when I don&#39;t care about what exact step give me null. For example calculating some values for the user just before showing on the screen when you do expect data could be missing."},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":3,"creation_date":1415390135,"post_id":8212184,"comment_id":42190814,"content_license":"CC BY-SA 3.0","body":"@MykhayloAdamovych: The benefit of <code>Maybe&lt;T&gt;</code> or <code>Optional&lt;T&gt;</code> isn&#39;t in the case where your <code>T</code> might be null, but in the case where it should never be null.  If you have a type that explicitly means &quot;this value <i>might</i> be null -- use with caution&quot;, and you use and return such a type consistently, then whenever you see a plain old <code>T</code> in your code, you can assume it is never null.  (Course, this would be a lot more useful if enforceable by the compiler.)"},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1419357024,"post_id":8212184,"comment_id":43671399,"content_license":"CC BY-SA 3.0","body":"Agree. But you&#39;ll not reduce &#39;checks for emptiness&#39; in your code (the topic we are discussing), you&#39;ll be more safe though but it comes at a price."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1423135945,"post_id":8212184,"comment_id":45030097,"content_license":"CC BY-SA 3.0","body":"&quot;Even the man that invented null considers it his &quot;billion-dollar mistake&quot; - null was there before anything was invented. One can invent set of rules to deal with it in specific way but this will be &#39;just another functionally complete system&#39;. I would like to know how much would it cost to deal with subtle bugs in such non fail fast system. May be we are close to compare such systems because of new trends."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":1,"creation_date":1423242217,"post_id":8212184,"comment_id":45082482,"content_license":"CC BY-SA 3.0","body":"&quot;The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)&quot; - you may think that all references in Java are Optional&lt;T&gt; and you may switch to DefinetlyInitialized&lt;T&gt; by for using underused final keyword or introduce Mandatory&lt;T&gt;. So what&#39;s the difference?.. Anyway I like current Java defaults more because things around us are rather optional. It is optional for &#39;the kettle to be filled with water before cooking&#39;, and that &#39;there is some fuel in the car before you leave&#39; etc."},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1468925567,"post_id":8212184,"comment_id":64316923,"content_license":"CC BY-SA 3.0","body":"Currently reading some Oracle Database Reference about &#39;Null Values in Arithmetic Expressions&#39;. It states: &#39;If any column value in an arithmetic expression is null, the result is null. For example, if you attempt to perform division by zero, you get an error. However, if you divide a number by null, the result is a null or unknown.&#39; But don&#39;t mind, this is totally not logical, there should be some silly guy somewhere at Oracle and he must be fired till these days..."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1470955287,"post_id":8212184,"comment_id":65172861,"content_license":"CC BY-SA 3.0","body":"@MykhayloAdamovych: If meaningful values for array items will become known in arbitrary sequence, and it will be necessary to read some array items before meaningful values have been assigned to all of them, it will generally not be possible to statically rule out the possibility that items will be read before a meaningful value has been determined.  If Hoare doesn&#39;t like nulls, I&#39;m curious what kind of default value or behavior he&#39;d prefer?  Trapping when a null is read from the array might sometimes be better than waiting until it is dereferenced, but would make it impossible to copy..."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1470955505,"post_id":8212184,"comment_id":65172937,"content_license":"CC BY-SA 3.0","body":"...a partially-populated array by iteratively copying the items therein.  The only other choices I can see is to say that attempting to dereference a pointer read from an array slot that hasn&#39;t yet been written will access some default object (which would for most purposes seem rather silly) or will have C-style &quot;Undefined Behavior&quot;.  I&#39;d say trapping null pointers are better than any alternative I can see."},{"owner":{"reputation":1971,"user_id":734860,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/eb3a1b815b40406a661df2e7d07c1289?s=128&d=identicon&r=PG","display_name":"entonio","link":"https://stackoverflow.com/users/734860/entonio"},"edited":false,"score":0,"creation_date":1501529954,"post_id":8212184,"comment_id":77809319,"content_license":"CC BY-SA 3.0","body":"@MykhayloAdamovych see how Swift does it, which is how many others did before. If Java simply didn&#39;t have null, you&#39;d have no way to store a null into a field/variable; to handle the case where it&#39;s optional, you&#39;d have to have an Optional&lt;T&gt;. And you ask - what would that gain? Wouldn&#39;t you need as many checks? No, you wouldn&#39;t, because the compiler would ensure that every non-Optional was never null, and more than half our checks are with objects that never should be null and never are, or if they are then that&#39;s a bug that would either be caught by the compiler or exposed by the interface."},{"owner":{"reputation":277,"user_id":3738598,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/74d65c951630e6b34bc567af525b4347?s=128&d=identicon&r=PG&f=1","display_name":"Boo","link":"https://stackoverflow.com/users/3738598/boo"},"reply_to_user":{"reputation":1971,"user_id":734860,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/eb3a1b815b40406a661df2e7d07c1289?s=128&d=identicon&r=PG","display_name":"entonio","link":"https://stackoverflow.com/users/734860/entonio"},"edited":false,"score":1,"creation_date":1503014086,"post_id":8212184,"comment_id":78450527,"content_license":"CC BY-SA 3.0","body":"@entonio i don&#39;t follow, After the compiler ensures that the Optional (or what ever) is not null then what?  Are you saying that the Person application is designed to never encounter a situation where someone does not have a girlfriend?  How does the application handle those scenarios, are there multiple types of Person, maybe we create 2 types of Person, LonelyPerson and ShackledPerson?"},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"reply_to_user":{"reputation":1971,"user_id":734860,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/eb3a1b815b40406a661df2e7d07c1289?s=128&d=identicon&r=PG","display_name":"entonio","link":"https://stackoverflow.com/users/734860/entonio"},"edited":false,"score":0,"creation_date":1503260318,"post_id":8212184,"comment_id":78530426,"content_license":"CC BY-SA 3.0","body":"@entonio, Java has Optional&lt;T&gt;, that is non-final reference. And Java&#39;s compiler ensures that every final is initialized. And you would have the same amount of checks if you are senior enough not to write boilerplate code because &#39;emptiness&#39; is a <i>business notion</i>. And Java&#39;s Optional&lt;T&gt; is free from <code>get()</code> and <code>put()</code> boilerplate."}],"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"comment_count":18,"is_accepted":false,"community_owned_date":1321880298,"score":75,"last_activity_date":1519423387,"last_edit_date":1519423387,"creation_date":1321880298,"answer_id":8212184,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Null is not a 'problem'. It is an integral part of a <a href=\"http://en.wikipedia.org/wiki/Functional_completeness\" rel=\"noreferrer\">complete</a> modeling tool set. Software aims to model the complexity of the world and null bears its burden. <strong>Null indicates 'No data' or 'Unknown'</strong> in Java and the like. So it is appropriate to use nulls for these purposes. I don't prefer the 'Null object' pattern; I think it rise the '<a href=\"http://en.wikipedia.org/wiki/Who_will_guard_the_guards%3F\" rel=\"noreferrer\">who will guard\nthe guardians</a>' problem. <br/>\nIf you ask me what is the name of my girlfriend I'll tell you that I have no girlfriend. In the Java language I'll return null. \nAn alternative would be to throw meaningful exception to indicate some problem that can't be (or don't want to be) solved right there and delegate it somewhere higher in the stack to retry or report data access error to the user.  </p>\n\n<ol>\n<li><p><strong>For an 'unknown question' give 'unknown answer'.</strong> (Be null-safe where this is correct from business point of view) Checking arguments for null once inside a method before usage relieves multiple callers from checking them before a call.</p>\n\n<pre><code>public Photo getPhotoOfThePerson(Person person) {\n    if (person == null)\n        return null;\n    // Grabbing some resources or intensive calculation\n    // using person object anyhow.\n}\n</code></pre>\n\n<p>Previous leads to normal logic flow to get no photo of a non-existent girlfriend from my photo library.</p>\n\n<pre><code>getPhotoOfThePerson(me.getGirlfriend())\n</code></pre>\n\n<p>And it fits with new coming Java API (looking forward)</p>\n\n<pre><code>getPhotoByName(me.getGirlfriend()?.getName())\n</code></pre>\n\n<p>While it is rather 'normal business flow' not to find photo stored into the DB for some person, I used to use pairs like below for some other cases</p>\n\n<pre><code>public static MyEnum parseMyEnum(String value); // throws IllegalArgumentException\npublic static MyEnum parseMyEnumOrNull(String value);\n</code></pre>\n\n<p>And don't loathe to type <code>&lt;alt&gt; + &lt;shift&gt; + &lt;j&gt;</code> (generate javadoc in Eclipse) and write three additional words for you public API. This will be more than enough for all but those who don't read documentation.</p>\n\n<pre><code>/**\n * @return photo or null\n */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/**\n * @return photo, never null\n */\n</code></pre></li>\n<li><p><strong>This is rather theoretical case and in most cases you should prefer java null safe API (in case it will be released in another 10 years), but <code>NullPointerException</code> is subclass of an <code>Exception</code>.</strong> Thus it is a form of <code>Throwable</code> that indicates conditions that a reasonable application might want to catch (<a href=\"http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/Exception.html\" rel=\"noreferrer\">javadoc</a>)! To use the first most advantage of exceptions and separate error-handling code from 'regular' code (<a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/advantages.html\" rel=\"noreferrer\">according to creators of Java</a>) it is appropriate, as for me, to catch <code>NullPointerException</code>.</p>\n\n<pre><code>public Photo getGirlfriendPhoto() {\n    try {\n        return appContext.getPhotoDataSource().getPhotoByName(me.getGirlfriend().getName());\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n</code></pre>\n\n<p>Questions could arise:</p>\n\n<p>Q. What if <code>getPhotoDataSource()</code> returns null?<br>\nA. It is up to business logic. If I fail to find a photo album I'll show you no photos. What if appContext is not initialized? This method's business logic puts up with this. If the same logic should be more strict then throwing an exception it is part of the business logic and explicit check for null should be used (case 3). The <strong>new Java Null-safe API fits better here to specify selectively what implies and what does not imply to be initialized</strong> to be fail-fast in case of programmer errors.</p>\n\n<p>Q. Redundant code could be executed and unnecessary resources could be grabbed.<br>\nA. It could take place if <code>getPhotoByName()</code> would try to open a database connection, create <code>PreparedStatement</code> and use the person name as an SQL parameter at last. The approach <em>for an unknown question gives an unknown answer</em> (case 1) works here. Before grabbing resources the method should check parameters and return 'unknown' result if needed.</p>\n\n<p>Q. This approach has a performance penalty due to the try closure opening.<br>\nA. Software should be easy to understand and modify firstly. Only after this, one could think about performance, and only if needed! and where needed! (<a href=\"http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=dp_ob_title_bk\" rel=\"noreferrer\">source</a>), and many others).</p>\n\n<p>PS. This approach will be as reasonable to use as the <em>separate error-handling code from \"regular\" code</em> principle is reasonable to use in some place. Consider the next example:</p>\n\n<pre><code>public SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    try {\n        Result1 result1 = performSomeCalculation(predicate);\n        Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n        Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n        Result4 result4 = performLastCalculation(result3.getSomeProperty());\n        return result4.getSomeProperty();\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n\npublic SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    SomeValue result = null;\n    if (predicate != null) {\n        Result1 result1 = performSomeCalculation(predicate);\n        if (result1 != null &amp;&amp; result1.getSomeProperty() != null) {\n            Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n            if (result2 != null &amp;&amp; result2.getSomeProperty() != null) {\n                Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n                if (result3 != null &amp;&amp; result3.getSomeProperty() != null) {\n                    Result4 result4 = performLastCalculation(result3.getSomeProperty());\n                    if (result4 != null) {\n                        result = result4.getSomeProperty();\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>PPS. For those fast to downvote (and not so fast to read documentation) I would like to say that I've never caught a null-pointer exception (NPE) in my life. But this possibility was <strong>intentionally designed</strong> by the Java creators because NPE is a subclass of <code>Exception</code>. We have a precedent in Java history when <code>ThreadDeath</code> is an <code>Error</code> not because it is actually an application error, but solely because it was not intended to be caught! How much NPE fits to be an <code>Error</code> than <code>ThreadDeath</code>! But it is not.</p></li>\n<li><p><strong>Check for 'No data' only if business logic implies it.</strong></p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person != null) {\n        person.setPhoneNumber(phoneNumber);\n        dataSource.updatePerson(person);\n    } else {\n        Person = new Person(personId);\n        person.setPhoneNumber(phoneNumber);\n        dataSource.insertPerson(person);\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person == null)\n        throw new SomeReasonableUserException(\"What are you thinking about ???\");\n    person.setPhoneNumber(phoneNumber);\n    dataSource.updatePerson(person);\n}\n</code></pre>\n\n<p>If appContext or dataSource is not initialized unhandled runtime NullPointerException will kill current thread and will be processed by <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html\" rel=\"noreferrer\">Thread.defaultUncaughtExceptionHandler</a> (for you to define and use your favorite logger or other notification mechanizm). If not set, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException(java.lang.Thread,%20java.lang.Throwable)\" rel=\"noreferrer\">ThreadGroup#uncaughtException</a> will print stacktrace to system err. One should monitor application error log and open Jira issue for each unhandled exception which in fact is application error. Programmer should fix bug somewhere in initialization stuff.</p></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":2094,"user_id":396216,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/AdeT5.jpg?s=128&g=1","display_name":"Murat Derya &#214;zen","link":"https://stackoverflow.com/users/396216/murat-derya-%c3%96zen"},"reply_to_user":{"reputation":2844,"user_id":1470950,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/9d7b6bf6804a4725ce6a98ed48c23354?s=128&d=identicon&r=PG&f=1","display_name":"Cody Guldner","link":"https://stackoverflow.com/users/1470950/cody-guldner"},"edited":false,"score":0,"creation_date":1407445508,"post_id":9845966,"comment_id":39229826,"content_license":"CC BY-SA 3.0","body":"@CodyGuldner Right, Cody. I provided a relevant quote from the link to give more context."}],"owner":{"reputation":2094,"user_id":396216,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/AdeT5.jpg?s=128&g=1","display_name":"Murat Derya &#214;zen","link":"https://stackoverflow.com/users/396216/murat-derya-%c3%96zen"},"comment_count":1,"is_accepted":false,"community_owned_date":1332533799,"score":31,"last_activity_date":1407445394,"last_edit_date":1407445394,"creation_date":1332533799,"answer_id":9845966,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Guava, a very useful core library by Google, has a nice and useful API to avoid nulls. I find <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">UsingAndAvoidingNullExplained</a> very helpful.</p>\n\n<p>As explained in the wiki:</p>\n\n<blockquote>\n  <p><code>Optional&lt;T&gt;</code> is a way of replacing a nullable T reference with a\n  non-null value. An Optional may either contain a non-null T reference\n  (in which case we say the reference is \"present\"), or it may contain\n  nothing (in which case we say the reference is \"absent\"). It is never\n  said to \"contain null.\"</p>\n</blockquote>\n\n<p>Usage:</p>\n\n<pre><code>Optional&lt;Integer&gt; possible = Optional.of(5);\npossible.isPresent(); // returns true\npossible.get(); // returns 5\n</code></pre>\n"},{"owner":{"reputation":2251,"user_id":1088846,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/64ff39469254187be546f135eac7bd01?s=128&d=identicon&r=PG","display_name":"Jochen","link":"https://stackoverflow.com/users/1088846/jochen"},"comment_count":0,"is_accepted":false,"community_owned_date":1332534703,"score":3,"last_activity_date":1484978137,"last_edit_date":1484978137,"creation_date":1332534703,"answer_id":9846141,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>You can also use the Checker Framework (with JDK 7 and beyond) to statically check for null values. This might solve a lot of problems, but requires running an extra tool that currently only works with OpenJDK AFAIK. <a href=\"https://checkerframework.org/\" rel=\"nofollow noreferrer\">https://checkerframework.org/</a></p>\n"},{"comments":[{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":1,"creation_date":1362619145,"post_id":11478811,"comment_id":21526376,"content_license":"CC BY-SA 3.0","body":"Agreed, albeit only conceptually. Yeah, one should HAVE A PLAN. But then you need programmers who CAN MAKE PLANS and have the ability to think logically and develop and maintain consistent patterns. And then there are employers whose main focus is money and wages ;-). And then start having a look at the JPA spec to get an impression of what constitutes a consistent pattern/plan and what it requires to develop and/or document it."},{"owner":{"reputation":30506,"user_id":116509,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/GsYqn.jpg?s=128&g=1","display_name":"artbristol","link":"https://stackoverflow.com/users/116509/artbristol"},"edited":false,"score":3,"creation_date":1379178534,"post_id":11478811,"comment_id":27731830,"content_license":"CC BY-SA 3.0","body":"This answer is relevant for C++ but not for a garbage collected language like Java."},{"owner":{"reputation":456,"user_id":1022180,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/49dac162b7ba592f490a8c7d52713a4e?s=128&d=identicon&r=PG","display_name":"Alex Vaz","link":"https://stackoverflow.com/users/1022180/alex-vaz"},"edited":false,"score":0,"creation_date":1379997845,"post_id":11478811,"comment_id":28024110,"content_license":"CC BY-SA 3.0","body":"I respectfully disagree. Good memory handling in JAVA ( or almost any other language) will give you many benefits. From better stability as nullpointers reduced, better performance as lower memory footprint, to better design as relationships are better controlled.  I will suggest that the sloppy memory management of many JAVA applications leds to frequent NPEs and memory leaks."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1383590216,"post_id":11478811,"comment_id":29391088,"content_license":"CC BY-SA 3.0","body":"I most emphatically agree with what you wrote, and think it very unfortunate that Java makes no distinction between references that encapsulate ownership and those which do not.  Those who would argue &quot;that&#39;s what GC is for&quot; miss a critical point: GC avoids the need for <i>immutable</i> objects to have owners, and it also <i>eliminates</i> the possibility of a dangling reference to a deleted object turning into a reference to some other arbitrary object (as can happen in C++).  It&#39;s hard to write correct code, however, if more than one object encapsulates a mutable object&#39;s state as part of its own."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1383590327,"post_id":11478811,"comment_id":29391152,"content_license":"CC BY-SA 3.0","body":"My preferred way of thinking of things is to say that references can encapsulate identity, mutable state, both, or neither.  Additionally, references can encapsulate mutable state either because they identify an immutable object, or because the object they identify will never be exposed to anything that might mutate it.  It&#39;s too bad Java has no concept of such distinctions, since things like equality checking and cloning could be handled 99% automatically if it did."},{"owner":{"reputation":997,"user_id":202630,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0f96121fd8f9dd5c98f38a33c3dc7114?s=128&d=identicon&r=PG","display_name":"Kemal Erdogan","link":"https://stackoverflow.com/users/202630/kemal-erdogan"},"edited":false,"score":0,"creation_date":1410879108,"post_id":11478811,"comment_id":40486292,"content_license":"CC BY-SA 3.0","body":"I believe what you suggest will only address a small subset of null pointer problems in Java, and will not solve the original problem described here."},{"owner":{"reputation":456,"user_id":1022180,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/49dac162b7ba592f490a8c7d52713a4e?s=128&d=identicon&r=PG","display_name":"Alex Vaz","link":"https://stackoverflow.com/users/1022180/alex-vaz"},"edited":false,"score":0,"creation_date":1425595541,"post_id":11478811,"comment_id":46039499,"content_license":"CC BY-SA 3.0","body":"It might be more relevant than you think. More info: <a href=\"http://www.ibm.com/developerworks/library/j-jtp06243/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/library/j-jtp06243</a>   :)"},{"owner":{"reputation":17468,"user_id":389099,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/ee5f1a84fca3c5ab8d6609c8ed3a879e?s=128&d=identicon&r=PG","display_name":"guido","link":"https://stackoverflow.com/users/389099/guido"},"edited":false,"score":0,"creation_date":1430154023,"post_id":11478811,"comment_id":47926094,"content_license":"CC BY-SA 3.0","body":"<i>&quot;[.............]You will never have a null pointer anywhere, or someone is violating the rules.&quot;</i> That one violating the rules is precisely the point of the question. Or you write 100% of your code without using a single library?"},{"owner":{"reputation":456,"user_id":1022180,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/49dac162b7ba592f490a8c7d52713a4e?s=128&d=identicon&r=PG","display_name":"Alex Vaz","link":"https://stackoverflow.com/users/1022180/alex-vaz"},"edited":false,"score":0,"creation_date":1430241513,"post_id":11478811,"comment_id":47973421,"content_license":"CC BY-SA 3.0","body":"Of course, you can not control other people&#39;s code. But the rules still apply, and are useful. Other wise, its like saying  that, RUST ( <a href=\"http://cmr.github.io/blog/2013/08/13/rust-by-concept/\" rel=\"nofollow noreferrer\">cmr.github.io/blog/2013/08/13/rust-by-concept</a> ) will never work if it needs to access any library. So, indeed that&#39;s a problem, but following pointer ownership can greatly reduce the risk."}],"owner":{"reputation":456,"user_id":1022180,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/49dac162b7ba592f490a8c7d52713a4e?s=128&d=identicon&r=PG","display_name":"Alex Vaz","link":"https://stackoverflow.com/users/1022180/alex-vaz"},"comment_count":9,"is_accepted":false,"community_owned_date":1342215976,"score":2,"last_activity_date":1436268943,"last_edit_date":1436268943,"creation_date":1342215976,"answer_id":11478811,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>OK, I now this has been technically answered a million times but I have to say this because this is an un-ending discussion with Java programmers.</p>\n\n<p>Sorry but I disagree will almost all of above. The reason we have to be testing for null in Java is because must Java programmers donât know how to handle memory. </p>\n\n<p>I say this because I have a long experience programming in C++ and we donât do this. In other words, you donât need to. And note that, in Java, if you hit a dangling pointer you get a normal exception; in C++ this exception normally is not caught and terminates the program.</p>\n\n<p>Donât want to do this? Then follow some simple rules ala C/C++.</p>\n\n<p>Donât instantiate things so easily, <em>think</em> that every \"new\" can get you in lots of trouble and FOLLOW these simple rules.</p>\n\n<p>A class shall access memory in only 3 ways -></p>\n\n<ol>\n<li><p>It can \"HAVE\" class members, and they will follow these rules:</p>\n\n<ol>\n<li>ALL \"HAS\" members are created \"new\" in the constructor.</li>\n<li>You will close /de allocate in destructor or equivalent close()\nfunction in Java for that same class and in NO other.</li>\n</ol></li>\n</ol>\n\n<p>This means that you need to have in mind (just like Java does) who is the owner or parent of each resource and respect that ownership.  An object is only deleted by the class who created it. Also -></p>\n\n<ol start=\"2\">\n<li><p>Some members will be \"USED\" but not own or \"HAVE\". This are \"OWN\" in another class and passed as arguments to the constructor. Since these are owned by another class, we will NEVER delete or close this, only the parent can.</p></li>\n<li><p>A method in a class can also  instantiate local objects for internal use which will NEVER pass out side of the class, or they should have been normal \"has\" objects.</p></li>\n</ol>\n\n<p>Finally for all this to work, you need to have a disciplined design with classes in hierarchy form and making no cycles.</p>\n\n<p>Under this design, AND following the above rules, there is no way that a child class in a hierarchy design will ever access a pointer which was destroyed, because that means that a parent was destroyed before a child, which the hierarchical acyclic design will not allow it.</p>\n\n<p>Finally, also remember when starting your system you should build from top to bottom of the hierarchy and destroy bottom to top. You will never have a null pointer anywhere, or someone is violating the rules.</p>\n"},{"comments":[{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":9,"creation_date":1362619284,"post_id":11896966,"comment_id":21526406,"content_license":"CC BY-SA 3.0","body":"Actually, your example constitutes code bloat: the first line is superfluous because the NPE would be thrown in the second line. ;-)"},{"owner":{"reputation":108964,"user_id":1441122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1","display_name":"Stuart Marks","link":"https://stackoverflow.com/users/1441122/stuart-marks"},"reply_to_user":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":1,"creation_date":1362633783,"post_id":11896966,"comment_id":21530189,"content_license":"CC BY-SA 3.0","body":"True. A better example would be if the second line were <code>doCalc(someObject)</code>."},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":0,"creation_date":1362640038,"post_id":11896966,"comment_id":21532407,"content_license":"CC BY-SA 3.0","body":"Depends. If you are the author of doCalc(), I&#39;d suggest putting the check into that method&#39;s body (if possible). And then you most likely will call someObject.someMethod() where again there is no need to check for null. :-)"},{"owner":{"reputation":108964,"user_id":1441122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1","display_name":"Stuart Marks","link":"https://stackoverflow.com/users/1441122/stuart-marks"},"reply_to_user":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":0,"creation_date":1362811431,"post_id":11896966,"comment_id":21608270,"content_license":"CC BY-SA 3.0","body":"Well, if you are not the author of <code>doCalc()</code>, and it doesn&#39;t immediately throw NPE when given null, you&#39;d need to check for null and throw NPE yourself. That&#39;s what <code>Objects.requireNonNull()</code> is for."},{"owner":{"reputation":6969,"user_id":61938,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/vhWr1.jpg?s=128&g=1","display_name":"Rob Grant","link":"https://stackoverflow.com/users/61938/rob-grant"},"edited":false,"score":7,"creation_date":1380195206,"post_id":11896966,"comment_id":28114498,"content_license":"CC BY-SA 3.0","body":"It&#39;s not just code bloat. Better to check up front than halfway through a method that causes side effects or uses time/space."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1406138107,"post_id":11896966,"comment_id":38715467,"content_license":"CC BY-SA 3.0","body":"I probably wouldn&#39;t have thrown an NPE, when I&#39;m argument checking for nulls I usually throw an IllegalArgumentException, and it&#39;s not a bad thing to do at the very top, if you assume this.child = child will &quot;catch&quot; it, you aren&#39;t being explicit in your code, a refactor could make it really tough to catch where the null originated.  Code bloat is much better than magic, any day."},{"owner":{"reputation":1163,"user_id":234391,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/BaIJ4.jpg?s=128&g=1","display_name":"Cornel Masson","link":"https://stackoverflow.com/users/234391/cornel-masson"},"edited":false,"score":0,"creation_date":1412867111,"post_id":11896966,"comment_id":41235320,"content_license":"CC BY-SA 3.0","body":"The <code>Objects.requireNonNull(object, string)</code> version (where you can pass an error message as 2nd argument) is more useful than the single-arg version (the latter probably just added for the sake of completeness), especially when you&#39;re using it to check multiple argument values. Say you had to check 3 arguments for null, this would reduce your code from 3 if/then-throw blocks (separated by empty lines), to 3 single lines not needing empty lines."}],"owner":{"reputation":108964,"user_id":1441122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1","display_name":"Stuart Marks","link":"https://stackoverflow.com/users/1441122/stuart-marks"},"comment_count":7,"is_accepted":false,"community_owned_date":1344582480,"score":71,"last_activity_date":1398345780,"last_edit_date":1495541913,"creation_date":1344582480,"answer_id":11896966,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Java 7 has a new <code>java.util.Objects</code> utility class on which there is a <code>requireNonNull()</code> method. All this does is throw a <code>NullPointerException</code> if its argument is null, but it cleans up the code a bit. Example:</p>\n\n<pre><code>Objects.requireNonNull(someObject);\nsomeObject.doCalc();\n</code></pre>\n\n<hr>\n\n<p>The method is most useful for <a href=\"https://stackoverflow.com/questions/3322638/is-it-okay-to-throw-nullpointerexception-programatically\">checking</a> just before an assignment in a constructor, where each use of it can save three lines of code:</p>\n\n<pre><code>Parent(Child child) {\n   if (child == null) {\n      throw new NullPointerException(\"child\");\n   }\n   this.child = child;\n}\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>Parent(Child child) {\n   this.child = Objects.requireNonNull(child, \"child\");\n}\n</code></pre>\n"},{"owner":{"reputation":1846,"user_id":1391568,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9035a5fc689e10936835cb3d7b1dd283?s=128&d=identicon&r=PG","display_name":"drzymala","link":"https://stackoverflow.com/users/1391568/drzymala"},"comment_count":0,"is_accepted":false,"community_owned_date":1347461641,"score":1,"last_activity_date":1347461641,"creation_date":1347461641,"answer_id":12390983,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I prefer this</p>\n\n<pre><code>public void simpleFunc(SomeObject someObject){\n    someObject = someObject != null ? someObject : new SomeObject(null);\n    someObject.doSomething();\n}\n</code></pre>\n\n<p>Of course in my example SomeObject handles gracefully a null parameter. For example logging such event and doing nothing more.</p>\n"},{"comments":[{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"edited":false,"score":0,"creation_date":1351719077,"post_id":12946734,"comment_id":17917404,"content_license":"CC BY-SA 3.0","body":"why would this be downvoted? in my experience, this is far superior to the other approaches, would love to know why not"},{"owner":{"reputation":1201,"user_id":1244676,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f28485dbe44f7f91a73cf9ee0499d3f4?s=128&d=identicon&r=PG&f=1","display_name":"ChrisBlom","link":"https://stackoverflow.com/users/1244676/chrisblom"},"edited":false,"score":0,"creation_date":1374922122,"post_id":12946734,"comment_id":26139774,"content_license":"CC BY-SA 3.0","body":"I agree, this approach prevents problems related to nulls, rather than fixing them by speckling code null checks everywhere."},{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":7,"creation_date":1387263749,"post_id":12946734,"comment_id":30874026,"content_license":"CC BY-SA 3.0","body":"The problem with this approach is that if name is never set, it has the value &quot;&lt;unknown&gt;&quot;, which behaves like a set value. Now let&#39;s say I need to check if name was never set (unknown), I have to do a string comparison against the special value &quot;&lt;unknown&gt;&quot;."},{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"edited":false,"score":1,"creation_date":1422301550,"post_id":12946734,"comment_id":44686309,"content_license":"CC BY-SA 3.0","body":"True good point Steve. What I often do is have that value as a constant, e.g. public static final String UNSET=&quot;__unset&quot; ... private String field = UNSET ...   then   private boolean isSet() { return UNSET.equals(field); }"},{"owner":{"reputation":544,"user_id":2403791,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1b3c49a61a98f8311bf713b22cae10c3?s=128&d=identicon&r=PG","display_name":"Kurapika","link":"https://stackoverflow.com/users/2403791/kurapika"},"edited":false,"score":0,"creation_date":1512849361,"post_id":12946734,"comment_id":82425650,"content_license":"CC BY-SA 3.0","body":"IMHO, This is a implementation of Null Object Pattern with a yourself implementation  of Optional (Contract). How it behaves on persistence class class? I do not see applicable in that case."},{"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"reply_to_user":{"reputation":544,"user_id":2403791,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1b3c49a61a98f8311bf713b22cae10c3?s=128&d=identicon&r=PG","display_name":"Kurapika","link":"https://stackoverflow.com/users/2403791/kurapika"},"edited":false,"score":0,"creation_date":1513110520,"post_id":12946734,"comment_id":82523325,"content_license":"CC BY-SA 3.0","body":"@Kurapika - agree. I think &quot;never use null&quot; is not entirely practical in Java.  But 99% of the time, it is, and is to be encouraged imo. I like what I see with languages like Kotlin that address this problem."}],"owner":{"reputation":1634,"user_id":1342121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77514447b0277a930a8f46776a3da885?s=128&d=identicon&r=PG","display_name":"ianpojman","link":"https://stackoverflow.com/users/1342121/ianpojman"},"comment_count":6,"is_accepted":false,"community_owned_date":1350531756,"score":35,"last_activity_date":1442691758,"last_edit_date":1442691758,"creation_date":1350531756,"answer_id":12946734,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Just don't ever use null. Don't allow it.</p>\n\n<p>In my classes, most fields and local variables have non-null default values, and I add contract statements (always-on asserts) everywhere in the code to make sure this is being enforced (since it's more succinct, and more expressive than letting it come up as an NPE and then having to resolve the line number, etc.).</p>\n\n<p>Once I adopted this practice, I noticed that the problems seemed to fix themselves. You'd catch things much earlier in the development process just by accident and realize you had a weak spot..  and more importantly.. it helps encapsulate different modules' concerns, different modules can 'trust' each other, and no more littering the code with <code>if = null else</code> constructs!</p>\n\n<p>This is defensive programming and results in much cleaner code in the long run. Always sanitize the data, e.g. here by enforcing rigid standards, and the problems go away.</p>\n\n<pre><code>class C {\n    private final MyType mustBeSet;\n    public C(MyType mything) {\n       mustBeSet=Contract.notNull(mything);\n    }\n   private String name = \"&lt;unknown&gt;\";\n   public void setName(String s) {\n      name = Contract.notNull(s);\n   }\n}\n\n\nclass Contract {\n    public static &lt;T&gt; T notNull(T t) { if (t == null) { throw new ContractException(\"argument must be non-null\"); return t; }\n}\n</code></pre>\n\n<p>The contracts are like mini-unit tests which are always running, even in production, and when things fail, you know why, rather than a random NPE you have to somehow figure out.</p>\n"},{"comments":[{"owner":{"reputation":544,"user_id":2403791,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1b3c49a61a98f8311bf713b22cae10c3?s=128&d=identicon&r=PG","display_name":"Kurapika","link":"https://stackoverflow.com/users/2403791/kurapika"},"edited":false,"score":0,"creation_date":1512852899,"post_id":13676682,"comment_id":82426731,"content_license":"CC BY-SA 3.0","body":"are you proposing intercept each method of entire app?"}],"owner":{"reputation":6786,"user_id":1564766,"user_type":"registered","accept_rate":15,"profile_image":"https://i.stack.imgur.com/00n8a.jpg?s=128&g=1","display_name":"abishkar bhattarai","link":"https://stackoverflow.com/users/1564766/abishkar-bhattarai"},"comment_count":1,"is_accepted":false,"community_owned_date":1354504523,"score":4,"last_activity_date":1442691992,"last_edit_date":1442691992,"creation_date":1354504523,"answer_id":13676682,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>You can use an interceptor before the method call. That is what <a href=\"https://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow\">aspect-oriented programming</a> focus on.</p>\n\n<p>Suppose M1(Object test) is a method and M2 is a method where we apply an aspect before a method call, <code>M2(Object test2)</code>. If <code>test2 != null</code> then call M1, otherwise do another thing. It works for all methods with whom you want to apply an aspect for. If you want to apply an aspect for an instance field and constructor you can use <a href=\"https://en.wikipedia.org/wiki/AspectJ\" rel=\"nofollow\">AspectJ</a>. <a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow\">Spring</a> can also be the best choice for a method aspect.</p>\n"},{"owner":{"reputation":1977,"user_id":212665,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FNE5j.jpg?s=128&g=1","display_name":"Vinay Lodha","link":"https://stackoverflow.com/users/212665/vinay-lodha"},"comment_count":0,"is_accepted":false,"community_owned_date":1357803959,"score":2,"last_activity_date":1442692143,"last_edit_date":1442692143,"creation_date":1357803959,"answer_id":14253016,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>First of all, we can't really remove all null conditions. We can reduce them using <code>@NotNull</code> and <code>@Nullable</code> annotations (<strong>as mentioned already</strong>). But this needs to be backed by some framework. This is where <a href=\"http://oval.sourceforge.net\" rel=\"nofollow\">OVal</a> can help.</p>\n\n<p>The basic idea is object/parameters/constructor should always satisfy preconditions. You can have a whole lot of preconditions such as <code>Nullable</code>, <code>NotNull</code> and OVal would take care that an object should be in a consistent state when invoked.</p>\n\n<p>I guess OVal internally uses AspectJ to validate the preconditions.</p>\n\n<pre><code>@Guarded\npublic class BusinessObject\n{\n  public BusinessObject(@NotNull String name)\n  {\n    this.name = name;\n  }\n\n  ...\n}\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>// Throws a ConstraintsViolatedException because parameter name is null\nBusinessObject bo = new BusinessObject(null);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":301,"user_id":728283,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/70543da898b68648636f07a6f9a5a6df?s=128&d=identicon&r=PG","display_name":"Bradley Gottfried","link":"https://stackoverflow.com/users/728283/bradley-gottfried"},"edited":false,"score":12,"creation_date":1369675826,"post_id":16218718,"comment_id":24174736,"content_license":"CC BY-SA 3.0","body":"Google&#39;s guava has an optional implimention for Java 6+."},{"owner":{"reputation":1163,"user_id":234391,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/BaIJ4.jpg?s=128&g=1","display_name":"Cornel Masson","link":"https://stackoverflow.com/users/234391/cornel-masson"},"edited":false,"score":15,"creation_date":1412866629,"post_id":16218718,"comment_id":41234970,"content_license":"CC BY-SA 3.0","body":"It&#39;s <i>very</i> important to emphasise that using Optional only with ifPresent() does <i>not</i> add much value above normal null checking. It&#39;s core value is that it is a monad that can be used in function chains of map/flapMap, which achieves results similar to the Elvis operator in Groovy mentioned elsewhere. Even without this usage, though, I find the orElse/orElseThrow syntax also very useful."},{"owner":{"reputation":621,"user_id":1745416,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dc834a3f6f4aa0c674f92effdda58fe9?s=128&d=identicon&r=PG","display_name":"JohnC","link":"https://stackoverflow.com/users/1745416/johnc"},"edited":false,"score":0,"creation_date":1449619553,"post_id":16218718,"comment_id":56084324,"content_license":"CC BY-SA 3.0","body":"This blog has a good entry on Optional <a href=\"http://winterbe.com/posts/2015/03/15/avoid-null-checks-in-java/\" rel=\"nofollow noreferrer\">winterbe.com/posts/2015/03/15/avoid-null-checks-in-java</a>"},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"edited":false,"score":0,"creation_date":1519423820,"post_id":16218718,"comment_id":84920786,"content_license":"CC BY-SA 3.0","body":"I really never understood why people are so happy with this boilerplate code <a href=\"https://dzone.com/articles/java-8-elvis-operator\" rel=\"nofollow noreferrer\">dzone.com/articles/java-8-elvis-operator</a>"},{"owner":{"reputation":317,"user_id":5332993,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/4KWHl.jpg?s=128&g=1","display_name":"Satyendra Kumar","link":"https://stackoverflow.com/users/5332993/satyendra-kumar"},"edited":false,"score":4,"creation_date":1520435199,"post_id":16218718,"comment_id":85314626,"content_license":"CC BY-SA 3.0","body":"Why people have tendency to do this <code>if(optional.isPresent()){ optional.get(); }</code> instead of <code>optional.ifPresent(o -&gt; { ...})</code>"},{"owner":{"reputation":15739,"user_id":1195273,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/392b9a49e8a308036d37c9d07e9c7d9b?s=128&d=identicon&r=PG","display_name":"crush","link":"https://stackoverflow.com/users/1195273/crush"},"edited":false,"score":1,"creation_date":1533836342,"post_id":16218718,"comment_id":90504695,"content_license":"CC BY-SA 4.0","body":"So, other than the API contractual hints, it&#39;s really just about catering to functional programmers who enjoy chaining methods endlessly."}],"owner":{"reputation":13924,"user_id":315677,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/s1vD0.png?s=128&g=1","display_name":"Pierre Henry","link":"https://stackoverflow.com/users/315677/pierre-henry"},"comment_count":6,"is_accepted":false,"community_owned_date":1366903370,"score":172,"last_activity_date":1475134744,"last_edit_date":1475134744,"creation_date":1366903370,"answer_id":16218718,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>With Java 8 comes the new <code>java.util.Optional</code> class that arguably solves some of the problem. One can at least say that it improves the readability of the code, and in the case of public APIs make the API's contract clearer to the client developer.</p>\n\n<p>They work like that:</p>\n\n<p>An optional object for a given type (<code>Fruit</code>) is created as the return type of a method. It can be empty or contain a <code>Fruit</code> object:</p>\n\n<pre><code>public static Optional&lt;Fruit&gt; find(String name, List&lt;Fruit&gt; fruits) {\n   for (Fruit fruit : fruits) {\n      if (fruit.getName().equals(name)) {\n         return Optional.of(fruit);\n      }\n   }\n   return Optional.empty();\n}\n</code></pre>\n\n<p>Now look at this code where we search a list of <code>Fruit</code> (<code>fruits</code>) for a given Fruit instance:</p>\n\n<pre><code>Optional&lt;Fruit&gt; found = find(\"lemon\", fruits);\nif (found.isPresent()) {\n   Fruit fruit = found.get();\n   String name = fruit.getName();\n}\n</code></pre>\n\n<p>You can use the <code>map()</code> operator to perform a computation on--or extract a value from--an optional object.  <code>orElse()</code> lets you provide a fallback for missing values.</p>\n\n<pre><code>String nameOrNull = find(\"lemon\", fruits)\n    .map(f -&gt; f.getName())\n    .orElse(\"empty-name\");\n</code></pre>\n\n<p>Of course, the check for null/empty value is still necessary, but at least the developer is conscious that the value might be empty and the risk of forgetting to check is limited.</p>\n\n<p>In an API built from scratch using <code>Optional</code> whenever a return value might be empty, and returning a plain object only when it cannot be <code>null</code> (convention), the client code might abandon null checks on simple object return values...</p>\n\n<p>Of course <code>Optional</code> could also be used as a method argument, perhaps a better way to indicate optional arguments than 5 or 10 overloading methods in some cases.</p>\n\n<p><code>Optional</code> offers other convenient methods, such as <code>orElse</code> that allow the use of a default value, and <code>ifPresent</code> that works with <a href=\"https://en.wikipedia.org/wiki/Anonymous_function\" rel=\"noreferrer\">lambda expressions</a>.</p>\n\n<p>I invite you to read this article (my main source for writing this answer) in which the <code>NullPointerException</code> (and in general null pointer) problematic as well as the (partial) solution brought by <code>Optional</code> are well explained: <em><a href=\"http://java.dzone.com/articles/java-optional-objects\" rel=\"noreferrer\">Java Optional Objects</a></em>.</p>\n"},{"comments":[{"owner":{"reputation":8957,"user_id":939063,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/3a40ab23342d27c430b88cf7edf23e45?s=128&d=identicon&r=PG","display_name":"Terence","link":"https://stackoverflow.com/users/939063/terence"},"edited":false,"score":0,"creation_date":1372664734,"post_id":17109182,"comment_id":25263554,"content_license":"CC BY-SA 3.0","body":"<a href=\"http://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated\" title=\"why is java vector class considered obsolete or deprecated\">stackoverflow.com/questions/1386275/&hellip;</a>"},{"owner":{"reputation":1474,"user_id":619895,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/8ba1598aacecc60225f28f49211eac69?s=128&d=identicon&r=PG","display_name":"ggb667","link":"https://stackoverflow.com/users/619895/ggb667"},"edited":false,"score":3,"creation_date":1379947962,"post_id":17109182,"comment_id":28005501,"content_license":"CC BY-SA 3.0","body":"+1  This I agree with. You should never return half initialized objects. Jaxb related code and bean code is notiroius for this. It is bad practice. All collections should be initialized, and all objects should exist with (ideally) no null references.  Consider a object that has a collection in it.  Checking that the object is not null, that the collection is not null and that the collection does not contain null objects is unreasonable and foolish."}],"owner":{"reputation":1595,"user_id":62709,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/002c19193e3976723d5681cf4864bebb?s=128&d=identicon&r=PG","display_name":"Stuart Axon","link":"https://stackoverflow.com/users/62709/stuart-axon"},"comment_count":2,"is_accepted":false,"community_owned_date":1371215131,"score":16,"last_activity_date":1380721854,"last_edit_date":1380721854,"creation_date":1371215131,"answer_id":17109182,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<ol>\n<li>Never initialise variables to null.</li>\n<li>If (1) is not possible, initialise all collections and arrays to empty collections/arrays.</li>\n</ol>\n\n<p>Doing this in your own code and you can avoid != null checks.</p>\n\n<p>Most of the time null checks seem to guard loops over collections or arrays, so just initialise them empty, you won't need any null checks.</p>\n\n<pre><code>// Bad\nArrayList&lt;String&gt; lemmings;\nString[] names;\n\nvoid checkLemmings() {\n    if (lemmings != null) for(lemming: lemmings) {\n        // do something\n    }\n}\n\n\n\n// Good\nArrayList&lt;String&gt; lemmings = new ArrayList&lt;String&gt;();\nString[] names = {};\n\nvoid checkLemmings() {\n    for(lemming: lemmings) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>There is a tiny overhead in this, but it's worth it for cleaner code and less NullPointerExceptions.</p>\n"},{"comments":[{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":1,"creation_date":1405020443,"post_id":19714883,"comment_id":38274707,"content_license":"CC BY-SA 3.0","body":"I don&#39;t like <code>CollectionUtils.isEmpty</code> and <code>StringUtils.isEmpty</code> as they also do a null check, which is not implied by the method name."}],"owner":{"reputation":1804,"user_id":552782,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/7QCok.jpg?s=128&g=1","display_name":"iowatiger08","link":"https://stackoverflow.com/users/552782/iowatiger08"},"comment_count":1,"is_accepted":false,"community_owned_date":1383247104,"score":1,"last_activity_date":1383250565,"last_edit_date":1383250565,"creation_date":1383247104,"answer_id":19714883,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>We have been using Apache libraries (Apache Commons) for this issue.</p>\n\n<pre><code>ObjectUtils.equals(object, null)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>CollectionUtils.isEmpty(myCollection);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>StringUtils.isEmpty(\"string\");\n</code></pre>\n\n<p>I like the previous answer before, as a practice, of providing initial default values or empty sets for collections to minimize the need.</p>\n\n<p>These can be simple uses that keep you from having NullPointerException or using an empty collection.  This doesnt answer the question for what to do with the null object, but these provide some checks for basic validations of the object or collection. </p>\n\n<p>Hope this helps. </p>\n"},{"owner":{"reputation":10470,"user_id":1054021,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/186f36b0a1b1fe14e690cd2bfab8a324?s=128&d=identicon&r=PG","display_name":"Tobb","link":"https://stackoverflow.com/users/1054021/tobb"},"comment_count":0,"is_accepted":false,"community_owned_date":1390856070,"score":2,"last_activity_date":1390856070,"creation_date":1390856070,"answer_id":21391466,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>The way to avoid unnecessary <code>null-checks</code> is simple to state:</p>\n\n<p><code>You need to know which variables can be null, and which cannot, and you need to be confident about which category a given variable fall into.</code></p>\n\n<p>But, although it can be stated simply enough, achieving it is harder. The key lies in the <code>confident</code> part, because how can you be sure that a variable can't be null?</p>\n\n<p>There are no quick-fix, easy answers to this, but here are some pointers:</p>\n\n<ol>\n<li><p>Clean code. The most important thing for being able to reason about the behaviour of a piece of code is that it is written in a matter that is easy to understand. Name your variables based on what they represent, name your methods after what they do, apply the <code>Single responsibility principle</code> (the <code>S</code> in <code>SOLID</code>: <a href=\"http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow\">http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)</a>, it means that each piece of code should have a single responsibility, and do this and nothing else). Once your code is clean, it is much easier to reason about it, also across multiple tiers/layers of code. With messy code, trying to understand what a method does might make you forget why you are reading the method in the first place. (Tip: Read \"Clean Code\" by Robert C. Martin)</p></li>\n<li><p>Avoid returning <code>null</code> values. If a <code>null</code> value would keep your program from functioning correctly, throw an <code>exception</code> instead (make sure to add the appropriate error-handling.) Cases where returning a <code>null</code> value might be acceptable is for instance trying to fetch an object from the database. In these cases, write code that handles the <code>null</code> values, and make a note behind your ear that here we have something that might return <code>null</code>. Handle returned <code>null</code> values as close to the caller of the method returning <code>null</code> as possible (don't just blindly pass it back up the call-chain.)</p></li>\n<li><p>Never EVER pass explicit <code>null</code> values as parameters (at least not across classes). If you are ever in a position where passing a <code>null</code>-parameter is the only option, creating a new method that does not have this parameter is the way to go. </p></li>\n<li><p>Validate your input! Identify the \"entry-points\" to your application. They can everything from webservices, REST-services, remote EJB classes, controllers, etc. For each method in these entry-points, ask yourself: \"Will this method execute correctly if this parameter is null?\" If the answer is no, add <code>Validate.notNull(someParam, \"Can't function when someParam is null!\");</code>. This will throw an <code>IllegalArgumentException</code> if the required parameter is missing. The good thing about this type of validation in the entry-points, is that you can then easily assume in the code being executed from the entry-point, that this variable will never be null! Also, if this fails, being at the entry-point, debugging is made a lot easier than it would if you just got a <code>NullPointerException</code> deep down in your code, since a failure like this can only mean one thing: The client didn't send you all the required information. In most cases you want to validate all input parameters, if you find yourself in a position where you need to allow a lot of <code>null</code>-values, it might be a sign of a badly designed interface, which needs refactoring/additions to suite the needs of the clients.</p></li>\n<li><p>When working with <code>Collection</code>s, return an empty one rather than null! </p></li>\n<li><p>When working with a database, utilize <code>not null</code>-constraints. In that way, you'll know that a value read from the database cannot be null, and you won't have to check for it.</p></li>\n<li><p>Structure your code and stick with it. Doing this allows you to make assumptions about the behaviour of the code, for instance if all input to your application is validated, then you can assume that these values will never be null. </p></li>\n<li><p>If you are not already doing it, write automated tests of your code. By writing tests, you will reason about your code, and you will also become more confident that it does what it's supposed to. Also, automated tests guards you from blunders during refactoring, by letting you know immediatly that this piece of code is not doing what it used to.</p></li>\n</ol>\n\n<p>You still have to null-check of course, but it can trimmed down to the bare minimum (i.e. the situation where <em>know</em> you might be getting a null-value, instead of everywhere just to be sure.) When it comes to null-checks, i actually prefer to use the ternary operator (but use with care, when you start nesting them they come really messy.)</p>\n\n<pre><code>public String nullSafeToString(final Object o) {\n    return o != null ? o.toString() : \"null\";\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1236,"user_id":2100584,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/236ecbd2033b1620c2ae79a0877e1bba?s=128&d=identicon&r=PG","display_name":"Tomas","link":"https://stackoverflow.com/users/2100584/tomas"},"edited":false,"score":0,"creation_date":1446177745,"post_id":21726959,"comment_id":54645620,"content_license":"CC BY-SA 3.0","body":"<code>javax</code> is, by definition, <i>not</i> &quot;core Java&quot;."}],"owner":{"reputation":32609,"user_id":2648077,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/fd10f51a1b9acf80448616c0a03cd261?s=128&d=identicon&r=PG&f=1","display_name":"Alireza Fattahi","link":"https://stackoverflow.com/users/2648077/alireza-fattahi"},"comment_count":1,"is_accepted":false,"community_owned_date":1392205296,"score":17,"last_activity_date":1398350885,"last_edit_date":1398350885,"creation_date":1392205296,"answer_id":21726959,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>May I answer it more generally!</p>\n\n<p>We <strong>usually</strong> face this issue when the methods get the parameters in the way we not expected (bad method call is programmer's fault). For example: you expect to get an object, instead you get a null. You expect to get an String with at least one character, instead you get an empty String ...</p>\n\n<p>So there is no difference between:</p>\n\n<pre><code>if(object == null){\n   //you called my method badly!\n</code></pre>\n\n<p>}</p>\n\n<p>or</p>\n\n<pre><code>if(str.length() == 0){\n   //you called my method badly again!\n}\n</code></pre>\n\n<p>They both want to make sure that we received valid parameters, before we do any other functions.</p>\n\n<p>As mentioned in some other answers, to avoid above problems you can follow the <strong>Design by contract</strong> pattern. Please see <a href=\"http://en.wikipedia.org/wiki/Design_by_contract\">http://en.wikipedia.org/wiki/Design_by_contract</a>. </p>\n\n<p>To implement this pattern in java, you can use core java annotations like <strong>javax.annotation.NotNull</strong> or use more sophisticated libraries like <strong>Hibernate Validator</strong>.</p>\n\n<p>Just a sample:</p>\n\n<pre><code>getCustomerAccounts(@NotEmpty String customerId,@Size(min = 1) String accountType)\n</code></pre>\n\n<p>Now you can safely develop the core function of your method without needing to check input parameters, they guard your methods from unexpected parameters.</p>\n\n<p>You can go a step further and make sure that only valid pojos could be created in your application. (sample from hibernate validator site)</p>\n\n<pre><code>public class Car {\n\n   @NotNull\n   private String manufacturer;\n\n   @NotNull\n   @Size(min = 2, max = 14)\n   private String licensePlate;\n\n   @Min(2)\n   private int seatCount;\n\n   // ...\n}\n</code></pre>\n"},{"owner":{"reputation":710,"user_id":1940722,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf612346df3d5d8f4b9ce9c797aa70b2?s=128&d=identicon&r=PG","display_name":"Gal Morad","link":"https://stackoverflow.com/users/1940722/gal-morad"},"comment_count":0,"is_accepted":false,"community_owned_date":1394059441,"score":6,"last_activity_date":1507139445,"last_edit_date":1507139445,"creation_date":1394059441,"answer_id":22211014,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I find Guava Preconditions to be very useful in this case. I don't like leaving nulls to null pointer exception since the only way to understand an NPE is by locating the line number. Line numbers in production version and development version can be different.</p>\n\n<p>Using Guava Preconditions, I can check null parameters and define a meaningful exception message in one line.</p>\n\n<p>For example,</p>\n\n<pre><code>Preconditions.checkNotNull(paramVal, \"Method foo received null paramVal\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1218,"user_id":718590,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/11708f36ab168b92413e5df4dde4fcdc?s=128&d=identicon&r=PG","display_name":"pkalinow","link":"https://stackoverflow.com/users/718590/pkalinow"},"edited":false,"score":0,"creation_date":1454501930,"post_id":23021801,"comment_id":58070686,"content_license":"CC BY-SA 3.0","body":"Ad. 4. It is not very useful - when you check if a pointer is null, you probably want to call a method on it. Calling a method on null gives you the same behavior - NullPointerException."}],"owner":{"reputation":10276,"user_id":2057902,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/6q1nz.jpg?s=128&g=1","display_name":"Sireesh Yarlagadda","link":"https://stackoverflow.com/users/2057902/sireesh-yarlagadda"},"comment_count":1,"is_accepted":false,"community_owned_date":1397247260,"score":15,"last_activity_date":1427217221,"last_edit_date":1427217221,"creation_date":1397247260,"answer_id":23021801,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>This is the most common error occurred for most of the developers.</p>\n\n<p>We have number of ways to handle this.</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>org.apache.commons.lang.Validate //using apache framework\n</code></pre>\n\n<p>notNull(Object object, String message) </p>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>if(someObject!=null){ // simply checking against null\n}\n</code></pre>\n\n<p><strong>Approach 3:</strong></p>\n\n<pre><code>@isNull @Nullable  // using annotation based validation\n</code></pre>\n\n<p><strong>Approach 4:</strong></p>\n\n<pre><code>// by writing static method and calling it across whereever we needed to check the validation\n\nstatic &lt;T&gt; T isNull(someObject e){  \n   if(e == null){\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1218,"user_id":718590,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/11708f36ab168b92413e5df4dde4fcdc?s=128&d=identicon&r=PG","display_name":"pkalinow","link":"https://stackoverflow.com/users/718590/pkalinow"},"edited":false,"score":0,"creation_date":1454502372,"post_id":23031015,"comment_id":58070988,"content_license":"CC BY-SA 3.0","body":"The solution with &quot;hasBackground()&quot; has one drawback - it&#39;s not thread-safe. If you need to call two methods instead of one, you need to synchronize the whole sequence in multi-threaded environment."},{"owner":{"reputation":2150,"user_id":2000185,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4ef405c6568affd4e3fb3428369b2c8d?s=128&d=identicon&r=PG&f=1","display_name":"luke1985","link":"https://stackoverflow.com/users/2000185/luke1985"},"reply_to_user":{"reputation":1218,"user_id":718590,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/11708f36ab168b92413e5df4dde4fcdc?s=128&d=identicon&r=PG","display_name":"pkalinow","link":"https://stackoverflow.com/users/718590/pkalinow"},"edited":false,"score":0,"creation_date":1454513399,"post_id":23031015,"comment_id":58079152,"content_license":"CC BY-SA 3.0","body":"@pkalinow You made a contrived example only to point out that this solution has a drawback. If code is not meant to run in multithreaded application then there is no drawback. I could put at you probably 90% of your code that is not thread safe. We&#39;re not speaking here about this aspect of code, we&#39;re speaking about design pattern. And multithreading is a topic on its own."},{"owner":{"reputation":1218,"user_id":718590,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/11708f36ab168b92413e5df4dde4fcdc?s=128&d=identicon&r=PG","display_name":"pkalinow","link":"https://stackoverflow.com/users/718590/pkalinow"},"edited":false,"score":0,"creation_date":1454582050,"post_id":23031015,"comment_id":58113391,"content_license":"CC BY-SA 3.0","body":"Of course in a single-thread application it&#39;s not a problem. I&#39;ve given that comment because sometimes it is a problem."},{"owner":{"reputation":2150,"user_id":2000185,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4ef405c6568affd4e3fb3428369b2c8d?s=128&d=identicon&r=PG&f=1","display_name":"luke1985","link":"https://stackoverflow.com/users/2000185/luke1985"},"reply_to_user":{"reputation":1218,"user_id":718590,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/11708f36ab168b92413e5df4dde4fcdc?s=128&d=identicon&r=PG","display_name":"pkalinow","link":"https://stackoverflow.com/users/718590/pkalinow"},"edited":false,"score":0,"creation_date":1454583464,"post_id":23031015,"comment_id":58114436,"content_license":"CC BY-SA 3.0","body":"@pkalinow If you study this topic closer you will find out that Null Object design pattern won&#39;t fix the multithreading problems. So it&#39;s irrelevant. And to be honest, I&#39;ve found places where this pattern would fit in nicely, so my original answer is a bit wrong, actually."}],"owner":{"reputation":2150,"user_id":2000185,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4ef405c6568affd4e3fb3428369b2c8d?s=128&d=identicon&r=PG&f=1","display_name":"luke1985","link":"https://stackoverflow.com/users/2000185/luke1985"},"comment_count":4,"is_accepted":false,"community_owned_date":1397309277,"score":17,"last_activity_date":1454585097,"last_edit_date":1454585097,"creation_date":1397309277,"answer_id":23031015,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I highly disregard answers that suggest using the null objects in every situation. This pattern may break the contract and bury problems deeper and deeper instead of solving them, not mentioning that used inappropriately will create another pile of boilerplate code that will require future maintenance.</p>\n\n<p>In reality if something returned from a method can be null and the calling code has to make decision upon that, there should an earlier call that ensures the state. </p>\n\n<p>Also keep in mind, that null object pattern will be memory hungry if used without care. For this - the instance of a NullObject should be shared between owners, and not be an unigue instance for each of these.</p>\n\n<p>Also I would not recommend using this pattern where the type is meant to be a primitive type representation - like mathematical entities, that are not scalars: vectors, matrices, complex numbers and POD(Plain Old Data) objects, which are meant to hold state in form of Java built-in types. In the latter case you would end up calling getter methods with arbitrary results. For example what should a NullPerson.getName() method return? </p>\n\n<p>It's worth considering such cases in order to avoid absurd results.</p>\n"},{"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"comment_count":0,"is_accepted":false,"community_owned_date":1416735591,"score":-1,"last_activity_date":1416735591,"creation_date":1416735591,"answer_id":27087535,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Here is my approach ..</p>\n\n<pre><code>class MyObjectHandler\n{\npublic static final int EXCEPTION = (-3);\npublic static final int INACCESSIBLE = (-2);\n\npublic static int doSomething (MyObject obj, MyObjectParameter [] input)\n{\n    int returnValue= 0;\n\n    try\n    {\n        if (obj != null)\n        {\n            returnValue = obj.doSomething(input);\n        }\n        else\n        {\n            returnValue = MyObjectHandler.INACCESSIBLE;\n        }\n    }\n    catch (Exception e)\n    {\n        e.printStack();\n        returnValue = MyObjectHandler.EXCEPTION;\n    }\n    finally\n    {\n        return returnValue;\n    }\n}\n\n..\n\n}\n</code></pre>\n\n<p>Then your code will be just like:</p>\n\n<pre><code>import xx.xx.xx.MyObjectHandler;\nimport xx.xx.xx.MyObjectParameter;\n\nclass Test\n{\n\n    public static void main ()\n    {\n\n        MyObject obj = null;\n\n        MyObjectHandler.doSomething(obj, null);\n\n    }\n\n    ..\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2502,"user_id":248847,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/7ALzV.jpg?s=128&g=1","display_name":"KrishPrabakar","link":"https://stackoverflow.com/users/248847/krishprabakar"},"edited":false,"score":0,"creation_date":1577968565,"post_id":29887121,"comment_id":105294546,"content_license":"CC BY-SA 4.0","body":"There&#39;s a null check in above code - <code>if(homeServices != null) {</code> which can be changed to <code>homeServices.ifPresent(h -&gt; &#47;&#47;action)</code>;"}],"owner":{"reputation":53,"user_id":1646333,"user_type":"registered","profile_image":"https://i.stack.imgur.com/a6MZ4.jpg?s=128&g=1","display_name":"Yogesh Devatraj","link":"https://stackoverflow.com/users/1646333/yogesh-devatraj"},"comment_count":1,"is_accepted":false,"community_owned_date":1430108209,"score":26,"last_activity_date":1442695170,"last_edit_date":1442695170,"creation_date":1430108209,"answer_id":29887121,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>This is a very common problem for every Java developer. So there is official support in Java&nbsp;8 to address these issues without cluttered code.</p>\n\n<p>Java 8 has introduced <code>java.util.Optional&lt;T&gt;</code>. It is a container that may or may not hold a non-null value. Java 8 has given a safer way to handle an object whose value may be null in some of the cases. It is inspired from the ideas of <a href=\"http://en.wikipedia.org/wiki/Haskell_%28programming_language%29\" rel=\"noreferrer\">Haskell</a> and <a href=\"http://en.wikipedia.org/wiki/Scala_%28programming_language%29\" rel=\"noreferrer\">Scala</a>.</p>\n\n<p>In a nutshell, the Optional class includes methods to explicitly deal with the cases where a value is present or absent. However, the advantage compared to null references is that the Optional&lt;T> class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions.</p>\n\n<p>In above example we have a home service factory that returns a handle to multiple appliances available in the home. But these services may or may not be available/functional; it means it may result in a NullPointerException. Instead of adding a null <code>if</code> condition before using any service, let's wrap it in to Optional&lt;Service>.</p>\n\n<p>WRAPPING TO OPTION&lt;T></p>\n\n<p>Let's consider a method to get a reference of a service from a factory. Instead of returning the service reference, wrap it with Optional. It lets the API user know that the returned service may or may not available/functional, use defensively</p>\n\n<pre><code>public Optional&lt;Service&gt; getRefrigertorControl() {\n      Service s = new  RefrigeratorService();\n       //...\n      return Optional.ofNullable(s);\n   }\n</code></pre>\n\n<p>As you see <code>Optional.ofNullable()</code> provides an easy way to get the reference wrapped. There are another ways to get the reference of Optional, either <code>Optional.empty()</code> &amp; <code>Optional.of()</code>. One for returning an empty object instead of retuning null and the other to wrap a non-nullable object, respectively.</p>\n\n<p>SO HOW EXACTLY IT HELPS TO AVOID A NULL CHECK?</p>\n\n<p>Once you have wrapped a reference object, Optional provides many useful methods to invoke methods on a wrapped reference without NPE.</p>\n\n<pre><code>Optional ref = homeServices.getRefrigertorControl();\nref.ifPresent(HomeServices::switchItOn);\n</code></pre>\n\n<p>Optional.ifPresent invokes the given Consumer with a reference if it is a non-null value. Otherwise, it does nothing.</p>\n\n<pre><code>@FunctionalInterface\npublic interface Consumer&lt;T&gt;\n</code></pre>\n\n<p>Represents an operation that accepts a single input argument and returns no result. Unlike most other functional interfaces, Consumer is expected to operate via side-effects.\nIt is so clean and easy to understand. In the above code example, <code>HomeService.switchOn(Service)</code> gets invoked if the Optional holding reference is non-null.</p>\n\n<p>We use the ternary operator very often for checking null condition and return an alternative value or default value. Optional provides another way to handle the same condition without checking null. Optional.orElse(defaultObj) returns defaultObj if the Optional has a null value. Let's use this in our sample code:</p>\n\n<pre><code>public static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n</code></pre>\n\n<p>Now HomeServices.get() does same thing, but in a better way. It checks whether the service is already initialized of not. If it is then return the same or create a new New service. Optional&lt;T>.orElse(T) helps to return a default value.</p>\n\n<p>Finally, here is our NPE as well as null check-free code:</p>\n\n<pre><code>import java.util.Optional;\npublic class HomeServices {\n    private static final int NOW = 0;\n    private static Optional&lt;HomeServices&gt; service;\n\npublic static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n\npublic Optional&lt;Service&gt; getRefrigertorControl() {\n    Service s = new  RefrigeratorService();\n    //...\n    return Optional.ofNullable(s);\n}\n\npublic static void main(String[] args) {\n    /* Get Home Services handle */\n    Optional&lt;HomeServices&gt; homeServices = HomeServices.get();\n    if(homeServices != null) {\n        Optional&lt;Service&gt; refrigertorControl = homeServices.get().getRefrigertorControl();\n        refrigertorControl.ifPresent(HomeServices::switchItOn);\n    }\n}\n\npublic static void switchItOn(Service s){\n         //...\n    }\n}\n</code></pre>\n\n<p>The complete post is <em><a href=\"http://ydtech.blogspot.in/2015/04/npe-as-well-as-null-check-free-code.html\" rel=\"noreferrer\">NPE as well as Null check-free code â¦ Really?</a></em>.</p>\n"},{"owner":{"reputation":1005,"user_id":1624839,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/040196ed887e3633755f1c491fb8367b?s=128&d=identicon&r=PG","display_name":"Mehdi","link":"https://stackoverflow.com/users/1624839/mehdi"},"comment_count":0,"is_accepted":false,"community_owned_date":1445263236,"score":0,"last_activity_date":1445263666,"last_edit_date":1445263666,"creation_date":1445263236,"answer_id":33216446,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>You can couple your Class with Unit Testing using a framework like JUnit.\nThis way your code will be clean (no useless checkings) and you will be sure your instances wont be null.</p>\n\n<p>This is one good reason (of many) to use Unit Testing.</p>\n"},{"owner":{"reputation":9820,"user_id":452775,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/88963e7cc58eabf150447e7b78a24793?s=128&d=identicon&r=PG","display_name":"Lii","link":"https://stackoverflow.com/users/452775/lii"},"comment_count":0,"is_accepted":false,"community_owned_date":1447781857,"score":1,"last_activity_date":1448021468,"last_edit_date":1448021468,"creation_date":1447781857,"answer_id":33763493,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>It is possible to define util methods which handles nested null-checks in an almost pretty way with Java 8 lambdas.</p>\n\n<pre><code>void example() {\n    Entry entry = new Entry();\n    // This is the same as H-MANs solution \n    Person person = getNullsafe(entry, e -&gt; e.getPerson());    \n    // Get object in several steps\n    String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\n    // Call void methods\n    doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \n}\n\n/** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\npublic static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\n    if (o1 != null) return f1.apply(o1);\n    return null; \n}\n\npublic static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\n    return getNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\n    return getNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\n/** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\npublic static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\n    if (o1 != null) f1.accept(o1);\n}\n\npublic static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\n    doNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\n    doNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\nclass Entry {\n    Person getPerson() { return null; }\n}\n\nclass Person {\n    Name getName() { return null; }\n}\n\nclass Name {\n    void nameIt() {}\n    String getGivenName() { return null; }\n}\n</code></pre>\n\n<p><i><sup>(This answer was first posted <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary/33711967#33711967\">here</a>.)</sup></i></p>\n"},{"owner":{"reputation":10988,"user_id":977919,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/eT2FU.jpg?s=128&g=1","display_name":"sidgate","link":"https://stackoverflow.com/users/977919/sidgate"},"comment_count":0,"is_accepted":false,"community_owned_date":1450245245,"score":3,"last_activity_date":1450245245,"creation_date":1450245245,"answer_id":34304851,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Java 8 now has Optional class that wraps the object in consideration and if a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html</a></p>\n"},{"owner":{"reputation":41397,"user_id":4999394,"user_type":"registered","accept_rate":98,"profile_image":"https://i.stack.imgur.com/nAGmt.png?s=128&g=1","display_name":"Ravindra babu","link":"https://stackoverflow.com/users/4999394/ravindra-babu"},"comment_count":0,"is_accepted":false,"community_owned_date":1453736536,"score":8,"last_activity_date":1489571198,"last_edit_date":1489571198,"creation_date":1453736536,"answer_id":34996504,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>I follow below guidelines to avoid null checks.</p>\n\n<ol>\n<li><p>Avoid <strong><em>lazy initialization</em></strong> of member variables as much as possible. Initialize the variables in declaration itself. This will handle NullPointerExceptions. </p></li>\n<li><p>Decide on <strong><em>mutability</em></strong> of member variables early in the cycle. Use language constructs like <code>final</code> keyword effectively. </p></li>\n<li><p>If you know that augments for method won't be changed, declare them as <code>final</code>.</p></li>\n<li><p>Limit the <strong><em>mutation</em></strong> of data as much as possible. Some variables can be created in a constructor and can never be changed. <strong><em>Remove public setter methods unless they are really required</em></strong>.</p>\n\n<p>E.g. Assume that one class in your application (<code>A.java</code>) is maintaining a collection like <code>HashMap</code>.  Don't provide <code>public</code> getter method in A.java and allow <code>B.java</code> to directly add an element in <code>Map</code>. Instead provide an API in <code>A.java</code>, which adds an element into collection. </p>\n\n<pre><code>// Avoid\na.getMap().put(key,value)\n\n//recommended\n\npublic void addElement(Object key, Object value){\n       // Have null checks for both key and value here : single place\n       map.put(key,value);\n}\n</code></pre></li>\n<li><p>And finally, use <code>try{} catch{} finally{}</code> blocks at right places effectively.</p></li>\n</ol>\n"},{"owner":{"reputation":3460,"user_id":2194364,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/00330b200be5730c3499104448dc25a0?s=128&d=identicon&r=PG","display_name":"Raghu K Nair","link":"https://stackoverflow.com/users/2194364/raghu-k-nair"},"comment_count":0,"is_accepted":false,"community_owned_date":1458691423,"score":20,"last_activity_date":1475134554,"last_edit_date":1475134554,"creation_date":1458691423,"answer_id":36167495,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Probably the best alternative for Java 8 or newer is to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class. </p>\n\n<pre><code>Optional stringToUse = Optional.of(\"optional is there\");\nstringToUse.ifPresent(System.out::println);\n</code></pre>\n\n<p>This is especially handy for long chains of possible null values. Example:</p>\n\n<pre><code>Optional&lt;Integer&gt; i = Optional.ofNullable(wsObject.getFoo())\n    .map(f -&gt; f.getBar())\n    .map(b -&gt; b.getBaz())\n    .map(b -&gt; b.getInt());\n</code></pre>\n\n<p>Example on how to throw exception on null:</p>\n\n<pre><code>Optional optionalCarNull = Optional.ofNullable(someNull);\noptionalCarNull.orElseThrow(IllegalStateException::new);\n</code></pre>\n\n<p>Java 7 introduced the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T,%20java.lang.String)\" rel=\"noreferrer\"><code>Objects.requireNonNull</code></a> method which can be handy when something should be checked for non-nullness. Example:</p>\n\n<pre><code>String lowerVal = Objects.requireNonNull(someVar, \"input cannot be null or empty\").toLowerCase();\n</code></pre>\n"},{"owner":{"reputation":169,"user_id":6546993,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-49vas4ObAAU/AAAAAAAAAAI/AAAAAAAAAAA/YQvDDi5PUOE/photo.jpg?sz=128","display_name":"Ivan Golovach","link":"https://stackoverflow.com/users/6546993/ivan-golovach"},"comment_count":0,"is_accepted":false,"community_owned_date":1467732261,"score":5,"last_activity_date":1470520722,"last_edit_date":1470520722,"creation_date":1467732261,"answer_id":38207227,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>In Java 8 you can use type <code>T</code> for local-variable/field/method-argument/method-return-type if it never assigned <code>null</code> (and do not check for <code>null</code>) or type <code>Optional&lt;T&gt;</code> if it can be <code>null</code>. Then use method <code>map</code> for processing <code>T -&gt;</code> and method <code>flatMap</code> for processing <code>T -&gt; Optional&lt;R&gt;</code>:</p>\n\n<pre><code>class SomeService {\n    @Inject\n    private CompanyDao companyDao;\n\n    // return Optional&lt;String&gt;\n    public Optional&lt;String&gt; selectCeoCityByCompanyId0(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity);\n    }\n\n    // return String + default value\n    public String selectCeoCityByCompanyId1(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElse(\"UNKNOWN\");\n    }\n\n    // return String + exception\n    public String selectCeoCityByCompanyId2(int companyId) throws NoSuchElementException {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElseThrow(NoSuchElementException::new);\n    }\n}\n\ninterface CompanyDao {\n    // real situation: no company for such id -&gt; use Optional&lt;Company&gt; \n    Optional&lt;Company&gt; selectById(int id);\n}\n\nclass Company {\n    // company always has ceo -&gt; use Person \n    Person ceo;\n    public Person getCeo() {return ceo;}\n}\n\nclass Person {\n    // person always has name -&gt; use String\n    String firstName;\n    // person can be without address -&gt; use Optional&lt;Address&gt;\n    Optional&lt;Address&gt; homeAddress = Optional.empty();\n\n    public String getFirstName() {return firstName;}   \n    public Optional&lt;Address&gt; getHomeAddress() {return homeAddress;}\n}\n\nclass Address {\n    //  address always contains country -&gt; use String\n    String country;\n    //  city field is optional -&gt; use Optional&lt;String&gt;\n    Optional&lt;String&gt; city = Optional.empty();\n\n    String getCountry() {return country;}    \n    Optional&lt;String&gt; getCity() {return city;}\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1477,"user_id":3619962,"user_type":"registered","accept_rate":87,"profile_image":"https://graph.facebook.com/100000540018568/picture?type=large","display_name":"Yasin","link":"https://stackoverflow.com/users/3619962/yasin"},"edited":false,"score":5,"creation_date":1477487767,"post_id":39848137,"comment_id":67786967,"content_license":"CC BY-SA 3.0","body":"You are just modifying the check. No real benefit is received. Even though we put extra efforts to implement the suggested pattern, the code is still not clean."},{"owner":{"reputation":671,"user_id":6090844,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-QX9rvkAbwyw/AAAAAAAAAAI/AAAAAAAALb0/rwm_RBZQZG8/photo.jpg?sz=128","display_name":"Manoel Campos","link":"https://stackoverflow.com/users/6090844/manoel-campos"},"edited":false,"score":0,"creation_date":1574196789,"post_id":39848137,"comment_id":104143674,"content_license":"CC BY-SA 4.0","body":"If you implement the Null Object Pattern, instead of returning null, you should return the NullObject. This way, you don&#39;t need the check. Just call <code>object.doCalc()</code>. If the object is the NullObject instance, the <code>doCalc()</code> won&#39;t do anything. It will be just an empty implementation of the method."},{"owner":{"reputation":778,"user_id":3152516,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/8ea925575fe0c9b928d81ff648ef7d50?s=128&d=identicon&r=PG&f=1","display_name":"Dan Chase","link":"https://stackoverflow.com/users/3152516/dan-chase"},"edited":false,"score":0,"creation_date":1603163384,"post_id":39848137,"comment_id":113942164,"content_license":"CC BY-SA 4.0","body":"You know, you&#39;re basically replacing Null, with your own version of Null, then saying use this version of Null, so you don&#39;t have to use the other one that came with the language  :)"}],"owner":{"reputation":750,"user_id":3719179,"user_type":"registered","profile_image":"https://i.stack.imgur.com/VEtYE.jpg?s=128&g=1","display_name":"Vidura Mudalige","link":"https://stackoverflow.com/users/3719179/vidura-mudalige"},"comment_count":3,"is_accepted":false,"community_owned_date":1475571466,"score":-1,"last_activity_date":1475571466,"creation_date":1475571466,"answer_id":39848137,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Null object pattern can be used as a solution for this problem. For that, the class of the someObject should be modified. </p>\n\n<pre><code>public abstract class SomeObject {\n   public abstract boolean isNil();\n}\n\npublic class NullObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return true;\n   }\n}\npublic class RealObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return false;\n   }\n}\n</code></pre>\n\n<p>Now istead of checking,</p>\n\n<pre><code> if (someobject != null) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>We can use,</p>\n\n<pre><code>if (!someObject.isNil()) {\n   someobject.doCalc();\n}\n</code></pre>\n\n<p>Reference : <a href=\"https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm\" rel=\"nofollow\">https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm</a></p>\n"},{"owner":{"reputation":3958,"user_id":4256410,"user_type":"registered","accept_rate":71,"profile_image":"https://lh3.googleusercontent.com/-2D9wo3pwJ4g/AAAAAAAAAAI/AAAAAAAAAJs/OBUoxsI9ljM/photo.jpg?sz=128","display_name":"Philip John","link":"https://stackoverflow.com/users/4256410/philip-john"},"comment_count":0,"is_accepted":false,"community_owned_date":1480325390,"score":7,"last_activity_date":1480325390,"creation_date":1480325390,"answer_id":40840957,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>Since <code>Java 7</code> the class <code>java.util.Objects</code> exists.</p>\n\n<p>But since <code>Java 8</code>, you can use <code>Objects.isNull(var)</code> and <code>Objects.nonNull(var)</code> methods of <code>Objects</code> class to do the null pointer check.</p>\n\n<p>For example,</p>\n\n<pre><code>String var1 = null;\nDate var2 = null;\nLong var3 = null;\n\nif(Objects.isNull(var1) &amp;&amp; Objects.isNull(var2) &amp;&amp; Objects.isNull(var3))\n    System.out.println(\"All Null\");\nelse if (Objects.nonNull(var1) &amp;&amp; Objects.nonNull(var2) &amp;&amp; Objects.nonNull(var3))\n    System.out.println(\"All Not Null\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":22036,"user_id":114226,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/8zmez.png?s=128&g=1","display_name":"PeterMmm","link":"https://stackoverflow.com/users/114226/petermmm"},"edited":false,"score":0,"creation_date":1499428490,"post_id":44902405,"comment_id":76914876,"content_license":"CC BY-SA 3.0","body":"This is not much diferent from <code>myObject == null</code> and was introduced in Java8 for <code>Predicates</code> in the lambda feature."},{"owner":{"reputation":32450,"user_id":25122,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/udJ7V.png?s=128&g=1","display_name":"RealHowTo","link":"https://stackoverflow.com/users/25122/realhowto"},"edited":false,"score":0,"creation_date":1539353040,"post_id":44902405,"comment_id":92483833,"content_license":"CC BY-SA 4.0","body":"Objects.isNull() is available since Java8 (not Java7)"},{"owner":{"reputation":4598,"user_id":2893693,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Uft9O.jpg?s=128&g=1","display_name":"J J","link":"https://stackoverflow.com/users/2893693/j-j"},"reply_to_user":{"reputation":32450,"user_id":25122,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/udJ7V.png?s=128&g=1","display_name":"RealHowTo","link":"https://stackoverflow.com/users/25122/realhowto"},"edited":false,"score":0,"creation_date":1539384208,"post_id":44902405,"comment_id":92497213,"content_license":"CC BY-SA 4.0","body":"@RealHowTo Thankd for pointing it out, I have updated the answer, Actually <code>Objects</code> is introduced in java7, <code>isNull</code> added to it later."}],"owner":{"reputation":4598,"user_id":2893693,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Uft9O.jpg?s=128&g=1","display_name":"J J","link":"https://stackoverflow.com/users/2893693/j-j"},"comment_count":3,"is_accepted":false,"community_owned_date":1499161286,"score":7,"last_activity_date":1583882337,"last_edit_date":1583882337,"creation_date":1499161286,"answer_id":44902405,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>If you are using java8 or later go for the <code>isNull(yourObject)</code> from <code>java.util.Objects</code>.</p>\n\n<p>Example:-</p>\n\n<pre><code>String myObject = null;\n\nObjects.isNull(myObject); //will return true\n</code></pre>\n\n<p>Usage: The below code returns a non null value (if the name is not null then that value will be returned else the default value will be returned).</p>\n\n<pre><code>final String name = \"Jobin\";\nString nonNullValue = Optional.ofNullable(name).filter(Objects::nonNull).orElse(\"DefaultName\");\n</code></pre>\n"},{"owner":{"reputation":1225,"user_id":8432237,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/oWjOb.jpg?s=128&g=1","display_name":"NeeruKSingh","link":"https://stackoverflow.com/users/8432237/neeruksingh"},"comment_count":0,"is_accepted":false,"community_owned_date":1507545333,"score":10,"last_activity_date":1509368228,"last_edit_date":1509368228,"creation_date":1507545333,"answer_id":46644408,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p><strong>Java 8 has introduced a new class Optional in java.util package.</strong></p>\n\n<p><strong>Advantages of Java 8 Optional:</strong></p>\n\n<p>1.) Null checks are not required.<br>\n2.) No more NullPointerException at run-time.<br>\n3.) We can develop clean and neat APIs.  </p>\n\n<p><strong>Optional</strong> - A container object which may or may not contain a non-null value. If a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p>For more details find here oracle docs :-\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a></p>\n"},{"comments":[{"owner":{"reputation":880,"user_id":9163169,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/e98d8544b345776dd2404b0f4d4b20cc?s=128&d=identicon&r=PG&f=1","display_name":"user8478","link":"https://stackoverflow.com/users/9163169/user8478"},"edited":false,"score":0,"creation_date":1516208170,"post_id":47285263,"comment_id":83597555,"content_license":"CC BY-SA 3.0","body":"explain very well"}],"owner":{"reputation":1432,"user_id":4545552,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/efa48e206fce67fdca414825c81e6bd6?s=128&d=identicon&r=PG&f=1","display_name":"yanefedor","link":"https://stackoverflow.com/users/4545552/yanefedor"},"comment_count":1,"is_accepted":false,"community_owned_date":1510660644,"score":11,"last_activity_date":1510660644,"last_edit_date":1592644375,"creation_date":1510660644,"answer_id":47285263,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>All in all to avoid statement</p>\n<pre><code>if (object != null) {\n    ....\n}\n</code></pre>\n<ol>\n<li><p>since java 7 you can use <code>Objects</code> methods:</p>\n<p>Objects.isNull(object)</p>\n<p>Objects.nonNull(object)</p>\n<p>Objects.requireNonNull(object)</p>\n<p>Objects.equals(object1, object2)</p>\n</li>\n<li><p>since java 8 you can use Optional class (<a href=\"https://stackoverflow.com/questions/23454952/uses-for-optional\">when to use</a>)</p>\n</li>\n</ol>\n<p><code>object.ifPresent(obj -&gt; ...);</code> java 8</p>\n<p><code>object.ifPresentOrElse(obj -&gt; ..., () -&gt; ...);</code> java 9</p>\n<ol start=\"3\">\n<li><p>rely on method contract (<a href=\"https://minds.coremedia.com/2012/10/31/jsr-305-nonnull-and-guava-preconditions/\" rel=\"noreferrer\">JSR 305</a>) and use <a href=\"http://findbugs.sourceforge.net/\" rel=\"noreferrer\">Find Bugs</a>. Mark your code with annotations <code>@javax.annotation.Nullable</code> and <code>@javax.annotation.Nonnnul</code>. Also Preconditions are available.</p>\n<p>Preconditions.checkNotNull(object);</p>\n</li>\n<li><p>In special cases (for example for Strings and Collections) you can use apache-commons (or Google guava) utility methods:</p>\n</li>\n</ol>\n<blockquote>\n<p>public static boolean isEmpty(CharSequence cs) //apache CollectionUtils</p>\n<p>public static boolean isEmpty(Collection coll) //apache StringUtils</p>\n<p>public static boolean isEmpty(Map map) //apache MapUtils</p>\n<p>public static boolean isNullOrEmpty(@Nullable String string) //Guava Strings</p>\n</blockquote>\n<ol start=\"5\">\n<li>When you need to assign default value when null use apache commons lang</li>\n</ol>\n<blockquote>\n<p>public static Object defaultIfNull(Object object, Object defaultValue)</p>\n</blockquote>\n"},{"owner":{"reputation":237,"user_id":1119386,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2ddb3fd05edffe2933e97486aa431104?s=128&d=identicon&r=PG","display_name":"Binod Pant","link":"https://stackoverflow.com/users/1119386/binod-pant"},"comment_count":0,"is_accepted":false,"community_owned_date":1514349317,"score":1,"last_activity_date":1514349317,"creation_date":1514349317,"answer_id":47986378,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>One Option you have</p>\n\n<ul>\n<li><p>Use <a href=\"https://checkerframework.org/api/org/checkerframework/checker/nullness/qual/RequiresNonNull.html\" rel=\"nofollow noreferrer\">checker framework</a>'s @RequiresNonNull on methods. for ex you get this if you call a method annotated as such, with a null argument. It will fail during compile, even before your code runs! since at runtime it will be NullPointerException</p>\n\n<pre><code>@RequiresNonNull(value = { \"#1\" })\nstatic void check( Boolean x) {\n    if (x) System.out.println(\"true\");\n    else System.out.println(\"false\");\n}\n\npublic static void main(String[] args) {\n\n\n    check(null);\n\n}\n</code></pre></li>\n</ul>\n\n<p>gets </p>\n\n<pre><code>[ERROR] found   : null\n[ERROR] required: @Initialized @NonNull Boolean\n[ERROR] -&gt; [Help 1]\n</code></pre>\n\n<p>There are other methods like Use Java 8's Optional, Guava Annotations, Null Object pattern etc. Does not matter as long as you obtain your goal of avoiding !=null</p>\n"},{"owner":{"reputation":13283,"user_id":503804,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/o5zWb.png?s=128&g=1","display_name":"nilesh","link":"https://stackoverflow.com/users/503804/nilesh"},"comment_count":0,"is_accepted":false,"community_owned_date":1518030018,"score":3,"last_activity_date":1518030018,"creation_date":1518030018,"answer_id":48671389,"question_id":271526,"content_license":"CC BY-SA 3.0","body":"<p>With Java 8, you could pass a supplier to a helper method like below,</p>\n\n<pre><code>if(CommonUtil.resolve(()-&gt; a.b().c()).isPresent()) {\n\n}\n</code></pre>\n\n<p>Above replaces boiler plate code like below,</p>\n\n<pre><code>if(a!=null &amp;&amp; a.b()!=null &amp;&amp; a.b().c()!=null) {\n\n}\n</code></pre>\n\n<p>//CommonUtil.java</p>\n\n<pre><code> public static &lt;T&gt; Optional&lt;T&gt; resolve(Supplier&lt;T&gt; resolver) {\n        try {\n            T result = resolver.get();\n            return Optional.ofNullable(result);\n        } catch (NullPointerException var2) {\n            return Optional.empty();\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3251,"user_id":6147374,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/d05b5955de351d18e1c8d715f97f0be2?s=128&d=identicon&r=PG&f=1","display_name":"Ibo","link":"https://stackoverflow.com/users/6147374/ibo"},"edited":false,"score":0,"creation_date":1531418413,"post_id":51311500,"comment_id":89600423,"content_license":"CC BY-SA 4.0","body":"you can see there are a lot of answers with many upvotes, what is special about your answer?"},{"owner":{"reputation":321,"user_id":4014678,"user_type":"registered","profile_image":"https://i.stack.imgur.com/b0j5j.jpg?s=128&g=1","display_name":"Mukesh A","link":"https://stackoverflow.com/users/4014678/mukesh-a"},"reply_to_user":{"reputation":3251,"user_id":6147374,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/d05b5955de351d18e1c8d715f97f0be2?s=128&d=identicon&r=PG&f=1","display_name":"Ibo","link":"https://stackoverflow.com/users/6147374/ibo"},"edited":false,"score":0,"creation_date":1531418680,"post_id":51311500,"comment_id":89600563,"content_license":"CC BY-SA 4.0","body":"I just wanted to add a few more functions made available with <code>Java 9</code>."},{"owner":{"reputation":3251,"user_id":6147374,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/d05b5955de351d18e1c8d715f97f0be2?s=128&d=identicon&r=PG&f=1","display_name":"Ibo","link":"https://stackoverflow.com/users/6147374/ibo"},"edited":false,"score":0,"creation_date":1531420294,"post_id":51311500,"comment_id":89601298,"content_license":"CC BY-SA 4.0","body":"then emphasize on it with a bold font at the beginning of your post"}],"owner":{"reputation":321,"user_id":4014678,"user_type":"registered","profile_image":"https://i.stack.imgur.com/b0j5j.jpg?s=128&g=1","display_name":"Mukesh A","link":"https://stackoverflow.com/users/4014678/mukesh-a"},"comment_count":3,"is_accepted":false,"community_owned_date":1531416917,"score":6,"last_activity_date":1531420431,"last_edit_date":1531420431,"creation_date":1531416917,"answer_id":51311500,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>You can avoid most a lot to avoid <code>NullPointerException</code> by just following most of the others answers to the Question, I just want to add few <strong>more ways which have been introduced in  <code>Java 9</code></strong> to handle this scenario gracefully and also showcase a few of the older ones can also be used and thus reducing your efforts.</p>\n\n<ol>\n<li><p><code>public static boolean isNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static boolean nonNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is non-null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElseâ(T obj, T defaultObj)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns\nthe non-null second argument.</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElseGetâ(T obj, Supplier&lt;? extends T&gt; supplier)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns the non-null value of supplier.get().</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullâ(T obj, Supplier&lt;String&gt; messageSupplier)</code></p>\n\n<p>Checks that the specified object reference is not null and throws a customized NullPointerException otherwise.</p>\n\n<p>Since Java 1.8</p></li>\n</ol>\n\n<p>Further details about the above functions can be found <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Objects.html#isNull-java.lang.Object-\" rel=\"noreferrer\">here</a>.</p>\n"},{"owner":{"reputation":4198,"user_id":4353365,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-fOb7w8Ofk5E/AAAAAAAAAAI/AAAAAAAADmc/nymnI-_Ng9g/photo.jpg?sz=128","display_name":"Francis","link":"https://stackoverflow.com/users/4353365/francis"},"comment_count":0,"is_accepted":false,"community_owned_date":1534802753,"score":1,"last_activity_date":1534802753,"creation_date":1534802753,"answer_id":51939089,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://kotlinlang.org\" rel=\"nofollow noreferrer\">Kotlin</a> with null safety is elegant alternative, but it means a larger change.</p>\n"},{"owner":{"reputation":175,"user_id":7236932,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-K2H2MOiuyKg/AAAAAAAAAAI/AAAAAAAACVA/CBEarWwfjao/photo.jpg?sz=128","display_name":"Ramprabhu","link":"https://stackoverflow.com/users/7236932/ramprabhu"},"comment_count":0,"is_accepted":false,"community_owned_date":1546496486,"score":0,"last_activity_date":1546496486,"creation_date":1546496486,"answer_id":54017256,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>Functional approach may help to wrap the repetitive null checks and execute anonymous code like the below sample.</p>\n\n<pre><code>    BiConsumer&lt;Object, Consumer&lt;Object&gt;&gt; consumeIfPresent  = (s,f) -&gt;{\n        if(s!=null) {\n            f.accept(s);\n        }\n    };\n\n    consumeIfPresent.accept(null, (s)-&gt; System.out.println(s) );\n    consumeIfPresent.accept(\"test\", (s)-&gt; System.out.println(s));\n\n    BiFunction&lt;Object, Function&lt;Object,Object&gt;,Object&gt; executeIfPresent  = (a,b) -&gt;{\n        if(a!=null) {\n            return b.apply(a);\n        }\n        return null;\n    };\n    executeIfPresent.apply(null, (s)-&gt; {System.out.println(s);return s;} );\n    executeIfPresent.apply(\"test\", (s)-&gt; {System.out.println(s);return s;} );\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1477,"user_id":1503554,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/ada69b2a87f0732a5b051e769d07b13d?s=128&d=identicon&r=PG","display_name":"ThisIsNoZaku","link":"https://stackoverflow.com/users/1503554/thisisnozaku"},"edited":false,"score":0,"creation_date":1565036656,"post_id":56145630,"comment_id":101217519,"content_license":"CC BY-SA 4.0","body":"You can get the value by using <code>map</code> combined with <code>get</code> or any of the other methods for getting the value in the Optional, instead of <code>ifPresent</code>."}],"owner":{"reputation":419,"user_id":2785025,"user_type":"registered","profile_image":"https://i.stack.imgur.com/SJPZW.jpg?s=128&g=1","display_name":"Sebastian3000","link":"https://stackoverflow.com/users/2785025/sebastian3000"},"comment_count":1,"is_accepted":false,"community_owned_date":1557911640,"score":3,"last_activity_date":1557911962,"last_edit_date":1557911962,"creation_date":1557911640,"answer_id":56145630,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>Another alternative to the != null check is (if you can't get rid of it design-wise):</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(someobject -&gt; someobject.doCalc());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(SomeClass::doCalc);\n</code></pre>\n\n<p>With SomeClass being someobject's type.</p>\n\n<p>You can't get a return value back from doCalc() though, so only useful for void methods.</p>\n"},{"owner":{"reputation":545,"user_id":6024604,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/TkOtR.jpg?s=128&g=1","display_name":"rohit prakash","link":"https://stackoverflow.com/users/6024604/rohit-prakash"},"comment_count":0,"is_accepted":false,"community_owned_date":1560256796,"score":6,"last_activity_date":1606296326,"last_edit_date":1606296326,"creation_date":1560256796,"answer_id":56543966,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>Java 8 has introduced a new class Optional in <code>java.util</code> package. It is used to represent a value is present or absent. The main advantage of this new construct is that No more too many null checks and <code>NullPointerException</code>. It avoids any runtime <code>NullPointerExceptions</code> and supports us in developing clean and neat Java APIs or Applications. Like <code>Collections</code> and <code>arrays</code>, it is also a Container to hold at most one value.</p>\n<p>Below are some useful link you can follow</p>\n<p><a href=\"https://www.mkyong.com/java8/java-8-optional-in-depth/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/java8/java-8-optional-in-depth/</a></p>\n<p><a href=\"https://dzone.com/articles/java-8-optional-avoid-null-and\" rel=\"nofollow noreferrer\">https://dzone.com/articles/java-8-optional-avoid-null-and</a></p>\n"},{"owner":{"reputation":137,"user_id":12079719,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JCWgc.jpg?s=128&g=1","display_name":"Satish Hawalppagol","link":"https://stackoverflow.com/users/12079719/satish-hawalppagol"},"comment_count":0,"is_accepted":false,"community_owned_date":1596967948,"score":0,"last_activity_date":1596967948,"creation_date":1596967948,"answer_id":63325067,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>You can make one generic Method for object and string so that you can use it through out in your application-\nThis could help you and your colleagues :\nCreate a class eg. StringUtilities and add the method eg. getNullString</p>\n<pre><code>public static String getNullString(Object someobject)\n{\n   if(null==someobject )\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;) &amp;&amp; \n          (((String)someobject).trim().equalsIgnoreCase(&quot;null&quot;)|| \n          ((String)someobject).trim().equalsIgnoreCase(&quot;&quot;)))\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;))\n        return (String)someobject;\n\n   else\n        return someobject.toString().trim();\n}\n</code></pre>\n<p>And simply call this method as,</p>\n<pre><code>if (StringUtilities.getNullString(someobject) != null)\n{ \n  //Do something\n}\n</code></pre>\n"},{"owner":{"reputation":778,"user_id":3152516,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/8ea925575fe0c9b928d81ff648ef7d50?s=128&d=identicon&r=PG&f=1","display_name":"Dan Chase","link":"https://stackoverflow.com/users/3152516/dan-chase"},"comment_count":0,"is_accepted":false,"community_owned_date":1603162603,"score":0,"last_activity_date":1603163066,"last_edit_date":1603163066,"creation_date":1603162603,"answer_id":64437815,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>The best way to avoid Null Checks in Java, is to properly handle and use exceptions. Null Checks in my experience have become more common and required as you move closer to the front-end, because it's closer to the user who may supply invalid information through the UI (such as, no value, being submitted for a field).</p>\n<p>One may argue that you should be able to control what the UI is doing, lest you forget most UI is done through a third party library of some kind, which for example, may return either NULL or an Empty String for a blank text box, depending on the situation or the library.</p>\n<p>You can combine the two like this:</p>\n<pre><code>try\n{\n  myvar = get_user_supplied_value(); \n  if (!myvar || myvar.length() == 0) { alert_the_user_somehow(); return; };\n\n  process_user_input(myvar);\n} catch (Exception ex) {\n  handle_exception(ex);\n}\n</code></pre>\n<p>Another approach people take is to say:</p>\n<pre><code>if (myvar &amp;&amp; myvar.length() &gt; 0)  { };\n</code></pre>\n<p>You could also throw an exception (which is what I prefer)</p>\n<pre><code>if (!myvar || myvar.length() == 0) {\n throw new Exception(&quot;You must supply a name!&quot;);\n};\n</code></pre>\n<p>But that's up to you.</p>\n"},{"owner":{"reputation":76,"user_id":12716256,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-yCltr1_fIok/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfJ6macV0VZsU4p89QPAGI2GBDO3w/photo.jpg?sz=128","display_name":"Allen","link":"https://stackoverflow.com/users/12716256/allen"},"comment_count":0,"is_accepted":false,"community_owned_date":1603247013,"score":1,"last_activity_date":1603247013,"creation_date":1603247013,"answer_id":64455793,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<p>There has a good way to check the null value from JDK.\nIt is Optional.java that has a sea of methods to resolve these problems. Such as follow:\n`</p>\n<ul>\n<li>Returns an {@code Optional} describing the specified value, if non-null,\n<ul>\n<li>otherwise returns an empty {@code Optional}.</li>\n<li></li>\n<li>@param  the class of the value</li>\n<li>@param value the possibly-null value to describe</li>\n<li>@return an {@code Optional} with a present value if the specified value</li>\n<li>is non-null, otherwise an empty {@code Optional}</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value) {\n    return value == null ? empty() : of(value);\n}  `\n</code></pre>\n<p>`/</p>\n<ul>\n<li><p>Return {@code true} if there is a value present, otherwise {@code false}.\n*</p>\n<ul>\n<li>@return {@code true} if there is a value present, otherwise {@code false}\n*/\npublic boolean isPresent() {\nreturn value != null;\n}</li>\n</ul>\n<p>/**</p>\n<ul>\n<li>If a value is present, invoke the specified consumer with the value,</li>\n<li>otherwise do nothing.</li>\n<li></li>\n<li>@param consumer block to be executed if a value is present</li>\n<li>@throws NullPointerException if value is present and {@code consumer} is</li>\n<li>null\n*/\npublic void ifPresent(Consumer&lt;? super T&gt; consumer) {\nif (value != null)\nconsumer.accept(value);\n}`</li>\n</ul>\n</li>\n</ul>\n<p>It is really, really useful to help javer.</p>\n"},{"owner":{"reputation":1142,"user_id":9993935,"user_type":"registered","profile_image":"https://i.stack.imgur.com/F78XX.jpg?s=128&g=1","display_name":"vidy","link":"https://stackoverflow.com/users/9993935/vidy"},"comment_count":0,"is_accepted":false,"community_owned_date":1604907009,"score":3,"last_activity_date":1604907009,"creation_date":1604907009,"answer_id":64747393,"question_id":271526,"content_license":"CC BY-SA 4.0","body":"<pre><code>public class Null {\n\npublic static void main(String[] args) {\n    String str1 = null;\n    String str2 = &quot;&quot;;\n\n    if(isNullOrEmpty(str1))\n        System.out.println(&quot;First string is null or empty.&quot;);\n    else\n        System.out.println(&quot;First string is not null or empty.&quot;);\n\n    if(isNullOrEmpty(str2))\n        System.out.println(&quot;Second string is null or empty.&quot;);\n    else\n        System.out.println(&quot;Second string is not null or empty.&quot;);\n}\n\npublic static boolean isNullOrEmpty(String str) {\n    if(str != null &amp;&amp; !str.isEmpty())\n        return false;\n    return true;\n}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>str1 is null or empty.\nstr2 is null or empty.\n</code></pre>\n<p>In the above program, we've two strings str1 and str2. str1 contains null value and str2 is an empty string.</p>\n<p>We've also created a function isNullOrEmpty() which checks, as the name suggests, whether the string is null or empty. It checks it using a null check using != null and isEmpty() method of string.</p>\n<p>In plain terms, if a string isn't a null and isEmpty() returns false, it's not either null or empty. Else, it is.</p>\n<p>However, the above program doesn't return empty if a string contains only whitespace characters (spaces). Technically, isEmpty() sees it contains spaces and returns false. For string with spaces, we use the string method trim() to trim out all the leading and trailing whitespace characters.</p>\n"}],"owner":{"reputation":3757,"user_id":34856,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1e57ced4476e0c629c70e6058159c4f0?s=128&d=identicon&r=PG","display_name":"Goran Martinic","link":"https://stackoverflow.com/users/34856/goran-martinic"},"comment_count":8,"is_answered":true,"view_count":1302259,"protected_date":1368308875,"accepted_answer_id":271874,"answer_count":65,"community_owned_date":1319187757,"score":4150,"last_activity_date":1607184169,"creation_date":1226046700,"last_edit_date":1607184169,"question_id":271526,"link":"https://stackoverflow.com/questions/271526/avoiding-nullpointerexception-in-java","title":"Avoiding NullPointerException in Java","body":"<p>I use <code>object != null</code> a lot to avoid <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\"><code>NullPointerException</code></a>.</p>\n<p>What is an alternative to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (someobject != null) {\n    someobject.doCalc();\n}\n</code></pre>\n"},{"tags":["java","collections","hashmap","hashtable"],"comments":[{"owner":{"reputation":129,"user_id":2446305,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5GjuI.gif?s=128&g=1","display_name":"MissFiona","link":"https://stackoverflow.com/users/2446305/missfiona"},"edited":false,"score":21,"creation_date":1491775819,"post_id":40471,"comment_id":89607770,"content_license":"CC BY-SA 3.0","body":"HashTable is obsolete in Java 1.7 and it is recommended to use ConcurrentMap implementation"},{"owner":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"reply_to_user":{"reputation":129,"user_id":2446305,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5GjuI.gif?s=128&g=1","display_name":"MissFiona","link":"https://stackoverflow.com/users/2446305/missfiona"},"edited":false,"score":2,"creation_date":1577581873,"post_id":40471,"comment_id":105203863,"content_license":"CC BY-SA 4.0","body":"@MissFiona No, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentMap</code></a> is <i>not</i> necessary here, as the Question says ânon-threaded applicationsâ meaning threading/concurrency is not an issue."}],"answers":[{"comments":[{"owner":{"reputation":39915,"user_id":85821,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG","display_name":"Bart van Heukelom","link":"https://stackoverflow.com/users/85821/bart-van-heukelom"},"edited":false,"score":5,"creation_date":1292636698,"post_id":40483,"comment_id":4893785,"content_license":"CC BY-SA 2.5","body":"It doesn&#39;t actually prevent it, it just detects it and throws an error."},{"owner":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"edited":false,"score":1,"creation_date":1293846396,"post_id":40483,"comment_id":5018461,"content_license":"CC BY-SA 2.5","body":"I&#39;m pretty sure it will throw a ConncurrentModificationException before the underlying collection is modified, though I could be wrong."},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"reply_to_user":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"edited":false,"score":0,"creation_date":1303135388,"post_id":40483,"comment_id":6518655,"content_license":"CC BY-SA 3.0","body":"It will <i>attempt</i> to detect concurrent modification and throw an exception.  But if you&#39;re doing anything with threads, it can&#39;t make any promises.  Absolutely anything can happen, including <a href=\"http://lightbody.net/blog/2005/07/hashmapget_can_cause_an_infini.html\" rel=\"nofollow noreferrer\">breakage</a>."}],"owner":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"comment_count":3,"is_accepted":false,"score":28,"last_activity_date":1220386493,"creation_date":1220386493,"answer_id":40483,"question_id":40471,"content_license":"CC BY-SA 2.5","body":"<p>Based on the info <a href=\"http://www.jguru.com/faq/view.jsp?EID=430247\" rel=\"noreferrer\">here</a>, I'd recommend going with HashMap.  I think the biggest advantage is that Java will prevent you from modifying it while you are iterating over it, unless you do it through the iterator.</p>\n"},{"owner":{"reputation":45056,"user_id":974,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/3d7e0433078e5d9b54fb90edf7bd10a3?s=128&d=identicon&r=PG","display_name":"izb","link":"https://stackoverflow.com/users/974/izb"},"comment_count":0,"is_accepted":false,"score":35,"last_activity_date":1600201723,"last_edit_date":1600201723,"creation_date":1220386954,"answer_id":40512,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p><code>Hashtable</code> is synchronized, whereas <code>HashMap</code> isn't. That makes <code>Hashtable</code> slower than <code>Hashmap</code>.</p>\n<p>For single thread applications, use <code>HashMap</code> since they are otherwise the same in terms of functionality.</p>\n"},{"owner":{"reputation":7457,"user_id":3898,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/46d631c50ff6986b6cbc443be8b5fc73?s=128&d=identicon&r=PG","display_name":"Miles D","link":"https://stackoverflow.com/users/3898/miles-d"},"comment_count":0,"is_accepted":false,"score":51,"last_activity_date":1425286523,"last_edit_date":1425286523,"creation_date":1220387130,"answer_id":40522,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><code>Hashtable</code> is similar to the <code>HashMap</code> and has a similar interface. It is recommended that you use <code>HashMap</code>, unless you require support for legacy applications or you need synchronisation, as the <code>Hashtables</code> methods are synchronised. So in your case as you are not multi-threading, <code>HashMaps</code> are your best bet.</p>\n"},{"comments":[{"owner":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"edited":false,"score":3,"creation_date":1320178978,"post_id":40548,"comment_id":9748735,"content_license":"CC BY-SA 3.0","body":"but that does not make the HashTable obsolete does it?"},{"owner":{"reputation":491,"user_id":4271421,"user_type":"registered","profile_image":"https://i.stack.imgur.com/e0yOs.jpg?s=128&g=1","display_name":"Majid Ali Khan","link":"https://stackoverflow.com/users/4271421/majid-ali-khan"},"reply_to_user":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"edited":false,"score":1,"creation_date":1558610733,"post_id":40548,"comment_id":99162868,"content_license":"CC BY-SA 4.0","body":"@Pacerier HashTable is obsolete since Java 1.7."}],"owner":{"reputation":131708,"user_id":4249,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c11c60c7e6d29cb4b87f3c0a3b692181?s=128&d=identicon&r=PG","display_name":"matt b","link":"https://stackoverflow.com/users/4249/matt-b"},"comment_count":2,"is_accepted":false,"score":67,"last_activity_date":1220387400,"creation_date":1220387400,"answer_id":40548,"question_id":40471,"content_license":"CC BY-SA 2.5","body":"<p>In addition to what izb said, <code>HashMap</code> allows null values, whereas the <code>Hashtable</code> does not.</p>\n\n<p>Also note that <code>Hashtable</code> extends the <code>Dictionary</code> class, which as the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/Dictionary.html\" rel=\"noreferrer\">Javadocs</a> state, is obsolete and has been replaced by the <code>Map</code> interface.</p>\n"},{"owner":{"reputation":7626,"user_id":4276,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6e24f47aa88626872c16e0f740739e8a?s=128&d=identicon&r=PG","display_name":"Tim Howland","link":"https://stackoverflow.com/users/4276/tim-howland"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1220395139,"creation_date":1220395139,"answer_id":40848,"question_id":40471,"content_license":"CC BY-SA 2.5","body":"<p>For threaded apps, you can often get away with ConcurrentHashMap- depends on your performance requirements.</p>\n"},{"comments":[{"owner":{"reputation":5975,"user_id":974531,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/RddON.jpg?s=128&g=1","display_name":"Rok StrniÅ¡a","link":"https://stackoverflow.com/users/974531/rok-strni%c5%a1a"},"edited":false,"score":93,"creation_date":1321987718,"post_id":40878,"comment_id":10124639,"content_license":"CC BY-SA 3.0","body":"If you want to make a HashMap thread-safe, use <code>Collections.synchronizedMap()</code>."},{"owner":{"reputation":247550,"user_id":3474,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ffbf4e85b8ffbae4e9039b9c0cf07bc8?s=128&d=identicon&r=PG","display_name":"erickson","link":"https://stackoverflow.com/users/3474/erickson"},"edited":false,"score":292,"creation_date":1331918378,"post_id":40878,"comment_id":12389872,"content_license":"CC BY-SA 3.0","body":"I would also comment that the naive approach to thread-safety in <code>Hashtable</code> (&quot;synchronizing every method should take care of any concurrency problems!&quot;) makes it very much <i>worse</i> for threaded applications. You&#39;re better off externally synchronizing a <code>HashMap</code> (and thinking about the consequences), or using a <code>ConcurrentMap</code> implementation (and exploiting its extended API for concurrency). Bottom line: the only reason to use <code>Hashtable</code> is when a legacy API (from ca. 1996) requires it."},{"owner":{"reputation":944,"user_id":4348811,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/Xp82g.png?s=128&g=1","display_name":"Gaurava Agarwal","link":"https://stackoverflow.com/users/4348811/gaurava-agarwal"},"edited":false,"score":8,"creation_date":1467018002,"post_id":40878,"comment_id":63538585,"content_license":"CC BY-SA 3.0","body":"HashMap gives flexibility to programmer to write threadSafe code when they actually use it. It happened rarely that I needed a thread safe collection like ConcurrentHashMap or HashTable. What I needed is certain set of functions or certain statements in a synchronized block to be threadsafe."},{"owner":{"reputation":1257,"user_id":1187233,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e2698a3f04cae6bb81b0d6cb191f10e?s=128&d=identicon&r=PG","display_name":"Maneesh Kumar","link":"https://stackoverflow.com/users/1187233/maneesh-kumar"},"edited":false,"score":3,"creation_date":1522381520,"post_id":40878,"comment_id":86144480,"content_license":"CC BY-SA 3.0","body":"Hashtable is obsolete and we are using HashMap for non thread safe environment.  If you need thread safety then you can use Collections.synchronizedMap()  or use ConcurrentHashMap which is more efficient that hashtable."},{"owner":{"reputation":6801,"user_id":1041442,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG","display_name":"Jilles van Gurp","link":"https://stackoverflow.com/users/1041442/jilles-van-gurp"},"edited":false,"score":2,"creation_date":1526717461,"post_id":40878,"comment_id":87861173,"content_license":"CC BY-SA 4.0","body":"It&#39;s obsolete but not deprecated and I&#39;m wondering why this is. I&#39;m guessing removing this class (and Vector for the same reasons) would break too much existing code and annotating with @Deprecated would imply an intention to remove the code, which apparently is not there."},{"owner":{"reputation":265,"user_id":663999,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b069662feaa169d5fe471e6fa81a7ce8?s=128&d=identicon&r=PG","display_name":"rashid","link":"https://stackoverflow.com/users/663999/rashid"},"edited":false,"score":1,"creation_date":1529911544,"post_id":40878,"comment_id":89028922,"content_license":"CC BY-SA 4.0","body":"You can also use ConcurrentSkipListMap (<a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/10/docs/api/java/util/concurrent/&hellip;</a>). It is thread-safe collection similar to ConcurrentHashMap and this map is sorted according to the natural ordering of its keys, or by a Comparator provided at map creation time."}],"owner":{"reputation":48640,"user_id":2030,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/73fad2d46ffaac8dd679d302a681147b?s=128&d=identicon&r=PG","display_name":"Josh Brown","link":"https://stackoverflow.com/users/2030/josh-brown"},"comment_count":6,"is_accepted":true,"score":3909,"last_activity_date":1536867538,"last_edit_date":1536867538,"creation_date":1220396557,"answer_id":40878,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>There are several differences between <a href=\"http://java.sun.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"noreferrer\"><code>HashMap</code></a> and <a href=\"http://java.sun.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\"><code>Hashtable</code></a> in Java:</p>\n\n<ol>\n<li><p><code>Hashtable</code> is <a href=\"https://stackoverflow.com/questions/1085709/what-does-synchronized-mean\">synchronized</a>, whereas <code>HashMap</code> is not. This makes <code>HashMap</code> better for non-threaded applications, as unsynchronized Objects typically perform better than synchronized ones.</p></li>\n<li><p><code>Hashtable</code> does not allow <code>null</code> keys or values.  <code>HashMap</code> allows one <code>null</code> key and any number of <code>null</code> values.</p></li>\n<li><p>One of HashMap's subclasses is <a href=\"http://java.sun.com/javase/7/docs/api/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a>, so in the event that you'd want predictable iteration order (which is insertion order by default), you could easily swap out the <code>HashMap</code> for a <code>LinkedHashMap</code>.  This wouldn't be as easy if you were using <code>Hashtable</code>.</p></li>\n</ol>\n\n<p>Since synchronization is not an issue for you, I'd recommend <code>HashMap</code>. If synchronization becomes an issue, you may also look at <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\"><code>ConcurrentHashMap</code></a>.</p>\n"},{"comments":[{"owner":{"reputation":1600,"user_id":467413,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/8e7395f03e4db1ccea92b568126b8a69?s=128&d=identicon&r=PG","display_name":"prap19","link":"https://stackoverflow.com/users/467413/prap19"},"edited":false,"score":0,"creation_date":1321714520,"post_id":40894,"comment_id":10069447,"content_license":"CC BY-SA 3.0","body":"This actually makes sense. ConcurrentHashMaps gives you freedom of synchronization and debugging is lot more easier."},{"owner":{"user_type":"does_not_exist","display_name":"user6552957"},"edited":false,"score":1,"creation_date":1535829834,"post_id":40894,"comment_id":91213368,"content_license":"CC BY-SA 4.0","body":"Is this specific to Java or all the hash map implementation."}],"owner":{"reputation":33489,"user_id":3434,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/5a484dc0812eb4542ee718d969513f66?s=128&d=identicon&r=PG","display_name":"Apocalisp","link":"https://stackoverflow.com/users/3434/apocalisp"},"comment_count":2,"is_accepted":false,"score":134,"last_activity_date":1512423074,"last_edit_date":1512423074,"creation_date":1220397251,"answer_id":40894,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><code>HashMap</code>: An implementation of the <code>Map</code> interface that uses hash codes to index an array.\n<code>Hashtable</code>: Hi, 1998 called. They want their collections API back.</p>\n\n<p>Seriously though, you're better off staying away from <code>Hashtable</code> altogether. For single-threaded apps, you don't need the extra overhead of synchronisation. For highly concurrent apps, the paranoid synchronisation might lead to starvation, deadlocks, or unnecessary garbage collection pauses. Like Tim Howland pointed out, you might use <code>ConcurrentHashMap</code> instead.</p>\n"},{"comments":[{"owner":{"reputation":10946,"user_id":51789,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/a174b4521f9e80327c0e63fb88657933?s=128&d=identicon&r=PG","display_name":"Chris K","link":"https://stackoverflow.com/users/51789/chris-k"},"edited":false,"score":54,"creation_date":1240437783,"post_id":41454,"comment_id":590050,"content_license":"CC BY-SA 2.5","body":"Also note that if a HashMap is modified, iterators pointing to it are rendered invalid."},{"owner":{"reputation":1466,"user_id":350874,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/ee06255360a95ec2d81a746afa944443?s=128&d=identicon&r=PG","display_name":"telebog","link":"https://stackoverflow.com/users/350874/telebog"},"edited":false,"score":3,"creation_date":1321030106,"post_id":41454,"comment_id":9926446,"content_license":"CC BY-SA 3.0","body":"So is there any difference between synchronized(myMap) {...} and ConcurrentHashMap in terms of thread safe?"},{"owner":{"reputation":2428,"user_id":856634,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/ac5b6cf2423eb9e16de2cc80f1fa6637?s=128&d=identicon&r=PG","display_name":"Love Hasija","link":"https://stackoverflow.com/users/856634/love-hasija"},"edited":false,"score":3,"creation_date":1348136468,"post_id":41454,"comment_id":16837940,"content_license":"CC BY-SA 3.0","body":"Very true, I tried to explain same here..<a href=\"http://lovehasija.com/2012/08/16/who-said-java-hashtable-is-thread-safe/\" rel=\"nofollow noreferrer\">lovehasija.com/2012/08/16/&hellip;</a>"},{"owner":{"reputation":7654,"user_id":190200,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4ece157c3adee7df9c94de40d286a5bb?s=128&d=identicon&r=PG","display_name":"Matt Stephenson","link":"https://stackoverflow.com/users/190200/matt-stephenson"},"reply_to_user":{"reputation":15775,"user_id":645226,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/230d51291a37cb1287650e40cdef4c78?s=128&d=identicon&r=PG&f=1","display_name":"Bhushan","link":"https://stackoverflow.com/users/645226/bhushan"},"edited":false,"score":0,"creation_date":1380826181,"post_id":41454,"comment_id":28354392,"content_license":"CC BY-SA 3.0","body":"@Bhushan: It will throw on a best-effort basis, this is not guaranteed behavior: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/HashMap.html</a>"},{"owner":{"reputation":44584,"user_id":581994,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/d2ae9ac6fb51918297a0ce5dada0eb22?s=128&d=identicon&r=PG","display_name":"Hot Licks","link":"https://stackoverflow.com/users/581994/hot-licks"},"edited":false,"score":0,"creation_date":1408548871,"post_id":41454,"comment_id":39633589,"content_license":"CC BY-SA 3.0","body":"Having been in the middle of a JVM development crew for a number of years I can state that Hashtable&#39;s internal synchronization is at least useful for properly pointing the finger at the customer&#39;s code when he writes dodgy concurrent code.  We received several complaints of failures inside HashMap (and hence &quot;obviously&quot; a JDK/JVM bug), when the cause was concurrent modification."},{"owner":{"reputation":133,"user_id":6548501,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3c787e1cfceebd98ac47e1c83db0798f?s=128&d=identicon&r=PG&f=1","display_name":"A248","link":"https://stackoverflow.com/users/6548501/a248"},"edited":false,"score":0,"creation_date":1610038507,"post_id":41454,"comment_id":116012460,"content_license":"CC BY-SA 4.0","body":"The implementation of Collections.synchronizedMap includes a synchronized putIfAbsent, so you don&#39;t need to use containsKey/put yourself."}],"owner":{"reputation":28478,"user_id":1853,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/073a27f428a71c155382dc8637ccd772?s=128&d=identicon&r=PG","display_name":"serg10","link":"https://stackoverflow.com/users/1853/serg10"},"comment_count":6,"is_accepted":false,"score":709,"last_activity_date":1551875526,"last_edit_date":1551875526,"creation_date":1220439641,"answer_id":41454,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>Note, that a lot of the answers state that Hashtable is synchronised.  <strong>In practice this buys you very little.</strong>  The synchronization is on the accessor / mutator methods will stop two threads adding or removing from the map concurrently, but in the real world you will often need additional synchronisation.</p>\n\n<p>A very common idiom is to \"check then put\" â i.e. look for an entry in the <code>Map</code>, and add it if it does not already exist. This is not in any way an atomic operation whether you use <code>Hashtable</code> or <code>HashMap</code>.</p>\n\n<p>An equivalently synchronised <code>HashMap</code> can be obtained by:</p>\n\n<pre><code>Collections.synchronizedMap(myMap);\n</code></pre>\n\n<p>But to correctly implement this logic you need <strong>additional synchronisation</strong> of the form:</p>\n\n<pre><code>synchronized(myMap) {\n    if (!myMap.containsKey(\"tomato\"))\n        myMap.put(\"tomato\", \"red\");\n}\n</code></pre>\n\n<p>Even iterating over a <code>Hashtable</code>'s entries (or a <code>HashMap</code> obtained by <code>Collections.synchronizedMap</code>) is not thread safe unless you also guard the <code>Map</code> from being modified through additional synchronization.</p>\n\n<p>Implementations of the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"noreferrer\"><code>ConcurrentMap</code></a> interface (for example <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\"><code>ConcurrentHashMap</code></a>) solve some of this by including <strong>thread safe check-then-act semantics</strong> such as:</p>\n\n<pre><code>ConcurrentMap.putIfAbsent(key, value);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":98019,"user_id":18511,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/c621039e41aef415ad25054da3bf3f9a?s=128&d=identicon&r=PG","display_name":"Kip","link":"https://stackoverflow.com/users/18511/kip"},"edited":false,"score":103,"creation_date":1263938943,"post_id":1041798,"comment_id":2030869,"content_license":"CC BY-SA 2.5","body":"From Hashtable javadoc (emphasis added): &quot;As of the Java 2 platform v1.2, this class was retrofitted to implement the Map interface, <b>making it a member of the Java Collections Framework</b>.&quot;  However, you are right that it is legacy code. All the benefits of synchronization can be obtained more efficiently with Collections.synchronizedMap(HashMap). (Similar to Vector being a legacy version of Collections.synchronizedList(ArrayList).)"},{"owner":{"reputation":1900,"user_id":283519,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/3e60903f1cfe943d420b047006475e66?s=128&d=identicon&r=PG","display_name":"pwes","link":"https://stackoverflow.com/users/283519/pwes"},"edited":false,"score":15,"creation_date":1326356028,"post_id":1041798,"comment_id":11026533,"content_license":"CC BY-SA 3.0","body":"@aberrant80: unfortunately you have no choice between the two and have to use Hashtable when programming for J2ME..."},{"owner":{"reputation":7748,"user_id":584947,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/5c0e998a5b4fdce4f95cbec31e6dab22?s=128&d=identicon&r=PG","display_name":"anon58192932","link":"https://stackoverflow.com/users/584947/anon58192932"},"edited":false,"score":6,"creation_date":1453495255,"post_id":1041798,"comment_id":57642618,"content_license":"CC BY-SA 3.0","body":"this answer should be deleted. it contains incorrect information and has a lot of upvotes."},{"owner":{"reputation":374,"user_id":4418511,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/4b10982a4070169a871c7f55a8c3c446?s=128&d=identicon&r=PG&f=1","display_name":"GC_","link":"https://stackoverflow.com/users/4418511/gc"},"reply_to_user":{"reputation":7748,"user_id":584947,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/5c0e998a5b4fdce4f95cbec31e6dab22?s=128&d=identicon&r=PG","display_name":"anon58192932","link":"https://stackoverflow.com/users/584947/anon58192932"},"edited":false,"score":0,"creation_date":1476459587,"post_id":1041798,"comment_id":67370067,"content_license":"CC BY-SA 3.0","body":"@anon58192932 Is it possible to edit the question to fix it?"},{"owner":{"reputation":7748,"user_id":584947,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/5c0e998a5b4fdce4f95cbec31e6dab22?s=128&d=identicon&r=PG","display_name":"anon58192932","link":"https://stackoverflow.com/users/584947/anon58192932"},"edited":false,"score":1,"creation_date":1476475556,"post_id":1041798,"comment_id":67378543,"content_license":"CC BY-SA 3.0","body":"We have to get the attention of the poster @aberrant80 or an admin by flagging. Flagging could help - will try that now."},{"owner":{"reputation":1140,"user_id":1028135,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e882210063f14777167ac307cc6b9c82?s=128&d=identicon&r=PG","display_name":"MastAvalons","link":"https://stackoverflow.com/users/1028135/mastavalons"},"edited":false,"score":0,"creation_date":1560765253,"post_id":1041798,"comment_id":99829665,"content_license":"CC BY-SA 4.0","body":"Agree that &quot;Hashtable is considered legacy code&quot;. You should use ConcurentHashMap instead if you need concurrency."}],"owner":{"reputation":11554,"user_id":124111,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/bc6298c65f412c09b6389c3518b76a0b?s=128&d=identicon&r=PG","display_name":"aberrant80","link":"https://stackoverflow.com/users/124111/aberrant80"},"comment_count":6,"is_accepted":false,"score":376,"last_activity_date":1533644284,"last_edit_date":1533644284,"creation_date":1245894377,"answer_id":1041798,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p><code>Hashtable</code> is considered legacy code. There's nothing about <code>Hashtable</code> that can't be done using <code>HashMap</code> or derivations of <code>HashMap</code>, so for new code, I don't see any justification for going back to <code>Hashtable</code>.</p>\n"},{"owner":{"reputation":361,"user_id":934204,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/8bf2bddf25145ba09c989602406cff57?s=128&d=identicon&r=PG","display_name":"Neerja","link":"https://stackoverflow.com/users/934204/neerja"},"comment_count":0,"is_accepted":false,"score":36,"last_activity_date":1315464013,"creation_date":1315464013,"answer_id":7344090,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>Another key difference between hashtable and hashmap is that Iterator in the HashMap is  fail-fast  while the enumerator for the Hashtable is not and throw ConcurrentModificationException if any other Thread modifies the map structurally  by adding or removing any element except Iterator's own remove()  method. But this is not a guaranteed behavior and will be done by JVM on best effort.\"</p>\n\n<p>My source: <a href=\"http://javarevisited.blogspot.com/2010/10/difference-between-hashmap-and.html\" rel=\"noreferrer\">http://javarevisited.blogspot.com/2010/10/difference-between-hashmap-and.html</a></p>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":21,"creation_date":1378713951,"post_id":7644118,"comment_id":27538893,"content_license":"CC BY-SA 3.0","body":"This answer contains at least 2 significant factual inaccuracies. It certainly DOES NOT deserve this many upvotes."},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":61,"creation_date":1378714471,"post_id":7644118,"comment_id":27539082,"content_license":"CC BY-SA 3.0","body":"1) HashMap&#39;s iterators are NOT fail-safe.  They are fail-fast.  There is a huge difference in meaning between those two terms.  2) There is no <code>set</code> operation on a <code>HashMap</code>.  3) The <code>put(...)</code> operation won&#39;t throw <code>IllegalArgumentException</code> if there was a previous change.  4) The fail-fast behaviour of <code>HashMap</code> <i>also</i> occurs if you change a mapping.  5)  The fail-fast behaviour <i>is</i> guaranteed.  (What is not guaranteed is the behaviour of a <code>HashTable</code> if you make a concurrent modification.  The actual behaviour is ... unpredictable.)"},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":28,"creation_date":1378714613,"post_id":7644118,"comment_id":27539136,"content_license":"CC BY-SA 3.0","body":"6) <code>Hashtable</code> does not guarantee that the order of map elements will be stable over time either.  (You are perhaps confusing <code>Hashtable</code> with <code>LinkedHashMap</code>.)"},{"owner":{"user_type":"does_not_exist","display_name":"user4229245"},"edited":false,"score":4,"creation_date":1430778406,"post_id":7644118,"comment_id":48198037,"content_license":"CC BY-SA 3.0","body":"Anyone else really worried that students these days are getting the errant idea that getting &quot;synchronized versions&quot; of the collections somehow means that you don&#39;t have to externally synchronize compound operations?  My favorite example of this being <code>thing.set(thing.get() + 1);</code> which more often than not catches newbies by surprise as completely unprotected, especially if the <code>get()</code> and <code>set()</code> are synchronized methods.  Many of them are expecting magic."},{"owner":{"reputation":946,"user_id":2771888,"user_type":"registered","accept_rate":44,"profile_image":"https://www.gravatar.com/avatar/6d9ec8be7dd95a03549272c8e9f98e67?s=128&d=identicon&r=PG&f=1","display_name":"Abdul","link":"https://stackoverflow.com/users/2771888/abdul"},"edited":false,"score":0,"creation_date":1532915769,"post_id":7644118,"comment_id":90137620,"content_license":"CC BY-SA 4.0","body":"Iterators on HashMap is not fail-safe"}],"owner":{"reputation":4919,"user_id":759012,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3b8a1284aa6cee54750886264ddae2ca?s=128&d=identicon&r=PG","display_name":"sravan","link":"https://stackoverflow.com/users/759012/sravan"},"comment_count":5,"is_accepted":false,"score":201,"last_activity_date":1574444058,"last_edit_date":1574444058,"creation_date":1317710392,"answer_id":7644118,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>This question is often asked in interview to check whether candidate understands correct usage of collection classes and is aware of alternative solutions available.</p>\n\n<ol>\n<li>The <code>HashMap</code> class is roughly equivalent to <code>Hashtable</code>, except that it is non synchronized and permits nulls. (<code>HashMap</code> allows null values as key and value whereas <code>Hashtable</code> doesn't allow <code>null</code>s).</li>\n<li><code>HashMap</code> does not guarantee that the order of the map will remain constant over time.</li>\n<li><code>HashMap</code> is non synchronized whereas <code>Hashtable</code> is synchronized.</li>\n<li>Iterator in the <code>HashMap</code> is  fail-safe while the enumerator for the <code>Hashtable</code> is not and throw <code>ConcurrentModificationException</code> if any other Thread modifies the map structurally  by adding or removing any element except <code>Iterator</code>'s own <code>remove()</code>  method. But this is not a guaranteed behavior and will be done by JVM on best effort.</li>\n</ol>\n\n<p>Note on Some Important Terms:</p>\n\n<ol>\n<li>Synchronized means only one thread can modify a hash table at one point of time. Basically, it means that any thread before performing an update on a <code>Hashtable</code> will have to acquire a lock on the object while others will wait for lock to be released.</li>\n<li>Fail-safe is relevant within the context of iterators. If an iterator has been created on a collection object and some other thread tries to modify the collection object \"structurally\", a concurrent modification exception will be thrown. It is possible for other threads though to invoke <code>set</code> method since it doesn't modify the collection \"structurally\". However, if prior to calling <code>set</code>, the collection has been modified structurally, <code>IllegalArgumentException</code> will be thrown.</li>\n<li>Structurally modification means deleting or inserting element which could effectively change the structure of map.</li>\n</ol>\n\n<p><code>HashMap</code> can be synchronized by</p>\n\n<p><code>Map m = Collections.synchronizeMap(hashMap);</code></p>\n\n<p>Map provides Collection views instead of direct support for iteration\n via Enumeration objects. Collection views greatly enhance the\n expressiveness of the interface, as discussed later in this section.\n Map allows you to iterate over keys, values, or key-value pairs;\n <code>Hashtable</code> does not provide the third option. Map provides a safe way\n to remove entries in the midst of iteration; <code>Hashtable</code> did not.\n Finally, Map fixes a minor deficiency in the <code>Hashtable</code> interface.\n <code>Hashtable</code> has a method called contains, which returns true if the\n <code>Hashtable</code> contains a given value. Given its name, you'd expect this\n method to return true if the <code>Hashtable</code> contained a given key, because\n the key is the primary access mechanism for a <code>Hashtable</code>. The Map\n interface eliminates this source of confusion by renaming the method\n <code>containsValue</code>. Also, this improves the interface's consistency â\n <code>containsValue</code> parallels <code>containsKey</code>.</p>\n\n<blockquote>\n  <p><a href=\"http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"noreferrer\">The Map Interface</a></p>\n</blockquote>\n"},{"owner":{"reputation":1900,"user_id":283519,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/3e60903f1cfe943d420b047006475e66?s=128&d=identicon&r=PG","display_name":"pwes","link":"https://stackoverflow.com/users/283519/pwes"},"comment_count":0,"is_accepted":false,"score":36,"last_activity_date":1417335110,"last_edit_date":1495542893,"creation_date":1326359836,"answer_id":8832544,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>Beside all the other important aspects already mentioned here, Collections API (e.g. Map interface) is being modified all the time to conform to the \"latest and greatest\" additions to Java spec.</p>\n\n<p>For example, compare Java 5 Map iterating:</p>\n\n<pre><code>for (Elem elem : map.keys()) {\n  elem.doSth();\n}\n</code></pre>\n\n<p>versus the old Hashtable approach:</p>\n\n<pre><code>for (Enumeration en = htable.keys(); en.hasMoreElements(); ) {\n  Elem elem = (Elem) en.nextElement();\n  elem.doSth();\n}\n</code></pre>\n\n<p>In Java 1.8 we are also promised to be able to construct and access HashMaps like in good old scripting languages:</p>\n\n<pre><code>Map&lt;String,Integer&gt; map = { \"orange\" : 12, \"apples\" : 15 };\nmap[\"apples\"];\n</code></pre>\n\n<p><strong>Update:</strong> No, they won't land in 1.8... :(</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13692213/are-project-coins-collection-enhancements-going-to-be-in-jdk8\">Are Project Coin&#39;s collection enhancements going to be in JDK8?</a></p>\n"},{"owner":{"reputation":18940,"user_id":1140748,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/bc97b9d2fe6e0197b6fff186af8133d4?s=128&d=identicon&r=PG","display_name":"alain.janinm","link":"https://stackoverflow.com/users/1140748/alain-janinm"},"comment_count":0,"is_accepted":false,"score":30,"last_activity_date":1335707866,"creation_date":1335707866,"answer_id":10372667,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\">HashTable</a> is synchronized, if you are using it in a single thread you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a>, which is an unsynchronized version. Unsynchronized objects are often a little more performant. By the way if multiple threads access a HashMap concurrently, and at least one of the threads modifies the map structurally, it must be synchronized externally. \nYoun can wrap a unsynchronized map in a synchronized one using :</p>\n\n<pre><code>Map m = Collections.synchronizedMap(new HashMap(...));\n</code></pre></li>\n<li><p>HashTable can only contain non-null object as a key or as a value. HashMap can contain one null key and null values.</p></li>\n<li><p>The iterators returned by Map are fail-fast, if the map is structurally modified at any time after the iterator is created, in any way except through the iterator's own remove method, the iterator will throw a <code>ConcurrentModificationException</code>. Thus, in the face of concurrent modification, the iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic behavior at an undetermined time in the future. <strong>Whereas</strong> the Enumerations returned by Hashtable's keys and elements methods are not fail-fast. </p></li>\n<li><p>HashTable and HashMap are member of the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html\" rel=\"noreferrer\">Java Collections Framework</a> (since Java 2 platform v1.2, HashTable was retrofitted to implement the Map interface).</p></li>\n<li><p>HashTable is considered legacy code, the documentation advise to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\">ConcurrentHashMap</a> in place of Hashtable if a thread-safe highly-concurrent implementation is desired.</p></li>\n<li><p>HashMap doesn't guarantee the order in which elements are returned. For HashTable I guess it's the same but I'm not entirely sure, I don't find ressource that clearly state that.</p></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":4,"creation_date":1490382205,"post_id":11883473,"comment_id":73104055,"content_license":"CC BY-SA 3.0","body":"What does ~&quot;<b>freedom of synchronization</b>&quot; mean?"}],"owner":{"user_type":"does_not_exist","display_name":"user1506047"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1344515325,"creation_date":1344515325,"answer_id":11883473,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>HashMaps gives you freedom of synchronization and debugging is lot more easier</p>\n"},{"owner":{"reputation":1382,"user_id":819014,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/e75sz.jpg?s=128&g=1","display_name":"Sujan","link":"https://stackoverflow.com/users/819014/sujan"},"comment_count":0,"is_accepted":false,"score":66,"last_activity_date":1574444099,"last_edit_date":1574444099,"creation_date":1353389753,"answer_id":13467173,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>Take a look at this chart. It provides comparisons between different data structures along with <code>HashMap</code> and <code>Hashtable</code>. The comparison is precise, clear and easy to understand.</p>\n\n<p><a href=\"https://docs.google.com/spreadsheet/pub?key=0Aq3e8BiuZY2wdFpHSlV0QzVmV1lUNHJidGd2b0Zrb3c&amp;single=true&amp;gid=0&amp;output=pdf\" rel=\"noreferrer\">Java Collection Matrix</a></p>\n"},{"owner":{"reputation":11472,"user_id":1142881,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/99836a8fe8fb744bfa64210a2bf7cc23?s=128&d=identicon&r=PG&f=1","display_name":"SkyWalker","link":"https://stackoverflow.com/users/1142881/skywalker"},"comment_count":0,"is_accepted":false,"score":30,"last_activity_date":1390552504,"last_edit_date":1390552504,"creation_date":1355129834,"answer_id":13797704,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><code>HashMap</code> and <code>Hashtable</code> have significant algorithmic differences as well. No one has mentioned this before so that's why I am bringing it up. <code>HashMap</code> will construct a hash table with power of two size, increase it dynamically such that you have at most about eight elements (collisions) in any bucket and will stir the elements very well for general element types. However, the <code>Hashtable</code> implementation provides better and finer control over the hashing if you know what you are doing, namely you can fix the table size using e.g. the closest prime number to your values domain size and this will result in better performance than HashMap i.e. less collisions for some cases.</p>\n\n<p>Separate from the obvious differences discussed extensively in this question, I see the Hashtable as a \"manual drive\" car where you have better control over the hashing and the HashMap as the \"automatic drive\" counterpart that will generally perform well.</p>\n"},{"comments":[{"owner":{"reputation":4688,"user_id":926520,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/cIuFJ.jpg?s=128&g=1","display_name":"Pankaj","link":"https://stackoverflow.com/users/926520/pankaj"},"edited":false,"score":4,"creation_date":1359407589,"post_id":14452144,"comment_id":20333939,"content_license":"CC BY-SA 3.0","body":"HashMap iterator is fail-fast not fail-safe. Thats why we have ConcurrentHashMap that allows modification while iteration. Check this post <a href=\"http://www.journaldev.com/122/hashmap-vs-concurrenthashmap-%e2%80%93-example-and-exploring-iterator\" rel=\"nofollow noreferrer\">journaldev.com/122/&hellip;</a>"},{"owner":{"reputation":217,"user_id":4358787,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-aJTIvCaPv1Q/AAAAAAAAAAI/AAAAAAAABsg/q0ysREaQC8M/photo.jpg?sz=128","display_name":"Gaurav","link":"https://stackoverflow.com/users/4358787/gaurav"},"reply_to_user":{"reputation":4688,"user_id":926520,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/cIuFJ.jpg?s=128&g=1","display_name":"Pankaj","link":"https://stackoverflow.com/users/926520/pankaj"},"edited":false,"score":0,"creation_date":1597753358,"post_id":14452144,"comment_id":112231333,"content_license":"CC BY-SA 4.0","body":"@Pankaj Exactly."}],"owner":{"reputation":2233,"user_id":1199342,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0dSNt.jpg?s=128&g=1","display_name":"raja","link":"https://stackoverflow.com/users/1199342/raja"},"comment_count":2,"is_accepted":false,"score":10,"last_activity_date":1565982524,"last_edit_date":1565982524,"creation_date":1358832679,"answer_id":14452144,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<ol>\n<li><code>Hashtable</code> is synchronized whereas <code>HashMap</code> is not.</li>\n<li>Another difference is that iterator in the <code>HashMap</code> is fail-safe\nwhile the enumerator for the <code>Hashtable</code> isn't. If you change the map\nwhile iterating, you'll know.</li>\n<li><code>HashMap</code> permits null values in it, while <code>Hashtable</code> doesn't.</li>\n</ol>\n"},{"comments":[{"owner":{"reputation":3069,"user_id":2837359,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/9B4kt.jpg?s=128&g=1","display_name":"manikant gautam","link":"https://stackoverflow.com/users/2837359/manikant-gautam"},"edited":false,"score":0,"creation_date":1571222901,"post_id":14627155,"comment_id":103166164,"content_license":"CC BY-SA 4.0","body":"If it is does so , it should be in comments not as answer."}],"owner":{"reputation":225,"user_id":1203455,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6d0eac988ccb563c7c6e4483b90e6e8f?s=128&d=identicon&r=PG","display_name":"Ankit","link":"https://stackoverflow.com/users/1203455/ankit"},"comment_count":1,"is_accepted":false,"score":11,"last_activity_date":1545962718,"last_edit_date":1545962718,"creation_date":1359639665,"answer_id":14627155,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>HashMap: It is a class available inside java.util package and it is used to store the element in key and value format.</p>\n\n<p>Hashtable: It is a legacy class which is being recognized inside collection framework.</p>\n"},{"comments":[{"owner":{"reputation":2530,"user_id":541755,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/8ba5f8d1fd128c235860a1847f8356c3?s=128&d=identicon&r=PG","display_name":"jontejj","link":"https://stackoverflow.com/users/541755/jontejj"},"reply_to_user":{"reputation":980063,"user_id":157882,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/89927e2f4bde24991649b353a37678b9?s=128&d=identicon&r=PG","display_name":"BalusC","link":"https://stackoverflow.com/users/157882/balusc"},"edited":false,"score":0,"creation_date":1438936190,"post_id":16018266,"comment_id":51664156,"content_license":"CC BY-SA 3.0","body":"Because I thought the other answers, at the time, didn&#39;t dismiss HashTable but explained that it was threadsafe. The truth is that as soon as you see HashTable in code, you should replace it with ConcurrentHashMap without skipping a beat. And if thread safety is not a concern then HashMap can be used to improve performance a bit."}],"owner":{"reputation":2530,"user_id":541755,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/8ba5f8d1fd128c235860a1847f8356c3?s=128&d=identicon&r=PG","display_name":"jontejj","link":"https://stackoverflow.com/users/541755/jontejj"},"comment_count":1,"is_accepted":false,"score":10,"last_activity_date":1366565242,"last_edit_date":1366565242,"creation_date":1366037392,"answer_id":16018266,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\">HashTable</a> is a legacy class in the jdk that shouldn't be used anymore. Replace usages of it with <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\">ConcurrentHashMap</a>. If you don't require thread safety, use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a> which isn't <a href=\"http://jsr-305.googlecode.com/svn/trunk/javadoc/javax/annotation/concurrent/ThreadSafe.html\" rel=\"noreferrer\">threadsafe</a> but faster and uses less memory.</p>\n"},{"comments":[{"owner":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":0,"creation_date":1490382249,"post_id":17651399,"comment_id":73104089,"content_license":"CC BY-SA 3.0","body":"Is that a comprehensive description of differences between the two apis?"},{"owner":{"reputation":504,"user_id":1162526,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6a421fb7795e8d606652e3375ebd7d42?s=128&d=identicon&r=PG","display_name":"pong","link":"https://stackoverflow.com/users/1162526/pong"},"reply_to_user":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":0,"creation_date":1490384504,"post_id":17651399,"comment_id":73105303,"content_license":"CC BY-SA 3.0","body":"Yes (sic!). That&#39;s all GWT developers need to know about it."}],"owner":{"reputation":504,"user_id":1162526,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6a421fb7795e8d606652e3375ebd7d42?s=128&d=identicon&r=PG","display_name":"pong","link":"https://stackoverflow.com/users/1162526/pong"},"comment_count":2,"is_accepted":false,"score":5,"last_activity_date":1373882050,"creation_date":1373882050,"answer_id":17651399,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><code>HashMap</code> is emulated and therefore usable in <code>GWT client code</code> whereas <code>Hashtable</code> is not.</p>\n"},{"owner":{"reputation":443,"user_id":2476998,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/XdENJ.jpg?s=128&g=1","display_name":"Ekanta Swain","link":"https://stackoverflow.com/users/2476998/ekanta-swain"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1374594626,"creation_date":1374594626,"answer_id":17815037,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>HashMap is a class  used to store the element in key and value format.it is not thread safe.\nbecause it is not synchronized .where as Hashtable is synchronized.Hashmap permits null but hastable doesn't permit null.</p>\n"},{"owner":{"reputation":4336,"user_id":1923551,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/548a5f3d73fb0e60561d0996eeb01a61?s=128&d=identicon&r=PG","display_name":"user1923551","link":"https://stackoverflow.com/users/1923551/user1923551"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1397144678,"last_edit_date":1397144678,"creation_date":1386765949,"answer_id":20519518,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>There are 5 basic differentiations with HashTable and HashMaps. </p>\n\n<ol>\n<li>Maps allows you to iterate and retrieve keys, values, and both key-value pairs as well, Where HashTable don't have all this capability. </li>\n<li>In Hashtable there is a function contains(), which is very confusing to use. Because the meaning of contains is slightly deviating. Whether it means contains key or contains  value? tough to understand. Same thing in Maps we have ContainsKey() and ContainsValue() functions, which are very easy to understand. </li>\n<li>In hashmap you can remove element while iterating, safely. where as it is not possible in hashtables.</li>\n<li>HashTables are by default synchronized, so it can be used with multiple threads easily. Where as HashMaps are not synchronized by default, so can be used with only single thread.  But you can still convert HashMap to synchronized by using Collections util class's synchronizedMap(Map m) function.</li>\n<li>HashTable won't allow null keys or null values. Where as HashMap allows one null key, and multiple null values.</li>\n</ol>\n"},{"owner":{"reputation":310,"user_id":2970123,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/d349682c1b31bd863be6bec8f68afc31?s=128&d=identicon&r=PG&f=1","display_name":"PetarMI","link":"https://stackoverflow.com/users/2970123/petarmi"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1545962656,"last_edit_date":1545962656,"creation_date":1394204561,"answer_id":22253585,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>Since Hashtable in Java is a subclass of Dictionary class which is now obsolete due to the existence of Map Interface, it is not used anymore. Moreover, there isn't anything you can't do with a class that implements the Map Interface that you can do with a Hashtable. </p>\n"},{"owner":{"reputation":11243,"user_id":838841,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/gIfDD.jpg?s=128&g=1","display_name":"Shreyos Adikari","link":"https://stackoverflow.com/users/838841/shreyos-adikari"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1427039073,"last_edit_date":1592644375,"creation_date":1395179216,"answer_id":22491742,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>My small contribution :</p>\n<blockquote>\n<ol>\n<li><p>First and most significant different between <code>Hashtable</code> and <code>HashMap</code> is that, <code>HashMap</code> is not thread-safe  while <code>Hashtable</code> is a thread-safe collection.</p>\n</li>\n<li><p>Second important difference between <code>Hashtable</code> and <code>HashMap</code> is performance, since <code>HashMap</code> is not synchronized it perform better than <code>Hashtable</code>.</p>\n</li>\n<li><p>Third difference on <code>Hashtable</code> vs <code>HashMap</code> is that <code>Hashtable</code> is obsolete class and you should be using <code>ConcurrentHashMap</code> in place of <code>Hashtable</code> in Java.</p>\n</li>\n</ol>\n</blockquote>\n"},{"owner":{"reputation":35959,"user_id":115722,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/6cak4.jpg?s=128&g=1","display_name":"pierrotlefou","link":"https://stackoverflow.com/users/115722/pierrotlefou"},"comment_count":0,"is_accepted":false,"score":130,"last_activity_date":1433310213,"last_edit_date":1433310213,"creation_date":1395737881,"answer_id":22629569,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>Keep in mind that <code>HashTable</code> was legacy class before Java Collections Framework (JCF) was introduced and was later retrofitted to implement the <code>Map</code> interface. So was <code>Vector</code> and <code>Stack</code>. </p>\n\n<p><strong>Therefore, always stay away from them in new code since there always better alternative in the JCF</strong> as others had pointed out.</p>\n\n<p>Here is the <a href=\"http://pierrchen.blogspot.com/2014/03/java-collections-framework-cheat-sheet.html\" rel=\"noreferrer\">Java collection cheat sheet</a> that you will find useful. Notice the gray block contains the legacy class HashTable,Vector and Stack.</p>\n\n<p><img src=\"https://i.stack.imgur.com/PyflH.png\" alt=\"enter image description here\"></p>\n"},{"comments":[{"owner":{"reputation":651,"user_id":785622,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7494e4ed24c6eaed510805297625678c?s=128&d=identicon&r=PG","display_name":"Ioannis Sermetziadis","link":"https://stackoverflow.com/users/785622/ioannis-sermetziadis"},"edited":false,"score":2,"creation_date":1508910152,"post_id":24583680,"comment_id":80796289,"content_license":"CC BY-SA 3.0","body":"Down-voted because this answer is not correct in some aspects. Hashtable does not implement the Map interface, but only extends the Dictionary class, which is obsolete."}],"owner":{"reputation":1573,"user_id":3230563,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/MnydM.jpg?s=128&g=1","display_name":"JegsVala","link":"https://stackoverflow.com/users/3230563/jegsvala"},"comment_count":1,"is_accepted":false,"score":9,"last_activity_date":1500994772,"last_edit_date":1500994772,"creation_date":1404541677,"answer_id":24583680,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><strong>HashMap and HashTable</strong>    </p>\n\n<ul>\n<li>Some important points about HashMap and HashTable.\n   please read below details.</li>\n</ul>\n\n<p>1) Hashtable and Hashmap implement the java.util.Map interface\n2) Both Hashmap and Hashtable is the hash based collection. and working on hashing.\nso these are similarity of HashMap and HashTable.    </p>\n\n<ul>\n<li>What is the difference between HashMap and HashTable?</li>\n</ul>\n\n<p>1) First difference is HashMap is not thread safe While HashTable is ThreadSafe<br>\n2) HashMap is performance wise better because it is not thread safe. while Hashtable performance wise is not better because it is thread safe. so multiple thread can not access Hashtable at the same time.</p>\n"},{"comments":[{"owner":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":0,"creation_date":1490383640,"post_id":25348157,"comment_id":73104845,"content_license":"CC BY-SA 3.0","body":"ConcurrentHashMap is not read-synchronized, whereas Hashtable is.  So if you have a high amount of read operations happening simultaneously with writes, a Hashtable would serve you better if you care about data integrity."}],"owner":{"reputation":185,"user_id":2647077,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/67e9c85d8f18e3975c96789608e6f484?s=128&d=identicon&r=PG&f=1","display_name":"Night0","link":"https://stackoverflow.com/users/2647077/night0"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1438848290,"last_edit_date":1438848290,"creation_date":1408269518,"answer_id":25348157,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>Old and classic topic, just want to add this helpful blog that explains this:</p>\n\n<p><a href=\"http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/\" rel=\"nofollow\">http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/</a></p>\n\n<p>Blog by Manish Chhabra</p>\n\n<blockquote>\n  <p>The 5 main differences betwen HashMap and Hashtable</p>\n  \n  <p>HashMap and Hashtable both implement java.util.Map interface but there\n  are some differences that Java developers must understand to write\n  more efficient code. As of the Java 2 platform v1.2, Hashtable class\n  was retrofitted to implement the Map interface, making it a member of\n  the Java Collections Framework.</p>\n  \n  <ol>\n  <li><p>One of the major differences between HashMap and Hashtable is that HashMap is non-synchronized whereas Hashtable is synchronized, which\n  means Hashtable is thread-safe and can be shared between multiple\n  threads but HashMap cannot be shared between multiple threads without\n  proper synchronization. Java 5 introduced ConcurrentHashMap which is\n  an alternative of Hashtable and provides better scalability than\n  Hashtable in Java.Synchronized means only one thread can modify a hash\n  table at one point of time. Basically, it means that any thread before\n  performing an update on a hashtable will have to acquire a lock on the\n  object while others will wait for lock to be released.</p></li>\n  <li><p>The HashMap class is roughly equivalent to Hashtable, except that it permits nulls. (HashMap allows null values as key and value whereas\n  Hashtable doesnât allow nulls).</p></li>\n  <li><p>The third significant difference between HashMap vs Hashtable is that Iterator in the HashMap is a fail-fast iterator while the\n  enumerator for the Hashtable is not and throw\n  ConcurrentModificationException if any other Thread modifies the map\n  structurally by adding or removing any element except Iteratorâs own\n  remove() method. But this is not a guaranteed behavior and will be\n  done by JVM on best effort. This is also an important difference\n  between Enumeration and Iterator in Java.</p></li>\n  <li><p>One more notable difference between Hashtable and HashMap is that because of thread-safety and synchronization Hashtable is much slower\n  than HashMap if used in Single threaded environment. So if you donât\n  need synchronization and HashMap is only used by one thread, it out\n  perform Hashtable in Java.</p></li>\n  <li><p>HashMap does not guarantee that the order of the map will remain constant over time.</p></li>\n  </ol>\n  \n  <p>Note that HashMap can be synchronized by</p>\n\n<pre><code>Map m = Collections.synchronizedMap(hashMap);\n</code></pre>\n  \n  <p>In Summary there are significant differences between Hashtable and\n  HashMap in Java e.g. thread-safety and speed and based upon that only\n  use Hashtable if you absolutely need thread-safety, if you are running\n  Java 5 consider using ConcurrentHashMap in Java.</p>\n</blockquote>\n"},{"owner":{"reputation":505,"user_id":3981269,"user_type":"registered","accept_rate":31,"profile_image":"https://i.stack.imgur.com/6VAYD.jpg?s=128&g=1","display_name":"Rahul Tripathi","link":"https://stackoverflow.com/users/3981269/rahul-tripathi"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1427039033,"last_edit_date":1427039033,"creation_date":1409138981,"answer_id":25526024,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>1.<code>Hashmap</code> and <code>HashTable</code> both store key and value. </p>\n\n<p>2.<code>Hashmap</code> can store one key as <code>null</code>. <code>Hashtable</code> can't store <code>null</code>.</p>\n\n<p>3.<code>HashMap</code> is not synchronized but <code>Hashtable</code> is synchronized. </p>\n\n<p>4.<code>HashMap</code> can be synchronized with <code>Collection.SyncronizedMap(map)</code></p>\n\n<pre><code>Map hashmap = new HashMap();\n\nMap map = Collections.SyncronizedMap(hashmap);\n</code></pre>\n"},{"owner":{"reputation":68963,"user_id":3395198,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1","display_name":"IntelliJ Amiya","link":"https://stackoverflow.com/users/3395198/intellij-amiya"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1461663976,"last_edit_date":1461663976,"creation_date":1423554271,"answer_id":28426488,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><strong><code>Hashtable:</code></strong></p>\n\n<p><strong>Hashtable</strong> is a data structure that retains values of key-value pair. It doesnât allow null for both the keys and the values. You will get a <code>NullPointerException</code> if you add null value. It is synchronized. So it comes with its cost. Only one thread can access <strong>HashTable</strong> at a particular time.</p>\n\n<p><strong>Example</strong> :</p>\n\n<pre><code>import java.util.Map;\nimport java.util.Hashtable;\n\npublic class TestClass {\n\n    public static void main(String args[ ]) {\n    Map&lt;Integer,String&gt; states= new Hashtable&lt;Integer,String&gt;();\n    states.put(1, \"INDIA\");\n    states.put(2, \"USA\");\n\n    states.put(3, null);    //will throw NullPointerEcxeption at runtime\n\n    System.out.println(states.get(1));\n    System.out.println(states.get(2));\n//  System.out.println(states.get(3));\n\n    }\n}\n</code></pre>\n\n<p><strong>HashMap:</strong></p>\n\n<p><strong>HashMap</strong> is like <strong>Hashtable</strong> but it also accepts key value pair. It allows null for both the keys and the values. Its performance better is better than <code>HashTable</code>, because it is <code>unsynchronized</code>.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class TestClass {\n\n    public static void main(String args[ ]) {\n    Map&lt;Integer,String&gt; states = new HashMap&lt;Integer,String&gt;();\n    states.put(1, \"INDIA\");\n    states.put(2, \"USA\");\n\n    states.put(3, null);    // Okay\n    states.put(null,\"UK\");\n\n    System.out.println(states.get(1));\n    System.out.println(states.get(2));\n    System.out.println(states.get(3));\n\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":497,"user_id":3527383,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/2b93ba8968d0e8acef777c21c43222fa?s=128&d=identicon&r=PG&f=1","display_name":"amitguptageek","link":"https://stackoverflow.com/users/3527383/amitguptageek"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1460263590,"last_edit_date":1460263590,"creation_date":1452018942,"answer_id":34618895,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p><strong>Synchronization or Thread Safe</strong> :</p>\n\n<p>Hash Map is not synchronized hence it is not thred safe and it cannot be shared between multiple threads without proper synchronized block whereas, Hashtable is synchronized and hence it is thread safe.</p>\n\n<p><strong>Null keys and null values</strong> :</p>\n\n<p>HashMap allows one null key and any number of null values.Hashtable does not allow null keys or values. </p>\n\n<p><strong>Iterating the values</strong>:</p>\n\n<p>Iterator in the HashMap is a fail-fast iterator while the enumerator for the Hashtable is not and throw ConcurrentModificationException if any other Thread modifies the map structurally by adding or removing any element except Iteratorâs own remove() method.</p>\n\n<p><strong>Superclass and Legacy</strong> :</p>\n\n<p>HashMap is subclass of AbstractMap class whereas Hashtable is subclass of Dictionary class.</p>\n\n<p><strong>Performance</strong> :</p>\n\n<p>As HashMap is not synchronized it is faster as compared to Hashtable.</p>\n\n<p>Refer <a href=\"http://modernpathshala.com/Article/1020/difference-between-hashmap-and-hashtable-in-java\" rel=\"nofollow\">http://modernpathshala.com/Article/1020/difference-between-hashmap-and-hashtable-in-java</a> for examples and interview questions and quiz related to  Java collection</p>\n"},{"owner":{"reputation":3761,"user_id":3294902,"user_type":"registered","profile_image":"https://i.stack.imgur.com/PwpJj.jpg?s=128&g=1","display_name":"Kostas Chalkias","link":"https://stackoverflow.com/users/3294902/kostas-chalkias"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1462374255,"creation_date":1462374255,"answer_id":37031553,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>Apart from the differences already mentioned, it should be noted that since Java 8, <code>HashMap</code> dynamically replaces the Nodes (linked list) used in each bucket with TreeNodes (red-black tree), so that even if high hash collisions exist, the worst case <em>when searching</em> is</p>\n\n<p>O(log(n)) for <code>HashMap</code> <strong>Vs</strong> O(n) in <code>Hashtable</code>.</p>\n\n<p>*The aforementioned improvement has not been applied to <code>Hashtable</code> yet, but only to <code>HashMap</code>, <code>LinkedHashMap</code>, and <code>ConcurrentHashMap</code>.</p>\n\n<p>FYI, currently,</p>\n\n<ul>\n<li><code>TREEIFY_THRESHOLD = 8</code> : if a bucket contains more than 8 nodes, the linked list is transformed into a balanced tree.</li>\n<li><code>UNTREEIFY_THRESHOLD = 6</code> : when a bucket becomes too small (due to removal or resizing) the tree is converted back to linked list.</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":26593,"user_id":432903,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/YCgsh.jpg?s=128&g=1","display_name":"prayagupd","link":"https://stackoverflow.com/users/432903/prayagupd"},"edited":false,"score":0,"creation_date":1489372588,"post_id":42622789,"comment_id":72627692,"content_license":"CC BY-SA 3.0","body":"Pretty much covered in this answer (dupicate of )- <a href=\"http://stackoverflow.com/a/39785829/432903\">stackoverflow.com/a/39785829/432903</a>."},{"owner":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":0,"creation_date":1490383753,"post_id":42622789,"comment_id":73104912,"content_license":"CC BY-SA 3.0","body":"Why do you say ~&quot;<b>Hashtable is a legacy class</b>&quot;?  Where is the supporting documentation for that."},{"owner":{"reputation":6153,"user_id":5167682,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/2vexc.jpg?s=128&g=1","display_name":"roottraveller","link":"https://stackoverflow.com/users/5167682/roottraveller"},"reply_to_user":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":3,"creation_date":1490780916,"post_id":42622789,"comment_id":73261540,"content_license":"CC BY-SA 3.0","body":"@IgorGanapolsky you may read this - <a href=\"http://stackoverflow.com/questions/21086307/what-are-the-legacy-classes-in-java/21086364#21086364\" title=\"what are the legacy classes in java\">stackoverflow.com/questions/21086307/&hellip;</a>"},{"owner":{"reputation":946,"user_id":2771888,"user_type":"registered","accept_rate":44,"profile_image":"https://www.gravatar.com/avatar/6d9ec8be7dd95a03549272c8e9f98e67?s=128&d=identicon&r=PG&f=1","display_name":"Abdul","link":"https://stackoverflow.com/users/2771888/abdul"},"edited":false,"score":0,"creation_date":1532916350,"post_id":42622789,"comment_id":90137708,"content_license":"CC BY-SA 4.0","body":"Maintaining HashMap is costly than TreeMap. Because HashMap creates unnecessary extra buckets."},{"owner":{"reputation":61,"user_id":1029162,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b517c8a51684983910f304a18e26d299?s=128&d=identicon&r=PG","display_name":"thomas.schuerger","link":"https://stackoverflow.com/users/1029162/thomas-schuerger"},"edited":false,"score":0,"creation_date":1612451717,"post_id":42622789,"comment_id":116776002,"content_license":"CC BY-SA 4.0","body":"A LinkedHashMap has a doubly-linked list of entries, not of buckets. Buckets are accessible via array indices and need not be linked."}],"owner":{"reputation":6153,"user_id":5167682,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/2vexc.jpg?s=128&g=1","display_name":"roottraveller","link":"https://stackoverflow.com/users/5167682/roottraveller"},"comment_count":5,"is_accepted":false,"score":74,"last_activity_date":1534422210,"last_edit_date":1534422210,"creation_date":1488794984,"answer_id":42622789,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p>There is many good answer already posted. I'm adding few new points and summarizing it.</p>\n\n<p><code>HashMap</code> and <code>Hashtable</code> both are used to store <em>data in key and value form</em>. Both are using hashing technique to store unique keys.\nBut there are many differences between HashMap and Hashtable classes that are given below.</p>\n\n<p><strong>HashMap</strong> </p>\n\n<ol>\n<li><code>HashMap</code> is non synchronized. It is not-thread safe and can't be shared between many threads without proper synchronization code.     </li>\n<li><code>HashMap</code> allows one null key and multiple null values.    </li>\n<li><code>HashMap</code> is a new class introduced in JDK 1.2.  </li>\n<li><code>HashMap</code> is fast.   </li>\n<li>We can make the <code>HashMap</code> as synchronized by calling this code<br>\n     <code>Map m = Collections.synchronizedMap(HashMap);</code>  </li>\n<li><code>HashMap</code> is traversed by Iterator.  </li>\n<li>Iterator in <code>HashMap</code> is fail-fast.  </li>\n<li><code>HashMap</code> inherits AbstractMap class.    </li>\n</ol>\n\n<p><strong>Hashtable</strong></p>\n\n<ol>\n<li><code>Hashtable</code> is synchronized. It is thread-safe and can be shared with many threads.  </li>\n<li><code>Hashtable</code> doesn't allow any null key or value.  </li>\n<li><code>Hashtable</code> is a legacy class.  </li>\n<li><code>Hashtable</code> is slow.  </li>\n<li><code>Hashtable</code> is internally synchronized and can't be unsynchronized.  </li>\n<li><code>Hashtable</code> is traversed by Enumerator and Iterator.  </li>\n<li>Enumerator in <code>Hashtable</code> is not fail-fast.  </li>\n<li><code>Hashtable</code> inherits Dictionary class.</li>\n</ol>\n\n<p>Further reading <a href=\"http://javarevisited.blogspot.in/2010/10/difference-between-hashmap-and.html\" rel=\"noreferrer\">What is difference between HashMap and Hashtable in Java?</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/sDoih.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sDoih.png\" alt=\"enter image description here\"></a></p>\n"},{"owner":{"reputation":341,"user_id":4226914,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9800dbafaba6194ea3168086213253ec?s=128&d=identicon&r=PG&f=1","display_name":"KIBOU Hassan","link":"https://stackoverflow.com/users/4226914/kibou-hassan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1492789315,"creation_date":1492789315,"answer_id":43546846,"question_id":40471,"content_license":"CC BY-SA 3.0","body":"<p>The Hashtable class is synchronized, that is, it is designed to be used by applications that handle multiple or multithreaded process. Synchronized classes are less efficient in the classical case of an application to a process, so the Hashmap class is faster in general.\nThe HashTable class does not accept the Null value, either for keys or for values, while the HashMap class allows a single key with Null and as many as null as possible.</p>\n"},{"owner":{"reputation":7252,"user_id":5081877,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/vG3nv.png?s=128&g=1","display_name":"Yash","link":"https://stackoverflow.com/users/5081877/yash"},"comment_count":0,"is_accepted":false,"score":25,"last_activity_date":1524242809,"last_edit_date":1592644375,"creation_date":1515067124,"answer_id":48094803,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p><em>A <a href=\"https://docs.oracle.com/javase/tutorial/collections/intro/index.html\" rel=\"noreferrer\"><code>Collection</code></a> â sometimes called a container â is simply an object that groups multiple elements into a single unit. <code>Collection</code>s are used to store, retrieve, manipulate, and communicate aggregate data. A collections framework <sup><a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"noreferrer\">W</a></sup> is a unified architecture for representing and manipulating collections.</em></p>\n<p>The <code>HashMap</code> <sup><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\"><em><code>JDK1.2</code></em></a></sup> and Hashtable <sup><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"noreferrer\"><em><code>JDK1.0</code></em></a></sup>, both are used to represent a group of objects that are represented in <code>&lt;Key, Value&gt;</code> pair. Each <code>&lt;Key, Value&gt;</code> pair is called <code>Entry</code> object. The collection of Entries is referred by the object of <code>HashMap</code> and <code>Hashtable</code>. Keys in a collection must be unique or distinctive. [as they are used to retrieve a mapped value a particular key. values in a collection can be duplicated.]</p>\n<hr />\n<p><strong>Â«</strong> <strong>Superclass, Legacy and Collection Framework member</strong></p>\n<p><em>Hashtable is a legacy class introduced in <code>JDK1.0</code>, which is a subclass of Dictionary class. From <code>JDK1.2</code> Hashtable is re-engineered to implement the <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"noreferrer\">Map interface</a> to make a member of collection framework. HashMap is a member of Java Collection Framework right from the beginning of its introduction in <code>JDK1.2</code>. HashMap is the subclass of the AbstractMap class.</em></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\n\npublic class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\n</code></pre>\n\n<p><strong>Â«</strong> <strong>Initial capacity and Load factor</strong></p>\n<p><em>The capacity is the number of buckets in the hash table, and the initial capacity is simply the capacity at the time the hash table is created. Note that the hash table is open: in the case of a &quot;<code>hash </code><a href=\"http://www.algolist.net/Data_structures/Hash_table/Chaining\" rel=\"noreferrer\"><code>collision</code></a>&quot;, a single bucket stores multiple entries, which must be searched sequentially. The load factor is a measure of how full the hash table is allowed to get before its capacity is automatically increased.</em></p>\n<p><em>HashMap constructs an empty hash table with the default initial capacity <strong>(16)</strong> and the default load factor (0.75). Where as Hashtable constructs empty hashtable with a default initial capacity <strong>(11)</strong> and load factor/fill ratio (0.75).</em></p>\n<p><a href=\"https://i.stack.imgur.com/AerdR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AerdR.png\" alt=\"Hash Map &amp; Hashtable\" /></a></p>\n<p><strong>Â«</strong> <strong>Structural modification in case of hash collision</strong></p>\n<p><em><code>HashMap</code>, <code>Hashtable</code> in case of hash collisions they store the map entries in linked lists. <strong>From Java8 for <code>HashMap</code></strong> if hash bucket grows beyond a certain threshold, that bucket will switch from <a href=\"http://openjdk.java.net/jeps/180\" rel=\"noreferrer\"><code>linked list of entries to a balanced tree</code></a>. which improve worst-case performance from O(n) to O(log n). While converting the list to binary tree, hashcode is used as a branching variable. If there are two different hashcodes in the same bucket, one is considered bigger and goes to the right of the tree and other one to the left. But when both the hashcodes are equal, <code>HashMap</code> assumes that the keys are comparable, and compares the key to determine the direction so that some order can be maintained. It is a good practice to make the keys of <code>HashMap</code> <a href=\"https://stackoverflow.com/a/31244596/5081877\">comparable</a>. On adding entries if bucket size reaches <code>TREEIFY_THRESHOLD = 8</code> convert linked list of entries to a balanced tree, on removing entries less than <code>TREEIFY_THRESHOLD</code>  and at most <code>UNTREEIFY_THRESHOLD = 6</code> will reconvert  balanced tree to linked list of entries. <sup><a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/HashMap.java#l244\" rel=\"noreferrer\">Java 8 SRC</a>, <a href=\"https://stackoverflow.com/a/43911638/5081877\">stackpost</a></sup></em></p>\n<p><strong>Â«</strong> <strong>Collection-view iteration, Fail-Fast and Fail-Safe</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    +--------------------+-----------+-------------+\n    |                    | Iterator  | Enumeration |\n    +--------------------+-----------+-------------+\n    | Hashtable          | fail-fast |    safe     |\n    +--------------------+-----------+-------------+\n    | HashMap            | fail-fast | fail-fast   |\n    +--------------------+-----------+-------------+\n    | ConcurrentHashMap  |   safe    |   safe      |\n    +--------------------+-----------+-------------+\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"noreferrer\"><code>Iterator</code></a> is a fail-fast in nature. i.e it throws ConcurrentModificationException if a collection is modified while iterating other than itâs own remove() method. Where as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html\" rel=\"noreferrer\"><code>Enumeration</code></a> is fail-safe in nature. It doesnât throw any exceptions if a collection is modified while iterating.</p>\n<p>According to Java API Docs, Iterator is always preferred over the Enumeration.</p>\n<p><sub><b>NOTE:</b> The functionality of Enumeration interface is duplicated by the Iterator interface. In addition, Iterator adds an optional remove operation, and has shorter method names. New implementations should consider using Iterator in preference to Enumeration.</sub></p>\n<p>In <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes5.html\" rel=\"noreferrer\">Java 5 introduced ConcurrentMap Interface</a>: <code>ConcurrentHashMap</code> - a highly concurrent, high-performance <code>ConcurrentMap</code> implementation backed by a hash table. This implementation never blocks when performing retrievals and allows the client to select the concurrency level for updates. It is intended as a drop-in replacement for <code>Hashtable</code>: in addition to implementing <code>ConcurrentMap</code>, it supports all of the &quot;legacy&quot; methods peculiar to <code>Hashtable</code>.</p>\n<ul>\n<li><p>Each <code>HashMapEntry</code>s value is <a href=\"https://stackoverflow.com/a/47695757/5081877\">volatile</a> thereby ensuring fine grain consistency for contended modifications and subsequent reads; each read reflects the most recently completed update</p>\n</li>\n<li><p>Iterators and Enumerations are Fail Safe - reflecting the state at some point since the creation of iterator/enumeration; this allows for simultaneous reads and modifications at the cost of reduced consistency. They do not throw ConcurrentModificationException. However, iterators are designed to be used by only one thread at a time.</p>\n</li>\n<li><p><strong><em>Like <code>Hashtable</code> but unlike <code>HashMap</code>, this class does not allow null to be used as a key or value.</em></strong></p>\n</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n\n    //HashMap&lt;String, Integer&gt; hash = new HashMap&lt;String, Integer&gt;();\n    Hashtable&lt;String, Integer&gt; hash = new Hashtable&lt;String, Integer&gt;();\n    //ConcurrentHashMap&lt;String, Integer&gt; hash = new ConcurrentHashMap&lt;&gt;();\n    \n    new Thread() {\n        @Override public void run() {\n            try {\n                for (int i = 10; i &lt; 20; i++) {\n                    sleepThread(1);\n                    System.out.println(&quot;T1 :- Key&quot;+i);\n                    hash.put(&quot;Key&quot;+i, i);\n                }\n                System.out.println( System.identityHashCode( hash ) );\n            } catch ( Exception e ) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n    new Thread() {\n        @Override public void run() {\n            try {\n                sleepThread(5);\n                // ConcurrentHashMap  traverse using Iterator, Enumeration is Fail-Safe.\n                \n                // Hashtable traverse using Enumeration is Fail-Safe, Iterator is Fail-Fast.\n                for (Enumeration&lt;String&gt; e = hash.keys(); e.hasMoreElements(); ) {\n                    sleepThread(1);\n                    System.out.println(&quot;T2 : &quot;+ e.nextElement());\n                }\n                \n                // HashMap traverse using Iterator, Enumeration is Fail-Fast.\n                /*\n                for (Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = hash.entrySet().iterator(); it.hasNext(); ) {\n                    sleepThread(1);\n                    System.out.println(&quot;T2 : &quot;+ it.next());\n                    // ConcurrentModificationException at java.util.Hashtable$Enumerator.next\n                }\n                */\n                \n                /*\n                Set&lt; Entry&lt;String, Integer&gt; &gt; entrySet = hash.entrySet();\n                Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = entrySet.iterator();\n                Enumeration&lt;Entry&lt;String, Integer&gt;&gt; entryEnumeration = Collections.enumeration( entrySet );\n                while( entryEnumeration.hasMoreElements() ) {\n                    sleepThread(1);\n                    Entry&lt;String, Integer&gt; nextElement = entryEnumeration.nextElement();\n                    System.out.println(&quot;T2 : &quot;+ nextElement.getKey() +&quot; : &quot;+ nextElement.getValue() );\n                    //java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextNode\n                    //                                          at java.util.HashMap$EntryIterator.next\n                    //                                          at java.util.Collections$3.nextElement\n                }\n                */\n            } catch ( Exception e ) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n    \n    Map&lt;String, String&gt; unmodifiableMap = Collections.unmodifiableMap( map );\n    try {\n        unmodifiableMap.put(&quot;key4&quot;, &quot;unmodifiableMap&quot;);\n    } catch (java.lang.UnsupportedOperationException e) {\n        System.err.println(&quot;UnsupportedOperationException : &quot;+ e.getMessage() );\n    }\n}\nstatic void sleepThread( int sec ) {\n    try {\n        Thread.sleep( 1000 * sec );\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p><strong>Â«</strong> <strong>Null Keys And Null Values</strong></p>\n<p><code>HashMap</code> allows maximum one null key and any number of null values. Where as <code>Hashtable</code> doesnât allow even a single null key and null value, if the key or value null is then it throws NullPointerException. <sup><a href=\"https://stackoverflow.com/a/31243387/5081877\">Example</a></sup></p>\n<p><strong>Â«</strong> <strong>Synchronized, Thread Safe</strong></p>\n<p><code>Hashtable</code> is internally synchronized. Therefore, it is very much safe to use <code>Hashtable</code> in multi threaded applications. Where as <code>HashMap</code> is not internally synchronized. Therefore, it is not safe to use <code>HashMap</code> in multi threaded applications without external synchronization. You can externally synchronize <code>HashMap</code> using <code>Collections.synchronizedMap()</code> method.</p>\n<p><strong>Â«</strong> <strong>Performance</strong></p>\n<p>As <code>Hashtable</code> is internally synchronized, this makes <code>Hashtable</code> slightly slower than the <code>HashMap</code>.</p>\n<hr />\n<p>@See</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"noreferrer\">A redâblack tree is a kind of self-balancing binary search tree</a></li>\n<li><a href=\"https://www.nagarro.com/de/perspectives/post/24/performance-improvement-for-hashmap-in-java-8\" rel=\"noreferrer\">Performance Improvement for <code>HashMap</code> in Java 8</a></li>\n</ul>\n"},{"owner":{"reputation":1592,"user_id":7888956,"user_type":"registered","profile_image":"https://i.stack.imgur.com/vfzrr.png?s=128&g=1","display_name":"DeC","link":"https://stackoverflow.com/users/7888956/dec"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1572435142,"creation_date":1572435142,"answer_id":58624450,"question_id":40471,"content_license":"CC BY-SA 4.0","body":"<p><strong>HashMap</strong> and <strong>Hashtable</strong> both are used to store data in key and value form. Both are using hashing technique to store unique keys.\nut there are many differences between HashMap and Hashtable classes that are given below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mLpKn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mLpKn.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"reputation":46769,"user_id":4316,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/dc91d4e8c035283347ba673168770cea?s=128&d=identicon&r=PG","display_name":"dmanxiii","link":"https://stackoverflow.com/users/4316/dmanxiii"},"comment_count":2,"is_answered":true,"view_count":1584690,"protected_date":1331925209,"accepted_answer_id":40878,"answer_count":35,"score":3903,"last_activity_date":1600201723,"creation_date":1220386320,"last_edit_date":1596280763,"question_id":40471,"link":"https://stackoverflow.com/questions/40471/what-are-the-differences-between-a-hashmap-and-a-hashtable-in-java","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>What are the differences between a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\" rel=\"noreferrer\"><code>HashMap</code></a> and a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Hashtable.html\" rel=\"noreferrer\"><code>Hashtable</code></a> in Java?</p>\n\n<p>Which is more efficient for non-threaded applications?</p>\n"},{"tags":["java","arrays","arraylist","type-conversion"],"comments":[{"owner":{"reputation":1017,"user_id":601362,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7dbcace56bbe82f6aec2ef93e4e81a00?s=128&d=identicon&r=PG","display_name":"MarekM","link":"https://stackoverflow.com/users/601362/marekm"},"edited":false,"score":55,"creation_date":1491913094,"post_id":157944,"comment_id":73754469,"content_license":"CC BY-SA 3.0","body":"In Java9 --&gt;  List&lt;String&gt; list = List.of(âHelloâ, âWorldâ, âfromâ, âJavaâ);"},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"reply_to_user":{"reputation":1017,"user_id":601362,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7dbcace56bbe82f6aec2ef93e4e81a00?s=128&d=identicon&r=PG","display_name":"MarekM","link":"https://stackoverflow.com/users/601362/marekm"},"edited":false,"score":23,"creation_date":1507789704,"post_id":157944,"comment_id":80352613,"content_license":"CC BY-SA 3.0","body":"@MarekM This answer is wrong, as this doesn&#39;t return an <code>ArrayList</code>. The Poster asked specifically for that."},{"owner":{"reputation":1017,"user_id":601362,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7dbcace56bbe82f6aec2ef93e4e81a00?s=128&d=identicon&r=PG","display_name":"MarekM","link":"https://stackoverflow.com/users/601362/marekm"},"edited":false,"score":5,"creation_date":1508242161,"post_id":157944,"comment_id":80525780,"content_license":"CC BY-SA 3.0","body":"I think he didn&#39;t mine using List interface, because it is best practice. But if you want here is - new ArrayList&lt;&gt;(List.of(âHelloâ, âWorldâ, âfromâ, âJavaâ));"},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":16,"creation_date":1533329990,"post_id":157944,"comment_id":90323281,"content_license":"CC BY-SA 4.0","body":"The point is not about using the interface, the point is  that in your solution, the returned list is unmodifiable. That might be more of a problem, and a reason why he asked for an ArrayList"}],"answers":[{"comments":[{"owner":{"reputation":5521,"user_id":8434,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2524d041536b1535d33c68ffa3c3ab12?s=128&d=identicon&r=PG","display_name":"Calum","link":"https://stackoverflow.com/users/8434/calum"},"edited":false,"score":382,"creation_date":1222872107,"post_id":157950,"comment_id":48405,"content_license":"CC BY-SA 2.5","body":"Yep. And in the (most common) case where you just want a list, the <code>new ArrayList</code> call is unecessary as well."},{"owner":{"reputation":10824,"user_id":2352432,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/034be0844072773b847cdddac9b09c0a?s=128&d=identicon&r=PG","display_name":"Pool","link":"https://stackoverflow.com/users/2352432/pool"},"reply_to_user":{"reputation":1027,"user_id":452097,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/20ad2fe972d170e8a3f7d934ab85e798?s=128&d=identicon&r=PG","display_name":"Luron","link":"https://stackoverflow.com/users/452097/luron"},"edited":false,"score":150,"creation_date":1309360700,"post_id":157950,"comment_id":7678805,"content_license":"CC BY-SA 3.0","body":"@Luron - just use <code>List&lt;ClassName&gt; list = Arrays.asList(array)</code>"},{"owner":{"reputation":6328,"user_id":561690,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/b086b4bae811b9be7f62d8d11a29c0be?s=128&d=identicon&r=PG","display_name":"Code Jockey","link":"https://stackoverflow.com/users/561690/code-jockey"},"reply_to_user":{"reputation":5521,"user_id":8434,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2524d041536b1535d33c68ffa3c3ab12?s=128&d=identicon&r=PG","display_name":"Calum","link":"https://stackoverflow.com/users/8434/calum"},"edited":false,"score":258,"creation_date":1317063894,"post_id":157950,"comment_id":9163963,"content_license":"CC BY-SA 3.0","body":"@Calum and @Pool - as noted below in Alex Miller&#39;s answer, using <code>Arrays.asList(array)</code> without passing it into a new <code>ArrayList</code> object will fix the size of the list. One of the more common reasons to use an <code>ArrayList</code> is to be able to dynamically change its size, and your suggestion would prevent this."},{"owner":{"reputation":2199,"user_id":1699769,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6008a61ce87e9f69d6ed395cdf9b7987?s=128&d=identicon&r=PG","display_name":"markbaldy","link":"https://stackoverflow.com/users/1699769/markbaldy"},"edited":false,"score":14,"creation_date":1353648527,"post_id":157950,"comment_id":18514294,"content_license":"CC BY-SA 3.0","body":"I&#39;d like to point out that the new ArrayList&lt;Element&gt;(...) part is necessary if you want to perform mutative (like remove) operations with an iterator."},{"owner":{"reputation":703,"user_id":694000,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/d6dade536c4c6909132884297c8079fd?s=128&d=identicon&r=PG","display_name":"Adam","link":"https://stackoverflow.com/users/694000/adam"},"edited":false,"score":135,"creation_date":1358911733,"post_id":157950,"comment_id":20161044,"content_license":"CC BY-SA 3.0","body":"Arrays.asList() is a horrible function, and you should never just use its return value as is. It breaks the List template, so always use it in the form indicated here, even if it does seem redundant. Good answer."},{"owner":{"user_type":"does_not_exist","display_name":"user3458"},"edited":false,"score":16,"creation_date":1361375285,"post_id":157950,"comment_id":21041949,"content_license":"CC BY-SA 3.0","body":"A caveat: I just run into a misbehavior of Java 6: when Element is a primitive (e.g. the array is int[]), asList creates List&lt;int[]&gt; ."},{"owner":{"reputation":16327,"user_id":1235867,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/1f2891fef756bf043d9b576af26bc021?s=128&d=identicon&r=PG","display_name":"lbalazscs","link":"https://stackoverflow.com/users/1235867/lbalazscs"},"reply_to_user":{"reputation":703,"user_id":694000,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/d6dade536c4c6909132884297c8079fd?s=128&d=identicon&r=PG","display_name":"Adam","link":"https://stackoverflow.com/users/694000/adam"},"edited":false,"score":16,"creation_date":1361481199,"post_id":157950,"comment_id":21091144,"content_license":"CC BY-SA 3.0","body":"@Adam <code>Arrays.asList()</code> is a very useful method when you want a list backed by a specific array. For example <code>Collections.shuffle(Arrays.asList(myarray))</code> shuffles the <i>original</i> array."},{"owner":{"reputation":703,"user_id":694000,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/d6dade536c4c6909132884297c8079fd?s=128&d=identicon&r=PG","display_name":"Adam","link":"https://stackoverflow.com/users/694000/adam"},"reply_to_user":{"reputation":16327,"user_id":1235867,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/1f2891fef756bf043d9b576af26bc021?s=128&d=identicon&r=PG","display_name":"lbalazscs","link":"https://stackoverflow.com/users/1235867/lbalazscs"},"edited":false,"score":5,"creation_date":1361509681,"post_id":157950,"comment_id":21099583,"content_license":"CC BY-SA 3.0","body":"@lbalazscs true, but I would say that&#39;s pretty close to a hack (even if the shuffle method was intended to be used that way), because you&#39;re basically tricking it into thinking it&#39;s dealing with a List when it&#39;s not. Handy, but I still say it&#39;s a horrible function. My argument is basically that the asList() method is misleading because it looks like it returns a List representation of the given array, when in fact it returns an only-partially-implemented List representation."},{"owner":{"reputation":16327,"user_id":1235867,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/1f2891fef756bf043d9b576af26bc021?s=128&d=identicon&r=PG","display_name":"lbalazscs","link":"https://stackoverflow.com/users/1235867/lbalazscs"},"reply_to_user":{"reputation":703,"user_id":694000,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/d6dade536c4c6909132884297c8079fd?s=128&d=identicon&r=PG","display_name":"Adam","link":"https://stackoverflow.com/users/694000/adam"},"edited":false,"score":87,"creation_date":1361526069,"post_id":157950,"comment_id":21105600,"content_license":"CC BY-SA 3.0","body":"@Adam Please study the javadoc for java.util.List. The contract for add allows them to throw an UnsupportedOperationException. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28E%29\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a>  Admittedly, from an object-oriented perspective it is not very nice that many times you have to know the concrete implementation in order to use a collection - this was a pragmatic design choice in order to keep the framework simple."},{"owner":{"reputation":1513,"user_id":666583,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0183a50288bea023fd56b6ff59dd86c9?s=128&d=identicon&r=PG&f=1","display_name":"AndrewF","link":"https://stackoverflow.com/users/666583/andrewf"},"edited":false,"score":8,"creation_date":1363155525,"post_id":157950,"comment_id":21733418,"content_license":"CC BY-SA 3.0","body":"@Arkadiy It is not a misbeavior that <code>Arrays.asList(a).get(0) == a</code> when <code>a</code> is an <code>int[]</code>. This is because of how the <code>asList(Object...)</code> varargs resolve. An object of type <code>int[]</code> is an <code>Object</code>, not an <code>Object[]</code>, so <code>Arrays.asList</code> is being passed an array of <code>Object</code> with one element: an array of <code>int</code>."},{"owner":{"user_type":"does_not_exist","display_name":"user3458"},"reply_to_user":{"reputation":1513,"user_id":666583,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0183a50288bea023fd56b6ff59dd86c9?s=128&d=identicon&r=PG&f=1","display_name":"AndrewF","link":"https://stackoverflow.com/users/666583/andrewf"},"edited":false,"score":4,"creation_date":1363355877,"post_id":157950,"comment_id":21830645,"content_license":"CC BY-SA 3.0","body":"@AndrewF I understand why this happens. It&#39;s just breaking DWIM for me, is all."},{"owner":{"reputation":7579,"user_id":1119997,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/4a485e339c4de35684dfe31dc758041e?s=128&d=identicon&r=PG","display_name":"tuxdna","link":"https://stackoverflow.com/users/1119997/tuxdna"},"edited":false,"score":6,"creation_date":1373267344,"post_id":157950,"comment_id":25476291,"content_license":"CC BY-SA 3.0","body":"This doesn&#39;t compile when array is of type <code>int[]</code> and the equivalent usecase is like so: <code>List&lt;Integer&gt;  intList = new ArrayList&lt;Integer&gt;(Arrays.asList(intArray));</code>"},{"owner":{"reputation":26548,"user_id":281545,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG","display_name":"Mr_and_Mrs_D","link":"https://stackoverflow.com/users/281545/mr-and-mrs-d"},"edited":false,"score":4,"creation_date":1397087742,"post_id":157950,"comment_id":35085400,"content_license":"CC BY-SA 3.0","body":"Arrays.asList(array).remove(key) will throw:<code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException \tat java.util.AbstractList.remove(AbstractList.java:161) \tat ... </code> -  dunno how <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html\" rel=\"nofollow noreferrer\"><code>AbstractList</code></a> got in there but you do not want it around when calling remove"},{"owner":{"reputation":10129,"user_id":253938,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f56facf7921f4e2fbc9a38ca609cbf6b?s=128&d=identicon&r=PG","display_name":"RenniePet","link":"https://stackoverflow.com/users/253938/renniepet"},"edited":false,"score":4,"creation_date":1425115464,"post_id":157950,"comment_id":45837318,"content_license":"CC BY-SA 3.0","body":"For the case when the array is of a primitive type like int[] see this question and answers: <a href=\"http://stackoverflow.com/questions/1073919/how-to-convert-int-into-listinteger-in-java\" title=\"how to convert int into listinteger in java\">stackoverflow.com/questions/1073919/&hellip;</a>"},{"owner":{"reputation":1472,"user_id":3281476,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/RaC33.jpg?s=128&g=1","display_name":"Srini","link":"https://stackoverflow.com/users/3281476/srini"},"edited":false,"score":4,"creation_date":1432735771,"post_id":157950,"comment_id":49048307,"content_license":"CC BY-SA 3.0","body":"On a side note, <code>List&lt;Element&gt; list = new ArrayList&lt;&gt;(Arrays.asList(array));</code> would&#39;ve sufficed. The <a href=\"http://stackoverflow.com/questions/4166966/what-is-the-point-of-the-diamond-operator-in-java-7\">diamond</a> operator will do the type inference for you."},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"reply_to_user":{"reputation":26548,"user_id":281545,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG","display_name":"Mr_and_Mrs_D","link":"https://stackoverflow.com/users/281545/mr-and-mrs-d"},"edited":false,"score":1,"creation_date":1443666898,"post_id":157950,"comment_id":53588013,"content_license":"CC BY-SA 3.0","body":"@Mr_and_Mrs_D Probably because the list returned by <code>Arrays.asList</code> is of a class that inherits from <code>AbstractList</code> and doesn&#39;t implement <code>remove</code> (which is because you can&#39;t remove stuff from an array)"},{"owner":{"reputation":5265,"user_id":431698,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/59b288f9d5793f1c114f30837ae0ec44?s=128&d=identicon&r=PG","display_name":"Jingguo Yao","link":"https://stackoverflow.com/users/431698/jingguo-yao"},"edited":false,"score":4,"creation_date":1483088937,"post_id":157950,"comment_id":69988872,"content_license":"CC BY-SA 3.0","body":"This does not work for Java 1.8. In Java 1.8, <code>Arrays.asList(array)</code> will create a list whose only element is <code>array</code>. The resulted list does not contain <code>array</code>&#39;s elements."},{"owner":{"reputation":732,"user_id":2302884,"user_type":"registered","profile_image":"https://i.stack.imgur.com/eNF0u.jpg?s=128&g=1","display_name":"muzzlator","link":"https://stackoverflow.com/users/2302884/muzzlator"},"edited":false,"score":1,"creation_date":1511917803,"post_id":157950,"comment_id":82044067,"content_license":"CC BY-SA 3.0","body":"Something I just found out (for open jdk at least) is that Arrays.asList(array) creates a lightweight list wrapper around the array but the corresponding toArray call creates a new copy of the array. The call to new ArrayList(Collection) calls this toArray method and then creates another defensive copy, which means one additional array allocation. You can avoid all these by using Lists.newArrayList in guava or create new ArrayList(array.length) and then copy all the elements across."},{"owner":{"reputation":1154,"user_id":9224219,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9ff7270b7f8573e9f24f0eadd0a7b431?s=128&d=identicon&r=PG&f=1","display_name":"Datz","link":"https://stackoverflow.com/users/9224219/datz"},"edited":false,"score":4,"creation_date":1522133139,"post_id":157950,"comment_id":86016019,"content_license":"CC BY-SA 3.0","body":"With Java 9 you should use <code>java.util.List.of(array)</code> which gives you an immutable list (instance of internal class <code>AbstractImmutableList</code>). You can use <code>new ArrayList&lt;&gt;(List.of(array))</code> if you need a modifiable list. see <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"nofollow noreferrer\">List</a>"}],"owner":{"reputation":52241,"user_id":22850,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/955fd033a0583419b2e2b7d2515e2e92?s=128&d=identicon&r=PG","display_name":"Tom","link":"https://stackoverflow.com/users/22850/tom"},"comment_count":19,"is_accepted":true,"score":4761,"last_activity_date":1581990810,"last_edit_date":1581990810,"creation_date":1222871952,"answer_id":157950,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<pre><code>new ArrayList&lt;&gt;(Arrays.asList(array));\n</code></pre>\n"},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"comment_count":0,"is_accepted":false,"score":216,"last_activity_date":1487005478,"last_edit_date":1487005478,"creation_date":1222872046,"answer_id":157956,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<pre><code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));\n</code></pre>\n\n<p>Make sure that <code>myArray</code> is the same type as <code>T</code>. You'll get a compiler error if you try to create a <code>List&lt;Integer&gt;</code> from an array of <code>int</code>, for example.</p>\n"},{"comments":[{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"edited":false,"score":8,"creation_date":1222872398,"post_id":157985,"comment_id":48422,"content_license":"CC BY-SA 2.5","body":"That will be backed by the original input array, which is why you (probably) want to wrap it in a new ArrayList."},{"owner":{"reputation":15821,"user_id":5382,"user_type":"registered","profile_image":"https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1","display_name":"Mikezx6r","link":"https://stackoverflow.com/users/5382/mikezx6r"},"edited":false,"score":16,"creation_date":1222872423,"post_id":157985,"comment_id":48423,"content_license":"CC BY-SA 2.5","body":"Be careful with this solution. If you look, Arrays ISN&#39;T returning a true java.util.ArrayList. It&#39;s returning an inner class that implements the required methods, but you cannot change the memebers in the list. It&#39;s merely a wrapper around an array."},{"owner":{"reputation":13693,"user_id":80701,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/d9391c16473dad5e699e1ca91b874663?s=128&d=identicon&r=PG","display_name":"monksy","link":"https://stackoverflow.com/users/80701/monksy"},"edited":false,"score":1,"creation_date":1255128509,"post_id":157985,"comment_id":1403531,"content_license":"CC BY-SA 2.5","body":"You can cast the List&lt;Element&gt; item to an ArrayList&lt;Element&gt;"},{"owner":{"reputation":27490,"user_id":85421,"user_type":"registered","profile_image":"https://i.stack.imgur.com/kKvXH.gif?s=128&g=1","display_name":"user85421","link":"https://stackoverflow.com/users/85421/user85421"},"edited":false,"score":12,"creation_date":1259932240,"post_id":157985,"comment_id":1740594,"content_license":"CC BY-SA 2.5","body":"@Mikezx6r: little <b>correction</b>: it&#39;s a fixed-size list. You can change the elements of the list (<code>set</code> method), you cannot change the size of the list (not <code>add</code> or <code>remove</code> elements)!"},{"owner":{"reputation":1093,"user_id":244365,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/4143c51b65350247de84a33eb8a9b46c?s=128&d=identicon&r=PG","display_name":"PaulMurrayCbr","link":"https://stackoverflow.com/users/244365/paulmurraycbr"},"edited":false,"score":1,"creation_date":1367745818,"post_id":157985,"comment_id":23480300,"content_license":"CC BY-SA 3.0","body":"Yes, with the caveat that it depends on what you want to do with the list. It&#39;s worth notng that if the OP simply wants to iterate through the elements, the array doesn&#39;t have to be converted at all."},{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"reply_to_user":{"reputation":13693,"user_id":80701,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/d9391c16473dad5e699e1ca91b874663?s=128&d=identicon&r=PG","display_name":"monksy","link":"https://stackoverflow.com/users/80701/monksy"},"edited":false,"score":1,"creation_date":1424624726,"post_id":157985,"comment_id":45616678,"content_license":"CC BY-SA 3.0","body":"@monksy No, you can&#39;t. As was said, it is a different kind of <code>ArrayList</code>."},{"owner":{"reputation":5265,"user_id":431698,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/59b288f9d5793f1c114f30837ae0ec44?s=128&d=identicon&r=PG","display_name":"Jingguo Yao","link":"https://stackoverflow.com/users/431698/jingguo-yao"},"edited":false,"score":0,"creation_date":1454569535,"post_id":157985,"comment_id":58105752,"content_license":"CC BY-SA 3.0","body":"This does not work if array element is of primitive type in Java 8. For details, see <a href=\"http://stackoverflow.com/q/2607289/431698\">stackoverflow.com/q/2607289/431698</a>"}],"owner":{"reputation":98019,"user_id":18511,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/c621039e41aef415ad25054da3bf3f9a?s=128&d=identicon&r=PG","display_name":"Kip","link":"https://stackoverflow.com/users/18511/kip"},"comment_count":7,"is_accepted":false,"score":86,"last_activity_date":1222872302,"creation_date":1222872302,"answer_id":157985,"question_id":157944,"content_license":"CC BY-SA 2.5","body":"<p>You probably just need a List, not an ArrayList.  In that case you can just do:</p>\n\n<pre><code>List&lt;Element&gt; arraylist = Arrays.asList(array);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":905,"user_id":713495,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/549ee68ce18db501ca31dbf646ffedc4?s=128&d=identicon&r=PG","display_name":"damned","link":"https://stackoverflow.com/users/713495/damned"},"edited":false,"score":7,"creation_date":1337739441,"post_id":158269,"comment_id":13911187,"content_license":"CC BY-SA 3.0","body":"What is the time complexity of both operations? I mean with and without using explicit arraylist construction."},{"owner":{"reputation":64779,"user_id":7671,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/4b6b8c8935300db9089a9277d7e76a88?s=128&d=identicon&r=PG","display_name":"Alex Miller","link":"https://stackoverflow.com/users/7671/alex-miller"},"edited":false,"score":37,"creation_date":1337778937,"post_id":158269,"comment_id":13923405,"content_license":"CC BY-SA 3.0","body":"Arrays.asList() merely creates an ArrayList by wrapping the existing array so it is O(1)."},{"owner":{"reputation":64779,"user_id":7671,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/4b6b8c8935300db9089a9277d7e76a88?s=128&d=identicon&r=PG","display_name":"Alex Miller","link":"https://stackoverflow.com/users/7671/alex-miller"},"edited":false,"score":29,"creation_date":1337779274,"post_id":158269,"comment_id":13923571,"content_license":"CC BY-SA 3.0","body":"Wrapping in a new ArrayList() will cause all elements of the fixed size list to be iterated and added to the new ArrayList so is O(n)."},{"owner":{"reputation":1997,"user_id":867620,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/85a3d947035a6a73b823b6fee2ccb933?s=128&d=identicon&r=PG","display_name":"sethro","link":"https://stackoverflow.com/users/867620/sethro"},"edited":false,"score":9,"creation_date":1352921608,"post_id":158269,"comment_id":18282121,"content_license":"CC BY-SA 3.0","body":"the implementation of List returned by asList() does not implement several of List&#39;s methods (like add(), remove(), clear(), etc...) which explains the UnsupportedOperationException. definitely a caveat..."},{"owner":{"reputation":40850,"user_id":3093,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/98e69195c08f2c104c37137e33b9fc59?s=128&d=identicon&r=PG","display_name":"Dave L.","link":"https://stackoverflow.com/users/3093/dave-l"},"edited":false,"score":11,"creation_date":1466795804,"post_id":158269,"comment_id":63483020,"content_license":"CC BY-SA 3.0","body":"When the question asks for &quot;an object of the ArrayList class&quot; I think it&#39;s reasonable to assume the class it refers to is <code>java.util.ArrayList</code>.  Arrays.asList actually returns a <code>java.util.Arrays.ArrayList</code> which is not an <code>instanceof</code> the other class.   So a third caveat is that if you try to use it in a context requiring the above it will not work."},{"owner":{"reputation":2517,"user_id":5908433,"user_type":"registered","accept_rate":100,"profile_image":"https://lh3.googleusercontent.com/-Z7z3juhMtXY/AAAAAAAAAAI/AAAAAAAAABw/Ua09V1L6sYc/photo.jpg?sz=128","display_name":"Dmitriy Fialkovskiy","link":"https://stackoverflow.com/users/5908433/dmitriy-fialkovskiy"},"edited":false,"score":2,"creation_date":1565004613,"post_id":158269,"comment_id":101202199,"content_license":"CC BY-SA 4.0","body":"For those curious and frustrated like I was regarding first caveat about fixed size <code>List</code>: If you drop down to <code>Arrays.asList</code> implementation you&#39;ll see that it returns <code>new ArrayList&lt;&gt;(a)</code>. Might seem that it&#39;s an ordinary <code>ArrayList</code>. But don&#39;t make hasty conclusions - if you scroll just a lil bit down in <code>Arrays.java</code> you&#39;ll see a <code>private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess, java.io.Serializable</code>. This is just an internal class which is a collection, but <b>NOT a true</b> <code>java.util.ArrayList</code>. Just the same class names."}],"owner":{"reputation":64779,"user_id":7671,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/4b6b8c8935300db9089a9277d7e76a88?s=128&d=identicon&r=PG","display_name":"Alex Miller","link":"https://stackoverflow.com/users/7671/alex-miller"},"comment_count":6,"is_accepted":false,"score":947,"last_activity_date":1415370122,"last_edit_date":1415370122,"creation_date":1222875546,"answer_id":158269,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Given:</p>\n\n<pre><code>Element[] array = new Element[] { new Element(1), new Element(2), new Element(3) };\n</code></pre>\n\n<p>The simplest answer is to do:</p>\n\n<pre><code>List&lt;Element&gt; list = Arrays.asList(array);\n</code></pre>\n\n<p>This will work fine.  But some caveats:</p>\n\n<ol>\n<li>The list returned from asList has <strong>fixed size</strong>.  So, if you want to be able to add or remove elements from the returned list in your code, you'll need to wrap it in a new <code>ArrayList</code>.  Otherwise you'll get an <code>UnsupportedOperationException</code>.</li>\n<li>The list returned from <code>asList()</code> is backed by the original array.  If you modify the original array, the list will be modified as well.  This may be surprising. </li>\n</ol>\n"},{"comments":[{"owner":{"reputation":14404,"user_id":755804,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/f26c355432581b8b1fc56f8585732d1a?s=128&d=identicon&r=PG","display_name":"18446744073709551615","link":"https://stackoverflow.com/users/755804/18446744073709551615"},"edited":false,"score":8,"creation_date":1468337361,"post_id":6439078,"comment_id":64080829,"content_license":"CC BY-SA 3.0","body":"In particular, <code>List&lt;String&gt; a = Arrays.asList(&quot;first&quot;,&quot;second&quot;,&quot;third&quot;)</code>"}],"owner":{"reputation":58271,"user_id":60518,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/c5060835472688a132ffeb67a05803c1?s=128&d=identicon&r=PG","display_name":"Tim B&#252;the","link":"https://stackoverflow.com/users/60518/tim-b%c3%bcthe"},"comment_count":1,"is_accepted":false,"score":241,"last_activity_date":1475166334,"last_edit_date":1475166334,"creation_date":1308742223,"answer_id":6439078,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Since this question is pretty old, it surprises me that nobody suggested the simplest form yet:</p>\n\n<pre><code>List&lt;Element&gt; arraylist = Arrays.asList(new Element(1), new Element(2), new Element(3));\n</code></pre>\n\n<p>As of Java 5, <code>Arrays.asList()</code> takes a varargs parameter and you don't have to construct the array explicitly.</p>\n"},{"owner":{"reputation":11781,"user_id":280783,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/4d69fc624c9269c11b835ad1481dd794?s=128&d=identicon&r=PG","display_name":"Peter Tseng","link":"https://stackoverflow.com/users/280783/peter-tseng"},"comment_count":0,"is_accepted":false,"score":106,"last_activity_date":1333495732,"last_edit_date":1333495732,"creation_date":1333495255,"answer_id":10002863,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Another way (although essentially equivalent to the <code>new ArrayList(Arrays.asList(array))</code> solution performance-wise:</p>\n\n<pre><code>Collections.addAll(arraylist, array);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":51155,"user_id":697449,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/0d825a4fb8f4417045815f4c921aa0cc?s=128&d=identicon&r=PG","display_name":"Paul Bellora","link":"https://stackoverflow.com/users/697449/paul-bellora"},"edited":false,"score":29,"creation_date":1357786447,"post_id":13421319,"comment_id":19774826,"content_license":"CC BY-SA 3.0","body":"+1 But note that the <code>List</code> returned by <code>Arrays.asList</code> is mutable in that you can still <code>set</code> elements - it just isn&#39;t resizable. For immutable lists without Guava you might mention <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList&#40;java.util.List&#41;\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableList</code></a>."},{"owner":{"reputation":4998,"user_id":2088822,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/c96b4e7fa4e410b2df9513f79cffd0fe?s=128&d=identicon&r=PG","display_name":"afsantos","link":"https://stackoverflow.com/users/2088822/afsantos"},"edited":false,"score":2,"creation_date":1368711691,"post_id":13421319,"comment_id":23841499,"content_license":"CC BY-SA 3.0","body":"@haylem In your section <i>For Educational Purposes: The Good ol&#39; Manual Way</i>, your <code>arrayToList</code> for Java 1.5+ is incorrect. You are instanciating lists of <code>String</code>, and trying to retrieve strings from the given array, instead of using the generic parameter type, <code>T</code>. Other than that, good answer, and +1 for being the only one including the manual way."},{"owner":{"reputation":40481,"user_id":581205,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1","display_name":"maaartinus","link":"https://stackoverflow.com/users/581205/maaartinus"},"edited":false,"score":1,"creation_date":1574156127,"post_id":13421319,"comment_id":104121150,"content_license":"CC BY-SA 4.0","body":"Id&#39; rename your section &quot;If You Can&#39;t... / For an Immutable List&quot; to &quot;For an unmodifiable List&quot; as it can be mutated by later changes to the wrapped array. It&#39;s still <code>O(1)</code>, but for immutability you have to make a copy, e.g., by <code>Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(array)))</code>."}],"owner":{"reputation":21345,"user_id":453590,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/fbefde65228a384a59eb49e8a46c4e7b?s=128&d=identicon&r=PG","display_name":"haylem","link":"https://stackoverflow.com/users/453590/haylem"},"comment_count":3,"is_accepted":false,"score":363,"last_activity_date":1481648531,"last_edit_date":1481648531,"creation_date":1353086201,"answer_id":13421319,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p><em><sup>(old thread, but just 2 cents as none mention Guava or other libs and some other details)</sup></em></p>\n\n<h1>If You Can, Use Guava</h1>\n\n<p>It's worth pointing out the Guava way, which greatly simplifies these shenanigans:</p>\n\n<h2>Usage</h2>\n\n<h3>For an Immutable List</h3>\n\n<p>Use the <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableList.java\" rel=\"noreferrer\"><code>ImmutableList</code></a> class and its <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableList.java#L101\" rel=\"noreferrer\"><code>of()</code></a> and <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableList.java#L225\" rel=\"noreferrer\"><code>copyOf()</code></a> factory methods <sup>(elements can't be null)</sup>:</p>\n\n<pre><code>List&lt;String&gt; il = ImmutableList.of(\"string\", \"elements\");  // from varargs\nList&lt;String&gt; il = ImmutableList.copyOf(aStringArray);      // from array\n</code></pre>\n\n<h3>For A Mutable List</h3>\n\n<p>Use the <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Lists.java\" rel=\"noreferrer\"><code>Lists</code></a> class and its <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Lists.java#L87\" rel=\"noreferrer\"><code>newArrayList()</code></a> factory methods:</p>\n\n<pre><code>List&lt;String&gt; l1 = Lists.newArrayList(anotherListOrCollection);    // from collection\nList&lt;String&gt; l2 = Lists.newArrayList(aStringArray);               // from array\nList&lt;String&gt; l3 = Lists.newArrayList(\"or\", \"string\", \"elements\"); // from varargs\n</code></pre>\n\n<p>Please also note the similar methods for other data structures in other classes, for instance in <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/Sets.java\" rel=\"noreferrer\"><code>Sets</code></a>.</p>\n\n<h2><a href=\"http://code.google.com/p/guava-libraries/wiki/GuavaExplained\" rel=\"noreferrer\">Why Guava?</a></h2>\n\n<p>The main attraction could be to reduce the clutter due to generics for type-safety, as the use of the Guava <a href=\"http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Static_constructors\" rel=\"noreferrer\">factory methods</a> allow the types to be inferred most of the time. However, this argument holds less water since Java 7 arrived with the new diamond operator.</p>\n\n<p>But it's not the only reason (and Java 7 isn't everywhere yet): the shorthand syntax is also very handy, and the methods initializers, as seen above, allow to write more expressive code. You do in one Guava call what takes 2 with the current Java Collections.</p>\n\n<hr>\n\n<h1>If You Can't...</h1>\n\n<h2>For an Immutable List</h2>\n\n<p>Use the JDK's <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"noreferrer\"><code>Arrays</code></a> class and its <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29\" rel=\"noreferrer\"><code>asList()</code></a> factory method, wrapped with a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29\" rel=\"noreferrer\"><code>Collections.unmodifiableList()</code></a>:</p>\n\n<pre><code>List&lt;String&gt; l1 = Collections.unmodifiableList(Arrays.asList(anArrayOfElements));\nList&lt;String&gt; l2 = Collections.unmodifiableList(Arrays.asList(\"element1\", \"element2\"));\n</code></pre>\n\n<p>Note that the returned type for <code>asList()</code> is a <code>List</code> using a concrete <code>ArrayList</code> implementation, but <strong>it is NOT</strong> <code>java.util.ArrayList</code>. It's an inner type, which emulates an <code>ArrayList</code> but actually directly references the passed array and makes it \"write through\" (modifications are reflected in the array).</p>\n\n<p>It forbids modifications through some of the <code>List</code> API's methods by way of simply extending an <code>AbstractList</code> (so, adding or removing elements is unsupported), however it allows calls to <code>set()</code> to override elements. Thus this list isn't truly immutable and a call to <code>asList()</code> should be wrapped with <code>Collections.unmodifiableList()</code>.</p>\n\n<p>See the next step if you need a mutable list.</p>\n\n<h2>For a Mutable List</h2>\n\n<p>Same as above, but wrapped with an actual <code>java.util.ArrayList</code>:</p>\n\n<pre><code>List&lt;String&gt; l1  = new ArrayList&lt;String&gt;(Arrays.asList(array));    // Java 1.5 to 1.6\nList&lt;String&gt; l1b = new ArrayList&lt;&gt;(Arrays.asList(array));          // Java 1.7+\nList&lt;String&gt; l2  = new ArrayList&lt;String&gt;(Arrays.asList(\"a\", \"b\")); // Java 1.5 to 1.6\nList&lt;String&gt; l2b = new ArrayList&lt;&gt;(Arrays.asList(\"a\", \"b\"));       // Java 1.7+\n</code></pre>\n\n<hr>\n\n<h1>For Educational Purposes: The Good ol' Manual Way</h1>\n\n<pre><code>// for Java 1.5+\nstatic &lt;T&gt; List&lt;T&gt; arrayToList(final T[] array) {\n  final List&lt;T&gt; l = new ArrayList&lt;T&gt;(array.length);\n\n  for (final T s : array) {\n    l.add(s);\n  }\n  return (l);\n}\n\n// for Java &lt; 1.5 (no generics, no compile-time type-safety, boo!)\nstatic List arrayToList(final Object[] array) {\n  final List l = new ArrayList(array.length);\n\n  for (int i = 0; i &lt; array.length; i++) {\n    l.add(array[i]);\n  }\n  return (l);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2420,"user_id":410342,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG","display_name":"Shotgun Ninja","link":"https://stackoverflow.com/users/410342/shotgun-ninja"},"edited":false,"score":12,"creation_date":1428506268,"post_id":19191359,"comment_id":47192470,"content_license":"CC BY-SA 3.0","body":"This doesn&#39;t answer the original question. The OP already has the elements in a container, which we can assume has random contents. This approach depends on the list needing the exact same elements every time this code is run. Also, the overuse of the static keyword is bad practice, and there are many other ways of doing this in practice which involve less boilerplate code."}],"owner":{"reputation":12457,"user_id":2798291,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/3564949ed84a4fa80017829e43b0d588?s=128&d=identicon&r=PG&f=1","display_name":"TwoThe","link":"https://stackoverflow.com/users/2798291/twothe"},"comment_count":1,"is_accepted":false,"score":-22,"last_activity_date":1380968260,"last_edit_date":1380968260,"creation_date":1380923404,"answer_id":19191359,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>There is another option if your goal is to generate a fixed list at runtime, which is as simple as it is effective:</p>\n\n<pre><code>static final ArrayList&lt;Element&gt; myList = generateMyList();\n\nprivate static ArrayList&lt;Element&gt; generateMyList() {\n  final ArrayList&lt;Element&gt; result = new ArrayList&lt;&gt;();\n  result.add(new Element(1));\n  result.add(new Element(2));\n  result.add(new Element(3));\n  result.add(new Element(4));\n  return result;\n}\n</code></pre>\n\n<p><br>\nThe benefit of using this pattern is, that the list is for once generated very intuitively and therefore is very easy to modify even with large lists or complex initialization, while on the other hand always contains the same Elements on every actual run of the program (unless you change it at a later point of course).</p>\n"},{"owner":{"reputation":13353,"user_id":874275,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/740c1b9fae33eb899dc2770eb4170a73?s=128&d=identicon&r=PG","display_name":"Bohdan","link":"https://stackoverflow.com/users/874275/bohdan"},"comment_count":0,"is_accepted":false,"score":32,"last_activity_date":1389074685,"creation_date":1389074685,"answer_id":20964978,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<pre><code>// Guava\nimport com.google.common.collect.ListsLists\n...\nList&lt;String&gt; list = Lists.newArrayList(aStringArray); \n</code></pre>\n"},{"comments":[{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":1,"creation_date":1424624605,"post_id":21204451,"comment_id":45616643,"content_license":"CC BY-SA 3.0","body":"I fail to see the fundamental difference between your loop at the end of the answer and the <code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));</code> part which you discourage to use. Both do quite the same and have the same complexity."},{"owner":{"reputation":6549,"user_id":968988,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/0073b7f7a38dd1bce045793606c7a403?s=128&d=identicon&r=PG","display_name":"Nicolas Zozol","link":"https://stackoverflow.com/users/968988/nicolas-zozol"},"reply_to_user":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":0,"creation_date":1424635177,"post_id":21204451,"comment_id":45620176,"content_license":"CC BY-SA 3.0","body":"The Collections one create a pointer at the beginning of the array. My loop create many pointers : one for each array member. So if the original array changes, my poiners are still directed toward the former values."},{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":1,"creation_date":1424642189,"post_id":21204451,"comment_id":45622435,"content_license":"CC BY-SA 3.0","body":"<code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));</code> does the same, it copies the <code>asList</code> to an <code>ArrayList</code>..."}],"owner":{"reputation":6549,"user_id":968988,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/0073b7f7a38dd1bce045793606c7a403?s=128&d=identicon&r=PG","display_name":"Nicolas Zozol","link":"https://stackoverflow.com/users/968988/nicolas-zozol"},"comment_count":3,"is_accepted":false,"score":45,"last_activity_date":1467228128,"last_edit_date":1467228128,"creation_date":1390050102,"answer_id":21204451,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>If you use :</p>\n\n<pre><code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));\n</code></pre>\n\n<p>you <strong>may</strong> create <strong>and fill</strong> two lists ! Filling twice a big list is exactly what you don't want to do because it will create another <code>Object[]</code> array each time the capacity needs to be extended.</p>\n\n<p>Fortunately the JDK implementation is fast and <code>Arrays.asList(a[])</code> is very well done. It create a kind of ArrayList named Arrays.ArrayList where the Object[] data points directly to the array.</p>\n\n<pre><code>// in Arrays\n@SafeVarargs\npublic static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n    return new ArrayList&lt;&gt;(a);\n}\n//still in Arrays, creating a private unseen class\nprivate static class ArrayList&lt;E&gt;\n\n    private final E[] a;    \n    ArrayList(E[] array) {\n        a = array; // you point to the previous array\n    }\n    ....\n}\n</code></pre>\n\n<p>The dangerous side is that <strong>if you change the initial array, you change the List !</strong> Are you sure you want that ? Maybe yes, maybe not.</p>\n\n<p>If not, the most understandable way is to do this :</p>\n\n<pre><code>ArrayList&lt;Element&gt; list = new ArrayList&lt;Element&gt;(myArray.length); // you know the initial capacity\nfor (Element element : myArray) {\n    list.add(element);\n}\n</code></pre>\n\n<p>Or as said @glglgl, you can create another independant ArrayList with :</p>\n\n<pre><code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));\n</code></pre>\n\n<p>I love to use <code>Collections</code>, <code>Arrays</code>, or Guava. But if it don't fit, or you don't feel it, just write another inelegant line instead.</p>\n"},{"comments":[{"owner":{"reputation":2598,"user_id":3529323,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/m3mE6.png?s=128&g=1","display_name":"bcsb1001","link":"https://stackoverflow.com/users/3529323/bcsb1001"},"edited":false,"score":8,"creation_date":1420055749,"post_id":27136414,"comment_id":43863635,"content_license":"CC BY-SA 3.0","body":"It&#39;s probably best not to be implementation-dependent, but <code>Collectors.toList()</code> actually returns an <code>ArrayList</code>."},{"owner":{"reputation":4327,"user_id":7098259,"user_type":"registered","profile_image":"https://i.stack.imgur.com/b6nWr.jpg?s=128&g=1","display_name":"Patrick Parker","link":"https://stackoverflow.com/users/7098259/patrick-parker"},"edited":false,"score":0,"creation_date":1479470397,"post_id":27136414,"comment_id":68582941,"content_license":"CC BY-SA 3.0","body":"incorrect use of Stream.of(...); that will create a one element stream. Use Arrays.stream instead"},{"owner":{"reputation":2885,"user_id":2619091,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/VZgSx.jpg?s=128&g=1","display_name":"yamilmedina","link":"https://stackoverflow.com/users/2619091/yamilmedina"},"edited":false,"score":0,"creation_date":1480542339,"post_id":27136414,"comment_id":69011362,"content_license":"CC BY-SA 3.0","body":"I don&#39;t think so, the 2 options are valid but the Arrays.stream is slightly &#39;better&#39; since you can create it with fixed size, using the overload method with &#39;start&#39;, &#39;end&#39; args. See also: <a href=\"http://stackoverflow.com/a/27888447/2619091\">stackoverflow.com/a/27888447/2619091</a>"}],"owner":{"reputation":2885,"user_id":2619091,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/VZgSx.jpg?s=128&g=1","display_name":"yamilmedina","link":"https://stackoverflow.com/users/2619091/yamilmedina"},"comment_count":3,"is_accepted":false,"score":72,"last_activity_date":1416948516,"creation_date":1416948516,"answer_id":27136414,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Another update, almost ending year 2014, you can do it with Java 8 too:</p>\n\n<pre><code>ArrayList&lt;Element&gt; arrayList = Stream.of(myArray).collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n\n<p>A few characters would be saved, if this could be just a <code>List</code> </p>\n\n<pre><code>List&lt;Element&gt; list = Stream.of(myArray).collect(Collectors.toList());\n</code></pre>\n"},{"owner":{"reputation":2144,"user_id":3012916,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0f457966b5c83df84dc968e7d779c674?s=128&d=identicon&r=PG","display_name":"nekperu15739","link":"https://stackoverflow.com/users/3012916/nekperu15739"},"comment_count":0,"is_accepted":false,"score":35,"last_activity_date":1431900445,"creation_date":1431900445,"answer_id":30292659,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>According with the question the answer using java 1.7 is:</p>\n\n<pre><code>ArrayList&lt;Element&gt; arraylist = new ArrayList&lt;Element&gt;(Arrays.&lt;Element&gt;asList(array));\n</code></pre>\n\n<p>However it's better always use the interface:</p>\n\n<pre><code>List&lt;Element&gt; arraylist = Arrays.&lt;Element&gt;asList(array);\n</code></pre>\n"},{"owner":{"reputation":13883,"user_id":3498950,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/fa49bc7b5d1a3d144ffcda8b447912e0?s=128&d=identicon&r=PG","display_name":"spencer.sm","link":"https://stackoverflow.com/users/3498950/spencer-sm"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1450297959,"creation_date":1450297959,"answer_id":34321584,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Another simple way is to add all elements from the array to a new ArrayList using a for-each loop.</p>\n\n<pre><code>ArrayList&lt;Element&gt; list = new ArrayList&lt;&gt;();\n\nfor(Element e : array)\n    list.add(e);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2925,"user_id":2557818,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/ae8bb86c9f66051637cb52d5de9826f7?s=128&d=identicon&r=PG","display_name":"Raja Anbazhagan","link":"https://stackoverflow.com/users/2557818/raja-anbazhagan"},"edited":false,"score":3,"creation_date":1549278503,"post_id":35239183,"comment_id":95832542,"content_license":"CC BY-SA 4.0","body":"As of <b>java 8</b>, <code>Collectors.toList()</code> will return an <code>ArrayList</code>. However this may differ in future versions on java.If you want a specific type of collection then use <code>Collectors.toCollection()</code> instead where you can specify which exact type of collection you would want to create."}],"owner":{"reputation":654,"user_id":1912860,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/3a7a2d6d569f020a61f455226dd58384?s=128&d=identicon&r=PG","display_name":"Vaseph","link":"https://stackoverflow.com/users/1912860/vaseph"},"comment_count":1,"is_accepted":false,"score":21,"last_activity_date":1454748981,"creation_date":1454748981,"answer_id":35239183,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>You also can do it with stream in Java 8.</p>\n\n<pre><code> List&lt;Element&gt; elements = Arrays.stream(array).collect(Collectors.toList()); \n</code></pre>\n"},{"owner":{"reputation":4963,"user_id":4501480,"user_type":"registered","accept_rate":55,"profile_image":"https://lh3.googleusercontent.com/-WM3Hs4WWMBY/AAAAAAAAAAI/AAAAAAAAAAA/u2L29rWnQH8/photo.jpg?sz=128","display_name":"Vikrant Kashyap","link":"https://stackoverflow.com/users/4501480/vikrant-kashyap"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1584089479,"last_edit_date":1584089479,"creation_date":1459320494,"answer_id":36301596,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<ol>\n<li><p>If we see the definition of <code>Arrays.asList()</code> method you will get something like this: </p>\n\n<pre><code> public static &lt;T&gt; List&lt;T&gt; asList(T... a) //varargs are of T type. \n</code></pre>\n\n<p>So, you might initialize <code>arraylist</code> like this: </p>\n\n<pre><code> List&lt;Element&gt; arraylist = Arrays.asList(new Element(1), new Element(2), new Element(3));\n</code></pre>\n\n<blockquote>\n  <p><strong>Note</strong> : each <code>new Element(int args)</code> will be treated as Individual Object and can be passed as a <code>var-args</code>.</p>\n</blockquote></li>\n<li><p>There might be another answer for this question too.<br>\nIf you see declaration for <code>java.util.Collections.addAll()</code> method you will get something like this:</p>\n\n<pre><code>public static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt; c, T... a);\n</code></pre>\n\n<p>So, this code is also useful to do so</p>\n\n<pre><code>Collections.addAll(arraylist, array);\n</code></pre></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":1498,"user_id":1554195,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b67f6a3639e7924c531053212048be5c?s=128&d=identicon&r=PG","display_name":"tquadrat","link":"https://stackoverflow.com/users/1554195/tquadrat"},"edited":false,"score":1,"creation_date":1562329876,"post_id":36679474,"comment_id":100350903,"content_license":"CC BY-SA 4.0","body":"List.of() will not return an instance of java.util.ArrayList, as requested in the original question. Therefore only the second option is a valid answer."}],"owner":{"reputation":38414,"user_id":1393484,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/251d2d8ab5721e399a715d7531471448?s=128&d=identicon&r=PG","display_name":"Ali Dehghani","link":"https://stackoverflow.com/users/1393484/ali-dehghani"},"comment_count":1,"is_accepted":false,"score":102,"last_activity_date":1532848758,"last_edit_date":1592644375,"creation_date":1460912315,"answer_id":36679474,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<h1>Java 9</h1>\n<p>In <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\">Java 9</a>, you can use <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E-E-E-\" rel=\"noreferrer\"><code>List.of</code></a> static factory method in order to create a <code>List</code> literal. Something like the following:</p>\n<pre><code>List&lt;Element&gt; elements = List.of(new Element(1), new Element(2), new Element(3));\n</code></pre>\n<p>This would return an <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"noreferrer\"><em><strong>immutable</strong></em></a> list containing three elements. If you want a <em><strong>mutable</strong></em> list, pass that list to the <code>ArrayList</code> constructor:</p>\n<pre><code>new ArrayList&lt;&gt;(List.of(// elements vararg))\n</code></pre>\n<hr />\n<h3>JEP 269: Convenience Factory Methods for Collections</h3>\n<p><a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">JEP 269</a> provides some convenience factory methods for <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"noreferrer\">Java Collections</a> API. These immutable static factory methods are built into the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a>, and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a> interfaces in Java 9 and later.</p>\n"},{"owner":{"reputation":1742,"user_id":3747720,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/XA0Bi.jpg?s=128&g=1","display_name":"oxy_js","link":"https://stackoverflow.com/users/3747720/oxy-js"},"comment_count":0,"is_accepted":false,"score":24,"last_activity_date":1466267420,"last_edit_date":1466267420,"creation_date":1462178444,"answer_id":36978331,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>You can convert using different methods</p>\n\n<ol>\n<li><p><code>List&lt;Element&gt; list = Arrays.asList(array);</code></p></li>\n<li><p><code>List&lt;Element&gt; list = new ArrayList();<br>\nCollections.addAll(list, array);</code></p></li>\n<li><p><code>Arraylist list = new Arraylist();<br>\nlist.addAll(Arrays.asList(array));</code></p></li>\n</ol>\n\n<p>For more detail you can refer to <a href=\"http://javarevisited.blogspot.in/2011/06/converting-array-to-arraylist-in-java.html\" rel=\"noreferrer\">http://javarevisited.blogspot.in/2011/06/converting-array-to-arraylist-in-java.html</a></p>\n"},{"owner":{"reputation":7771,"user_id":5091346,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/MEVJT.jpg?s=128&g=1","display_name":"Andrii Abramov","link":"https://stackoverflow.com/users/5091346/andrii-abramov"},"comment_count":0,"is_accepted":false,"score":24,"last_activity_date":1592295472,"last_edit_date":1592295472,"creation_date":1482496288,"answer_id":41301598,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Since Java 8 there is an easier way to transform:</p>\n\n<pre><code>import java.util.List;    \nimport static java.util.stream.Collectors.toList;\n\npublic static &lt;T&gt; List&lt;T&gt; fromArray(T[] array) {\n    return Arrays.stream(array).collect(toList());\n}\n</code></pre>\n"},{"owner":{"reputation":388,"user_id":5936681,"user_type":"registered","profile_image":"https://i.stack.imgur.com/8kxOU.jpg?s=128&g=1","display_name":"Abojemyeg","link":"https://stackoverflow.com/users/5936681/abojemyeg"},"comment_count":0,"is_accepted":false,"score":23,"last_activity_date":1544012762,"last_edit_date":1544012762,"creation_date":1483641175,"answer_id":41492222,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>as all said this will do so </p>\n\n<pre><code> new ArrayList&lt;&gt;(Arrays.asList(\"1\",\"2\",\"3\",\"4\"));\n</code></pre>\n\n<p>and the common newest way to create array is <strong>observableArrays</strong></p>\n\n<p><strong>ObservableList:</strong> A list that allows listeners to track changes when they occur.</p>\n\n<p>for Java SE you can try </p>\n\n<pre><code>FXCollections.observableArrayList(new Element(1), new Element(2), new Element(3));\n</code></pre>\n\n<p>that is according to <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/collections/FXCollections.html\" rel=\"noreferrer\">Oracle Docs</a></p>\n\n<blockquote>\n  <p>observableArrayList()\n  Creates a new empty observable list that is backed by an arraylist.\n  observableArrayList(E... items)\n  Creates a new observable array list with items added to it.</p>\n</blockquote>\n\n<h2><strong>Update Java 9</strong></h2>\n\n<p>also in Java 9 it's a little bit easy:</p>\n\n<pre><code>List&lt;String&gt; list = List.of(\"element 1\", \"element 2\", \"element 3\");\n</code></pre>\n"},{"owner":{"reputation":2468,"user_id":2889297,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0d6wx.jpg?s=128&g=1","display_name":"Devendra Lattu","link":"https://stackoverflow.com/users/2889297/devendra-lattu"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1491590750,"last_edit_date":1495542389,"creation_date":1491590750,"answer_id":43285146,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Even though there are many perfectly written answers to this question, I will add my inputs. </p>\n\n<p>Say you have <code>Element[] array = { new Element(1), new Element(2), new Element(3) };</code></p>\n\n<p>New ArrayList can be created in the following ways</p>\n\n<pre><code>ArrayList&lt;Element&gt; arraylist_1 = new ArrayList&lt;&gt;(Arrays.asList(array));\nArrayList&lt;Element&gt; arraylist_2 = new ArrayList&lt;&gt;(\n    Arrays.asList(new Element[] { new Element(1), new Element(2), new Element(3) }));\n\n// Add through a collection\nArrayList&lt;Element&gt; arraylist_3 = new ArrayList&lt;&gt;();\nCollections.addAll(arraylist_3, array);\n</code></pre>\n\n<p>And they very well support all operations of ArrayList</p>\n\n<pre><code>arraylist_1.add(new Element(4)); // or remove(): Success\narraylist_2.add(new Element(4)); // or remove(): Success\narraylist_3.add(new Element(4)); // or remove(): Success\n</code></pre>\n\n<p>But the following operations returns just a List view of an ArrayList and not actual ArrayList.</p>\n\n<pre><code>// Returns a List view of array and not actual ArrayList\nList&lt;Element&gt; listView_1 = (List&lt;Element&gt;) Arrays.asList(array);\nList&lt;Element&gt; listView_2 = Arrays.asList(array);\nList&lt;Element&gt; listView_3 = Arrays.asList(new Element(1), new Element(2), new Element(3));\n</code></pre>\n\n<p>Therefore, they will give error when trying to make some ArrayList operations</p>\n\n<pre><code>listView_1.add(new Element(4)); // Error\nlistView_2.add(new Element(4)); // Error\nlistView_3.add(new Element(4)); // Error\n</code></pre>\n\n<p>More on List representation of array <a href=\"https://stackoverflow.com/questions/43187083/benefits-of-creating-a-list-using-arrays-aslist\">link</a>.</p>\n"},{"comments":[{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1533329850,"post_id":43345763,"comment_id":90323225,"content_license":"CC BY-SA 4.0","body":"Note that this is not an ArrayList, as it was explicitely asked."}],"owner":{"reputation":1017,"user_id":601362,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7dbcace56bbe82f6aec2ef93e4e81a00?s=128&d=identicon&r=PG","display_name":"MarekM","link":"https://stackoverflow.com/users/601362/marekm"},"comment_count":1,"is_accepted":false,"score":39,"last_activity_date":1502536940,"last_edit_date":1502536940,"creation_date":1491913245,"answer_id":43345763,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>In <code>Java 9</code> you can use:</p>\n\n<pre><code>List&lt;String&gt; list = List.of(\"Hello\", \"World\", \"from\", \"Java\");\nList&lt;Integer&gt; list = List.of(1, 2, 3, 4, 5);\n</code></pre>\n"},{"owner":{"reputation":645,"user_id":5901831,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/3hMbK.jpg?s=128&g=1","display_name":"Hemin","link":"https://stackoverflow.com/users/5901831/hemin"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1493800708,"creation_date":1493800708,"answer_id":43755137,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Simplest way to do so is by adding following code. Tried and Tested.</p>\n\n<pre><code>String[] Array1={\"one\",\"two\",\"three\"};\nArrayList&lt;String&gt; s1= new ArrayList&lt;String&gt;(Arrays.asList(Array1));\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":2,"creation_date":1530639931,"post_id":44412346,"comment_id":89304007,"content_license":"CC BY-SA 4.0","body":"Downvoted because that cast looks very dangerous. nothing specifies that the type of list that is returned is actually an ArrayList, as the javadoc states: &quot;There are no guarantees on the type, mutability, serializability, or thread-safety of the List returned&quot;"},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":1,"creation_date":1533329633,"post_id":44412346,"comment_id":90323166,"content_license":"CC BY-SA 4.0","body":"If you want to explicitely create an ArrayList, try this: <code>ArrayList&lt;String&gt; list = Arrays.stream(array).collect(Collectors.toCollection(ArrayLi&zwnj;&#8203;st::new));</code>"}],"owner":{"reputation":557,"user_id":4804146,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/083c2d7cfb8438ece051b66810220798?s=128&d=identicon&r=PG&f=1","display_name":"Adit A. Pillai","link":"https://stackoverflow.com/users/4804146/adit-a-pillai"},"comment_count":2,"is_accepted":false,"score":8,"last_activity_date":1501682582,"last_edit_date":1501682582,"creation_date":1496837665,"answer_id":44412346,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>You can do it in java 8 as follows</p>\n\n<pre><code>ArrayList&lt;Element&gt; list = (ArrayList&lt;Element&gt;)Arrays.stream(array).collect(Collectors.toList());\n</code></pre>\n"},{"owner":{"reputation":758,"user_id":1822659,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d938a7932ae071b7e3041587b21e8d49?s=128&d=identicon&r=PG","display_name":"Toothless Seer","link":"https://stackoverflow.com/users/1822659/toothless-seer"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1497948025,"last_edit_date":1497948025,"creation_date":1497947585,"answer_id":44647833,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<blockquote>\n  <p>Another Java8 solution <em>(I may have missed the answer among the large set. If so, my apologies).</em> This creates an ArrayList (as opposed to a List) i.e. one can delete elements</p>\n</blockquote>\n\n<pre><code>package package org.something.util;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Junk {\n\n    static &lt;T&gt; ArrayList&lt;T&gt;  arrToArrayList(T[] arr){\n        return Arrays.asList(arr)\n            .stream()\n            .collect(Collectors.toCollection(ArrayList::new));\n    }\n\n    public static void main(String[] args) {\n        String[] sArr = new String[]{\"Hello\", \"cruel\", \"world\"};\n        List&lt;String&gt; ret = arrToArrayList(sArr);\n        // Verify one can remove an item and print list to verify so\n        ret.remove(1);\n        ret.stream()\n            .forEach(System.out::println);\n    }\n}\n</code></pre>\n\n<p>Output is... <br>\nHello <br>\nworld</p>\n"},{"comments":[{"owner":{"reputation":1907,"user_id":1778674,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/942ffef9f4e28b71f820a349a3fb2ccc?s=128&d=identicon&r=PG","display_name":"Suhaib","link":"https://stackoverflow.com/users/1778674/suhaib"},"edited":false,"score":0,"creation_date":1498855480,"post_id":44759584,"comment_id":76690009,"content_license":"CC BY-SA 3.0","body":"I respect your work. But as someone new to Java, <code>List</code> and rest of its collections (ArrayList, etc...) is already too much to handle. Why you want me to suffer more :-("}],"owner":{"reputation":92649,"user_id":187141,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG","display_name":"yegor256","link":"https://stackoverflow.com/users/187141/yegor256"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1498479591,"creation_date":1498479591,"answer_id":44759584,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>You can create an <code>ArrayList</code> using <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a> (I'm one of the developers):</p>\n\n<pre><code>List&lt;String&gt; names = new StickyList&lt;&gt;(\n  \"Scott Fitzgerald\", \"Fyodor Dostoyevsky\"\n);\n</code></pre>\n\n<p>There is no guarantee that the object will actually be of class <code>ArrayList</code>. If you need that guarantee, do this:</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(\n  new StickyList&lt;&gt;(\n    \"Scott Fitzgerald\", \"Fyodor Dostoyevsky\"\n  )\n);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2560,"user_id":2957169,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1","display_name":"charles-allen","link":"https://stackoverflow.com/users/2957169/charles-allen"},"edited":false,"score":0,"creation_date":1499681166,"post_id":44899482,"comment_id":76991808,"content_license":"CC BY-SA 3.0","body":"This is less efficient than the accepted 9 year old answer."},{"owner":{"reputation":170,"user_id":4499183,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-uQx5Y_Kw7e8/AAAAAAAAAAI/AAAAAAAAAHo/eVGrbgpm8pQ/photo.jpg?sz=128","display_name":"Tamoghna Chowdhury","link":"https://stackoverflow.com/users/4499183/tamoghna-chowdhury"},"edited":false,"score":2,"creation_date":1507321571,"post_id":44899482,"comment_id":80179006,"content_license":"CC BY-SA 3.0","body":"One of <code>ArrayList</code>s constructors accepts a <code>? extends Collection&lt;T&gt;</code> argument, making the call to <code>addAll</code> redundant."}],"owner":{"reputation":2541,"user_id":6714430,"user_type":"registered","profile_image":"https://i.stack.imgur.com/adedu.jpg?s=128&g=1","display_name":"rashedcs","link":"https://stackoverflow.com/users/6714430/rashedcs"},"comment_count":2,"is_accepted":false,"score":8,"last_activity_date":1521400554,"last_edit_date":1521400554,"creation_date":1499152953,"answer_id":44899482,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>We can easily convert an array to <code>ArrayList</code>.\nWe use Collection interface's <code>addAll()</code> method for the purpose of copying content from one list to another. </p>\n\n<pre><code> Arraylist arr = new Arraylist();\n arr.addAll(Arrays.asList(asset));\n</code></pre>\n"},{"comments":[{"owner":{"reputation":776,"user_id":5884126,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/0dfff3618068596794d26ba021bff8d7?s=128&d=identicon&r=PG","display_name":"PixelMaster","link":"https://stackoverflow.com/users/5884126/pixelmaster"},"edited":false,"score":0,"creation_date":1528660546,"post_id":45002925,"comment_id":88581362,"content_license":"CC BY-SA 4.0","body":"this solution doesn&#39;t seem to work with <code>char</code> array, either."}],"owner":{"reputation":1399,"user_id":1469472,"user_type":"registered","profile_image":"https://i.stack.imgur.com/vD3Ty.jpg?s=128&g=1","display_name":"A1m","link":"https://stackoverflow.com/users/1469472/a1m"},"comment_count":1,"is_accepted":false,"score":11,"last_activity_date":1499654238,"last_edit_date":1499654238,"creation_date":1499653289,"answer_id":45002925,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>If the array is of a primitive type, the given answers won't work. But since Java 8 you can use:</p>\n\n<pre><code>int[] array = new int[5];\nArrays.stream(array).boxed().collect(Collectors.toList());\n</code></pre>\n"},{"comments":[{"owner":{"reputation":155,"user_id":1192706,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1a8569db1c3041093e288fb4dd35ea15?s=128&d=identicon&r=PG","display_name":"Priyanka","link":"https://stackoverflow.com/users/1192706/priyanka"},"edited":false,"score":0,"creation_date":1504947474,"post_id":45295063,"comment_id":79220128,"content_license":"CC BY-SA 3.0","body":"List&lt;Element&gt; elementList = Arrays.asList(array) creates a wrapper over the original array which makes original array available as List. Hence a wrapper object is created, nothing gets copied from the original array. Therefore, operations like add or remove elements are not allowed."},{"owner":{"reputation":170,"user_id":4499183,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-uQx5Y_Kw7e8/AAAAAAAAAAI/AAAAAAAAAHo/eVGrbgpm8pQ/photo.jpg?sz=128","display_name":"Tamoghna Chowdhury","link":"https://stackoverflow.com/users/4499183/tamoghna-chowdhury"},"edited":false,"score":4,"creation_date":1507321490,"post_id":45295063,"comment_id":80178983,"content_license":"CC BY-SA 3.0","body":"Note that your &quot;immutable collection&quot; is not really immutable - the <code>List</code> returned by <code>Arrays.asList</code> is just a wrapper over the original array, and allows individual items to be accessed and modified via <code>get</code> and <code>set</code>. You should probably clarify that you mean &quot;not add or remove elements&quot; instead of &quot;immutable&quot;, which means to not change at all."}],"owner":{"reputation":171,"user_id":4648430,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ppbVQ.jpg?s=128&g=1","display_name":"Sumit Das","link":"https://stackoverflow.com/users/4648430/sumit-das"},"comment_count":2,"is_accepted":false,"score":5,"last_activity_date":1500962591,"creation_date":1500962591,"answer_id":45295063,"question_id":157944,"content_license":"CC BY-SA 3.0","body":"<p>Already everyone has provided enough good answer for your problem. \nNow from the all suggestions, you need to decided which will fit your requirement. There are two types of collection which you need to know. One is unmodified collection and other one collection which will allow you to modify the object later.</p>\n\n<p>So, Here I will give short example for two use cases.</p>\n\n<ul>\n<li><p>Immutable collection creation :: When you don't want to modify the collection object after creation</p>\n\n<p><code>List&lt;Element&gt; elementList = Arrays.asList(array)</code></p></li>\n<li><p>Mutable collection creation :: When you may want to modify the created collection object after creation.</p>\n\n<p><code>List&lt;Element&gt; elementList = new ArrayList&lt;Element&gt;(Arrays.asList(array));</code></p></li>\n</ul>\n"},{"owner":{"reputation":189,"user_id":9036713,"user_type":"registered","profile_image":"https://i.stack.imgur.com/OK454.jpg?s=128&g=1","display_name":"Kavinda Pushpitha","link":"https://stackoverflow.com/users/9036713/kavinda-pushpitha"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1547599822,"last_edit_date":1547599822,"creation_date":1543836730,"answer_id":53592953,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Use the following code to convert an element array into an ArrayList. </p>\n\n<pre><code>Element[] array = {new Element(1), new Element(2), new Element(3)};\n\nArrayList&lt;Element&gt;elementArray=new ArrayList();\nfor(int i=0;i&lt;array.length;i++) {\n    elementArray.add(array[i]);\n}\n</code></pre>\n"},{"owner":{"reputation":802,"user_id":9769061,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4ba04e0bf9ad6c749a7cd492adc6b191?s=128&d=identicon&r=PG&f=1","display_name":"Devratna","link":"https://stackoverflow.com/users/9769061/devratna"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1553773363,"creation_date":1553773363,"answer_id":55396755,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Use below code</p>\n\n<pre><code>Element[] array = {new Element(1), new Element(2), new Element(3)};\nArrayList&lt;Element&gt; list = (ArrayList) Arrays.asList(array);\n</code></pre>\n"},{"owner":{"reputation":109,"user_id":2418016,"user_type":"registered","profile_image":"https://i.stack.imgur.com/fQr9U.jpg?s=128&g=1","display_name":"Himanshu Dave","link":"https://stackoverflow.com/users/2418016/himanshu-dave"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1558266056,"last_edit_date":1558266056,"creation_date":1558264827,"answer_id":56207279,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Java 8âs Arrays class provides a stream() method which has overloaded versions accepting both primitive arrays and Object arrays.</p>\n\n<pre><code>/**** Converting a Primitive 'int' Array to List ****/\n\nint intArray[] = {1, 2, 3, 4, 5};\n\nList&lt;Integer&gt; integerList1 = Arrays.stream(intArray).boxed().collect(Collectors.toList());\n\n/**** 'IntStream.of' or 'Arrays.stream' Gives The Same Output ****/\n\nList&lt;Integer&gt; integerList2 = IntStream.of(intArray).boxed().collect(Collectors.toList());\n\n/**** Converting an 'Integer' Array to List ****/\n\nInteger integerArray[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n\nList&lt;Integer&gt; integerList3 = Arrays.stream(integerArray).collect(Collectors.toList());\n</code></pre>\n"},{"owner":{"reputation":629,"user_id":11199879,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0a9c56c2190957960c9463c03486df8?s=128&d=identicon&r=PG&f=1","display_name":"Kaplan","link":"https://stackoverflow.com/users/11199879/kaplan"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1564725011,"creation_date":1564725011,"answer_id":57320610,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p><em>the lambda expression that generates a list of type</em> <code>ArrayList&lt;Element&gt;</code><br />\n(1) without an unchecked cast<br />\n(2) without creating a second list (with eg. <code>asList()</code>)</p>\n\n<p><code>ArrayList&lt;Element&gt; list = Stream.of( array ).collect( Collectors.toCollection( ArrayList::new ) );</code></p>\n"},{"owner":{"reputation":1711,"user_id":7353562,"user_type":"registered","accept_rate":75,"profile_image":"https://graph.facebook.com/1358578430859865/picture?type=large","display_name":"Arpan Saini","link":"https://stackoverflow.com/users/7353562/arpan-saini"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1567888588,"creation_date":1567888588,"answer_id":57837290,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p><strong>Given Object Array:</strong></p>\n\n<pre><code>Element[] array = {new Element(1), new Element(2), new Element(3) , new Element(2)};\n</code></pre>\n\n<p><strong>Convert Array to List:</strong></p>\n\n<pre><code>    List&lt;Element&gt; list = Arrays.stream(array).collect(Collectors.toList());\n</code></pre>\n\n<p><strong>Convert Array to ArrayList</strong></p>\n\n<pre><code>    ArrayList&lt;Element&gt; arrayList = Arrays.stream(array)\n                                       .collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n\n<p><strong>Convert Array to LinkedList</strong></p>\n\n<pre><code>    LinkedList&lt;Element&gt; linkedList = Arrays.stream(array)\n                     .collect(Collectors.toCollection(LinkedList::new));\n</code></pre>\n\n<p><strong>Print List:</strong></p>\n\n<pre><code>    list.forEach(element -&gt; {\n        System.out.println(element.i);\n    });\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>3</p>\n"},{"owner":{"reputation":356,"user_id":3526891,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b429f8374c4f3fd2b1182259f7bce9bd?s=128&d=identicon&r=PG&f=1","display_name":"Singh123","link":"https://stackoverflow.com/users/3526891/singh123"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1575446382,"creation_date":1575446382,"answer_id":59171365,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Below code seems nice way of doing this.</p>\n\n<pre><code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));\n</code></pre>\n"},{"owner":{"reputation":111,"user_id":13383275,"user_type":"registered","profile_image":"https://i.stack.imgur.com/M6n9y.jpg?s=128&g=1","display_name":"Suparno Saha","link":"https://stackoverflow.com/users/13383275/suparno-saha"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1591118015,"creation_date":1591118015,"answer_id":62157545,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>This is the first and the easiest method</p>\n\n<pre><code>new ArrayList&lt;T&gt;(Arrays.asList(myArray));\n</code></pre>\n\n<p>Another method</p>\n\n<pre><code>//declare myarray\nArrayList &lt;String&gt; ar = new ArrayList&lt;String&gt; ();\nfor(String s : myArray){\n    ar.add(s);\n}\n</code></pre>\n\n<p>This is iterating through the array and adding each element separately</p>\n\n<p>The kind of for loop used here is called enhanced for loop</p>\n"},{"owner":{"reputation":354,"user_id":12239357,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mCzgwvt4EmbehNegBuQ7zDZrP9F9d8-gTKjcHqh=k-s128","display_name":"Chris","link":"https://stackoverflow.com/users/12239357/chris"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1594023236,"creation_date":1594023236,"answer_id":62751877,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Hi you can use this <strong><code>line of code</code></strong> , and it's the <strong>simplest way</strong></p>\n<pre><code> new ArrayList&lt;&gt;(Arrays.asList(myArray));\n</code></pre>\n<p>or in case you use  <strong><code>Java 9</code></strong> you can also use this method:</p>\n<pre><code>List&lt;String&gt; list = List.of(&quot;Hello&quot;, &quot;Java&quot;); \nList&lt;Integer&gt; list = List.of(1, 2, 3);\n</code></pre>\n"},{"owner":{"reputation":1062,"user_id":7484853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/OGdX0.jpg?s=128&g=1","display_name":"Hasee Amarathunga","link":"https://stackoverflow.com/users/7484853/hasee-amarathunga"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1596175759,"creation_date":1596175759,"answer_id":63186604,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>Use below script</p>\n<pre><code>Object[] myNum = {10, 20, 30, 40};\nList&lt;Object&gt; newArr = new ArrayList&lt;&gt;(Arrays.asList(myNum));\n</code></pre>\n"},{"owner":{"reputation":592,"user_id":10418392,"user_type":"registered","profile_image":"https://i.stack.imgur.com/eMSzP.jpg?s=128&g=1","display_name":"Sachintha Nayanajith","link":"https://stackoverflow.com/users/10418392/sachintha-nayanajith"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1600947478,"last_edit_date":1600947478,"creation_date":1600946840,"answer_id":64045482,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>In java there are mainly 3 methods to convert an <strong>array</strong> to an <strong>arrayList</strong></p>\n<ol>\n<li><p>Using Arrays.asList() method : Pass the required array to this method and get a List object and pass it as a parameter to the constructor of the ArrayList class.</p>\n<pre><code>List&lt;String&gt; list = Arrays.asList(array);                   \nSystem.out.println(list);\n</code></pre>\n</li>\n<li><p>Collections.addAll() method - Create a new list before using this method and then add array elements using this method to existing list.</p>\n<pre><code> List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();\n Collections.addAll(list1, array);\n System.out.println(list1);\n</code></pre>\n</li>\n<li><p>Iteration method - Create a new list. Iterate the array and add each element to the list.</p>\n<pre><code> List&lt;String&gt; list2 = new ArrayList&lt;String&gt;();\n for(String text:array) {\n     list2.add(text);\n }\n System.out.println(list2);\n</code></pre>\n</li>\n</ol>\n<p>you can refer <a href=\"https://www.tutorialspoint.com/Conversion-of-Array-To-ArrayList-in-Java\" rel=\"nofollow noreferrer\">this document</a> too</p>\n"},{"owner":{"reputation":1062,"user_id":7484853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/OGdX0.jpg?s=128&g=1","display_name":"Hasee Amarathunga","link":"https://stackoverflow.com/users/7484853/hasee-amarathunga"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1603254277,"creation_date":1603254277,"answer_id":64456660,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>You can use the following 3 ways to create ArrayList from Array.</p>\n<pre><code>  String[] array = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;};\n\n  //Method 1\n  List&lt;String&gt; list = Arrays.asList(array);          \n\n  //Method 2\n  List&lt;String&gt; list1 = new ArrayList&lt;String&gt;();\n  Collections.addAll(list1, array);\n\n  //Method 3\n  List&lt;String&gt; list2 = new ArrayList&lt;String&gt;();\n  for(String text:array) {\n     list2.add(text);\n  }\n</code></pre>\n"},{"owner":{"reputation":344,"user_id":14618789,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c5575bb7e2c82ff6824395ab9e5ce0de?s=128&d=identicon&r=PG&f=1","display_name":"Lakindu Hewawasam","link":"https://stackoverflow.com/users/14618789/lakindu-hewawasam"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1605584368,"creation_date":1605584368,"answer_id":64869020,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>There is one more way that you can use to convert the array into an ArrayList. You can iterate over the array and insert each index into the ArrayList and return it back as in ArrayList.</p>\n<p>This is shown below.</p>\n<pre><code>public static void main(String[] args) {\n        String[] array = {new String(&quot;David&quot;), new String(&quot;John&quot;), new String(&quot;Mike&quot;)};\n\n        ArrayList&lt;String&gt; theArrayList = convertToArrayList(array);\n    }\n\n    private static ArrayList&lt;String&gt; convertToArrayList(String[] array) {\n        ArrayList&lt;String&gt; convertedArray = new ArrayList&lt;String&gt;();\n\n        for (String element : array) {\n            convertedArray.add(element);\n        }\n\n        return convertedArray;\n    }\n</code></pre>\n"},{"owner":{"reputation":73,"user_id":8278152,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6d14b04a66efadd7ecf6fc94b9149cec?s=128&d=identicon&r=PG&f=1","display_name":"Sandip Jangra","link":"https://stackoverflow.com/users/8278152/sandip-jangra"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1605703557,"creation_date":1605703557,"answer_id":64893424,"question_id":157944,"content_license":"CC BY-SA 4.0","body":"<p>For normal size arrays, above answers hold good. In case you have huge size of array and using java 8, you can do it using stream.</p>\n<pre><code>  Element[] array = {new Element(1), new Element(2), new Element(3)};\n  List&lt;Element&gt; list = Arrays.stream(array).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"reputation":49342,"user_id":939,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/ce6d3fed32e985093a107913c3762579?s=128&d=identicon&r=PG","display_name":"Ron Tuffin","link":"https://stackoverflow.com/users/939/ron-tuffin"},"comment_count":4,"is_answered":true,"view_count":1563480,"protected_date":1479928258,"accepted_answer_id":157950,"answer_count":41,"score":3744,"last_activity_date":1605703557,"creation_date":1222871912,"last_edit_date":1580448354,"question_id":157944,"link":"https://stackoverflow.com/questions/157944/create-arraylist-from-array","title":"Create ArrayList from array","body":"<p>I have an array that is initialized like:</p>\n\n<pre><code>Element[] array = {new Element(1), new Element(2), new Element(3)};\n</code></pre>\n\n<p>I would like to convert this array into an object of the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList</code></a> class.</p>\n\n<pre><code>ArrayList&lt;Element&gt; arraylist = ???;\n</code></pre>\n"},{"tags":["java","android","usermanager"],"comments":[{"owner":{"reputation":18491,"user_id":407213,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1","display_name":"Dorian","link":"https://stackoverflow.com/users/407213/dorian"},"edited":false,"score":4,"creation_date":1352926397,"post_id":13375357,"comment_id":18284328,"content_license":"CC BY-SA 3.0","body":"If can be used to avoid some Java warning, as an easter egg, and as a test to see who read the API. And it&#39;s a reference to an easter egg in Chrome."},{"owner":{"reputation":4880,"user_id":1115937,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/RJieM.jpg?s=128&g=1","display_name":"John Isaiah Carmona","link":"https://stackoverflow.com/users/1115937/john-isaiah-carmona"},"edited":false,"score":12,"creation_date":1352955522,"post_id":13375357,"comment_id":18292088,"content_license":"CC BY-SA 3.0","body":"This might be related to when <a href=\"http://googleblog.blogspot.com/2010/04/goats-are-baaaahk.html\" rel=\"nofollow noreferrer\">Google use goats</a> <a href=\"http://googleblog.blogspot.com/2009/05/mowing-with-goats.html\" rel=\"nofollow noreferrer\">as a mower</a> in their <a href=\"https://maps.google.com/?q=Google+Inc.%4037.423156,-122.084917&amp;hl=en\" rel=\"nofollow noreferrer\">Mountain View Headquarters</a>."},{"owner":{"reputation":10633,"user_id":1385119,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/f6b1a1bae2c27ba86468471f32f6493a?s=128&d=identicon&r=PG&f=1","display_name":"none","link":"https://stackoverflow.com/users/1385119/none"},"edited":false,"score":3,"creation_date":1352974901,"post_id":13375357,"comment_id":18302467,"content_license":"CC BY-SA 3.0","body":"<i>googlers</i> seem to like goats for some reason, no wonder they made an easter egg out of it. there is also a serious (<b>!</b>) investment in goats: - as blogged in googleblog - <a href=\"http://googleblog.blogspot.com/2009/05/mowing-with-goats.html\" rel=\"nofollow noreferrer\">mowing with goats</a> - <a href=\"http://googleblog.blogspot.com/2010/04/goats-are-baaaahk.html\" rel=\"nofollow noreferrer\">goats are baaaahk</a> - and recorded in <a href=\"http://www.youtube.com/watch?v=Jw_XI0WVZBg\" rel=\"nofollow noreferrer\">youtube</a> after all they are native lawn movers, efficient as well.."},{"owner":{"reputation":3974,"user_id":366253,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/c0aa506896a36e17a6a8fa3a281a2215?s=128&d=identicon&r=PG","display_name":"Fernando Gallego","link":"https://stackoverflow.com/users/366253/fernando-gallego"},"edited":false,"score":21,"creation_date":1364594996,"post_id":13375357,"comment_id":22483920,"content_license":"CC BY-SA 3.0","body":"There are also constants for the gravity on the first death star <a href=\"http://developer.android.com/reference/android/hardware/SensorManager.html#GRAVITY_DEATH_STAR_I\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/hardware/&hellip;</a> and on the island of the tv show Lost <a href=\"http://developer.android.com/reference/android/hardware/SensorManager.html#GRAVITY_THE_ISLAND\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/hardware/&hellip;</a> which is of course, the numbers."},{"owner":{"reputation":815,"user_id":2996119,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7862d510be3065497d35269b34c5c514?s=128&d=identicon&r=PG&f=1","display_name":"Patrick","link":"https://stackoverflow.com/users/2996119/patrick"},"edited":false,"score":8,"creation_date":1461570591,"post_id":13375357,"comment_id":61240128,"content_license":"CC BY-SA 3.0","body":"They even updated the documentation after Lollipop: <a href=\"http://developer.android.com/reference/android/os/UserManager.html#isUserAGoat()\" rel=\"nofollow noreferrer\">&quot;As of LOLLIPOP, this method can now automatically identify goats using advanced goat recognition technology.&quot;</a>"}],"answers":[{"comments":[{"owner":{"reputation":982,"user_id":297807,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/d2210ac9d73a778551686af43a382940?s=128&d=identicon&r=PG","display_name":"tedders","link":"https://stackoverflow.com/users/297807/tedders"},"edited":false,"score":106,"creation_date":1352897916,"post_id":13375461,"comment_id":18275126,"content_license":"CC BY-SA 3.0","body":"Theory: Goats are found in all kinds of precarious places, like sheer cliffs, possibly bucking location trends they get from regular non-goat users. Might explain &quot;teleportations&quot;, which could be goats appearing to wildly relocate as the software tries to determine their location with algos designed for non-goats."},{"owner":{"reputation":25431,"user_id":423105,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG","display_name":"LarsH","link":"https://stackoverflow.com/users/423105/larsh"},"edited":false,"score":3,"creation_date":1352913424,"post_id":13375461,"comment_id":18278304,"content_license":"CC BY-SA 3.0","body":"How does this answer add anything to the info that the question already showed?"},{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"reply_to_user":{"reputation":25431,"user_id":423105,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG","display_name":"LarsH","link":"https://stackoverflow.com/users/423105/larsh"},"edited":false,"score":12,"creation_date":1352923621,"post_id":13375461,"comment_id":18283074,"content_license":"CC BY-SA 3.0","body":"@LarsH - the source for one."},{"owner":{"reputation":70555,"user_id":50776,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/1b2b5d5007262ea3f9e21ab5b15f8b75?s=128&d=identicon&r=PG","display_name":"casperOne","link":"https://stackoverflow.com/users/50776/casperone"},"edited":false,"score":58,"creation_date":1352924797,"post_id":13375461,"comment_id":18283610,"content_license":"CC BY-SA 3.0","body":"This is a history lesson, not an answer.  Even if it is an Easter egg, is there a valid use case for it?  Being an Easter egg doesn&#39;t preclude it from being useful, and you&#39;ve not shown whether it is or is not useful."},{"owner":{"reputation":25431,"user_id":423105,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG","display_name":"LarsH","link":"https://stackoverflow.com/users/423105/larsh"},"reply_to_user":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"edited":false,"score":3,"creation_date":1352926331,"post_id":13375461,"comment_id":18284304,"content_license":"CC BY-SA 3.0","body":"@djechlin, one aspect of the source is informative, and now that the answer has been edited, it&#39;s far more obvious: (this implementation of) this method always returns false."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":0,"creation_date":1377411185,"post_id":13375461,"comment_id":27070930,"content_license":"CC BY-SA 3.0","body":"The method could be overridden in a test scenario."},{"owner":{"reputation":253017,"user_id":47773,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/e72946d7c81ee170b322f6e6abae3442?s=128&d=identicon&r=PG","display_name":"Matthew Flaschen","link":"https://stackoverflow.com/users/47773/matthew-flaschen"},"edited":false,"score":2,"creation_date":1392789782,"post_id":13375461,"comment_id":33115558,"content_license":"CC BY-SA 3.0","body":"It&#39;s also a reference to <a href=\"http://en.wikipedia.org/wiki/The_Men_Who_Stare_at_Goats\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/The_Men_Who_Stare_at_Goats</a> , about a U.S. military project involving goats."},{"owner":{"reputation":1437,"user_id":437244,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/35263c7f4de748c0853eb12e4173bb4a?s=128&d=identicon&r=PG&f=1","display_name":"logain","link":"https://stackoverflow.com/users/437244/logain"},"edited":false,"score":7,"creation_date":1396212558,"post_id":13375461,"comment_id":34676901,"content_license":"CC BY-SA 3.0","body":"The monkey function is to detect the MonkeyRunner debug tool as specified in another answer."},{"owner":{"reputation":35423,"user_id":1048340,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/3q8qF.jpg?s=128&g=1","display_name":"Jared Rummler","link":"https://stackoverflow.com/users/1048340/jared-rummler"},"edited":false,"score":9,"creation_date":1423128322,"post_id":13375461,"comment_id":45025583,"content_license":"CC BY-SA 3.0","body":"They need to add <code>canPigsFly()</code>. <code>while (!canPigsFly()) { &#47;* code *&#47; }</code>"},{"owner":{"reputation":8749,"user_id":1953590,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/b7f981d575a65b685a5ead903fcbfbf6?s=128&d=identicon&r=PG&f=1","display_name":"Kevin Krumwiede","link":"https://stackoverflow.com/users/1953590/kevin-krumwiede"},"edited":false,"score":38,"creation_date":1424506065,"post_id":13375461,"comment_id":45585392,"content_license":"CC BY-SA 3.0","body":"That&#39;s a <a href=\"https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator\" rel=\"nofollow noreferrer\">real app</a>."},{"owner":{"reputation":49609,"user_id":276949,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG","display_name":"Martin Konecny","link":"https://stackoverflow.com/users/276949/martin-konecny"},"edited":false,"score":207,"creation_date":1430111505,"post_id":13375461,"comment_id":47899032,"content_license":"CC BY-SA 3.0","body":"I feel bad for anyone who cheekily used this function, expecting it to return <code>false</code> forever."},{"owner":{"reputation":12408,"user_id":4299560,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/84fd2bf8783aba24dd496c7fef48daad?s=128&d=identicon&r=PG&f=1","display_name":"Ced","link":"https://stackoverflow.com/users/4299560/ced"},"reply_to_user":{"reputation":70555,"user_id":50776,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/1b2b5d5007262ea3f9e21ab5b15f8b75?s=128&d=identicon&r=PG","display_name":"casperOne","link":"https://stackoverflow.com/users/50776/casperone"},"edited":false,"score":5,"creation_date":1440222034,"post_id":13375461,"comment_id":52194215,"content_license":"CC BY-SA 3.0","body":"@casperOne given the content of the method I think the use case is pretty self explanatory."},{"owner":{"reputation":2659,"user_id":1970990,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/2ociD.jpg?s=128&g=1","display_name":"raulk","link":"https://stackoverflow.com/users/1970990/raulk"},"edited":false,"score":5,"creation_date":1452797923,"post_id":13375461,"comment_id":57338229,"content_license":"CC BY-SA 3.0","body":"What&#39;s funny is there&#39;s an app with that ID: <a href=\"https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator&amp;hl=en\" rel=\"nofollow noreferrer\">play.google.com/store/apps/&hellip;</a>. And it&#39;s not free, nor made by Google!"},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"reply_to_user":{"reputation":2659,"user_id":1970990,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/2ociD.jpg?s=128&g=1","display_name":"raulk","link":"https://stackoverflow.com/users/1970990/raulk"},"edited":false,"score":11,"creation_date":1474938093,"post_id":13375461,"comment_id":66726981,"content_license":"CC BY-SA 3.0","body":"@raulk Yes, they used the ID of that app, they didn&#39;t pick a random app ID and then happen to have someone create an app with that ID..."},{"owner":{"reputation":633,"user_id":641095,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2ad9e802c1b80b7b6067dfc47847e3da?s=128&d=identicon&r=PG","display_name":"aberaud","link":"https://stackoverflow.com/users/641095/aberaud"},"edited":false,"score":2,"creation_date":1602634803,"post_id":13375461,"comment_id":113781302,"content_license":"CC BY-SA 4.0","body":"Starting with Android 11 (R), the function always returns false again &quot;in order to protect goat privacy&quot;, according to the updated documentation: <a href=\"https://developer.android.com/reference/android/os/UserManager.html#isUserAGoat()\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/os/&hellip;</a>"}],"owner":{"reputation":20611,"user_id":1597833,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/0953d434c345c978e47a9970eceabd36?s=128&d=identicon&r=PG","display_name":"meh","link":"https://stackoverflow.com/users/1597833/meh"},"comment_count":15,"is_accepted":true,"score":1855,"last_activity_date":1608224168,"last_edit_date":1608224168,"creation_date":1352882430,"answer_id":13375461,"question_id":13375357,"content_license":"CC BY-SA 4.0","body":"<h3>Android R Update:</h3>\n<p>From Android R, this method always returns false. Google says that this is done &quot;to protect goat privacy&quot;:</p>\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#R}, this method always returns\n * {@code false} in order to protect goat privacy.&lt;/p&gt;\n *\n * @return Returns whether the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    if (mContext.getApplicationInfo().targetSdkVersion &gt;= Build.VERSION_CODES.R) {\n        return false;\n    }\n    return mContext.getPackageManager()\n            .isPackageAvailable(&quot;com.coffeestainstudios.goatsimulator&quot;);\n}\n</code></pre>\n<hr />\n<h3>Previous answer:</h3>\n<p>From their <strong><a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#433\" rel=\"noreferrer\">source</a></strong>, the method used to return <code>false</code> until it was changed in API 21.</p>\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n * @return whether the user making this call is a goat \n */\npublic boolean isUserAGoat() {\n    return false;\n}\n</code></pre>\n<p>It looks like the method has no real use for us as developers. Someone has previously stated that it might be an <strong><a href=\"http://en.wikipedia.org/wiki/Easter_egg_(media)\" rel=\"noreferrer\">Easter egg</a></strong>.</p>\n<p>In API 21 the implementation was changed to check if there is an installed app with the package <code>com.coffeestainstudios.goatsimulator</code></p>\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * @return Returns true if the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    return mContext.getPackageManager()\n            .isPackageAvailable(&quot;com.coffeestainstudios.goatsimulator&quot;);\n}\n</code></pre>\n<p>Here is the <a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#442\" rel=\"noreferrer\">source</a> and the <a href=\"https://android.googlesource.com/platform/frameworks/base/+/e4ab16ad98b183afbf7a21ad7314372de41a8b57%5E%21/#F1\" rel=\"noreferrer\">change</a>.</p>\n"},{"comments":[{"owner":{"reputation":25584,"user_id":1163019,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG","display_name":"auselen","link":"https://stackoverflow.com/users/1163019/auselen"},"edited":false,"score":25,"creation_date":1352884657,"post_id":13375746,"comment_id":18264677,"content_license":"CC BY-SA 3.0","body":"i don&#39;t have it, where do you right click? or what it is used for"},{"owner":{"reputation":3997,"user_id":1689695,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/ca8c74acad7784cfc93b15c9782bcbf6?s=128&d=identicon&r=PG","display_name":"CocoNess","link":"https://stackoverflow.com/users/1689695/coconess"},"edited":false,"score":0,"creation_date":1352885627,"post_id":13375746,"comment_id":18265113,"content_license":"CC BY-SA 3.0","body":"I guess it depends on the version of Chrome. Mine is 23.0.1271.64"},{"owner":{"user_type":"does_not_exist","display_name":"user479870"},"reply_to_user":{"reputation":67951,"user_id":542091,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/rQ7vZ.jpg?s=128&g=1","display_name":"Ovidiu Latcu","link":"https://stackoverflow.com/users/542091/ovidiu-latcu"},"edited":false,"score":0,"creation_date":1352885862,"post_id":13375746,"comment_id":18265227,"content_license":"CC BY-SA 3.0","body":"@OvidiuLatcu In the bug report I just added, it shows a Windows screenshot."},{"owner":{"reputation":1642,"user_id":205877,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/3hFfT.jpg?s=128&g=1","display_name":"greenie","link":"https://stackoverflow.com/users/205877/greenie"},"reply_to_user":{"reputation":25584,"user_id":1163019,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG","display_name":"auselen","link":"https://stackoverflow.com/users/1163019/auselen"},"edited":false,"score":13,"creation_date":1352885919,"post_id":13375746,"comment_id":18265250,"content_license":"CC BY-SA 3.0","body":"@auselen You have to right click on a column title in order to see the drop down menu to add the Goats Teleported column (at least that&#39;s how it works in Chrome on OS X). <a href=\"http://cl.ly/Ksbd\" rel=\"nofollow noreferrer\">cl.ly/Ksbd</a>"},{"owner":{"user_type":"does_not_exist","display_name":"user479870"},"reply_to_user":{"reputation":1642,"user_id":205877,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/3hFfT.jpg?s=128&g=1","display_name":"greenie","link":"https://stackoverflow.com/users/205877/greenie"},"edited":false,"score":1,"creation_date":1352885979,"post_id":13375746,"comment_id":18265279,"content_license":"CC BY-SA 3.0","body":"@greenie: Thanks for adding this. In Linux you can right click anywhere."},{"owner":{"reputation":25584,"user_id":1163019,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG","display_name":"auselen","link":"https://stackoverflow.com/users/1163019/auselen"},"edited":false,"score":54,"creation_date":1352886449,"post_id":13375746,"comment_id":18265510,"content_license":"CC BY-SA 3.0","body":"Windows XP + latest Chrome = it isn&#39;t there, on Ubuntu I see it."},{"owner":{"reputation":13807,"user_id":27206,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/94afce4e8f9766b629aba101b50cfc18?s=128&d=identicon&r=PG","display_name":"James Gregory","link":"https://stackoverflow.com/users/27206/james-gregory"},"edited":false,"score":1,"creation_date":1352887763,"post_id":13375746,"comment_id":18266026,"content_license":"CC BY-SA 3.0","body":"It&#39;s there on OSX, though I had to right click on the columns and check the Goats Teleported item."},{"owner":{"reputation":1103,"user_id":5948,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/08c46737e830c3aeb4cbbde14dd57393?s=128&d=identicon&r=PG","display_name":"Mark Allen","link":"https://stackoverflow.com/users/5948/mark-allen"},"reply_to_user":{"reputation":50306,"user_id":99923,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/211755e2897f699737d63f5e2ecf5b07?s=128&d=identicon&r=PG","display_name":"Xeoncross","link":"https://stackoverflow.com/users/99923/xeoncross"},"edited":false,"score":4,"creation_date":1353023781,"post_id":13375746,"comment_id":18319992,"content_license":"CC BY-SA 3.0","body":"@Xeoncross Yes because nobody has put an easter egg in Windows software, ever."},{"owner":{"reputation":77059,"user_id":396458,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/16961c15df3fee8c4b3056ff83d1938b?s=128&d=identicon&r=PG","display_name":"NullUserException","link":"https://stackoverflow.com/users/396458/nulluserexception"},"edited":false,"score":2,"creation_date":1353024233,"post_id":13375746,"comment_id":18320113,"content_license":"CC BY-SA 3.0","body":"@pdknsk When your answer was deleted, it already had the latest edit. I think it&#39;s a decent explanation of what it is, but what&#39;s missing is an answer to the original question: <b>&quot;Does anyone know how and when this should be used?&quot;</b>"},{"owner":{"reputation":1220,"user_id":1126459,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/e6a9b5ac135325506a299b7840536661?s=128&d=identicon&r=PG","display_name":"CupOfTea696","link":"https://stackoverflow.com/users/1126459/cupoftea696"},"edited":false,"score":18,"creation_date":1353448746,"post_id":13375746,"comment_id":18447892,"content_license":"CC BY-SA 3.0","body":"It&#39;s likely that the inside joke has it&#39;s origins here: <a href=\"http://googleblog.blogspot.be/2010/04/goats-are-baaaahk.html\" rel=\"nofollow noreferrer\">googleblog.blogspot.be/2010/04/goats-are-baaaahk.html</a>"},{"owner":{"reputation":2307,"user_id":529664,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d347f545b426bebe31729e80cb15781b?s=128&d=identicon&r=PG","display_name":"om252345","link":"https://stackoverflow.com/users/529664/om252345"},"edited":false,"score":1,"creation_date":1391105167,"post_id":13375746,"comment_id":32392404,"content_license":"CC BY-SA 3.0","body":"@pdknsk goats are those creatures who follow each other, or used to follow leading goat without thinking, so gotchas too many goats in programming world.  This might be someone&#39;s style @ google to say so. Do not follow without thinking."},{"owner":{"reputation":713,"user_id":799322,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8983d49f085ddcfdcdd509a699bb3fb4?s=128&d=identicon&r=PG","display_name":"Thanos","link":"https://stackoverflow.com/users/799322/thanos"},"edited":false,"score":0,"creation_date":1569823465,"post_id":13375746,"comment_id":102706238,"content_license":"CC BY-SA 4.0","body":"seed from goat salt. interesting."},{"owner":{"reputation":3058,"user_id":1541397,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG","display_name":"David Callanan","link":"https://stackoverflow.com/users/1541397/david-callanan"},"reply_to_user":{"reputation":2307,"user_id":529664,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d347f545b426bebe31729e80cb15781b?s=128&d=identicon&r=PG","display_name":"om252345","link":"https://stackoverflow.com/users/529664/om252345"},"edited":false,"score":0,"creation_date":1578153159,"post_id":13375746,"comment_id":105349744,"content_license":"CC BY-SA 4.0","body":"@om252345 I thought that was a sheep, not a goat."},{"owner":{"reputation":16803,"user_id":1079901,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/oEWB8.png?s=128&g=1","display_name":"noob","link":"https://stackoverflow.com/users/1079901/noob"},"edited":false,"score":0,"creation_date":1592760779,"post_id":13375746,"comment_id":110533819,"content_license":"CC BY-SA 4.0","body":"This is no longer an available column in the recent chrome versions (Checking in Chrome 83 macOS build)"}],"owner":{"user_type":"does_not_exist","display_name":"user479870"},"comment_count":14,"is_accepted":false,"score":776,"last_activity_date":1352941607,"last_edit_date":1352941607,"creation_date":1352883787,"answer_id":13375746,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>This appears to be an inside joke at Google. It's also featured in the Google Chrome task manager. It has no purpose, other than some engineers finding it amusing. Which is a purpose by itself, if you will.</p>\n\n<ol>\n<li>In Chrome, open the Task Manager with <kbd>Shift</kbd>+<kbd>Esc</kbd>. </li>\n<li>Right click to add the  <code>Goats Teleported</code> column.</li>\n<li>Wonder.</li>\n</ol>\n\n<p>There is even a huge Chromium bug report about <a href=\"http://code.google.com/p/chromium/issues/detail?id=31482\">too many teleported goats</a>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/1nwdC.png\" alt=\"chrome\">  </p>\n\n<p>The following Chromium <a href=\"http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599\">source code snippet</a> is stolen from the <a href=\"http://news.ycombinator.com/item?id=4782574\">HN</a> comments.</p>\n\n<pre><code>int TaskManagerModel::GetGoatsTeleported(int index) const {\n  int seed = goat_salt_ * (index + 1);\n  return (seed &gt;&gt; 16) &amp; 255;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"reply_to_user":{"reputation":1277,"user_id":305256,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/aa4ba4cf1b299da22ba4ec4159224d16?s=128&d=identicon&r=PG","display_name":"penguat","link":"https://stackoverflow.com/users/305256/penguat"},"edited":false,"score":1,"creation_date":1352905559,"post_id":13381101,"comment_id":18274173,"content_license":"CC BY-SA 3.0","body":"My bad - those are warnings, however they often lead to actual compile errors if you are returning from a block that control flow is now forced down."},{"owner":{"reputation":8025,"user_id":347348,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/40cd07bc9546df9840ba02f04607f681?s=128&d=identicon&r=PG","display_name":"Andy","link":"https://stackoverflow.com/users/347348/andy"},"edited":false,"score":2,"creation_date":1352916819,"post_id":13381101,"comment_id":18279795,"content_license":"CC BY-SA 3.0","body":"Wouldn&#39;t compiler directive be a better use for conditions you want to compile out?"},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"edited":false,"score":11,"creation_date":1352924677,"post_id":13381101,"comment_id":18283561,"content_license":"CC BY-SA 3.0","body":"@djechlin I do not know if this is android only, in standard java ` if(false){...}` compiles just fine (open jdk javac 1.6 and 1.7)"},{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"reply_to_user":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"edited":false,"score":2,"creation_date":1352924807,"post_id":13381101,"comment_id":18283615,"content_license":"CC BY-SA 3.0","body":"@josefx - compiler warnings and can lead to errors if the branch the code is forced down has a <code>return</code> statement as this produces unreachable code.  This is a useful compiler error; e.g. if you forget <code>break;</code> statements in a switch and your <code>default</code> case throws an exception, you will get this error."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"edited":false,"score":0,"creation_date":1352925380,"post_id":13381101,"comment_id":18283868,"content_license":"CC BY-SA 3.0","body":"@djechlin sorry, I somehow failed to read your first sentence after seeing your (1==2) example - that if(false) is handled by the compiler is a downside in this case (and I should get some sleep to avoid more of these mistakes :-))."},{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"reply_to_user":{"reputation":119447,"user_id":546661,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/233308e20f7e2236848f31c2b0b865dd?s=128&d=identicon&r=PG","display_name":"Peter Olson","link":"https://stackoverflow.com/users/546661/peter-olson"},"edited":false,"score":10,"creation_date":1352944898,"post_id":13381101,"comment_id":18290052,"content_license":"CC BY-SA 3.0","body":"@PeterOlson - if you are specifically trying to test a code branch where an if goes false or true, this is the most precise and obvious way to simulate that - commenting out the block could be less accurate if you don&#39;t match to the proper end of the block (perhaps you didn&#39;t notice a discreet if/else block immediately following), it will lead to a compile error if you&#39;re forcing to the following <code>else</code> block, etc."},{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"reply_to_user":{"reputation":20767,"user_id":603516,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG","display_name":"Vadzim","link":"https://stackoverflow.com/users/603516/vadzim"},"edited":false,"score":2,"creation_date":1381333384,"post_id":13381101,"comment_id":28540524,"content_license":"CC BY-SA 3.0","body":"@Vadzim nope, compiler will detect that always evaluates to true."},{"owner":{"reputation":7947,"user_id":440921,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/UnEvy.jpg?s=128&g=1","display_name":"Mark Whitaker","link":"https://stackoverflow.com/users/440921/mark-whitaker"},"edited":false,"score":174,"creation_date":1415190596,"post_id":13381101,"comment_id":42096314,"content_license":"CC BY-SA 3.0","body":"<b>&quot;provided the implementation doesn&#39;t change&quot;</b> - and there&#39;s the problem. This is a disastrous way to implement a warning-free &quot;if (false)&quot; because the implementation can and does change. See my answer to this question: as of API21 <code>isUserAGoat()</code> returns true if a user has a specific app installed. Good luck diagnosing that when your code suddenly starts behaving oddly on &quot;random&quot; devices!"},{"owner":{"reputation":6625,"user_id":152796,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/ffffd204ecbbae82a04f5b574d76746b?s=128&d=identicon&r=PG","display_name":"thedayturns","link":"https://stackoverflow.com/users/152796/thedayturns"},"reply_to_user":{"reputation":7947,"user_id":440921,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/UnEvy.jpg?s=128&g=1","display_name":"Mark Whitaker","link":"https://stackoverflow.com/users/440921/mark-whitaker"},"edited":false,"score":14,"creation_date":1455760318,"post_id":13381101,"comment_id":58638067,"content_license":"CC BY-SA 3.0","body":"@MarkWhitaker Or if goats start using devices."},{"owner":{"reputation":457,"user_id":1928271,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/c37ae174afda83f600d9ec5a40e4218b?s=128&d=identicon&r=PG","display_name":"Szymon Drosdzol","link":"https://stackoverflow.com/users/1928271/szymon-drosdzol"},"reply_to_user":{"reputation":6625,"user_id":152796,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/ffffd204ecbbae82a04f5b574d76746b?s=128&d=identicon&r=PG","display_name":"thedayturns","link":"https://stackoverflow.com/users/152796/thedayturns"},"edited":false,"score":10,"creation_date":1456751790,"post_id":13381101,"comment_id":59077314,"content_license":"CC BY-SA 3.0","body":"@thedayturns If goats start using Android devices this will be the least of our problems."},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"edited":false,"score":2,"creation_date":1458424973,"post_id":13381101,"comment_id":59857259,"content_license":"CC BY-SA 3.0","body":"@djechlin No it isn&#39;t, did you actually try it?"},{"owner":{"reputation":342,"user_id":4773888,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YMhMR.jpg?s=128&g=1","display_name":"BlueWizard","link":"https://stackoverflow.com/users/4773888/bluewizard"},"edited":false,"score":2,"creation_date":1479197820,"post_id":13381101,"comment_id":68444719,"content_license":"CC BY-SA 3.0","body":"have you tried using /* and */ for commenting out code?"}],"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"comment_count":12,"is_accepted":false,"score":994,"last_activity_date":1518470024,"last_edit_date":1518470024,"creation_date":1352904449,"answer_id":13381101,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>I don't know if this was \"the\" official use case, but the following produces a warning in Java (that can further produce compile errors if mixed with <code>return</code> statements, leading to unreachable code):</p>\n\n<pre><code>while (1 == 2) { // Note that \"if\" is treated differently\n    System.out.println(\"Unreachable code\");\n}\n</code></pre>\n\n<p>However this is legal:</p>\n\n<pre><code>while (isUserAGoat()) {\n    System.out.println(\"Unreachable but determined at runtime, not at compile time\");\n}\n</code></pre>\n\n<p>So I often find myself writing a silly utility method for the quickest way to dummy out a code block, then in completing debugging find all calls to it, so provided the implementation doesn't change this can be used for that.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21\" rel=\"noreferrer\">JLS</a> points out <code>if (false)</code> does not trigger \"unreachable code\" for the specific reason that this would break support for debug flags, i.e., basically this use case (h/t @auselen). (<code>static final boolean DEBUG = false;</code> for instance).</p>\n\n<p>I replaced <code>while</code> for <code>if</code>, producing a more obscure use case. I <em>believe</em> you can trip up your IDE, like Eclipse, with this behavior, but this edit is 4 years into the future, and I don't have an Eclipse environment to play with.</p>\n"},{"comments":[{"owner":{"reputation":1579,"user_id":1482388,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/a5d1728a81f479389bf474290e5b96db?s=128&d=identicon&r=PG","display_name":"Angelo.Hannes","link":"https://stackoverflow.com/users/1482388/angelo-hannes"},"edited":false,"score":11,"creation_date":1352968243,"post_id":13383962,"comment_id":18295353,"content_license":"CC BY-SA 3.0","body":"&quot;There&#39;s a funny named method/constant/whatever in each version of Android.&quot; Could you name some?"},{"owner":{"reputation":6898,"user_id":628447,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/b1e3e0cfe207c32be204d7258580fe6d?s=128&d=identicon&r=PG","display_name":"Aracem","link":"https://stackoverflow.com/users/628447/aracem"},"edited":false,"score":48,"creation_date":1352976111,"post_id":13383962,"comment_id":18298551,"content_license":"CC BY-SA 3.0","body":"For example, there are a nivel of log called Log.wtf that they call What a Terrible Failure :P"},{"owner":{"reputation":5777,"user_id":22545,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3ae195fdc56e0bb8fb98536ac442efcb?s=128&d=identicon&r=PG","display_name":"Gerry Coll","link":"https://stackoverflow.com/users/22545/gerry-coll"},"edited":false,"score":8,"creation_date":1352976764,"post_id":13383962,"comment_id":18298874,"content_license":"CC BY-SA 3.0","body":"A bit like Delphi&#39;s EProgrammerNotFound? <a href=\"http://stackoverflow.com/questions/2084120/eprogrammernotfound-exception-in-delphi\" title=\"eprogrammernotfound exception in delphi\">stackoverflow.com/questions/2084120/&hellip;</a>"},{"owner":{"reputation":6247,"user_id":244521,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e0b93762fe53d7a5d1ca735404961eba?s=128&d=identicon&r=PG","display_name":"Lance Nanek","link":"https://stackoverflow.com/users/244521/lance-nanek"},"edited":false,"score":12,"creation_date":1352988665,"post_id":13383962,"comment_id":18304344,"content_license":"CC BY-SA 3.0","body":"HoneyComb is AdapterViewAnimator#fyiWillBeAdvancedByHostKThx()"},{"owner":{"reputation":32517,"user_id":216517,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/9d5cb786a40fe045ecacad6b29eb782a?s=128&d=identicon&r=PG","display_name":"st0le","link":"https://stackoverflow.com/users/216517/st0le"},"reply_to_user":{"reputation":1579,"user_id":1482388,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/a5d1728a81f479389bf474290e5b96db?s=128&d=identicon&r=PG","display_name":"Angelo.Hannes","link":"https://stackoverflow.com/users/1482388/angelo-hannes"},"edited":false,"score":18,"creation_date":1352991491,"post_id":13383962,"comment_id":18305932,"content_license":"CC BY-SA 3.0","body":"@Angelo.Hannes, In the Sensor Constants for Gravity there&#39;s one for Death Star (Star Wars)"},{"owner":{"reputation":398,"user_id":116853,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/65278539c6c7b4e07bcb8a71e5e2a342?s=128&d=identicon&r=PG","display_name":"peejaybee","link":"https://stackoverflow.com/users/116853/peejaybee"},"edited":false,"score":5,"creation_date":1362493436,"post_id":13383962,"comment_id":21463504,"content_license":"CC BY-SA 3.0","body":"In 1.5 there was a &quot;Tricorder&quot; sensor type."},{"owner":{"reputation":382,"user_id":4144974,"user_type":"registered","profile_image":"https://i.stack.imgur.com/pXJYy.png?s=128&g=1","display_name":"Emil S.","link":"https://stackoverflow.com/users/4144974/emil-s"},"reply_to_user":{"reputation":6898,"user_id":628447,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/b1e3e0cfe207c32be204d7258580fe6d?s=128&d=identicon&r=PG","display_name":"Aracem","link":"https://stackoverflow.com/users/628447/aracem"},"edited":false,"score":2,"creation_date":1542300164,"post_id":13383962,"comment_id":93528712,"content_license":"CC BY-SA 4.0","body":"@Aracem That one is actually useful and not so much an easter egg. I&#39;ve used that one quite a lot for errors that break functionality but shouldn&#39;t happen (i.e. for if Exceptions get thrown that I prevent with a previous check). It is a far better solution than just ignoring the error."}],"owner":{"reputation":6247,"user_id":244521,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e0b93762fe53d7a5d1ca735404961eba?s=128&d=identicon&r=PG","display_name":"Lance Nanek","link":"https://stackoverflow.com/users/244521/lance-nanek"},"comment_count":7,"is_accepted":false,"score":154,"last_activity_date":1355107585,"last_edit_date":1355107585,"creation_date":1352913964,"answer_id":13383962,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>There's a funny named method/constant/whatever in each version of Android. </p>\n\n<p>The only practical use I ever saw was in the Last Call for <a href=\"http://en.wikipedia.org/wiki/Google_I/O\">Google I/O</a> Contest where they asked what it was for a particular version, to see if contestants read the API diff report for each release. The contest had programming problems too, but generally some trivia that could be graded automatically first to get the number of submissions down to reasonable amounts that would be easier to check.</p>\n"},{"comments":[{"owner":{"reputation":29389,"user_id":249538,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/1h9re.jpg?s=128&g=1","display_name":"goat","link":"https://stackoverflow.com/users/249538/goat"},"edited":false,"score":4,"creation_date":1410928192,"post_id":13395669,"comment_id":40505613,"content_license":"CC BY-SA 3.0","body":"ibm is also rumored to have goat references throughout various internal software."}],"owner":{"reputation":3770,"user_id":504299,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/63029017891acda218fbac25a93b4b1d?s=128&d=identicon&r=PG","display_name":"rickyduck","link":"https://stackoverflow.com/users/504299/rickyduck"},"comment_count":1,"is_accepted":false,"score":130,"last_activity_date":1461238707,"last_edit_date":1495540052,"creation_date":1352975623,"answer_id":13395669,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>Google has a serious liking for goats and goat based <a href=\"http://en.wikipedia.org/wiki/Easter_egg_%28media%29#Software\" rel=\"noreferrer\">Easter eggs</a>. There has even been <a href=\"https://stackoverflow.com/questions/3350892/graph-goat-teleportation-data-with-google-vis-api-via-chrome-extension\">previous Stack&nbsp;Overflow posts about it</a>. </p>\n\n<p>As has been mentioned in previous posts, it also exists within the Chrome task manager (<a href=\"http://src.chromium.org/viewvc/chrome/trunk/src/chrome/app/generated_resources.grd?r1=27169&amp;r2=27216\" rel=\"noreferrer\">it first appeared in the wild in 2009</a>):</p>\n\n<pre><code>&lt;message name=\"IDS_TASK_MANAGER_GOATS_TELEPORTED_COLUMN\" desc=\"The goats teleported column\"&gt;\n    Goats Teleported\n&lt;/message&gt;\n</code></pre>\n\n<p><a href=\"http://techie-buzz.com/featured/google-chrome-goats-teleported-easter-egg.html\" rel=\"noreferrer\">And then in Windows, Linux and Mac versions of Chrome early 2010</a>). The number of \"Goats Teleported\" is in fact <a href=\"http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599\" rel=\"noreferrer\">random</a>:</p>\n\n<pre><code> int TaskManagerModel::GetGoatsTeleported(int index) const {\n     int seed = goat_salt_ * (index + 1);\n     return (seed &gt;&gt; 16) &amp; 255;\n }\n</code></pre>\n\n<p>Other Google references to goats include:</p>\n\n<ul>\n<li><a href=\"http://googleblog.blogspot.co.uk/2009/05/mowing-with-goats.html\" rel=\"noreferrer\">Mowing with goats</a></li>\n<li><a href=\"http://googleblog.blogspot.co.uk/2010/04/goats-are-baaaahk.html\" rel=\"noreferrer\">The goats are baaaahk</a></li>\n</ul>\n\n<p>The earliest correlation of goats and Google belongs in the original \"Mowing with goats\" blog post, as far as I can tell.</p>\n\n<p>We can safely assume that it's merely an Easter egg and has no real-world use, except for returning <code>false</code>.</p>\n"},{"comments":[{"owner":{"reputation":664,"user_id":1024129,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0c1a66f8237516543d0f90f2be07cf02?s=128&d=identicon&r=PG","display_name":"CtrlF","link":"https://stackoverflow.com/users/1024129/ctrlf"},"edited":false,"score":3,"creation_date":1390896988,"post_id":13424726,"comment_id":32279530,"content_license":"CC BY-SA 3.0","body":"My assumption with this one is it allows the <code>ActivityManager</code> to report if it has been invoked by the <code>monkey</code> ui stress testing tool, but i have never confirmed this."}],"owner":{"reputation":3345,"user_id":1143639,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/2ad387b358af367c236a391275c11af3?s=128&d=identicon&r=PG&f=1","display_name":"KDEx","link":"https://stackoverflow.com/users/1143639/kdex"},"comment_count":1,"is_accepted":false,"score":112,"last_activity_date":1456064714,"last_edit_date":1495542396,"creation_date":1353101623,"answer_id":13424726,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>There is a similar call, <code>isUserAMonkey()</code>, that returns true if the <a href=\"http://developer.android.com/tools/help/monkeyrunner_concepts.html\" rel=\"noreferrer\">MonkeyRunner tool</a> is being used. The SDK explanation is just as curious as this one. </p>\n\n<blockquote>\n<pre><code>public static boolean isUserAMonkey(){}     \n</code></pre>\n  \n  <p>Returns <code>true</code> if the user interface is currently being messed with by a monkey.</p>\n</blockquote>\n\n<p><a href=\"http://developer.android.com/reference/android/app/ActivityManager.html\" rel=\"noreferrer\">Here</a> is the source. </p>\n\n<p>I expect that this was added in anticipation of a new <a href=\"http://en.wikipedia.org/wiki/Software_development_kit\" rel=\"noreferrer\">SDK</a> tool named something with a goat and will <em>actually</em> be functional to test for the presence of that tool.  </p>\n\n<p>Also see a similar question, <strong><a href=\"https://stackoverflow.com/questions/7792123/strange-function-in-activitymanager-isuseramonkey-what-does-this-mean-what-i\">Strange function in ActivityManager: isUserAMonkey. What does this mean, what is its use?</a></strong>.</p>\n"},{"comments":[{"owner":{"reputation":3416,"user_id":415625,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tzF8H.jpg?s=128&g=1","display_name":"Tomasz","link":"https://stackoverflow.com/users/415625/tomasz"},"edited":false,"score":15,"creation_date":1367353017,"post_id":13498177,"comment_id":23349740,"content_license":"CC BY-SA 3.0","body":"If you are writing &quot;dummy&quot; code just to quickly test something, what is the problem with an Eclipse warning?? I think this is actually great as you can find it in case you&#39;ve forgotten"},{"owner":{"reputation":14618,"user_id":1041822,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1fc976c3c3e2819f639f300378692c6d?s=128&d=identicon&r=PG","display_name":"higuaro","link":"https://stackoverflow.com/users/1041822/higuaro"},"reply_to_user":{"reputation":3416,"user_id":415625,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tzF8H.jpg?s=128&g=1","display_name":"Tomasz","link":"https://stackoverflow.com/users/415625/tomasz"},"edited":false,"score":21,"creation_date":1368051519,"post_id":13498177,"comment_id":23598472,"content_license":"CC BY-SA 3.0","body":"@Tomasz the problem is that, in Eclipse, the warning mark clutters the breakpoint, and you have to open the breakpoint view to either deactivate or remove it"},{"owner":{"reputation":3416,"user_id":415625,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tzF8H.jpg?s=128&g=1","display_name":"Tomasz","link":"https://stackoverflow.com/users/415625/tomasz"},"edited":false,"score":4,"creation_date":1368063638,"post_id":13498177,"comment_id":23601641,"content_license":"CC BY-SA 3.0","body":"Yeah, I have a solution for that. You can right click on the warning symbol and select &quot;Toggle Breakpoint&quot;. If the following line/option is enabled it means the breakpoint is created. My point was, dummy code is bad and it should be a warning so yo don&#39;t forget ;)"},{"owner":{"reputation":14618,"user_id":1041822,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1fc976c3c3e2819f639f300378692c6d?s=128&d=identicon&r=PG","display_name":"higuaro","link":"https://stackoverflow.com/users/1041822/higuaro"},"reply_to_user":{"reputation":3416,"user_id":415625,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tzF8H.jpg?s=128&g=1","display_name":"Tomasz","link":"https://stackoverflow.com/users/415625/tomasz"},"edited":false,"score":9,"creation_date":1368715903,"post_id":13498177,"comment_id":23844506,"content_license":"CC BY-SA 3.0","body":"@Tomasz The problem with that solution is that you have know beforehand where the breakpoint is, so a simple visual inspection won&#39;t let you know that the warning hides a breakpoint, an even better solution though, is to use conditional breakpoints, with them you can forget about dummy code (and convention methods) altogether, but those differ between IDE&#39;s and can&#39;t be automatically shared among workstations"},{"owner":{"reputation":1423,"user_id":3813188,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/8f00a75b89f2346ba7cb9c339d9858b3?s=128&d=identicon&r=PG&f=1","display_name":"Bassinator","link":"https://stackoverflow.com/users/3813188/bassinator"},"edited":false,"score":2,"creation_date":1489600633,"post_id":13498177,"comment_id":72746496,"content_license":"CC BY-SA 3.0","body":"Why not just use a null statement <code>;</code>? I mean, goats are clearly better, but there is an easy way around this already"},{"owner":{"reputation":1126,"user_id":1806193,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/d43d36c8c11f80e149f04978200b7414?s=128&d=identicon&r=PG","display_name":"luizfzs","link":"https://stackoverflow.com/users/1806193/luizfzs"},"edited":false,"score":0,"creation_date":1497457375,"post_id":13498177,"comment_id":76090554,"content_license":"CC BY-SA 3.0","body":"The warning <b>may</b> be due to the declaration of <i>dummy</i> variable without using, making the statement a <i>dead store</i>."},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":1,"creation_date":1523823747,"post_id":13498177,"comment_id":86707749,"content_license":"CC BY-SA 3.0","body":"Hey, it ain&#39;t called Eclipse for nothing!  I recommend changing your Eclipse settings so that you get a little vertical line next to your breakpoints.  That way, you can see whether they&#39;re on or off when you toggle them."},{"owner":{"reputation":3139,"user_id":1900770,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c1a8a6be3c115dba1b54264bbc103ffa?s=128&d=identicon&r=PG","display_name":"Davide","link":"https://stackoverflow.com/users/1900770/davide"},"edited":false,"score":0,"creation_date":1576843007,"post_id":13498177,"comment_id":105035797,"content_license":"CC BY-SA 4.0","body":"seriously are you using <code>isUserAGoat()</code> functions?"}],"owner":{"reputation":14618,"user_id":1041822,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1fc976c3c3e2819f639f300378692c6d?s=128&d=identicon&r=PG","display_name":"higuaro","link":"https://stackoverflow.com/users/1041822/higuaro"},"comment_count":8,"is_accepted":false,"score":298,"last_activity_date":1353927350,"last_edit_date":1495540979,"creation_date":1353516912,"answer_id":13498177,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>Complementing the @djechlin <a href=\"https://stackoverflow.com/a/13381101/956397\">answer</a> (good answer by the way!), this function call could be <strong>also</strong> used as dummy code to hold a breakpoint in an IDE when you want to stop in some specific iteration or a particular recursive call, for example:</p>\n\n<p><img src=\"https://i.stack.imgur.com/mW1Lf.png\" alt=\"enter image description here\"></p>\n\n<p><code>isUserAGoat()</code> could be used instead of a dummy variable declaration that will be shown in the IDE as a warning and, in Eclipse particular case, will clog the breakpoint mark, making it difficult to enable/disable it. If the method is used as a convention, all the invocations could be later filtered by some script (during commit phase maybe?).</p>\n\n<p><img src=\"https://i.stack.imgur.com/MFIBa.png\" alt=\"enter image description here\"></p>\n\n<p>Google guys are heavy Eclipse users (they provide several of their projects as Eclipse plugins: Android SDK, GAE, etc), so the @djechlin answer and this complementary answer make a lot of sense (at least for me).</p>\n"},{"owner":{"reputation":2983,"user_id":602856,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/eeeab38a47f70a5043b2d2e5531d8a8b?s=128&d=identicon&r=PG","display_name":"rainer198","link":"https://stackoverflow.com/users/602856/rainer198"},"comment_count":0,"is_accepted":false,"score":146,"last_activity_date":1518470195,"last_edit_date":1518470195,"creation_date":1369992824,"answer_id":16854187,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>In the discipline of speech recognition, users are divided into <em>goats</em> and <em>sheeps</em>. </p>\n\n<p>For instance, here <strong><a href=\"http://books.google.de/books?id=QWJ7KVMQk0cC&amp;lpg=PR1&amp;dq=voice%20enabling%20web&amp;hl=de&amp;pg=PA89#v=onepage&amp;q=voice%20enabling%20web&amp;f=false\" rel=\"noreferrer\">on page 89</a></strong>:</p>\n\n<blockquote>\n  <p>Sheeps are people for whom speech recognition works exceptionally well, and goats are people for whom it works exceptionally poorly. Only the voice recognizer knows what separates them. People can't predict whose voice will be recognized easily and whose won't. The best policy is to design the interface so it can handle all kinds of voices in all kinds of environments</p>\n</blockquote>\n\n<p>Maybe, it is planned to mark Android users as goats in the future to be able to configure the speech recognition engine for goats' needs. ;-)</p>\n"},{"owner":{"reputation":2606,"user_id":2619679,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/c27382e347a9dc46d04fac17bc23f885?s=128&d=identicon&r=PG&f=1","display_name":"j.c","link":"https://stackoverflow.com/users/2619679/j-c"},"comment_count":0,"is_accepted":false,"score":43,"last_activity_date":1461238728,"last_edit_date":1461238728,"creation_date":1391682913,"answer_id":21600378,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p>Funny Easter Egg.<br/> \nIn Ubuntu version of Chrome, in Task Manager (<kbd>shift</kbd>+<kbd>esc</kbd>), with right-click you can add a sci-fi column that in italian version is \"Capre Teletrasportate\" (Teleported Goats).</p>\n\n<p>A funny theory about it is <a href=\"http://news.softpedia.com/news/Chrome-s-quot-Goats-Teleported-quot-Easter-Egg-Hints-at-a-Wonderful-Future-323197.shtml\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"edited":false,"score":20,"creation_date":1415203019,"post_id":26462960,"comment_id":42104292,"content_license":"CC BY-SA 3.0","body":"Why would anyone ever put any kind of <code>if(false)</code> in production? Come on here. If that&#39;s what your code looks like then this implementation changing is the <i>least</i> of your problems."},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"reply_to_user":{"reputation":54107,"user_id":1339987,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG","display_name":"djechlin","link":"https://stackoverflow.com/users/1339987/djechlin"},"edited":false,"score":0,"creation_date":1601048237,"post_id":26462960,"comment_id":113292495,"content_license":"CC BY-SA 4.0","body":"@djechlin &quot;do we need this feature? <i>changes to if(false)</i>, <i>tests feature</i> nope. <i>checks in</i>&quot;"}],"owner":{"reputation":7947,"user_id":440921,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/UnEvy.jpg?s=128&g=1","display_name":"Mark Whitaker","link":"https://stackoverflow.com/users/440921/mark-whitaker"},"comment_count":2,"is_accepted":false,"score":133,"last_activity_date":1505903407,"last_edit_date":1505903407,"creation_date":1413799229,"answer_id":26462960,"question_id":13375357,"content_license":"CC BY-SA 3.0","body":"<p><a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r1/core/java/android/os/UserManager.java#433\" rel=\"noreferrer\">As of API 21 (the first Android 5.0/Lollipop SDK)</a>, this detects whether the <a href=\"https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator&amp;hl=en\" rel=\"noreferrer\">Goat Simulator</a> app is installed:</p>\n\n<pre><code>/**\n * Used to determine whether the user making this call is subject to\n * teleportations.\n *\n * &lt;p&gt;As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can\n * now automatically identify goats using advanced goat recognition technology.&lt;/p&gt;\n *\n * @return Returns true if the user making this call is a goat.\n */\npublic boolean isUserAGoat() {\n    return mContext.getPackageManager()\n            .isPackageAvailable(\"com.coffeestainstudios.goatsimulator\");\n}\n</code></pre>\n\n<p>This should make it clear that <a href=\"https://stackoverflow.com/questions/13375357/proper-use-cases-for-android-usermanager-isuseragoat/13381101#13381101\">djechlin's suggestion</a> of using it as a warning-free <code>if (false)</code> is a potentially disastrous strategy. What previously returned <code>false</code> for every device now returns a seemingly random value: if this was buried deep enough in your code it could take a <em>long</em> time to figure out where your new bugs are coming from.</p>\n\n<p>Bottom line: if you don't control the implementation of a method and decide to use it for purposes other than stated in the API documentation, you're heading for trouble.</p>\n"},{"comments":[{"owner":{"reputation":573,"user_id":5791681,"user_type":"registered","profile_image":"https://i.stack.imgur.com/8h6rA.jpg?s=128&g=1","display_name":"Ricardo A.","link":"https://stackoverflow.com/users/5791681/ricardo-a"},"edited":false,"score":11,"creation_date":1559650032,"post_id":53354608,"comment_id":99480554,"content_license":"CC BY-SA 4.0","body":"The method was created before the goat simulator. Although it checks if the app is installed now, it didn&#39;t do anything before. And it&#39;s a joke anyway."},{"owner":{"reputation":13472,"user_id":497132,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/Ou3th.jpg?s=128&g=1","display_name":"artem","link":"https://stackoverflow.com/users/497132/artem"},"edited":false,"score":2,"creation_date":1597693305,"post_id":53354608,"comment_id":112211884,"content_license":"CC BY-SA 4.0","body":"Google Chrome&#39;s tab monitor had an easter egg column &#171;goats teleported&#187; (and <code>isUserAGoat</code> docs refers to goats teleportation too. So it&#39;s definitely an internal joke."}],"owner":{"reputation":434,"user_id":6116090,"user_type":"registered","profile_image":"https://i.stack.imgur.com/bWBZ2.png?s=128&g=1","display_name":"Gadget Guru","link":"https://stackoverflow.com/users/6116090/gadget-guru"},"comment_count":2,"is_accepted":false,"score":4,"last_activity_date":1575456561,"last_edit_date":1575456561,"creation_date":1542481902,"answer_id":53354608,"question_id":13375357,"content_license":"CC BY-SA 4.0","body":"<p><strong>It's not an inside joke</strong></p>\n\n<p>Apparently it's just an application checker for\n<a href=\"https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator\" rel=\"nofollow noreferrer\">Goat Simulator - by Coffee Stain Studios</a></p>\n\n<p>If you have Goat Simulator installed, you're a goat.\nIf you don't have it installed, you're not a goat.</p>\n\n<p>I imagine it was more of a personal experiment by one of the developers, most likely to find people with a common interest.</p>\n"}],"owner":{"reputation":67951,"user_id":542091,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/rQ7vZ.jpg?s=128&g=1","display_name":"Ovidiu Latcu","link":"https://stackoverflow.com/users/542091/ovidiu-latcu"},"comment_count":5,"is_answered":true,"view_count":321734,"protected_date":1353543106,"accepted_answer_id":13375461,"answer_count":11,"score":3734,"last_activity_date":1608224168,"creation_date":1352882041,"last_edit_date":1536308514,"question_id":13375357,"link":"https://stackoverflow.com/questions/13375357/proper-use-cases-for-android-usermanager-isuseragoat","title":"Proper use cases for Android UserManager.isUserAGoat()?","body":"<p>I was looking at the new APIs introduced in <a href=\"http://en.wikipedia.org/wiki/Android_version_history#Android_4.1.2F4.2_Jelly_Bean\" rel=\"noreferrer\">Android 4.2</a>.\nWhile looking at the <a href=\"http://developer.android.com/reference/android/os/UserManager.html\" rel=\"noreferrer\"><code>UserManager</code></a> class I came across the following method:</p>\n\n<blockquote>\n<pre><code>public boolean isUserAGoat()\n</code></pre>\n  \n  <p>Used to determine whether the user making this call is subject to teleportations.</p>\n  \n  <p>Returns whether the user making this call is a goat.</p>\n</blockquote>\n\n<p>How and when should this be used?</p>\n"},{"tags":["java","casting","operators","variable-assignment","assignment-operator"],"comments":[{"owner":{"reputation":1558,"user_id":4362954,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RZVv4.jpg?s=128&g=1","display_name":"SQLDiver","link":"https://stackoverflow.com/users/4362954/sqldiver"},"edited":false,"score":140,"creation_date":1420475508,"post_id":8710619,"comment_id":43977368,"content_license":"CC BY-SA 3.0","body":"I&#39;m surprised Java allows this, being a stricter language than its predecessors.  Errors in casting can lead to critical failure, as was the case with Ariane5 Flight 501 where a 64-bit float cast to a 16-bit integer resulted in the crash."},{"owner":{"reputation":7455,"user_id":2075524,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/zXhmg.png?s=128&g=1","display_name":"Ross Drew","link":"https://stackoverflow.com/users/2075524/ross-drew"},"reply_to_user":{"reputation":1558,"user_id":4362954,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RZVv4.jpg?s=128&g=1","display_name":"SQLDiver","link":"https://stackoverflow.com/users/4362954/sqldiver"},"edited":false,"score":114,"creation_date":1446456272,"post_id":8710619,"comment_id":54733887,"content_license":"CC BY-SA 3.0","body":"In a flight control system written in Java, this would be the least of your worries @SQLDiver"},{"owner":{"reputation":796,"user_id":5932611,"user_type":"registered","profile_image":"https://i.stack.imgur.com/iYD5D.jpg?s=128&g=1","display_name":"Tharindu Sathischandra","link":"https://stackoverflow.com/users/5932611/tharindu-sathischandra"},"edited":false,"score":10,"creation_date":1458287122,"post_id":8710619,"comment_id":59802365,"content_license":"CC BY-SA 3.0","body":"Actually <code>i+=(long)j;</code> even will compile fine."},{"owner":{"reputation":22366,"user_id":1915893,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG","display_name":"Aluan Haddad","link":"https://stackoverflow.com/users/1915893/aluan-haddad"},"edited":false,"score":0,"creation_date":1500558254,"post_id":8710619,"comment_id":77399293,"content_license":"CC BY-SA 3.0","body":"I think Douglas Crockford wins the argument after all... This behavior is terrible and lots of languages have similar problems around conversions."},{"owner":{"reputation":30154,"user_id":1013719,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1","display_name":"Ryan Haining","link":"https://stackoverflow.com/users/1013719/ryan-haining"},"reply_to_user":{"reputation":796,"user_id":5932611,"user_type":"registered","profile_image":"https://i.stack.imgur.com/iYD5D.jpg?s=128&g=1","display_name":"Tharindu Sathischandra","link":"https://stackoverflow.com/users/5932611/tharindu-sathischandra"},"edited":false,"score":1,"creation_date":1503276218,"post_id":8710619,"comment_id":78533884,"content_license":"CC BY-SA 3.0","body":"@Tharindu that&#39;s consistent though, since the whole expression gets casted, so it&#39;s the same as as <code>i = (int)(i + (long)j);</code>"},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":6,"creation_date":1505837024,"post_id":8710619,"comment_id":79572312,"content_license":"CC BY-SA 3.0","body":"The constant push by one set of developers for accuracy and another for ease of use is really interesting.   We almost need two versions of the language, one that is amazingly precise and one that is easy to use.  Pushing Java from both directions moves it towards being unsuitable for either group."},{"owner":{"reputation":2637,"user_id":1070480,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/6c5c61cd66cede1455405ebc8e89d502?s=128&d=identicon&r=PG","display_name":"HelloGoodbye","link":"https://stackoverflow.com/users/1070480/hellogoodbye"},"reply_to_user":{"reputation":7455,"user_id":2075524,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/zXhmg.png?s=128&g=1","display_name":"Ross Drew","link":"https://stackoverflow.com/users/2075524/ross-drew"},"edited":false,"score":2,"creation_date":1539856333,"post_id":8710619,"comment_id":92656275,"content_license":"CC BY-SA 4.0","body":"@RossDrew Why is that not a good idea?"},{"owner":{"reputation":2637,"user_id":1070480,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/6c5c61cd66cede1455405ebc8e89d502?s=128&d=identicon&r=PG","display_name":"HelloGoodbye","link":"https://stackoverflow.com/users/1070480/hellogoodbye"},"reply_to_user":{"reputation":796,"user_id":5932611,"user_type":"registered","profile_image":"https://i.stack.imgur.com/iYD5D.jpg?s=128&g=1","display_name":"Tharindu Sathischandra","link":"https://stackoverflow.com/users/5932611/tharindu-sathischandra"},"edited":false,"score":2,"creation_date":1539856465,"post_id":8710619,"comment_id":92656361,"content_license":"CC BY-SA 4.0","body":"@Tharindu What did you excpect? You are casting <code>j</code> to <code>long</code>, but <code>j</code> is already a <code>long</code>, so your casting doesn&#39;t do anything."},{"owner":{"reputation":133,"user_id":1683629,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66c99827597303d24daaf0d72f45dd8f?s=128&d=identicon&r=PG","display_name":"Norill Tempest","link":"https://stackoverflow.com/users/1683629/norill-tempest"},"edited":false,"score":6,"creation_date":1540386575,"post_id":8710619,"comment_id":92845952,"content_license":"CC BY-SA 4.0","body":"if it did require casting, where would you put it? <code>i += (int) f;</code> casts f before addition, so it&#39;s not equivalent. <code>(int) i += f;</code> casts the result after assignment, not equivalent either. there would be no place to put a cast that would signify that you want to cast the value after adding, but before assignment."},{"owner":{"reputation":27765,"user_id":981744,"user_type":"registered","profile_image":"https://i.stack.imgur.com/qJi4S.png?s=128&g=1","display_name":"Erwin Bolwidt","link":"https://stackoverflow.com/users/981744/erwin-bolwidt"},"edited":false,"score":0,"creation_date":1548198448,"post_id":8710619,"comment_id":95455310,"content_license":"CC BY-SA 4.0","body":"&quot;it&#39;s floating point is not precise&quot; let&#39;s correct that-&gt; &quot;floating point is not precise&quot; (Java follows IEEE floating point standard). If you use floating point when calculations and you haven&#39;t analysed whether the error is within the bounds required for your application, and your application is critical, you are the one to blame - not the language."},{"owner":{"reputation":1558,"user_id":4362954,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RZVv4.jpg?s=128&g=1","display_name":"SQLDiver","link":"https://stackoverflow.com/users/4362954/sqldiver"},"reply_to_user":{"reputation":7455,"user_id":2075524,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/zXhmg.png?s=128&g=1","display_name":"Ross Drew","link":"https://stackoverflow.com/users/2075524/ross-drew"},"edited":false,"score":0,"creation_date":1567777701,"post_id":8710619,"comment_id":102076700,"content_license":"CC BY-SA 4.0","body":"@RossDrew The Ariane5 was a space rocket."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":0,"creation_date":1606955108,"post_id":8710619,"comment_id":115123714,"content_license":"CC BY-SA 4.0","body":"This is a huge source of bugs in Java."}],"answers":[{"comments":[{"owner":{"reputation":1354,"user_id":1114457,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/8e36b2cdc8d8ba3e26be043fec029430?s=128&d=identicon&r=PG","display_name":"bad_keypoints","link":"https://stackoverflow.com/users/1114457/bad-keypoints"},"edited":false,"score":43,"creation_date":1348294041,"post_id":8710685,"comment_id":16887547,"content_license":"CC BY-SA 3.0","body":"So <code>i+=j</code> compiles as I checked myself, but it would result in loss of precision right? If that&#39;s the case, why doesn&#39;t it allow it to happen in i=i+j also? Why bug us there?"},{"owner":{"reputation":177753,"user_id":521799,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG","display_name":"Lukas Eder","link":"https://stackoverflow.com/users/521799/lukas-eder"},"reply_to_user":{"reputation":1354,"user_id":1114457,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/8e36b2cdc8d8ba3e26be043fec029430?s=128&d=identicon&r=PG","display_name":"bad_keypoints","link":"https://stackoverflow.com/users/1114457/bad-keypoints"},"edited":false,"score":47,"creation_date":1348302719,"post_id":8710685,"comment_id":16889030,"content_license":"CC BY-SA 3.0","body":"@ronnieaka: I&#39;m guessing that the language designers felt that in one case (<code>i += j</code>), it is safer to assume that the loss of precision is desired as opposed to the other case (<code>i = i + j</code>)"},{"owner":{"reputation":1354,"user_id":1114457,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/8e36b2cdc8d8ba3e26be043fec029430?s=128&d=identicon&r=PG","display_name":"bad_keypoints","link":"https://stackoverflow.com/users/1114457/bad-keypoints"},"edited":false,"score":12,"creation_date":1348325547,"post_id":8710685,"comment_id":16893125,"content_license":"CC BY-SA 3.0","body":"No, its right there, infront of me! Sorry i didn&#39;t notice it earlier.  As in your answer, <code>E1 op= E2 is equivalent to E1 = (T)((E1) op (E2))</code>, so that&#39;s kind of like implicit down typecasting (down from long to int). Whereas in i = i+j, we have to do it explicitly, ie, provide the <code>(T)</code> part in <code>E1 = ((E1) op (E2))</code> Isn&#39;t it?"},{"owner":{"reputation":35520,"user_id":1424875,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/HFA9w.png?s=128&g=1","display_name":"nanofarad","link":"https://stackoverflow.com/users/1424875/nanofarad"},"edited":false,"score":4,"creation_date":1376317704,"post_id":8710685,"comment_id":26653946,"content_license":"CC BY-SA 3.0","body":"I&#39;d assume that this is used to avoid an explicit cast and/or <code>f</code> postfix in the situation of adding a double literal to a short?"},{"owner":{"reputation":971,"user_id":2227222,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d80812002213736d9576158000e84d98?s=128&d=identicon&r=PG","display_name":"Hans","link":"https://stackoverflow.com/users/2227222/hans"},"edited":false,"score":2,"creation_date":1393288111,"post_id":8710685,"comment_id":33347541,"content_license":"CC BY-SA 3.0","body":"So is E1 op1 op2 op3 = E2 valid and equivalent to E1 = T(E1 op3 (E1 op2 (E1 op1 E2)))?"},{"owner":{"reputation":177753,"user_id":521799,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG","display_name":"Lukas Eder","link":"https://stackoverflow.com/users/521799/lukas-eder"},"reply_to_user":{"reputation":971,"user_id":2227222,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/d80812002213736d9576158000e84d98?s=128&d=identicon&r=PG","display_name":"Hans","link":"https://stackoverflow.com/users/2227222/hans"},"edited":false,"score":2,"creation_date":1393311209,"post_id":8710685,"comment_id":33355259,"content_license":"CC BY-SA 3.0","body":"@Hans: You can&#39;t have several &quot;ops&quot; to the left of an assignment operator... I&#39;m sure this is covered elsewhere in the JLS"},{"owner":{"reputation":143,"user_id":4229629,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/56d76c0fb90562612e22509edda979e3?s=128&d=identicon&r=PG","display_name":"ThePyroEagle","link":"https://stackoverflow.com/users/4229629/thepyroeagle"},"edited":false,"score":11,"creation_date":1450818258,"post_id":8710685,"comment_id":56590413,"content_license":"CC BY-SA 3.0","body":"A likely reason to why the Java compiler adds a typecast is because if you&#39;re trying to perform arithmetic on incompatible types, there is no way of performing a typecast of the result using the contracted form. A typecast of the result is generally more accurate than a typecast of the problematic argument. No typecast would make the contraction useless when using incompatible types, as it would always cause the compiler to throw an error out."},{"owner":{"reputation":3278,"user_id":2223027,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7eda60a3a729d8a42d7251cf78f4bff8?s=128&d=identicon&r=PG","display_name":"pyb","link":"https://stackoverflow.com/users/2223027/pyb"},"edited":false,"score":0,"creation_date":1459631688,"post_id":8710685,"comment_id":60374952,"content_license":"CC BY-SA 3.0","body":"Why is 3 + 4.6 rounded to 7, not 8?"},{"owner":{"reputation":177753,"user_id":521799,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG","display_name":"Lukas Eder","link":"https://stackoverflow.com/users/521799/lukas-eder"},"edited":false,"score":6,"creation_date":1459687220,"post_id":8710685,"comment_id":60387875,"content_license":"CC BY-SA 3.0","body":"It&#39;s not rounded. It&#39;s cast (= truncated)"},{"owner":{"reputation":548,"user_id":5795938,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tPHml.png?s=128&g=1","display_name":"Stefan Neuhaus","link":"https://stackoverflow.com/users/5795938/stefan-neuhaus"},"edited":false,"score":1,"creation_date":1476551511,"post_id":8710685,"comment_id":67397746,"content_license":"CC BY-SA 3.0","body":"The <i>Puzzle 9</i> in the book &quot;<i>Java Puzzlers</i>&quot; (Joshua Bloch, Neal Gafter) covers exactly this issue. In the solution the authors highlight 2 phrases: &quot;<i>Compound assignment expressions automatically cast the result of the computation they perform to the type of the variable on their left-hand side.</i>&quot; --- &quot;<i>Do not use compound assignment operators on variables of type <code>byte</code>, <code>short</code>, or <code>char</code>.</i>&quot;"},{"owner":{"reputation":177753,"user_id":521799,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG","display_name":"Lukas Eder","link":"https://stackoverflow.com/users/521799/lukas-eder"},"reply_to_user":{"reputation":3217,"user_id":4743275,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/7f8p3.jpg?s=128&g=1","display_name":"KeyC0de","link":"https://stackoverflow.com/users/4743275/keyc0de"},"edited":false,"score":5,"creation_date":1500027657,"post_id":8710685,"comment_id":77172294,"content_license":"CC BY-SA 3.0","body":"@RestlessC0bra: I really really really hope that the JLS won&#39;t break incompatibly on that level :), so without trying (you could try this yourself), I&#39;ll say yes, the &quot;issue&quot; persists"}],"owner":{"reputation":177753,"user_id":521799,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG","display_name":"Lukas Eder","link":"https://stackoverflow.com/users/521799/lukas-eder"},"comment_count":11,"is_accepted":true,"score":2489,"last_activity_date":1586429652,"last_edit_date":1586429652,"creation_date":1325585723,"answer_id":8710685,"question_id":8710619,"content_license":"CC BY-SA 4.0","body":"<p>As always with these questions, the JLS holds the answer. In this case <a href=\"http://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">Â§15.26.2 Compound Assignment Operators</a>. An extract:</p>\n\n<blockquote>\n  <p>A compound assignment expression of the form <code>E1&nbsp;op=&nbsp;E2</code> is equivalent to <code>E1&nbsp;=&nbsp;(T)((E1)&nbsp;op&nbsp;(E2))</code>, where <code>T</code> is the type of <code>E1</code>, except that <code>E1</code> is evaluated only once.</p>\n</blockquote>\n\n<p>An example cited from <a href=\"http://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">Â§15.26.2</a></p>\n\n<blockquote>\n  <p>[...] the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n\n<p>In other words, your assumption is correct.</p>\n"},{"comments":[{"owner":{"reputation":11735,"user_id":223339,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/2bd0d1b04580c60fccc0bfa94d261456?s=128&d=identicon&r=PG","display_name":"Romain","link":"https://stackoverflow.com/users/223339/romain"},"edited":false,"score":7,"creation_date":1325585838,"post_id":8710688,"comment_id":10840773,"content_license":"CC BY-SA 3.0","body":"In this case, the &quot;implicit cast&quot; could be lossy. In reality, as @LukasEder states in his answer, the cast to <code>int</code> is performed <i>after</i> the <code>+</code>. The compiler would (should?) throw a warning if it really did cast the <code>long</code> to <code>int</code>."}],"owner":{"reputation":17300,"user_id":758708,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b94e55c6b4ffe3fc2f20af7cf2d3dc94?s=128&d=identicon&r=PG","display_name":"dku.rajkumar","link":"https://stackoverflow.com/users/758708/dku-rajkumar"},"comment_count":1,"is_accepted":false,"score":92,"last_activity_date":1325586421,"last_edit_date":1325586421,"creation_date":1325585748,"answer_id":8710688,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>you need to cast from <code>long</code> to <code>int</code> <code>explicitly</code> in case of <code>i = i + l</code>  then it will compile and give correct output. like </p>\n\n<pre><code>i = i + (int)l;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>i = (int)((long)i + l); // this is what happens in case of += , dont need (long) casting since upper casting is done implicitly.\n</code></pre>\n\n<p>but in case of <code>+=</code> it just works fine because the operator implicitly does the type casting from type of right variable to type of left variable so need not cast explicitly.</p>\n"},{"comments":[{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":17,"creation_date":1492716686,"post_id":8710717,"comment_id":74109663,"content_license":"CC BY-SA 3.0","body":"Or more fun: &quot;int x=33333333; x+=1.0f;&quot;."},{"owner":{"reputation":1367,"user_id":426371,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/0a0b346c3bf9c2e739b80c452a8727b0?s=128&d=identicon&r=PG","display_name":"neXus","link":"https://stackoverflow.com/users/426371/nexus"},"reply_to_user":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":5,"creation_date":1537533226,"post_id":8710717,"comment_id":91830401,"content_license":"CC BY-SA 4.0","body":"@supercat , what trickery is this? A widening conversion that is incorrectly rounded, followed by an addition that doesn&#39;t actually change the result, casting to int again to produce a result that is most unexpected for normal human minds."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"reply_to_user":{"reputation":1367,"user_id":426371,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/0a0b346c3bf9c2e739b80c452a8727b0?s=128&d=identicon&r=PG","display_name":"neXus","link":"https://stackoverflow.com/users/426371/nexus"},"edited":false,"score":1,"creation_date":1537542306,"post_id":8710717,"comment_id":91835814,"content_license":"CC BY-SA 4.0","body":"@neXus: IMHO, the conversion rules should have treated <code>double-&gt;float</code> as widening, on the basis that values of type <code>float</code> identify real numbers less specifically than those of type <code>double</code>.  If one views <code>double</code> as a complete postal address and <code>float</code> as a 5-digit postal code, it&#39;s possible to satisfy a request for a postal code given a complete address, but it&#39;s not possible to accurately specify a request for a complete address given just a postal code.  Converting a street address to a postal code is a lossy operation, <i>but</i>..."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":1,"creation_date":1537542473,"post_id":8710717,"comment_id":91835919,"content_license":"CC BY-SA 4.0","body":"...someone who needs a complete address wouldn&#39;t generally be asking for just a postal code.  Conversion from <code>float-&gt;double</code> is equivalent to converting US postal code 90210 with &quot;US Post Office, Beverly Hills CA 90210&quot;."}],"owner":{"reputation":18698,"user_id":137369,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/4a71acdbeaa4a25f132b37d2aeaece89?s=128&d=identicon&r=PG","display_name":"Thirler","link":"https://stackoverflow.com/users/137369/thirler"},"comment_count":4,"is_accepted":false,"score":261,"last_activity_date":1491246701,"last_edit_date":1491246701,"creation_date":1325585855,"answer_id":8710717,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>Very good question. The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">Java Language specification</a> confirms your suggestion.</p>\n\n<blockquote>\n  <p>For example, the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":35520,"user_id":1424875,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/HFA9w.png?s=128&g=1","display_name":"nanofarad","link":"https://stackoverflow.com/users/1424875/nanofarad"},"edited":false,"score":3,"creation_date":1376317755,"post_id":8710746,"comment_id":26653986,"content_license":"CC BY-SA 3.0","body":"Can you tell me which classfile this is?"},{"owner":{"reputation":22530,"user_id":471607,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/f0cd8105fa92762569fd03b750d7a1f9?s=128&d=identicon&r=PG","display_name":"Umesh Awasthi","link":"https://stackoverflow.com/users/471607/umesh-awasthi"},"reply_to_user":{"reputation":35520,"user_id":1424875,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/HFA9w.png?s=128&g=1","display_name":"nanofarad","link":"https://stackoverflow.com/users/1424875/nanofarad"},"edited":false,"score":7,"creation_date":1376320643,"post_id":8710746,"comment_id":26656071,"content_license":"CC BY-SA 3.0","body":"@hexafraction: what you mean by class file? if you asking about the class file i mentioned in my post than it&#39;s the complied version of your java class"},{"owner":{"reputation":35520,"user_id":1424875,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/HFA9w.png?s=128&g=1","display_name":"nanofarad","link":"https://stackoverflow.com/users/1424875/nanofarad"},"edited":false,"score":4,"creation_date":1376333868,"post_id":8710746,"comment_id":26663200,"content_license":"CC BY-SA 3.0","body":"Oh, you mentioned &quot;the&quot; class file code, which led me to believe a specific classfile was involved. I understand what you mean now."},{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"reply_to_user":{"reputation":5008,"user_id":1646170,"user_type":"registered","accept_rate":49,"profile_image":"https://i.stack.imgur.com/kZdw4.jpg?s=128&g=1","display_name":"Bogdan Alexandru","link":"https://stackoverflow.com/users/1646170/bogdan-alexandru"},"edited":false,"score":1,"creation_date":1424066905,"post_id":8710746,"comment_id":45385138,"content_license":"CC BY-SA 3.0","body":"@Bogdan That shouldn&#39;t be a problem with properly used fonts. A programmer which chooses whe wrong font for programming should clearly think about how to proceed..."},{"owner":{"reputation":5008,"user_id":1646170,"user_type":"registered","accept_rate":49,"profile_image":"https://i.stack.imgur.com/kZdw4.jpg?s=128&g=1","display_name":"Bogdan Alexandru","link":"https://stackoverflow.com/users/1646170/bogdan-alexandru"},"reply_to_user":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":7,"creation_date":1424097722,"post_id":8710746,"comment_id":45401064,"content_license":"CC BY-SA 3.0","body":"@glglgl I disagree that one should rely on font to distinguish in those cases... but everybody has the freedom to choose what thinks is best."},{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":0,"creation_date":1424118896,"post_id":8710746,"comment_id":45412747,"content_license":"CC BY-SA 3.0","body":"On some old MATLAB version, the default font size was one which made O and 0 look the same in Times New Roman, as well as 1 and l. It was always the first step that I did to change the font sie to something useful..."}],"owner":{"reputation":22530,"user_id":471607,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/f0cd8105fa92762569fd03b750d7a1f9?s=128&d=identicon&r=PG","display_name":"Umesh Awasthi","link":"https://stackoverflow.com/users/471607/umesh-awasthi"},"comment_count":6,"is_accepted":false,"score":181,"last_activity_date":1422447532,"last_edit_date":1422447532,"creation_date":1325585988,"answer_id":8710746,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>Yes,</p>\n\n<p>basically when we write</p>\n\n<pre><code>i += l; \n</code></pre>\n\n<p>the compiler converts this to </p>\n\n<pre><code>i = (int)(i + l);\n</code></pre>\n\n<p>I just checked the <code>.class</code> file code.</p>\n\n<p>Really a good thing to know</p>\n"},{"comments":[{"owner":{"reputation":7240,"user_id":1765039,"user_type":"registered","profile_image":"https://i.stack.imgur.com/n7KQv.jpg?s=128&g=1","display_name":"Sajal Dutta","link":"https://stackoverflow.com/users/1765039/sajal-dutta"},"reply_to_user":{"reputation":2729,"user_id":2807573,"user_type":"registered","accept_rate":97,"profile_image":"https://i.stack.imgur.com/RzoUA.jpg?s=128&g=1","display_name":"Akshat Agarwal","link":"https://stackoverflow.com/users/2807573/akshat-agarwal"},"edited":false,"score":12,"creation_date":1399327678,"post_id":8710747,"comment_id":36007105,"content_license":"CC BY-SA 3.0","body":"@AkshatAgarwal ch is a char. 65 * 1.5 = 97.5 -&gt; Got it?"},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":87,"creation_date":1401269101,"post_id":8710747,"comment_id":36813637,"content_license":"CC BY-SA 3.0","body":"Yeah, but I can just see some beginner coming here, reading this, and going away thinking that you can convert any character from upper case to lower case by multiplying it by 1.5."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":108,"creation_date":1401281775,"post_id":8710747,"comment_id":36822007,"content_license":"CC BY-SA 3.0","body":"@DavidWallace Any character as long as it is <code>A</code> ;)"},{"owner":{"reputation":12952,"user_id":4684058,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/vhz3N.jpg?s=128&g=1","display_name":"Minhas Kamal","link":"https://stackoverflow.com/users/4684058/minhas-kamal"},"reply_to_user":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":16,"creation_date":1458106144,"post_id":8710747,"comment_id":59705247,"content_license":"CC BY-SA 3.0","body":"@PeterLawrey &amp; @DavidWallace I will reveal your <b>secret</b>- <code>ch += 32</code>  =D"}],"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"comment_count":4,"is_accepted":false,"score":494,"last_activity_date":1325586320,"last_edit_date":1325586320,"creation_date":1325586003,"answer_id":8710747,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>A good example of this casting is using *= or /=</p>\n\n<pre><code>byte b = 10;\nb *= 5.7;\nSystem.out.println(b); // prints 57\n</code></pre>\n\n<p>or</p>\n\n<pre><code>byte b = 100;\nb /= 2.5;\nSystem.out.println(b); // prints 40\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = '0';\nch *= 1.1;\nSystem.out.println(ch); // prints '4'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = 'A';\nch *= 1.5;\nSystem.out.println(ch); // prints 'a'\n</code></pre>\n"},{"owner":{"reputation":2017,"user_id":1061518,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/d7cfcdbf0e37cd117ec0fd0c7f8d5eb9?s=128&d=identicon&r=PG&f=1","display_name":"dinesh028","link":"https://stackoverflow.com/users/1061518/dinesh028"},"comment_count":0,"is_accepted":false,"score":64,"last_activity_date":1417608977,"last_edit_date":1417608977,"creation_date":1325586029,"answer_id":8710752,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>The problem here involves type casting.</p>\n\n<p>When you add int and long, </p>\n\n<ol>\n<li>The int object is casted to long &amp; both are added and you get long object.</li>\n<li>but long object cannot be implicitly casted to int. So, you have to do that explicitly.</li>\n</ol>\n\n<p>But <code>+=</code> is coded in such a way that it does type casting. <code>i=(int)(i+m)</code></p>\n"},{"comments":[{"owner":{"reputation":7416,"user_id":1418097,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/647fd44358712b7e73d70ae66daec14e?s=128&d=identicon&r=PG","display_name":"Display Name","link":"https://stackoverflow.com/users/1418097/display-name"},"edited":false,"score":2,"creation_date":1377857831,"post_id":14473282,"comment_id":27251828,"content_license":"CC BY-SA 3.0","body":"Hey, but <code>long</code> is 2 times larger than <code>float</code>."},{"owner":{"reputation":2266,"user_id":1614599,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/62bb990b86bd625d7e46c9f6794f27fe?s=128&d=identicon&r=PG&f=1","display_name":"Alex MDC","link":"https://stackoverflow.com/users/1614599/alex-mdc"},"edited":false,"score":11,"creation_date":1378759284,"post_id":14473282,"comment_id":27561875,"content_license":"CC BY-SA 3.0","body":"A <code>float</code> can&#39;t hold every possible <code>int</code> value, and a <code>double</code> can&#39;t hold every possible <code>long</code> value."},{"owner":{"reputation":1027,"user_id":2862100,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/f4e0dd53bc1bb6a8fabf6da4f0dac367?s=128&d=identicon&r=PG&f=1","display_name":"Luke","link":"https://stackoverflow.com/users/2862100/luke"},"edited":false,"score":2,"creation_date":1383830517,"post_id":14473282,"comment_id":29498022,"content_license":"CC BY-SA 3.0","body":"What do you mean by &quot;safely converted&quot; ? From latter part of the answer I can deduce that you  meant automatic conversion ( implicit cast ) which is of course not true in case of float -&gt; long. float pi = 3.14f; long b = pi; will result in compiler error."},{"owner":{"reputation":143,"user_id":4229629,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/56d76c0fb90562612e22509edda979e3?s=128&d=identicon&r=PG","display_name":"ThePyroEagle","link":"https://stackoverflow.com/users/4229629/thepyroeagle"},"edited":false,"score":1,"creation_date":1450817973,"post_id":14473282,"comment_id":56590279,"content_license":"CC BY-SA 3.0","body":"You&#39;d be better off differentiating floating point primitive types with integer primitive types. They&#39;re not the same thing."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1492717237,"post_id":14473282,"comment_id":74109966,"content_license":"CC BY-SA 3.0","body":"Java has simplistic conversion rules that require the use of casts in many patterns where behavior without casts would otherwise match expectations, but doesn&#39;t require casts in many patterns that are usually erroneous.  For example, a compiler will accept <code>double d=33333333+1.0f;</code> without complaint, even though the result 33333332.0 would likely not be what was intended (incidentally, the arithmetically-correct answer of 33333334.0f would be representable as either <code>float</code> or <code>int</code>)."}],"owner":{"reputation":1245,"user_id":1891112,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/81b3619029da796bcc5afa3475ca7011?s=128&d=identicon&r=PG","display_name":"tinker_fairy","link":"https://stackoverflow.com/users/1891112/tinker-fairy"},"comment_count":5,"is_accepted":false,"score":55,"last_activity_date":1409118955,"last_edit_date":1409118955,"creation_date":1358920236,"answer_id":14473282,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>In Java type conversions are performed automatically when the type of the expression on the right hand side of an assignment operation can be safely promoted to the type of the variable on the left hand side of the assignment. Thus we can safely assign:  </p>\n\n<pre> byte -> short -> int -> long -> float -> double. </pre>  \n\n<p>The same will not work the other way round. For example we cannot automatically convert a long to an int because the first requires more storage than the second and consequently information may be lost. To force such a conversion we must carry out an explicit conversion.<br>\n<a href=\"http://way2java.com/casting-operations/data-type-casting-type-conversion/\" rel=\"noreferrer\">Type - Conversion</a></p>\n"},{"comments":[{"owner":{"reputation":4655,"user_id":3469725,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/PokWK.jpg?s=128&g=1","display_name":"Thomas","link":"https://stackoverflow.com/users/3469725/thomas"},"edited":false,"score":6,"creation_date":1421268615,"post_id":27247364,"comment_id":44299319,"content_license":"CC BY-SA 3.0","body":"Thanks for the insight regarding the comparison of the <code>op</code> use in C++ to its use in Java. I always like seeing these bits of trivia and I do think they contribute something to the conversation that may often be left out."},{"owner":{"reputation":6824,"user_id":2886891,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/yaE6t.png?s=128&g=1","display_name":"Honza Zidek","link":"https://stackoverflow.com/users/2886891/honza-zidek"},"edited":false,"score":2,"creation_date":1522062538,"post_id":27247364,"comment_id":85982766,"content_license":"CC BY-SA 3.0","body":"However the question itself <i>is</i> interesting, asking this <i>in an interview</i> is stupid. It does not prove that the person can produce a good quality code - it just proves that he had enough patience to prepare for an Oracle certificate exam. And &quot;avoiding&quot; the incompatible types by using a dangerous auto-conversion and thus hiding the possible overflow error, probably even <i>proves</i> that the person is not able to produce probable a good quality code. Damn the Java authors for all these auto-conversions and auto-boxing and all!"}],"owner":{"reputation":1413,"user_id":3880437,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/U1hD4.jpg?s=128&g=1","display_name":"Stopfan","link":"https://stackoverflow.com/users/3880437/stopfan"},"comment_count":2,"is_accepted":false,"score":46,"last_activity_date":1421269895,"last_edit_date":1421269895,"creation_date":1417516858,"answer_id":27247364,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>Sometimes, such a question can be asked at an interview.</p>\n\n<p>For example, when you write:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na = a + b;\n</code></pre>\n\n<p>there is no automatic typecasting. In C++ there will not be any error compiling the above code, but in Java you will get something like <code>Incompatible type exception</code>.</p>\n\n<p>So to avoid it, you must write your code like this:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na += b;// No compilation error or any exception due to the auto typecasting\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3180,"user_id":905033,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3a6b947cd4c65dce0c3493549f9f411c?s=128&d=identicon&r=PG","display_name":"Lew Bloch","link":"https://stackoverflow.com/users/905033/lew-bloch"},"edited":false,"score":5,"creation_date":1452374055,"post_id":30699499,"comment_id":57144026,"content_license":"CC BY-SA 3.0","body":"Compound assignment operators perform a narrowing conversion of the result of the binary operation, not the right-hand operand. So in your example, &#39;a += b&#39; is not equivalent to &#39;a = a + (int) b&#39; but, as explained by other answers here, to &#39;a = (int)(a + b)&#39;."}],"owner":{"reputation":445,"user_id":4594967,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/11fa0e426e42e2ff8823b10eaf7a01c0?s=128&d=identicon&r=PG&f=1","display_name":"takra","link":"https://stackoverflow.com/users/4594967/takra"},"comment_count":1,"is_accepted":false,"score":25,"last_activity_date":1449411366,"last_edit_date":1449411366,"creation_date":1433719624,"answer_id":30699499,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>The main difference is that with <code>a = a + b</code>, there is no typecasting going on, and so the compiler gets angry at you for not typecasting. But with <code>a += b</code>, what it's really doing is typecasting <code>b</code> to a type compatible with <code>a</code>. So if you do </p>\n\n<pre><code>int a=5;\nlong b=10;\na+=b;\nSystem.out.println(a);\n</code></pre>\n\n<p>What you're really doing is: </p>\n\n<pre><code>int a=5;\nlong b=10;\na=a+(int)b;\nSystem.out.println(a);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":1,"creation_date":1534192065,"post_id":34863187,"comment_id":90614479,"content_license":"CC BY-SA 4.0","body":"I think a more interesting case might be <code>int someInt = 16777217; float someFloat = 0.0f; someInt += someFloat;</code>.  Adding zero to <code>someInt</code> shouldn&#39;t affect its value, but promoting <code>someInt</code> to <code>float</code> may change its value."}],"owner":{"reputation":193,"user_id":1084927,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/03e81b5b74ea4f4891a241a4f1043241?s=128&d=identicon&r=PG","display_name":"Gabe Nones","link":"https://stackoverflow.com/users/1084927/gabe-nones"},"comment_count":1,"is_accepted":false,"score":12,"last_activity_date":1521832378,"last_edit_date":1521832378,"creation_date":1453147629,"answer_id":34863187,"question_id":8710619,"content_license":"CC BY-SA 3.0","body":"<p>Subtle point here...</p>\n\n<p>There is an implicit typecast for <code>i+j</code> when <code>j</code> is a double and <code>i</code> is an int.\nJava <strong>ALWAYS</strong> converts an integer into a double when there is an operation between them.</p>\n\n<p>To clarify <code>i+=j</code> where <code>i</code> is an integer and <code>j</code> is a double can be described as</p>\n\n<pre><code>i = &lt;int&gt;(&lt;double&gt;i + j)\n</code></pre>\n\n<p>See: <a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/voe/lecture.html#ImplicitConversion\" rel=\"noreferrer\">this description of implicit casting</a></p>\n\n<p>You might want to typecast <code>j</code> to <code>(int)</code> in this case for clarity.</p>\n"},{"owner":{"reputation":9697,"user_id":736054,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/omJT2.jpg?s=128&g=1","display_name":"Konrad Borowski","link":"https://stackoverflow.com/users/736054/konrad-borowski"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1561453477,"last_edit_date":1561453477,"creation_date":1552061167,"answer_id":55066886,"question_id":8710619,"content_license":"CC BY-SA 4.0","body":"<p>Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">defines <code>E1 op= E2</code> to be equivalent to <code>E1 = (T) ((E1) op (E2))</code> where <code>T</code> is a type of <code>E1</code> and <code>E1</code> is evaluated once</a>.</p>\n\n<p>That's a technical answer, but you may be wondering why that's a case. Well, let's consider the following program.</p>\n\n<pre><code>public class PlusEquals {\n    public static void main(String[] args) {\n        byte a = 1;\n        byte b = 2;\n        a = a + b;\n        System.out.println(a);\n    }\n}\n</code></pre>\n\n<p>What does this program print?</p>\n\n<p>Did you guess 3? Too bad, this program won't compile. Why? Well, it so happens that addition of bytes in Java <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.6.2\" rel=\"noreferrer\">is defined to return an <code>int</code></a>. This, I believe was because the Java Virtual Machine doesn't define byte operations to save on bytecodes (there is a limited number of those, after all), using integer operations instead is an implementation detail exposed in a language.</p>\n\n<p>But if <code>a = a + b</code> doesn't work, that would mean <code>a += b</code> would never work for bytes if it <code>E1 += E2</code> was defined to be <code>E1 = E1 + E2</code>. As the previous example shows, that would be indeed the case. As a hack to make <code>+=</code> operator work for bytes and shorts, there is an implicit cast involved. It's not that great of a hack, but back during the Java 1.0 work, the focus was on getting the language released to begin with. Now, because of backwards compatibility, this hack introduced in Java 1.0 couldn't be removed.</p>\n"}],"owner":{"reputation":36138,"user_id":1127571,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/00735aa8e45c6a3f4a79efe9cf689e40?s=128&d=identicon&r=PG","display_name":"Honza Brabec","link":"https://stackoverflow.com/users/1127571/honza-brabec"},"comment_count":12,"is_answered":true,"view_count":301734,"protected_date":1361956091,"accepted_answer_id":8710685,"answer_count":11,"score":3715,"last_activity_date":1586429652,"creation_date":1325585432,"last_edit_date":1536651457,"question_id":8710619,"link":"https://stackoverflow.com/questions/8710619/why-dont-javas-compound-assignment-operators-require-casting","title":"Why don&#39;t Java&#39;s +=, -=, *=, /= compound assignment operators require casting?","body":"<p>Until today, I thought that for example:</p>\n\n<pre><code>i += j;\n</code></pre>\n\n<p>Was just a shortcut for:</p>\n\n<pre><code>i = i + j;\n</code></pre>\n\n<p>But if we try this:</p>\n\n<pre><code>int i = 5;\nlong j = 8;\n</code></pre>\n\n<p>Then <code>i = i + j;</code> will not compile but <code>i += j;</code> will compile fine.</p>\n\n<p>Does it mean that in fact <code>i += j;</code> is a shortcut for something like this\n<code>i = (type of i) (i + j)</code>?</p>\n"},{"tags":["java","random","integer"],"comments":[{"owner":{"reputation":2993,"user_id":132162,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/7e05ab5ffe3b7b0bc5a9f4aeaa847564?s=128&d=identicon&r=PG","display_name":"raupach","link":"https://stackoverflow.com/users/132162/raupach"},"edited":false,"score":0,"creation_date":1229163528,"post_id":363681,"comment_id":109286950,"content_license":"CC BY-SA 2.5","body":"When you need a lot of random numbers, I do not recommend the Random class in the API. It has just a too small period. Try the <a href=\"http://en.wikipedia.org/wiki/Mersenne_twister\" rel=\"nofollow noreferrer\">Mersenne twister</a> instead. There is <a href=\"http://cs.gmu.edu/~sean/research/\" rel=\"nofollow noreferrer\">a Java implementation</a>."},{"owner":{"reputation":2150,"user_id":1139105,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/m3xAB.png?s=128&g=1","display_name":"janniks","link":"https://stackoverflow.com/users/1139105/janniks"},"edited":false,"score":13,"creation_date":1580730815,"post_id":363681,"comment_id":106181133,"content_license":"CC BY-SA 4.0","body":"Before you post a new answer, consider there are already 65+ answers for this question. Please, make sure that your answer contributes information that is not among existing answers."},{"owner":{"reputation":378,"user_id":9732672,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/16efd09c414d154fe863ac369c232708?s=128&d=identicon&r=PG&f=1","display_name":"NomadMaker","link":"https://stackoverflow.com/users/9732672/nomadmaker"},"edited":false,"score":0,"creation_date":1613668844,"post_id":363681,"comment_id":117153086,"content_license":"CC BY-SA 4.0","body":"<code>randomNum = minimum + (int)(Math.random() * (maximum - minimum);</code>"}],"answers":[{"owner":{"reputation":69711,"user_id":23691,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/ffd58f2ec488a7160c4e7bbfdf179493?s=128&d=identicon&r=PG","display_name":"krosenvold","link":"https://stackoverflow.com/users/23691/krosenvold"},"comment_count":0,"is_accepted":false,"score":171,"last_activity_date":1403475772,"last_edit_date":1403475772,"creation_date":1229106308,"answer_id":363691,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Use:</p>\n\n<pre><code>minimum + rn.nextInt(maxValue - minvalue + 1)\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1833,"user_id":3017818,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/HpZY3.jpg?s=128&g=1","display_name":"Daniel","link":"https://stackoverflow.com/users/3017818/daniel"},"edited":false,"score":47,"creation_date":1407839670,"post_id":363692,"comment_id":39361137,"content_license":"CC BY-SA 3.0","body":"For calls where <code>max</code> value is <code>Integer.MAX_VALUE</code> it is possible to overflow ,resulting into a <code>java.lang.IllegalArgumentException</code>. You can try with : <code>randInt(0, Integer.MAX_VALUE)</code>. Also, if <code>nextInt((max-min) + 1)</code> returns the most high value (quite rare, I assume) won&#39;t it overflow again( supposing min and max are high enough values)? How to deal with this kind of situations?"},{"owner":{"reputation":2879,"user_id":4297364,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YcLoW.jpg?s=128&g=1","display_name":"Moishe Lipsker","link":"https://stackoverflow.com/users/4297364/moishe-lipsker"},"reply_to_user":{"reputation":18081,"user_id":961018,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/jdMgW.jpg?s=128&g=1","display_name":"mmm","link":"https://stackoverflow.com/users/961018/mmm"},"edited":false,"score":1,"creation_date":1434561508,"post_id":363692,"comment_id":49835509,"content_license":"CC BY-SA 3.0","body":"@momo the <code>RANDOM</code> class supports <code>nextLong</code>. You could use that instead of <code>nextInt</code> for longs."},{"owner":{"reputation":18081,"user_id":961018,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/jdMgW.jpg?s=128&g=1","display_name":"mmm","link":"https://stackoverflow.com/users/961018/mmm"},"reply_to_user":{"reputation":2879,"user_id":4297364,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YcLoW.jpg?s=128&g=1","display_name":"Moishe Lipsker","link":"https://stackoverflow.com/users/4297364/moishe-lipsker"},"edited":false,"score":3,"creation_date":1434566577,"post_id":363692,"comment_id":49838537,"content_license":"CC BY-SA 3.0","body":"@MoisheLipsker It must be that nextLong doesn&#39;t take a bound as nextInteger"},{"owner":{"reputation":2136,"user_id":726315,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/7e8b17e4d12c4a25b5700a9173925746?s=128&d=identicon&r=PG&f=1","display_name":"b1nary.atr0phy","link":"https://stackoverflow.com/users/726315/b1nary-atr0phy"},"reply_to_user":{"reputation":18081,"user_id":961018,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/jdMgW.jpg?s=128&g=1","display_name":"mmm","link":"https://stackoverflow.com/users/961018/mmm"},"edited":false,"score":1,"creation_date":1439859688,"post_id":363692,"comment_id":52022394,"content_license":"CC BY-SA 3.0","body":"@momo Enlist help from the <code>double</code>. Just so: <code>long val = ((long) (r.nextDouble() * (max - min))) + min</code>"},{"owner":{"reputation":18081,"user_id":961018,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/jdMgW.jpg?s=128&g=1","display_name":"mmm","link":"https://stackoverflow.com/users/961018/mmm"},"edited":false,"score":1,"creation_date":1439899305,"post_id":363692,"comment_id":52040193,"content_license":"CC BY-SA 3.0","body":"Yes, I already do that, using the Math.random() which does that: public static long random(long min, long max) {                 return min + Math.round( Math.random() * ( (max - min) ) );         }"},{"owner":{"reputation":12491,"user_id":648955,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/DUiuD.jpg?s=128&g=1","display_name":"leventov","link":"https://stackoverflow.com/users/648955/leventov"},"edited":false,"score":0,"creation_date":1441357636,"post_id":363692,"comment_id":52656967,"content_license":"CC BY-SA 3.0","body":"This snippet (that probably thousands of people copy) is BAD. It produce garbage. Just <code>ThreadLocalRandom.current().nextInt(min, max)</code>."},{"owner":{"reputation":43015,"user_id":462,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dcda1d207d2f416d1608aa625fdedb7f?s=128&d=identicon&r=PG","display_name":"Greg Case","link":"https://stackoverflow.com/users/462/greg-case"},"reply_to_user":{"reputation":12491,"user_id":648955,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/DUiuD.jpg?s=128&g=1","display_name":"leventov","link":"https://stackoverflow.com/users/648955/leventov"},"edited":false,"score":14,"creation_date":1441936638,"post_id":363692,"comment_id":52887307,"content_license":"CC BY-SA 3.0","body":"@leventov <code>ThreadLocalRandom</code> was added to Java 2 1/2 years after this question was first asked.  I&#39;ve always been of the firm opinion that management of the Random instance is outside the scope of the question."},{"owner":{"reputation":43015,"user_id":462,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dcda1d207d2f416d1608aa625fdedb7f?s=128&d=identicon&r=PG","display_name":"Greg Case","link":"https://stackoverflow.com/users/462/greg-case"},"reply_to_user":{"reputation":8833,"user_id":935374,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/q3eVx.jpg?s=128&g=1","display_name":"Abhishek Singh","link":"https://stackoverflow.com/users/935374/abhishek-singh"},"edited":false,"score":2,"creation_date":1444625495,"post_id":363692,"comment_id":53964586,"content_license":"CC BY-SA 3.0","body":"@AbhishekSingh The comments try to address this, but in more detail: nextInt(N) returns a number from 0 to N - 1, i.e. it will never return N as a result.  In this case we want to include N in our possible range of values, so we add one:  nextInt(N+1) =&gt; returns a number in the range 0 to N, inclusive of both 0 and N"},{"owner":{"reputation":1875,"user_id":3464919,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ec6f8ae7b324f7b67f37f72351bc807d?s=128&d=identicon&r=PG","display_name":"Webserveis","link":"https://stackoverflow.com/users/3464919/webserveis"},"edited":false,"score":6,"creation_date":1475524505,"post_id":363692,"comment_id":66968525,"content_license":"CC BY-SA 3.0","body":"In Android Random rand = new Random();"},{"owner":{"reputation":43015,"user_id":462,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dcda1d207d2f416d1608aa625fdedb7f?s=128&d=identicon&r=PG","display_name":"Greg Case","link":"https://stackoverflow.com/users/462/greg-case"},"reply_to_user":{"reputation":1875,"user_id":3464919,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ec6f8ae7b324f7b67f37f72351bc807d?s=128&d=identicon&r=PG","display_name":"Webserveis","link":"https://stackoverflow.com/users/3464919/webserveis"},"edited":false,"score":6,"creation_date":1475540957,"post_id":363692,"comment_id":66974432,"content_license":"CC BY-SA 3.0","body":"@Webserveis This is addressed in the comments in the example.  Short version - you should not = new Random() for every call to the function, or your results will not be sufficiently random for many cases."},{"owner":{"reputation":726,"user_id":5370518,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/1a4e85da22144d2a1cc3856f4772f4b3?s=128&d=identicon&r=PG&f=1","display_name":"Chit Khine","link":"https://stackoverflow.com/users/5370518/chit-khine"},"edited":false,"score":1,"creation_date":1488873758,"post_id":363692,"comment_id":72413260,"content_license":"CC BY-SA 3.0","body":"Shouldn&#39;t you initialize the rand = new Random()?"},{"owner":{"reputation":43015,"user_id":462,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dcda1d207d2f416d1608aa625fdedb7f?s=128&d=identicon&r=PG","display_name":"Greg Case","link":"https://stackoverflow.com/users/462/greg-case"},"reply_to_user":{"reputation":726,"user_id":5370518,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/1a4e85da22144d2a1cc3856f4772f4b3?s=128&d=identicon&r=PG&f=1","display_name":"Chit Khine","link":"https://stackoverflow.com/users/5370518/chit-khine"},"edited":false,"score":5,"creation_date":1489374584,"post_id":363692,"comment_id":72628124,"content_license":"CC BY-SA 3.0","body":"@ChitKhine Not on each call to the function.  The RNG algorithm under the hood of Random works well (enough for non-cryptographic applications) when generating successive random numbers.  However, if the Random instance is re-created on each call, that means that instead of a proper RNG you&#39;re going to get &quot;random&quot; numbers based on whatever seed is chosen each time - often this is based on the system clock.  This can give decidedly non-random results.  Instead, you should consider instantiating your Random instance outside of method scope.  The example code attempts to address this."},{"owner":{"reputation":1254,"user_id":5365075,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/bc5aa3379123758f320a5afa713f813d?s=128&d=identicon&r=PG&f=1","display_name":"user5365075","link":"https://stackoverflow.com/users/5365075/user5365075"},"edited":false,"score":0,"creation_date":1519131895,"post_id":363692,"comment_id":84776509,"content_license":"CC BY-SA 3.0","body":"Use <code>ThreadLocalRandom.current().nextBytes(chunk);</code> if you want to save yourself the <code>new Random()</code>. Thanks to <a href=\"https://stackoverflow.com/questions/363681/how-do-i-generate-random-integers-within-a-specific-range-in-java\">a really popular question</a> on generating random Integers in Java."},{"owner":{"reputation":1104,"user_id":7322834,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f6c6214f6645964f70bc7960bc3b7e6f?s=128&d=identicon&r=PG&f=1","display_name":"Aman","link":"https://stackoverflow.com/users/7322834/aman"},"edited":false,"score":0,"creation_date":1542201580,"post_id":363692,"comment_id":93482846,"content_license":"CC BY-SA 4.0","body":"and if you&#39;re using for android java ThreadLocalRandom.current().nextInt(1, 100) it requires min API Level 21"}],"owner":{"reputation":43015,"user_id":462,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dcda1d207d2f416d1608aa625fdedb7f?s=128&d=identicon&r=PG","display_name":"Greg Case","link":"https://stackoverflow.com/users/462/greg-case"},"comment_count":14,"is_accepted":false,"score":3966,"last_activity_date":1539536915,"last_edit_date":1539536915,"creation_date":1229106327,"answer_id":363692,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>In <strong>Java 1.7 or later</strong>, the standard way to do this is as follows:</p>\n\n<pre><code>import java.util.concurrent.ThreadLocalRandom;\n\n// nextInt is normally exclusive of the top value,\n// so add 1 to make it inclusive\nint randomNum = ThreadLocalRandom.current().nextInt(min, max + 1);\n</code></pre>\n\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ThreadLocalRandom.html#nextInt(int,int)\" rel=\"noreferrer\">the relevant JavaDoc</a>.  This approach has the advantage of not needing to explicitly initialize a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html\" rel=\"noreferrer\">java.util.Random</a> instance, which can be a source of confusion and error if used inappropriately.</p>\n\n<p>However, conversely there is no way to explicitly set the seed so it can be difficult to reproduce results in situations where that is useful such as testing or saving game states or similar.  In those situations, the pre-Java 1.7 technique shown below can be used.</p>\n\n<p><strong>Before Java 1.7</strong>, the standard way to do this is as follows:</p>\n\n<pre><code>import java.util.Random;\n\n/**\n * Returns a pseudo-random number between min and max, inclusive.\n * The difference between min and max can be at most\n * &lt;code&gt;Integer.MAX_VALUE - 1&lt;/code&gt;.\n *\n * @param min Minimum value\n * @param max Maximum value.  Must be greater than min.\n * @return Integer between min and max, inclusive.\n * @see java.util.Random#nextInt(int)\n */\npublic static int randInt(int min, int max) {\n\n    // NOTE: This will (intentionally) not run as written so that folks\n    // copy-pasting have to think about how to initialize their\n    // Random instance.  Initialization of the Random instance is outside\n    // the main scope of the question, but some decent options are to have\n    // a field that is initialized once and then re-used as needed or to\n    // use ThreadLocalRandom (if using at least Java 1.7).\n    // \n    // In particular, do NOT do 'Random rand = new Random()' here or you\n    // will get not very good / not very random results.\n    Random rand;\n\n    // nextInt is normally exclusive of the top value,\n    // so add 1 to make it inclusive\n    int randomNum = rand.nextInt((max - min) + 1) + min;\n\n    return randomNum;\n}\n</code></pre>\n\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html#nextInt(int)\" rel=\"noreferrer\">the relevant JavaDoc</a>.  In practice, the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Random.html\" rel=\"noreferrer\">java.util.Random</a> class is often preferable to <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#random()\" rel=\"noreferrer\">java.lang.Math.random()</a>.</p>\n\n<p>In particular, there is no need to reinvent the random integer generation wheel when there is a straightforward API within the standard library to accomplish the task.</p>\n"},{"owner":{"reputation":176496,"user_id":13531,"user_type":"moderator","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/49f3a2065659f5b4efa05ae29bd0856a?s=128&d=identicon&r=PG","display_name":"Michael Myers","link":"https://stackoverflow.com/users/13531/michael-myers"},"comment_count":0,"is_accepted":false,"score":30,"last_activity_date":1513798470,"last_edit_date":1513798470,"creation_date":1229106339,"answer_id":363693,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<pre><code> rand.nextInt((max+1) - min) + min;\n</code></pre>\n"},{"owner":{"reputation":9899,"user_id":31892,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/22aa27d8821b495e095f79dd331ef3d4?s=128&d=identicon&r=PG","display_name":"Chinnery","link":"https://stackoverflow.com/users/31892/chinnery"},"comment_count":0,"is_accepted":false,"score":34,"last_activity_date":1479298097,"last_edit_date":1479298097,"creation_date":1229106475,"answer_id":363703,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I wonder if any of the random number generating methods provided by an <a href=\"http://commons.apache.org/proper/commons-math/\" rel=\"noreferrer\">Apache Commons Math</a> library would fit the bill. </p>\n\n<p>For example: <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/random/RandomDataGenerator.html#nextInt(int,%20int)\" rel=\"noreferrer\"><code>RandomDataGenerator.nextInt</code></a> or <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/random/RandomDataGenerator.html#nextLong(long,%20long)\" rel=\"noreferrer\"><code>RandomDataGenerator.nextLong</code></a></p>\n"},{"comments":[{"owner":{"reputation":1957,"user_id":529286,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/0e10397e10ed767895b232fefedbfe8e?s=128&d=identicon&r=PG","display_name":"zakmck","link":"https://stackoverflow.com/users/529286/zakmck"},"edited":false,"score":0,"creation_date":1422610037,"post_id":363708,"comment_id":44827651,"content_license":"CC BY-SA 3.0","body":"That&#39;s useful, but beware a small flaw: method signatures are like: nextDouble(double startInclusive, double endInclusive), but if you look inside the methods, endInclusive should actually be endExclusive."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1464947235,"post_id":363708,"comment_id":62705434,"content_license":"CC BY-SA 3.0","body":"<code>Double.valueOf(Math.random()*(maximum-minimun)).intValue()</code> is quite an obfuscated (and inefficient) way to say <code>(int)(Math.random()*(maximum-minimun))</code>â¦"},{"owner":{"reputation":2499,"user_id":445058,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/4c25f8c01051e0c96ffb240c2301a5e7?s=128&d=identicon&r=PG","display_name":"Hrishikesh Mishra","link":"https://stackoverflow.com/users/445058/hrishikesh-mishra"},"edited":false,"score":0,"creation_date":1482729263,"post_id":363708,"comment_id":69856891,"content_license":"CC BY-SA 3.0","body":"Spelling mismatch for minimum  return minimum + Double.valueOf(Math.random() * (maximum - minimum)).intValue();"}],"owner":{"reputation":7432,"user_id":1356709,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/7cb1b8575a9a8c332a51b345550a3c6b?s=128&d=identicon&r=PG","display_name":"user2427","link":"https://stackoverflow.com/users/1356709/user2427"},"comment_count":3,"is_accepted":false,"score":19,"last_activity_date":1549635083,"last_edit_date":1549635083,"creation_date":1229106515,"answer_id":363708,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>int random = minimum + Double.valueOf(Math.random()*(maximum-minimum )).intValue();\n</code></pre>\n\n<p>Or take a look to RandomUtils from <a href=\"http://commons.apache.org/lang\" rel=\"nofollow noreferrer\">Apache Commons</a>.</p>\n"},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"comment_count":0,"is_accepted":false,"score":116,"last_activity_date":1549630922,"last_edit_date":1549630922,"creation_date":1229106688,"answer_id":363713,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>You can edit your second code example to:</p>\n\n<pre><code>Random rn = new Random();\nint range = maximum - minimum + 1;\nint randomNum =  rn.nextInt(range) + minimum;\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1010,"user_id":1020714,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/391f4eea1002054903fb6ca60c6b5d04?s=128&d=identicon&r=PG","display_name":"Lilian A. Moraru","link":"https://stackoverflow.com/users/1020714/lilian-a-moraru"},"edited":false,"score":85,"creation_date":1330039594,"post_id":363732,"comment_id":11912829,"content_license":"CC BY-SA 3.0","body":"The Sun documentation explicitly says that you should better use Random() if you need an int instead of Math.random() which produces a double."},{"owner":{"reputation":50563,"user_id":360211,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/3baKW.png?s=128&g=1","display_name":"weston","link":"https://stackoverflow.com/users/360211/weston"},"edited":false,"score":6,"creation_date":1483018553,"post_id":363732,"comment_id":69963434,"content_license":"CC BY-SA 3.0","body":"This is actually biased compared to nextInt methods <a href=\"http://stackoverflow.com/a/738651/360211\">stackoverflow.com/a/738651/360211</a>"},{"owner":{"reputation":12895,"user_id":340556,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/275d0c818c8301f5682ff7d6b764dfbe?s=128&d=identicon&r=PG","display_name":"Cephalopod","link":"https://stackoverflow.com/users/340556/cephalopod"},"edited":false,"score":5,"creation_date":1567072098,"post_id":363732,"comment_id":101857087,"content_license":"CC BY-SA 4.0","body":"&quot;Biased&quot; in this case means that after 2^53 executions, some numbers will have had one extra occourance, on average."},{"owner":{"reputation":173,"user_id":11670196,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ad0ea391d628290be8b71786bfb2e217?s=128&d=identicon&r=PG&f=1","display_name":"Tobias","link":"https://stackoverflow.com/users/11670196/tobias"},"edited":false,"score":0,"creation_date":1603200516,"post_id":363732,"comment_id":113956719,"content_license":"CC BY-SA 4.0","body":"Even thought i use this too, i want to point out that this is not a true random number. Thats why it should not be used for any security functionality. But for any casual cases it is the most straight forwrd method."}],"owner":{"reputation":15335,"user_id":10007,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/55df9d378f930d0f0941c1bbdb69abcb?s=128&d=identicon&r=PG","display_name":"TJ_Fischer","link":"https://stackoverflow.com/users/10007/tj-fischer"},"comment_count":4,"is_accepted":false,"score":1453,"last_activity_date":1549635214,"last_edit_date":1549635214,"creation_date":1229106949,"answer_id":363732,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Note that this approach is more biased and less efficient than a <code>nextInt</code> approach, <a href=\"https://stackoverflow.com/a/738651/360211\">https://stackoverflow.com/a/738651/360211</a></p>\n\n<p>One standard pattern for accomplishing this is:</p>\n\n<pre><code>Min + (int)(Math.random() * ((Max - Min) + 1))\n</code></pre>\n\n<p>The <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\" rel=\"noreferrer\">Java</a> Math library function Math.random() generates a double value in the range <code>[0,1)</code>. Notice this range does not include the 1.</p>\n\n<p>In order to get a specific range of values first, you need to multiply by the magnitude of the range of values you want covered. </p>\n\n<pre><code>Math.random() * ( Max - Min )\n</code></pre>\n\n<p>This returns a value in the range <code>[0,Max-Min)</code>, where 'Max-Min' is not included.</p>\n\n<p>For example, if you want <code>[5,10)</code>, you need to cover five integer values so you use</p>\n\n<pre><code>Math.random() * 5\n</code></pre>\n\n<p>This would return a value in the range <code>[0,5)</code>, where 5 is not included.</p>\n\n<p>Now you need to shift this range up to the range that you are targeting. You do this by adding the Min value.</p>\n\n<pre><code>Min + (Math.random() * (Max - Min))\n</code></pre>\n\n<p>You now will get a value in the range <code>[Min,Max)</code>. Following our example, that means <code>[5,10)</code>:</p>\n\n<pre><code>5 + (Math.random() * (10 - 5))\n</code></pre>\n\n<p>But, this still doesn't include <code>Max</code> and you are getting a double value. In order to get the <code>Max</code> value included, you need to add 1 to your range parameter <code>(Max - Min)</code> and then truncate the decimal part by casting to an int. This is accomplished via:</p>\n\n<pre><code>Min + (int)(Math.random() * ((Max - Min) + 1))\n</code></pre>\n\n<p>And there you have it. A random integer value in the range <code>[Min,Max]</code>, or per the example <code>[5,10]</code>:</p>\n\n<pre><code>5 + (int)(Math.random() * ((10 - 5) + 1))\n</code></pre>\n"},{"comments":[{"owner":{"reputation":165,"user_id":4072906,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-DZnrxoYbm0k/AAAAAAAAAAI/AAAAAAAAAVA/AlrskQuudVs/photo.jpg?sz=128","display_name":"Tapper7","link":"https://stackoverflow.com/users/4072906/tapper7"},"edited":false,"score":0,"creation_date":1477806297,"post_id":424548,"comment_id":67908004,"content_license":"CC BY-SA 3.0","body":"+1 for wayBackMachine archive screenshot link &amp; your answer is still useful reference to get &quot;random&quot; ints w/in a range."},{"owner":{"reputation":2560,"user_id":2957169,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1","display_name":"charles-allen","link":"https://stackoverflow.com/users/2957169/charles-allen"},"edited":false,"score":0,"creation_date":1501682033,"post_id":424548,"comment_id":77886274,"content_license":"CC BY-SA 3.0","body":"It baffles me why you instantiate index to 0."},{"owner":{"reputation":2347,"user_id":4298,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/oqcjk.png?s=128&g=1","display_name":"Matt R","link":"https://stackoverflow.com/users/4298/matt-r"},"reply_to_user":{"reputation":2560,"user_id":2957169,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1","display_name":"charles-allen","link":"https://stackoverflow.com/users/2957169/charles-allen"},"edited":false,"score":0,"creation_date":1501684732,"post_id":424548,"comment_id":77888469,"content_license":"CC BY-SA 3.0","body":"@CodeConfident The <code>index</code> variable will not affect the result of the random number. You can choose to initialize it any way you would like without having to worry about changing the outcome. Hope this helps."},{"owner":{"reputation":2560,"user_id":2957169,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1","display_name":"charles-allen","link":"https://stackoverflow.com/users/2957169/charles-allen"},"edited":false,"score":0,"creation_date":1501684869,"post_id":424548,"comment_id":77888568,"content_license":"CC BY-SA 3.0","body":"Exactly... it&#39;s completely unused. I would initialise it directly to the rand: <code>int index = rand.nextInt(i.Length);</code>"},{"owner":{"reputation":15169,"user_id":477771,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG","display_name":"Mark Storer","link":"https://stackoverflow.com/users/477771/mark-storer"},"edited":false,"score":0,"creation_date":1568744675,"post_id":424548,"comment_id":102369324,"content_license":"CC BY-SA 4.0","body":"Or not at all.  <code>int index; \\n index = rand...</code> if one is fond of declarations and assignments on different lines.  Some coding standards are more stringent (and without apparent purpose) than others."}],"owner":{"reputation":2347,"user_id":4298,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/oqcjk.png?s=128&g=1","display_name":"Matt R","link":"https://stackoverflow.com/users/4298/matt-r"},"comment_count":5,"is_accepted":false,"score":72,"last_activity_date":1549635265,"last_edit_date":1549635265,"creation_date":1231427082,"answer_id":424548,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>The <code>Math.Random</code> class in <a href=\"http://en.wikipedia.org/wiki/Java_%28programming_language%29\" rel=\"noreferrer\">Java</a> is 0-based. So, if you write something like this: </p>\n\n<pre><code>Random rand = new Random();\nint x = rand.nextInt(10);\n</code></pre>\n\n<p><code>x</code> will be between <code>0-9</code> inclusive.</p>\n\n<p>So, given the following array of <code>25</code> items, the code to generate a random number between <code>0</code> (the base of the array) and <code>array.length</code> would be:</p>\n\n<pre><code>String[] i = new String[25];\nRandom rand = new Random();\nint index = 0;\n\nindex = rand.nextInt( i.length );\n</code></pre>\n\n<p>Since <code>i.length</code> will return <code>25</code>, the <code>nextInt( i.length )</code> will return a number between the range of <code>0-24</code>. The other option is going with <code>Math.Random</code> which works in the same way.</p>\n\n<pre><code>index = (int) Math.floor(Math.random() * i.length);\n</code></pre>\n\n<p>For a better understanding, check out forum post <em><a href=\"http://web.archive.org/web/20070308142422/http://www.kirupa.com/forum/showthread.php?s=&amp;postid=81565\" rel=\"noreferrer\">Random Intervals (archive.org)</a></em>.</p>\n"},{"owner":{"user_type":"does_not_exist","display_name":"jackson"},"comment_count":0,"is_accepted":false,"score":401,"last_activity_date":1549635260,"last_edit_date":1549635260,"creation_date":1252038207,"answer_id":1377218,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Use:</p>\n\n<pre><code>Random ran = new Random();\nint x = ran.nextInt(6) + 5;\n</code></pre>\n\n<p>The integer <code>x</code> is now the random number that has a possible outcome of <code>5-10</code>.</p>\n"},{"owner":{"reputation":199,"user_id":274198,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/cf2823e03c850868c8b0fea93b82287b?s=128&d=identicon&r=PG","display_name":"sam","link":"https://stackoverflow.com/users/274198/sam"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1461218507,"last_edit_date":1461218507,"creation_date":1266310253,"answer_id":2271563,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>In case of rolling a dice it would be random number between 1 to 6 (not 0 to 6), so: </p>\n\n<pre><code>face = 1 + randomNumbers.nextInt(6);\n</code></pre>\n"},{"owner":{"reputation":149,"user_id":278646,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/f97b1cd47e04ca138e42e110391684b6?s=128&d=identicon&r=PG","display_name":"ganesh","link":"https://stackoverflow.com/users/278646/ganesh"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1461218519,"last_edit_date":1461218519,"creation_date":1266839043,"answer_id":2310610,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<pre><code>rand.nextInt((max+1) - min) + min;\n</code></pre>\n\n<p>This is working fine. </p>\n"},{"comments":[{"owner":{"reputation":6265,"user_id":3945473,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bc7a840257b5609850cabee995c052c3?s=128&d=identicon&r=PG","display_name":"M.P. Korstanje","link":"https://stackoverflow.com/users/3945473/m-p-korstanje"},"edited":false,"score":0,"creation_date":1420799277,"post_id":4647255,"comment_id":44119667,"content_license":"CC BY-SA 3.0","body":"Why not throw an IllegalArgumentException when the difference = Integer.MAX_VALUE? Then you don&#39;t need the while loop."},{"owner":{"reputation":8318,"user_id":282229,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/nQR77.jpg?s=128&g=1","display_name":"Christian Semrau","link":"https://stackoverflow.com/users/282229/christian-semrau"},"reply_to_user":{"reputation":6265,"user_id":3945473,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bc7a840257b5609850cabee995c052c3?s=128&d=identicon&r=PG","display_name":"M.P. Korstanje","link":"https://stackoverflow.com/users/3945473/m-p-korstanje"},"edited":false,"score":3,"creation_date":1430940450,"post_id":4647255,"comment_id":48284763,"content_license":"CC BY-SA 3.0","body":"@mpkorstanje This implementation is designed to work with any values of min &lt;= max, even when their difference is equal to or even larger than MAX_VALUE. Running a loop until success is a common pattern in this case, to guarantee uniform distribution (if the underlying source of randomness is uniform). Random.nextInt(int) does it internally when the argument is not a power of 2."}],"owner":{"reputation":625,"user_id":2081215,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8e398ef39b2577099639676083ce3453?s=128&d=identicon&r=PG","display_name":"Joel Sj&#246;strand","link":"https://stackoverflow.com/users/2081215/joel-sj%c3%b6strand"},"comment_count":2,"is_accepted":false,"score":50,"last_activity_date":1524460893,"last_edit_date":1524460893,"creation_date":1294665599,"answer_id":4647255,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Forgive me for being fastidious, but the solution suggested by the majority, i.e., <code>min + rng.nextInt(max - min + 1))</code>, seems perilous due to the fact that:</p>\n\n<ul>\n<li><code>rng.nextInt(n)</code> cannot reach <code>Integer.MAX_VALUE</code>.</li>\n<li><code>(max - min)</code> may cause overflow when <code>min</code> is negative.</li>\n</ul>\n\n<p>A foolproof solution would return correct results for any <code>min &lt;= max</code> within [<code>Integer.MIN_VALUE</code>, <code>Integer.MAX_VALUE</code>]. Consider the following naive implementation:</p>\n\n<pre><code>int nextIntInRange(int min, int max, Random rng) {\n   if (min &gt; max) {\n      throw new IllegalArgumentException(\"Cannot draw random int from invalid range [\" + min + \", \" + max + \"].\");\n   }\n   int diff = max - min;\n   if (diff &gt;= 0 &amp;&amp; diff != Integer.MAX_VALUE) {\n      return (min + rng.nextInt(diff + 1));\n   }\n   int i;\n   do {\n      i = rng.nextInt();\n   } while (i &lt; min || i &gt; max);\n   return i;\n}\n</code></pre>\n\n<p>Although inefficient, note that the probability of success in the <code>while</code> loop will always be 50% or higher.</p>\n"},{"owner":{"reputation":35380,"user_id":185022,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/045d1e450716084b2a072b57f37a58c4?s=128&d=identicon&r=PG","display_name":"AZ_","link":"https://stackoverflow.com/users/185022/az"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1549635315,"last_edit_date":1549635315,"creation_date":1310556715,"answer_id":6678179,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>public static Random RANDOM = new Random(System.nanoTime());\n\npublic static final float random(final float pMin, final float pMax) {\n    return pMin + RANDOM.nextFloat() * (pMax - pMin);\n}\n</code></pre>\n"},{"owner":{"reputation":4298,"user_id":697099,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/c1dd89427d4d5d899642c7624147ac7c?s=128&d=identicon&r=PG","display_name":"gerardw","link":"https://stackoverflow.com/users/697099/gerardw"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1524460948,"last_edit_date":1524460948,"creation_date":1326903315,"answer_id":8913481,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Another option is just using <a href=\"http://en.wikipedia.org/wiki/Apache_Commons\" rel=\"noreferrer\">Apache Commons</a>: </p>\n\n<pre><code>import org.apache.commons.math.random.RandomData;\nimport org.apache.commons.math.random.RandomDataImpl;\n\npublic void method() {\n    RandomData randomData = new RandomDataImpl();\n    int number = randomData.nextInt(5, 10);\n    // ...\n }\n</code></pre>\n"},{"owner":{"reputation":27534,"user_id":554988,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/f5a83cf2b9ae3bdc456dd48dd29023c3?s=128&d=identicon&r=PG","display_name":"Garrett Hall","link":"https://stackoverflow.com/users/554988/garrett-hall"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1329322743,"creation_date":1329322743,"answer_id":9297051,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Here's a helpful class to generate random <code>ints</code> in a range with any combination of inclusive/exclusive bounds:</p>\n\n<pre><code>import java.util.Random;\n\npublic class RandomRange extends Random {\n    public int nextIncInc(int min, int max) {\n        return nextInt(max - min + 1) + min;\n    }\n\n    public int nextExcInc(int min, int max) {\n        return nextInt(max - min) + 1 + min;\n    }\n\n    public int nextExcExc(int min, int max) {\n        return nextInt(max - min - 1) + 1 + min;\n    }\n\n    public int nextIncExc(int min, int max) {\n        return nextInt(max - min) + min;\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":410,"user_id":767519,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8a1b314d68459f9aad9e827344537b30?s=128&d=identicon&r=PG","display_name":"Hospes","link":"https://stackoverflow.com/users/767519/hospes"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1549635284,"last_edit_date":1549635284,"creation_date":1339065521,"answer_id":10930164,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>I found this example <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=62\" rel=\"nofollow noreferrer\">Generate random numbers</a> : </p>\n\n<hr>\n\n<p>This example generates random integers in a specific range. </p>\n\n<pre><code>import java.util.Random;\n\n/** Generate random integers in a certain range. */\npublic final class RandomRange {\n\n  public static final void main(String... aArgs){\n    log(\"Generating random integers in the range 1..10.\");\n\n    int START = 1;\n    int END = 10;\n    Random random = new Random();\n    for (int idx = 1; idx &lt;= 10; ++idx){\n      showRandomInteger(START, END, random);\n    }\n\n    log(\"Done.\");\n  }\n\n  private static void showRandomInteger(int aStart, int aEnd, Random aRandom){\n    if ( aStart &gt; aEnd ) {\n      throw new IllegalArgumentException(\"Start cannot exceed End.\");\n    }\n    //get the range, casting to long to avoid overflow problems\n    long range = (long)aEnd - (long)aStart + 1;\n    // compute a fraction of the range, 0 &lt;= frac &lt; range\n    long fraction = (long)(range * aRandom.nextDouble());\n    int randomNumber =  (int)(fraction + aStart);    \n    log(\"Generated : \" + randomNumber);\n  }\n\n  private static void log(String aMessage){\n    System.out.println(aMessage);\n  }\n} \n</code></pre>\n\n<p>An example run of this class :<br/></p>\n\n<pre><code>Generating random integers in the range 1..10.\nGenerated : 9\nGenerated : 3\nGenerated : 3\nGenerated : 9\nGenerated : 4\nGenerated : 1\nGenerated : 3\nGenerated : 9\nGenerated : 10\nGenerated : 10\nDone.\n</code></pre>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1488403595,"post_id":11923174,"comment_id":72220514,"content_license":"CC BY-SA 3.0","body":"<code>&#47;&#47; Since the random number is between the min and max values, simply add 1</code>. Why? Doesn&#39;t min count? Usually the range is [min, max) where min is included and max is excluded. Wrong answer, voted down."},{"owner":{"reputation":8775,"user_id":1297445,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/4243850fb352160089d0576d9479a2ff?s=128&d=identicon&r=PG","display_name":"Luke Taylor","link":"https://stackoverflow.com/users/1297445/luke-taylor"},"reply_to_user":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1488448433,"post_id":11923174,"comment_id":72239131,"content_license":"CC BY-SA 3.0","body":"@MaartenBodewes +1 is added because getRandomNumberBetween generates a random number exclusive of the provided endpoints."},{"owner":{"reputation":9820,"user_id":452775,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/88963e7cc58eabf150447e7b78a24793?s=128&d=identicon&r=PG","display_name":"Lii","link":"https://stackoverflow.com/users/452775/lii"},"edited":false,"score":1,"creation_date":1529238110,"post_id":11923174,"comment_id":88792964,"content_license":"CC BY-SA 4.0","body":"The number <code>min + 1</code> will be twice as likely than the other number to be the result of <code>getRandomNumberBetween</code>!"}],"owner":{"reputation":8775,"user_id":1297445,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/4243850fb352160089d0576d9479a2ff?s=128&d=identicon&r=PG","display_name":"Luke Taylor","link":"https://stackoverflow.com/users/1297445/luke-taylor"},"comment_count":3,"is_accepted":false,"score":20,"last_activity_date":1549635277,"last_edit_date":1549635277,"creation_date":1344783697,"answer_id":11923174,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>This methods might be convenient to use:</p>\n\n<p>This method will return a random number <strong><em>between</em></strong> the provided min and max value:</p>\n\n<pre><code>public static int getRandomNumberBetween(int min, int max) {\n    Random foo = new Random();\n    int randomNumber = foo.nextInt(max - min) + min;\n    if (randomNumber == min) {\n        // Since the random number is between the min and max values, simply add 1\n        return min + 1;\n    } else {\n        return randomNumber;\n    }\n}\n</code></pre>\n\n<p>and this method will return a random number <strong><em>from</em></strong> the provided min and max value (so the generated number could also be the min or max number):</p>\n\n<pre><code>public static int getRandomNumberFrom(int min, int max) {\n    Random foo = new Random();\n    int randomNumber = foo.nextInt((max + 1) - min) + min;\n\n    return randomNumber;\n}\n</code></pre>\n"},{"owner":{"reputation":1090,"user_id":1534027,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/190ad0b7c4f0af34898ab7d0384ce565?s=128&d=identicon&r=PG","display_name":"sachit","link":"https://stackoverflow.com/users/1534027/sachit"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1461218584,"last_edit_date":1461218584,"creation_date":1351325227,"answer_id":13098409,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>You can use this code snippet which will resolve your problem: </p>\n\n<pre><code>Random r = new Random();\nint myRandomNumber = 0;\nmyRandomNumber = r.nextInt(maxValue-minValue+1)+minValue;\n</code></pre>\n\n<p>Use myRandomNumber (which will give you a number within a range).</p>\n"},{"owner":{"reputation":788,"user_id":1348139,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/c680a504a05c61cd9a9069802536ce56?s=128&d=identicon&r=PG","display_name":"jatin3893","link":"https://stackoverflow.com/users/1348139/jatin3893"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1513798670,"last_edit_date":1513798670,"creation_date":1351325846,"answer_id":13098451,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I just generate a random number using Math.random() and multiply it by a big number, let's say 10000.  So, I get a number between 0 to 10,000 and call this number <code>i</code>. Now, if I need numbers between (x, y), then do the following:</p>\n\n<pre><code>i = x + (i % (y - x));\n</code></pre>\n\n<p>So, all <code>i</code>'s are numbers between x and y.</p>\n\n<p>To remove the bias as pointed out in the comments, rather than multiplying it by 10000 (or the big number), multiply it by (y-x).</p>\n"},{"comments":[{"owner":{"reputation":710,"user_id":1321016,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0bdc823a00b61cd230c0c742e47fc10b?s=128&d=identicon&r=PG","display_name":"Warren MacEvoy","link":"https://stackoverflow.com/users/1321016/warren-macevoy"},"edited":false,"score":0,"creation_date":1471472723,"post_id":13728977,"comment_id":65366087,"content_license":"CC BY-SA 3.0","body":"Try other ranges, your code does not produce the uniform values in the given range.  numberOne = 3.5 and numberTwo = 7.2 only produces values in the range 4.73..5.96."}],"owner":{"reputation":3703,"user_id":448005,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/2dEU1.png?s=128&g=1","display_name":"Arun Abraham","link":"https://stackoverflow.com/users/448005/arun-abraham"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1461218606,"last_edit_date":1461218606,"creation_date":1354728528,"answer_id":13728977,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>One of my friends had asked me this same question in university today (his requirements was to generate a random number between 1 &amp; -1). So I wrote this, and it works fine so far with my testing. There are ideally a lot of ways to generate random numbers given a range. Try this: </p>\n\n<p>Function:</p>\n\n<pre><code>private static float getRandomNumberBetween(float numberOne, float numberTwo) throws Exception{\n\n    if (numberOne == numberTwo){\n        throw new Exception(\"Both the numbers can not be equal\");\n    }\n\n    float rand = (float) Math.random();\n    float highRange = Math.max(numberOne, numberTwo);\n    float lowRange = Math.min(numberOne, numberTwo);\n\n    float lowRand = (float) Math.floor(rand-1);\n    float highRand = (float) Math.ceil(rand+1);\n\n    float genRand = (highRange-lowRange)*((rand-lowRand)/(highRand-lowRand))+lowRange;\n\n    return genRand;\n}\n</code></pre>\n\n<p>Execute like this:</p>\n\n<pre><code>System.out.println( getRandomNumberBetween(1,-1));\n</code></pre>\n"},{"owner":{"reputation":2767,"user_id":1693143,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/86b35e06b396b113daf1a9f6d5765a77?s=128&d=identicon&r=PG","display_name":"andrew","link":"https://stackoverflow.com/users/1693143/andrew"},"comment_count":0,"is_accepted":false,"score":88,"last_activity_date":1584996641,"last_edit_date":1584996641,"creation_date":1360711186,"answer_id":14843702,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p><code>ThreadLocalRandom</code> equivalent of class <code>java.util.Random</code> for multithreaded environment. Generating a random number is carried out locally in each of the threads. So we have a better performance by reducing the conflicts. </p>\n\n<pre><code>int rand = ThreadLocalRandom.current().nextInt(x,y);\n</code></pre>\n\n<p><code>x</code>,<code>y</code> - intervals e.g. (1,10)</p>\n"},{"owner":{"reputation":4777,"user_id":1660192,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/retUf.jpg?s=128&g=1","display_name":"agpt","link":"https://stackoverflow.com/users/1660192/agpt"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1375380435,"last_edit_date":1375380435,"creation_date":1370618059,"answer_id":16987468,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Try using <code>org.apache.commons.lang.RandomStringUtils</code> class. Yes, it sometimes give a  repeated number adjacently, but it will give the value between 5 and 15:</p>\n\n<pre><code>    while (true)\n    {\n        int abc = Integer.valueOf(RandomStringUtils.randomNumeric(1));\n        int cd = Integer.valueOf(RandomStringUtils.randomNumeric(2));\n        if ((cd-abc) &gt;= 5 &amp;&amp; (cd-abc) &lt;= 15)\n        {\n            System.out.println(cd-abc);\n            break;\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":5,"creation_date":1497907427,"post_id":18554758,"comment_id":76266337,"content_license":"CC BY-SA 3.0","body":"This could have been an edit of the other example, now it is just a blatant copy for reputation. Pointing out the &quot;answer with the most votes&quot; is also not very direct, it can change."},{"owner":{"reputation":9719,"user_id":1121841,"user_type":"registered","accept_rate":45,"profile_image":"https://i.stack.imgur.com/SN6YN.jpg?s=128&g=1","display_name":"Abel Callejo","link":"https://stackoverflow.com/users/1121841/abel-callejo"},"reply_to_user":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":1,"creation_date":1497918967,"post_id":18554758,"comment_id":76269790,"content_license":"CC BY-SA 3.0","body":"That is right @MaartenBodewes. When I wrote this answer, <a href=\"https://stackoverflow.com/revisions/363692/15\">the answer with the most votes above</a> was still written as an algorithm-like solution. Now, the solution above has changed a lot and now this answer looked like a copy-cat."},{"owner":{"reputation":923,"user_id":1557306,"user_type":"registered","accept_rate":25,"profile_image":"https://i.stack.imgur.com/7cDGa.jpg?s=128&g=1","display_name":"Leevi L","link":"https://stackoverflow.com/users/1557306/leevi-l"},"edited":false,"score":0,"creation_date":1570523513,"post_id":18554758,"comment_id":102930910,"content_license":"CC BY-SA 4.0","body":"I really don&#39;t get why such fundamental bits of code are not part of Java standard libraries. Why do I have to implement this?"}],"owner":{"reputation":9719,"user_id":1121841,"user_type":"registered","accept_rate":45,"profile_image":"https://i.stack.imgur.com/SN6YN.jpg?s=128&g=1","display_name":"Abel Callejo","link":"https://stackoverflow.com/users/1121841/abel-callejo"},"comment_count":3,"is_accepted":false,"score":52,"last_activity_date":1562955603,"last_edit_date":1562955603,"creation_date":1378004033,"answer_id":18554758,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>It can be done by simply doing the statement:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Randomizer.generate(0,10); //min of zero, max of ten\n</code></pre>\n\n<p>Below is its source-code</p>\n\n<h3>Randomizer.java</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Randomizer {\n    public static int generate(int min,int max) {\n        return min + (int)(Math.random() * ((max - min) + 1));\n    }\n}\n</code></pre>\n\n<p>It is just clean and simple.</p>\n"},{"owner":{"reputation":361,"user_id":1632187,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/28a404dfa649afec0bceec609b28f1cb?s=128&d=identicon&r=PG","display_name":"Akash Malhotra","link":"https://stackoverflow.com/users/1632187/akash-malhotra"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1461218677,"last_edit_date":1461218677,"creation_date":1379928283,"answer_id":18955785,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I think this code will work for it. Please try this: </p>\n\n<pre><code>import java.util.Random;\npublic final class RandomNumber {\n\n    public static final void main(String... aArgs) {\n        log(\"Generating 10 random integers in range 1..10.\");\n        int START = 1;\n        int END = 10;\n        Random randomGenerator = new Random();\n        for (int idx=1; idx&lt;=10; ++idx) {\n\n            // int randomInt=randomGenerator.nextInt(100);\n            // log(\"Generated : \" + randomInt);\n            showRandomInteger(START,END,randomGenerator);\n        }\n        log(\"Done\");\n    }\n\n    private static void log(String aMessage) {\n        System.out.println(aMessage);\n    }\n\n    private static void showRandomInteger(int aStart, int aEnd, Random aRandom) {\n        if (aStart &gt; aEnd) {\n            throw new IllegalArgumentException(\"Start cannot exceed End.\");\n        }\n        long range = (long)aEnd - (long)aStart + 1;\n        long fraction = (long) (range * aRandom.nextDouble());\n        int randomNumber = (int) (fraction + aStart);\n        log(\"Generated\" + randomNumber);\n    }\n}\n</code></pre>\n"},{"owner":{"user_type":"does_not_exist","display_name":"user591593"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1390049227,"last_edit_date":1390049227,"creation_date":1385302503,"answer_id":20175547,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I am thinking to linearly normalize the generated random numbers into desired range by using the following. Let <code>x</code> be a random number, let <code>a</code> and <code>b</code> be the minimum and maximum range of desired normalized number.</p>\n\n<p>Then below is just a very simple code snipplet to test the range produced by the linear mapping.</p>\n\n<pre><code>public static void main(String[] args) {\n    int a = 100;\n    int b = 1000;\n    int lowest = b;\n    int highest = a;\n    int count = 100000;\n    Random random = new Random();\n    for (int i = 0; i &lt; count; i++) {\n        int nextNumber = (int) ((Math.abs(random.nextDouble()) * (b - a))) + a;\n        if (nextNumber &lt; a || nextNumber &gt; b) {\n            System.err.println(\"number not in range :\" + nextNumber);\n        }\n        else {\n            System.out.println(nextNumber);\n        }\n        if (nextNumber &lt; lowest) {\n            lowest = nextNumber;\n        }\n        if (nextNumber &gt; highest) {\n            highest = nextNumber;\n        }\n    }\n    System.out.println(\"Produced \" + count + \" numbers from \" + lowest\n            + \" to \" + highest);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":8,"creation_date":1497907313,"post_id":20761900,"comment_id":76266284,"content_license":"CC BY-SA 3.0","body":"I don&#39;t see anything new here that hadn&#39;t been posted in countless earlier posts."}],"owner":{"reputation":458,"user_id":565179,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f7013bb0d568b42b67e28504746f168a?s=128&d=identicon&r=PG","display_name":"Prof Mo","link":"https://stackoverflow.com/users/565179/prof-mo"},"comment_count":1,"is_accepted":false,"score":21,"last_activity_date":1549635311,"last_edit_date":1549635311,"creation_date":1387891993,"answer_id":20761900,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Just use the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Random.html\" rel=\"noreferrer\">Random</a> class: </p>\n\n<pre><code>Random ran = new Random();\n// Assumes max and min are non-negative.\nint randomInt = min + ran.nextInt(max - min + 1);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":5240,"user_id":1501234,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/2VLce.jpg?s=128&g=1","display_name":"Jaroslaw Pawlak","link":"https://stackoverflow.com/users/1501234/jaroslaw-pawlak"},"edited":false,"score":1,"creation_date":1425916331,"post_id":21127158,"comment_id":46146563,"content_license":"CC BY-SA 3.0","body":"% has even bigger problem of distribution bias. I wrote a blog post about it recently: <a href=\"https://jaroslawpawlak.wordpress.com/2014/10/11/random-number-generator-using-modulo/\" rel=\"nofollow noreferrer\">jaroslawpawlak.wordpress.com/2014/10/11/&hellip;</a>"}],"owner":{"reputation":1384,"user_id":2271536,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/9795fd62281b6fa17ae44ea09eaee46a?s=128&d=identicon&r=PG","display_name":"Jorge","link":"https://stackoverflow.com/users/2271536/jorge"},"comment_count":1,"is_accepted":false,"score":6,"last_activity_date":1461218699,"last_edit_date":1461218699,"creation_date":1389747115,"answer_id":21127158,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I will simply state what is wrong with the solutions provided by the question and why the errors. </p>\n\n<p>Solution 1:</p>\n\n<pre><code>randomNum = minimum + (int)(Math.random()*maximum); \n</code></pre>\n\n<p>Problem: randomNum is assigned values numbers bigger than maximum.</p>\n\n<p>Explanation: Suppose our minimum is 5, and your maximum is 10. Any value from <code>Math.random()</code> greater than 0.6 will make the expression evaluate to 6 or greater, and adding 5 makes it greater than 10 (your maximum). The problem is you are multiplying the random number by the maximum (which generates a number almost as big as the maximum) and then adding the minimum. Unless the minimum is 1, it's not correct. You have to switch to, as mentioned in other answers</p>\n\n<pre><code>randomNum = minimum + (int)(Math.random()*(maximum-minimum+1))\n</code></pre>\n\n<p>The +1 is because <code>Math.random()</code> will never return 1.0.</p>\n\n<p>Solution 2:</p>\n\n<pre><code>Random rn = new Random();\nint n = maximum - minimum + 1;\nint i = rn.nextInt() % n;\nrandomNum =  minimum + i;\n</code></pre>\n\n<p>Your problem here is that '%' may return a negative number if the first term is smaller than 0. Since <code>rn.nextInt()</code> returns negative values with ~50% chance, you will also not get the expected result.</p>\n\n<p>This, was, however, almost perfect. You just had to look a bit further down the Javadoc, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29\" rel=\"nofollow\">nextInt(int n)</a>. With that method available, doing</p>\n\n<pre><code>Random rn = new Random();\nint n = maximum - minimum + 1;\nint i = rn.nextInt(n);\nrandomNum =  minimum + i;\n</code></pre>\n\n<p>Would also return the desired result.</p>\n"},{"owner":{"reputation":481,"user_id":3147737,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/YHlHB.jpg?s=128&g=1","display_name":"f3d0r","link":"https://stackoverflow.com/users/3147737/f3d0r"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1461218714,"last_edit_date":1461218714,"creation_date":1400973672,"answer_id":23850587,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>You can either use the Random class to generate a random number and then use the .nextInt(maxNumber) to generate a random number. The maxNumber is the number that you want the maximum when generating a random number. Please remember though, that the Random class gives you the numbers 0 through maxNumber-1.  </p>\n\n<pre><code>Random r = new Random();\nint i = r.nextInt();\n</code></pre>\n\n<p>Another way to do this is to use the Math.Random() class which many classes in schools require you to use because it is more efficient and you don't have to declare a new Random object. To get a random number using Math.Random() you type in:</p>\n\n<pre><code>Math.random() * (max - min) + min;\n</code></pre>\n"},{"owner":{"reputation":1681,"user_id":1734143,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/74f968336365385471af8a7536bb1d3b?s=128&d=identicon&r=PG","display_name":"yottabrain","link":"https://stackoverflow.com/users/1734143/yottabrain"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1461218722,"last_edit_date":1461218722,"creation_date":1402717838,"answer_id":24216407,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<pre><code>import java.util.Random; \n\npublic class RandomUtil {\n    // Declare as class variable so that it is not re-seeded every call\n    private static Random random = new Random();\n\n    /**\n     * Returns a psuedo-random number between min and max (both inclusive)\n     * @param min Minimim value\n     * @param max Maximim value. Must be greater than min.\n     * @return Integer between min and max (both inclusive)\n     * @see java.util.Random#nextInt(int)\n     */\n    public static int nextInt(int min, int max) {\n        // nextInt is normally exclusive of the top value,\n        // so add 1 to make it inclusive\n        return random.nextInt((max - min) + 1) + min;\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":351,"user_id":3589614,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ded2e7aaf1e9948789cb75d7a0f109b3?s=128&d=identicon&r=PG&f=1","display_name":"Sunil Chawla","link":"https://stackoverflow.com/users/3589614/sunil-chawla"},"comment_count":0,"is_accepted":false,"score":31,"last_activity_date":1549635250,"last_edit_date":1549635250,"creation_date":1407035274,"answer_id":25101263,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Let us take an example.</p>\n\n<p>Suppose I wish to generate a number between <strong>5-10</strong>:</p>\n\n<pre><code>int max = 10;\nint min = 5;\nint diff = max - min;\nRandom rn = new Random();\nint i = rn.nextInt(diff + 1);\ni += min;\nSystem.out.print(\"The Random Number is \" + i);\n</code></pre>\n\n<p><em>Let us understand this</em>...</p>\n\n<blockquote>\n  <blockquote>\n    <p>Initialize max with highest value and min with the lowest value. </p>\n    \n    <p>Now, we need to determine how many possible values can be obtained. For this example, it would be:</p>\n    \n    <blockquote>\n      <p><strong>5, 6, 7, 8, 9, 10</strong></p>\n    </blockquote>\n    \n    <p>So, count of this would be max - min + 1. </p>\n    \n    <blockquote>\n      <p>i.e. 10 - 5 + 1 = 6</p>\n    </blockquote>\n    \n    <p>The random number will generate a number between <strong>0-5</strong>. </p>\n    \n    <blockquote>\n      <p>i.e. 0, 1, 2, 3, 4, 5</p>\n    </blockquote>\n    \n    <p>Adding the <em>min</em> value to the random number would produce:</p>\n    \n    <blockquote>\n      <p>5, 6, 7, 8, 9, 10      </p>\n    </blockquote>\n    \n    <p>Hence we obtain the desired range. </p>\n  </blockquote>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":1104,"user_id":3157899,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/5f590cb295c3083b8a119f61aa73c201?s=128&d=identicon&r=PG","display_name":"Naxos84","link":"https://stackoverflow.com/users/3157899/naxos84"},"edited":false,"score":3,"creation_date":1519629223,"post_id":27156435,"comment_id":84971182,"content_license":"CC BY-SA 3.0","body":"I would suggest that you instantiate the randomIterator only once. See Greg Case comment on his own answer."}],"owner":{"reputation":81496,"user_id":1587046,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/onb2X.jpg?s=128&g=1","display_name":"Alexis C.","link":"https://stackoverflow.com/users/1587046/alexis-c"},"comment_count":1,"is_accepted":false,"score":164,"last_activity_date":1585840097,"last_edit_date":1585840097,"creation_date":1417026547,"answer_id":27156435,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>With <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a> they introduced the method <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Random.html#ints-int-int-\" rel=\"noreferrer\"><code>ints(int randomNumberOrigin, int randomNumberBound)</code></a> in the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Random.html\" rel=\"noreferrer\"><code>Random</code></a> class. </p>\n\n<p>For example if you want to generate five random integers (or a single one) in the range [0, 10], just do:</p>\n\n<pre><code>Random r = new Random();\nint[] fiveRandomNumbers = r.ints(5, 0, 11).toArray();\nint randomNumber = r.ints(1, 0, 11).findFirst().getAsInt();\n</code></pre>\n\n<p>The first parameter indicates just the size of the <code>IntStream</code> generated (which is the overloaded method of the one that produces an unlimited <code>IntStream</code>).</p>\n\n<p>If you need to do multiple separate calls, you can create an infinite primitive iterator from the stream:</p>\n\n<pre><code>public final class IntRandomNumberGenerator {\n\n    private PrimitiveIterator.OfInt randomIterator;\n\n    /**\n     * Initialize a new random number generator that generates\n     * random numbers in the range [min, max]\n     * @param min - the min value (inclusive)\n     * @param max - the max value (inclusive)\n     */\n    public IntRandomNumberGenerator(int min, int max) {\n        randomIterator = new Random().ints(min, max + 1).iterator();\n    }\n\n    /**\n     * Returns a random number in the range (min, max)\n     * @return a random number in the range (min, max)\n     */\n    public int nextInt() {\n        return randomIterator.nextInt();\n    }\n}\n</code></pre>\n\n<p>You can also do it for <code>double</code> and <code>long</code> values. I hope it helps! :)</p>\n"},{"owner":{"reputation":7876,"user_id":1805989,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c111e138995ac8390c16b4139889fef?s=128&d=identicon&r=PG","display_name":"Yakiv Mospan","link":"https://stackoverflow.com/users/1805989/yakiv-mospan"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1417136334,"last_edit_date":1417136334,"creation_date":1417135824,"answer_id":27180520,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Here is a simple sample that shows how to generate random number from closed <code>[min, max]</code> range, while <code>min &lt;= max is true</code></p>\n\n<p>You can reuse it as field in hole class, also having all <code>Random.class</code> methods in one place</p>\n\n<p><strong>Results example:</strong></p>\n\n<pre><code>RandomUtils random = new RandomUtils();\nrandom.nextInt(0, 0); // returns 0\nrandom.nextInt(10, 10); // returns 10\nrandom.nextInt(-10, 10); // returns numbers from -10 to 10 (-10, -9....9, 10)\nrandom.nextInt(10, -10); // throws assert\n</code></pre>\n\n<p><strong>Sources:</strong></p>\n\n<pre><code>import junit.framework.Assert;\nimport java.util.Random;\n\npublic class RandomUtils extends Random {\n\n    /**\n     * @param min generated value. Can't be &gt; then max\n     * @param max generated value\n     * @return values in closed range [min, max].\n     */\n    public int nextInt(int min, int max) {\n        Assert.assertFalse(\"min can't be &gt; then max; values:[\" + min + \", \" + max + \"]\", min &gt; max);\n        if (min == max) {\n            return max;\n        }\n\n        return nextInt(max - min + 1) + min;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":710,"user_id":1321016,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0bdc823a00b61cd230c0c742e47fc10b?s=128&d=identicon&r=PG","display_name":"Warren MacEvoy","link":"https://stackoverflow.com/users/1321016/warren-macevoy"},"edited":false,"score":0,"creation_date":1471470385,"post_id":28453447,"comment_id":65365224,"content_license":"CC BY-SA 3.0","body":"If max and min are large, this causes overflow problems and will give incorrect results."}],"owner":{"reputation":424,"user_id":1025230,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/537231f07f093f07f8210510b2b043f1?s=128&d=identicon&r=PG","display_name":"Muhammad Aamir Talib","link":"https://stackoverflow.com/users/1025230/muhammad-aamir-talib"},"comment_count":1,"is_accepted":false,"score":12,"last_activity_date":1461218753,"last_edit_date":1461218753,"creation_date":1423654818,"answer_id":28453447,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<pre><code>private static Random random = new Random();    \n\npublic static int getRandomInt(int min, int max){\n  return random.nextInt(max - min + 1) + min;\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>public static int getRandomInt(Random random, int min, int max)\n{\n  return random.nextInt(max - min + 1) + min;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":13123,"user_id":4391450,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8db407436e19be13dbdd4b49fe224d3a?s=128&d=identicon&r=PG&f=1","display_name":"AxelH","link":"https://stackoverflow.com/users/4391450/axelh"},"edited":false,"score":0,"creation_date":1467981015,"post_id":29021708,"comment_id":63952791,"content_license":"CC BY-SA 3.0","body":"For minimum &lt;= value &lt; maximum, I did the same with Math : <b>randomNum = minimum + (int)(Math.random() * (maximum-minimum));</b> but the casting isn&#39;t really nice to see ;)"},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1588708511,"post_id":29021708,"comment_id":109002160,"content_license":"CC BY-SA 4.0","body":"At least 7 years late duplicate answer."},{"owner":{"reputation":2294,"user_id":3457328,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/462e1d9150f9530cef352b963e28f42b?s=128&d=identicon&r=PG&f=1","display_name":"frankfurt-laravel","link":"https://stackoverflow.com/users/3457328/frankfurt-laravel"},"edited":false,"score":0,"creation_date":1615294702,"post_id":29021708,"comment_id":117641716,"content_license":"CC BY-SA 4.0","body":"That was the most easy one to implement for me as a beginner. Thanks!"}],"owner":{"reputation":1347,"user_id":4146952,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ab23ebb3f250c3f4c9ad63fc5b4c51ce?s=128&d=identicon&r=PG&f=1","display_name":"hexabunny","link":"https://stackoverflow.com/users/4146952/hexabunny"},"comment_count":3,"is_accepted":false,"score":104,"last_activity_date":1549635269,"last_edit_date":1549635269,"creation_date":1426200268,"answer_id":29021708,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Just a small modification of your first solution would suffice.</p>\n\n<pre><code>Random rand = new Random();\nrandomNum = minimum + rand.nextInt((maximum - minimum) + 1);\n</code></pre>\n\n<hr>\n\n<p>See more here for implementation of <a href=\"https://insight.io/github.com/lambdalab-mirror/jdk8u-jdk/blob/master/src/share/classes/java/util/Random.java?line=77\" rel=\"noreferrer\"><code>Random</code></a></p>\n"},{"comments":[{"owner":{"reputation":7273,"user_id":4785110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1","display_name":"maraca","link":"https://stackoverflow.com/users/4785110/maraca"},"edited":false,"score":1,"creation_date":1429212654,"post_id":29279143,"comment_id":47505405,"content_license":"CC BY-SA 3.0","body":"This is not that good, because if it is executed in the same mili second then you will get the same number, you need to put the rand initialization and the setSeet outside of the method."},{"owner":{"reputation":4505,"user_id":2590960,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/OxUCS.jpg?s=128&g=1","display_name":"grep","link":"https://stackoverflow.com/users/2590960/grep"},"reply_to_user":{"reputation":7273,"user_id":4785110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1","display_name":"maraca","link":"https://stackoverflow.com/users/4785110/maraca"},"edited":false,"score":0,"creation_date":1429272216,"post_id":29279143,"comment_id":47533177,"content_license":"CC BY-SA 3.0","body":"You need seed, yes, but using SecureRandom."},{"owner":{"reputation":7273,"user_id":4785110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1","display_name":"maraca","link":"https://stackoverflow.com/users/4785110/maraca"},"edited":false,"score":0,"creation_date":1429348783,"post_id":29279143,"comment_id":47565516,"content_license":"CC BY-SA 3.0","body":"I&#39;m sorry, but the one who rejected the change request has no clue of Java programming <b>It is a good suggestion, but as is it is wrong</b> because if executed in the same mili second it will give the same number, not random."},{"owner":{"reputation":7273,"user_id":4785110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1","display_name":"maraca","link":"https://stackoverflow.com/users/4785110/maraca"},"edited":false,"score":0,"creation_date":1429349444,"post_id":29279143,"comment_id":47565694,"content_license":"CC BY-SA 3.0","body":"The correct solution isn&#39;t anywhere to be found, not many people know static initializer blocks... that is what you should use to set the seed: 1: <code>private static int SecureRandom rand = new SecureRandom();</code> 2: <code>static {</code> 3: <code>rand.setSeed(...);</code> 4: <code>}</code>"},{"owner":{"reputation":7273,"user_id":4785110,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1","display_name":"maraca","link":"https://stackoverflow.com/users/4785110/maraca"},"edited":false,"score":0,"creation_date":1429349998,"post_id":29279143,"comment_id":47565874,"content_license":"CC BY-SA 3.0","body":"the int on line one should be deleted in my example. And the two first lines inside of your function. The rest stays the same."},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":6,"creation_date":1488403966,"post_id":29279143,"comment_id":72220723,"content_license":"CC BY-SA 3.0","body":"There is absolutely no need to seed <code>SecureRandom</code>, it will be seeded by the system. Directly calling <code>setSeed</code> is very dangerous, it may replace the (really random) seed with the date. And that will certainly <i>not</i> result in a <code>SecureRandom</code>, as anybody can guess the time and try and seed their own <code>SecureRandom</code> instance with that information."}],"owner":{"reputation":4505,"user_id":2590960,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/OxUCS.jpg?s=128&g=1","display_name":"grep","link":"https://stackoverflow.com/users/2590960/grep"},"comment_count":6,"is_accepted":false,"score":14,"last_activity_date":1467832776,"last_edit_date":1467832776,"creation_date":1427374960,"answer_id":29279143,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>It's better to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"noreferrer\">SecureRandom</a> rather than just Random.</p>\n\n<pre><code>public static int generateRandomInteger(int min, int max) {\n    SecureRandom rand = new SecureRandom();\n    rand.setSeed(new Date().getTime());\n    int randomNum = rand.nextInt((max - min) + 1) + min;\n    return randomNum;\n}\n</code></pre>\n"},{"owner":{"reputation":489,"user_id":2095604,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66c99547a9d57c7da77158f561f40c64?s=128&d=identicon&r=PG","display_name":"thangaraj","link":"https://stackoverflow.com/users/2095604/thangaraj"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1467832941,"last_edit_date":1467832941,"creation_date":1428502441,"answer_id":29517198,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>You can do something like this:</p>\n\n<pre><code>import java.awt.*;\nimport java.io.*;\nimport java.util.*;\nimport java.math.*;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        int first, second;\n\n        Scanner myScanner = new Scanner(System.in);\n\n        System.out.println(\"Enter first integer: \");\n        int numOne;\n        numOne = myScanner.nextInt();\n        System.out.println(\"You have keyed in \" + numOne);\n\n        System.out.println(\"Enter second integer: \");\n        int numTwo;\n        numTwo = myScanner.nextInt();\n        System.out.println(\"You have keyed in \" + numTwo);\n\n        Random generator = new Random();\n        int num = (int)(Math.random()*numTwo);\n        System.out.println(\"Random number: \" + ((num&gt;numOne)?num:numOne+num));\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":4037,"user_id":2093934,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/e8cf5a4aeca8cdf92b1c0e95987e65fb?s=128&d=identicon&r=PG&f=1","display_name":"gifpif","link":"https://stackoverflow.com/users/2093934/gifpif"},"comment_count":0,"is_accepted":false,"score":27,"last_activity_date":1549635307,"last_edit_date":1549635307,"creation_date":1432723388,"answer_id":30480195,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Generate a random number for the difference of min and max by using the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt(int)\" rel=\"noreferrer\">nextint(n)</a> method and then add min number to the result:</p>\n\n<pre><code>Random rn = new Random();\nint result = rn.nextInt(max - min + 1) + min;\nSystem.out.println(result);\n</code></pre>\n"},{"owner":{"reputation":30196,"user_id":2079831,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/707e9914d5a39558c376e8db47c60151?s=128&d=identicon&r=PG","display_name":"Andrew","link":"https://stackoverflow.com/users/2079831/andrew"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1446208511,"last_edit_date":1446208511,"creation_date":1446151573,"answer_id":33424282,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Random number from the range [min..max] inclusive:</p>\n\n<pre><code>int randomFromMinToMaxInclusive = ThreadLocalRandom.current()\n        .nextInt(min, max + 1);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1488404394,"post_id":39711614,"comment_id":72220969,"content_license":"CC BY-SA 3.0","body":"This becomes tricky once you have found most of the numbers within the range; there are more efficient ways of doing this (e.g. generating a random number with a max equal to the number of elements remaining, and skipping already found numbers. Like Bingo really."}],"owner":{"reputation":47762,"user_id":4233197,"user_type":"registered","accept_rate":55,"profile_image":"https://i.stack.imgur.com/sJEWz.jpg?s=128&g=1","display_name":"Hiren Patel","link":"https://stackoverflow.com/users/4233197/hiren-patel"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1474920833,"creation_date":1474920833,"answer_id":39711614,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>This will generate <strong>Random numbers list</strong> with <strong>range (Min - Max)</strong> with <strong>no duplicate</strong>.</p>\n\n<pre><code>generateRandomListNoDuplicate(1000, 8000, 500);\n</code></pre>\n\n<p>Add this method.</p>\n\n<pre><code>private void generateRandomListNoDuplicate(int min, int max, int totalNoRequired) {\n    Random rng = new Random();\n    Set&lt;Integer&gt; generatedList = new LinkedHashSet&lt;&gt;();\n    while (generatedList.size() &lt; totalNoRequired) {\n        Integer radnomInt = rng.nextInt(max - min + 1) + min;\n        generatedList.add(radnomInt);\n    }\n}\n</code></pre>\n\n<p>Hope this will help you.</p>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1497907742,"post_id":40854699,"comment_id":76266462,"content_license":"CC BY-SA 3.0","body":"Creating guard statements (if value &gt; other value then exception) should also work (presuming the range isn&#39;t set by user / system input)."}],"owner":{"reputation":1385,"user_id":3380739,"user_type":"registered","profile_image":"https://graph.facebook.com/711282833/picture?type=large","display_name":"user_3380739","link":"https://stackoverflow.com/users/3380739/user-3380739"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1480372411,"creation_date":1480372411,"answer_id":40854699,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Most of above suggestion don't consider 'overflow', For example: min = Integer.MIN_VALUE, max = 100. One of correct approaches I have so far is:</p>\n\n<pre><code>final long mod = max- min + 1L;\nfinal int next = (int) (Math.abs(rand.nextLong() % mod) + min);\n</code></pre>\n"},{"owner":{"reputation":1943,"user_id":649451,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7a881bb04363e8447a2182a6048e2e0c?s=128&d=identicon&r=PG","display_name":"false9striker","link":"https://stackoverflow.com/users/649451/false9striker"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1480702580,"creation_date":1480702580,"answer_id":40938597,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>You could use </p>\n\n<pre><code>RandomStringUtils.randomNumeric(int count)\n</code></pre>\n\n<p>method also which is from apache commons. </p>\n"},{"comments":[{"owner":{"reputation":47718,"user_id":6419007,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1","display_name":"Eric Duminil","link":"https://stackoverflow.com/users/6419007/eric-duminil"},"edited":false,"score":0,"creation_date":1488227244,"post_id":41273686,"comment_id":72129428,"content_license":"CC BY-SA 3.0","body":"Nice. You could use <code>List&lt;Integer&gt; ls = range.boxed().collect(Collectors.toList());</code>"},{"owner":{"reputation":47718,"user_id":6419007,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1","display_name":"Eric Duminil","link":"https://stackoverflow.com/users/6419007/eric-duminil"},"edited":false,"score":0,"creation_date":1488227300,"post_id":41273686,"comment_id":72129463,"content_license":"CC BY-SA 3.0","body":"new Integer(i) was also redundant, but it gets removed by the code in my previous comment anyway."},{"owner":{"reputation":2560,"user_id":2957169,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mf8Nx.jpg?s=128&g=1","display_name":"charles-allen","link":"https://stackoverflow.com/users/2957169/charles-allen"},"edited":false,"score":1,"creation_date":1501681483,"post_id":41273686,"comment_id":77885780,"content_license":"CC BY-SA 3.0","body":"Doesn&#39;t this provide 6 numbers in a random order rather than a single number? Seems a bit wasteful. And should I want another random number I can&#39;t just take the second in the list because it has no chance of being the same as the number already taken."}],"owner":{"reputation":740,"user_id":449946,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/gWI7z.png?s=128&g=1","display_name":"firephil","link":"https://stackoverflow.com/users/449946/firephil"},"comment_count":3,"is_accepted":false,"score":6,"last_activity_date":1482364431,"last_edit_date":1482364431,"creation_date":1482363436,"answer_id":41273686,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p><strong>A different approach using Java 8 IntStream and Collections.shuffle</strong></p>\n\n<pre><code>import java.util.stream.IntStream;\nimport java.util.ArrayList;\nimport java.util.Collections;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        IntStream range = IntStream.rangeClosed(5,10);\n        ArrayList&lt;Integer&gt; ls =  new ArrayList&lt;Integer&gt;();\n\n        //populate the ArrayList\n        range.forEach(i -&gt; ls.add(new Integer(i)) );\n\n        //perform a random shuffle  using the Collections Fisher-Yates shuffle\n        Collections.shuffle(ls);\n        System.out.println(ls);\n    }\n}\n</code></pre>\n\n<p><strong>The equivalent in Scala</strong></p>\n\n<pre><code>import scala.util.Random\n\nobject RandomRange extends App{\n  val x =  Random.shuffle(5 to 10)\n    println(x)\n}\n</code></pre>\n"},{"owner":{"reputation":30325,"user_id":3496570,"user_type":"registered","accept_rate":39,"profile_image":"https://i.stack.imgur.com/fhSKV.jpg?s=128&g=1","display_name":"AndroidGeek","link":"https://stackoverflow.com/users/3496570/androidgeek"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1495365218,"last_edit_date":1495365218,"creation_date":1484807845,"answer_id":41735301,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>I have created a method to get a unique integer in a given range.</p>\n\n<pre><code>/*\n      * minNum is the minimum possible random number\n      * maxNum is the maximum possible random number\n      * numbersNeeded is the quantity of random number required\n      * the give method provides you with unique random number between min &amp; max range\n*/\npublic static Set&lt;Integer&gt; getUniqueRandomNumbers( int minNum , int maxNum ,int numbersNeeded ){\n\n    if(minNum &gt;= maxNum)\n        throw new IllegalArgumentException(\"maxNum must be greater than minNum\");\n\n    if(! (numbersNeeded &gt; (maxNum - minNum + 1) ))\n        throw new IllegalArgumentException(\"numberNeeded must be greater then difference b/w (max- min +1)\");\n\n    Random rng = new Random(); // Ideally just create one instance globally\n\n    // Note: use LinkedHashSet to maintain insertion order\n    Set&lt;Integer&gt; generated = new LinkedHashSet&lt;Integer&gt;();\n    while (generated.size() &lt; numbersNeeded)\n    {\n        Integer next = rng.nextInt((maxNum - minNum) + 1) + minNum;\n\n        // As we're adding to a set, this will automatically do a containment check\n        generated.add(next);\n    }\n    return generated;\n}\n</code></pre>\n"},{"owner":{"reputation":64,"user_id":7884494,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-yYL-IVed_qM/AAAAAAAAAAI/AAAAAAAAALU/ToMd6yWesy4/photo.jpg?sz=128","display_name":"Jake O","link":"https://stackoverflow.com/users/7884494/jake-o"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1495365103,"last_edit_date":1495365103,"creation_date":1493209814,"answer_id":43634278,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>Using Java 8 Streams,</p>\n\n<ul>\n<li>Pass the initialCapacity - How many numbers</li>\n<li>Pass the randomBound - from x to randomBound</li>\n<li>Pass true/false for sorted or not</li>\n<li>Pass an new Random() object</li>\n</ul>\n\n<p>&nbsp;</p>\n\n<pre><code>public static List&lt;Integer&gt; generateNumbers(int initialCapacity, int randomBound, Boolean sorted, Random random) {\n\n    List&lt;Integer&gt; numbers = random.ints(initialCapacity, 1, randomBound).boxed().collect(Collectors.toList());\n\n    if (sorted)\n        numbers.sort(null);\n\n    return numbers;\n}\n</code></pre>\n\n<p>It generates numbers from 1-Randombound in this example.</p>\n"},{"owner":{"reputation":2801,"user_id":5246706,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/XBcKe.jpg?s=128&g=1","display_name":"Divyesh Kanzariya","link":"https://stackoverflow.com/users/5246706/divyesh-kanzariya"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1495805078,"creation_date":1495805078,"answer_id":44202788,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>If you already use <code>Commons Lang API 2.x</code> or latest version then there is one class for random number generation <code>RandomUtils</code>.</p>\n\n<pre><code>public static int nextInt(int n)\n</code></pre>\n\n<p>Returns a pseudorandom, uniformly distributed int value between 0 (inclusive) and the specified value (exclusive), from the Math.random() sequence.</p>\n\n<p>Parameters:\n<strong>n</strong> - the specified exclusive max-value</p>\n\n<pre><code>int random = RandomUtils.nextInt(1000000);\n</code></pre>\n\n<p>Note: In <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/math/RandomUtils.html#nextInt(java.util.Random)\" rel=\"nofollow noreferrer\">RandomUtils</a> have many methods for random number generation    </p>\n"},{"comments":[{"owner":{"reputation":569,"user_id":3698882,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/f217770f06488fcf2bab21157a97b47f?s=128&d=identicon&r=PG&f=1","display_name":"sokras","link":"https://stackoverflow.com/users/3698882/sokras"},"edited":false,"score":0,"creation_date":1500536331,"post_id":44228421,"comment_id":77382638,"content_license":"CC BY-SA 3.0","body":"This function produces the same number over and over again. In my case it was: 2147483647"},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1524518814,"post_id":44228421,"comment_id":86996944,"content_license":"CC BY-SA 3.0","body":"Fail: you have a function that requires a double and then perform + 1? This certainly goes against the principle of least surprise. What happens if you use min = 0.1 and max = 0.2?"},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"reply_to_user":{"reputation":569,"user_id":3698882,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/f217770f06488fcf2bab21157a97b47f?s=128&d=identicon&r=PG&f=1","display_name":"sokras","link":"https://stackoverflow.com/users/3698882/sokras"},"edited":false,"score":0,"creation_date":1524519391,"post_id":44228421,"comment_id":86997151,"content_license":"CC BY-SA 3.0","body":"@sokras the method calls <code>new Random</code> (check the JavaDoc): &quot;Creates a new random number generator. This constructor sets the seed of the random number generator to a value very likely to be distinct from any other invocation of this constructor.&quot; Very likely might just involve using the current time as seed. If that time uses milliseconds then current computers are fast enough to generate the same number. But besides that 2147483647 is <code>Integer.MAX_VALUE</code>; the output obviously depends on the input, which you haven&#39;t specified."}],"owner":{"reputation":1796,"user_id":7664765,"user_type":"registered","profile_image":"https://i.stack.imgur.com/vu76T.png?s=128&g=1","display_name":"Simon","link":"https://stackoverflow.com/users/7664765/simon"},"comment_count":3,"is_accepted":false,"score":30,"last_activity_date":1564640739,"last_edit_date":1564640739,"creation_date":1495981849,"answer_id":44228421,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>I use this:</p>\n\n<pre><code> /**\n   * @param min - The minimum.\n   * @param max - The maximum.\n   * @return A random double between these numbers (inclusive the minimum and maximum).\n   */\n public static double getRandom(double min, double max) {\n   return (Math.random() * (max + 1 - min)) + min;\n }\n</code></pre>\n\n<p>You can cast it to an Integer if you want.</p>\n"},{"owner":{"reputation":261,"user_id":5150135,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-RBASI_A-_2g/AAAAAAAAAAI/AAAAAAAAAEI/k5qmh9zEjGM/photo.jpg=k-s128","display_name":"Mulalo Madida","link":"https://stackoverflow.com/users/5150135/mulalo-madida"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1549635255,"last_edit_date":1549635255,"creation_date":1497962357,"answer_id":44653324,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>You can achieve that concisely in Java 8:</p>\n\n<pre><code>Random random = new Random();\n\nint max = 10;\nint min = 5;\nint totalNumber = 10;\n\nIntStream stream = random.ints(totalNumber, min, max);\nstream.forEach(System.out::println);\n</code></pre>\n"},{"owner":{"reputation":385,"user_id":5213194,"user_type":"registered","accept_rate":25,"profile_image":"https://i.stack.imgur.com/kx9Bc.jpg?s=128&g=1","display_name":"Gihan Chathuranga","link":"https://stackoverflow.com/users/5213194/gihan-chathuranga"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1549635300,"last_edit_date":1549635300,"creation_date":1502547039,"answer_id":45651198,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>This is the easy way to do this.</p>\n\n<pre><code>import java.util.Random;\nclass Example{\n    public static void main(String args[]){\n        /*-To test-\n        for(int i = 1 ;i&lt;20 ; i++){\n            System.out.print(randomnumber()+\",\");\n        }\n        */\n\n        int randomnumber = randomnumber();\n\n    }\n\n    public static int randomnumber(){\n        Random rand = new Random();\n        int randomNum = rand.nextInt(6) + 5;\n\n        return randomNum;\n    }\n}\n</code></pre>\n\n<p>In there 5 is the starting point of random numbers. 6 is the range including number 5.</p>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1588708315,"post_id":46567228,"comment_id":109002067,"content_license":"CC BY-SA 4.0","body":"Besides there being other answers that use streams, at least they don&#39;t create a new stream within a loop, now that really doesn&#39;t make sense."}],"owner":{"reputation":874,"user_id":6807980,"user_type":"registered","profile_image":"https://i.stack.imgur.com/dnezd.jpg?s=128&g=1","display_name":"Sam2016","link":"https://stackoverflow.com/users/6807980/sam2016"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1549635289,"last_edit_date":1549635289,"creation_date":1507126685,"answer_id":46567228,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>A simple way to generate n random numbers between a and b\ne.g a =90, b=100, n =20</p>\n\n<pre><code>Random r = new Random();\nfor(int i =0; i&lt;20; i++){\n    System.out.println(r.ints(90, 100).iterator().nextInt());\n}\n</code></pre>\n\n<p><code>r.ints()</code> returns an <code>IntStream</code> and has several useful methods, have look at its <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\">API</a>.</p>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1546683680,"post_id":46642267,"comment_id":94936481,"content_license":"CC BY-SA 4.0","body":"An explanation would be in order."}],"owner":{"reputation":226,"user_id":8674497,"user_type":"registered","profile_image":"https://i.stack.imgur.com/PeUWn.jpg?s=128&g=1","display_name":"namezhouyu","link":"https://stackoverflow.com/users/8674497/namezhouyu"},"comment_count":1,"is_accepted":false,"score":7,"last_activity_date":1549634960,"last_edit_date":1549634960,"creation_date":1507538908,"answer_id":46642267,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>Random random = new Random();\nint max = 10;\nint min = 3;\nint randomNum = random.nextInt(max) % (max - min + 1) + min;\n</code></pre>\n"},{"owner":{"reputation":1916,"user_id":4485195,"user_type":"registered","profile_image":"https://i.stack.imgur.com/EOSCg.jpg?s=128&g=1","display_name":"Lawakush Kurmi","link":"https://stackoverflow.com/users/4485195/lawakush-kurmi"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1549634952,"last_edit_date":1549634952,"creation_date":1509604687,"answer_id":47069053,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>To generate a random number \"in between two numbers\", use the following code:</p>\n\n<pre><code>Random r = new Random();\nint lowerBound = 1;\nint upperBound = 11;\nint result = r.nextInt(upperBound-lowerBound) + lowerBound;\n</code></pre>\n\n<p>This gives you a random number in between 1 (inclusive) and 11 (exclusive), so initialize the upperBound value by adding 1. For example, if you want to generate random number between 1 to 10 then initialize the upperBound number with 11 instead of 10.</p>\n"},{"owner":{"reputation":516,"user_id":987044,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/usahc.jpg?s=128&g=1","display_name":"ledlogic","link":"https://stackoverflow.com/users/987044/ledlogic"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1512169307,"creation_date":1512169307,"answer_id":47602699,"question_id":363681,"content_license":"CC BY-SA 3.0","body":"<p>There is a library at <a href=\"https://sourceforge.net/projects/stochunit/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/stochunit/</a> for handling selection of ranges.</p>\n\n<pre><code>StochIntegerSelector randomIntegerSelector = new StochIntegerSelector();\nrandomIntegerSelector.setMin(-1);\nrandomIntegerSelector.setMax(1);\nInteger selectInteger = randomIntegerSelector.selectInteger();\n</code></pre>\n\n<p>It has edge inclusion/preclusion.</p>\n"},{"owner":{"reputation":73,"user_id":8985913,"user_type":"registered","accept_rate":20,"profile_image":"https://lh4.googleusercontent.com/-yCd9VNryX0s/AAAAAAAAAAI/AAAAAAAAABM/VKYX4vvbMts/photo.jpg?sz=128","display_name":"BMAM","link":"https://stackoverflow.com/users/8985913/bmam"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1549635273,"last_edit_date":1549635273,"creation_date":1517460898,"answer_id":48555591,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>The below code generates a random number between 100,000 and 900,000. This code will generate six digit values. I'm using this code to generate a six-digit <a href=\"https://en.wikipedia.org/wiki/One-time_password\" rel=\"nofollow noreferrer\">OTP</a>.</p>\n\n<p>Use <code>import java.util.Random</code> to use this random method.</p>\n\n<pre><code>import java.util.Random;\n\n// Six digits random number generation for OTP\nRandom rnd = new Random();\nlong longregisterOTP = 100000 + rnd.nextInt(900000);\nSystem.out.println(longregisterOTP);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":590,"user_id":10253771,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6f311d0d20ddc701966d54c4f0ae80a2?s=128&d=identicon&r=PG&f=1","display_name":"user10253771","link":"https://stackoverflow.com/users/10253771/user10253771"},"edited":false,"score":0,"creation_date":1548205437,"post_id":48978108,"comment_id":95457036,"content_license":"CC BY-SA 4.0","body":"This doesn&#39;t look right. In &quot;int n = (max + 1 - min) + min; return (int) (Math.random() * n);&quot; , n = max + 1, and you are just creating an int in [0, max] instead of [min, max]. It should be &quot;int n = max + 1 - min; return (int) (Math.random() * n) + min;&quot;"}],"owner":{"reputation":1248,"user_id":6441370,"user_type":"registered","accept_rate":67,"profile_image":"https://lh3.googleusercontent.com/-Ko7l3J9xVaM/AAAAAAAAAAI/AAAAAAAAW0U/TQsjjxmp1tA/photo.jpg?sz=128","display_name":"Siddhartha Thota","link":"https://stackoverflow.com/users/6441370/siddhartha-thota"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1549634986,"last_edit_date":1549634986,"creation_date":1519590394,"answer_id":48978108,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Say you want range between 0-9, 0 is minimum and 9 is maximum. The below function will print anything between 0 and 9. It's the same for all ranges.</p>\n\n<pre><code>public static void main(String[] args) {\n    int b = randomNumberRange(0, 9);\n    int d = randomNumberRange (100, 200);\n    System.out.println(\"value of b is \" + b);\n    System.out.println(\"value of d is \" + d);\n}\n\npublic static int randomNumberRange(int min, int max) {\n    int n = (max + 1 - min) + min;\n    return (int) (Math.random() * n);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2139,"user_id":958732,"user_type":"registered","profile_image":"https://i.stack.imgur.com/miJkn.png?s=128&g=1","display_name":"Johnbot","link":"https://stackoverflow.com/users/958732/johnbot"},"edited":false,"score":0,"creation_date":1532068152,"post_id":49784982,"comment_id":89842521,"content_license":"CC BY-SA 4.0","body":"Is there a reason why the example includes a <code>.parallel()</code>? It seems to me like generating a 100 random numbers would be too trivial to warrant parallelism."},{"owner":{"reputation":12945,"user_id":2668232,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/8uJTm.jpg?s=128&g=1","display_name":"Oleksandr Pyrohov","link":"https://stackoverflow.com/users/2668232/oleksandr-pyrohov"},"reply_to_user":{"reputation":2139,"user_id":958732,"user_type":"registered","profile_image":"https://i.stack.imgur.com/miJkn.png?s=128&g=1","display_name":"Johnbot","link":"https://stackoverflow.com/users/958732/johnbot"},"edited":false,"score":0,"creation_date":1532075720,"post_id":49784982,"comment_id":89846690,"content_license":"CC BY-SA 4.0","body":"@Johnbot Thanks for comment, you are right. But, the main reason was to show an API (of course, the smart path is to measure performance before using <code>parallel</code> processing). By the way, for array of <code>1_000_000</code> elements, the <code>parallel</code> version was 2 times faster on my machine in comparison with sequential."}],"owner":{"reputation":12945,"user_id":2668232,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/8uJTm.jpg?s=128&g=1","display_name":"Oleksandr Pyrohov","link":"https://stackoverflow.com/users/2668232/oleksandr-pyrohov"},"comment_count":2,"is_accepted":false,"score":26,"last_activity_date":1549616209,"last_edit_date":1549616209,"creation_date":1523483679,"answer_id":49784982,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>As of Java 7, you should no longer use <code>Random</code>. For most uses, the\n  random number generator of choice is now\n  <a href=\"https://stackoverflow.com/questions/363681/how-do-i-generate-random-integers-within-a-specific-range-in-java#answer-363692\"><code>ThreadLocalRandom</code></a>.<br/><br/>For fork join pools and parallel\n  streams, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/SplittableRandom.html\" rel=\"noreferrer\"><code>SplittableRandom</code></a>.</p>\n</blockquote>\n\n<p><em>Joshua Bloch. Effective Java. Third Edition.</em></p>\n\n<h2>Starting from Java 8</h2>\n\n<p>For fork join pools and parallel streams, use <code>SplittableRandom</code> that is usually faster, has a better statistical independence and uniformity properties in comparison with <code>Random</code>.</p>\n\n<p>To generate a random <code>int</code> in the range <code>[0, 1_000]:</code></p>\n\n<pre><code>int n = new SplittableRandom().nextInt(0, 1_001);\n</code></pre>\n\n<p>To generate a random <code>int[100]</code> array of values in the range <code>[0, 1_000]:</code></p>\n\n<pre><code>int[] a = new SplittableRandom().ints(100, 0, 1_001).parallel().toArray();\n</code></pre>\n\n<p>To return a Stream of random values:</p>\n\n<pre><code>IntStream stream = new SplittableRandom().ints(100, 0, 1_001);\n</code></pre>\n"},{"owner":{"reputation":61,"user_id":2310053,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7dbd66fd840556b131dc54c8764b9f27?s=128&d=identicon&r=PG&f=1","display_name":"Sanjeev Singh","link":"https://stackoverflow.com/users/2310053/sanjeev-singh"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1527089053,"creation_date":1527089053,"answer_id":50492122,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>The following is another example using Random and forEach</p>\n\n<pre><code>int firstNum = 20;//Inclusive\nint lastNum = 50;//Exclusive\nint streamSize = 10;\nRandom num = new Random().ints(10, 20, 50).forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":1,"creation_date":1546683533,"post_id":50627635,"comment_id":94936446,"content_license":"CC BY-SA 4.0","body":"An explanation would be in order."}],"owner":{"reputation":7718,"user_id":4812170,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/6oHM1.jpg?s=128&g=1","display_name":"vaquar khan","link":"https://stackoverflow.com/users/4812170/vaquar-khan"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1549600855,"last_edit_date":1549600855,"creation_date":1527779794,"answer_id":50627635,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>import java.util.Random;\n\npublic class RandomSSNTest {\n\n    public static void main(String args[]) {\n        generateDummySSNNumber();\n    }\n\n\n    //831-33-6049\n    public static void generateDummySSNNumber() {\n        Random random = new Random();\n\n        int id1 = random.nextInt(1000);//3\n        int id2 = random.nextInt(100);//2\n        int id3 = random.nextInt(10000);//4\n\n        System.out.print((id1+\"-\"+id2+\"-\"+id3));\n    }\n\n}\n</code></pre>\n\n<p>You can also use </p>\n\n<pre><code>import java.util.concurrent.ThreadLocalRandom;\nRandom random = ThreadLocalRandom.current();\n</code></pre>\n\n<p>However, this class doesnât perform well in a multi-threaded environment.</p>\n"},{"owner":{"reputation":778,"user_id":7315895,"user_type":"registered","profile_image":"https://i.stack.imgur.com/PTS6n.jpg?s=128&g=1","display_name":"monster","link":"https://stackoverflow.com/users/7315895/monster"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1549634997,"last_edit_date":1549634997,"creation_date":1534249554,"answer_id":51841402,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Making the following change in <strong>Attempt 1</strong> should do the work - </p>\n\n<pre><code>randomNum = minimum + (int)(Math.random() * (maximum - minimum) );\n</code></pre>\n\n<p>Check <a href=\"https://ideone.com/20nXU9\" rel=\"nofollow noreferrer\">this</a> for working code.</p>\n"},{"owner":{"reputation":269,"user_id":9169330,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f130db8a75d99333936b47f413fb3e7?s=128&d=identicon&r=PG&f=1","display_name":"Alekya","link":"https://stackoverflow.com/users/9169330/alekya"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1549635091,"last_edit_date":1549635091,"creation_date":1534920392,"answer_id":51961141,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>public static void main(String[] args) {\n\n    Random ran = new Random();\n\n    int min, max;\n    Scanner sc = new Scanner(System.in);\n    System.out.println(\"Enter min range:\");\n    min = sc.nextInt();\n    System.out.println(\"Enter max range:\");\n    max = sc.nextInt();\n    int num = ran.nextInt(min);\n    int num1 = ran.nextInt(max);\n    System.out.println(\"Random Number between given range is \" + num1);\n\n}\n</code></pre>\n"},{"owner":{"reputation":578,"user_id":8704849,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-YqQnm9dP7bQ/AAAAAAAAAAI/AAAAAAAAAUQ/mjgqTiG666k/photo.jpg?sz=128","display_name":"Prakhar Nigam","link":"https://stackoverflow.com/users/8704849/prakhar-nigam"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1549635006,"last_edit_date":1549635006,"creation_date":1542440795,"answer_id":53349281,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Use java.util for Random for general use.</p>\n\n<p>You can define your minimum and maximum range to get those results.</p>\n\n<pre><code>Random rand=new Random();\nrand.nextInt((max+1) - min) + min;\n</code></pre>\n"},{"owner":{"reputation":72,"user_id":6039920,"user_type":"registered","profile_image":"https://i.stack.imgur.com/RvgZK.jpg?s=128&g=1","display_name":"Anjali Pavithra","link":"https://stackoverflow.com/users/6039920/anjali-pavithra"},"comment_count":0,"is_accepted":false,"score":-4,"last_activity_date":1613666416,"last_edit_date":1613666416,"creation_date":1546335544,"answer_id":53994407,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>You can do as below.</p>\n<pre><code>import java.util.Random;\npublic class RandomTestClass {\n\n    public static void main(String[] args) {\n        Random r = new Random();\n        int max, min;\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;Enter maximum value : &quot;);\n        max = scanner.nextInt();\n        System.out.println(&quot;Enter minimum value : &quot;);\n        min = scanner.nextInt();\n        int randomNum;\n        randomNum = r.nextInt(max) + min;\n        System.out.println(&quot;Random Number : &quot; + randomNum);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":2,"creation_date":1561980507,"post_id":56109005,"comment_id":100221854,"content_license":"CC BY-SA 4.0","body":"There have been multiple answers that already suggested <code>ThreadLocalRandom</code>. If a question has been protected then please take extra care not to duplicate answers."}],"owner":{"reputation":939,"user_id":4398100,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f55a87c817e970a1406c79e682462370?s=128&d=identicon&r=PG&f=1","display_name":"Anshul Singhal","link":"https://stackoverflow.com/users/4398100/anshul-singhal"},"comment_count":1,"is_accepted":false,"score":6,"last_activity_date":1557738270,"creation_date":1557738270,"answer_id":56109005,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Following code could be used:</p>\n\n<pre><code>ThreadLocalRandom.current().nextInt(rangeStart, rangeEndExclusive)\n</code></pre>\n"},{"owner":{"reputation":629,"user_id":11199879,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0a9c56c2190957960c9463c03486df8?s=128&d=identicon&r=PG&f=1","display_name":"Kaplan","link":"https://stackoverflow.com/users/11199879/kaplan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1564485653,"last_edit_date":1564485653,"creation_date":1562403760,"answer_id":56912649,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p><em>here's a function that returns exactly one integer random number in a range defined by</em> <code>lowerBoundIncluded</code> <em>and</em> <code>upperBoundIncluded</code><em>, as requested by</em> user42155</p>\n\n<p><code>SplittableRandom splittableRandom = new SplittableRandom();</code></p>\n\n<pre><code>BiFunction&lt;Integer,Integer,Integer&gt; randomInt = (lowerBoundIncluded, upperBoundIncluded)\n    -&gt; splittableRandom.nextInt( lowerBoundIncluded, upperBoundIncluded + 1 );\n</code></pre>\n\n<p><code>randomInt.apply( â¦, â¦ );  // gets the random number</code></p>\n\n<p><br /><em>â¦or shorter for the one-time generation of a random number</em></p>\n\n<pre><code>new SplittableRandom().nextInt( lowerBoundIncluded, upperBoundIncluded + 1 );\n</code></pre>\n"},{"comments":[{"owner":{"reputation":23133,"user_id":4850040,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/acYd0.png?s=128&g=1","display_name":"Toby Speight","link":"https://stackoverflow.com/users/4850040/toby-speight"},"edited":false,"score":10,"creation_date":1576495074,"post_id":59355199,"comment_id":104905687,"content_license":"CC BY-SA 4.0","body":"Thank you for this code snippet, which might provide some limited short-term help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its long-term value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with other, similar questions.  Please <a href=\"https://stackoverflow.com/posts/59355199/edit\">edit</a> your answer to add some explanation, including the assumptions you&#39;ve made.  In particular, it&#39;s not obvious how this code accepts the lower and upper bounds of the problem statement."}],"owner":{"reputation":37,"user_id":7030304,"user_type":"registered","profile_image":"https://i.stack.imgur.com/yJNi6.jpg?s=128&g=1","display_name":"Rahul Dhiman","link":"https://stackoverflow.com/users/7030304/rahul-dhiman"},"comment_count":1,"is_accepted":false,"score":-4,"last_activity_date":1590374796,"last_edit_date":1590374796,"creation_date":1576493777,"answer_id":59355199,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>The following snippet will give a random value between 0 and 10000:</p>\n\n<pre><code>import java.util.Random;\npublic class Main\n{\n    public static void main(String[] args) {\n        Random rand = new Random();\n        System.out.printf(\"%04d%n\", rand.nextInt(10000));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":8492,"user_id":1402846,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/z5AzI.png?s=128&g=1","display_name":"Pang","link":"https://stackoverflow.com/users/1402846/pang"},"edited":false,"score":0,"creation_date":1597194220,"post_id":61595029,"comment_id":112052039,"content_license":"CC BY-SA 4.0","body":"This appears to be just a repeat of many of the existing answers."}],"owner":{"reputation":135,"user_id":10401370,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-hsG34lHNVp8/AAAAAAAAAAI/AAAAAAAAA6o/NgTpSYwdrVI/photo.jpg?sz=128","display_name":"Lokesh Sharma","link":"https://stackoverflow.com/users/10401370/lokesh-sharma"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1598125969,"last_edit_date":1598125969,"creation_date":1588603690,"answer_id":61595029,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<pre><code>int func(int max, int min){\n\n      int range = max - min + 1;\n      \n      // Math.random() function will return a random no between [0.0,1.0).\n      int res = (int) ( Math.random()*range)+min;\n\n      return res;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":651,"user_id":2719152,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/095141d76dd9b36dcad0a53bfd25df83?s=128&d=identicon&r=PG&f=1","display_name":"user2719152","link":"https://stackoverflow.com/users/2719152/user2719152"},"edited":false,"score":0,"creation_date":1594265665,"post_id":62078915,"comment_id":111067307,"content_license":"CC BY-SA 4.0","body":"Why make life so complicated when it is possible to have simple solutions :)"},{"owner":{"reputation":1540,"user_id":1343090,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/9cfae81db0246b542ae383782e9fc4eb?s=128&d=identicon&r=PG","display_name":"Anand","link":"https://stackoverflow.com/users/1343090/anand"},"reply_to_user":{"reputation":651,"user_id":2719152,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/095141d76dd9b36dcad0a53bfd25df83?s=128&d=identicon&r=PG&f=1","display_name":"user2719152","link":"https://stackoverflow.com/users/2719152/user2719152"},"edited":false,"score":0,"creation_date":1594293817,"post_id":62078915,"comment_id":111078827,"content_license":"CC BY-SA 4.0","body":"I thought, this was simplest given random numbers in a range."},{"owner":{"reputation":7650,"user_id":1594823,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/Vm3pF.png?s=128&g=1","display_name":"Saikat","link":"https://stackoverflow.com/users/1594823/saikat"},"edited":false,"score":0,"creation_date":1595921573,"post_id":62078915,"comment_id":111633125,"content_license":"CC BY-SA 4.0","body":"Generated number can start with a zero!"},{"owner":{"reputation":1069,"user_id":3726133,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/bd1869f14535babac41274d3500ae3ac?s=128&d=identicon&r=PG&f=1","display_name":"Raimund Kr&#228;mer","link":"https://stackoverflow.com/users/3726133/raimund-kr%c3%a4mer"},"edited":false,"score":0,"creation_date":1606051520,"post_id":62078915,"comment_id":114836028,"content_license":"CC BY-SA 4.0","body":"This produces a string, not an integer, and is therefore not an answer to the question."},{"owner":{"reputation":1540,"user_id":1343090,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/9cfae81db0246b542ae383782e9fc4eb?s=128&d=identicon&r=PG","display_name":"Anand","link":"https://stackoverflow.com/users/1343090/anand"},"edited":false,"score":0,"creation_date":1606220414,"post_id":62078915,"comment_id":114891584,"content_license":"CC BY-SA 4.0","body":"It returns \\p{Digit}"}],"owner":{"reputation":1540,"user_id":1343090,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/9cfae81db0246b542ae383782e9fc4eb?s=128&d=identicon&r=PG","display_name":"Anand","link":"https://stackoverflow.com/users/1343090/anand"},"comment_count":5,"is_accepted":false,"score":3,"last_activity_date":1606220792,"last_edit_date":1606220792,"creation_date":1590727653,"answer_id":62078915,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>Use Apache Lang3 Commons</p>\n<pre><code>Integer.parseInt(RandomStringUtils.randomNumeric(6, 6));\n</code></pre>\n<p>Min Value 100000 to Max Value 999999</p>\n"},{"owner":{"reputation":1062,"user_id":7484853,"user_type":"registered","profile_image":"https://i.stack.imgur.com/OGdX0.jpg?s=128&g=1","display_name":"Hasee Amarathunga","link":"https://stackoverflow.com/users/7484853/hasee-amarathunga"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1602134322,"creation_date":1602134322,"answer_id":64256226,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>You can use following way to do that</p>\n<pre><code>int range = 10;\nint min = 5\nRandom r = new Random();\nint  = r.nextInt(range) + min;\n</code></pre>\n"},{"owner":{"reputation":30335,"user_id":1366871,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b3ec9d9128a25ba6eae8a1d42c2eb04a?s=128&d=identicon&r=PG","display_name":"dreamcrash","link":"https://stackoverflow.com/users/1366871/dreamcrash"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1611770979,"creation_date":1611770979,"answer_id":65924896,"question_id":363681,"content_license":"CC BY-SA 4.0","body":"<p>To avoid repeating what have been said multiple times, I am showing an alternative for those that need a cryptographically stronger pseudo-random number generator by using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">SecureRandom</a> class, which extends the class <code>Random</code>.  From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">source</a> one can read:</p>\n<blockquote>\n<p><strong>This class provides a cryptographically strong random number generator\n(RNG).</strong> A cryptographically strong random number minimally complies\nwith the statistical random number generator tests specified in FIPS\n140-2, Security Requirements for Cryptographic Modules, section 4.9.1.\nAdditionally, SecureRandom must produce non-deterministic output.\nTherefore any seed material passed to a SecureRandom object must be\nunpredictable, and all SecureRandom output sequences must be\ncryptographically strong, as described in RFC 1750: Randomness\nRecommendations for Security.</p>\n<p>A caller obtains a SecureRandom instance via the no-argument\nconstructor or one of the getInstance methods:</p>\n<pre><code>  SecureRandom random = new SecureRandom();  \n</code></pre>\n<p>Many SecureRandom implementations are in the form of a pseudo-random number generator\n(PRNG), which means they use a deterministic algorithm to produce a\npseudo-random sequence from a true random seed. Other implementations\nmay produce true random numbers, and yet others may use a combination\nof both techniques.</p>\n</blockquote>\n<p>To generate a random number between a <code>min</code> and <code>max</code> values inclusive:</p>\n<pre><code>public static int generate(SecureRandom secureRandom, int min, int max) {\n        return min + secureRandom.nextInt((max - min) + 1);\n}\n</code></pre>\n<p>for a given a <code>min</code> (inclusive) and <code>max</code> (exclusive) values:</p>\n<pre><code>return min + secureRandom.nextInt((max - min));\n</code></pre>\n<p>A running code example:</p>\n<pre><code>public class Main {\n\n    public static int generate(SecureRandom secureRandom, int min, int max) {\n        return min + secureRandom.nextInt((max - min) + 1);\n    }\n\n    public static void main(String[] arg) {\n        SecureRandom random = new SecureRandom();\n        System.out.println(generate(random, 0, 2 ));\n    }\n}\n</code></pre>\n<p>Source such as <a href=\"https://stackoverflow.com/questions/11051205/difference-between-java-util-random-and-java-security-securerandom\">stackoverflow</a>, <a href=\"https://www.baeldung.com/java-secure-random\" rel=\"nofollow noreferrer\">baeldung</a>, <a href=\"https://www.geeksforgeeks.org/random-vs-secure-random-numbers-java/\" rel=\"nofollow noreferrer\">geeksforgeeks</a> provide comparisons between <code>Random</code> and <code>SecureRandom</code> classes.</p>\n<p>From <a href=\"https://www.baeldung.com/java-secure-random\" rel=\"nofollow noreferrer\">baeldung</a> one can read:</p>\n<blockquote>\n<p>The most common way of using SecureRandom is to generate int, long,\nfloat, double or boolean values:</p>\n<p>int randomInt = secureRandom.nextInt(); <br>\nlong randomLong = secureRandom.nextLong();  <br>\nfloat randomFloat = secureRandom.nextFloat();  <br>\ndouble randomDouble = secureRandom.nextDouble();  <br>\nboolean randomBoolean = secureRandom.nextBoolean();  <br></p>\n<p><strong>For generating int values we can pass an upper bound as a parameter:</strong></p>\n<p>int randomInt = secureRandom.nextInt(upperBound); <br></p>\n<p><strong>In addition, we can generate a stream of values for int, double and long:</strong></p>\n<p>IntStream randomIntStream = secureRandom.ints(); <br>\nLongStream randomLongStream = secureRandom.longs(); <br>\nDoubleStream randomDoubleStream = secureRandom.doubles(); <br></p>\n<p><strong>For all streams we can explicitly set the stream size:</strong></p>\n<p>IntStream intStream = secureRandom.ints(streamSize);</p>\n</blockquote>\n<p>This class offers several other options (<em>e.g.,</em> choosing the underlying random number generator) that are out of the scope of this question.</p>\n"}],"owner":{"reputation":44429,"user_id":42155,"user_type":"registered","accept_rate":22,"profile_image":"https://www.gravatar.com/avatar/bec1c77805ad9d7e6b1dca098442e984?s=128&d=identicon&r=PG","display_name":"user42155","link":"https://stackoverflow.com/users/42155/user42155"},"comment_count":3,"is_answered":true,"view_count":4328234,"protected_date":1296764202,"answer_count":68,"score":3681,"last_activity_date":1613666416,"creation_date":1229106057,"last_edit_date":1608907891,"question_id":363681,"link":"https://stackoverflow.com/questions/363681/how-do-i-generate-random-integers-within-a-specific-range-in-java","title":"How do I generate random integers within a specific range in Java?","body":"<p>How do I generate a random <code>int</code> value in a specific range?</p>\n<p>I have tried the following, but those do not work:</p>\n<p><strong>Attempt 1:</strong></p>\n<pre><code>randomNum = minimum + (int)(Math.random() * maximum);\n</code></pre>\n<p>Bug: <code>randomNum</code> can be bigger than <code>maximum</code>.</p>\n<p><strong>Attempt 2:</strong></p>\n<pre><code>Random rn = new Random();\nint n = maximum - minimum + 1;\nint i = rn.nextInt() % n;\nrandomNum =  minimum + i;\n</code></pre>\n<p>Bug: <code>randomNum</code> can be smaller than <code>minimum</code>.</p>\n"},{"tags":["java","string","security","passwords","char"],"answers":[{"comments":[{"owner":{"reputation":2145,"user_id":1009901,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1","display_name":"Yeti","link":"https://stackoverflow.com/users/1009901/yeti"},"edited":false,"score":10,"creation_date":1441106812,"post_id":8881376,"comment_id":52534913,"content_license":"CC BY-SA 3.0","body":"If a process has access to memory of your application, then that is already a security breach, right?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":2145,"user_id":1009901,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/pUwqu.jpg?s=128&g=1","display_name":"Yeti","link":"https://stackoverflow.com/users/1009901/yeti"},"edited":false,"score":10,"creation_date":1441108036,"post_id":8881376,"comment_id":52535621,"content_license":"CC BY-SA 3.0","body":"@Yeti: Yes, but it&#39;s not like it&#39;s black and white. If they can only get a snapshot of the memory then you want to reduce how much damage that snapshot can do, or reduce the window during which a really serious snapshot can be taken."},{"owner":{"reputation":220615,"user_id":535871,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1","display_name":"Ted Hopp","link":"https://stackoverflow.com/users/535871/ted-hopp"},"edited":false,"score":34,"creation_date":1473102684,"post_id":8881376,"comment_id":66004136,"content_license":"CC BY-SA 3.0","body":"A common attack method is to run a process that allocates lots of memory and then scans it for left-over, useful data like passwords. The process doesn&#39;t need any magical access to another process&#39;s memory space; it just relies on other processes dying without first clearing out sensitive data and the OS also not clearing memory (or page buffers) before making it available to a new process. Clearing out passwords stored in <code>char[]</code> locations cuts off that line of attack, something not possible when using <code>String</code>."},{"owner":{"reputation":8903,"user_id":334451,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/752bf1cd2ef2702724c89f661a5e78d7?s=128&d=identicon&r=PG","display_name":"Mikko Rantalainen","link":"https://stackoverflow.com/users/334451/mikko-rantalainen"},"edited":false,"score":5,"creation_date":1587454400,"post_id":8881376,"comment_id":108510076,"content_license":"CC BY-SA 4.0","body":"If OS does not clear memory before giving it to another process, the OS has major security issues! However, technically the clearing is often done with protected mode tricks and if the CPU is broken (e.g. Intel Meldown) it&#39;s still possible to read old memory contents."},{"owner":{"reputation":397,"user_id":7597142,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ba2aaf02dcba82b8983be8d3e9787b22?s=128&d=identicon&r=PG&f=1","display_name":"Prateek Pande","link":"https://stackoverflow.com/users/7597142/prateek-pande"},"edited":false,"score":0,"creation_date":1610281800,"post_id":8881376,"comment_id":116077513,"content_license":"CC BY-SA 4.0","body":"If using strings, password could also be there in the literal pool and can&#39;t be cleared manually."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":397,"user_id":7597142,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ba2aaf02dcba82b8983be8d3e9787b22?s=128&d=identicon&r=PG&f=1","display_name":"Prateek Pande","link":"https://stackoverflow.com/users/7597142/prateek-pande"},"edited":false,"score":4,"creation_date":1610282127,"post_id":8881376,"comment_id":116077621,"content_license":"CC BY-SA 4.0","body":"@PrateekPande: It would only be in the literal pool if it were present in the source code, or explicitly interned. Those are both bad ideas in general..."}],"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"comment_count":6,"is_accepted":true,"score":4458,"last_activity_date":1524246627,"last_edit_date":1524246627,"creation_date":1326723976,"answer_id":8881376,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p><strong>Strings are immutable</strong>. That means once you've created the <code>String</code>, if another process can dump memory, there's no way (aside from <a href=\"https://en.wikipedia.org/wiki/Reflection_%28computer_programming%29\" rel=\"noreferrer\">reflection</a>) you can get rid of the data before <a href=\"https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29\" rel=\"noreferrer\">garbage collection</a> kicks in.</p>\n\n<p>With an array, you can explicitly wipe the data after you're done with it. You can overwrite the array with anything you like, and the password won't be present anywhere in the system, even before garbage collection.</p>\n\n<p>So yes, this <em>is</em> a security concern - but even using <code>char[]</code> only reduces the window of opportunity for an attacker, and it's only for this specific type of attack.</p>\n\n<p>As noted in the comments, it's possible that arrays being moved by the garbage collector will leave stray copies of the data in memory. I believe this is implementation-specific - the garbage collector <em>may</em> clear all memory as it goes, to avoid this sort of thing. Even if it does, there's still the time during which the <code>char[]</code> contains the actual characters as an attack window.</p>\n"},{"comments":[{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":16,"creation_date":1454685581,"post_id":8881395,"comment_id":58169752,"content_license":"CC BY-SA 3.0","body":"Not secure by default.  If we&#39;re talking a web application, most web containers will pass the password into the <code>HttpServletRequest</code> object in plaintext.  If the JVM version is 1.6 or lower, it&#39;ll be in permgen space.  If it&#39;s in 1.7, it&#39;ll still be readable until it gets collected.  (Whenever that is.)"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":4,"creation_date":1489053888,"post_id":8881395,"comment_id":72506938,"content_license":"CC BY-SA 3.0","body":"@avgvstvs: strings are not automatically moved to the permgen space, that only applies to intern&#39;ed strings. Besides that, the permgen space is also subject to garbage collection, just at a lower rate. The real issue with the permgen space is itâs fixed size, which is exactly the reason why no one should mindlessly call <code>intern()</code> on arbitrary strings. But you are right in that the <code>String</code> instances exist in the first place (until collected) and turning them into <code>char[]</code> arrays afterwards doesnât change it."},{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":3,"creation_date":1489077792,"post_id":8881395,"comment_id":72523695,"content_license":"CC BY-SA 3.0","body":"@Holger see <a href=\"https://docs.oracle.com/javase/specs/jvms/se6/html/ConstantPool.doc.html#67960\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se6/html/&hellip;</a>  &quot;Otherwise, a new instance of class String is created containing the sequence of Unicode characters given by the CONSTANT_String_info structure; that class instance is the result of string literal derivation. Finally, the intern method of the new String instance is invoked.&quot;  In 1.6, the JVM would call intern for you when it detected identical sequences."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":0,"creation_date":1489080480,"post_id":8881395,"comment_id":72525546,"content_license":"CC BY-SA 3.0","body":"@avgvstvs: this is relevant to the <i>constant pool</i> entries of a class, describing string literals, only. The constant pool of a class contains, as the name suggests, only <i>constant</i> strings, which obviously must be known at compile time (how could they appear in the class file otherwise). Strings created at runtime, i.e. via <code>Stringbuilder</code> or one of the constructors of <code>String</code> are not affected."},{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":3,"creation_date":1489257801,"post_id":8881395,"comment_id":72596176,"content_license":"CC BY-SA 3.0","body":"@Holger, you are correct I conflated constant pool and string pool, but it is also false that permgen space <i>only</i> applied to interned strings.  Prior to 1.7, both the constant_pool and the string_pool resided in permgen space.  That means the only class of Strings that were allocated to the heap were as you said, <code>new String()</code> or <code>StringBuilder.toString()</code>  I managed applications with lots of string constants, and we had lots of permgen creep as a result.  Until 1.7."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":5,"creation_date":1489404049,"post_id":8881395,"comment_id":72639865,"content_license":"CC BY-SA 3.0","body":"@avgvstvs: well, string constants are, as the JLS mandates, always interned, hence the statement that interned strings ended up in the permgen space, applied to string constants implicitly. The only difference is that string constants were created in the permgen space in the first place, whereas calling <code>intern()</code> on an arbitrary string could cause the allocation of an equivalent string in the permgen space. The latter could get GCâed, if there was no literal string of the same contents sharing that objectâ¦"},{"owner":{"reputation":6153,"user_id":5167682,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/2vexc.jpg?s=128&g=1","display_name":"roottraveller","link":"https://stackoverflow.com/users/5167682/roottraveller"},"edited":false,"score":0,"creation_date":1509433009,"post_id":8881395,"comment_id":81005526,"content_license":"CC BY-SA 3.0","body":"simple words, +1."},{"owner":{"reputation":80350,"user_id":1281433,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/O8XCE.png?s=128&g=1","display_name":"Joshua Taylor","link":"https://stackoverflow.com/users/1281433/joshua-taylor"},"edited":false,"score":1,"creation_date":1521139654,"post_id":8881395,"comment_id":85616249,"content_license":"CC BY-SA 3.0","body":"Neat to note, though, that <i>some</i> information about the string is still leaked (if memory can be inspected): the <i>length</i> of the password.  With a C style string, we could just have a buffer of memory and once it&#39;s nulled out, we don&#39;t know how long the original string was.  With the <code>char[]</code> in Java, we do.  If an attacker can see memory, and sees that getPassword() returns a <code>char[1]</code>, that indicates a much easier brute force target than one that returns a <code>char[16]</code>."}],"owner":{"reputation":4588,"user_id":1011704,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f6aaf917279d86f93ae0671b3060985b?s=128&d=identicon&r=PG","display_name":"alephx","link":"https://stackoverflow.com/users/1011704/alephx"},"comment_count":8,"is_accepted":false,"score":361,"last_activity_date":1331401852,"last_edit_date":1331401852,"creation_date":1326724053,"answer_id":8881395,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>Character arrays (<code>char[]</code>) can be cleared after use by setting each character to zero and Strings not. If someone can somehow see the memory image, they can see a password in plain text if Strings are used, but if <code>char[]</code> is used, after purging data with 0's, the password is secure.</p>\n"},{"comments":[{"owner":{"reputation":45430,"user_id":69809,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1","display_name":"Groo","link":"https://stackoverflow.com/users/69809/groo"},"edited":false,"score":4,"creation_date":1326734810,"post_id":8881399,"comment_id":11105696,"content_license":"CC BY-SA 3.0","body":"I wouldn&#39;t say that the problem is that your references will or will not &quot;escape&quot;. It&#39;s just that strings will remain unmodified in memory for some additional time, while <code>char[]</code> can be modified, and then it&#39;s irrelevant whether it&#39;s collected or not. And since string interning needs to be done explicitly for non-literals, it&#39;s the same like telling that a <code>char[]</code> can be referenced by a static field."},{"owner":{"reputation":469,"user_id":1386469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eea9f016b5ae9a2f2a190e8e01ec824c?s=128&d=identicon&r=PG","display_name":"Dawesi","link":"https://stackoverflow.com/users/1386469/dawesi"},"edited":false,"score":2,"creation_date":1533498197,"post_id":8881399,"comment_id":90356803,"content_license":"CC BY-SA 4.0","body":"isn&#39;t password in memory as a string from the form post?"}],"owner":{"reputation":63444,"user_id":64174,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1151371a864ddfe69499e8c8e5a401d7?s=128&d=identicon&r=PG","display_name":"Sean Owen","link":"https://stackoverflow.com/users/64174/sean-owen"},"comment_count":2,"is_accepted":false,"score":88,"last_activity_date":1326724074,"creation_date":1326724074,"answer_id":8881399,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>I don't think this is a valid suggestion, but, I can at least guess at the reason.</p>\n\n<p>I think the motivation is wanting to make sure that you can erase all trace of the password in memory promptly and with certainty after it is used. With a <code>char[]</code> you could overwrite each element of the array with a blank or something for sure. You can't edit the internal value of a <code>String</code> that way.</p>\n\n<p>But that alone isn't a good answer; why not just make sure a reference to the <code>char[]</code> or <code>String</code> doesn't escape? Then there's no security issue. But the thing is that <code>String</code> objects can be <code>intern()</code>ed in theory and kept alive inside the constant pool. I suppose using <code>char[]</code> forbids this possibility.</p>\n"},{"comments":[{"owner":{"reputation":273369,"user_id":40342,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/a648ccb47bbbe9497c073315aac4d33e?s=128&d=identicon&r=PG","display_name":"Joachim Sauer","link":"https://stackoverflow.com/users/40342/joachim-sauer"},"edited":false,"score":35,"creation_date":1326730997,"post_id":8881461,"comment_id":11104399,"content_license":"CC BY-SA 3.0","body":"I&#39;d replace &quot;completely useless&quot; with &quot;just a minor security improvement&quot;. For example you could get access to a memory dump if you happen to have read access to a tmp directory, a badly configured machine and a crash in your application. In that case you wouldn&#39;t be able to install a keylogger, but you <i>could</i> analyze the core dump."},{"owner":{"reputation":5680,"user_id":85661,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/2dbf658a6000684870711ebf974eaae8?s=128&d=identicon&r=PG&f=1","display_name":"Dan Is Fiddling By Firelight","link":"https://stackoverflow.com/users/85661/dan-is-fiddling-by-firelight"},"edited":false,"score":46,"creation_date":1326731172,"post_id":8881461,"comment_id":11104470,"content_license":"CC BY-SA 3.0","body":"Wiping unencrypted data from memory as soon as you&#39;re done with it is considered a best practice not because it&#39;s foolproof (it&#39;s not); but because it reduces your threat exposure level.  Real time attacks aren&#39;t prevented by doing this; but because it serves a a damage mitigation tool by significantly reduces the amount of data that is exposed in a retroactive attack on a memory snapshot (eg a copy of your apps memory that was written to a swap file, or that was read out of memory yanked from a running server and moved to a different one before its state failed)."},{"owner":{"reputation":3789,"user_id":941058,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/vJ4dI.jpg?s=128&g=1","display_name":"kingdango","link":"https://stackoverflow.com/users/941058/kingdango"},"edited":false,"score":10,"creation_date":1326824327,"post_id":8881461,"comment_id":11129687,"content_license":"CC BY-SA 3.0","body":"I tend to agree with the attitude of this response. I&#39;d venture to propose most security breaches of consequence occur at a much higher level of abstraction than the bits in memory.  Sure, there are probably scenarios in hyper-secure defense systems where this may be of considerable concern but seriously thinking at this level is overkill for 99% of the applications where .NET or Java are being leveraged (as it related to garbage collection)."},{"owner":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":0,"creation_date":1327079952,"post_id":8881461,"comment_id":11197232,"content_license":"CC BY-SA 3.0","body":"maybe localhost isn&#39;t what you want to protect.  Maybe you have created a program running on an unsecure client and you need the password for accessing a database.  If you don&#39;t trust the client and are trying to protect the database, wiping passwords from memory is good advice."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":1,"creation_date":1327086527,"post_id":8881461,"comment_id":11199219,"content_license":"CC BY-SA 3.0","body":"@RolfRander that is even worse, you should not enter passwords on an untrusted client - use a one time key (not sure this is the right term, a password that only works once and gets locked out after that use)."},{"owner":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":0,"creation_date":1327087907,"post_id":8881461,"comment_id":11199641,"content_license":"CC BY-SA 3.0","body":"most websites use passwords for login.  Your credit card number and security-digits is also a kind of password."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":0,"creation_date":1327093089,"post_id":8881461,"comment_id":11201136,"content_license":"CC BY-SA 3.0","body":"@RolfRander there is nothing about websites that requires an untrusted client, if the user chooses to use a compromised system then there is nothing that you can do to protect him from the consequences."},{"owner":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":0,"creation_date":1327096971,"post_id":8881461,"comment_id":11202182,"content_license":"CC BY-SA 3.0","body":"as I said, the point might be protecting the server, not the client. My point with the website-example is that there are lots of services using passwords (for different reasons, although other mechanisms obviously would be more secure.  Bottom line being that a scenario where you want to protect the server, won&#39;t trust the client and are using passwords, storing passwords in a char[] is a wise choice and this isn&#39;t really a far-fetched scenario."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":0,"creation_date":1327140395,"post_id":8881461,"comment_id":11207770,"content_license":"CC BY-SA 3.0","body":"@RolfRander somehow I get the feeling that you use a single login for all your clients and don&#39;t have any security/validation serverside. Its your duty to make sure that a user can&#39;t compromise the database (access restrictions and validation serverside) and the users duty to make sure that his account can&#39;t be compromised (his password)."},{"owner":{"reputation":3060,"user_id":47402,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/761d507cb76e1cab2cb527891faf1b43?s=128&d=identicon&r=PG","display_name":"Rolf Rander","link":"https://stackoverflow.com/users/47402/rolf-rander"},"edited":false,"score":1,"creation_date":1327232978,"post_id":8881461,"comment_id":11221050,"content_license":"CC BY-SA 3.0","body":"Absolutely. But for the user to make sure his password isn&#39;t compromised, the software handling the password has to take care to reduce the chance that malware (on the client) can pick up passwords from the client application memory.  To achieve that, I believe storing the password in a char[] and overwriting this afterwards is good advice."},{"owner":{"reputation":767,"user_id":1567566,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/4e534cd103a47fdf043beed76f6794e6?s=128&d=identicon&r=PG","display_name":"Tinman","link":"https://stackoverflow.com/users/1567566/tinman"},"edited":false,"score":2,"creation_date":1349904503,"post_id":8881461,"comment_id":17354947,"content_license":"CC BY-SA 3.0","body":"I&#39;d say that of someone understands the thinking behind the char vs sting then they are more likely to be thinking of security when configuring the servers. Not thinking is what usually introduces security holes."},{"owner":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":11,"creation_date":1406178905,"post_id":8881461,"comment_id":38730451,"content_license":"CC BY-SA 3.0","body":"After the Heartbleed penetration of server memory, revealing passwords, I would replace the string &quot;just a minor security improvement&quot; with &quot;absolutely essential to not use String for passwords, but use a char [] instead.&quot;"},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":2,"creation_date":1406386073,"post_id":8881461,"comment_id":38818098,"content_license":"CC BY-SA 3.0","body":"@PetervdL heartbleed happened because someone got the great idea that reusing memory was cheaper than allocating new (cleared) memory, you cannot reuse a String in Java, just hope that nobody ever gets the idea to put your char[] into a reuse list for better performance."},{"owner":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":1,"creation_date":1406486748,"post_id":8881461,"comment_id":38840861,"content_license":"CC BY-SA 3.0","body":"You&#39;re missing the point completely, Josefx.  The point is that heartbleed allowed remote reading of process memory, which everyone had hitherto thought very unlikely.  When combined with the use of Java strings, passwords are easily revealed.  Char [] allows the developer to blank out passwords, String does not even give that opportunity.  Char [] + heartbleed may be harmful if coder screws up.  String + heartbleed == definitely always harmful."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":11,"creation_date":1406741973,"post_id":8881461,"comment_id":38952101,"content_license":"CC BY-SA 3.0","body":"@PetervdL heartbleed only allowed reading of a specific reused collection of buffers (used for both security critical data and network I/O without clearing in between - for performance reasons), you cannot combine this with a Java String since they are by design not reuseable. Nor can you read into random memory using Java to get at the contents of a String. The language and design problems that lead to heartbleed are just not possible with Java Strings."},{"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"reply_to_user":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":6,"creation_date":1406835568,"post_id":8881461,"comment_id":38997862,"content_license":"CC BY-SA 3.0","body":"@PetervdL then please do not refer the &quot;heartbleed bug in combination with Java Strings&quot; and I am sure most I mentioned in relation to heartbleed was correct, the libreSSL developers got quite detailed on why OpenSSL was a security nightmare. There &quot;may&quot; be a way to use a bug in the JIT to bypass Javas build in range checks or the automatic zeroing of object memory and it &quot;might&quot; be possible for someone to trigger this from a remote location without crashing the JVM, however that has nothing in common with heartbleed, nor would any bug on the JVM be so simple or optimized for exploits."},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"reply_to_user":{"reputation":4715,"user_id":253661,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/271ce22b6d779ccf67abd73688234905?s=128&d=identicon&r=PG","display_name":"Peter vdL","link":"https://stackoverflow.com/users/253661/peter-vdl"},"edited":false,"score":3,"creation_date":1436332550,"post_id":8881461,"comment_id":50560487,"content_license":"CC BY-SA 3.0","body":"@PetervdL It&#39;s not just not &quot;specific&quot; to the Heartbleed bug; it&#39;s totally inapplicable. I suggest you don&#39;t reference Heartbleed as justification for security measures until you have a better grasp of its nature. Thanks to josefx for shedding light on this often misunderstood issue."},{"owner":{"reputation":7916,"user_id":912829,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/8155348e86202fd2f553332dde3b2fcf?s=128&d=identicon&r=PG&f=1","display_name":"ACV","link":"https://stackoverflow.com/users/912829/acv"},"edited":false,"score":0,"creation_date":1524695589,"post_id":8881461,"comment_id":87080534,"content_license":"CC BY-SA 3.0","body":"There is yet another case - when the JVM crashes and produces a memory dump."},{"owner":{"reputation":469,"user_id":1386469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eea9f016b5ae9a2f2a190e8e01ec824c?s=128&d=identicon&r=PG","display_name":"Dawesi","link":"https://stackoverflow.com/users/1386469/dawesi"},"edited":false,"score":0,"creation_date":1533499161,"post_id":8881461,"comment_id":90357018,"content_license":"CC BY-SA 4.0","body":"Why would you store the password in in memory? external system? web or api request submits a string (ironically), so it&#39;s in memory anyway at that point. I&#39;d never store the login password in another variable (other than the readonly one it&#39;s sent to the server with) unencrypted for any reason?  Should web requests convert letters to their char number equiv to submit so the request variable is a number? As there is no char datatype from the browser?"},{"owner":{"reputation":1439,"user_id":218139,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e54f588a34f4efcf22992051febf8f94?s=128&d=identicon&r=PG","display_name":"Stefan L","link":"https://stackoverflow.com/users/218139/stefan-l"},"edited":false,"score":1,"creation_date":1545063488,"post_id":8881461,"comment_id":94486601,"content_license":"CC BY-SA 4.0","body":"And for completeness let&#39;s not forget the more recent meltdown and spectre attacks: <a href=\"https://meltdownattack.com/\" rel=\"nofollow noreferrer\">meltdownattack.com</a> which could be exploited via a web browser or shared hosting environment."}],"owner":{"reputation":14767,"user_id":216111,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4f6b5ef485ac16233e1536193245fc55?s=128&d=identicon&r=PG","display_name":"josefx","link":"https://stackoverflow.com/users/216111/josefx"},"comment_count":20,"is_accepted":false,"score":227,"last_activity_date":1437346321,"last_edit_date":1437346321,"creation_date":1326724345,"answer_id":8881461,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>Some people believe that you have to overwrite the memory used to store the password once you no longer need it. This reduces the time window an attacker has to read the password from your system and completely ignores the fact that the attacker already needs enough access to hijack the JVM memory to do this. An attacker with that much access can catch your key events making this completely useless (AFAIK, so please correct me if I am wrong).</p>\n\n<p><strong>Update</strong></p>\n\n<p>Thanks to the comments I have to update my answer. Apparently there are two cases where this can add a (very) minor security improvement as it reduces the time a password could land on the hard drive. Still I think it's overkill for most use cases.</p>\n\n<ul>\n<li>Your target system may be badly configured or you have to assume it is and you have to be paranoid about core dumps (can be valid if the systems are not managed by an administrator). </li>\n<li>Your software has to be overly paranoid to prevent data leaks with the attacker gaining access to the hardware - using things like <a href=\"http://en.wikipedia.org/wiki/TrueCrypt\" rel=\"noreferrer\">TrueCrypt</a> (discontinued), <a href=\"https://veracrypt.codeplex.com/\" rel=\"noreferrer\">VeraCrypt</a>, or <a href=\"https://ciphershed.org/\" rel=\"noreferrer\">CipherShed</a>.</li>\n</ul>\n\n<p>If possible, disabling core dumps and the swap file would take care of both problems. However, they would require administrator rights and may reduce functionality (less memory to use) and pulling RAM from a running system would still be a valid concern.</p>\n"},{"comments":[{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"reply_to_user":{"reputation":26692,"user_id":144746,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG","display_name":"Voo","link":"https://stackoverflow.com/users/144746/voo"},"edited":false,"score":44,"creation_date":1326849243,"post_id":8885343,"comment_id":11136307,"content_license":"CC BY-SA 3.0","body":"@voo, but i doubt you&#39;d log via direct writing to stream and concatenation. logging framework would transform the char[] into good output"},{"owner":{"reputation":49787,"user_id":277683,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/c15311acd88ded73e20238c71adf253f?s=128&d=identicon&r=PG","display_name":"Konrad Garus","link":"https://stackoverflow.com/users/277683/konrad-garus"},"reply_to_user":{"reputation":32599,"user_id":10608,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/3aecd64dd133d96acfa0a4cd0f7d6ba6?s=128&d=identicon&r=PG","display_name":"Alexander Bird","link":"https://stackoverflow.com/users/10608/alexander-bird"},"edited":false,"score":44,"creation_date":1327063191,"post_id":8885343,"comment_id":11191515,"content_license":"CC BY-SA 3.0","body":"@Thr4wn Default implementation of <code>toString</code> is <code>classname@hashcode</code>. <code>[C</code> represents <code>char[]</code>, the rest is hexadecimal hash code."},{"owner":{"reputation":472,"user_id":578101,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/594e4fb2b1c056db119f250630599c60?s=128&d=identicon&r=PG","display_name":"mauhiz","link":"https://stackoverflow.com/users/578101/mauhiz"},"edited":false,"score":18,"creation_date":1436430967,"post_id":8885343,"comment_id":50612637,"content_license":"CC BY-SA 3.0","body":"Interesting idea. I would like to point out that this does not transpose to Scala which has a meaningful toString for arrays."},{"owner":{"reputation":30439,"user_id":1804599,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/v91P3.jpg?s=128&g=1","display_name":"rightfold","link":"https://stackoverflow.com/users/1804599/rightfold"},"edited":false,"score":42,"creation_date":1441042332,"post_id":8885343,"comment_id":52508543,"content_license":"CC BY-SA 3.0","body":"I&#39;d write a <code>Password</code> class type for this. It&#39;s less obscure, and harder to accidentally pass somewhere."},{"owner":{"reputation":374,"user_id":4418511,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/4b10982a4070169a871c7f55a8c3c446?s=128&d=identicon&r=PG&f=1","display_name":"GC_","link":"https://stackoverflow.com/users/4418511/gc"},"edited":false,"score":11,"creation_date":1471872181,"post_id":8885343,"comment_id":65509060,"content_license":"CC BY-SA 3.0","body":"Why would someone assume the char array was going to be cast as an Object?  I&#39;m not sure I get why every likes this answer.  Suppose you did this: System.out.println(&quot;Password&quot;.toCharArray());"},{"owner":{"reputation":1109,"user_id":1294423,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/59e9d4f8bec370afd6e0bbb0906397c7?s=128&d=identicon&r=PG","display_name":"Gavin S. Yancey","link":"https://stackoverflow.com/users/1294423/gavin-s-yancey"},"edited":false,"score":3,"creation_date":1497917245,"post_id":8885343,"comment_id":76269340,"content_license":"CC BY-SA 3.0","body":"Given that Java&#39;s hashcode implementation for arrays is not a secure hash, an attacker who found <code>[C@5829428e</code> in a logfile could likely bruteforce the password it came from anyways, so this provides a negligible security benefit."},{"owner":{"reputation":3598,"user_id":436524,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/f9668e754daecfa1260501a71ee9876a?s=128&d=identicon&r=PG","display_name":"Octavia Togami","link":"https://stackoverflow.com/users/436524/octavia-togami"},"reply_to_user":{"reputation":1109,"user_id":1294423,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/59e9d4f8bec370afd6e0bbb0906397c7?s=128&d=identicon&r=PG","display_name":"Gavin S. Yancey","link":"https://stackoverflow.com/users/1294423/gavin-s-yancey"},"edited":false,"score":8,"creation_date":1499817809,"post_id":8885343,"comment_id":77066710,"content_license":"CC BY-SA 3.0","body":"@g.rocket The hashcode for an array does not depend on the contents of the array, it is effectively random: <a href=\"https://tio.run/##TYxBDoIwFET3nmLCphCUgC7RI7hiaVxUQCxCS9oPxhDOXttIjLOYmfw/eS2f@E4NtWyrp7XDeOtEibLjxuDMhcS8gdN6N8TJxaREhd59w4K0kM3lCq4bE61jr7vSCIUkCJyQ5i6OyFJf4vh/51W8DdV9okZKBoejToZBgBiyfqF8cO3wM8vYFmzv7cCWKP8Bls3XF2s/\" rel=\"nofollow noreferrer\">Online Example</a>"},{"owner":{"reputation":7916,"user_id":912829,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/8155348e86202fd2f553332dde3b2fcf?s=128&d=identicon&r=PG&f=1","display_name":"ACV","link":"https://stackoverflow.com/users/912829/acv"},"edited":false,"score":1,"creation_date":1524695481,"post_id":8885343,"comment_id":87080496,"content_license":"CC BY-SA 3.0","body":"This is not the reason why <code>char[]</code> is recommended instead of <code>String</code>"},{"owner":{"reputation":469,"user_id":1386469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eea9f016b5ae9a2f2a190e8e01ec824c?s=128&d=identicon&r=PG","display_name":"Dawesi","link":"https://stackoverflow.com/users/1386469/dawesi"},"edited":false,"score":1,"creation_date":1533498381,"post_id":8885343,"comment_id":90356849,"content_license":"CC BY-SA 4.0","body":"Why is a password stored unencrypted in the first place? It is received in memory from a request (stored in memory as string??) then immediately should be hashed, compared and discarded, or if for another system should be obtained from an external vault already encrypted then decrypted on use using a rotated key?   Am I missing something here, trying to get my head around this?"},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"edited":false,"score":1,"creation_date":1546527256,"post_id":8885343,"comment_id":94885652,"content_license":"CC BY-SA 4.0","body":"The password might not be stored unencrypted - in fact, what&#39;s stored is a securely encrypted and hashed sequence of bytes generated from a password  that has been 1) nonced, 2) salted, and 3) lengthened. Let&#39;s call that byte sequence <b>C</b>. However, somewhere along the line, a plaintext might be handled to salt/nonce/lengthen then encrypt to compare with <b>C</b>. So the best approach is to always assume that passwordy-looking thingie we are about to hold is plaintext and store it as ephemerally as possible."},{"owner":{"reputation":8903,"user_id":334451,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/752bf1cd2ef2702724c89f661a5e78d7?s=128&d=identicon&r=PG","display_name":"Mikko Rantalainen","link":"https://stackoverflow.com/users/334451/mikko-rantalainen"},"edited":false,"score":0,"creation_date":1587454510,"post_id":8885343,"comment_id":108510135,"content_license":"CC BY-SA 4.0","body":"If your program ever logs stack traces with function arguments, any parameter may be leaked as text."}],"owner":{"reputation":49787,"user_id":277683,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/c15311acd88ded73e20238c71adf253f?s=128&d=identicon&r=PG","display_name":"Konrad Garus","link":"https://stackoverflow.com/users/277683/konrad-garus"},"comment_count":11,"is_accepted":false,"score":1260,"last_activity_date":1326996714,"last_edit_date":1326996714,"creation_date":1326742650,"answer_id":8885343,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>While other suggestions here seem valid, there is one other good reason. With plain <code>String</code> you have much higher chances of <strong>accidentally printing the password to logs</strong>, monitors or some other insecure place. <code>char[]</code> is less vulnerable.</p>\n\n<p>Consider this:</p>\n\n<pre><code>public static void main(String[] args) {\n    Object pw = \"Password\";\n    System.out.println(\"String: \" + pw);\n\n    pw = \"Password\".toCharArray();\n    System.out.println(\"Array: \" + pw);\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>String: Password\nArray: [C@5829428e\n</code></pre>\n"},{"comments":[{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":4,"creation_date":1327265120,"post_id":8889285,"comment_id":11227113,"content_license":"CC BY-SA 3.0","body":"this is exactly the flawed/bogus reference I talk about below Jon&#39;s answer, it&#39;s a well known source w/ a lot of criticism."},{"owner":{"reputation":3204,"user_id":961954,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/c4c5bbd954fee282f42f909f5323eb37?s=128&d=identicon&r=PG","display_name":"user961954","link":"https://stackoverflow.com/users/961954/user961954"},"edited":false,"score":40,"creation_date":1344684457,"post_id":8889285,"comment_id":15863197,"content_license":"CC BY-SA 3.0","body":"@bestass can you please also cite a reference?"},{"owner":{"reputation":10921,"user_id":2161954,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/eccdcef378f17549482325c2051c4048?s=128&d=identicon&r=PG","display_name":"SnakeDoc","link":"https://stackoverflow.com/users/2161954/snakedoc"},"edited":false,"score":11,"creation_date":1403830221,"post_id":8889285,"comment_id":37821142,"content_license":"CC BY-SA 3.0","body":"@bestass sorry, but <code>String</code> is pretty well understood and how it behaves in the JVM... there are good reasons to use <code>char[]</code> in place of <code>String</code> when dealing with passwords in a secure manner."},{"owner":{"reputation":469,"user_id":1386469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eea9f016b5ae9a2f2a190e8e01ec824c?s=128&d=identicon&r=PG","display_name":"Dawesi","link":"https://stackoverflow.com/users/1386469/dawesi"},"edited":false,"score":3,"creation_date":1533498624,"post_id":8889285,"comment_id":90356901,"content_license":"CC BY-SA 4.0","body":"once again though the password is passed as a string from the browser to the request as &#39;string&#39; not char? so no matter what you do it&#39;s a string, at which point it should be acted on and discarded, never stored in memory?"},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"reply_to_user":{"reputation":469,"user_id":1386469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eea9f016b5ae9a2f2a190e8e01ec824c?s=128&d=identicon&r=PG","display_name":"Dawesi","link":"https://stackoverflow.com/users/1386469/dawesi"},"edited":false,"score":3,"creation_date":1546543505,"post_id":8889285,"comment_id":94893485,"content_license":"CC BY-SA 4.0","body":"@Dawesi - <code>At which point</code> - that&#39;s application specific, but the general rule is to do so as soon as you get a hold of something that is supposed to be a password (plaintext or otherwise). You get it from the browser as part of an HTTP request, for instance. You cannot control the delivery, but you can control your own storage, so as soon as you get it, put it in a char[], do what you need to do with it, then set all to &#39;0&#39; and let the gc reclaim it."}],"owner":{"reputation":109295,"user_id":372643,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG","display_name":"Bruno","link":"https://stackoverflow.com/users/372643/bruno"},"comment_count":5,"is_accepted":false,"score":704,"last_activity_date":1326770457,"creation_date":1326770457,"answer_id":8889285,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>To quote an official document, the <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#PBEEx\">Java Cryptography Architecture guide</a> says this about <code>char[]</code> vs. <code>String</code> passwords (about password-based encryption, but this is more generally about passwords of course):</p>\n\n<blockquote>\n  <p>It would seem logical to collect and store the password in an object\n  of type <code>java.lang.String</code>. However, here's the caveat: <code>Object</code>s of\n  type <code>String</code> are immutable, i.e., there are no methods defined that\n  allow you to change (overwrite) or zero out the contents of a <code>String</code>\n  after usage. This feature makes <code>String</code> objects unsuitable for\n  storing security sensitive information such as user passwords. You\n  should always collect and store security sensitive information in a\n  <code>char</code> array instead.</p>\n</blockquote>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/seccodeguide-139067.html#2\">Guideline 2-2 of the Secure Coding Guidelines for the Java Programming Language, Version 4.0</a> also says something similar (although it is originally in the context of logging):</p>\n\n<blockquote>\n  <p><em>Guideline 2-2: Do not log highly sensitive information</em></p>\n  \n  <p>Some information, such as Social Security numbers (SSNs) and\n  passwords, is highly sensitive. This information should not be kept\n  for longer than necessary nor where it may be seen, even by\n  administrators. For instance, it should not be sent to log files and\n  its presence should not be detectable through searches. Some transient\n  data may be kept in mutable data structures, such as char arrays, and\n  cleared immediately after use. Clearing data structures has reduced\n  effectiveness on typical Java runtime systems as objects are moved in\n  memory transparently to the programmer.</p>\n  \n  <p>This guideline also has implications for implementation and use of\n  lower-level libraries that do not have semantic knowledge of the data\n  they are dealing with. As an example, a low-level string parsing\n  library may log the text it works on. An application may parse an SSN\n  with the library. This creates a situation where the SSNs are\n  available to administrators with access to the log files.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":109295,"user_id":372643,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG","display_name":"Bruno","link":"https://stackoverflow.com/users/372643/bruno"},"edited":false,"score":0,"creation_date":1327152715,"post_id":8932215,"comment_id":11209613,"content_license":"CC BY-SA 3.0","body":"One way around this is to use an implementation of <code>PrivateKey</code> that doesn&#39;t actually load its private content in memory: via a PKCS#11 hardware token for example. Perhaps a software implementation of PKCS#11 could take care of cleaning up the memory manually. Perhaps using something like the NSS store (which shares most of its implementation with the <code>PKCS11</code> store type in Java) is better. The <code>KeychainStore</code> (OSX keystore) loads the full content of the private key into its <code>PrivateKey</code> instances, but it should not need to. (Not sure what the <code>WINDOWS-MY</code> KeyStore does on Windows.)"},{"owner":{"reputation":36257,"user_id":827060,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1ecef11b3cc6abfda85798858745ef72?s=128&d=identicon&r=PG","display_name":"emboss","link":"https://stackoverflow.com/users/827060/emboss"},"reply_to_user":{"reputation":109295,"user_id":372643,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG","display_name":"Bruno","link":"https://stackoverflow.com/users/372643/bruno"},"edited":false,"score":0,"creation_date":1327155527,"post_id":8932215,"comment_id":11210033,"content_license":"CC BY-SA 3.0","body":"@Bruno Sure, hardware-based tokens do not suffer from this, but what about situations where you are more or less forced to use a software key? Not every deployment has the budget to afford an HSM. Software key stores will at some point have to load the key into memory, so IMO we should at least be given the option to clear the memory at will again."},{"owner":{"reputation":109295,"user_id":372643,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG","display_name":"Bruno","link":"https://stackoverflow.com/users/372643/bruno"},"edited":false,"score":0,"creation_date":1327156170,"post_id":8932215,"comment_id":11210142,"content_license":"CC BY-SA 3.0","body":"Absolutely, I was just wondering whether some software implementations equivalent to an HSM might behave better in terms of cleaning up the memory. For example, when using client-auth with Safari/OSX, the Safari process never actually sees the private key, the underlying SSL library provided by the OS talks directly to the security daemon which prompts the user for using the key from the keychain. While this is all done in software, a similar separation like this may help if signing is delegated to a different entity (even software based) that would unload or clear the memory better."},{"owner":{"reputation":36257,"user_id":827060,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1ecef11b3cc6abfda85798858745ef72?s=128&d=identicon&r=PG","display_name":"emboss","link":"https://stackoverflow.com/users/827060/emboss"},"reply_to_user":{"reputation":109295,"user_id":372643,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG","display_name":"Bruno","link":"https://stackoverflow.com/users/372643/bruno"},"edited":false,"score":0,"creation_date":1327157109,"post_id":8932215,"comment_id":11210304,"content_license":"CC BY-SA 3.0","body":"@Bruno: Interesting idea, an additional indirection layer that takes care of clearing the memory would indeed solve this transparently. Writing a PKCS#11 wrapper for the software key store could already do the trick?"}],"owner":{"reputation":36257,"user_id":827060,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1ecef11b3cc6abfda85798858745ef72?s=128&d=identicon&r=PG","display_name":"emboss","link":"https://stackoverflow.com/users/827060/emboss"},"comment_count":4,"is_accepted":false,"score":71,"last_activity_date":1327001987,"creation_date":1327001987,"answer_id":8932215,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>The answer has already been given, but I'd like to share an issue that I discovered lately with Java standard libraries. While they take great care now of replacing password strings with <code>char[]</code> everywhere (which of course is a good thing), other security-critical data seems to be overlooked when it comes to clearing it from memory.</p>\n\n<p>I'm thinking of e.g. the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/security/PrivateKey.html\" rel=\"noreferrer\">PrivateKey</a> class. Consider a scenario where you would load a private RSA key from a PKCS#12 file, using it to perform some operation. Now in this case, sniffing the password alone wouldn't help you much as long as physical access to the key file is properly restricted. As an attacker, you would be much better off if you obtained the key directly instead of the password. The desired information can be leaked manifold, core dumps, a debugger session or swap files are just some examples.</p>\n\n<p>And as it turns out, there is nothing that lets you clear the private information of a <code>PrivateKey</code> from memory, because there's no API that lets you wipe the bytes that form the corresponding information.</p>\n\n<p>This is a bad situation, as this <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.77.3297&amp;rep=rep1&amp;type=pdf\" rel=\"noreferrer\">paper</a> describes how this circumstance could be potentially exploited.</p>\n\n<p>The OpenSSL library for example overwrites critical memory sections before private keys are freed. Since Java is garbage-collected, we would need explicit methods to wipe and invalidate private information for Java keys, which are to be applied immediately after using the key. </p>\n"},{"comments":[{"owner":{"reputation":14489,"user_id":1793718,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/o5ujD.jpg?s=128&g=1","display_name":"Lucky","link":"https://stackoverflow.com/users/1793718/lucky"},"edited":false,"score":10,"creation_date":1478159835,"post_id":23538955,"comment_id":68043114,"content_license":"CC BY-SA 3.0","body":"This is redundant. This answer is a exact version of the answer written by  @SrujanKumarGulla <a href=\"http://stackoverflow.com/a/14060804/1793718\">stackoverflow.com/a/14060804/1793718</a>. Please don&#39;t copy paste or duplicate the same answer twice."},{"owner":{"reputation":506,"user_id":3350632,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/JB2LY.jpg?s=128&g=1","display_name":"Vaibhav_Sharma","link":"https://stackoverflow.com/users/3350632/vaibhav-sharma"},"edited":false,"score":0,"creation_date":1501240416,"post_id":23538955,"comment_id":77704642,"content_license":"CC BY-SA 3.0","body":"What is the difference between 1.) System.out.println(&quot;Character password: &quot; + charPassword); and 2.) System.out.println(charPassword);   Because it is giving the same &quot;unknown&quot; as output."},{"owner":{"reputation":12146,"user_id":2985643,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/eaacaf1426f7e6d02914fcf99dc0a33b?s=128&d=identicon&r=PG&f=1","display_name":"skomisa","link":"https://stackoverflow.com/users/2985643/skomisa"},"reply_to_user":{"reputation":14489,"user_id":1793718,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/o5ujD.jpg?s=128&g=1","display_name":"Lucky","link":"https://stackoverflow.com/users/1793718/lucky"},"edited":false,"score":3,"creation_date":1568778812,"post_id":23538955,"comment_id":102378122,"content_license":"CC BY-SA 4.0","body":"@Lucky Unfortunately the older answer you linked to was plagiarized from the same blog as this answer, and has now been deleted. See <a href=\"https://meta.stackoverflow.com/questions/389144/review-a-declined-flag-for-plagiarism-based-on-additional-information\" title=\"review a declined flag for plagiarism based on additional information\">meta.stackoverflow.com/questions/389144/&hellip;</a> . This answer has simply cut and pasted from that same blog and added nothing, so it should have simply been a comment linking to the original source."}],"owner":{"reputation":7571,"user_id":1835198,"user_type":"registered","accept_rate":58,"profile_image":"https://www.gravatar.com/avatar/b0dd576a5009818db16d42f684a51ba7?s=128&d=identicon&r=PG&f=1","display_name":"Human Being","link":"https://stackoverflow.com/users/1835198/human-being"},"comment_count":3,"is_accepted":false,"score":46,"last_activity_date":1542638054,"last_edit_date":1542638054,"creation_date":1399544266,"answer_id":23538955,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>These are all the reasons, one should choose a <strong>char[]</strong> array instead of <strong>String</strong> for a password.</p>\n\n<p><strong>1.</strong>  Since Strings are immutable in Java, if you store the password as plain text it will be available in memory until the Garbage collector clears it, and since String is used in the String pool for reusability there is a pretty high chance that it will remain in memory for a long duration, which poses a security threat. </p>\n\n<p>Since anyone who has access to the memory dump can find the password in clear text, that's another reason you should always use an encrypted password rather than plain text. Since Strings are immutable there is no way the contents of Strings can be changed because any change will produce a new String, while if you use a char[] you can still set all the elements as blank or zero. So storing a password in a character array clearly mitigates the security risk of stealing a password.</p>\n\n<p><strong>2.</strong>  Java itself recommends using the getPassword() method of JPasswordField which returns a char[], instead of the deprecated getText() method which returns passwords in clear text stating security reasons. It's good to follow advice from the Java team and adhere to standards rather than going against them.</p>\n\n<p><strong>3.</strong>  With String there is always a risk of printing plain text in a log file or console but if you use an Array you won't print contents of an array, but instead its memory location gets printed. Though not a real reason, it still makes sense.</p>\n\n<pre><code>String strPassword=\"Unknown\";\nchar[] charPassword= new char[]{'U','n','k','w','o','n'};\nSystem.out.println(\"String password: \" + strPassword);\nSystem.out.println(\"Character password: \" + charPassword);\n\nString password: Unknown\nCharacter password: [C@110b053\n</code></pre>\n\n<p>Referenced from <a href=\"http://javarevisited.blogspot.com/2012/03/why-character-array-is-better-than.html\" rel=\"noreferrer\">this blog</a>.\nI hope this helps.</p>\n"},{"comments":[{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489081527,"post_id":28123411,"comment_id":72526169,"content_license":"CC BY-SA 3.0","body":"Why is String-deduplication scary? It only applies when there are at least two strings having the same contents, so what danger would arise from letting these two already identical strings share the same array? Or lets ask the other way round: if there is no string-deduplication, what advantage arises from the fact that both strings have a distinct array (of the same contents)? In either case, there will be an array of that contents being alive at least as long as the longest living String of that contents is aliveâ¦"},{"owner":{"reputation":15888,"user_id":513342,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/392cd0766310cdd85a78f06b8a642b1b?s=128&d=identicon&r=PG","display_name":"Oleg Mikheev","link":"https://stackoverflow.com/users/513342/oleg-mikheev"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489084136,"post_id":28123411,"comment_id":72527638,"content_license":"CC BY-SA 3.0","body":"@Holger anything that&#39;s out of your control is a potential risk...  for instance if two users have the same password this wonderful feature will store both of them in single char[] making it evident that they are the same, not sure if that&#39;s a huge risk but still"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489084504,"post_id":28123411,"comment_id":72527865,"content_license":"CC BY-SA 3.0","body":"If you have access to the heap memory and both string instances, it doesnât matter whether the strings point to the same array or to two arrays of the same contents, each is easy to find out. Especially, as it is irrelevant anyway. If you are at this point, you grab both passwords, whether identical or not. The actual error lies in using plaintext passwords instead of salted hashes."},{"owner":{"reputation":15888,"user_id":513342,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/392cd0766310cdd85a78f06b8a642b1b?s=128&d=identicon&r=PG","display_name":"Oleg Mikheev","link":"https://stackoverflow.com/users/513342/oleg-mikheev"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489182043,"post_id":28123411,"comment_id":72575946,"content_license":"CC BY-SA 3.0","body":"@Holger to verify password it has to be in clear text in memory for some time, 10ms, even if it&#39;s just to create a salted hash out of it. Then, if it happens that there are two identical passwords kept in memory even for 10 ms, deduplication may come into play. If it really interns strings they are kept in memory for much longer time. System that doesn&#39;t restart for months will collect lots of these. Just theorizing."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489404641,"post_id":28123411,"comment_id":72640221,"content_license":"CC BY-SA 3.0","body":"It seems, you have a fundamental misunderstanding about String Deduplication. It doesnât âintern stringsâ, all it does, is letting strings with the same contents point to the same array, which actually <i>reduces</i> the number of array instances containing the plaintext password, as all but one array instance can be reclaimed and overwritten by other objects immediately. These strings are still collected like any other string. Maybe it helps, if you understand that the de-duplication is actually done by the garbage collector, for strings that have survived multiple GC cycles only."},{"owner":{"reputation":39429,"user_id":86967,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/624a9d99ab6293522102feab52c61f36?s=128&d=identicon&r=PG&f=1","display_name":"Brent Bradburn","link":"https://stackoverflow.com/users/86967/brent-bradburn"},"edited":false,"score":0,"creation_date":1568739515,"post_id":28123411,"comment_id":102367167,"content_license":"CC BY-SA 4.0","body":"&quot;are Spring Security guys incompetent&quot;: It&#39;s an important question in this context.  I previously wondered this myself, when looking into the differences between <code>BCrypt</code> and <code>BCryptPasswordEncoder</code>.  Even in the <a href=\"https://github.com/spring-projects/spring-security/commit/8565116f203b9c6186b044bc655c9d5d5b2e6450\" rel=\"nofollow noreferrer\">simultaneous initial commit</a> they took an inconsistent approach: taking <code>String</code> for <code>Bcrypt</code> and taking <a href=\"https://stackoverflow.com/q/13234584/86967\"><code>CharSequence</code></a> for <code>BCryptPasswordEncoder</code> (which calls <code>Bcrypt</code>)."}],"owner":{"reputation":15888,"user_id":513342,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/392cd0766310cdd85a78f06b8a642b1b?s=128&d=identicon&r=PG","display_name":"Oleg Mikheev","link":"https://stackoverflow.com/users/513342/oleg-mikheev"},"comment_count":6,"is_accepted":false,"score":38,"last_activity_date":1579288123,"last_edit_date":1579288123,"creation_date":1422085420,"answer_id":28123411,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>There is nothing that char array gives you vs String unless you clean it up manually after use, and I haven't seen anyone actually doing that. So to me the preference of char[] vs String is a bit exaggerated.</p>\n\n<p>Take a look at the <sub>widely used</sub> Spring Security library <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-web/3.0.1.RELEASE/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java#73\" rel=\"nofollow noreferrer\">here</a> and ask yourself - are Spring Security guys incompetent or char[] passwords just don't make much sense. When some nasty hacker grabs memory dumps of your RAM be sure s/he'll get all the passwords even if you use sophisticated ways to hide them.</p>\n\n<p>However, Java changes all the time, and some scary features like <a href=\"https://stackoverflow.com/questions/27949213/string-deduplication-feature-of-java-8\">String Deduplication feature of Java 8</a> might intern String objects without your knowledge. But that's a different conversation.</p>\n"},{"comments":[{"owner":{"reputation":2641,"user_id":1336558,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/LKezQ.jpg?s=128&g=1","display_name":"Mohit Kanwar","link":"https://stackoverflow.com/users/1336558/mohit-kanwar"},"edited":false,"score":0,"creation_date":1435729316,"post_id":29503590,"comment_id":50316052,"content_license":"CC BY-SA 3.0","body":"But that could be there in char[] comparison as well, somewhere we would be doing the same in password validation too. so how is char[] better than string?"},{"owner":{"reputation":679,"user_id":3264657,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/20c5379214923e99c21443dd4d3351f1?s=128&d=identicon&r=PG&f=1","display_name":"Graph Theory","link":"https://stackoverflow.com/users/3264657/graph-theory"},"reply_to_user":{"reputation":2641,"user_id":1336558,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/LKezQ.jpg?s=128&g=1","display_name":"Mohit Kanwar","link":"https://stackoverflow.com/users/1336558/mohit-kanwar"},"edited":false,"score":3,"creation_date":1435870989,"post_id":29503590,"comment_id":50393774,"content_license":"CC BY-SA 3.0","body":"You&#39;re absolutely correct, the mistake can be made either way. Knowing about the problem is the most important thing here, considering there&#39;s no explicit password-comparison method in Java for either String-based or char[]-based passwords. I&#39;d say the temptation to use compare() for Strings is a good reason to go with char[]. That way you at least have control over how the comparison is done (without extending String, which is a pain imo)."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489054964,"post_id":29503590,"comment_id":72507722,"content_license":"CC BY-SA 3.0","body":"Besides comparing plaintext passwords isnât the right thing anyway, the temptation to use <code>Arrays.equals</code> for <code>char[]</code> is as high as for <code>String.equals</code>. If anyone cared, there was a dedicated key class encapsulating the actual password and taking care of the issuesâoh wait, the real security packages <i>have</i> dedicated key classes, this Q&amp;A is only about a <i>habit</i> outside of them, say, e.g. <code>JPasswordField</code>, to use <code>char[]</code> instead of <code>String</code> (where the actual algorithms use <code>byte[]</code> anyway)."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489055080,"post_id":29503590,"comment_id":72507818,"content_license":"CC BY-SA 3.0","body":"Security relevant software should do something like <code>sleep(secureRandom.nextInt())</code> before rejecting a login attempt anyway, thatâs not only removing the possibility of timing attacks, it also makes counteracts brute force attempts."}],"owner":{"reputation":679,"user_id":3264657,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/20c5379214923e99c21443dd4d3351f1?s=128&d=identicon&r=PG&f=1","display_name":"Graph Theory","link":"https://stackoverflow.com/users/3264657/graph-theory"},"comment_count":4,"is_accepted":false,"score":43,"last_activity_date":1469567648,"last_edit_date":1495542389,"creation_date":1428451499,"answer_id":29503590,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p><strong>Edit:</strong> Coming back to this answer after a year of security research, I realize it makes the rather unfortunate implication that you would ever actually compare plaintext passwords. Please don't. <a href=\"https://stackoverflow.com/questions/2860943/how-can-i-hash-a-password-in-java\">Use a secure one-way hash with a salt and a reasonable number of iterations</a>. Consider using a library: this stuff is hard to get right!</p>\n\n<p><strong>Original answer:</strong> What about the fact that String.equals() uses <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.equals%28java.lang.Object%29\" rel=\"noreferrer\">short-circuit evaluation</a>, and is therefore vulnerable to a timing attack? It may be unlikely, but you could <em>theoretically</em> time the password comparison in order to determine the correct sequence of characters.</p>\n\n<pre><code>public boolean equals(Object anObject) {\n    if (this == anObject) {\n        return true;\n    }\n    if (anObject instanceof String) {\n        String anotherString = (String)anObject;\n        int n = value.length;\n        // Quits here if Strings are different lengths.\n        if (n == anotherString.value.length) {\n            char v1[] = value;\n            char v2[] = anotherString.value;\n            int i = 0;\n            // Quits here at first different character.\n            while (n-- != 0) {\n                if (v1[i] != v2[i])\n                    return false;\n                i++;\n            }\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Some more resources on timing attacks:</p>\n\n<ul>\n<li><a href=\"http://codahale.com/a-lesson-in-timing-attacks/\" rel=\"noreferrer\">A Lesson In Timing Attacks</a></li>\n<li><a href=\"https://security.stackexchange.com/a/83671\">A discussion about timing attacks</a> over on Information Security Stack Exchange</li>\n<li>And of course, the <a href=\"http://en.wikipedia.org/wiki/Timing_attack\" rel=\"noreferrer\">Timing Attack Wikipedia page</a></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":111064,"user_id":2410359,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/pIl9T.png?s=128&g=1","display_name":"chux - Reinstate Monica","link":"https://stackoverflow.com/users/2410359/chux-reinstate-monica"},"edited":false,"score":2,"creation_date":1440703315,"post_id":31288609,"comment_id":52395539,"content_license":"CC BY-SA 3.0","body":"Better to do also something to prevent printing the password&#39;s length which we get from <code>&#39;***********&#39;</code>."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":111064,"user_id":2410359,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/pIl9T.png?s=128&g=1","display_name":"chux - Reinstate Monica","link":"https://stackoverflow.com/users/2410359/chux-reinstate-monica"},"edited":false,"score":0,"creation_date":1440706596,"post_id":31288609,"comment_id":52397231,"content_license":"CC BY-SA 3.0","body":"@chux you can use a zero width character, though this might be more confusing than useful.  Its not possible to change the length of a char array without using Unsafe. ;)"},{"owner":{"reputation":1821,"user_id":660887,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/18b3a6e07ac8dc07b978568f6ad6a010?s=128&d=identicon&r=PG","display_name":"jamp","link":"https://stackoverflow.com/users/660887/jamp"},"edited":false,"score":6,"creation_date":1454942929,"post_id":31288609,"comment_id":58256330,"content_license":"CC BY-SA 3.0","body":"Because of Java 8&#39;s String Deduplication, I think doing something like that can be pretty destructive... you may end up clearing other strings in your program that by chance had the same value of the password String. Unlikely, but possible..."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":1821,"user_id":660887,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/18b3a6e07ac8dc07b978568f6ad6a010?s=128&d=identicon&r=PG","display_name":"jamp","link":"https://stackoverflow.com/users/660887/jamp"},"edited":false,"score":0,"creation_date":1454945607,"post_id":31288609,"comment_id":58258215,"content_license":"CC BY-SA 3.0","body":"@jamp Java 9 is expected to have this feature as well as compact string (i.e. using a byte[]]). I don&#39;t believe this happens in Java 8."},{"owner":{"reputation":1821,"user_id":660887,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/18b3a6e07ac8dc07b978568f6ad6a010?s=128&d=identicon&r=PG","display_name":"jamp","link":"https://stackoverflow.com/users/660887/jamp"},"edited":false,"score":1,"creation_date":1454948453,"post_id":31288609,"comment_id":58260148,"content_license":"CC BY-SA 3.0","body":"@PeterLawrey It must be enabled with a JVM argument, but it is there. Can read about it here: <a href=\"https://blog.codecentric.de/en/2014/08/string-deduplication-new-feature-java-8-update-20-2/\" rel=\"nofollow noreferrer\">blog.codecentric.de/en/2014/08/&hellip;</a>"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":1,"creation_date":1578327326,"post_id":31288609,"comment_id":105394048,"content_license":"CC BY-SA 4.0","body":"Thereâs a high chance that the password still is in <code>Scanner</code>âs internal buffer and, since you didnât use <code>System.console().readPassword()</code>, in readable form in the console window. But for most practical use cases, the duration of <code>usePassword</code>âs execution is the actual problem. E.g., when making a connection to another machine, it takes a significant time and tells an attacker that it is the right time to search for the password in the heap. The only solution is to prevent attackers from reading the heap memoryâ¦"}],"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"comment_count":6,"is_accepted":false,"score":55,"last_activity_date":1436348043,"last_edit_date":1436348043,"creation_date":1436347615,"answer_id":31288609,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>As Jon Skeet states, there is no way except by using reflection. </p>\n\n<p>However, if reflection is an option for you, you can do this.</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(\"please enter a password\");\n    // don't actually do this, this is an example only.\n    Scanner in = new Scanner(System.in);\n    String password = in.nextLine();\n    usePassword(password);\n\n    clearString(password);\n\n    System.out.println(\"password: '\" + password + \"'\");\n}\n\nprivate static void usePassword(String password) {\n\n}\n\nprivate static void clearString(String password) {\n    try {\n        Field value = String.class.getDeclaredField(\"value\");\n        value.setAccessible(true);\n        char[] chars = (char[]) value.get(password);\n        Arrays.fill(chars, '*');\n    } catch (Exception e) {\n        throw new AssertionError(e);\n    }\n}\n</code></pre>\n\n<p>when run</p>\n\n<pre><code>please enter a password\nhello world\npassword: '***********'\n</code></pre>\n\n<p>Note: if the String's char[] has been copied as a part of a GC cycle, there is a chance the previous copy is somewhere in memory.  </p>\n\n<p>This old copy wouldn't appear in a heap dump, but if you have direct access to the raw memory of the process you could see it.  In general you should avoid anyone having such access.</p>\n"},{"comments":[{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":0,"creation_date":1454685330,"post_id":31674073,"comment_id":58169606,"content_license":"CC BY-SA 3.0","body":"They&#39;ll only be GC&#39;d if the JVM in question is &gt; 1.6.  Prior to 1.7, all strings were stored in permgen."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":0,"creation_date":1489055295,"post_id":31674073,"comment_id":72508001,"content_license":"CC BY-SA 3.0","body":"@avgvstvs:  âall strings were stored in permgenâ is just dead wrong. Only interned strings were stored there and if they werenât originating from string literals referenced by code, they were still garbage collected. Just think about it. If strings were generally never GCed in JVMs prior to 1.7, how could any Java application survive more than a few minutes?"},{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1489077396,"post_id":31674073,"comment_id":72523406,"content_license":"CC BY-SA 3.0","body":"@Holger This is false.  Interned <code>strings</code> AND the <code>String</code> pool (pool of previously used strings) were BOTH stored in Permgen prior to 1.7.  Also, See section 5.1:  <a href=\"https://docs.oracle.com/javase/specs/jvms/se6/html/ConstantPool.doc.html#67960\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se6/html/&hellip;</a>  The JVM always checked <code>Strings</code> to see if they were the same reference value, and would call <code>String.intern()</code> FOR YOU.  The result was that every time the JVM detected identical Strings in the <code>constant_pool</code> or heap it would move them into permgen.  And I worked on several applications with &quot;creeping permgen&quot; until 1.7.  It was a real problem."},{"owner":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":0,"creation_date":1489077591,"post_id":31674073,"comment_id":72523554,"content_license":"CC BY-SA 3.0","body":"So to recap:  Until 1.7, Strings started in the heap, when they were used they were put into the <code>constant_pool</code> which was located IN permgen, and then if a string was used more than once, it would be interned."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5475,"user_id":557153,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/h2fWz.png?s=128&g=1","display_name":"avgvstvs","link":"https://stackoverflow.com/users/557153/avgvstvs"},"edited":false,"score":0,"creation_date":1489080877,"post_id":31674073,"comment_id":72525790,"content_license":"CC BY-SA 3.0","body":"@avgvstvs: There is no âpool of previously used stringsâ. You are throwing entirely different things together. There is one runtime string pool containing string literals and explicitly interned string, but no other. And each class has its constant pool containing <i>compile-time</i> constants. These strings are automatically added to the runtime pool, but <i>only these</i>, not every string."}],"owner":{"reputation":21406,"user_id":102040,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG","display_name":"Geek","link":"https://stackoverflow.com/users/102040/geek"},"comment_count":5,"is_accepted":false,"score":32,"last_activity_date":1438080400,"creation_date":1438080400,"answer_id":31674073,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>Strings are immutable and cannot be altered once they have been created. Creating a password as a string will leave stray references to the password on the heap or on the String pool. Now if someone takes a heap dump of the Java process and carefully scans through he might be able to guess the passwords. Of course these non used strings will be garbage collected but that depends on when the GC kicks in.</p>\n\n<p>On the other side char[] are mutable as soon as the authentication is done you can overwrite them with any character like all M's or backslashes. Now even if someone takes a heap dump he might not be able to get the passwords which are not currently in use. This gives you more control in the sense like clearing the Object content yourself vs waiting for the GC to do it.</p>\n"},{"comments":[{"owner":{"reputation":15029,"user_id":1475228,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/TgQ5O.png?s=128&g=1","display_name":"Pritam Banerjee","link":"https://stackoverflow.com/users/1475228/pritam-banerjee"},"reply_to_user":{"reputation":2559,"user_id":88289,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/2430f108035a5de4a18595bac2034daf?s=128&d=identicon&r=PG","display_name":"pmcilreavy","link":"https://stackoverflow.com/users/88289/pmcilreavy"},"edited":false,"score":0,"creation_date":1505109761,"post_id":41067215,"comment_id":79259660,"content_license":"CC BY-SA 3.0","body":"@fallenidol Not at all. Read carefully and you will find the differences."}],"owner":{"reputation":15029,"user_id":1475228,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/TgQ5O.png?s=128&g=1","display_name":"Pritam Banerjee","link":"https://stackoverflow.com/users/1475228/pritam-banerjee"},"comment_count":1,"is_accepted":false,"score":22,"last_activity_date":1515195612,"last_edit_date":1515195612,"creation_date":1481310174,"answer_id":41067215,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>The short and straightforward answer would be because <code>char[]</code> is mutable while <code>String</code> objects are not.</p>\n\n<p><code>Strings</code> in Java are immutable objects. That is why they can't be modified once created, and therefore the only way for their contents to be removed from memory is to have them garbage collected. It will be only then when the memory freed by the object can be overwritten, and the data will be gone.</p>\n\n<p>Now garbage collection in Java doesn't happen at any guaranteed interval. The <code>String</code> can thus persist in memory for a long time, and if a process crashes during this time, the contents of the string may end up in a memory dump or some log. </p>\n\n<p>With a <em>character array</em>, you can read the password, finish working with it as soon as you can, and then immediately change the contents.</p>\n"},{"owner":{"reputation":229,"user_id":8161256,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7f089a17f988bf55a9ca0e3fcb5fcc7e?s=128&d=identicon&r=PG&f=1","display_name":"Saathvik","link":"https://stackoverflow.com/users/8161256/saathvik"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1501223586,"creation_date":1501223586,"answer_id":45366401,"question_id":8881291,"content_license":"CC BY-SA 3.0","body":"<p>String in java is immutable. So whenever a string is created, it will remain in the memory until it is garbage collected. So anyone who has access to the memory can read the value of the string. <br/>\nIf the value of the string is modified then it will end up creating a new string. So both the original value and the modified value stay in the memory until it is garbage collected. <br/> <br/>\nWith the character array, the contents of the array can be modified or erased once the purpose of the password is served. The original contents of the array will not be found in memory after it is modified and even before the garbage collection kicks in.<br/><br/>\nBecause of the security concern it is better to store password as a character array.</p>\n"},{"comments":[{"owner":{"reputation":721,"user_id":4740914,"user_type":"registered","profile_image":"https://i.stack.imgur.com/hnmAL.jpg?s=128&g=1","display_name":"Yugerten","link":"https://stackoverflow.com/users/4740914/yugerten"},"edited":false,"score":2,"creation_date":1543791397,"post_id":50032305,"comment_id":94034273,"content_license":"CC BY-SA 4.0","body":"ch = null; you can&#39;t do this"},{"owner":{"reputation":1056,"user_id":2631925,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/w35kw.png?s=128&g=1","display_name":"Tvde1","link":"https://stackoverflow.com/users/2631925/tvde1"},"edited":false,"score":0,"creation_date":1575889787,"post_id":50032305,"comment_id":104705118,"content_license":"CC BY-SA 4.0","body":"But doesn&#39;t <code>request.getPassword()</code> already create the string and add it to the pool?"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":2,"creation_date":1578327937,"post_id":50032305,"comment_id":105394392,"content_license":"CC BY-SA 4.0","body":"<code>ch = &#39;0&#39;</code> changes the local variable <code>ch</code>; it has no effect on the array. And your example is pointless anyway, you start with a string instance you call <code>toCharArray()</code> on, creating a new array and even when you overwrite the new array correctly, it doesnât change the string instance, so it has no advantage over just using the string instance."},{"owner":{"reputation":7916,"user_id":912829,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/8155348e86202fd2f553332dde3b2fcf?s=128&d=identicon&r=PG&f=1","display_name":"ACV","link":"https://stackoverflow.com/users/912829/acv"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1578481249,"post_id":50032305,"comment_id":105449865,"content_license":"CC BY-SA 4.0","body":"@Holger thanks. Corrected the char array cleanup code."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":3,"creation_date":1578481580,"post_id":50032305,"comment_id":105450034,"content_license":"CC BY-SA 4.0","body":"You can simply use <code>Arrays.fill(pass, &#39;0&#39;);</code>"}],"owner":{"reputation":7916,"user_id":912829,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/8155348e86202fd2f553332dde3b2fcf?s=128&d=identicon&r=PG&f=1","display_name":"ACV","link":"https://stackoverflow.com/users/912829/acv"},"comment_count":5,"is_accepted":false,"score":25,"last_activity_date":1578497124,"last_edit_date":1578497124,"creation_date":1524695995,"answer_id":50032305,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>String is immutable and it goes to the string pool. Once written, it cannot be overwritten.</p>\n\n<p><code>char[]</code> is an array which you should overwrite once you used the password and this is how it should be done:</p>\n\n<pre><code>char[] passw = request.getPassword().toCharArray()\nif (comparePasswords(dbPassword, passw) {\n allowUser = true;\n cleanPassword(passw);\n cleanPassword(dbPassword);\n passw=null;\n}\n\nprivate static void cleanPassword (char[] pass) {\n\nArrays.fill(pass, '0');\n}\n</code></pre>\n\n<p>One scenario where the attacker could use it is a crashdump - when the JVM crashes and generates a memory dump - you will be able to see the password.</p>\n\n<p>That is not necessarily a malicious external attacker. This could be a support user that has access to the server for monitoring purposes. He could peek into a crashdump and find the passwords.</p>\n"},{"owner":{"reputation":115,"user_id":10017725,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fd529dcc96a6891e39a317fdf39e26c1?s=128&d=identicon&r=PG&f=1","display_name":"Neeraj","link":"https://stackoverflow.com/users/10017725/neeraj"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1557401012,"last_edit_date":1557401012,"creation_date":1543818706,"answer_id":53588592,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>It is debatable as to whether you should use String or use Char[] for this purpose because both have their advantages and disadvantages. It depends on what the user needs.</p>\n\n<p>Since Strings in Java are immutable, whenever some tries to manipulate your string it creates a new Object and the existing String remains unaffected. This could be seen as an advantage for storing a password as a String, but the object remains in memory even after use. So if anyone somehow got the memory location of the object, that person can easily trace your password stored at that location.</p>\n\n<p>Char[] is mutable, but it has the advantage that after its usage the programmer can explicitly clean the array or override values. So when it's done being used it is cleaned and no one could ever know about the information you had stored.</p>\n\n<p>Based on the above circumstances, one can get an idea whether to go with String or to go with Char[] for their requirements.</p>\n"},{"owner":{"reputation":1029,"user_id":12237837,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5ZSpJ.png?s=128&g=1","display_name":"Aditya Rewari","link":"https://stackoverflow.com/users/12237837/aditya-rewari"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1587731037,"creation_date":1587731037,"answer_id":61408307,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>Case String:</p>\n\n<pre><code>    String password = \"ill stay in StringPool after Death !!!\";\n    // some long code goes\n    // ...Now I want to remove traces of password\n    password = null;\n    password = \"\";\n    // above attempts wil change value of password\n    // but the actual password can be traced from String pool through memory dump, if not garbage collected\n</code></pre>\n\n<p>Case CHAR ARRAY:</p>\n\n<pre><code>    char[] passArray = {'p','a','s','s','w','o','r','d'};\n    // some long code goes\n    // ...Now I want to remove traces of password\n    for (int i=0; i&lt;passArray.length;i++){\n        passArray[i] = 'x';\n    }\n    // Now you ACTUALLY DESTROYED traces of password form memory\n</code></pre>\n"},{"owner":{"reputation":89,"user_id":2626085,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0714ed44eb16f261951c6b66fafaf24?s=128&d=identicon&r=PG","display_name":"Dibsyhex","link":"https://stackoverflow.com/users/2626085/dibsyhex"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1615211495,"creation_date":1615211495,"answer_id":66531085,"question_id":8881291,"content_license":"CC BY-SA 4.0","body":"<p>Lot of great answers above. There is another point which I am assuming(please correct me if I am wrong ). By default Java uses UTF-16 for storing strings. Using character arrays char[]array facilitates utilization of unicode, regional characters,etc. This technique allow all character set to be respected equally for storing the passwords and henceforth will not initiate certain crypto issues due to character set confusion. Finally using the char array we can convert the password array to our desired character set string.</p>\n"}],"owner":{"reputation":36295,"user_id":953140,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/daa7534f8797b6392e9e2a3496663196?s=128&d=identicon&r=PG","display_name":"Ahamed","link":"https://stackoverflow.com/users/953140/ahamed"},"comment_count":0,"is_answered":true,"view_count":425911,"protected_date":1345899092,"accepted_answer_id":8881376,"answer_count":18,"score":3550,"last_activity_date":1615211495,"creation_date":1326723642,"last_edit_date":1484308089,"question_id":8881291,"link":"https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords","title":"Why is char[] preferred over String for passwords?","body":"<p>In Swing, the password field has a <code>getPassword()</code> (returns <code>char[]</code>) method instead of the usual <code>getText()</code> (returns <code>String</code>) method. Similarly, I have come across a suggestion not to use <code>String</code> to handle passwords.</p>\n\n<p>Why does <code>String</code> pose a threat to security when it comes to passwords?\nIt feels inconvenient to use <code>char[]</code>.</p>\n"},{"tags":["java","dictionary","collections","iteration"],"comments":[{"owner":{"reputation":3402,"user_id":1503859,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/4bcbf19e148dc37a98be5ea8311c4770?s=128&d=identicon&r=PG&f=1","display_name":"Nitin Mahesh","link":"https://stackoverflow.com/users/1503859/nitin-mahesh"},"edited":false,"score":41,"creation_date":1437849109,"post_id":46898,"comment_id":51206896,"content_license":"CC BY-SA 3.0","body":"In Java 8 using Lambda Expression: <a href=\"http://stackoverflow.com/a/25616206/1503859\">stackoverflow.com/a/25616206/1503859</a>"},{"owner":{"reputation":18327,"user_id":1216775,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/gX53v.jpg?s=128&g=1","display_name":"akhil_mittal","link":"https://stackoverflow.com/users/1216775/akhil-mittal"},"edited":false,"score":5,"creation_date":1539175528,"post_id":46898,"comment_id":92405732,"content_license":"CC BY-SA 4.0","body":"Java 8: <a href=\"https://stackoverflow.com/questions/46898/how-to-efficiently-iterate-over-each-entry-in-a-java-map/32343110#32343110\" title=\"how to efficiently iterate over each entry in a java map\">stackoverflow.com/questions/46898/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"reputation":19551,"user_id":157705,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/72d4492ee192ad44198fdbb08d87e4e1?s=128&d=identicon&r=PG","display_name":"jai","link":"https://stackoverflow.com/users/157705/jai"},"edited":false,"score":45,"creation_date":1256044805,"post_id":46905,"comment_id":1458460,"content_license":"CC BY-SA 2.5","body":"Prefer for-loop than while.. for(Iterator entries = myMap.entrySet().iterator(); entries.hasNext(); ) {...} With this syntax the &#39;entries&#39; scope is reduced to the for loop only."},{"owner":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"reply_to_user":{"reputation":2049,"user_id":461937,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/0234bce9b7fd9c20202d698b02cc12ac?s=128&d=identicon&r=PG","display_name":"jpredham","link":"https://stackoverflow.com/users/461937/jpredham"},"edited":false,"score":8,"creation_date":1326210149,"post_id":46905,"comment_id":10987629,"content_license":"CC BY-SA 3.0","body":"@jpredham You are right that using the <code>for</code> construct as <code>for (Entry e : myMap.entrySet)</code> will not allow you to modify the collection, but the example as @HanuAthena mentioned it should work, since it gives you the <code>Iterator</code> in scope.  (Unless I&#39;m missing something...)"},{"owner":{"reputation":5211,"user_id":1431728,"user_type":"registered","accept_rate":49,"profile_image":"https://www.gravatar.com/avatar/ef157021535e6330f7100061a4056365?s=128&d=identicon&r=PG","display_name":"JohnK","link":"https://stackoverflow.com/users/1431728/johnk"},"edited":false,"score":1,"creation_date":1420848417,"post_id":46905,"comment_id":44145048,"content_license":"CC BY-SA 3.0","body":"IntelliJ is giving me errors on <code>Entry thisEntry = (Entry) entries.next();</code>: doesn&#39;t recognize <code>Entry</code>. Is that pseudocode for something else?"},{"owner":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"reply_to_user":{"reputation":5211,"user_id":1431728,"user_type":"registered","accept_rate":49,"profile_image":"https://www.gravatar.com/avatar/ef157021535e6330f7100061a4056365?s=128&d=identicon&r=PG","display_name":"JohnK","link":"https://stackoverflow.com/users/1431728/johnk"},"edited":false,"score":1,"creation_date":1421202945,"post_id":46905,"comment_id":44267353,"content_license":"CC BY-SA 3.0","body":"@JohnK try importing <code>java.util.Map.Entry</code>."},{"owner":{"user_type":"does_not_exist","display_name":"user5778069"},"edited":false,"score":1,"creation_date":1484986159,"post_id":46905,"comment_id":70745090,"content_license":"CC BY-SA 3.0","body":"This solution will not work if you have a integer key and String key."}],"owner":{"reputation":32465,"user_id":4257,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/e326ede439e929b12e36d8508de54040?s=128&d=identicon&r=PG","display_name":"pkaeding","link":"https://stackoverflow.com/users/4257/pkaeding"},"comment_count":5,"is_accepted":false,"score":251,"last_activity_date":1517956349,"last_edit_date":1517956349,"creation_date":1220649319,"answer_id":46905,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Yes, the order depends on the specific Map implementation.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/46898/how-to-efficiently-iterate-over-each-entry-in-a-map/46908#46908\">@ScArcher2 has the more elegant Java 1.5 syntax</a>. In 1.4, I would do something like this:</p>\n\n<pre><code>Iterator entries = myMap.entrySet().iterator();\nwhile (entries.hasNext()) {\n  Entry thisEntry = (Entry) entries.next();\n  Object key = thisEntry.getKey();\n  Object value = thisEntry.getValue();\n  // ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":77429,"user_id":1310,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/9cb44812fc259d55c656dd8038ea5af3?s=128&d=identicon&r=PG","display_name":"ScArcher2","link":"https://stackoverflow.com/users/1310/scarcher2"},"edited":false,"score":94,"creation_date":1269264604,"post_id":46908,"comment_id":2485991,"content_license":"CC BY-SA 2.5","body":"If you do that, then it won&#39;t work as Entry is a nested Class in Map. <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Map.html\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/api/java/util/Map.html</a>"},{"owner":{"reputation":19605,"user_id":75863,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/36e4f1786bbe6ec3169a147bf54f91c1?s=128&d=identicon&r=PG","display_name":"jjujuma","link":"https://stackoverflow.com/users/75863/jjujuma"},"reply_to_user":{"reputation":77429,"user_id":1310,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/9cb44812fc259d55c656dd8038ea5af3?s=128&d=identicon&r=PG","display_name":"ScArcher2","link":"https://stackoverflow.com/users/1310/scarcher2"},"edited":false,"score":275,"creation_date":1272623659,"post_id":46908,"comment_id":2772937,"content_license":"CC BY-SA 2.5","body":"you can write the import as &quot;import java.util.Map.Entry;&quot; and it will work."},{"owner":{"reputation":294197,"user_id":829571,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/zflGZ.png?s=128&g=1","display_name":"assylias","link":"https://stackoverflow.com/users/829571/assylias"},"reply_to_user":{"reputation":6297,"user_id":1075247,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/6de7362951ec5bf3d40fa02de7175552?s=128&d=identicon&r=PG","display_name":"Pureferret","link":"https://stackoverflow.com/users/1075247/pureferret"},"edited":false,"score":56,"creation_date":1349692454,"post_id":46908,"comment_id":17274668,"content_license":"CC BY-SA 3.0","body":"@Pureferret The only reason you might want to use an iterator is if you need to call its <code>remove</code> method. If that is the case, <a href=\"http://stackoverflow.com/a/1295383/829571\">this other answer</a> shows you how to do it. Otherwise, the enhanced loop as shown in the answer above is the way to go."},{"owner":{"reputation":2202,"user_id":1048186,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/taKn8.png?s=128&g=1","display_name":"Josiah Yoder","link":"https://stackoverflow.com/users/1048186/josiah-yoder"},"edited":false,"score":107,"creation_date":1417725087,"post_id":46908,"comment_id":43069880,"content_license":"CC BY-SA 3.0","body":"I believe the form Map.Entry is clearer than importing the inner class into the current namespace."},{"owner":{"reputation":2354,"user_id":3320962,"user_type":"registered","accept_rate":71,"profile_image":"https://graph.facebook.com/1412668009/picture?type=large","display_name":"Saras Arya","link":"https://stackoverflow.com/users/3320962/saras-arya"},"edited":false,"score":2,"creation_date":1428319151,"post_id":46908,"comment_id":47101996,"content_license":"CC BY-SA 3.0","body":"where is map from  map.entrySet() declared ?"},{"owner":{"reputation":8240,"user_id":1404049,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/vkpuK.png?s=128&g=1","display_name":"Fallenreaper","link":"https://stackoverflow.com/users/1404049/fallenreaper"},"edited":false,"score":1,"creation_date":1434978651,"post_id":46908,"comment_id":49991996,"content_license":"CC BY-SA 3.0","body":"quick Question: do the Generic values <code>&lt;String, String&gt;</code> need to match that of the Map? For Example, mine is <code>&lt;String, Foo&gt;</code>."},{"owner":{"reputation":3081,"user_id":4561047,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG","display_name":"intcreator","link":"https://stackoverflow.com/users/4561047/intcreator"},"edited":false,"score":1,"creation_date":1443472087,"post_id":46908,"comment_id":53498307,"content_license":"CC BY-SA 3.0","body":"This is assuming your <code>Map</code> is named <code>map</code> of course.  Beginners might not catch on."},{"owner":{"reputation":5628,"user_id":712526,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG","display_name":"jpaugh","link":"https://stackoverflow.com/users/712526/jpaugh"},"reply_to_user":{"reputation":3081,"user_id":4561047,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG","display_name":"intcreator","link":"https://stackoverflow.com/users/4561047/intcreator"},"edited":false,"score":2,"creation_date":1453840724,"post_id":46908,"comment_id":57773425,"content_license":"CC BY-SA 3.0","body":"@brandaemon Agreed. Even for intermediates, it&#39;s nice to see precisely which type implements the <code>entrySet</code> method."},{"owner":{"reputation":1439,"user_id":3752374,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/eed2837aa54f87a4d8b9ccf92b427d18?s=128&d=identicon&r=PG&f=1","display_name":"dguay","link":"https://stackoverflow.com/users/3752374/dguay"},"edited":false,"score":33,"creation_date":1476306238,"post_id":46908,"comment_id":67294669,"content_license":"CC BY-SA 3.0","body":"Note that you can use <code>map.values()</code> or <code>map.keySet()</code> if you want to loop through values or keys only."},{"owner":{"reputation":522,"user_id":2532888,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/AC65b.jpg?s=128&g=1","display_name":"Marcus MacWilliam","link":"https://stackoverflow.com/users/2532888/marcus-macwilliam"},"edited":false,"score":3,"creation_date":1518534927,"post_id":46908,"comment_id":84540926,"content_license":"CC BY-SA 3.0","body":"That is not efficient. The Map holds the data in an entry set. For speed always iterate over the entry set."},{"owner":{"reputation":3257,"user_id":1324802,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/41K0O.jpg?s=128&g=1","display_name":"Androidcoder","link":"https://stackoverflow.com/users/1324802/androidcoder"},"edited":false,"score":2,"creation_date":1532537071,"post_id":46908,"comment_id":90016634,"content_license":"CC BY-SA 4.0","body":"I get and incompatible types error for &#39;Map.Entry entry&#39; and &#39;Map.Entry&lt;Integer,HashMap&gt; entry: &quot;required Object, found Entry&quot;. I&#39;m mapping integers to hashmaps. Having to use the keyset for loop because of this and pull the value through &#39;value = (HashMap) integertomap.get(key)&#39;, though less efficient then if I could use entrySet without iterater as per your example."},{"owner":{"reputation":10998,"user_id":1015327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/00d71e011fc61cad60c5ffc9bf48c5ef?s=128&d=identicon&r=PG","display_name":"JimmyB","link":"https://stackoverflow.com/users/1015327/jimmyb"},"reply_to_user":{"reputation":522,"user_id":2532888,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/AC65b.jpg?s=128&g=1","display_name":"Marcus MacWilliam","link":"https://stackoverflow.com/users/2532888/marcus-macwilliam"},"edited":false,"score":2,"creation_date":1542204561,"post_id":46908,"comment_id":93484870,"content_license":"CC BY-SA 4.0","body":"@MarcusMacWilliam &quot;The Map holds the data in an entry set&quot; - This is not true for many <code>Map</code> implementations. See <code>TreeMap</code> implementation for example which traverses the tree for either keys, values or entries."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":2,"creation_date":1550137432,"post_id":46908,"comment_id":96162664,"content_license":"CC BY-SA 4.0","body":"@ScArcher2 No it isn&#39;t. It is a nested <i>interface</i>, and even if it was a nested c,ass it would still work. This code works. Been using. It for 15 years. No import required."}],"owner":{"reputation":77429,"user_id":1310,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/9cb44812fc259d55c656dd8038ea5af3?s=128&d=identicon&r=PG","display_name":"ScArcher2","link":"https://stackoverflow.com/users/1310/scarcher2"},"comment_count":13,"is_accepted":true,"score":5305,"last_activity_date":1552602024,"last_edit_date":1552602024,"creation_date":1220649352,"answer_id":46908,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<pre><code>Map&lt;String, String&gt; map = ...\nfor (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n    System.out.println(entry.getKey() + \"/\" + entry.getValue());\n}\n</code></pre>\n"},{"owner":{"reputation":8861,"user_id":3267,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/16e36041f517bc26ef314e08cf2433ae?s=128&d=identicon&r=PG","display_name":"Leigh Caldwell","link":"https://stackoverflow.com/users/3267/leigh-caldwell"},"comment_count":0,"is_accepted":false,"score":37,"last_activity_date":1493937586,"last_edit_date":1493937586,"creation_date":1220649480,"answer_id":46912,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>In theory, the most efficient way will depend on which implementation of Map. The official way to do this is to call <code>map.entrySet()</code>, which returns a set of <code>Map.Entry</code>, each of which contains a key and a value (<code>entry.getKey()</code> and <code>entry.getValue()</code>).</p>\n\n<p>In an idiosyncratic implementation, it might make some difference whether you use <code>map.keySet()</code>, <code>map.entrySet()</code> or something else. But I can't think of a reason why anyone would write it like that. Most likely it makes no difference to performance what you do.</p>\n\n<p>And yes, the order will depend on the implementation - as well as (possibly) the order of insertion and other hard-to-control factors.</p>\n\n<p>[edit] I wrote <code>valueSet()</code> originally but of course <code>entrySet()</code> is actually the answer.</p>\n"},{"comments":[{"owner":{"reputation":7382,"user_id":617612,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/Wfubm.jpg?s=128&g=1","display_name":"Premraj","link":"https://stackoverflow.com/users/617612/premraj"},"edited":false,"score":6,"creation_date":1299771666,"post_id":46926,"comment_id":5926336,"content_license":"CC BY-SA 2.5","body":"EnumMap also has this peculiar behaviour along with IdentityHashMap"},{"owner":{"reputation":5628,"user_id":712526,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG","display_name":"jpaugh","link":"https://stackoverflow.com/users/712526/jpaugh"},"edited":false,"score":1,"creation_date":1453840894,"post_id":46926,"comment_id":57773526,"content_license":"CC BY-SA 3.0","body":"&quot;LinkedHashMap will either return entries in [...] access-order [...]&quot; ... so you access the elements in the order you access them? Either tautological, or something interesting which could use a digression. ;-)"},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"reply_to_user":{"reputation":5628,"user_id":712526,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG","display_name":"jpaugh","link":"https://stackoverflow.com/users/712526/jpaugh"},"edited":false,"score":5,"creation_date":1453843440,"post_id":46926,"comment_id":57775088,"content_license":"CC BY-SA 3.0","body":"@jpaugh Only direct accesses to the <code>LinkedHashMap</code> count. Those through <code>iterator</code>, <code>spliterator</code>, <code>entrySet</code>, etc., do not modify the order."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":1,"creation_date":1517956614,"post_id":46926,"comment_id":84304266,"content_license":"CC BY-SA 3.0","body":"1. <i>though</i> â <i>if</i>? 2. The last paragraph might benefit from a brush-up."}],"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"comment_count":4,"is_accepted":false,"score":141,"last_activity_date":1518138696,"last_edit_date":1518138696,"creation_date":1220650017,"answer_id":46926,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Typical code for iterating over a map is:</p>\n\n<pre><code>Map&lt;String,Thing&gt; map = ...;\nfor (Map.Entry&lt;String,Thing&gt; entry : map.entrySet()) {\n    String key = entry.getKey();\n    Thing thing = entry.getValue();\n    ...\n}\n</code></pre>\n\n<p><code>HashMap</code> is the canonical map implementation and doesn't make guarantees (or though it should not change order if no mutating operation are performed on it). <code>SortedMap</code> will return entries based on the natural ordering of the keys, or a <code>Comparator</code>, if provided. <code>LinkedHashMap</code> will either return entries in insertion-order or access-order depending upon how it has been constructed. <code>EnumMap</code> returns entries in natural order of keys.</p>\n\n<p><strong>(Update: I think this is no longer true.</strong>) Note, <code>IdentityHashMap</code> <code>entrySet</code> iterator currently has a peculiar implementation which returns the same <code>Map.Entry</code> instance for every item in the <code>entrySet</code>! However, every time a new the iterator advances the <code>Map.Entry</code> is updated.</p>\n"},{"owner":{"reputation":28478,"user_id":1853,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/073a27f428a71c155382dc8637ccd772?s=128&d=identicon&r=PG","display_name":"serg10","link":"https://stackoverflow.com/users/1853/serg10"},"comment_count":0,"is_accepted":false,"score":104,"last_activity_date":1412352072,"last_edit_date":1495540052,"creation_date":1220652930,"answer_id":46989,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>This is a two part question:</p>\n\n<p><em>How to iterate over the entries of a Map</em> - @ScArcher2 has <a href=\"https://stackoverflow.com/a/46908/1851302\">answered</a> that perfectly.</p>\n\n<p><em>What is the order of iteration</em> - if you are just using <code>Map</code>, then strictly speaking, there are <strong>no ordering guarantees</strong>.  So you shouldn't really rely on the ordering given by any implementation.  However, the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html\" rel=\"noreferrer\"><code>SortedMap</code></a> interface extends <code>Map</code> and provides exactly what you are looking for - implementations will aways give a consistent sort order.</p>\n\n<p><strong><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/NavigableMap.html\" rel=\"noreferrer\"><code>NavigableMap</code></a> is another useful extension</strong> - this is a <code>SortedMap</code> with additional methods for finding entries by their ordered position in the key set.  So potentially this can remove the need for iterating in the first place - you might be able to find the specific <code>entry</code> you are after using the <code>higherEntry</code>, <code>lowerEntry</code>, <code>ceilingEntry</code>, or <code>floorEntry</code> methods.  The <code>descendingMap</code> method even gives you an explicit method of <strong>reversing the traversal order</strong>.</p>\n"},{"owner":{"reputation":1969,"user_id":2551,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/d304016a12e554129ea45b5816de29a7?s=128&d=identicon&r=PG","display_name":"ckpwong","link":"https://stackoverflow.com/users/2551/ckpwong"},"comment_count":0,"is_accepted":false,"score":59,"last_activity_date":1220653672,"creation_date":1220653672,"answer_id":47004,"question_id":46898,"content_license":"CC BY-SA 2.5","body":"<p>FYI, you can also use <code>map.keySet()</code> and <code>map.values()</code> if you're only interested in keys/values of the map and not the other.</p>\n"},{"comments":[{"owner":{"reputation":5742,"user_id":56708,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64c66e0f95ddc09d2c46f78bf74e0525?s=128&d=identicon&r=PG","display_name":"Jeff Olson","link":"https://stackoverflow.com/users/56708/jeff-olson"},"edited":false,"score":15,"creation_date":1257540386,"post_id":48720,"comment_id":1565055,"content_license":"CC BY-SA 2.5","body":"This is not the best approach, it&#39;s much more efficient to use the entrySet().  Findbugs will flag this code (see <a href=\"http://findbugs.sourceforge.net/bugDescriptions.html#WMI_WRONG_MAP_ITERATOR\" rel=\"nofollow noreferrer\">findbugs.sourceforge.net/&hellip;</a>)"},{"owner":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"reply_to_user":{"reputation":5742,"user_id":56708,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64c66e0f95ddc09d2c46f78bf74e0525?s=128&d=identicon&r=PG","display_name":"Jeff Olson","link":"https://stackoverflow.com/users/56708/jeff-olson"},"edited":false,"score":6,"creation_date":1349702712,"post_id":48720,"comment_id":17279264,"content_license":"CC BY-SA 3.0","body":"@JeffOlson meh, not really.  map lookup is O(1) so both loops behave the same way. admittedly, it will be slightly slower in a micro benchmark but i sometimes do this as well because i hate writing the type arguments over and over again. Also this will quite likely never be your performance bottleneck, so go for it if it makes the code more readable."},{"owner":{"reputation":5742,"user_id":56708,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64c66e0f95ddc09d2c46f78bf74e0525?s=128&d=identicon&r=PG","display_name":"Jeff Olson","link":"https://stackoverflow.com/users/56708/jeff-olson"},"reply_to_user":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"edited":false,"score":0,"creation_date":1349717641,"post_id":48720,"comment_id":17285716,"content_license":"CC BY-SA 3.0","body":"@kritzikratzi but with the entrySet() approach, you&#39;re doing one lookup for each element, whereas with the keySet()/get() approach, you&#39;re doing two lookups for each element.  So in theory (haven&#39;t tested it), it is O(1) vs. 2 * O(1).  Or twice as long.  Right?"},{"owner":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"edited":false,"score":4,"creation_date":1349738787,"post_id":48720,"comment_id":17293078,"content_license":"CC BY-SA 3.0","body":"more in detail: <code>O(1) = 2*O(1)</code> is pretty much the definition of the big O notation. you&#39;re right in that it runs a bit slower, but in terms of complexity they&#39;re the same."},{"owner":{"reputation":1101,"user_id":1151800,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e3e7075884b89f71194c96efdce31278?s=128&d=identicon&r=PG","display_name":"kornero","link":"https://stackoverflow.com/users/1151800/kornero"},"edited":false,"score":0,"creation_date":1354531426,"post_id":48720,"comment_id":18781914,"content_license":"CC BY-SA 3.0","body":"Look up in map is O(1), really?))))) Where on Earth it is O(1)?))) HashMap: First - you must calculate hash, second - search in array by hash, third! - linear search through all elements wich has the same hashCode, this calls &#39;collision&#39;, don&#39;t you hear about it? =) And what can you say about: TreeMap, ConcurrentSkipListMap are they &#39;O(1)&#39;, too?"},{"owner":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"reply_to_user":{"reputation":1101,"user_id":1151800,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e3e7075884b89f71194c96efdce31278?s=128&d=identicon&r=PG","display_name":"kornero","link":"https://stackoverflow.com/users/1151800/kornero"},"edited":false,"score":0,"creation_date":1356179391,"post_id":48720,"comment_id":19330756,"content_license":"CC BY-SA 3.0","body":"@kornero good point, treemap lookup is O(log n), i only had hashmaps in mind (which are ~ O(1), collisions or not)"},{"owner":{"reputation":1101,"user_id":1151800,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e3e7075884b89f71194c96efdce31278?s=128&d=identicon&r=PG","display_name":"kornero","link":"https://stackoverflow.com/users/1151800/kornero"},"reply_to_user":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"edited":false,"score":0,"creation_date":1356273020,"post_id":48720,"comment_id":19347089,"content_license":"CC BY-SA 3.0","body":"@kritzikratzi collisions in hashmaps makes complexity ~ O(n), and there is &quot;Denial of Service via Algorithmic Complexity Attacks&quot; based on this, you can read more about it here: <a href=\"http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003/\" rel=\"nofollow noreferrer\">cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003</a>"},{"owner":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"edited":false,"score":2,"creation_date":1356279431,"post_id":48720,"comment_id":19348500,"content_license":"CC BY-SA 3.0","body":"by collision or not i meant it doesn&#39;t matter if you a few collisions, obviously it&#39;s a different story if you have only collisions. so you&#39;re being pretty petty, but yep, what you&#39;re saying is true."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":5742,"user_id":56708,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64c66e0f95ddc09d2c46f78bf74e0525?s=128&d=identicon&r=PG","display_name":"Jeff Olson","link":"https://stackoverflow.com/users/56708/jeff-olson"},"edited":false,"score":2,"creation_date":1478694122,"post_id":48720,"comment_id":68256024,"content_license":"CC BY-SA 3.0","body":"@Jeff Olson: the comments that the âBig Oâ complexity doesnât change, when there is only a constant factor, is correct. Still, to me it matters whether an operation takes one hour or two hours. More important, it must be emphasized that the factor is <b>not</b> <code>2</code>, as iterating over an <code>entrySet()</code> does not bear a lookup at all; itâs just a linear traversal of all entries. In contrast, iterating over the <code>keySet()</code> and performing a lookup per key bears <i>one</i> lookup per key, so weâre talking about zero lookups vs. <i>n</i> lookups here, <i>n</i> being the size of the <code>Map</code>. So the factor is way beyond <code>2</code>â¦"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":1101,"user_id":1151800,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e3e7075884b89f71194c96efdce31278?s=128&d=identicon&r=PG","display_name":"kornero","link":"https://stackoverflow.com/users/1151800/kornero"},"edited":false,"score":2,"creation_date":1478694927,"post_id":48720,"comment_id":68256478,"content_license":"CC BY-SA 3.0","body":"@kornero: it might be worth noting that you donât need the keys to have the same hashcode to have a collision; thereâs already a collision when <code>hashcode % capacity</code> is the same. Starting with Java 8, the complexity for items having the same <code>hashcode % capacity</code>, but different <code>hashcode</code> or are <code>Comparable</code> falls back to <code>O(log n)</code> and only keys having the same hash code and not being <code>Comparable</code> impose <code>O(n)</code> complexity. But the statement that the complexity of a lookup can be more than <code>O(1)</code> in practice still holds."}],"owner":{"reputation":24025,"user_id":5077,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/83397d0973788189bc7a8f5a9a88e56a?s=128&d=identicon&r=PG","display_name":"Chris Dail","link":"https://stackoverflow.com/users/5077/chris-dail"},"comment_count":10,"is_accepted":false,"score":60,"last_activity_date":1318810604,"last_edit_date":1318810604,"creation_date":1220816915,"answer_id":48720,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>The correct way to do this is to use the accepted answer as it is the most efficient. I find the following code looks a bit cleaner.</p>\n\n<pre><code>for (String key: map.keySet()) {\n   System.out.println(key + \"/\" + map.get(key));\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":14,"creation_date":1329510722,"post_id":1295383,"comment_id":11780982,"content_license":"CC BY-SA 3.0","body":"You should put <code>Iterator</code> in a for loop to limit its scope."},{"owner":{"reputation":452,"user_id":429583,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/cbe141d16879dec55c8eed37343aada4?s=128&d=identicon&r=PG","display_name":"StudioWorks","link":"https://stackoverflow.com/users/429583/studioworks"},"reply_to_user":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":1,"creation_date":1422980003,"post_id":1295383,"comment_id":44958459,"content_license":"CC BY-SA 3.0","body":"@SteveKuo What do you mean by &quot;limit its scope&quot; ?"},{"owner":{"reputation":27236,"user_id":603003,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/XBlaU.png?s=128&g=1","display_name":"ComFreek","link":"https://stackoverflow.com/users/603003/comfreek"},"reply_to_user":{"reputation":452,"user_id":429583,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/cbe141d16879dec55c8eed37343aada4?s=128&d=identicon&r=PG","display_name":"StudioWorks","link":"https://stackoverflow.com/users/429583/studioworks"},"edited":false,"score":13,"creation_date":1426264417,"post_id":1295383,"comment_id":46315452,"content_license":"CC BY-SA 3.0","body":"@StudioWorks <code>for (Iterator&lt;Map.Entry&lt;K, V&gt;&gt; entries = myMap.entrySet().iterator(); entries.hasNext(); ) {   Map.Entry&lt;K, V&gt; entry = entries.next(); }</code>. By using that construct we limit the scope of (visibility of the variable) <code>entries</code> to the for loop."},{"owner":{"reputation":452,"user_id":429583,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/cbe141d16879dec55c8eed37343aada4?s=128&d=identicon&r=PG","display_name":"StudioWorks","link":"https://stackoverflow.com/users/429583/studioworks"},"reply_to_user":{"reputation":27236,"user_id":603003,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/XBlaU.png?s=128&g=1","display_name":"ComFreek","link":"https://stackoverflow.com/users/603003/comfreek"},"edited":false,"score":3,"creation_date":1426265975,"post_id":1295383,"comment_id":46316334,"content_license":"CC BY-SA 3.0","body":"@ComFreek Oh, I see. Didn&#39;t know that it mattered that much."}],"owner":{"reputation":101935,"user_id":20128,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/4b62eef3ad218a5d3cbdd1077660ca8b?s=128&d=identicon&r=PG","display_name":"serg","link":"https://stackoverflow.com/users/20128/serg"},"comment_count":4,"is_accepted":false,"score":126,"last_activity_date":1250616891,"creation_date":1250616891,"answer_id":1295383,"question_id":46898,"content_license":"CC BY-SA 2.5","body":"<p>Example of using iterator and generics:</p>\n\n<pre><code>Iterator&lt;Map.Entry&lt;String, String&gt;&gt; entries = myMap.entrySet().iterator();\nwhile (entries.hasNext()) {\n  Map.Entry&lt;String, String&gt; entry = entries.next();\n  String key = entry.getKey();\n  String value = entry.getValue();\n  // ...\n}\n</code></pre>\n"},{"owner":{"reputation":291,"user_id":265011,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/01c4364883a1fe08cb293cd4824f2eed?s=128&d=identicon&r=PG","display_name":"abods","link":"https://stackoverflow.com/users/265011/abods"},"comment_count":0,"is_accepted":false,"score":29,"last_activity_date":1370615684,"last_edit_date":1370615684,"creation_date":1265177403,"answer_id":2190043,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Try this with Java 1.4:</p>\n\n<pre><code>for( Iterator entries = myMap.entrySet().iterator(); entries.hasNext();){\n\n  Entry entry = (Entry) entries.next();\n\n  System.out.println(entry.getKey() + \"/\" + entry.getValue());\n\n  //...\n}\n</code></pre>\n"},{"owner":{"reputation":7223,"user_id":991065,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oGhAn.jpg?s=128&g=1","display_name":"Fathah Rehman P","link":"https://stackoverflow.com/users/991065/fathah-rehman-p"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1370615653,"last_edit_date":1370615653,"creation_date":1337246516,"answer_id":10632923,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<pre><code>public class abcd{\n    public static void main(String[] args)\n    {\n       Map&lt;Integer, String&gt; testMap = new HashMap&lt;Integer, String&gt;();\n        testMap.put(10, \"a\");\n        testMap.put(20, \"b\");\n        testMap.put(30, \"c\");\n        testMap.put(40, \"d\");\n        for (Integer key:testMap.keySet()) {\n            String value=testMap.get(key);\n            System.out.println(value);\n        }\n    }\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>public class abcd {\n    public static void main(String[] args)\n    {\n       Map&lt;Integer, String&gt; testMap = new HashMap&lt;Integer, String&gt;();\n        testMap.put(10, \"a\");\n        testMap.put(20, \"b\");\n        testMap.put(30, \"c\");\n        testMap.put(40, \"d\");\n        for (Entry&lt;Integer, String&gt; entry : testMap.entrySet()) {\n            Integer key=entry.getKey();\n            String value=entry.getValue();\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":5666,"user_id":1570415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Scl35.jpg?s=128&g=1","display_name":"Donald Raab","link":"https://stackoverflow.com/users/1570415/donald-raab"},"comment_count":0,"is_accepted":false,"score":42,"last_activity_date":1586807386,"last_edit_date":1586807386,"creation_date":1355872393,"answer_id":13943066,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>With <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>, you would use the <code>forEachKeyValue</code> method on the <a href=\"https://github.com/eclipse/eclipse-collections/blob/master/eclipse-collections-api/src/main/java/org/eclipse/collections/api/map/MapIterable.java\" rel=\"nofollow noreferrer\"><code>MapIterable</code></a> interface, which is inherited by the <code>MutableMap</code> and <code>ImmutableMap</code> interfaces and their implementations.</p>\n\n<pre><code>MutableBag&lt;String&gt; result = Bags.mutable.empty();\nMutableMap&lt;Integer, String&gt; map = Maps.mutable.of(1, \"One\", 2, \"Two\", 3, \"Three\");\nmap.forEachKeyValue((key, value) -&gt; result.add(key + value));\nAssert.assertEquals(Bags.mutable.of(\"1One\", \"2Two\", \"3Three\"), result);\n</code></pre>\n\n<p>Using an anonymous inner class, you can write the code as follows:</p>\n\n<pre><code>final MutableBag&lt;String&gt; result = Bags.mutable.empty();\nMutableMap&lt;Integer, String&gt; map = Maps.mutable.of(1, \"One\", 2, \"Two\", 3, \"Three\");\nmap.forEachKeyValue(new Procedure2&lt;Integer, String&gt;()\n{\n    public void value(Integer key, String value)\n    {\n        result.add(key + value);\n    }\n});\nAssert.assertEquals(Bags.mutable.of(\"1One\", \"2Two\", \"3Three\"), result);\n</code></pre>\n\n<p><strong>Note:</strong> I am a committer for Eclipse Collections.</p>\n"},{"owner":{"reputation":114194,"user_id":1927832,"user_type":"registered","accept_rate":49,"profile_image":"https://i.stack.imgur.com/ziSzK.jpg?s=128&g=1","display_name":"Suresh Atta","link":"https://stackoverflow.com/users/1927832/suresh-atta"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1517956817,"last_edit_date":1517956817,"creation_date":1363894406,"answer_id":15556457,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Yes, as many people agreed this is the best way to iterate over a <code>Map</code>.</p>\n\n<p>But there are chances to throw <code>nullpointerexception</code> if the map is <code>null</code>. Don't forget to put <code>null</code> .check in.</p>\n\n<pre><code>                                                 |\n                                                 |\n                                         - - - -\n                                       |\n                                       |\nfor (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n    String key = entry.getKey();\n    Object value = entry.getValue();\n}\n</code></pre>\n"},{"owner":{"reputation":968,"user_id":1918772,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/Ql7kG.png?s=128&g=1","display_name":"Pranoti","link":"https://stackoverflow.com/users/1918772/pranoti"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1458143664,"last_edit_date":1458143664,"creation_date":1372683260,"answer_id":17404976,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>You can do it using generics:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\nIterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet().iterator();\nwhile (entries.hasNext()) {\n    Map.Entry&lt;Integer, Integer&gt; entry = entries.next();\n    System.out.println(\"Key = \" + entry.getKey() + \", Value = \" + entry.getValue());\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":95367,"user_id":288671,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/65f66029eed1093e5c7e3214b4774d8f?s=128&d=identicon&r=PG&f=1","display_name":"Vitalii Fedorenko","link":"https://stackoverflow.com/users/288671/vitalii-fedorenko"},"edited":false,"score":12,"creation_date":1403959574,"post_id":19491759,"comment_id":37866243,"content_license":"CC BY-SA 3.0","body":"Depending on what you want to do with a map, you can also use stream API on the entries returned by <code>map.entrySet().stream()</code> <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.ht&zwnj;&#8203;ml</a>"},{"owner":{"reputation":3331,"user_id":349169,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/deb4446b33506242c883e644d33c5bb5?s=128&d=identicon&r=PG","display_name":"Chris","link":"https://stackoverflow.com/users/349169/chris"},"edited":false,"score":1,"creation_date":1492720171,"post_id":19491759,"comment_id":74111531,"content_license":"CC BY-SA 3.0","body":"This won&#39;t work if you want to reference non-final variables declared outside your lambda expression from within the forEach()..."},{"owner":{"reputation":12067,"user_id":1584255,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/6Tpsk.jpg?s=128&g=1","display_name":"The Coordinator","link":"https://stackoverflow.com/users/1584255/the-coordinator"},"reply_to_user":{"reputation":3331,"user_id":349169,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/deb4446b33506242c883e644d33c5bb5?s=128&d=identicon&r=PG","display_name":"Chris","link":"https://stackoverflow.com/users/349169/chris"},"edited":false,"score":8,"creation_date":1492811056,"post_id":19491759,"comment_id":74157088,"content_license":"CC BY-SA 3.0","body":"@Chris Correct. It won&#39;t work if you try to use <i>effectively non-final</i> variables from outside the lambda."}],"owner":{"reputation":12067,"user_id":1584255,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/6Tpsk.jpg?s=128&g=1","display_name":"The Coordinator","link":"https://stackoverflow.com/users/1584255/the-coordinator"},"comment_count":3,"is_accepted":false,"score":310,"last_activity_date":1473237197,"last_edit_date":1473237197,"creation_date":1382350525,"answer_id":19491759,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>In Java 8 you can do it clean and fast using the new lambdas features:</p>\n\n<pre><code> Map&lt;String,String&gt; map = new HashMap&lt;&gt;();\n map.put(\"SomeKey\", \"SomeValue\");\n map.forEach( (k,v) -&gt; [do something with key and value] );\n\n // such as\n map.forEach( (k,v) -&gt; System.out.println(\"Key: \" + k + \": Value: \" + v));\n</code></pre>\n\n<p>The type of <code>k</code> and <code>v</code> will be inferred by the compiler and there is no need to use <code>Map.Entry</code> anymore.</p>\n\n<p>Easy-peasy!</p>\n"},{"owner":{"reputation":443,"user_id":1276364,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/83ad6d335131dc3b6f5bd123f4fd7568?s=128&d=identicon&r=PG","display_name":"dmunozfer","link":"https://stackoverflow.com/users/1276364/dmunozfer"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1458145078,"last_edit_date":1458145078,"creation_date":1385729623,"answer_id":20286334,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>If you have a generic untyped Map you can use:</p>\n\n<pre><code>Map map = new HashMap();\nfor (Map.Entry entry : ((Set&lt;Map.Entry&gt;) map.entrySet())) {\n    System.out.println(entry.getKey() + \"/\" + entry.getValue());\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2595,"user_id":1293500,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/19J7X.jpg?s=128&g=1","display_name":"edin-m","link":"https://stackoverflow.com/users/1293500/edin-m"},"edited":false,"score":0,"creation_date":1574998718,"post_id":20903678,"comment_id":104430001,"content_license":"CC BY-SA 4.0","body":"keySet() is slow"}],"owner":{"reputation":261,"user_id":3141443,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mz125.jpg?s=128&g=1","display_name":"J.B.Vala","link":"https://stackoverflow.com/users/3141443/j-b-vala"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1601470817,"last_edit_date":1601470817,"creation_date":1388752108,"answer_id":20903678,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>There are several ways to iterate a map. Please refer to the following code.</p>\n<p>When you iterate a map using iterator Interface you must go with <code>Entry&lt;K,V&gt;</code> or <code>entrySet()</code>.</p>\n<p>It looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.*;\n    import java.util.HashMap;\n    import java.util.Iterator;\n    import java.util.Map;\n\n    public class IteratMapDemo{\n\n        public static void main(String arg[]){\n            Map&lt;String, String&gt; mapOne = new HashMap&lt;String, String&gt;();\n            mapOne.put(&quot;1&quot;, &quot;January&quot;);\n            mapOne.put(&quot;2&quot;, &quot;February&quot;);\n            mapOne.put(&quot;3&quot;, &quot;March&quot;);\n            mapOne.put(&quot;4&quot;, &quot;April&quot;);\n            mapOne.put(&quot;5&quot;, &quot;May&quot;);\n            mapOne.put(&quot;6&quot;, &quot;June&quot;);\n            mapOne.put(&quot;7&quot;, &quot;July&quot;);\n            mapOne.put(&quot;8&quot;, &quot;August&quot;);\n            mapOne.put(&quot;9&quot;, &quot;September&quot;);\n            mapOne.put(&quot;10&quot;, &quot;Octomber&quot;);\n            mapOne.put(&quot;11&quot;, &quot;November&quot;);\n            mapOne.put(&quot;12&quot;, &quot;December&quot;);\n\n            Iterator it = mapOne.entrySet().iterator();\n            while(it.hasNext())\n            {\n                Map.Entry me = (Map.Entry) it.next();\n                //System.out.println(&quot;Get Key through While loop = &quot; + me.getKey());\n            }\n            for(Map.Entry&lt;String, String&gt; entry:mapOne.entrySet()){\n                //System.out.println(entry.getKey() + &quot;=&quot; + entry.getValue());\n            }\n\n            for (Object key : mapOne.keySet()) {\n                System.out.println(&quot;Key: &quot; + key.toString() + &quot; Value: &quot; +\n                                   mapOne.get(key));\n            }\n        }\n    }\n</code></pre>\n"},{"owner":{"reputation":14052,"user_id":918472,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/d4GgD.jpg?s=128&g=1","display_name":"Rupesh Yadav","link":"https://stackoverflow.com/users/918472/rupesh-yadav"},"comment_count":0,"is_accepted":false,"score":29,"last_activity_date":1601479284,"last_edit_date":1601479284,"creation_date":1390998903,"answer_id":21431305,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>In Map one can Iteration over <code>keys</code> and/or <code>values</code> and/or <code>both (e.g., entrySet)</code>  depends on one's interested in_ Like:</p>\n<ol>\n<li><p>Iterate through the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html#keySet%28%29\" rel=\"nofollow noreferrer\"><code>keys -&gt; keySet()</code></a> of the map:</p>\n<pre><code> Map&lt;String, Object&gt; map = ...;\n\n for (String key : map.keySet()) {\n     //your Business logic...\n }\n</code></pre>\n</li>\n<li><p>Iterate through the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html#values%28%29\" rel=\"nofollow noreferrer\"><code>values -&gt; values()</code></a> of the map:</p>\n<pre><code> for (Object value : map.values()) {\n     //your Business logic...\n }\n</code></pre>\n</li>\n<li><p>Iterate through the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html#entrySet%28%29\" rel=\"nofollow noreferrer\"><code>both -&gt; entrySet()</code></a> of the map:</p>\n<pre><code> for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n     String key = entry.getKey();\n     Object value = entry.getValue();\n     //your Business logic...\n }\n</code></pre>\n</li>\n</ol>\n<p>Moreover, there are 3 different ways to iterate through a HashMap. They are as below:</p>\n<pre><code>//1.\nfor (Map.Entry entry : hm.entrySet()) {\n    System.out.print(&quot;key,val: &quot;);\n    System.out.println(entry.getKey() + &quot;,&quot; + entry.getValue());\n}\n\n//2.\nIterator iter = hm.keySet().iterator();\nwhile(iter.hasNext()) {\n    Integer key = (Integer)iter.next();\n    String val = (String)hm.get(key);\n    System.out.println(&quot;key,val: &quot; + key + &quot;,&quot; + val);\n}\n\n//3.\nIterator it = hm.entrySet().iterator();\nwhile (it.hasNext()) {\n    Map.Entry entry = (Map.Entry) it.next();\n    Integer key = (Integer)entry.getKey();\n    String val = (String)entry.getValue();\n    System.out.println(&quot;key,val: &quot; + key + &quot;,&quot; + val);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":409,"user_id":9533625,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6c1e696a696e7c231435fc67da09e614?s=128&d=identicon&r=PG&f=1","display_name":"AlexB","link":"https://stackoverflow.com/users/9533625/alexb"},"edited":false,"score":1,"creation_date":1547473468,"post_id":21570332,"comment_id":95193680,"content_license":"CC BY-SA 4.0","body":"The run times are taken from the article, which does not use the Java Microbenchmarking Harness. The times are therefore unreliable, as the code could, for example, have been completely optimised out by the JIT compiler."}],"owner":{"reputation":4017,"user_id":3131537,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/mOOLT.jpg?s=128&g=1","display_name":"Darshan Patel","link":"https://stackoverflow.com/users/3131537/darshan-patel"},"comment_count":1,"is_accepted":false,"score":86,"last_activity_date":1437235106,"last_edit_date":1437235106,"creation_date":1391582575,"answer_id":21570332,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>There are several ways to iterate over map.</p>\n\n<p>Here is comparison of their performances for a common data set stored in map by storing a million key value pairs in map and will iterate over map.</p>\n\n<p><strong>1) Using <code>entrySet()</code> in for each loop</strong></p>\n\n<pre><code>for (Map.Entry&lt;String,Integer&gt; entry : testMap.entrySet()) {\n    entry.getKey();\n    entry.getValue();\n}\n</code></pre>\n\n<p><em>50 milliseconds</em></p>\n\n<p><strong>2) Using <code>keySet()</code> in for each loop</strong></p>\n\n<pre><code>for (String key : testMap.keySet()) {\n    testMap.get(key);\n}\n</code></pre>\n\n<p><em>76 milliseconds</em></p>\n\n<p><strong>3) Using <code>entrySet()</code> and iterator</strong></p>\n\n<pre><code>Iterator&lt;Map.Entry&lt;String,Integer&gt;&gt; itr1 = testMap.entrySet().iterator();\nwhile(itr1.hasNext()) {\n    Map.Entry&lt;String,Integer&gt; entry = itr1.next();\n    entry.getKey();\n    entry.getValue();\n}\n</code></pre>\n\n<p><em>50 milliseconds</em></p>\n\n<p><strong>4) Using <code>keySet()</code> and iterator</strong></p>\n\n<pre><code>Iterator itr2 = testMap.keySet().iterator();\nwhile(itr2.hasNext()) {\n    String key = itr2.next();\n    testMap.get(key);\n}\n</code></pre>\n\n<p><em>75 milliseconds</em></p>\n\n<p>I have referred <a href=\"http://howtodoinjava.com/2013/04/01/performance-comparison-of-different-ways-to-iterate-over-hashmap/\" rel=\"noreferrer\"><code>this link</code></a>.</p>\n"},{"owner":{"reputation":1052,"user_id":3254469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66f5b2e2d08cdbb1a19b2d69799db8ad?s=128&d=identicon&r=PG&f=1","display_name":"Fadid","link":"https://stackoverflow.com/users/3254469/fadid"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1452805110,"last_edit_date":1452805110,"creation_date":1395250492,"answer_id":22513787,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<pre><code>    Iterator iterator = map.entrySet().iterator();\n    while (iterator.hasNext()) {\n        Map.Entry element = (Map.Entry)it.next();\n        LOGGER.debug(\"Key: \" + element.getKey());\n        LOGGER.debug(\"value: \" + element.getValue());    \n    }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3899,"user_id":2185582,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/rSrJW.png?s=128&g=1","display_name":"humblerookie","link":"https://stackoverflow.com/users/2185582/humblerookie"},"reply_to_user":{"reputation":15676,"user_id":1682820,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/m1gPw.jpg?s=128&g=1","display_name":"injecteer","link":"https://stackoverflow.com/users/1682820/injecteer"},"edited":false,"score":0,"creation_date":1408650546,"post_id":25116661,"comment_id":39681848,"content_license":"CC BY-SA 3.0","body":"@injecteer: Seems the motive of lambda expressions"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":9,"creation_date":1478695044,"post_id":25116661,"comment_id":68256559,"content_license":"CC BY-SA 3.0","body":"You donât need a stream if you just want to iterate over a map. <code>myMap.forEach( (currentKey,currentValue) -&gt; &#47;* action *&#47; );</code> is much more concise."}],"owner":{"reputation":13923,"user_id":1123501,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/tCkbe.jpg?s=128&g=1","display_name":"George Siggouroglou","link":"https://stackoverflow.com/users/1123501/george-siggouroglou"},"comment_count":2,"is_accepted":false,"score":33,"last_activity_date":1517888266,"last_edit_date":1517888266,"creation_date":1407148249,"answer_id":25116661,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p><strong>Java 8:</strong></p>\n\n<p>You can use lambda expressions:</p>\n\n<pre><code>myMap.entrySet().stream().forEach((entry) -&gt; {\n    Object currentKey = entry.getKey();\n    Object currentValue = entry.getValue();\n});\n</code></pre>\n\n<p>For more information, follow <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"noreferrer\">this</a>.</p>\n"},{"owner":{"reputation":725,"user_id":1941878,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/g4tts.png?s=128&g=1","display_name":"fechidal89","link":"https://stackoverflow.com/users/1941878/fechidal89"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1408659317,"creation_date":1408659317,"answer_id":25436802,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>I copied the data of a map to another with this code:</p>\n\n<pre><code>HashMap product =(HashMap)shopping_truck.get(i);\nHashMap tmp = new HashMap();\nfor (Iterator it = product.entrySet().iterator(); it.hasNext();) {\n    Map.Entry thisEntry = (Map.Entry) it.next();\n    tmp.put(thisEntry.getKey(), thisEntry.getValue());\n}\n</code></pre>\n"},{"owner":{"reputation":5211,"user_id":1431728,"user_type":"registered","accept_rate":49,"profile_image":"https://www.gravatar.com/avatar/ef157021535e6330f7100061a4056365?s=128&d=identicon&r=PG","display_name":"JohnK","link":"https://stackoverflow.com/users/1431728/johnk"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1420849358,"creation_date":1420849358,"answer_id":27871427,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>It doesn't quite answer the OP's question, but might be useful to others who find this page:</p>\n\n<p>If you only need the values and not the keys, you can do this:</p>\n\n<pre><code>Map&lt;Ktype, Vtype&gt; myMap = [...];\nfor (Vtype v: myMap.values()) {\n  System.out.println(\"value: \" + v);\n}\n</code></pre>\n\n<p><code>Ktype</code>, <code>Vtype</code> are pseudocode.</p>\n"},{"owner":{"reputation":29218,"user_id":1762224,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/20969bd926bb6a29ee19a07a25f7fea8?s=128&d=identicon&r=PG","display_name":"Mr. Polywhirl","link":"https://stackoverflow.com/users/1762224/mr-polywhirl"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1517957566,"last_edit_date":1517957566,"creation_date":1431520652,"answer_id":30215019,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Here is a generic type-safe method which can be called to dump any given <code>Map</code>.</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.Map;\n\npublic class MapUtils {\n    static interface ItemCallback&lt;K, V&gt; {\n        void handler(K key, V value, Map&lt;K, V&gt; map);\n    }\n\n    public static &lt;K, V&gt; void forEach(Map&lt;K, V&gt; map, ItemCallback&lt;K, V&gt; callback) {\n        Iterator&lt;Map.Entry&lt;K, V&gt;&gt; it = map.entrySet().iterator();\n\n        while (it.hasNext()) {\n            Map.Entry&lt;K, V&gt; entry = it.next();\n\n            callback.handler(entry.getKey(), entry.getValue(), map);\n        }\n    }\n\n    public static &lt;K, V&gt; void printMap(Map&lt;K, V&gt; map) {\n        forEach(map, new ItemCallback&lt;K, V&gt;() {\n            @Override\n            public void handler(K key, V value, Map&lt;K, V&gt; map) {\n                System.out.println(key + \" = \" + value);\n            }\n        });\n    }\n}\n</code></pre>\n\n<h2>Example</h2>\n\n<p>Here is an example of its use. Notice that the type of the <code>Map</code> is inferred by the method.</p>\n\n<pre><code>import java.util.*;\n\npublic class MapPrinter {\n    public static void main(String[] args) {\n        List&lt;Map&lt;?, ?&gt;&gt; maps = new ArrayList&lt;Map&lt;?, ?&gt;&gt;() {\n            private static final long serialVersionUID = 1L;\n            {\n                add(new LinkedHashMap&lt;String, Integer&gt;() {\n                    private static final long serialVersionUID = 1L;\n                    {\n                        put(\"One\", 0);\n                        put(\"Two\", 1);\n                        put(\"Three\", 3);\n                    }\n                });\n\n                add(new LinkedHashMap&lt;String, Object&gt;() {\n                    private static final long serialVersionUID = 1L;\n                    {\n                        put(\"Object\", new Object());\n                        put(\"Integer\", new Integer(0));\n                        put(\"Double\", new Double(0.0));\n                    }\n                });\n            }\n        };\n\n        for (Map&lt;?, ?&gt; map : maps) {\n            MapUtils.printMap(map);\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>One = 0\nTwo = 1\nThree = 3\n\nObject = java.lang.Object@15db9742\nInteger = 0\nDouble = 0.0\n</code></pre>\n"},{"owner":{"reputation":2217,"user_id":2197975,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/Ykqvj.jpg?s=128&g=1","display_name":"Joshua Michael Waggoner","link":"https://stackoverflow.com/users/2197975/joshua-michael-waggoner"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1433037927,"last_edit_date":1433037927,"creation_date":1433012884,"answer_id":30550239,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>This is the easiest way of doing it I believe...</p>\n\n<pre><code>/* For example, this could be a map object */\nMap&lt;String, Integer&gt; MAP = new Map&lt;&gt;();\n\n// Do something like put keys/value pairs into the map, etc...\nMAP.put(\"Denver\", 35);\nMAP.put(\"Patriots\", 14);\n\n/* Then, simply use a for each loop like this to iterate */\nfor (Object o : MAP.entrySet()) {\n    Map.Entry pair = (Map.Entry) o;\n    // Do whatever with the pair here (i.e. pair.getKey(), or pair.getValue();\n}\n</code></pre>\n"},{"owner":{"reputation":1342,"user_id":1758634,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/943f886688032f3aaa78bef2bea61310?s=128&d=identicon&r=PG","display_name":"tomaj","link":"https://stackoverflow.com/users/1758634/tomaj"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1440868304,"creation_date":1440868304,"answer_id":32288690,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>If your reason for iterating trough the <code>Map</code>, is to do an operation on the value and write to a resulting <code>Map</code>. I recommend using the <code>transform</code>-methods in the <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Google Guava</a> <code>Maps</code> class.</p>\n\n<pre><code>import com.google.common.collect.Maps;\n</code></pre>\n\n<p>After you have added the <code>Maps</code> to your imports, you can use <code>Maps.transformValues</code> and <code>Maps.transformEntries</code> on your maps, like this:</p>\n\n<pre><code>public void transformMap(){\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    map.put(\"a\", 2);\n    map.put(\"b\", 4);\n\n    Map&lt;String, Integer&gt; result = Maps.transformValues(map, num -&gt; num * 2);\n    result.forEach((key, val) -&gt; print(key, Integer.toString(val)));\n    // key=a,value=4\n    // key=b,value=8\n\n    Map&lt;String, String&gt; result2 = Maps.transformEntries(map, (key, value) -&gt; value + \"[\" + key + \"]\");\n    result2.forEach(this::print);\n    // key=a,value=2[a]\n    // key=b,value=4[b]\n}\n\nprivate void print(String key, String val){\n    System.out.println(\"key=\" + key + \",value=\" + val);\n}\n</code></pre>\n"},{"owner":{"reputation":18327,"user_id":1216775,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/gX53v.jpg?s=128&g=1","display_name":"akhil_mittal","link":"https://stackoverflow.com/users/1216775/akhil-mittal"},"comment_count":0,"is_accepted":false,"score":37,"last_activity_date":1556517155,"last_edit_date":1556517155,"creation_date":1441155600,"answer_id":32343110,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<h2>Java 8</h2>\n\n<p>We have got <code>forEach</code> method that accepts a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"noreferrer\">lambda expression</a>. We have also got <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\">stream</a> APIs. Consider a map:</p>\n\n<pre><code>Map&lt;String,String&gt; sample = new HashMap&lt;&gt;();\nsample.put(\"A\",\"Apple\");\nsample.put(\"B\", \"Ball\");\n</code></pre>\n\n<p><strong>Iterate over keys:</strong></p>\n\n<pre><code>sample.keySet().forEach((k) -&gt; System.out.println(k));\n</code></pre>\n\n<p><strong>Iterate over values:</strong></p>\n\n<pre><code>sample.values().forEach((v) -&gt; System.out.println(v));\n</code></pre>\n\n<p><strong>Iterate over entries (Using forEach and Streams):</strong></p>\n\n<pre><code>sample.forEach((k,v) -&gt; System.out.println(k + \":\" + v)); \nsample.entrySet().stream().forEach((entry) -&gt; {\n            Object currentKey = entry.getKey();\n            Object currentValue = entry.getValue();\n            System.out.println(currentKey + \":\" + currentValue);\n        });\n</code></pre>\n\n<p>The advantage with streams is they can be parallelized easily in case we want to. We simply need to use <code>parallelStream()</code> in place of <code>stream()</code> above.</p>\n\n<p><strong><code>forEachOrdered</code> vs <code>forEach</code> with streams ?</strong>\nThe <code>forEach</code> does not follow encounter order (if defined) and is inherently non-deterministic in nature where as the <code>forEachOrdered</code> does. So <code>forEach</code> does not guarantee that the order would be kept. Also check <a href=\"https://stackoverflow.com/questions/32797579/foreach-vs-foreachordered-in-java-8-stream\">this</a> for more.</p>\n"},{"owner":{"reputation":3402,"user_id":1503859,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/4bcbf19e148dc37a98be5ea8311c4770?s=128&d=identicon&r=PG&f=1","display_name":"Nitin Mahesh","link":"https://stackoverflow.com/users/1503859/nitin-mahesh"},"comment_count":0,"is_accepted":false,"score":37,"last_activity_date":1556629559,"last_edit_date":1556629559,"creation_date":1444144053,"answer_id":32973406,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p><strong>Lambda</strong> Expression Java 8</p>\n</blockquote>\n\n<p>In Java 1.8 (Java 8) this has become lot easier by using <strong>forEach</strong> method from Aggregate operations(<strong>Stream operations</strong>) that looks similar to iterators from <strong>Iterable</strong> Interface. </p>\n\n<p>Just copy paste below statement to your code and rename the <strong>HashMap</strong> variable from <strong>hm</strong> to your HashMap variable to print out key-value pair.</p>\n\n<pre><code>HashMap&lt;Integer,Integer&gt; hm = new HashMap&lt;Integer, Integer&gt;();\n/*\n *     Logic to put the Key,Value pair in your HashMap hm\n */\n\n// Print the key value pair in one line.\n\nhm.forEach((k, v) -&gt; System.out.println(\"key: \" + k + \" value:\" + v));\n\n// Just copy and paste above line to your code.\n</code></pre>\n\n<p>Below is the sample code that I tried using <strong>Lambda Expression</strong>. This stuff is so cool. Must try.</p>\n\n<pre><code>HashMap&lt;Integer, Integer&gt; hm = new HashMap&lt;Integer, Integer&gt;();\n    Random rand = new Random(47);\n    int i = 0;\n    while(i &lt; 5) {\n        i++;\n        int key = rand.nextInt(20);\n        int value = rand.nextInt(50);\n        System.out.println(\"Inserting key: \" + key + \" Value: \" + value);\n        Integer imap = hm.put(key, value);\n        if( imap == null) {\n            System.out.println(\"Inserted\");\n        } else {\n            System.out.println(\"Replaced with \" + imap);\n        }               \n    }\n\n    hm.forEach((k, v) -&gt; System.out.println(\"key: \" + k + \" value:\" + v));\n\nOutput:\n\nInserting key: 18 Value: 5\nInserted\nInserting key: 13 Value: 11\nInserted\nInserting key: 1 Value: 29\nInserted\nInserting key: 8 Value: 0\nInserted\nInserting key: 2 Value: 7\nInserted\nkey: 1 value:29\nkey: 18 value:5\nkey: 2 value:7\nkey: 8 value:0\nkey: 13 value:11\n</code></pre>\n\n<p>Also one can use <strong>Spliterator</strong> for the same.</p>\n\n<pre><code>Spliterator sit = hm.entrySet().spliterator();\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<hr>\n\n<p>Including documentation links to Oracle Docs.\nFor more on <strong>Lambda</strong> go to this <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"noreferrer\">link</a> and must read <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/\" rel=\"noreferrer\">Aggregate Operations</a> and for Spliterator go to this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Spliterator.html\" rel=\"noreferrer\">link</a>.</p>\n"},{"owner":{"reputation":1077,"user_id":5135746,"user_type":"registered","profile_image":"https://i.stack.imgur.com/9iLB9.png?s=128&g=1","display_name":"Syd Lambert","link":"https://stackoverflow.com/users/5135746/syd-lambert"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1445969374,"creation_date":1445969374,"answer_id":33375492,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>If you want to iterate through the map in the order that the elements were added, use <code>LinkedHashMap</code> as opposed to just <code>Map</code>.</p>\n\n<p>This approach has worked for me in the past:</p>\n\n<pre><code>LinkedHashMap&lt;String,Integer&gt; test=new LinkedHashMap();\n\ntest.put(\"foo\",69);\ntest.put(\"bar\",1337);\n\nfor(int i=0;i&lt;test.size();i++){\n    System.out.println(test.get(test.keySet().toArray()[i]));\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>69\n1337\n</code></pre>\n"},{"comments":[{"owner":{"reputation":7986,"user_id":2131074,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/579b58072937a718317e020c891de635?s=128&d=identicon&r=PG","display_name":"GPI","link":"https://stackoverflow.com/users/2131074/gpi"},"edited":false,"score":11,"creation_date":1463054014,"post_id":35558955,"comment_id":61904872,"content_license":"CC BY-SA 3.0","body":"@Viacheslav : very nice answer. Just wondering how Java8 apis are hindered, in your benchmark, by capturing lambdas... (e.g. <code>long sum = 0; map.forEach( &#47;* accumulate in variable sum*&#47;);</code> captures the <code>sum</code> long, which may be slower than say <code>stream.mapToInt(&#47;*whatever*&#47;).sum</code> for example. Of course you can not always avoid capturing state, but that may be a reasonnable addition to the bench."},{"owner":{"reputation":15291,"user_id":3656904,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1","display_name":"talex","link":"https://stackoverflow.com/users/3656904/talex"},"edited":false,"score":23,"creation_date":1473780053,"post_id":35558955,"comment_id":66266504,"content_license":"CC BY-SA 3.0","body":"Your 8 test is wrong. it access same variable from different threads without synchronization. Change to <code>AtomicInteger</code> to solve problem."},{"owner":{"reputation":27974,"user_id":706317,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/1mafF.jpg?s=128&g=1","display_name":"ZhekaKozlov","link":"https://stackoverflow.com/users/706317/zhekakozlov"},"edited":false,"score":2,"creation_date":1489688869,"post_id":35558955,"comment_id":72793132,"content_license":"CC BY-SA 3.0","body":"Why is Java 8 <code>forEach</code> slower on 100000 elements while it was the fastest on 100 and 10000?"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":27974,"user_id":706317,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/1mafF.jpg?s=128&g=1","display_name":"ZhekaKozlov","link":"https://stackoverflow.com/users/706317/zhekakozlov"},"edited":false,"score":51,"creation_date":1489775308,"post_id":35558955,"comment_id":72835670,"content_license":"CC BY-SA 3.0","body":"@ZhekaKozlov: look at the mindblowingly large error values. Consider that a test result of <code>x&#177;e</code> implies that there were result within the interval from <code>x-e</code> to <code>x+e</code>, so the fastest result (<code>1184.767&#177;332.968</code>) ranges from <code>852</code> to <code>1518</code>, whereas the second slowest (<code>1706.676&#177;436.867</code>) runs between <code>1270</code> and <code>2144</code>, so the results still overlap significantly. Now look at the slowest result, <code>3289.866&#177;1445.564</code>, which implies diverging between <code>1844</code> and <code>4735</code> and you <i>know</i> that these test results are meaningless."},{"owner":{"reputation":80637,"user_id":296974,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG","display_name":"glglgl","link":"https://stackoverflow.com/users/296974/glglgl"},"edited":false,"score":7,"creation_date":1496612715,"post_id":35558955,"comment_id":75720023,"content_license":"CC BY-SA 3.0","body":"What about <code>map.entrySet().stream().[parallel().]mapToInt(e -&gt; e.getKey() + e.getValue()).sum();</code>?"},{"owner":{"reputation":4620,"user_id":201557,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/465fb55f784b092bd32a669c5923d72c?s=128&d=identicon&r=PG","display_name":"Thierry","link":"https://stackoverflow.com/users/201557/thierry"},"edited":false,"score":8,"creation_date":1510097877,"post_id":35558955,"comment_id":81288277,"content_license":"CC BY-SA 3.0","body":"What about comparing the 3 main implementations : HashMap, LinkedHashMap and TreeMap ?"},{"owner":{"reputation":42806,"user_id":57611,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/fbIWO.jpg?s=128&g=1","display_name":"ErikE","link":"https://stackoverflow.com/users/57611/erike"},"edited":false,"score":16,"creation_date":1531595052,"post_id":35558955,"comment_id":89658448,"content_license":"CC BY-SA 4.0","body":"#1 and #6 are exactly the same. Using <code>while</code> vs. a <code>for</code> loop is not a different technique for iterating. And I am surprised they have such variation between them in your testsâwhich suggests that the tests are not properly isolated from external factors unrelated to the things you intend to be testing."},{"owner":{"reputation":36577,"user_id":671543,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG","display_name":"njzk2","link":"https://stackoverflow.com/users/671543/njzk2"},"edited":false,"score":4,"creation_date":1544418100,"post_id":35558955,"comment_id":94254366,"content_license":"CC BY-SA 4.0","body":"for <code>#7</code>, use map + reduce, not forEach."},{"owner":{"reputation":1380,"user_id":5517612,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9311c4cfa84f7914806dfb88a75ee219?s=128&d=identicon&r=PG&f=1","display_name":"Todd Sewell","link":"https://stackoverflow.com/users/5517612/todd-sewell"},"edited":false,"score":6,"creation_date":1546434027,"post_id":35558955,"comment_id":94850182,"content_license":"CC BY-SA 4.0","body":"<code>#8</code> is a terrible example, because of the <code>parallel</code> there&#39;s now a race condition when adding to <code>i</code>."},{"owner":{"reputation":1027,"user_id":5870336,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/21a411552aec6db6c9f636258ced2d4c?s=128&d=identicon&r=PG&f=1","display_name":"Sina Madani","link":"https://stackoverflow.com/users/5870336/sina-madani"},"edited":false,"score":4,"creation_date":1551209546,"post_id":35558955,"comment_id":96554742,"content_license":"CC BY-SA 4.0","body":"You don&#39;t need <code>.stream()</code> to for <code>forEach</code> since it&#39;s also defined on the <code>Iterable</code> interface."},{"owner":{"reputation":328,"user_id":3972824,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/vE2WO.jpg?s=128&g=1","display_name":"Aswin Prasad","link":"https://stackoverflow.com/users/3972824/aswin-prasad"},"edited":false,"score":0,"creation_date":1577327061,"post_id":35558955,"comment_id":105142592,"content_license":"CC BY-SA 4.0","body":"map.values() give a collection of values in the given map. This can be helpful for someone."},{"owner":{"reputation":6188,"user_id":821497,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/956003d5607ba6be2dd3f37427980e2c?s=128&d=identicon&r=PG","display_name":"ciamej","link":"https://stackoverflow.com/users/821497/ciamej"},"edited":false,"score":0,"creation_date":1589208644,"post_id":35558955,"comment_id":109194647,"content_license":"CC BY-SA 4.0","body":"Downvoted because this test is utterly broken and unreliable as other commenters have already noticed."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":1,"creation_date":1596705010,"post_id":35558955,"comment_id":111898621,"content_license":"CC BY-SA 4.0","body":"This logic doesn&#39;t look reliable, since I think there is no guarantee whether the left or the right operand to <code>+</code> is evaluated first, and <code>.next()</code> may have side effects: <code>i += it.next() + it.getValue()</code>"},{"owner":{"reputation":4971,"user_id":39334,"user_type":"registered","accept_rate":81,"profile_image":"https://graph.facebook.com/520402061/picture?type=large","display_name":"stolsvik","link":"https://stackoverflow.com/users/39334/stolsvik"},"edited":false,"score":0,"creation_date":1611698375,"post_id":35558955,"comment_id":116534319,"content_license":"CC BY-SA 4.0","body":"Interesting. However, the ones where you must use the &quot;array-hack&quot; to escape the closure might have a disadvantage? Might have been interesting to let them all have to use this? Or maybe even some &quot;collector object&quot;, maybe an AtomicLong or somesuch, that couldn&#39;t easily be factored out by the jit?"}],"owner":{"reputation":48686,"user_id":4318868,"user_type":"registered","profile_image":"https://i.stack.imgur.com/p6Tpv.jpg?s=128&g=1","display_name":"Slava Vedenin","link":"https://stackoverflow.com/users/4318868/slava-vedenin"},"comment_count":14,"is_accepted":false,"score":1334,"last_activity_date":1565035942,"last_edit_date":1565035942,"creation_date":1456159049,"answer_id":35558955,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>To summarize the other answers and combine them with what I know, I found 10 main ways to do this (see below). Also, I wrote some performance tests (see results below). For example, if we want to find the sum of all of the keys and values of a map, we can write:</p>\n\n<ol>\n<li><p>Using <strong>iterator</strong> and <strong>Map.Entry</strong></p>\n\n<pre><code>long i = 0;\nIterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; it = map.entrySet().iterator();\nwhile (it.hasNext()) {\n    Map.Entry&lt;Integer, Integer&gt; pair = it.next();\n    i += pair.getKey() + pair.getValue();\n}\n</code></pre></li>\n<li><p>Using <strong>foreach</strong> and <strong>Map.Entry</strong></p>\n\n<pre><code>long i = 0;\nfor (Map.Entry&lt;Integer, Integer&gt; pair : map.entrySet()) {\n    i += pair.getKey() + pair.getValue();\n}\n</code></pre></li>\n<li><p>Using <strong>forEach</strong> from Java 8</p>\n\n<pre><code>final long[] i = {0};\nmap.forEach((k, v) -&gt; i[0] += k + v);\n</code></pre></li>\n<li><p>Using <strong>keySet</strong> and <strong>foreach</strong></p>\n\n<pre><code>long i = 0;\nfor (Integer key : map.keySet()) {\n    i += key + map.get(key);\n}\n</code></pre></li>\n<li><p>Using <strong>keySet</strong> and <strong>iterator</strong></p>\n\n<pre><code>long i = 0;\nIterator&lt;Integer&gt; itr2 = map.keySet().iterator();\nwhile (itr2.hasNext()) {\n    Integer key = itr2.next();\n    i += key + map.get(key);\n}\n</code></pre></li>\n<li><p>Using <strong>for</strong> and <strong>Map.Entry</strong></p>\n\n<pre><code>long i = 0;\nfor (Iterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet().iterator(); entries.hasNext(); ) {\n    Map.Entry&lt;Integer, Integer&gt; entry = entries.next();\n    i += entry.getKey() + entry.getValue();\n}\n</code></pre></li>\n<li><p>Using the Java 8 <strong>Stream API</strong></p>\n\n<pre><code>final long[] i = {0};\nmap.entrySet().stream().forEach(e -&gt; i[0] += e.getKey() + e.getValue());\n</code></pre></li>\n<li><p>Using the Java 8 <strong>Stream API parallel</strong></p>\n\n<pre><code>final long[] i = {0};\nmap.entrySet().stream().parallel().forEach(e -&gt; i[0] += e.getKey() + e.getValue());\n</code></pre></li>\n<li><p>Using <strong>IterableMap</strong> of <code>Apache Collections</code></p>\n\n<pre><code>long i = 0;\nMapIterator&lt;Integer, Integer&gt; it = iterableMap.mapIterator();\nwhile (it.hasNext()) {\n    i += it.next() + it.getValue();\n}\n</code></pre></li>\n<li><p>Using <strong>MutableMap</strong> of Eclipse (CS) collections</p>\n\n<pre><code>final long[] i = {0};\nmutableMap.forEachKeyValue((key, value) -&gt; {\n    i[0] += key + value;\n});\n</code></pre></li>\n</ol>\n\n<p><strong>Perfomance tests</strong> (mode = AverageTime, system = Windows&nbsp;8.1 64-bit, Intel i7-4790 3.60 GHz, 16&nbsp;GB)</p>\n\n<ol>\n<li><p>For a small map (100 elements), score 0.308 is the best</p>\n\n<pre><code>Benchmark                          Mode  Cnt  Score    Error  Units\ntest3_UsingForEachAndJava8         avgt  10   0.308 Â±  0.021  Âµs/op\ntest10_UsingEclipseMap             avgt  10   0.309 Â±  0.009  Âµs/op\ntest1_UsingWhileAndMapEntry        avgt  10   0.380 Â±  0.014  Âµs/op\ntest6_UsingForAndIterator          avgt  10   0.387 Â±  0.016  Âµs/op\ntest2_UsingForEachAndMapEntry      avgt  10   0.391 Â±  0.023  Âµs/op\ntest7_UsingJava8StreamApi          avgt  10   0.510 Â±  0.014  Âµs/op\ntest9_UsingApacheIterableMap       avgt  10   0.524 Â±  0.008  Âµs/op\ntest4_UsingKeySetAndForEach        avgt  10   0.816 Â±  0.026  Âµs/op\ntest5_UsingKeySetAndIterator       avgt  10   0.863 Â±  0.025  Âµs/op\ntest8_UsingJava8StreamApiParallel  avgt  10   5.552 Â±  0.185  Âµs/op\n</code></pre></li>\n<li><p>For a map with 10000 elements,  score 37.606 is the best</p>\n\n<pre><code>Benchmark                           Mode   Cnt  Score      Error   Units\ntest10_UsingEclipseMap              avgt   10    37.606 Â±   0.790  Âµs/op\ntest3_UsingForEachAndJava8          avgt   10    50.368 Â±   0.887  Âµs/op\ntest6_UsingForAndIterator           avgt   10    50.332 Â±   0.507  Âµs/op\ntest2_UsingForEachAndMapEntry       avgt   10    51.406 Â±   1.032  Âµs/op\ntest1_UsingWhileAndMapEntry         avgt   10    52.538 Â±   2.431  Âµs/op\ntest7_UsingJava8StreamApi           avgt   10    54.464 Â±   0.712  Âµs/op\ntest4_UsingKeySetAndForEach         avgt   10    79.016 Â±  25.345  Âµs/op\ntest5_UsingKeySetAndIterator        avgt   10    91.105 Â±  10.220  Âµs/op\ntest8_UsingJava8StreamApiParallel   avgt   10   112.511 Â±   0.365  Âµs/op\ntest9_UsingApacheIterableMap        avgt   10   125.714 Â±   1.935  Âµs/op\n</code></pre></li>\n<li><p>For a map with 100000 elements,  score 1184.767 is the best</p>\n\n<pre><code>Benchmark                          Mode   Cnt  Score        Error    Units\ntest1_UsingWhileAndMapEntry        avgt   10   1184.767 Â±   332.968  Âµs/op\ntest10_UsingEclipseMap             avgt   10   1191.735 Â±   304.273  Âµs/op\ntest2_UsingForEachAndMapEntry      avgt   10   1205.815 Â±   366.043  Âµs/op\ntest6_UsingForAndIterator          avgt   10   1206.873 Â±   367.272  Âµs/op\ntest8_UsingJava8StreamApiParallel  avgt   10   1485.895 Â±   233.143  Âµs/op\ntest5_UsingKeySetAndIterator       avgt   10   1540.281 Â±   357.497  Âµs/op\ntest4_UsingKeySetAndForEach        avgt   10   1593.342 Â±   294.417  Âµs/op\ntest3_UsingForEachAndJava8         avgt   10   1666.296 Â±   126.443  Âµs/op\ntest7_UsingJava8StreamApi          avgt   10   1706.676 Â±   436.867  Âµs/op\ntest9_UsingApacheIterableMap       avgt   10   3289.866 Â±  1445.564  Âµs/op\n</code></pre></li>\n</ol>\n\n<p>Graphs (performance tests depending on map size)</p>\n\n<p><a href=\"https://i.stack.imgur.com/17VGh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/17VGh.png\" alt=\"Enter image description here\"></a></p>\n\n<p>Table (perfomance tests depending on map size)</p>\n\n<pre><code>          100     600      1100     1600     2100\ntest10    0.333    1.631    2.752    5.937    8.024\ntest3     0.309    1.971    4.147    8.147   10.473\ntest6     0.372    2.190    4.470    8.322   10.531\ntest1     0.405    2.237    4.616    8.645   10.707\ntest2     0.376    2.267    4.809    8.403   10.910\ntest7     0.473    2.448    5.668    9.790   12.125\ntest9     0.565    2.830    5.952   13.220   16.965\ntest4     0.808    5.012    8.813   13.939   17.407\ntest5     0.810    5.104    8.533   14.064   17.422\ntest8     5.173   12.499   17.351   24.671   30.403\n</code></pre>\n\n<p>All tests are on <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/IterateThroughHashMapTest.java\" rel=\"noreferrer\">GitHub</a>.</p>\n"},{"owner":{"reputation":557,"user_id":4533984,"user_type":"registered","accept_rate":50,"profile_image":"https://lh5.googleusercontent.com/-skN5Kda7DlE/AAAAAAAAAAI/AAAAAAAAAJc/wVXgdFh2Mlg/photo.jpg?sz=128","display_name":"Sajad NasiriNezhad","link":"https://stackoverflow.com/users/4533984/sajad-nasirinezhad"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1460533666,"creation_date":1460533666,"answer_id":36591840,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<pre><code>           //Functional Oprations\n            Map&lt;String, String&gt; mapString = new HashMap&lt;&gt;();\n            mapString.entrySet().stream().map((entry) -&gt; {\n                String mapKey = entry.getKey();\n                return entry;\n            }).forEach((entry) -&gt; {\n                String mapValue = entry.getValue();\n            });\n\n            //Intrator\n            Map&lt;String, String&gt; mapString = new HashMap&lt;&gt;();\n            for (Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = mapString.entrySet().iterator(); it.hasNext();) {\n                Map.Entry&lt;String, String&gt; entry = it.next();\n                String mapKey = entry.getKey();\n                String mapValue = entry.getValue();\n            }\n\n            //Simple for loop\n            Map&lt;String, String&gt; mapString = new HashMap&lt;&gt;();\n            for (Map.Entry&lt;String, String&gt; entry : mapString.entrySet()) {\n                String mapKey = entry.getKey();\n                String mapValue = entry.getValue();\n\n            }\n</code></pre>\n"},{"owner":{"reputation":7521,"user_id":6931119,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/21edf33688ace0d81b66178964aee370?s=128&d=identicon&r=PG&f=1","display_name":"Witold Kaczurba","link":"https://stackoverflow.com/users/6931119/witold-kaczurba"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1601486813,"last_edit_date":1601486813,"creation_date":1477479418,"answer_id":40260450,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>The ordering will always depend on the specific map implementation.\nUsing JavaÂ 8 you can use either of these:</p>\n<pre><code>map.forEach((k,v) -&gt; { System.out.println(k + &quot;:&quot; + v); });\n</code></pre>\n<p>Or:</p>\n<pre><code>map.entrySet().forEach((e) -&gt; {\n            System.out.println(e.getKey() + &quot; : &quot; + e.getValue());\n        });\n</code></pre>\n<p>The result will be the same (same order). The entrySet backed by the map so you are getting the same order. The second one is handy as it allows you to use lambdas, e.g. if you want only to print only Integer objects that are greater than 5:</p>\n<pre><code>map.entrySet()\n    .stream()\n    .filter(e-&gt; e.getValue() &gt; 5)\n    .forEach(System.out::println);\n</code></pre>\n<p>The code below shows iteration through LinkedHashMap and normal HashMap (example). You will see difference in the order:</p>\n<pre><code>public class HMIteration {\n\n\n    public static void main(String[] args) {\n        Map&lt;Object, Object&gt; linkedHashMap = new LinkedHashMap&lt;&gt;();\n        Map&lt;Object, Object&gt; hashMap = new HashMap&lt;&gt;();\n\n        for (int i=10; i&gt;=0; i--) {\n            linkedHashMap.put(i, i);\n            hashMap.put(i, i);\n        }\n\n        System.out.println(&quot;LinkedHashMap (1): &quot;);\n        linkedHashMap.forEach((k,v) -&gt; { System.out.print(k + &quot; (#=&quot;+k.hashCode() + &quot;):&quot; + v + &quot;, &quot;); });\n\n        System.out.println(&quot;\\nLinkedHashMap (2): &quot;);\n\n        linkedHashMap.entrySet().forEach((e) -&gt; {\n            System.out.print(e.getKey() + &quot; : &quot; + e.getValue() + &quot;, &quot;);\n        });\n\n\n        System.out.println(&quot;\\n\\nHashMap (1): &quot;);\n        hashMap.forEach((k,v) -&gt; { System.out.print(k + &quot; (#:&quot;+k.hashCode() + &quot;):&quot; + v + &quot;, &quot;); });\n\n        System.out.println(&quot;\\nHashMap (2): &quot;);\n\n        hashMap.entrySet().forEach((e) -&gt; {\n            System.out.print(e.getKey() + &quot; : &quot; + e.getValue() + &quot;, &quot;);\n        });\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>LinkedHashMap (1):\n10 (#=10):10, 9 (#=9):9, 8 (#=8):8, 7 (#=7):7, 6 (#=6):6, 5 (#=5):5, 4 (#=4):4, 3 (#=3):3, 2 (#=2):2, 1 (#=1):1, 0 (#=0):0,\nLinkedHashMap (2):\n10 : 10, 9 : 9, 8 : 8, 7 : 7, 6 : 6, 5 : 5, 4 : 4, 3 : 3, 2 : 2, 1 : 1, 0 : 0,\nHashMap (1):\n0 (#:0):0, 1 (#:1):1, 2 (#:2):2, 3 (#:3):3, 4 (#:4):4, 5 (#:5):5, 6 (#:6):6, 7 (#:7):7, 8 (#:8):8, 9 (#:9):9, 10 (#:10):10,\nHashMap (2):\n0 : 0, 1 : 1, 2 : 2, 3 : 3, 4 : 4, 5 : 5, 6 : 6, 7 : 7, 8 : 8, 9 : 9, 10 : 10,\n</code></pre>\n"},{"owner":{"reputation":240,"user_id":1706743,"user_type":"registered","profile_image":"https://i.stack.imgur.com/2JgeL.jpg?s=128&g=1","display_name":"Rupendra Sharma","link":"https://stackoverflow.com/users/1706743/rupendra-sharma"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1491460575,"creation_date":1491460575,"answer_id":43247492,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<pre><code>package com.test;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Set;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n        map.put(\"ram\", \"ayodhya\");\n        map.put(\"krishan\", \"mathura\");\n        map.put(\"shiv\", \"kailash\");\n\n        System.out.println(\"********* Keys *********\");\n        Set&lt;String&gt; keys = map.keySet();\n        for (String key : keys) {\n            System.out.println(key);\n        }\n\n        System.out.println(\"********* Values *********\");\n        Collection&lt;String&gt; values = map.values();\n        for (String value : values) {\n            System.out.println(value);\n        }\n\n        System.out.println(\"***** Keys and Values (Using for each loop) *****\");\n        for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n            System.out.println(\"Key: \" + entry.getKey() + \"\\t Value: \"\n                    + entry.getValue());\n        }\n\n        System.out.println(\"***** Keys and Values (Using while loop) *****\");\n        Iterator&lt;Entry&lt;String, String&gt;&gt; entries = map.entrySet().iterator();\n        while (entries.hasNext()) {\n            Map.Entry&lt;String, String&gt; entry = (Map.Entry&lt;String, String&gt;) entries\n                    .next();\n            System.out.println(\"Key: \" + entry.getKey() + \"\\t Value: \"\n                    + entry.getValue());\n        }\n\n        System.out\n                .println(\"** Keys and Values (Using java 8 using lambdas )***\");\n        map.forEach((k, v) -&gt; System.out\n                .println(\"Key: \" + k + \"\\t value: \" + v));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1247,"user_id":3876382,"user_type":"registered","profile_image":"https://i.stack.imgur.com/R2ODc.jpg?s=128&g=1","display_name":"michaeak","link":"https://stackoverflow.com/users/3876382/michaeak"},"edited":false,"score":2,"creation_date":1544616047,"post_id":47122590,"comment_id":94337670,"content_license":"CC BY-SA 4.0","body":"Well, this is unnecessarily slow because first get the keys and then the entries. Alternative: Get the entrySets and then for each entryset the key and the value"}],"owner":{"reputation":1216,"user_id":6759926,"user_type":"registered","profile_image":"https://i.stack.imgur.com/eeQrl.jpg?s=128&g=1","display_name":"shivampip","link":"https://stackoverflow.com/users/6759926/shivampip"},"comment_count":1,"is_accepted":false,"score":10,"last_activity_date":1571345096,"last_edit_date":1571345096,"creation_date":1509891497,"answer_id":47122590,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>Iterating a <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Map.html\" rel=\"noreferrer\">Map</a> is very easy. </p>\n\n<pre><code>for(Object key: map.keySet()){\n   Object value= map.get(key);\n   //Do your stuff\n}\n</code></pre>\n\n<p>For instance, you have a <code>Map&lt;String, int&gt; data;</code></p>\n\n<pre><code>for(Object key: data.keySet()){\n  int value= data.get(key);\n}\n</code></pre>\n"},{"owner":{"reputation":343,"user_id":4745890,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-VcVRsccYCEU/AAAAAAAAAAI/AAAAAAAAAis/1YWdWeVJ3lo/photo.jpg?sz=128","display_name":"Utpal Kumar","link":"https://stackoverflow.com/users/4745890/utpal-kumar"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1521713405,"last_edit_date":1521713405,"creation_date":1510545135,"answer_id":47256829,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>There are a lot of ways to do this. Below is a few simple steps:</p>\n\n<p>Suppose you have one Map like:</p>\n\n<pre><code>Map&lt;String, Integer&gt; m = new HashMap&lt;String, Integer&gt;();\n</code></pre>\n\n<p>Then you can do something like the below to iterate over map elements.</p>\n\n<pre><code>// ********** Using an iterator ****************\nIterator&lt;Entry&lt;String, Integer&gt;&gt; me = m.entrySet().iterator();\nwhile(me.hasNext()){\n    Entry&lt;String, Integer&gt; pair = me.next();\n    System.out.println(pair.getKey() + \":\" + pair.getValue());\n}\n\n// *********** Using foreach ************************\nfor(Entry&lt;String, Integer&gt; me : m.entrySet()){\n    System.out.println(me.getKey() + \" : \" + me.getValue());\n}\n\n// *********** Using keySet *****************************\nfor(String s : m.keySet()){\n    System.out.println(s + \" : \" + m.get(s));\n}\n\n// *********** Using keySet and iterator *****************\nIterator&lt;String&gt; me = m.keySet().iterator();\nwhile(me.hasNext()){\n    String key = me.next();\n    System.out.println(key + \" : \" + m.get(key));\n}\n</code></pre>\n"},{"owner":{"reputation":1173,"user_id":7369238,"user_type":"registered","profile_image":"https://i.stack.imgur.com/GVyII.jpg?s=128&g=1","display_name":"ABHAY JOHRI","link":"https://stackoverflow.com/users/7369238/abhay-johri"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1523991820,"last_edit_date":1523991820,"creation_date":1523990765,"answer_id":49885402,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Use Java 8:</p>\n\n<pre><code>map.entrySet().forEach(entry -&gt; System.out.println(entry.getValue()));\n</code></pre>\n"},{"owner":{"reputation":9805,"user_id":512907,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/vIyJf.jpg?s=128&g=1","display_name":"bluehallu","link":"https://stackoverflow.com/users/512907/bluehallu"},"comment_count":0,"is_accepted":false,"score":24,"last_activity_date":1524141140,"creation_date":1524141140,"answer_id":49921231,"question_id":46898,"content_license":"CC BY-SA 3.0","body":"<p>Most compact with Java 8:</p>\n\n<pre><code>map.entrySet().forEach(System.out::println);\n</code></pre>\n"},{"owner":{"reputation":2261,"user_id":4813777,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oAMFb.png?s=128&g=1","display_name":"Taras Melnyk","link":"https://stackoverflow.com/users/4813777/taras-melnyk"},"comment_count":0,"is_accepted":false,"score":50,"last_activity_date":1589533770,"last_edit_date":1589533770,"creation_date":1525346707,"answer_id":50153908,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>With <strong>Java 8</strong>, you can iterate Map using forEach and lambda expression,</p>\n\n<pre><code>map.forEach((k, v) -&gt; System.out.println((k + \":\" + v)));\n</code></pre>\n"},{"owner":{"reputation":567,"user_id":5756557,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/965b778c12f6543adde584fcf96259ea?s=128&d=identicon&r=PG","display_name":"anandchaugule","link":"https://stackoverflow.com/users/5756557/anandchaugule"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1601467716,"last_edit_date":1601467716,"creation_date":1543314287,"answer_id":53497541,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>An effective iterative solution over a Map is a <code>for</code> loop from Java 5 through Java 7. Here it is:</p>\n<pre><code>for (String key : phnMap.keySet()) {\n    System.out.println(&quot;Key: &quot; + key + &quot; Value: &quot; + phnMap.get(key));\n}\n</code></pre>\n<p>From Java 8 you can use a lambda expression to iterate over a Map. It is an enhanced <code>forEach</code></p>\n<pre><code>phnMap.forEach((k,v) -&gt; System.out.println(&quot;Key: &quot; + k + &quot; Value: &quot; + v));\n</code></pre>\n<p>If you want to write a conditional for lambda you can write it like this:</p>\n<pre><code>phnMap.forEach((k,v)-&gt;{\n    System.out.println(&quot;Key: &quot; + k + &quot; Value: &quot; + v);\n    if(&quot;abc&quot;.equals(k)){\n        System.out.println(&quot;Hello abc&quot;);\n    }\n});\n</code></pre>\n"},{"owner":{"user_type":"does_not_exist","display_name":"user1098063"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1559764607,"creation_date":1559764607,"answer_id":56467159,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>I like to concat a counter, then save the final value of the counter;</p>\n\n<pre><code>int counter = 0;\nHashMap&lt;String, String&gt; m = new HashMap&lt;String, String&gt;();\nfor(int i = 0;i&lt;items.length;i++)\n{\nm.put(\"firstname\"+i, items.get(i).getFirstName());\ncounter = i;\n}\n\nm.put(\"recordCount\",String.valueOf(counter));\n</code></pre>\n\n<p>Then when you want to retrieve:</p>\n\n<pre><code>int recordCount = Integer.parseInf(m.get(\"recordCount\"));\nfor(int i =0 ;i&lt;recordCount;i++)\n{\nSystem.out.println(\"First Name :\" + m.get(\"firstname\"+i));\n}\n</code></pre>\n"},{"owner":{"reputation":1931,"user_id":5256337,"user_type":"registered","profile_image":"https://i.stack.imgur.com/d3GFu.jpg?s=128&g=1","display_name":"Lova Chittumuri","link":"https://stackoverflow.com/users/5256337/lova-chittumuri"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1564731038,"creation_date":1564731038,"answer_id":57321787,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>Using  Java 7</p>\n</blockquote>\n\n<pre><code>Map&lt;String,String&gt; sampleMap = new HashMap&lt;&gt;();\nfor (sampleMap.Entry&lt;String,String&gt; entry : sampleMap.entrySet()) {\n    String key = entry.getKey();\n    String value = entry.getValue();\n\n    /* your Code as per the Business Justification  */\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Using Java 8</p>\n</blockquote>\n\n<pre><code>Map&lt;String,String&gt; sampleMap = new HashMap&lt;&gt;();\n\nsampleMap.forEach((k, v) -&gt; System.out.println(\"Key is :  \" + k + \" Value is :  \" + v));\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2208,"user_id":991710,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/f660a9ad68d31e30b2d7b153f7eb5bc5?s=128&d=identicon&r=PG","display_name":"user991710","link":"https://stackoverflow.com/users/991710/user991710"},"edited":false,"score":1,"creation_date":1581878541,"post_id":58574145,"comment_id":106575127,"content_license":"CC BY-SA 4.0","body":"Late comment on an answer that&#39;s also late to the party (but very informative). +1 from me for mentioning <code>EnumMap</code>, since it&#39;s the first time I&#39;ve heard of it. There&#39;s probably many cases where this might come in handy."}],"owner":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"comment_count":1,"is_accepted":false,"score":20,"last_activity_date":1586756346,"last_edit_date":1586756346,"creation_date":1572119097,"answer_id":58574145,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>If I have an object implementing the Map interface in Java and I wish to iterate over every pair contained within it, what is the most efficient way of going through the map?</p>\n</blockquote>\n\n<p>If efficiency of looping the keys is a priority for your app, then choose a <code>Map</code> implementation that maintains the keys in your desired order.</p>\n\n<blockquote>\n  <p>Will the ordering of elements depend on the specific map implementation that I have for the interface?</p>\n</blockquote>\n\n<p>Yes, absolutely. </p>\n\n<ul>\n<li>Some <code>Map</code> implementations promise a certain iteration order, others do not.</li>\n<li>Different implementations of <code>Map</code> maintain different ordering of the key-value pairs. </li>\n</ul>\n\n<p>See this table I created summarizing the various <code>Map</code> implementations bundled with Java 11. Specifically, notice the <em>iteration order</em> column. Click/tap to zoom.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4z5Fb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4z5Fb.png\" alt=\"Table of map implementations in Java 11, comparing their features\"></a></p>\n\n<p>You can see there are <strong>four <code>Map</code> implementations maintaining an order</strong>:</p>\n\n<ul>\n<li><code>TreeMap</code></li>\n<li><code>ConcurrentSkipListMap</code> </li>\n<li><code>LinkedHashMap</code></li>\n<li><code>EnumMap</code></li>\n</ul>\n\n<h2><code>NavigableMap</code> interface</h2>\n\n<p>Two of those implement the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableMap.html\" rel=\"noreferrer\"><code>NavigableMap</code></a> interface: <code>TreeMap</code> &amp; <code>ConcurrentSkipListMap</code>. </p>\n\n<p>The older <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/SortedMap.html\" rel=\"noreferrer\"><code>SortedMap</code></a> interface is effectively supplanted by the newer <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/NavigableMap.html\" rel=\"noreferrer\"><code>NavigableMap</code></a> interface. But you may find 3rd-party implementations implementing the older interface only.</p>\n\n<h2>Natural order</h2>\n\n<p>If you want a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a> that keeps its pairs arranged by the ânatural orderâ of the key, use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeMap.html\" rel=\"noreferrer\"><code>TreeMap</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"noreferrer\"><code>ConcurrentSkipListMap</code></a>. The term ânatural orderâ means the class of the keys implements <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html\" rel=\"noreferrer\"><code>Comparable</code></a>. The value returned by the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Comparable.html#compareTo(T)\" rel=\"noreferrer\"><code>compareTo</code></a> method is used for comparison in sorting.</p>\n\n<h2>Custom order</h2>\n\n<p>If you want to specify a custom sorting routine for your keys to be used in maintaining a sorted order, pass a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Comparator.html\" rel=\"noreferrer\"><code>Comparator</code></a> implementation appropriate to the class of your keys. Use either <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeMap.html\" rel=\"noreferrer\"><code>TreeMap</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"noreferrer\"><code>ConcurrentSkipListMap</code></a>, passing your <code>Comparator</code>. </p>\n\n<h2>Original insertion order</h2>\n\n<p>If you want the pairs of your map to be kept in their original order in which you inserted them into the map, use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a>. </p>\n\n<h2>Enum-definition order</h2>\n\n<p>If you are using an enum such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/DayOfWeek.html\" rel=\"noreferrer\"><code>DayOfWeek</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Month.html\" rel=\"noreferrer\"><code>Month</code></a> as your keys, use the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/EnumMap.html\" rel=\"noreferrer\"><code>EnumMap</code></a> class. Not only is this class <em>highly</em> optimized to use very little memory and run very fast, it maintains your pairs in the order defined by the enum. For <code>DayOfWeek</code>, for example, the key of <code>DayOfWeek.MONDAY</code> will be first found when iterated, and the key of <code>DayOfWeek.SUNDAY</code> will be last.</p>\n\n<h2>Other considerations</h2>\n\n<p>In choosing a <code>Map</code> implementation, also consider:</p>\n\n<ul>\n<li>NULLs. Some implementations forbid/accept a NULL as key and/or value. </li>\n<li>Concurrency. If you are manipulating the map across threads, you must use an implementation that supports concurrency. Or wrap the map with <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#synchronizedMap(java.util.Map)\" rel=\"noreferrer\"><code>Collections::synchronizedMap</code></a> (less preferable). </li>\n</ul>\n\n<p>Both of these considerations are covered in the graphic table above.</p>\n"},{"comments":[{"owner":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"edited":false,"score":0,"creation_date":1578297081,"post_id":59608364,"comment_id":105380313,"content_license":"CC BY-SA 4.0","body":"This was covered in the <a href=\"https://stackoverflow.com/a/57321787/642706\">Answer by Lova Chittumuri</a>. Also covered as item # 3 in the highly-upvoted <a href=\"https://stackoverflow.com/a/35558955/642706\">Answer by Viacheslav Vedenin</a>."},{"owner":{"reputation":238,"user_id":3659492,"user_type":"registered","accept_rate":78,"profile_image":"https://graph.facebook.com/100001600262099/picture?type=large","display_name":"Mahbubur Rahman Khan","link":"https://stackoverflow.com/users/3659492/mahbubur-rahman-khan"},"edited":false,"score":0,"creation_date":1583445734,"post_id":59608364,"comment_id":107129815,"content_license":"CC BY-SA 4.0","body":"But only available in API label 24"}],"owner":{"reputation":2758,"user_id":4332316,"user_type":"registered","accept_rate":20,"profile_image":"https://i.stack.imgur.com/Lqx6f.png?s=128&g=1","display_name":"Ali Akram","link":"https://stackoverflow.com/users/4332316/ali-akram"},"comment_count":2,"is_accepted":false,"score":7,"last_activity_date":1578296963,"last_edit_date":1578296963,"creation_date":1578296646,"answer_id":59608364,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<h1><code>Map.forEach</code></h1>\n\n<p>What about simply using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#forEach(java.util.function.BiConsumer)\" rel=\"noreferrer\"><code>Map::forEach</code></a> where both the key and the value are passed to your <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/BiConsumer.html\" rel=\"noreferrer\"><code>BiConsumer</code></a>?</p>\n\n<pre><code>map.forEach((k,v)-&gt;{\n    System.out.println(k+\"-&gt;\"+v);\n});\n</code></pre>\n"},{"owner":{"reputation":1483,"user_id":3705861,"user_type":"registered","profile_image":"https://i.stack.imgur.com/QZvw8.jpg?s=128&g=1","display_name":"Younes EO","link":"https://stackoverflow.com/users/3705861/younes-eo"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1592169562,"creation_date":1592169562,"answer_id":62378360,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>Since Java 10, you can use local variable inference (a.k.a. \"var\") to make a lot of the already available answers less bloated. For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>for (var entry : map.entrySet()) {\n    System.out.println(entry.getKey() + \" : \" + entry.getValue());\n}\n</code></pre>\n"},{"owner":{"reputation":130,"user_id":9363081,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/090477ff046c0a1d81e6cc76a345532a?s=128&d=identicon&r=PG&f=1","display_name":"Dubstep","link":"https://stackoverflow.com/users/9363081/dubstep"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1600210429,"creation_date":1600210429,"answer_id":63910874,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<pre><code>Map&lt;String, String&gt; map = \nfor (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n    MapKey = entry.getKey() \n    MapValue = entry.getValue();\n}\n</code></pre>\n"},{"owner":{"reputation":387,"user_id":9898251,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e795cc299ab4b7e5d4fbe4a2853ce2e7?s=128&d=identicon&r=PG&f=1","display_name":"Badri Paudel","link":"https://stackoverflow.com/users/9898251/badri-paudel"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1610381067,"creation_date":1610381067,"answer_id":65670377,"question_id":46898,"content_license":"CC BY-SA 4.0","body":"<p>You can search for the key and with the help of the key you can find the associated value of the map as map has <strong>unique key</strong>, see what happens when key is duplicate <a href=\"https://stackoverflow.com/a/20537942/9898251\">here</a> or <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#put%28K,%20V%29\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Demo map :</p>\n<pre><code> Map&lt;String, String&gt; map = new HashMap();\n  map.put(&quot;name&quot;, &quot;Badri Paudel&quot;);\n  map.put(&quot;age&quot;, &quot;23&quot;);\n  map.put(&quot;address&quot;, &quot;KTM&quot;);\n  map.put(&quot;faculty&quot;, &quot;BE&quot;);\n  map.put(&quot;major&quot;, &quot;CS&quot;);\n  map.put(&quot;head&quot;, &quot;AVD&quot;);\n \n</code></pre>\n<p>To get key only, you can use <code>map.keySet();</code> like this :</p>\n<pre><code>for(String key : map.keySet()) {\n      System.out.println(key);\n  }\n</code></pre>\n<p>To get value only , you can use <code>map.values();</code> like this:</p>\n<pre><code>      for(String value : map.values()) {\n      System.out.println(value);\n  }\n</code></pre>\n<p>To get both key and its value you still can use <code>map.keySet();</code> and get its corresponding value, like this :</p>\n<pre><code> //this prints the key value pair\n  for (String k : map.keySet()) {\n        System.out.println(k + &quot; &quot; + map.get(k) + &quot; &quot;);\n    }\n</code></pre>\n<p><code>map.get(key)</code> gives the value pointed by that key.</p>\n"}],"owner":{"reputation":33897,"user_id":4807,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/7453d8a240de4b8d26869aa92743bb8e?s=128&d=identicon&r=PG","display_name":"iMack","link":"https://stackoverflow.com/users/4807/imack"},"comment_count":2,"is_answered":true,"view_count":2653666,"protected_date":1365576855,"accepted_answer_id":46908,"answer_count":45,"score":3501,"last_activity_date":1610381067,"creation_date":1220649168,"last_edit_date":1583649073,"question_id":46898,"link":"https://stackoverflow.com/questions/46898/how-do-i-efficiently-iterate-over-each-entry-in-a-java-map","title":"How do I efficiently iterate over each entry in a Java Map?","body":"<p>If I have an object implementing the <code>Map</code> interface in Java and I wish to iterate over every pair contained within it,  what is the most efficient way of going through the map?</p>\n\n<p>Will the ordering of elements depend on the specific map implementation that I have for the interface?</p>\n"},{"tags":["java","loops","hashmap","iteration"],"comments":[{"owner":{"reputation":53600,"user_id":84916,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/IaDb2.jpg?s=128&g=1","display_name":"burntsugar","link":"https://stackoverflow.com/users/84916/burntsugar"},"edited":false,"score":4,"creation_date":1246406754,"post_id":1066589,"comment_id":878987,"content_license":"CC BY-SA 2.5","body":"I need to get the keys and values and add them to a multidimensional array"},{"owner":{"reputation":3402,"user_id":1503859,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/4bcbf19e148dc37a98be5ea8311c4770?s=128&d=identicon&r=PG&f=1","display_name":"Nitin Mahesh","link":"https://stackoverflow.com/users/1503859/nitin-mahesh"},"edited":false,"score":6,"creation_date":1437849205,"post_id":1066589,"comment_id":51206923,"content_license":"CC BY-SA 3.0","body":"In Java 8 using Lambda Expression : <a href=\"http://stackoverflow.com/a/25616206/1503859\">stackoverflow.com/a/25616206/1503859</a>"}],"answers":[{"comments":[{"owner":{"reputation":2039,"user_id":247573,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/d38468649b64bbd35be0f1154a2d63d9?s=128&d=identicon&r=PG","display_name":"Benjamin Wootton","link":"https://stackoverflow.com/users/247573/benjamin-wootton"},"edited":false,"score":38,"creation_date":1292491322,"post_id":1066603,"comment_id":4872024,"content_license":"CC BY-SA 2.5","body":"Though old style, this will help avoid ConcurrentModificationExceptions over the new foreach style in the answers below.  You can for instance remove via the seperate iterator."},{"owner":{"reputation":6334,"user_id":1000194,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/a77c8ac040705a145c1b2eb556ca1728?s=128&d=identicon&r=PG","display_name":"fresh_dev","link":"https://stackoverflow.com/users/1000194/fresh-dev"},"edited":false,"score":462,"creation_date":1319533018,"post_id":1066603,"comment_id":9625527,"content_license":"CC BY-SA 3.0","body":"@karim79 what do you think about the following way: <code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(); for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) {     System.out.println(&quot;Key = &quot; + entry.getKey() + &quot;, Value = &quot; + entry.getValue()); }</code>"},{"owner":{"reputation":999,"user_id":540128,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/62054833895a3df695f9854d8dee6a9f?s=128&d=identicon&r=PG","display_name":"vim","link":"https://stackoverflow.com/users/540128/vim"},"edited":false,"score":14,"creation_date":1326188828,"post_id":1066603,"comment_id":10980396,"content_license":"CC BY-SA 3.0","body":"by calling &#39;it.remove(); &#39; you are emptying the map making it not reusable if this map was a class variable. Do you have any solution to that?"},{"owner":{"reputation":6777,"user_id":597419,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/bcf048ba341ced9fe6f427467d26e8cb?s=128&d=identicon&r=PG","display_name":"Danny","link":"https://stackoverflow.com/users/597419/danny"},"reply_to_user":{"reputation":999,"user_id":540128,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/62054833895a3df695f9854d8dee6a9f?s=128&d=identicon&r=PG","display_name":"vim","link":"https://stackoverflow.com/users/540128/vim"},"edited":false,"score":27,"creation_date":1327604871,"post_id":1066603,"comment_id":11315538,"content_license":"CC BY-SA 3.0","body":"@vimukthi what do you mean a solution to that? Just remove the <code>it.remove();</code> line."},{"owner":{"reputation":4444,"user_id":48839,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/48ba428b5ea2c890e8e9a21a37863ecc?s=128&d=identicon&r=PG","display_name":"Chad Okere","link":"https://stackoverflow.com/users/48839/chad-okere"},"edited":false,"score":114,"creation_date":1327771783,"post_id":1066603,"comment_id":11350809,"content_license":"CC BY-SA 3.0","body":"The for <code>(Map.Entry&lt;String, Object&gt; cursor : map.entrySet()) {...}</code> syntax is much better."},{"owner":{"reputation":5659,"user_id":1352530,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/ECK2F.jpg?s=128&g=1","display_name":"Whimusical","link":"https://stackoverflow.com/users/1352530/whimusical"},"edited":false,"score":2,"creation_date":1342701704,"post_id":1066603,"comment_id":15291396,"content_license":"CC BY-SA 3.0","body":"Is there any difference on chances of ConcurrentModificationExceptions   between both syntaxs in terms of calling remove() or not? Some answers imply contradictory assertions (first vs fourth comments)"},{"owner":{"reputation":5228,"user_id":801790,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/96845ef83ad5cd6109cdaf83633f7e5d?s=128&d=identicon&r=PG","display_name":"etlds","link":"https://stackoverflow.com/users/801790/etlds"},"edited":false,"score":4,"creation_date":1362512239,"post_id":1066603,"comment_id":21475283,"content_license":"CC BY-SA 3.0","body":"Iterator interface is generic since 1.2. It need to be Iterator&lt;E&gt;"},{"owner":{"reputation":3314,"user_id":903998,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1","display_name":"Victor","link":"https://stackoverflow.com/users/903998/victor"},"edited":false,"score":0,"creation_date":1393602402,"post_id":1066603,"comment_id":33521101,"content_license":"CC BY-SA 3.0","body":"I consider that the answer of arvnid, despite is just a copy/paste or not. (I agree that is ethical to give the proper credits to the one who belongs)"},{"owner":{"reputation":1081,"user_id":3425114,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/8e217893d7cb524f08559af7e5581afe?s=128&d=identicon&r=PG&f=1","display_name":"Puru--","link":"https://stackoverflow.com/users/3425114/puru"},"edited":false,"score":7,"creation_date":1397414558,"post_id":1066603,"comment_id":35213273,"content_license":"CC BY-SA 3.0","body":"I landed up here accidentally, why did we do <code>Iterator.remove()</code> here? OP just asked for a best way for iterating over a <code>Map</code>"},{"owner":{"reputation":1300,"user_id":2266428,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/W8K6m.png?s=128&g=1","display_name":"J E Carter II","link":"https://stackoverflow.com/users/2266428/j-e-carter-ii"},"edited":false,"score":0,"creation_date":1400079995,"post_id":1066603,"comment_id":36338958,"content_license":"CC BY-SA 3.0","body":"Note that it.remove will not work with unmodifiable Maps, like System.getenv() return String Map."},{"owner":{"reputation":4773,"user_id":2482582,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/yQkZE.jpg?s=128&g=1","display_name":"Moebius","link":"https://stackoverflow.com/users/2482582/moebius"},"edited":false,"score":0,"creation_date":1409749981,"post_id":1066603,"comment_id":40070825,"content_license":"CC BY-SA 3.0","body":"The full type of iterator is : import java.util.Iterator;"},{"owner":{"reputation":1369,"user_id":1935753,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/069c9c1b8c31ac76cbe4b362f13ccbe5?s=128&d=identicon&r=PG","display_name":"Hele","link":"https://stackoverflow.com/users/1935753/hele"},"edited":false,"score":2,"creation_date":1418620768,"post_id":1066603,"comment_id":43389311,"content_license":"CC BY-SA 3.0","body":"@harto&#39;s answer is a better one as it tells the reader how to actually use this in a variety of cases. Your solution&#39;s application range is tiny. Very tiny."},{"owner":{"reputation":2733,"user_id":5152497,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/31173db9fa0458111656bb2c9cfa6a09?s=128&d=identicon&r=PG&f=1","display_name":"J&#252;rgen K.","link":"https://stackoverflow.com/users/5152497/j%c3%bcrgen-k"},"edited":false,"score":0,"creation_date":1445276325,"post_id":1066603,"comment_id":54245492,"content_license":"CC BY-SA 3.0","body":"Don&#39;t you jump over the first entry using the &quot;linewhile (it.hasNext())&quot;?"},{"owner":{"reputation":8628,"user_id":2714301,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG","display_name":"Jwan622","link":"https://stackoverflow.com/users/2714301/jwan622"},"edited":false,"score":0,"creation_date":1452182607,"post_id":1066603,"comment_id":57064673,"content_license":"CC BY-SA 3.0","body":"So the big picture steps seem to be 1. convert to a set using entrySet 2. turn it into an iterator and 3. call hasNext and turn each next Object into a Map.Entry Object?"},{"owner":{"reputation":6164,"user_id":1199931,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/e4480d84d8fb7ff925de83d8dcffe855?s=128&d=identicon&r=PG","display_name":"ashishduh","link":"https://stackoverflow.com/users/1199931/ashishduh"},"edited":false,"score":4,"creation_date":1480702940,"post_id":1066603,"comment_id":69088755,"content_license":"CC BY-SA 3.0","body":"Everyone saying that <code>for (Map.Entry&lt;String, Object&gt; cursor : map.entrySet())</code> is better than this is ignoring the fact that you will still receive a <code>ConcurrentModificationException</code> using that method.  The selected answer remains the best method to iterate through a <code>Map</code>."},{"owner":{"reputation":139,"user_id":3897771,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f231b3c03aa88bc684b785104423bcb7?s=128&d=identicon&r=PG","display_name":"apraetor","link":"https://stackoverflow.com/users/3897771/apraetor"},"reply_to_user":{"reputation":2733,"user_id":5152497,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/31173db9fa0458111656bb2c9cfa6a09?s=128&d=identicon&r=PG&f=1","display_name":"J&#252;rgen K.","link":"https://stackoverflow.com/users/5152497/j%c3%bcrgen-k"},"edited":false,"score":0,"creation_date":1494540014,"post_id":1066603,"comment_id":74885742,"content_license":"CC BY-SA 3.0","body":"@J&#252;rgenK. No, <code>it.hasNext()</code> returns a boolean based on whether the iterator has another element beyond the current one but does not advance the iterator&#39;s state. The iterator isn&#39;t advanced to the next element until <code>it.next()</code> is called."},{"owner":{"reputation":43194,"user_id":106261,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/c6e6d6c8ca22de9d91745bce5b8e0399?s=128&d=identicon&r=PG","display_name":"NimChimpsky","link":"https://stackoverflow.com/users/106261/nimchimpsky"},"reply_to_user":{"reputation":1905,"user_id":70405,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/0b3885b5364a53cb8bbdaf498a32d0d3?s=128&d=identicon&r=PG","display_name":"Alex","link":"https://stackoverflow.com/users/70405/alex"},"edited":false,"score":0,"creation_date":1496198228,"post_id":1066603,"comment_id":75556970,"content_license":"CC BY-SA 3.0","body":"@Alex yeah me too"},{"owner":{"reputation":2027,"user_id":270654,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG","display_name":"nemetroid","link":"https://stackoverflow.com/users/270654/nemetroid"},"reply_to_user":{"reputation":6164,"user_id":1199931,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/e4480d84d8fb7ff925de83d8dcffe855?s=128&d=identicon&r=PG","display_name":"ashishduh","link":"https://stackoverflow.com/users/1199931/ashishduh"},"edited":false,"score":1,"creation_date":1498724550,"post_id":1066603,"comment_id":76619750,"content_license":"CC BY-SA 3.0","body":"@ashishduh The selected answer is only the best in the <i>special case</i> where you need to modify the map during iteration. For all other uses, using an enhanced for loop is preferable."},{"owner":{"reputation":1069,"user_id":3605161,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/3f207c6dc42b5ad3a4dc3e670b211aee?s=128&d=identicon&r=PG&f=1","display_name":"phil","link":"https://stackoverflow.com/users/3605161/phil"},"edited":false,"score":0,"creation_date":1499348950,"post_id":1066603,"comment_id":76876663,"content_license":"CC BY-SA 3.0","body":"This API is not intuitive, so I google this answer repeatedly and was at least 20 times on this answer!!"},{"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"reply_to_user":{"reputation":5228,"user_id":801790,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/96845ef83ad5cd6109cdaf83633f7e5d?s=128&d=identicon&r=PG","display_name":"etlds","link":"https://stackoverflow.com/users/801790/etlds"},"edited":false,"score":0,"creation_date":1503338246,"post_id":1066603,"comment_id":78564009,"content_license":"CC BY-SA 3.0","body":"@etlds Actually, Java 1.2 introduced Iterator, but didn&#39;t have generics back then. Generics were only added in 1.5."},{"owner":{"reputation":2271,"user_id":5117236,"user_type":"registered","accept_rate":84,"profile_image":"https://lh3.googleusercontent.com/-G6BMgWAersY/AAAAAAAAAAI/AAAAAAAAGG4/wnThVo0uWoA/photo.jpg?sz=128","display_name":"Impulse The Fox","link":"https://stackoverflow.com/users/5117236/impulse-the-fox"},"edited":false,"score":1,"creation_date":1505721145,"post_id":1066603,"comment_id":79510889,"content_license":"CC BY-SA 3.0","body":"Please do not use Iterator anymore."},{"owner":{"reputation":3257,"user_id":1324802,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/41K0O.jpg?s=128&g=1","display_name":"Androidcoder","link":"https://stackoverflow.com/users/1324802/androidcoder"},"edited":false,"score":0,"creation_date":1508709381,"post_id":1066603,"comment_id":80706240,"content_license":"CC BY-SA 3.0","body":"i get unchecked cast and unchecked assignment warnings for &#39;(Map.Entry)it.next()&#39;. I did add a check to Map,Entry: &#39;Map.Entry&lt;Integer,MyObject&gt; entry&#39; to avoid other issues."},{"owner":{"reputation":1040,"user_id":3878948,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/a128928fb7879cd4d568769a4a49428e?s=128&d=identicon&r=PG&f=1","display_name":"Rishabh Agarwal","link":"https://stackoverflow.com/users/3878948/rishabh-agarwal"},"edited":false,"score":0,"creation_date":1512542759,"post_id":1066603,"comment_id":82295389,"content_license":"CC BY-SA 3.0","body":"Since <i>Map</i> is not under <b>Iterator</b> class, <i>how can you use iterator with map ?</i> Only List, Queue and Set are iterable."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1517957857,"post_id":1066603,"comment_id":84304714,"content_license":"CC BY-SA 3.0","body":"Perhaps update this for Java 8? (E.g. providing two versions, one for before Java 8 and one that only works on Java 8.)"},{"owner":{"reputation":722,"user_id":2083957,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/255411eabb91a1c9d7d87c3a2fa7db2b?s=128&d=identicon&r=PG&f=1","display_name":"technazi","link":"https://stackoverflow.com/users/2083957/technazi"},"edited":false,"score":0,"creation_date":1524110805,"post_id":1066603,"comment_id":86840740,"content_license":"CC BY-SA 3.0","body":"ConcurrentHashMap is an implementation of ConcurrentMap interface. ConcurrentMap Interface extends Map Interface. The confusion is because the question specifically asked for HashMap. HashMap is an implementation of Map interface.   It is always better to declare a ConcurrentHashMap like:  Map&lt;String,String&gt; myMap = new ConcurrentHashMap&lt;String,String&gt;();  instead of :   ConcurrentHashMap&lt;String,String&gt; myMap = new ConcurrentHashMap&lt;String,String&gt;();  This first practice allows extensibility. That is the reason this is a mature answer."},{"owner":{"reputation":381,"user_id":1800181,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/bfce3fc9139dee8f038ffe042797ddec?s=128&d=identicon&r=PG","display_name":"Mader Levap","link":"https://stackoverflow.com/users/1800181/mader-levap"},"edited":false,"score":1,"creation_date":1551445541,"post_id":1066603,"comment_id":96653283,"content_license":"CC BY-SA 4.0","body":"I consider it bad answer. OP was asking just for iterating over map, not how to modify map during iteration."},{"owner":{"reputation":974,"user_id":4722577,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/df632265f05cfef80f4d3da89de8cd7b?s=128&d=identicon&r=PG&f=1","display_name":"CAM_344","link":"https://stackoverflow.com/users/4722577/cam-344"},"reply_to_user":{"reputation":381,"user_id":1800181,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/bfce3fc9139dee8f038ffe042797ddec?s=128&d=identicon&r=PG","display_name":"Mader Levap","link":"https://stackoverflow.com/users/1800181/mader-levap"},"edited":false,"score":1,"creation_date":1588000377,"post_id":1066603,"comment_id":108724016,"content_license":"CC BY-SA 4.0","body":"@MaderLevap I disagree.  He&#39;s showing the safest way of iterating over a map.  The remove(); is an example of something that could cause exceptions on other types of lists/collections that would be avoided using this method."},{"owner":{"reputation":314,"user_id":11323252,"user_type":"registered","profile_image":"https://i.stack.imgur.com/14ACB.jpg?s=128&g=1","display_name":"Rohit Chaurasiya","link":"https://stackoverflow.com/users/11323252/rohit-chaurasiya"},"edited":false,"score":0,"creation_date":1607284208,"post_id":1066603,"comment_id":115217818,"content_license":"CC BY-SA 4.0","body":"import java.util.*;  class MapToList { public static void main(String args[]){ Map&lt;Integer,String&gt; map = new HashMap&lt;Integer,String&gt;(); map.put(1,&quot;Rohit&quot;); map.put(2,&quot;Rahul&quot;); map.put(3,&quot;Mohit&quot;);  Iterator itr = map.entrySet().iterator(); while(itr.hasNext()) {  Map.Entry it = (Map.Entry)itr.next();  System.out.println(&quot;Printing map&quot; + it.getKey() + it.getValue()) ; } } }"}],"owner":{"reputation":324818,"user_id":70393,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/tTRDl.jpg?s=128&g=1","display_name":"karim79","link":"https://stackoverflow.com/users/70393/karim79"},"comment_count":28,"is_accepted":true,"score":3360,"last_activity_date":1524243395,"last_edit_date":1524243395,"creation_date":1246404445,"answer_id":1066603,"question_id":1066589,"content_license":"CC BY-SA 3.0","body":"<p>Iterate through the <a href=\"http://www.java2s.com/Code/JavaAPI/java.util/HashtableentrySet.htm\" rel=\"noreferrer\"><code>entrySet()</code></a> like so:</p>\n\n<pre><code>public static void printMap(Map mp) {\n    Iterator it = mp.entrySet().iterator();\n    while (it.hasNext()) {\n        Map.Entry pair = (Map.Entry)it.next();\n        System.out.println(pair.getKey() + \" = \" + pair.getValue());\n        it.remove(); // avoids a ConcurrentModificationException\n    }\n}\n</code></pre>\n\n<p>Read more about <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a>.</p>\n"},{"comments":[{"owner":{"reputation":1907,"user_id":751077,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/0b38829fe4fedee43c2f3df36a85fff1?s=128&d=identicon&r=PG","display_name":"DaMainBoss","link":"https://stackoverflow.com/users/751077/damainboss"},"edited":false,"score":3,"creation_date":1311704297,"post_id":1066607,"comment_id":8122365,"content_license":"CC BY-SA 3.0","body":"So how to do loop through 2 maps simultaneously? using the entrySet method? I tried using &amp;&amp; but it ddnt work"},{"owner":{"reputation":84005,"user_id":86463,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/7f3df7269d897d0e9798b29cbe768ebc?s=128&d=identicon&r=PG","display_name":"harto","link":"https://stackoverflow.com/users/86463/harto"},"edited":false,"score":2,"creation_date":1311739707,"post_id":1066607,"comment_id":8129257,"content_license":"CC BY-SA 3.0","body":"Use two iterators. See the accepted answer for example usage of an iterator."},{"owner":{"reputation":49377,"user_id":32453,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG","display_name":"rogerdpack","link":"https://stackoverflow.com/users/32453/rogerdpack"},"edited":false,"score":21,"creation_date":1317856472,"post_id":1066607,"comment_id":9320128,"content_license":"CC BY-SA 3.0","body":"It&#39;s only more efficient to use entrySet when you need both keys and values.  If you only need one or the other then just use that one: <a href=\"http://stackoverflow.com/questions/3870064/performance-considerations-for-keyset-and-entryset-of-map/6927754#6927754\" title=\"performance considerations for keyset and entryset of map\">stackoverflow.com/questions/3870064/&hellip;</a>"},{"owner":{"reputation":19829,"user_id":416369,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/a62fe70596b17d431234e25a95965875?s=128&d=identicon&r=PG","display_name":"sactiw","link":"https://stackoverflow.com/users/416369/sactiw"},"edited":false,"score":4,"creation_date":1390552030,"post_id":1066607,"comment_id":32149773,"content_license":"CC BY-SA 3.0","body":"One more important point, the Set returned by keySet() and Collection returned by values() are both backed by the original Map. That is, if you make any modification in them they will be reflected back in the Map, however, both of them don&#39;t support add() and addAll() methods i.e. you can&#39;t add new key to the Set or new value in the Collection."},{"owner":{"reputation":13401,"user_id":1763602,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/uZ8dA.gif?s=128&g=1","display_name":"Marco Sulla","link":"https://stackoverflow.com/users/1763602/marco-sulla"},"edited":false,"score":0,"creation_date":1492505677,"post_id":1066607,"comment_id":73990510,"content_license":"CC BY-SA 3.0","body":"About getting both values and keys, it&#39;s not just simpler to use the first <code>foreach</code> example and get the value inside the loop, with <code>value = map.get(key)</code>? Is the performance of <code>entrySet</code> more high?"},{"owner":{"reputation":5914,"user_id":1127972,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1","display_name":"doug65536","link":"https://stackoverflow.com/users/1127972/doug65536"},"reply_to_user":{"reputation":13401,"user_id":1763602,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/uZ8dA.gif?s=128&g=1","display_name":"Marco Sulla","link":"https://stackoverflow.com/users/1763602/marco-sulla"},"edited":false,"score":0,"creation_date":1502057133,"post_id":1066607,"comment_id":78034076,"content_license":"CC BY-SA 3.0","body":"@MarcoSulla Performance questions like that depend, you should measure and see in cases that matter. It is likely that using <code>entrySet</code> is faster because it can avoid doing a lookup for every entry. The implementation of the particular <code>Map</code> determines which way is better and by how much. The GC pressure at that point could also be a factor."},{"owner":{"reputation":1040,"user_id":3878948,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/a128928fb7879cd4d568769a4a49428e?s=128&d=identicon&r=PG&f=1","display_name":"Rishabh Agarwal","link":"https://stackoverflow.com/users/3878948/rishabh-agarwal"},"edited":false,"score":0,"creation_date":1512542670,"post_id":1066607,"comment_id":82295334,"content_license":"CC BY-SA 3.0","body":"Since map doesn&#39;t come under <b>Iterator</b> class how in the first solution the person has used iterator?"},{"owner":{"reputation":3257,"user_id":1324802,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/41K0O.jpg?s=128&g=1","display_name":"Androidcoder","link":"https://stackoverflow.com/users/1324802/androidcoder"},"edited":false,"score":0,"creation_date":1532535855,"post_id":1066607,"comment_id":90016068,"content_license":"CC BY-SA 4.0","body":"I get and incompatible types error for &#39;Map.Entry entry&#39; and &#39;Map.Entry&lt;Integer,HashMap&gt;  entry: &quot;required Object, found Entry&quot;. I&#39;m mapping integers to hashmaps. Having to use the keyset for loop because of this and pull the value through &#39;value = (HashMap) integertomap.get(key)&#39;, though less efficient then if I could use entrySet without iterater as per your example."},{"owner":{"reputation":3750,"user_id":1695458,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/RQwhT.jpg?s=128&g=1","display_name":"EM-Creations","link":"https://stackoverflow.com/users/1695458/em-creations"},"edited":false,"score":0,"creation_date":1609767951,"post_id":1066607,"comment_id":115917350,"content_license":"CC BY-SA 4.0","body":"Best explanation thank you."},{"owner":{"reputation":313,"user_id":4012708,"user_type":"registered","profile_image":"https://i.stack.imgur.com/K3NW9.jpg?s=128&g=1","display_name":"Heath Mitchell","link":"https://stackoverflow.com/users/4012708/heath-mitchell"},"edited":false,"score":0,"creation_date":1615033661,"post_id":1066607,"comment_id":117569571,"content_license":"CC BY-SA 4.0","body":"What about adding values?"}],"owner":{"reputation":84005,"user_id":86463,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/7f3df7269d897d0e9798b29cbe768ebc?s=128&d=identicon&r=PG","display_name":"harto","link":"https://stackoverflow.com/users/86463/harto"},"comment_count":10,"is_accepted":false,"score":4979,"last_activity_date":1571347525,"last_edit_date":1571347525,"creation_date":1246404507,"answer_id":1066607,"question_id":1066589,"content_license":"CC BY-SA 4.0","body":"<p>If you're only interested in the keys, you can iterate through the <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html#keySet%28%29\" rel=\"noreferrer\"><code>keySet()</code></a> of the map:</p>\n\n<pre><code>Map&lt;String, Object&gt; map = ...;\n\nfor (String key : map.keySet()) {\n    // ...\n}\n</code></pre>\n\n<p>If you only need the values, use <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html#values%28%29\" rel=\"noreferrer\"><code>values()</code></a>:</p>\n\n<pre><code>for (Object value : map.values()) {\n    // ...\n}\n</code></pre>\n\n<p>Finally, if you want both the key and value, use <a href=\"https://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html#entrySet%28%29\" rel=\"noreferrer\"><code>entrySet()</code></a>:</p>\n\n<pre><code>for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n    String key = entry.getKey();\n    Object value = entry.getValue();\n    // ...\n}\n</code></pre>\n\n<p>One caveat: if you want to remove items mid-iteration, you'll need to do so via an Iterator (see <a href=\"https://stackoverflow.com/questions/1066589/java-iterate-through-hashmap/1066603#1066603\">karim79's answer</a>). However, changing item values is OK (see <a href=\"https://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html\" rel=\"noreferrer\"><code>Map.Entry</code></a>).</p>\n"},{"comments":[{"owner":{"reputation":19829,"user_id":416369,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/a62fe70596b17d431234e25a95965875?s=128&d=identicon&r=PG","display_name":"sactiw","link":"https://stackoverflow.com/users/416369/sactiw"},"edited":false,"score":1,"creation_date":1390551918,"post_id":1066614,"comment_id":32149720,"content_license":"CC BY-SA 3.0","body":"One more important point, the Set returned by keySet() and Collection returned by values() are both backed by the original Map. That is, if you make any modification in them they will be reflected back in the Map, however, both of them don&#39;t support add() and addAll() methods i.e. you can&#39;t add new key to the Set or new value in the Collection."}],"owner":{"reputation":4500,"user_id":17967,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/FvEyq.jpg?s=128&g=1","display_name":"Gary Kephart","link":"https://stackoverflow.com/users/17967/gary-kephart"},"comment_count":1,"is_accepted":false,"score":51,"last_activity_date":1380303745,"last_edit_date":1380303745,"creation_date":1246404550,"answer_id":1066614,"question_id":1066589,"content_license":"CC BY-SA 3.0","body":"<p>Depends. If you know you're going to need both the key and the value of every entry, then go through the <code>entrySet</code>. If you just need the values, then there's the <code>values()</code> method. And if you just need the keys, then use <code>keyset()</code>.</p>\n\n<p>A bad practice would be to iterate through all of the keys, and then within the loop, always do <code>map.get(key)</code> to get the value. If you're doing that, then the first option I wrote is for you.</p>\n"},{"owner":{"reputation":3736,"user_id":130516,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/510dad0194a9bed55971d9134efe3c1c?s=128&d=identicon&r=PG&f=1","display_name":"codethulhu","link":"https://stackoverflow.com/users/130516/codethulhu"},"comment_count":0,"is_accepted":false,"score":104,"last_activity_date":1524243135,"last_edit_date":1524243135,"creation_date":1246405401,"answer_id":1066654,"question_id":1066589,"content_license":"CC BY-SA 3.0","body":"<p>You can iterate through the entries in a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a> in several ways. Get each key and value like this:</p>\n\n<pre><code>Map&lt;?,?&gt; map = new HashMap&lt;Object, Object&gt;();\nfor(Entry&lt;?, ?&gt; e: map.entrySet()){\n    System.out.println(\"Key \" + e.getKey());\n    System.out.println(\"Value \" + e.getValue());\n}\n</code></pre>\n\n<p>Or you can get the list of keys with</p>\n\n<pre><code>Collection&lt;?&gt; keys = map.keySet();\nfor(Object key: keys){\n    System.out.println(\"Key \" + key);\n    System.out.println(\"Value \" + map.get(key));\n}\n</code></pre>\n\n<p>If you just want to get all of the values and aren't concerned with the keys, you can use:</p>\n\n<pre><code>Collection&lt;?&gt; values = map.values();\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4005,"user_id":542395,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a87359d53892f4fcfacc082a8877ed5d?s=128&d=identicon&r=PG","display_name":"icfantv","link":"https://stackoverflow.com/users/542395/icfantv"},"edited":false,"score":9,"creation_date":1317854029,"post_id":3457226,"comment_id":9319744,"content_license":"CC BY-SA 3.0","body":"this actually depends on whether or not you need the keys.  if not, it&#39;s more efficient to use entrySet() as hashCode() does not get called."},{"owner":{"reputation":1041,"user_id":916046,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1","display_name":"CompEng88","link":"https://stackoverflow.com/users/916046/compeng88"},"edited":false,"score":15,"creation_date":1366320614,"post_id":3457226,"comment_id":22977266,"content_license":"CC BY-SA 3.0","body":"map.get(key) for every iteration is not smarter -- its way slower"},{"owner":{"reputation":1041,"user_id":916046,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1","display_name":"CompEng88","link":"https://stackoverflow.com/users/916046/compeng88"},"edited":false,"score":2,"creation_date":1460812273,"post_id":3457226,"comment_id":60921164,"content_license":"CC BY-SA 3.0","body":"map.entrySet() which returns entries which already contains both the key and the value. This way you don&#39;t have to call hashCode() and search the hash during the  iteration."},{"owner":{"reputation":5704,"user_id":1783588,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/mU0bj.png?s=128&g=1","display_name":"jasonleonhard","link":"https://stackoverflow.com/users/1783588/jasonleonhard"},"edited":false,"score":0,"creation_date":1501972833,"post_id":3457226,"comment_id":78014219,"content_license":"CC BY-SA 3.0","body":"Java 8 syntax. May still not work for Android development. &quot;Android is not intended to be 100% compatible with any Java SE API version, not 6 nor 8 nor any. ... The JRE is the Java Runtime Environment while the JDK is the Java Development Kit. It is the JDK that you need for Android application development along with the existing Android SDK.Dec 9, 2013&quot; <a href=\"https://stackoverflow.com/questions/20480090/does-android-support-jdk-6-or-7\">source</a>"}],"owner":{"reputation":931,"user_id":417084,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/d4945cbb1901b353aa90b0b636895a97?s=128&d=identicon&r=PG","display_name":"jkarretero","link":"https://stackoverflow.com/users/417084/jkarretero"},"comment_count":4,"is_accepted":false,"score":72,"last_activity_date":1281520864,"creation_date":1281520864,"answer_id":3457226,"question_id":1066589,"content_license":"CC BY-SA 2.5","body":"<p>Smarter:</p>\n\n<pre><code>for (String key : hashMap.keySet()) {\n    System.out.println(\"Key: \" + key + \", Value: \" + map.get(key));\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1882,"user_id":7877391,"user_type":"registered","profile_image":"https://i.stack.imgur.com/1oVvK.png?s=128&g=1","display_name":"c-an","link":"https://stackoverflow.com/users/7877391/c-an"},"edited":false,"score":0,"creation_date":1551228786,"post_id":6797672,"comment_id":96561729,"content_license":"CC BY-SA 4.0","body":"Is param the name of the HashMap?"},{"owner":{"reputation":2745,"user_id":5835423,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/81bc770a5e7f25a722f904a42c4c9543?s=128&d=identicon&r=PG&f=1","display_name":"heman123","link":"https://stackoverflow.com/users/5835423/heman123"},"reply_to_user":{"reputation":1882,"user_id":7877391,"user_type":"registered","profile_image":"https://i.stack.imgur.com/1oVvK.png?s=128&g=1","display_name":"c-an","link":"https://stackoverflow.com/users/7877391/c-an"},"edited":false,"score":0,"creation_date":1551306597,"post_id":6797672,"comment_id":96597303,"content_license":"CC BY-SA 4.0","body":"@ChanjungKim yes , its the Name of the HashMap"}],"owner":{"reputation":3923,"user_id":838228,"user_type":"registered","accept_rate":10,"profile_image":"https://www.gravatar.com/avatar/65040e3cb750f3035553290dcc8feede?s=128&d=identicon&r=PG","display_name":"gabor","link":"https://stackoverflow.com/users/838228/gabor"},"comment_count":2,"is_accepted":false,"score":174,"last_activity_date":1551355756,"last_edit_date":1551355756,"creation_date":1311384531,"answer_id":6797672,"question_id":1066589,"content_license":"CC BY-SA 4.0","body":"<pre><code>for (Map.Entry&lt;String, String&gt; item : hashMap.entrySet()) {\n    String key = item.getKey();\n    String value = item.getValue();\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":958,"user_id":1211018,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/1ed0028c9bfc61a4a7214a8fe528e6f5?s=128&d=identicon&r=PG","display_name":"P Marecki","link":"https://stackoverflow.com/users/1211018/p-marecki"},"edited":false,"score":1,"creation_date":1456749247,"post_id":8432400,"comment_id":59075648,"content_license":"CC BY-SA 3.0","body":"Lets add the small caevet, that in case of <code>ConcurrentMap</code>s, iteration on <code>keySet()</code> will crash in general (there is no guarantee the values exist for earlier-gathered keys). On the other hand using iterators or entries is safe (they always refer to existing objects)."},{"owner":{"reputation":771,"user_id":4696214,"user_type":"registered","accept_rate":42,"profile_image":"https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1","display_name":"ohbrobig","link":"https://stackoverflow.com/users/4696214/ohbrobig"},"edited":false,"score":2,"creation_date":1528031376,"post_id":8432400,"comment_id":88343425,"content_license":"CC BY-SA 4.0","body":"@arvind How would method #4 ever be inefficient? By definition, calling <code>get()</code> is always O(1) for a HashMap. That is the definition of a HashMap and the user asked for a HashMap. I do not get why this is so highly upvoted. If you are going to reference someone else&#39;s link, make sure it actually makes sense for the question asked."},{"owner":{"reputation":3204,"user_id":961954,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/c4c5bbd954fee282f42f909f5323eb37?s=128&d=identicon&r=PG","display_name":"user961954","link":"https://stackoverflow.com/users/961954/user961954"},"reply_to_user":{"reputation":771,"user_id":4696214,"user_type":"registered","accept_rate":42,"profile_image":"https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1","display_name":"ohbrobig","link":"https://stackoverflow.com/users/4696214/ohbrobig"},"edited":false,"score":1,"creation_date":1555145139,"post_id":8432400,"comment_id":98014577,"content_license":"CC BY-SA 4.0","body":"@ohbrobig yet it&#39;s O(1) but that&#39;s the runtime, that&#39;s how it scale. It doesn&#39;t mean it will necessarily get the value in the first cycle.Method#4 will definitely be slower then Method#1"}],"owner":{"reputation":8555,"user_id":1087918,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8370c8c0859447b1a297308c5d5ee5e1?s=128&d=identicon&r=PG","display_name":"arvind","link":"https://stackoverflow.com/users/1087918/arvind"},"comment_count":3,"is_accepted":false,"score":850,"last_activity_date":1467833583,"last_edit_date":1467833583,"creation_date":1323353960,"answer_id":8432400,"question_id":1066589,"content_license":"CC BY-SA 3.0","body":"<p>Extracted from the reference <em><a href=\"http://www.sergiy.ca/how-to-iterate-over-a-map-in-java\">How to Iterate Over a Map in Java</a></em>:</p>\n\n<p>There are several ways of iterating over a <code>Map</code> in Java. Let's go over the most common methods and review their advantages and disadvantages. Since all maps in Java implement the Map interface, the following techniques will work for any map implementation (<code>HashMap</code>, <code>TreeMap</code>, <code>LinkedHashMap</code>, <code>Hashtable</code>, etc.)</p>\n\n<p><strong>Method #1</strong>: Iterating over entries using a For-Each loop.</p>\n\n<p>This is the most common method and is preferable in most cases. It should be used if you need both map keys and values in the loop.</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\nfor (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) {\n    System.out.println(\"Key = \" + entry.getKey() + \", Value = \" + entry.getValue());\n}\n</code></pre>\n\n<p>Note that the For-Each loop was introduced in Java 5, so this method is working only in newer versions of the language. Also a For-Each loop will throw <code>NullPointerException</code> if you try to iterate over a map that is null, so before iterating you should always check for null references.</p>\n\n<p><strong>Method #2</strong>: Iterating over keys or values using a For-Each loop.</p>\n\n<p>If you need only keys or values from the map, you can iterate over keySet or values instead of entrySet.</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\n\n// Iterating over keys only\nfor (Integer key : map.keySet()) {\n    System.out.println(\"Key = \" + key);\n}\n\n// Iterating over values only\nfor (Integer value : map.values()) {\n    System.out.println(\"Value = \" + value);\n}\n</code></pre>\n\n<p>This method gives a slight performance advantage over <code>entrySet</code> iteration (about 10% faster) and is more clean.</p>\n\n<p><strong>Method #3</strong>: Iterating using Iterator.</p>\n\n<p>Using Generics:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\nIterator&lt;Map.Entry&lt;Integer, Integer&gt;&gt; entries = map.entrySet().iterator();\nwhile (entries.hasNext()) {\n    Map.Entry&lt;Integer, Integer&gt; entry = entries.next();\n    System.out.println(\"Key = \" + entry.getKey() + \", Value = \" + entry.getValue());\n}\n</code></pre>\n\n<p>Without Generics:</p>\n\n<pre><code>Map map = new HashMap();\nIterator entries = map.entrySet().iterator();\nwhile (entries.hasNext()) {\n    Map.Entry entry = (Map.Entry) entries.next();\n    Integer key = (Integer)entry.getKey();\n    Integer value = (Integer)entry.getValue();\n    System.out.println(\"Key = \" + key + \", Value = \" + value);\n}\n</code></pre>\n\n<p>You can also use same technique to iterate over <code>keySet</code> or values.</p>\n\n<p>This method might look redundant, but it has its own advantages. First of all, it is the only way to iterate over a map in older versions of Java. The other important feature is that it is the only method that allows you to remove entries from the map during iteration by calling <code>iterator.remove()</code>. If you try to do this during For-Each iteration you will get \"unpredictable results\" according to <a href=\"https://en.wikipedia.org/wiki/Javadoc\">Javadoc</a>.</p>\n\n<p>From a performance point of view this method is equal to a For-Each iteration.</p>\n\n<p><strong>Method #4</strong>: Iterating over keys and searching for values (inefficient).</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();\nfor (Integer key : map.keySet()) {\n    Integer value = map.get(key);\n    System.out.println(\"Key = \" + key + \", Value = \" + value);\n}\n</code></pre>\n\n<p>This might look like a cleaner alternative for method #1, but in practice it is pretty slow and inefficient as getting values by a key might be time-consuming (this method in different Map implementations is 20%-200% slower than method #1). If you have FindBugs installed, it will detect this and warn you about inefficient iteration. This method should be avoided.</p>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>If you need only keys or values from the map, use method #2. If you are stuck with older version of Java (less than 5) or planning to remove entries during iteration, you have to use method #3. Otherwise use method #1.</p>\n"}],"owner":{"reputation":53600,"user_id":84916,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/IaDb2.jpg?s=128&g=1","display_name":"burntsugar","link":"https://stackoverflow.com/users/84916/burntsugar"},"comment_count":2,"is_answered":true,"view_count":3951732,"protected_date":1386076986,"closed_date":1573200556,"accepted_answer_id":1066603,"answer_count":7,"score":3500,"last_activity_date":1573200548,"creation_date":1246404254,"last_edit_date":1572364824,"question_id":1066589,"link":"https://stackoverflow.com/questions/1066589/iterate-through-a-hashmap","closed_reason":"Duplicate","title":"Iterate through a HashMap","body":"<p>What's the best way to iterate over the items in a <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/HashMap.html\" rel=\"noreferrer\"><code>HashMap</code></a>?</p>\n"},{"tags":["java","memory","memory-leaks"],"answers":[{"comments":[{"owner":{"reputation":273369,"user_id":40342,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/a648ccb47bbbe9497c073315aac4d33e?s=128&d=identicon&r=PG","display_name":"Joachim Sauer","link":"https://stackoverflow.com/users/40342/joachim-sauer"},"edited":false,"score":23,"creation_date":1308932111,"post_id":6470679,"comment_id":7602763,"content_license":"CC BY-SA 3.0","body":"That depends on the definition of &quot;memory leak&quot;. If &quot;memory that&#39;s held on to, but no longer needed&quot;, then it&#39;s easy to do in Java. If it&#39;s &quot;memory that&#39;s allocated but not accessible by the code at all&quot;, then it gets slightly harder."},{"owner":{"reputation":22605,"user_id":486057,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/a9fd749502d6cb012df9425b028cea32?s=128&d=identicon&r=PG","display_name":"Rogach","link":"https://stackoverflow.com/users/486057/rogach"},"reply_to_user":{"reputation":273369,"user_id":40342,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/a648ccb47bbbe9497c073315aac4d33e?s=128&d=identicon&r=PG","display_name":"Joachim Sauer","link":"https://stackoverflow.com/users/40342/joachim-sauer"},"edited":false,"score":0,"creation_date":1308932220,"post_id":6470679,"comment_id":7602794,"content_license":"CC BY-SA 3.0","body":"@Joachim Sauer - I meant the second type. The first is fairly easy to make :)"},{"owner":{"reputation":12928,"user_id":582675,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/hHXty.jpg?s=128&g=1","display_name":"Fabian Barney","link":"https://stackoverflow.com/users/582675/fabian-barney"},"edited":false,"score":6,"creation_date":1308932892,"post_id":6470679,"comment_id":7602987,"content_license":"CC BY-SA 3.0","body":"&quot;With pure java, it is almost impossible.&quot;  Well, my experience is another especially when it comes to implementing caches by people that are not aware of the pitfalls here."},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":4,"creation_date":1311335485,"post_id":6470679,"comment_id":8057037,"content_license":"CC BY-SA 3.0","body":"@Rogach: there are basically +400 upvotes on various answers by people with +10 000 rep showing that in both the cases <i>Joachim Sauer</i> commented it&#39;s very possible.  So your &quot;almost impossible&quot; makes no sense."}],"owner":{"reputation":22605,"user_id":486057,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/a9fd749502d6cb012df9425b028cea32?s=128&d=identicon&r=PG","display_name":"Rogach","link":"https://stackoverflow.com/users/486057/rogach"},"comment_count":4,"is_accepted":false,"community_owned_date":1311330284,"score":36,"last_activity_date":1308952128,"last_edit_date":1308952128,"creation_date":1308932069,"answer_id":6470679,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Maybe by using external native code through JNI?</p>\n\n<p>With pure Java, it is almost impossible.</p>\n\n<p>But that is about a \"standard\" type of memory leak, when you cannot access the memory anymore, but it is still owned by the application. You can instead keep references to unused objects, or open streams without closing them afterwards.</p>\n"},{"comments":[{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"edited":false,"score":0,"creation_date":1308932401,"post_id":6470695,"comment_id":7602846,"content_license":"CC BY-SA 3.0","body":"@delnan, not providing a hashCode()/equals() is enough."},{"owner":{"reputation":117977,"user_id":301832,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG","display_name":"Donal Fellows","link":"https://stackoverflow.com/users/301832/donal-fellows"},"edited":false,"score":73,"creation_date":1309022627,"post_id":6470695,"comment_id":7615613,"content_license":"CC BY-SA 3.0","body":"Actually, you can remove the elements from a HashSet even if the element class gets hashCode and equals wrong; just get an iterator for the set and use its remove method, as the iterator actually operates on the underlying entries themselves and not the elements. (Note that an unimplemented hashCode/equals is <i>not</i> enough to trigger a leak; the defaults implement simple object identity and so you can get the elements and remove them normally.)"},{"owner":{"reputation":76229,"user_id":330057,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/i6yM6.png?s=128&g=1","display_name":"corsiKa","link":"https://stackoverflow.com/users/330057/corsika"},"reply_to_user":{"reputation":117977,"user_id":301832,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG","display_name":"Donal Fellows","link":"https://stackoverflow.com/users/301832/donal-fellows"},"edited":false,"score":2,"creation_date":1309047223,"post_id":6470695,"comment_id":7618504,"content_license":"CC BY-SA 3.0","body":"@Donal your last statement is incorrect. You can&#39;t get the element because you have no reference to it. The only reference to the key put in the map is the one that the map itself holds. Only if you went <code>BadKey myKey = new BadKey(&quot;key&quot;); map.put(key,&quot;value&quot;);</code> would you ever be able to get it out. You are correct you could use the iterator to remove it, but you cannot always do that with all data structures. For example, if you don&#39;t null out the reference in @meriton&#39;s answer, that will be lost forever. You have no access to the backing array, and iterator will stop short of it."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"edited":false,"score":0,"creation_date":1309072492,"post_id":6470695,"comment_id":7620375,"content_license":"CC BY-SA 3.0","body":"The only way to remove elements when equals/hashCode is incorrect is to use Iterator.remove() when you find a match using a different method of comparison."},{"owner":{"reputation":117977,"user_id":301832,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG","display_name":"Donal Fellows","link":"https://stackoverflow.com/users/301832/donal-fellows"},"reply_to_user":{"reputation":76229,"user_id":330057,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/i6yM6.png?s=128&g=1","display_name":"corsiKa","link":"https://stackoverflow.com/users/330057/corsika"},"edited":false,"score":1,"creation_date":1309082206,"post_id":6470695,"comment_id":7621328,"content_license":"CC BY-SA 3.0","body":"@Total: But I wasn&#39;t addressing the problem of <i>all</i> data structures; it&#39;s always possible to make stupid code that doesn&#39;t delete stuff despite being asked to. (That&#39;s when the right thing to do is to GC the source code to that class. Possibly its author too.) I was addressing a <code>HashSet</code> where what I said is true; no matter how bad the element implementation is, you can still give it the boot. (I double-checked the source code.)"},{"owner":{"reputation":76229,"user_id":330057,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/i6yM6.png?s=128&g=1","display_name":"corsiKa","link":"https://stackoverflow.com/users/330057/corsika"},"reply_to_user":{"reputation":117977,"user_id":301832,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG","display_name":"Donal Fellows","link":"https://stackoverflow.com/users/301832/donal-fellows"},"edited":false,"score":13,"creation_date":1309119899,"post_id":6470695,"comment_id":7626133,"content_license":"CC BY-SA 3.0","body":"@Donal what I&#39;m trying to say, I guess, is I disagree with your definition of a memory leak. I would consider (to continue the analogy) your iterator-removal technique to be a drip-pan under a leak; the leak still exists regardless of the drip pan."},{"owner":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":99,"creation_date":1309581030,"post_id":6470695,"comment_id":7724618,"content_license":"CC BY-SA 3.0","body":"I agree, this is <b>not</b> a memory &quot;leak&quot;, because you can just remove references to the hashset and wait for the GC to kick in, and presto! the memory goes back."},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":0,"creation_date":1311335004,"post_id":6470695,"comment_id":8056917,"content_license":"CC BY-SA 3.0","body":"@PeterLawrey: you asked me if I had &quot;facts&quot; in this question: <a href=\"http://stackoverflow.com/questions/4400311\">stackoverflow.com/questions/4400311</a>   The +130 upvotes to examples in this question and <i>bestssss</i>&#39; answer is basically all the facts I need.  Your comment was snarky and upvoted by ten Java fanboism.  I&#39;m still sad my question is at -1 (because people like you downvoted it or encouraged the downvoting with snarky comments)."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":13,"creation_date":1311337932,"post_id":6470695,"comment_id":8057794,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r, I interpreted your question as asking if there is anything in the language which naturally leads to memory leaks.  The answer is NO. This questions asks if it is possible to contrive a situation to create something like a memory leak.  None of these examples are memory leak in the manner that a C/C++ programmer would understand it."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":0,"creation_date":1311338249,"post_id":6470695,"comment_id":8057900,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r, In my example, as soon as you discard the map the &quot;memory leak&quot; will disappear. There are example here were memory must be consumed until the program exists.  It is no possible to implement the functionality without using memory and cannot be considered a bug any more than loading the Object class is a memory leak. You should also read Darien&#39;s comment."},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1311339043,"post_id":6470695,"comment_id":8058139,"content_license":"CC BY-SA 3.0","body":"@Peter Lawrey: if the examples are not memory leaks in the manner that a C/C++ programmer would understand it then maybe we can infer from context (the context being <i>&quot;Java and Java not having the same memory leak C/C++ does&quot;</i>) that we&#39;re talking about all the various memory leaks given by <i>bestssss</i> and the one by Daniel Pryden etc.?   By know this question + answers are reaching more than +800 upvotes and it seems pretty much accepted that, after all, Java does have memory leaks.  Where did I (or the OP) mention memory leak in a C/C++ way?"},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1311339275,"post_id":6470695,"comment_id":8058203,"content_license":"CC BY-SA 3.0","body":"@Peter Lawrey: for years people have been telling that Java had no memory leaks and this mislead people into thinking that automated GC meant they&#39;d never leak memory again.  This was a blatant (and persistent) lie that caught on.  Thankfully there were great articles (on <i>DeveloperWorks</i> and <i>Artima</i> for example) exposing the fallacy in that cliche: <i>&quot;Java memory leaks are not the same as C/C++ ones hence Java doesn&#39;t leak memory&quot;</i> and now, even better, this question contains answers showing <b>real</b> Java leaks."},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":13,"creation_date":1311339406,"post_id":6470695,"comment_id":8058241,"content_license":"CC BY-SA 3.0","body":"@Peter Lawrey: also, what do you think about this: <i>&quot;There&#39;s not anything in the C language which naturally leaks to memory leak if you don&#39;t forget to manually free the memory you allocated&quot;</i>.  How would that be for intellectual dishonesty?   Anyway, I&#39;m tired: you can have the last word."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":0,"creation_date":1311342717,"post_id":6470695,"comment_id":8059371,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r, This questions talks about &quot;memory leaks&quot; in the context of functions which consume memory as a part of there normal operation.  Your usage of &quot;memory leaks&quot; indicate a bug which shouldn&#39;t consume memory (a negative thing). i.e. If only a better language were used, these memory leaks wouldn&#39;t happen.  Your statement that &quot;Here are the facts ... a lot of Java programs have (subtle or not) memory leaks&quot; is hard to support as people can&#39;t even agree what a memory leak means in Java. You appear to agree that the C/C++ standard understand of the term <i>never happens</i>."},{"owner":{"reputation":3182,"user_id":315988,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/pzLbj.png?s=128&g=1","display_name":"Darien","link":"https://stackoverflow.com/users/315988/darien"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":8,"creation_date":1311359010,"post_id":6470695,"comment_id":8064556,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r: All your posts seem to revolve around accusations of &quot;fanboyism&quot; and &quot;blatant lies&quot; and &quot;intellectual dishonesty&quot;... If you want to hate on Java I&#39;m sure there&#39;s some forum far from here where you can make angry rants much more easily without polluting the technical conversation."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":7,"creation_date":1311359259,"post_id":6470695,"comment_id":8064627,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r, On reflection, I think you have a good point to make, but you appeal to emotive rather than technical arguments."},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"reply_to_user":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":5,"creation_date":1311374029,"post_id":6470695,"comment_id":8068069,"content_license":"CC BY-SA 3.0","body":"@SyntaxT3rr0r, I have written a more detailed response to your interesting question <a href=\"http://vanillajava.blogspot.com/2011/07/java-and-memory-leaks.html\" rel=\"nofollow noreferrer\">vanillajava.blogspot.com/2011/07/java-and-memory-leaks.html</a>"}],"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"comment_count":17,"is_accepted":false,"community_owned_date":1311330284,"score":468,"last_activity_date":1308952256,"last_edit_date":1308952256,"creation_date":1308932189,"answer_id":6470695,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A simple thing to do is to use a HashSet with an incorrect (or non-existent) <code>hashCode()</code> or <code>equals()</code>, and then keep adding \"duplicates\".  Instead of ignoring duplicates as it should, the set will only ever grow and you won't be able to remove them.</p>\n\n<p>If you want these bad keys/elements to hang around you can use a static field like </p>\n\n<pre><code>class BadKey {\n   // no hashCode or equals();\n   public final String key;\n   public BadKey(String key) { this.key = key; }\n}\n\nMap map = System.getProperties();\nmap.put(new BadKey(\"key\"), \"value\"); // Memory leak even if your threads die.\n</code></pre>\n"},{"comments":[{"owner":{"reputation":44150,"user_id":375874,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/STZt9.jpg?s=128&g=1","display_name":"Falmarri","link":"https://stackoverflow.com/users/375874/falmarri"},"edited":false,"score":90,"creation_date":1311275453,"post_id":6470712,"comment_id":8045654,"content_license":"CC BY-SA 3.0","body":"How is that a leak? It&#39;s doing exactly what you&#39;re asking it to do. If that&#39;s a leak, creating and storing objects anywhere is a leak."},{"owner":{"reputation":3505,"user_id":3335,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/a5ace0638f020717d2ededf10fdae506?s=128&d=identicon&r=PG","display_name":"Kyle","link":"https://stackoverflow.com/users/3335/kyle"},"reply_to_user":{"reputation":44150,"user_id":375874,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/STZt9.jpg?s=128&g=1","display_name":"Falmarri","link":"https://stackoverflow.com/users/375874/falmarri"},"edited":false,"score":3,"creation_date":1342552134,"post_id":6470712,"comment_id":15240573,"content_license":"CC BY-SA 3.0","body":"I agree with @Falmarri. I don&#39;t see a leak there, you are just creating objects. You could certainly &#39;reclaim&#39; the memory that you just allocated with another method called &#39;removeFromCache&#39;. A leak is when you can&#39;t reclaim the memory."},{"owner":{"reputation":291467,"user_id":37213,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG","display_name":"duffymo","link":"https://stackoverflow.com/users/37213/duffymo"},"edited":false,"score":3,"creation_date":1342555632,"post_id":6470712,"comment_id":15242135,"content_license":"CC BY-SA 3.0","body":"My point is that somebody who keeps creating objects, perhaps putting them into a cache, could end up with an OOM error if they aren&#39;t careful."},{"owner":{"reputation":44150,"user_id":375874,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/STZt9.jpg?s=128&g=1","display_name":"Falmarri","link":"https://stackoverflow.com/users/375874/falmarri"},"edited":false,"score":8,"creation_date":1342649425,"post_id":6470712,"comment_id":15276297,"content_license":"CC BY-SA 3.0","body":"@duffymo: But that&#39;s not really what the question was asking. It has nothing to do with simply using up all your memory."},{"owner":{"reputation":2242,"user_id":972932,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/z6oin.jpg?s=128&g=1","display_name":"gyorgyabraham","link":"https://stackoverflow.com/users/972932/gyorgyabraham"},"edited":false,"score":3,"creation_date":1385721374,"post_id":6470712,"comment_id":30260700,"content_license":"CC BY-SA 3.0","body":"Absolutely invalid. You are just collecting a bunch of objects in a Map collection. Their references will be kept because the Map holds them."},{"owner":{"reputation":1363,"user_id":631627,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/24c72655c90bf98c046f984952982633?s=128&d=identicon&r=PG","display_name":"sceaj","link":"https://stackoverflow.com/users/631627/sceaj"},"edited":false,"score":3,"creation_date":1511909998,"post_id":6470712,"comment_id":82041849,"content_license":"CC BY-SA 3.0","body":"This is the classic memory leak in Java.  It is not a leak in the sense of the JVM has lost track of the memory, but it is a leak in the sense that the JVM will never garbage collect it.  If you monitor the heap of an application that uses this construct it will have a generally increasing trend and will eventually terminate with OutOfMemoryError.  That is the definition of a memory leak."},{"owner":{"reputation":76775,"user_id":659804,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/7afeb4d1993dc25c6028646840e4868a?s=128&d=identicon&r=PG","display_name":"Ernest Friedman-Hill","link":"https://stackoverflow.com/users/659804/ernest-friedman-hill"},"edited":false,"score":5,"creation_date":1546524570,"post_id":6470712,"comment_id":94884004,"content_license":"CC BY-SA 4.0","body":"The comments dissing this answer are pretty funny, given that the accepted answer with over 2000 votes is saying the exact same thing, albeit in a highly obfuscated way. ThreadLocals aren&#39;t magic -- they are just entries in a Map, pointed to by a member variable in Thread."}],"owner":{"reputation":291467,"user_id":37213,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG","display_name":"duffymo","link":"https://stackoverflow.com/users/37213/duffymo"},"comment_count":7,"is_accepted":false,"community_owned_date":1311330284,"score":18,"last_activity_date":1605938991,"last_edit_date":1605938991,"creation_date":1308932263,"answer_id":6470712,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>Create a static Map and keep adding hard references to it.  Those will never be garbage collected.</p>\n<pre><code>public class Leaker {\n    private static final Map&lt;String, Object&gt; CACHE = new HashMap&lt;String, Object&gt;();\n\n    // Keep adding until failure.\n    public static void addToCache(String key, Object value) { Leaker.CACHE.put(key, value); }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":15,"creation_date":1309581103,"post_id":6470716,"comment_id":7724621,"content_license":"CC BY-SA 3.0","body":"I don&#39;t believe this is a &quot;leak&quot;. It&#39;s a bug, and it&#39;s by design of the program and language. A leak would be an object hanging around <i>without</i> any references to it."},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"reply_to_user":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":30,"creation_date":1310265030,"post_id":6470716,"comment_id":7842867,"content_license":"CC BY-SA 3.0","body":"@Mehrdad: That&#39;s only one narrow definition that doesn&#39;t fully apply to all languages.  I&#39;d argue that <i>any</i> memory leak is a bug caused by poor design of the program."},{"owner":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":2,"creation_date":1310267680,"post_id":6470716,"comment_id":7843129,"content_license":"CC BY-SA 3.0","body":"I see what you mean (and agree with some of it), but the problem is that if you look at it that way, then the question of &quot;how do you create a memory leak in X?&quot; becomes meaningless, since it&#39;s possible in <i>any</i> language. So while it may be true, it&#39;s not really specific to Java, so I don&#39;t think that&#39;s what we&#39;re referring to as a &quot;leak&quot; here."},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"reply_to_user":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":9,"creation_date":1310306999,"post_id":6470716,"comment_id":7846864,"content_license":"CC BY-SA 3.0","body":"@Mehrdad: <code>...then the question of &quot;how do you create a memory leak in X?&quot; becomes meaningless, since it&#39;s possible in any language.</code>  I don&#39;t see how you&#39;re drawing that conclusion.  There are <i>fewer</i> ways to create a memory leak in Java by any definition.  It&#39;s definitely still a valid question."},{"owner":{"reputation":64027,"user_id":8047,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/771d6811baa1b117dd8a5ff0708fc66b?s=128&d=identicon&r=PG","display_name":"Dan Rosenstark","link":"https://stackoverflow.com/users/8047/dan-rosenstark"},"reply_to_user":{"reputation":187216,"user_id":541686,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG","display_name":"user541686","link":"https://stackoverflow.com/users/541686/user541686"},"edited":false,"score":1,"creation_date":1310343363,"post_id":6470716,"comment_id":7851571,"content_license":"CC BY-SA 3.0","body":"@Mehrdad, great point, never thought about it that way. In a sense, it&#39;s impossible to leak in Java, yet programs can have their memory footprint grow unintentionally. In Objective-C, that problem would NOT be called a memory leak."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311272520,"post_id":6470716,"comment_id":8044819,"content_license":"CC BY-SA 3.0","body":"@Bill the Lizard: I agree--it would still be a valid question, but it becomes worthless. Still meaningful, but worthless. If memory leaks exist when you still have references to objects, <i>anything</i> could be considered a memory leak. Like let&#39;s say you fire up Minesweeper, but it has been modified so that you can&#39;t click the tiles. (I dunno, maybe you like how the board looks.) Because the data under the tiles is now &quot;no longer need&quot;ed, would that memory be a leak? I think not--but your answer implies it would be."},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":7,"creation_date":1311273008,"post_id":6470716,"comment_id":8044946,"content_license":"CC BY-SA 3.0","body":"@31eee384: If your program keeps objects in memory that it can never use, then technically it&#39;s leaked memory.  The fact that you have bigger problems doesn&#39;t really change that."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311274242,"post_id":6470716,"comment_id":8045309,"content_license":"CC BY-SA 3.0","body":"@Bill the Lizard: According to wikipedia, leaked memory in an OO program is technically &quot;when an object is stored in memory but cannot be accessed by the running code.&quot; In my scenario, the object can very well be accessed--it just won&#39;t be. (<a href=\"http://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Memory_leak</a>)"},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":8,"creation_date":1311275626,"post_id":6470716,"comment_id":8045711,"content_license":"CC BY-SA 3.0","body":"@31eee384: If you know for a fact that it won&#39;t be, then it can&#39;t be.  The program, as written, will never access the data."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311281185,"post_id":6470716,"comment_id":8047388,"content_license":"CC BY-SA 3.0","body":"@Bill the Lizard: Seems that it&#39;s just a difference of definition then, unfortunately. I think that the first definition of a memory leak on Wikipedia supports me--that a memory leak is &quot;when a computer program consumes memory but is unable to release it back to the operating system&quot;. The program can certainly do that, and this extra &quot;leaked&quot; data in Minesweeper will go away when whatever class holds the data is garbage collected. I understand your point, and in a broad sense the data is leaked, however I hold the term &quot;memory leak&quot; to be something more specific, and a more serious problem."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311281641,"post_id":6470716,"comment_id":8047519,"content_license":"CC BY-SA 3.0","body":"@Bill the Lizard: I didn&#39;t have enough characters to say it in my previous comment, but I do want to say that I agree with you given how you define memory leak. Given the loose definition, I&#39;d say there are two types of memory leaks: those that are less important, and those that are more important. The lesser are the ones where memory is simply wasted. The greater are the ones where memory isn&#39;t retrieved until the JVM is killed. While you consider both types memory leaks, I only consider the latter a leak."},{"owner":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":3,"creation_date":1311314959,"post_id":6470716,"comment_id":8052675,"content_license":"CC BY-SA 3.0","body":"@31eee384: if you keep a reference to an object around and never remove it, the memory won&#39;t be retrieved until the JVM is killed, too. Some people won&#39;t call it a &quot;true memory leak&quot; because there&#39;s a reference somewhere; but if the object is never going to be used again by the program and at the same time the reference will never be dropped by the program either, it is as important as the &quot;true memory leaks&quot; people are looking for as a funny exercise here (or more important, as they are more common than the edge cases people are creating on their answers just to get &quot;true&quot; memory leaks)"},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"reply_to_user":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"edited":false,"score":0,"creation_date":1311346844,"post_id":6470716,"comment_id":8060799,"content_license":"CC BY-SA 3.0","body":"@ehabkost: Yes, I realize the difference. My example isn&#39;t like that, though--let&#39;s say the data is stored in the Sweeper class. When you start a new game the Sweeper reference is set to null, <i>the instance is successfully garbage collected</i>, and the Sweeper reference is assigned a new instance. There is no leakage taking place here. On the other hand, if you had a Vec2f class and managed to accidentally add each instance to some static stack that is never cleared, that would indeed be a memory leak. I find the more apt term for unplayable minesweeper &quot;wasted&quot; memory, instead of &quot;leaked&quot;."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"reply_to_user":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"edited":false,"score":0,"creation_date":1311347067,"post_id":6470716,"comment_id":8060884,"content_license":"CC BY-SA 3.0","body":"@ehabkost: In other words, I agree with you too! But I think you are both misrepresenting my scenario as something that it isn&#39;t. Another possibly simpler case could be a game with a fatal bug in it, that prevents you from passing a certain stage. Would the further stages, inaccessible but existent, be considered memory leaks? Would a patch that fixes the broken stage be &quot;fixing a memory leak&quot;? I think it&#39;s a little silly to use that phrase in that manner."},{"owner":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311349441,"post_id":6470716,"comment_id":8061693,"content_license":"CC BY-SA 3.0","body":"@31eee384: right, I wouldn&#39;t call your game stage example a &quot;memory leak&quot;. But I think the difference is what is considered the &quot;right behavior&quot; in each case: In your Minesweeper example, the program was supposed to let the user go to the next stages. In other cases, if your program is keeping useless references around when it was supposed to drop them, it is as bad as a &quot;ture memory leak&quot;."},{"owner":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311349536,"post_id":6470716,"comment_id":8061730,"content_license":"CC BY-SA 3.0","body":"@31eee384: turning your example around: if I have a bug on my C game where I do &quot;next_stage = NULL&quot; by mistake and didn&#39;t allow the user to move on, it is technically a &quot;true memory leak&quot;, but it would be silly to call it a memory leak because the right fix would be to allow the user to move on, not to free the memory."},{"owner":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"reply_to_user":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311349547,"post_id":6470716,"comment_id":8061734,"content_license":"CC BY-SA 3.0","body":"@31eee384 let us <a href=\"http://chat.stackoverflow.com/rooms/1738/discussion-between-ehabkost-and-31eee384\">continue this discussion in chat</a>"},{"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"reply_to_user":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"edited":false,"score":0,"creation_date":1311350346,"post_id":6470716,"comment_id":8062032,"content_license":"CC BY-SA 3.0","body":"@ehabkost: I was think along similar lines.  It&#39;s <i>technically</i> a memory leak, but there are more useful ways to think about it in order to fix the problem."},{"owner":{"reputation":2656,"user_id":382780,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/7e2b7c885cfa6c044bd14500052d2060?s=128&d=identicon&r=PG","display_name":"31eee384","link":"https://stackoverflow.com/users/382780/31eee384"},"edited":false,"score":0,"creation_date":1311351762,"post_id":6470716,"comment_id":8062493,"content_license":"CC BY-SA 3.0","body":"I think this got a bit out of hand... I was originally responding to &quot;any time you keep references around to objects that you no longer <i>need</i> you have a memory leak&quot;.  Specifically, I think I took &quot;need&quot; to mean something more absolute than you meant--rereading your early comments, Bill the Lizard, I find that I actually agree with you. (I also found that I had actually upvoted a few of your comments before I started this mess.)"},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"edited":false,"score":1,"creation_date":1612425969,"post_id":6470716,"comment_id":116764197,"content_license":"CC BY-SA 4.0","body":"Boss: &quot;have you found the memory leak?&quot; Programmer: &quot;well we found the bug, but it&#39;s not technically a memory leak...&quot; Boss: &quot;then why is the program running out of memory?  Just fix the memory leak!&quot;"}],"owner":{"reputation":366125,"user_id":1288,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG","display_name":"Bill the Lizard","link":"https://stackoverflow.com/users/1288/bill-the-lizard"},"comment_count":20,"is_accepted":false,"community_owned_date":1311330284,"score":69,"last_activity_date":1308932287,"creation_date":1308932287,"answer_id":6470716,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Any time you keep references around to objects that you no longer need you have a memory leak.  See <a href=\"http://www.ibm.com/developerworks/library/j-leaks/\" rel=\"noreferrer\">Handling memory leaks in Java programs</a> for examples of how memory leaks manifest themselves in Java and what you can do about it.</p>\n"},{"comments":[{"owner":{"reputation":2743,"user_id":116757,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fcfc36d64bd909df102dc91c961554af?s=128&d=identicon&r=PG","display_name":"Hardwareguy","link":"https://stackoverflow.com/users/116757/hardwareguy"},"edited":false,"score":100,"creation_date":1311265416,"post_id":6470756,"comment_id":8042894,"content_license":"CC BY-SA 3.0","body":"You will reach maximum open connection limit before you hit memory limits usually.  Don&#39;t ask me why I know..."},{"owner":{"reputation":3938,"user_id":160208,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/642d74a5a6b19dfbf506e5439f6b59b1?s=128&d=identicon&r=PG","display_name":"chotchki","link":"https://stackoverflow.com/users/160208/chotchki"},"edited":false,"score":0,"creation_date":1377014798,"post_id":6470756,"comment_id":26920197,"content_license":"CC BY-SA 3.0","body":"The Oracle JDBC driver is notorious for doing this."},{"owner":{"reputation":1712,"user_id":369446,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/zO6tb.jpg?s=128&g=1","display_name":"Michael Shopsin","link":"https://stackoverflow.com/users/369446/michael-shopsin"},"reply_to_user":{"reputation":2743,"user_id":116757,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fcfc36d64bd909df102dc91c961554af?s=128&d=identicon&r=PG","display_name":"Hardwareguy","link":"https://stackoverflow.com/users/116757/hardwareguy"},"edited":false,"score":0,"creation_date":1398178018,"post_id":6470756,"comment_id":35527222,"content_license":"CC BY-SA 3.0","body":"@Hardwareguy I hit the connection limits of the SQL databases a lot until I put <code>Connection.close</code> into the finally block of all my SQL calls. For extra fun I called some long running Oracle stored procedures that required locks on the Java side to prevent too many calls to the database."},{"owner":{"reputation":6055,"user_id":2235567,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/vtckD.jpg?s=128&g=1","display_name":"Aseem Bansal","link":"https://stackoverflow.com/users/2235567/aseem-bansal"},"reply_to_user":{"reputation":2743,"user_id":116757,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fcfc36d64bd909df102dc91c961554af?s=128&d=identicon&r=PG","display_name":"Hardwareguy","link":"https://stackoverflow.com/users/116757/hardwareguy"},"edited":false,"score":0,"creation_date":1411410063,"post_id":6470756,"comment_id":40682490,"content_license":"CC BY-SA 3.0","body":"@Hardwareguy That is interesting but it is not really necessary that actual connection limits will be hit for all environments. For instance, for an application deployed on weblogic app server 11g I have seen connection leakages at a large scale. But due to a option of harvesting leaked connections database connections remained available while memory leaks were being introduced. I am not sure about all environments."},{"owner":{"reputation":1152,"user_id":561139,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a61b08dbab444f68ffbd975bb84695cc?s=128&d=identicon&r=PG","display_name":"Bj&#248;rn Stenfeldt","link":"https://stackoverflow.com/users/561139/bj%c3%b8rn-stenfeldt"},"edited":false,"score":0,"creation_date":1504166853,"post_id":6470756,"comment_id":78911312,"content_license":"CC BY-SA 3.0","body":"In my experience you get a memory leak even if you close the connection. You need to close the ResultSet and PreparedStatement first. Had a server that crashed repeatedly after hours or even days of working fine, due to OutOfMemoryErrors, until I started doing that."},{"owner":{"reputation":341,"user_id":8133719,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/91c236d00a457c3f11391b586b8a10e6?s=128&d=identicon&r=PG&f=1","display_name":"zero_yu","link":"https://stackoverflow.com/users/8133719/zero-yu"},"edited":false,"score":0,"creation_date":1519512922,"post_id":6470756,"comment_id":84942515,"content_license":"CC BY-SA 3.0","body":"Sorry, I am new to Java, so my question may look stupid. Could you please explain &quot;The resulting behavior is that while memory will be reclaimed due to unreachable objects being collected, resources (including memory) associated with the Connection object might simply not be reclaimed&quot;? Do you mean that the memory allocated for the connection object itself will be reclaimed, however, the memory allocated for the resources related to the connection object won&#39;t be reclaimed? What exactly do the resources mean? Thanks!"},{"owner":{"reputation":489,"user_id":2914366,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/afcbaf30790c76e45c2e8fc85b0d6f86?s=128&d=identicon&r=PG&f=1","display_name":"lafual","link":"https://stackoverflow.com/users/2914366/lafual"},"edited":false,"score":0,"creation_date":1604400081,"post_id":6470756,"comment_id":114330125,"content_license":"CC BY-SA 4.0","body":"Assuming that the ConnectionFactory is using a pooled connection, then you would probably use all alloted cursors on the database, because you didn&#39;t close the statement. This would most likely happen before you ran out of Java memory."}],"owner":{"reputation":72370,"user_id":3916,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4b94715e1349011b0529e81da45b06e7?s=128&d=identicon&r=PG","display_name":"Vineet Reynolds","link":"https://stackoverflow.com/users/3916/vineet-reynolds"},"comment_count":7,"is_accepted":false,"community_owned_date":1311330284,"score":133,"last_activity_date":1455637116,"last_edit_date":1455637116,"creation_date":1308932518,"answer_id":6470756,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>The following is a pretty pointless example, if you do not understand <a href=\"http://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"noreferrer\">JDBC</a>. Or at least how JDBC expects a developer to close <code>Connection</code>, <code>Statement</code> and <code>ResultSet</code> instances before discarding them or losing references to them, instead of relying on the implementation of <code>finalize</code>.</p>\n\n<pre><code>void doWork()\n{\n   try\n   {\n       Connection conn = ConnectionFactory.getConnection();\n       PreparedStatement stmt = conn.preparedStatement(\"some query\"); // executes a valid query\n       ResultSet rs = stmt.executeQuery();\n       while(rs.hasNext())\n       {\n          ... process the result set\n       }\n   }\n   catch(SQLException sqlEx)\n   {\n       log(sqlEx);\n   }\n}\n</code></pre>\n\n<p>The problem with the above is that the <code>Connection</code> object is not closed, and hence the physical connection will remain open, until the garbage collector comes around and sees that it is unreachable. GC will invoke the <code>finalize</code> method, but there are JDBC drivers that do not implement the <code>finalize</code>, at least not in the same way that <code>Connection.close</code> is implemented. The resulting behavior is that while memory will be reclaimed due to unreachable objects being collected, resources (including memory) associated with the <code>Connection</code> object might simply not be reclaimed.</p>\n\n<p>In such an event where the <code>Connection</code>'s <code>finalize</code> method does not clean up everything, one might actually find that the physical connection to the database server will last several garbage collection cycles, until the database server eventually figures out that the connection is not alive (if it does), and should be closed.</p>\n\n<p>Even if the JDBC driver were to implement <code>finalize</code>, it is possible for exceptions to be thrown during finalization. The resulting behavior is that any memory associated with the now \"dormant\" object will not be reclaimed, as <code>finalize</code> is guaranteed to be invoked only once.</p>\n\n<p>The above scenario of encountering exceptions during object finalization is related to another other scenario that could possibly lead to a memory leak - object resurrection. Object resurrection is often done intentionally by creating a strong reference to the object from being finalized, from another object. When object resurrection is misused it will lead to a memory leak in combination with other sources of memory leaks.</p>\n\n<p>There are plenty more examples that you can conjure up - like</p>\n\n<ul>\n<li>Managing a <code>List</code> instance where you are only adding to the list and not deleting from it (although you should be getting rid of elements you no longer need), or</li>\n<li>Opening <code>Socket</code>s or <code>File</code>s, but not closing them when they are no longer needed (similar to the above example involving the <code>Connection</code> class).</li>\n<li>Not unloading Singletons when bringing down a Java EE application. Apparently, the Classloader that loaded the singleton class will retain a reference to the class, and hence the singleton instance will never be collected. When a new instance of the application is deployed, a new class loader is usually created, and the former class loader will continue to exist due to the singleton.</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":6504,"user_id":573057,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/f857595894d2c4009a790ebf473a4334?s=128&d=identicon&r=PG","display_name":"earcam","link":"https://stackoverflow.com/users/573057/earcam"},"edited":false,"score":197,"creation_date":1309193716,"post_id":6471947,"comment_id":7639896,"content_license":"CC BY-SA 3.0","body":"+1 ClassLoader leaks are some of the most commonly painful memory leaks in the JEE world, often caused by 3rd party libs that transform data (BeanUtils, XML/JSON codecs).  This can happen when the lib is loaded outside your application&#39;s root classloader but holds references to your classes (eg. by caching).  When you undeploy/redeploy your app the JVM is unable to garbage collect the app&#39;s classloader (and therefore all classes loaded by it), so with repeat deploys the app server eventually borks.  If lucky you get a clue with ClassCastException z.x.y.Abc cannot be cast to z.x.y.Abc"},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"reply_to_user":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"edited":false,"score":7,"creation_date":1309463347,"post_id":6471947,"comment_id":7703480,"content_license":"CC BY-SA 3.0","body":"tomcat uses tricks and nils ALL static variables in ALL loaded classes, tomcat has a lot of dataraces and bad coding though (need to get some time and submit fixes), plus the all mind-boggling ConcurrentLinkedQueue as cache for internal (small) objects, so small that even the ConcurrentLinkedQueue.Node takes more memory."},{"owner":{"reputation":5159,"user_id":462408,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/74fc366410d9d38a50b7bd28fcc0ed3b?s=128&d=identicon&r=PG","display_name":"Adrian M","link":"https://stackoverflow.com/users/462408/adrian-m"},"reply_to_user":{"reputation":6504,"user_id":573057,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/f857595894d2c4009a790ebf473a4334?s=128&d=identicon&r=PG","display_name":"earcam","link":"https://stackoverflow.com/users/573057/earcam"},"edited":false,"score":60,"creation_date":1310116082,"post_id":6471947,"comment_id":7818746,"content_license":"CC BY-SA 3.0","body":"+1: Classloader leaks are a nightmare. I spent weeks trying to figure them out. The sad thing is, as what @earcam has said, they are mostly caused by 3rd party libs and also most profilers can&#39;t detect these leaks. There&#39;s a good and clear explanation on this blog about Classloader leaks. <a href=\"http://blogs.oracle.com/fkieviet/entry/classloader_leaks_the_dreaded_java\" rel=\"nofollow noreferrer\">blogs.oracle.com/fkieviet/entry/&hellip;</a>"},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":54383,"user_id":226958,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/F5gLZ.png?s=128&g=1","display_name":"Nicolas Raoul","link":"https://stackoverflow.com/users/226958/nicolas-raoul"},"edited":false,"score":4,"creation_date":1310403709,"post_id":6471947,"comment_id":7863720,"content_license":"CC BY-SA 3.0","body":"@Nicolas: Are you sure?  JRockit does GC Class objects by default, and HotSpot doesn&#39;t, but AFAIK JRockit still can&#39;t GC a Class or ClassLoader that is referenced by a ThreadLocal."},{"owner":{"reputation":1667,"user_id":226449,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5f16eec5bd7dc9f27f88997731d15c36?s=128&d=identicon&r=PG","display_name":"Matthijs Bierman","link":"https://stackoverflow.com/users/226449/matthijs-bierman"},"edited":false,"score":6,"creation_date":1330684383,"post_id":6471947,"comment_id":12075397,"content_license":"CC BY-SA 3.0","body":"Tomcat will try to detect these leaks for you, and warn about them: <a href=\"http://wiki.apache.org/tomcat/MemoryLeakProtection\" rel=\"nofollow noreferrer\">wiki.apache.org/tomcat/MemoryLeakProtection</a>. The most recent version will sometimes even fix the leak for you."},{"owner":{"reputation":4923,"user_id":301650,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/f27c12daaa5e5bbd744fab013c9a3edc?s=128&d=identicon&r=PG","display_name":"Nikem","link":"https://stackoverflow.com/users/301650/nikem"},"edited":false,"score":1,"creation_date":1347343615,"post_id":6471947,"comment_id":16604512,"content_license":"CC BY-SA 3.0","body":"For future references, there is one more tool trying to solve classloader leaks: <a href=\"http://plumbr.eu\" rel=\"nofollow noreferrer\">Plumbr</a>"},{"owner":{"reputation":1829,"user_id":404145,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/d6a64c6cbea7b83cfc703e18c418eb97?s=128&d=identicon&r=PG","display_name":"DiveInto","link":"https://stackoverflow.com/users/404145/diveinto"},"edited":false,"score":0,"creation_date":1352697795,"post_id":6471947,"comment_id":18201641,"content_license":"CC BY-SA 3.0","body":"@DanielPryden Does this gist(<a href=\"https://gist.github.com/4057644\" rel=\"nofollow noreferrer\">gist.github.com/4057644</a>) shows what you described? but it won&#39;t go out of memory according to my test,correct me if there is any misunderstanding,thanks"},{"owner":{"reputation":1829,"user_id":404145,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/d6a64c6cbea7b83cfc703e18c418eb97?s=128&d=identicon&r=PG","display_name":"DiveInto","link":"https://stackoverflow.com/users/404145/diveinto"},"edited":false,"score":0,"creation_date":1352949882,"post_id":6471947,"comment_id":18290999,"content_license":"CC BY-SA 3.0","body":"@DanielPryden I have update my gist,please check: <a href=\"https://gist.github.com/4057644#gistcomment-595443\" rel=\"nofollow noreferrer\">gist.github.com/4057644#gistcomment-595443</a>"},{"owner":{"reputation":928,"user_id":1839624,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/HTeQF.jpg?s=128&g=1","display_name":"Sid","link":"https://stackoverflow.com/users/1839624/sid"},"edited":false,"score":1,"creation_date":1376326696,"post_id":6471947,"comment_id":26659620,"content_license":"CC BY-SA 3.0","body":"Okay A little stupid question...Will it be termed as a memory leak,if the GC(Garbage Collector) doesn&#39;t kicks in? I am not sure whether one can invoke GC explicitly."},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":928,"user_id":1839624,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/HTeQF.jpg?s=128&g=1","display_name":"Sid","link":"https://stackoverflow.com/users/1839624/sid"},"edited":false,"score":1,"creation_date":1376439037,"post_id":6471947,"comment_id":26710685,"content_license":"CC BY-SA 3.0","body":"@Sid: the issue is not whether or not the GC actually runs (Raymond Chen argues that a no-op GC is a valid implementation, see <a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx\" rel=\"nofollow noreferrer\">Everybody thinks about garbage collection the wrong way</a>), it&#39;s whether, even if the GC did run, it would be unable to reclaim an object that is no longer visible to any running code.  A ClassLoader leak is one way to end up with objects that cannot be found or used, but that still occupy memory and are rooted for GC purposes, so the GC cannot reclaim them."},{"owner":{"reputation":5356,"user_id":3470841,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/39baa24f1e7778a959522c337ca474b3?s=128&d=identicon&r=PG&f=1","display_name":"Jack","link":"https://stackoverflow.com/users/3470841/jack"},"edited":false,"score":0,"creation_date":1400036040,"post_id":6471947,"comment_id":36312658,"content_license":"CC BY-SA 3.0","body":"It would be great if you could provide the code, I could not get all the steps! How to create one with a non-static member ? thanks."},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":5356,"user_id":3470841,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/39baa24f1e7778a959522c337ca474b3?s=128&d=identicon&r=PG&f=1","display_name":"Jack","link":"https://stackoverflow.com/users/3470841/jack"},"edited":false,"score":0,"creation_date":1400619205,"post_id":6471947,"comment_id":36552038,"content_license":"CC BY-SA 3.0","body":"@JackMoore: I don&#39;t have &quot;the code&quot;, this is just an example of a systemic problem. The issue is that a ThreadLocal creates a strong reference to an instance of a class, and through that instance to the class itself (and to all data statically reachable from the class), including the ClassLoader that loaded the class. But you can clear all references to the ThreadLocal object instance and not clear the underlying GC reference as long as the referenced Thread is still running. Basically, the Thread has an invisible, uncollectable reference to the ThreadLocal storage, which thus leaks."},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":1471,"user_id":2184517,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/7ec3063dc4e0ca98ab2a4c8bebde43cb?s=128&d=identicon&r=PG","display_name":"AfterWorkGuinness","link":"https://stackoverflow.com/users/2184517/afterworkguinness"},"edited":false,"score":0,"creation_date":1400619544,"post_id":6471947,"comment_id":36552268,"content_license":"CC BY-SA 3.0","body":"@AfterWorkGuinness: See my response to Jack Moore. Does that make sense? The Thread itself can be a GC root even if, for all other intents and purposes, there are no more references to the given value reachable from Java code. If you have a thread pool and you load and unload classes using a ClassLoader, it&#39;s entirely possible that any particular thread in the pool may outlive the classes, and can this keep a large amount of memory (all classes in the ClassLoader, and all data statically reachable from any of them) &quot;reachable&quot; for GC purposes although the values can&#39;t be reached from code."},{"owner":{"reputation":1471,"user_id":2184517,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/7ec3063dc4e0ca98ab2a4c8bebde43cb?s=128&d=identicon&r=PG","display_name":"AfterWorkGuinness","link":"https://stackoverflow.com/users/2184517/afterworkguinness"},"edited":false,"score":0,"creation_date":1408721516,"post_id":6471947,"comment_id":39710748,"content_license":"CC BY-SA 3.0","body":"@DanielPryden could you post a code snipped for this ? I&#39;m having trouble visualizing it."},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":2859,"user_id":2174742,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/b55fc4a8d0d662f34865653f79ef343b?s=128&d=identicon&r=PG","display_name":"igaurav","link":"https://stackoverflow.com/users/2174742/igaurav"},"edited":false,"score":0,"creation_date":1428792192,"post_id":6471947,"comment_id":47315956,"content_license":"CC BY-SA 3.0","body":"@igaurav: Regarding your edit to this answer, please see the discussion at <a href=\"http://meta.stackoverflow.com/questions/289814\">meta.stackoverflow.com/questions/289814</a>"},{"owner":{"reputation":24196,"user_id":5108418,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/AN6Pg.png?s=128&g=1","display_name":"Tamas Hegedus","link":"https://stackoverflow.com/users/5108418/tamas-hegedus"},"edited":false,"score":6,"creation_date":1459711027,"post_id":6471947,"comment_id":60396632,"content_license":"CC BY-SA 3.0","body":"I think this is not a &quot;true&quot; memory leak. One could still retrieve the loaded classes by investigating the <code>Thread</code> object&#39;s package visible <code>threadLocals</code> member field via reflection. So this isn&#39;t a more &quot;true&quot; leak than a simple unused private field."},{"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"reply_to_user":{"reputation":24196,"user_id":5108418,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/AN6Pg.png?s=128&g=1","display_name":"Tamas Hegedus","link":"https://stackoverflow.com/users/5108418/tamas-hegedus"},"edited":false,"score":0,"creation_date":1459719689,"post_id":6471947,"comment_id":60400017,"content_license":"CC BY-SA 3.0","body":"@TamasHegedus: It&#39;s true that you can find specific cases of this using reflection, but that only works if the installed <code>SecurityManager</code> allows it, and it also depends on you being able to programmatically identify a type as being no longer in use. In a constrained case this is certainly doable, but I don&#39;t think it solves the general case."}],"owner":{"reputation":53926,"user_id":128397,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG","display_name":"Daniel Pryden","link":"https://stackoverflow.com/users/128397/daniel-pryden"},"comment_count":17,"is_accepted":true,"community_owned_date":1311330284,"score":2405,"last_activity_date":1574782304,"last_edit_date":1574782304,"creation_date":1308938710,"answer_id":6471947,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>Here's a good way to create a true memory leak (objects inaccessible by running code but still stored in memory) in pure Java:</p>\n\n<ol>\n<li>The application creates a long-running thread (or use a thread pool to leak even faster).</li>\n<li>The thread loads a class via an (optionally custom) <code>ClassLoader</code>.</li>\n<li>The class allocates a large chunk of memory (e.g. <code>new byte[1000000]</code>), stores a strong reference to it in a static field, and then stores a reference to itself in a <code>ThreadLocal</code>.  Allocating the extra memory is optional (leaking the class instance is enough), but it will make the leak work that much faster.</li>\n<li>The application clears all references to the custom class or the <code>ClassLoader</code> it was loaded from.</li>\n<li>Repeat.</li>\n</ol>\n\n<p>Due to the way <code>ThreadLocal</code> is implemented in Oracle's JDK, this creates a memory leak:</p>\n\n<ul>\n<li>Each <code>Thread</code> has a private field <code>threadLocals</code>, which actually stores the thread-local values.</li>\n<li>Each <em>key</em> in this map is a weak reference to a <code>ThreadLocal</code> object, so after that <code>ThreadLocal</code> object is garbage-collected, its entry is removed from the map.</li>\n<li>But each <em>value</em> is a strong reference, so when a value (directly or indirectly) points to the <code>ThreadLocal</code> object that is its <em>key</em>, that object will neither be garbage-collected nor removed from the map as long as the thread lives.</li>\n</ul>\n\n<p>In this example, the chain of strong references looks like this:</p>\n\n<p><code>Thread</code> object â <code>threadLocals</code> map â instance of example class â example class â static <code>ThreadLocal</code> field â <code>ThreadLocal</code> object.</p>\n\n<p>(The <code>ClassLoader</code> doesn't really play a role in creating the leak, it just makes the leak worse because of this additional reference chain: example class â <code>ClassLoader</code> â all the classes it has loaded. It was even worse in many JVM implementations, especially prior to Java 7, because classes and <code>ClassLoader</code>s were allocated straight into permgen and were never garbage-collected at all.)</p>\n\n<p>A variation on this pattern is why application containers (like Tomcat) can leak memory like a sieve if you frequently redeploy applications which happen to use <code>ThreadLocal</code>s that in some way point back to themselves. This can happen for a number of subtle reasons and is often hard to debug and/or fix.</p>\n\n<p><strong>Update</strong>: Since lots of people keep asking for it, <a href=\"https://gist.github.com/dpryden/b2bb29ee2d146901b4ae\" rel=\"noreferrer\">here's some example code that shows this behavior in action</a>.</p>\n\n\n"},{"comments":[{"owner":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":5,"creation_date":1311352000,"post_id":6473952,"comment_id":8062580,"content_license":"CC BY-SA 3.0","body":"And where is the memory leak here?"},{"owner":{"reputation":61221,"user_id":183406,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ca03242df77ec2d8f70f2cea0d6209be?s=128&d=identicon&r=PG","display_name":"meriton","link":"https://stackoverflow.com/users/183406/meriton"},"reply_to_user":{"reputation":6498,"user_id":192512,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/360d5fa3c4832c1782a97493afe5bd12?s=128&d=identicon&r=PG","display_name":"maniek","link":"https://stackoverflow.com/users/192512/maniek"},"edited":false,"score":30,"creation_date":1311427592,"post_id":6473952,"comment_id":8073424,"content_license":"CC BY-SA 3.0","body":"@maniek: I did not mean to imply that this code exhibits a memory leak. I quoted to it to show that sometimes non-obvious code is required to avoid accidental object retention."},{"owner":{"reputation":20116,"user_id":1173112,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1","display_name":"Koray Tugay","link":"https://stackoverflow.com/users/1173112/koray-tugay"},"edited":false,"score":1,"creation_date":1402338982,"post_id":6473952,"comment_id":37224231,"content_license":"CC BY-SA 3.0","body":"What is     RangeCheck(index); ?"},{"owner":{"reputation":658,"user_id":4101264,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/b0e0945c2ed83d973f412e6e4b9d0141?s=128&d=identicon&r=PG&f=1","display_name":"rents","link":"https://stackoverflow.com/users/4101264/rents"},"edited":false,"score":6,"creation_date":1435371734,"post_id":6473952,"comment_id":50186873,"content_license":"CC BY-SA 3.0","body":"Joshua Bloch gave this example in Effective Java showing a simple implementation of Stacks. A very good answer."},{"owner":{"reputation":336,"user_id":9465588,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1","display_name":"DGoiko","link":"https://stackoverflow.com/users/9465588/dgoiko"},"edited":false,"score":0,"creation_date":1590848656,"post_id":6473952,"comment_id":109839169,"content_license":"CC BY-SA 4.0","body":"But that would not be a REAL memory leak, even if forgot. The element would still be SAFELLY accessed with Reflection, it would just not be obvious and directly accessible through List interface, but the object and the reference are still there, and can be safelly accessed."},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"edited":false,"score":0,"creation_date":1612425736,"post_id":6473952,"comment_id":116764104,"content_license":"CC BY-SA 4.0","body":"Brilliant answer, this is why it&#39;s surprisingly easy to leak memory in garbage-collected languages"}],"owner":{"reputation":61221,"user_id":183406,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ca03242df77ec2d8f70f2cea0d6209be?s=128&d=identicon&r=PG","display_name":"meriton","link":"https://stackoverflow.com/users/183406/meriton"},"comment_count":6,"is_accepted":false,"community_owned_date":1311330284,"score":121,"last_activity_date":1605938830,"last_edit_date":1605938830,"creation_date":1308950917,"answer_id":6473952,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>Probably one of the simplest examples of a potential memory leak, and how to avoid it, is the implementation of ArrayList.remove(int):</p>\n<pre><code>public E remove(int index) {\n    RangeCheck(index);\n\n    modCount++;\n    E oldValue = (E) elementData[index];\n\n    int numMoved = size - index - 1;\n    if (numMoved &gt; 0)\n        System.arraycopy(elementData, index + 1, elementData, index,\n                numMoved);\n    elementData[--size] = null; // (!) Let gc do its work\n\n    return oldValue;\n}\n</code></pre>\n<p>If you were implementing it yourself, would you have thought to clear the array element that is no longer used (<code>elementData[--size] = null</code>)? That reference might keep a huge object alive ...</p>\n"},{"comments":[{"owner":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":1,"creation_date":1311352452,"post_id":6507454,"comment_id":8062721,"content_license":"CC BY-SA 3.0","body":"The android platform gives the exemple of a memory leak created by <a href=\"http://developer.android.com/resources/articles/avoiding-memory-leaks.html\" rel=\"nofollow noreferrer\">caching a Bitmap in the static field of a View</a>."}],"owner":{"reputation":3098,"user_id":210445,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/a521b7785f1649ac1c56668563039d52?s=128&d=identicon&r=PG","display_name":"pillingworth","link":"https://stackoverflow.com/users/210445/pillingworth"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":37,"last_activity_date":1455637224,"last_edit_date":1455637224,"creation_date":1309268843,"answer_id":6507454,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A common example of this in GUI code is when creating a widget/component and adding a listener to some static/application scoped object and then not removing the listener when the widget is destroyed. Not only do you get a memory leak, but also a performance hit as when whatever you are listening to fires events, all your old listeners are called too.</p>\n"},{"comments":[{"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"edited":false,"score":4,"creation_date":1309652314,"post_id":6532172,"comment_id":7732066,"content_license":"CC BY-SA 3.0","body":"Just to nitpick your example code: I think numbers (or strings starting with numbers) are not allowed as element names in XML."},{"owner":{"reputation":2568,"user_id":202504,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9e311ecc62a10f9117059aa9bf27ec9e?s=128&d=identicon&r=PG","display_name":"jmiserez","link":"https://stackoverflow.com/users/202504/jmiserez"},"edited":false,"score":0,"creation_date":1492544828,"post_id":6532172,"comment_id":74017644,"content_license":"CC BY-SA 3.0","body":"Note that this is no longer true for JDK 7+, where String interning happens on the heap. See this article for a detailed writeup: <a href=\"http://java-performance.info/string-intern-in-java-6-7-8/\" rel=\"nofollow noreferrer\">java-performance.info/string-intern-in-java-6-7-8</a>"},{"owner":{"reputation":536,"user_id":3913051,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/6dNOT.jpg?s=128&g=1","display_name":"anubhs","link":"https://stackoverflow.com/users/3913051/anubhs"},"edited":false,"score":0,"creation_date":1591117423,"post_id":6532172,"comment_id":109931866,"content_license":"CC BY-SA 4.0","body":"So, i think using StringBuffer in place of String would resolve this problem? wont it?"}],"owner":{"reputation":682,"user_id":339243,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/628bb0360b010b44601229b0a5e3829f?s=128&d=identicon&r=PG","display_name":"Ron","link":"https://stackoverflow.com/users/339243/ron"},"comment_count":3,"is_accepted":false,"community_owned_date":1311330284,"score":32,"last_activity_date":1455637464,"last_edit_date":1455637464,"creation_date":1309423159,"answer_id":6532172,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I have had a nice \"memory leak\" in relation to PermGen and XML parsing once.\nThe XML parser we used (I can't remember which one it was) did a String.intern() on tag names, to make comparison faster.\nOne of our customers had the great idea to store data values not in XML attributes or text, but as tagnames, so we had a document like:</p>\n\n<pre><code>&lt;data&gt;\n   &lt;1&gt;bla&lt;/1&gt;\n   &lt;2&gt;foo&lt;/&gt;\n   ...\n&lt;/data&gt;\n</code></pre>\n\n<p>In fact, they did not use numbers but longer textual IDs (around 20 characters), which were unique and came in at a rate of 10-15 million a day. That makes 200&nbsp;MB of rubbish a day, which is never needed again, and never GCed (since it is in PermGen). We had permgen set to 512&nbsp;MB, so it took around two days for the out-of-memory exception (OOME) to arrive...</p>\n"},{"comments":[{"owner":{"reputation":64329,"user_id":277304,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4c90624b2aa9623d5ba30db0e34b2000?s=128&d=identicon&r=PG","display_name":"leonbloy","link":"https://stackoverflow.com/users/277304/leonbloy"},"edited":false,"score":25,"creation_date":1310176480,"post_id":6540248,"comment_id":7833433,"content_license":"CC BY-SA 3.0","body":"<code>Creating but not starting a Thread...</code> Yikes, I was badly bitten by this one some centuries ago! (Java 1.3)"},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"reply_to_user":{"reputation":64329,"user_id":277304,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4c90624b2aa9623d5ba30db0e34b2000?s=128&d=identicon&r=PG","display_name":"leonbloy","link":"https://stackoverflow.com/users/277304/leonbloy"},"edited":false,"score":0,"creation_date":1310194328,"post_id":6540248,"comment_id":7834914,"content_license":"CC BY-SA 3.0","body":"@leonbloy, before it was even worse as the thread was added straight to the threadgroup, not starting meant very hard leak. Not it just increases the <code>unstarted</code> count but that prevents the thread group from destroying (lesser evil but still a leak)"},{"owner":{"reputation":58646,"user_id":8946,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/8c6e2d5c384c074a893830b34f1c0a9a?s=128&d=identicon&r=PG","display_name":"Lawrence Dol","link":"https://stackoverflow.com/users/8946/lawrence-dol"},"edited":false,"score":0,"creation_date":1510109223,"post_id":6540248,"comment_id":81291088,"content_license":"CC BY-SA 3.0","body":"Thank you! <b>&quot;Calling <code>ThreadGroup.destroy()</code> when the ThreadGroup has no threads itself...&quot;</b> is an incredibly subtle bug; I&#39;ve been chasing this for hours, led astray because enumerating the thread in my control GUI showed nothing, but the thread group and, presumably, at least one child group would not go away."},{"owner":{"reputation":58646,"user_id":8946,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/8c6e2d5c384c074a893830b34f1c0a9a?s=128&d=identicon&r=PG","display_name":"Lawrence Dol","link":"https://stackoverflow.com/users/8946/lawrence-dol"},"edited":false,"score":2,"creation_date":1510261774,"post_id":6540248,"comment_id":81372536,"content_license":"CC BY-SA 3.0","body":"@bestsss : I&#39;m curious, why would you want to remove a shutdown hook, given that it runs at, well, JVM shutdown?"},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"reply_to_user":{"reputation":58646,"user_id":8946,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/8c6e2d5c384c074a893830b34f1c0a9a?s=128&d=identicon&r=PG","display_name":"Lawrence Dol","link":"https://stackoverflow.com/users/8946/lawrence-dol"},"edited":false,"score":1,"creation_date":1599750776,"post_id":6540248,"comment_id":112876921,"content_license":"CC BY-SA 4.0","body":"@LawrenceDol you&#39;re no longer interested in knowing when the JVM shuts down?"},{"owner":{"reputation":58646,"user_id":8946,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/8c6e2d5c384c074a893830b34f1c0a9a?s=128&d=identicon&r=PG","display_name":"Lawrence Dol","link":"https://stackoverflow.com/users/8946/lawrence-dol"},"reply_to_user":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"edited":false,"score":0,"creation_date":1599840538,"post_id":6540248,"comment_id":112909393,"content_license":"CC BY-SA 4.0","body":"@user253751 : This is in the context of memory leaks. In that context failing to remove a shutdown hook after it&#39;s used is not a leak because the JVM is shutting down. Granted, though, if you only temporarily need to do something on shutdown, then not removing it and continually adding new handlers would leak."}],"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"comment_count":6,"is_accepted":false,"community_owned_date":1311330284,"score":280,"last_activity_date":1455637946,"last_edit_date":1455637946,"creation_date":1309463113,"answer_id":6540248,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Below there will be a non-obvious case where Java leaks, besides the standard case of forgotten listeners, static references, bogus/modifiable keys in hashmaps, or just threads stuck without any chance to end their life-cycle.</p>\n\n<ul>\n<li><code>File.deleteOnExit()</code> - always leaks the string, <del>if the string is a substring, the leak is even worse (the underlying char[] is also leaked)</del> - <em>in Java&nbsp;7 substring also copies the <code>char[]</code>, so the later doesn't apply</em>; @Daniel, no needs for votes, though.</li>\n</ul>\n\n<p>I'll concentrate on threads to show the danger of unmanaged threads mostly, don't wish to even touch swing.</p>\n\n<ul>\n<li><p><code>Runtime.addShutdownHook</code> and not remove... and then even with removeShutdownHook due to a bug in ThreadGroup class regarding unstarted threads it may not get collected, effectively leak the ThreadGroup. JGroup has the leak in GossipRouter.</p></li>\n<li><p>Creating, but not starting, a <code>Thread</code> goes into the same category as above.</p></li>\n<li><p>Creating a thread inherits the <code>ContextClassLoader</code> and <code>AccessControlContext</code>, plus the <code>ThreadGroup</code> and any <code>InheritedThreadLocal</code>, all those references are potential leaks, along with the entire classes loaded by the classloader and all static references, and ja-ja. The effect is especially visible with the entire j.u.c.Executor framework that features a super simple <code>ThreadFactory</code> interface, yet most developers have no clue of the lurking danger. Also a lot of libraries do start threads upon request (way too many industry popular libraries).</p></li>\n<li><p><code>ThreadLocal</code> caches; those are evil in many cases. I am sure everyone has seen quite a bit of simple caches based on ThreadLocal, well the bad news: if the thread keeps going more than expected the life the context ClassLoader, it is a pure nice little leak. Do not use ThreadLocal caches unless really needed.</p></li>\n<li><p>Calling <code>ThreadGroup.destroy()</code> when the ThreadGroup has no threads itself, but it still keeps child ThreadGroups. A bad leak that will prevent the ThreadGroup to remove from its parent, but all the children become un-enumerateable.</p></li>\n<li><p>Using WeakHashMap and the value (in)directly references the key. This is a hard one to find without a heap dump. That applies to all extended <code>Weak/SoftReference</code> that might keep a hard reference back to the guarded object.</p></li>\n<li><p>Using <code>java.net.URL</code> with the HTTP(S) protocol and loading the resource from(!). This one is special, the <code>KeepAliveCache</code> creates a new thread in the system ThreadGroup which leaks the current thread's context classloader. The thread is created upon the first request when no alive thread exists, so either you may get lucky or just leak. <em>The leak is already fixed in Java&nbsp;7 and the code that creates thread properly removes the context classloader.</em> There are few more cases (<del>like ImageFetcher</del>, <em>also fixed</em>) of creating similar threads.</p></li>\n<li><p>Using <code>InflaterInputStream</code> passing <code>new java.util.zip.Inflater()</code> in the constructor (<code>PNGImageDecoder</code> for instance) and not calling <code>end()</code> of the inflater. Well, if you pass in the constructor with just <code>new</code>, no chance... And yes, calling <code>close()</code> on the stream does not close the inflater if it's manually passed as constructor parameter. This is not a true leak since it'd be released by the finalizer... when it deems it necessary. Till that moment it eats native memory so badly it can cause Linux oom_killer to kill the process with impunity. The main issue is that finalization in Java is very unreliable and G1 made it worse till 7.0.2. Moral of the story: release native resources as soon as you can; the finalizer is just too poor.</p></li>\n<li><p>The same case with <code>java.util.zip.Deflater</code>. This one is far worse since Deflater is memory hungry in Java, i.e. always uses 15&nbsp;bits (max) and 8&nbsp;memory levels (9 is max) allocating several hundreds KB of native memory. Fortunately, <code>Deflater</code> is not widely used and to my knowledge JDK contains no misuses. Always call <code>end()</code> if you manually create a <code>Deflater</code> or <code>Inflater</code>. The best part of the last two: <em>you can't find them via normal profiling tools available.</em></p></li>\n</ul>\n\n<p><em>(I can add some more time wasters I have encountered upon request.)</em></p>\n\n<p>Good luck and stay safe; leaks are evil!</p>\n"},{"comments":[{"owner":{"reputation":411,"user_id":60624,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/41f66d0289b4f1317755527ba432fd38?s=128&d=identicon&r=PG","display_name":"ehabkost","link":"https://stackoverflow.com/users/60624/ehabkost"},"edited":false,"score":31,"creation_date":1311315156,"post_id":6545142,"comment_id":8052701,"content_license":"CC BY-SA 3.0","body":"I find it funny that on other answers people are looking for those edge cases and tricks and seem to be completely missing the point. They could just show code that keep useless references to objects that will never use again, and never remove those references; one may say those cases are not &quot;true&quot; memory leaks because there are still references to those objects around, but if the program never use those references again and also never drop them, it is completely equivalent to (and as bad as) a &quot;true memory leak&quot;."},{"owner":{"reputation":25958,"user_id":257356,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/ff30e750ecad4c76dd1fa0c448f15b90?s=128&d=identicon&r=PG","display_name":"SyntaxT3rr0r","link":"https://stackoverflow.com/users/257356/syntaxt3rr0r"},"edited":false,"score":0,"creation_date":1311335358,"post_id":6545142,"comment_id":8057013,"content_license":"CC BY-SA 3.0","body":"@Nicolas Bousquet: <i>&quot;Memory leak is indeed trully possible&quot;</i>   Thank you so much. +15 upvotes.  Nice.  I got yelled at here for stating that fact, as the premises of a question about the Go language: <a href=\"http://stackoverflow.com/questions/4400311\">stackoverflow.com/questions/4400311</a>   This question still has negative downvotes :("},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1368117702,"post_id":6545142,"comment_id":23624853,"content_license":"CC BY-SA 3.0","body":"The GC in Java and .NET is in some sense predicated on the assumption graph of objects that hold references to other objects is the same as the graph of objects that &quot;care about&quot; other objects.  In reality, it&#39;s possible that edges can exist in the reference graph that don&#39;t represent &quot;caring&quot; relations, and it&#39;s possible for an object to care about the existence of another object even if no direct or indirect reference path (even using <code>WeakReference</code>) exists from one to the other.  If a object reference had a spare bit, it could be helpful to have a &quot;cares about the target&quot; indicator..."},{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1368118042,"post_id":6545142,"comment_id":23625024,"content_license":"CC BY-SA 3.0","body":"...and have the system provide notifications (via means similar to <code>PhantomReference</code>) if an object was found not to have anyone that cared about it.  <code>WeakReference</code> comes somewhat close, but must be converted to a strong reference before it can be used; if a GC cycle occurs while the strong reference exists, the target will be assumed to be useful."},{"owner":{"reputation":20044,"user_id":220060,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/56533d50fdfceb887852bf50be54678b?s=128&d=identicon&r=PG","display_name":"nalply","link":"https://stackoverflow.com/users/220060/nalply"},"edited":false,"score":0,"creation_date":1492517770,"post_id":6545142,"comment_id":73998599,"content_license":"CC BY-SA 3.0","body":"This is in my opinion the correct answer. We wrote a simulation years ago. Somehow we accidentally linked previous state to current state creating a memory leak. Because of a deadline we never resolved the memory leak but made it a &#171;feature&#187; by documenting it."},{"owner":{"reputation":126,"user_id":8593760,"user_type":"registered","profile_image":"https://i.stack.imgur.com/wbomf.png?s=128&g=1","display_name":"Jim Newpower","link":"https://stackoverflow.com/users/8593760/jim-newpower"},"edited":false,"score":1,"creation_date":1605112692,"post_id":6545142,"comment_id":114553889,"content_license":"CC BY-SA 4.0","body":"Agree with this answer. To get into the interviewer&#39;s head a bit: there is a connotation among perhaps less-experienced developers, that Java prevents memory leaks (unlike C/C++, for example). So, question for junior developer: how to create a memory leak in Java? There are many ways, and most of them are because of simple carelessness, illustrated nicely above."}],"owner":{"reputation":3818,"user_id":564145,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4319b3222d9ea807b60b0bc163dfea41?s=128&d=identicon&r=PG","display_name":"Nicolas Bousquet","link":"https://stackoverflow.com/users/564145/nicolas-bousquet"},"comment_count":6,"is_accepted":false,"community_owned_date":1311330284,"score":214,"last_activity_date":1518506867,"last_edit_date":1518506867,"creation_date":1309506841,"answer_id":6545142,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Most examples here are \"too complex\". They are edge cases. With these examples, the programmer made a mistake (like don't redefining equals/hashcode), or has been bitten by a corner case of the JVM/JAVA (load of class with static...). I think that's not the type of example an interviewer want or even the most common case.</p>\n\n<p>But there are really simpler cases for memory leaks. The garbage collector only frees what is no longer referenced. We as Java developers don't care about memory. We allocate it when needed and let it be freed automatically. Fine.</p>\n\n<p>But any long-lived application tend to have shared state. It can be anything, statics, singletons... Often non-trivial applications tend to make complex objects graphs. Just forgetting to set a reference to null or more often forgetting to remove one object from a collection is enough to make a memory leak.</p>\n\n<p>Of course all sort of listeners (like UI listeners), caches, or any long-lived shared state tend to produce memory leak if not properly handled. What shall be understood is that this is not a Java corner case, or a problem with the garbage collector. It is a design problem. We design that we add a listener to a long-lived object, but we don't remove the listener when no longer needed. We cache objects, but we have no strategy to remove them from the cache.</p>\n\n<p>We maybe have a complex graph that store the previous state that is needed by a computation. But the previous state is itself linked to the state before and so on.</p>\n\n<p>Like we have to close SQL connections or files. We need to set proper references to null and remove elements from the collection. We shall have proper caching strategies (maximum memory size, number of elements, or timers). All objects that allow a listener to be notified must provide both a addListener and removeListener method. And when these notifiers are no longer used, they must clear their listener list.</p>\n\n<p>A memory leak is indeed truly possible and is perfectly predictable. No need for special language features or corner cases. Memory leaks are either an indicator that something is maybe missing or even of design problems.</p>\n"},{"comments":[{"owner":{"reputation":5234,"user_id":18796,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tR2iM.jpg?s=128&g=1","display_name":"Ian McLaird","link":"https://stackoverflow.com/users/18796/ian-mclaird"},"edited":false,"score":189,"creation_date":1310530131,"post_id":6548647,"comment_id":7892919,"content_license":"CC BY-SA 3.0","body":"I&#39;d disagree that context and session attributes are &quot;leaks.&quot;  They&#39;re just long-lived variables.  And the static final field is more or less just a constant.  Maybe large constants should be avoided, but I don&#39;t think it&#39;s fair to call it a memory leak."},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":87,"creation_date":1310927905,"post_id":6548647,"comment_id":7966870,"content_license":"CC BY-SA 3.0","body":"<i>(Unclosed) open streams ( file , network etc... )</i>, doesn&#39;t leak for real, during finalization (which will be after the next GC cycle) close() is going to be scheduled (<code>close()</code> is usually not invoked in the finalizer thread since might be a blocking operation). It&#39;s a bad practice not to close, but it doesn&#39;t cause a leak. Unclosed java.sql.Connection is the same."},{"owner":{"reputation":28286,"user_id":176071,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/88b8fe9e9bc03bd33208830fa612dc50?s=128&d=identicon&r=PG","display_name":"mbauman","link":"https://stackoverflow.com/users/176071/mbauman"},"edited":false,"score":37,"creation_date":1311298344,"post_id":6548647,"comment_id":8050748,"content_license":"CC BY-SA 3.0","body":"In most sane JVMs, it appears as though the String class only has a weak reference on its <code>intern</code> hashtable contents.  As such, it <i>is</i> garbage collected properly and not a leak. (but IANAJP) <a href=\"http://mindprod.com/jgloss/interned.html#GC\" rel=\"nofollow noreferrer\">mindprod.com/jgloss/interned.html#GC</a>"},{"owner":{"reputation":16262,"user_id":254477,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/a5f7ff911c368f70c10417b8de5c8c2c?s=128&d=identicon&r=PG","display_name":"Sled","link":"https://stackoverflow.com/users/254477/sled"},"edited":false,"score":0,"creation_date":1311345833,"post_id":6548647,"comment_id":8060445,"content_license":"CC BY-SA 3.0","body":"@Prashant Bade I believe the final 2 examples (i.e. new Boolean and new String) are not memory leaks, but just wastes of memory. Both should end up getting garbage collected eventually and are thus not true leaks."},{"owner":{"reputation":16285,"user_id":912319,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/bb15dcf43c8fe4a01b9d16e93690e118?s=128&d=identicon&r=PG","display_name":"Kanagavelu Sugumar","link":"https://stackoverflow.com/users/912319/kanagavelu-sugumar"},"edited":false,"score":45,"creation_date":1347306777,"post_id":6548647,"comment_id":16596213,"content_license":"CC BY-SA 3.0","body":"How Static field holding object reference [esp final field] is a memory leak ??"},{"owner":{"reputation":3539,"user_id":59724,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/50954aec029a724824dca5a32a1c00fa?s=128&d=identicon&r=PG","display_name":"Graham","link":"https://stackoverflow.com/users/59724/graham"},"edited":false,"score":2,"creation_date":1360497526,"post_id":6548647,"comment_id":20722763,"content_license":"CC BY-SA 3.0","body":"Reference loops used to be leaks as well. That is where you have instance A referencing instance B, which references instance C, which references instance A, but nothing else references any of those. (The loop may need to be bigger)"},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":0,"creation_date":1362622342,"post_id":6548647,"comment_id":21527116,"content_license":"CC BY-SA 3.0","body":"AFAIK this is not true because (as far as I remember) the GC searches for detached sets. But that may depend on the GC in use. @Sugumar: a memory leak is generally just a bug, so a static list of strong references <i>CAN</i> constitute a memory leak if one does not properly handle it."},{"owner":{"reputation":1521,"user_id":2536255,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/4932f3a9c83d4d1407b5d8c4c846fa9e?s=128&d=identicon&r=PG","display_name":"Mac","link":"https://stackoverflow.com/users/2536255/mac"},"reply_to_user":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1374928299,"post_id":6548647,"comment_id":26141397,"content_license":"CC BY-SA 3.0","body":"@bestsss: I couldn&#39;t get your point about execution of <code>close()</code> method during next GC cycle..Who calls this method if the application is not calling it? And if finalizer thread is calling it..then is there any official source code for that?"},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":2,"creation_date":1376679289,"post_id":6548647,"comment_id":26815655,"content_license":"CC BY-SA 3.0","body":"<code>finalize()</code> will be called for open files, sockets, etc.  It will call <code>close()</code>. <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#finalize%28%29\" rel=\"nofollow noreferrer\">The docs for FileInputStream</a> actually specifically say as much.  But the docs are  nearly irrelevant here.  The entire reason for finalizers is to clean up stuff that would otherwise be leaked, and any class that handles native resources but doesn&#39;t implement <code>finalize()</code> is severely broken.  Fortunately, <code>java.net</code> and <code>java.io</code> were written by people who know how Java should work.  :)"},{"owner":{"reputation":4099,"user_id":1686291,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/73690bab2009bb60aaa8526b1038649f?s=128&d=identicon&r=PG&f=1","display_name":"Not a bug","link":"https://stackoverflow.com/users/1686291/not-a-bug"},"edited":false,"score":1,"creation_date":1392719529,"post_id":6548647,"comment_id":33076586,"content_license":"CC BY-SA 3.0","body":"Have a look at <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\">AutoCloseable</a>, since 1.7"},{"owner":{"reputation":487,"user_id":1764994,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/368c76db30124994c444d2ef77bf62b5?s=128&d=identicon&r=PG","display_name":"UrsulRosu","link":"https://stackoverflow.com/users/1764994/ursulrosu"},"edited":false,"score":3,"creation_date":1397218200,"post_id":6548647,"comment_id":35149873,"content_license":"CC BY-SA 3.0","body":"Memory leaks in garbage-collected languages (more properly known as unintentional object retentions) are insidious. If an object reference is unintentionally retained, not only is that object excluded from garbage collection, but so too are any objects referenced by that object, and so on. Even if only a few object references are unintentionally retained, many, many objects may be prevented from being garbage collected, with potentially large effects on performance."},{"owner":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"reply_to_user":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":7,"creation_date":1408981058,"post_id":6548647,"comment_id":39783514,"content_license":"CC BY-SA 3.0","body":"@cHao True.  The danger I&#39;ve run into isn&#39;t problems from memory being leaked by Streams.  The problem is that not enough memory is leaked by them.  You can leak a lot of handles, but still have plenty of memory.  The Garbage Collector might then decide not to bother doing a full collection because it still has plenty of memory.  This means the finalizer isn&#39;t called, so you run out of handles.  The problem is that, the finalizers will (usually) be run before you run out of memory from leaking streams, but it might not get called before you run out of something other than memory."},{"owner":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"reply_to_user":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":0,"creation_date":1408981109,"post_id":6548647,"comment_id":39783539,"content_license":"CC BY-SA 3.0","body":"@cHao Sadly, this is from personal experience fixing someone else&#39;s code."},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"reply_to_user":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"edited":false,"score":1,"creation_date":1409005964,"post_id":6548647,"comment_id":39794902,"content_license":"CC BY-SA 3.0","body":"@PatrickM: Yeah...the big problem with file streams and such isn&#39;t the memory -- it&#39;s the native handles the JVM had to borrow from the OS to create the stream.  They&#39;re typically a much more limited resource.  With that said, though, it seems like you&#39;d have to be messing with a lot of files, sockets, what-have-you -- and doing very little else -- for it to become a problem.  I&#39;ve personally written code that creates tens of thousands of sockets, streams, etc just to see what would happen.  Not much did."},{"owner":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"reply_to_user":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":2,"creation_date":1409010446,"post_id":6548647,"comment_id":39796019,"content_license":"CC BY-SA 3.0","body":"@cHao Sure.  I think the example I saw was at around 65k different handles to some sort of AWS resource&#39;s stream.  I agree you need crazy amounts.  I was just trying to point out that you might run out of &quot;handles&quot; or whatever before you run out of RAM.  Or, you might run out of memory while having plenty of room on the managed heap because the GC doesn&#39;t see the real memory pressure the object is creating off the heap."},{"owner":{"reputation":2653,"user_id":4710417,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/c53bde1b18195010c7899a03432fdf10?s=128&d=identicon&r=PG&f=1","display_name":"Daniel Newtown","link":"https://stackoverflow.com/users/4710417/daniel-newtown"},"edited":false,"score":0,"creation_date":1435559954,"post_id":6548647,"comment_id":50232569,"content_license":"CC BY-SA 3.0","body":"Please have a look at my question, thanks <a href=\"http://stackoverflow.com/questions/31108772/why-do-heap-memory-usage-and-number-of-loaded-classes-keep-increasing\" title=\"why do heap memory usage and number of loaded classes keep increasing\">stackoverflow.com/questions/31108772/&hellip;</a>"},{"owner":{"reputation":16262,"user_id":254477,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/a5f7ff911c368f70c10417b8de5c8c2c?s=128&d=identicon&r=PG","display_name":"Sled","link":"https://stackoverflow.com/users/254477/sled"},"reply_to_user":{"reputation":3539,"user_id":59724,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/50954aec029a724824dca5a32a1c00fa?s=128&d=identicon&r=PG","display_name":"Graham","link":"https://stackoverflow.com/users/59724/graham"},"edited":false,"score":1,"creation_date":1456519809,"post_id":6548647,"comment_id":59003157,"content_license":"CC BY-SA 3.0","body":"@Graham loops can only cause leaks when using reference counting, but AFAIK java has always used variations of mark-and-sweep where loops die because they can&#39;t be reached by any &quot;live&quot; objects."},{"owner":{"reputation":6257,"user_id":4451732,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1","display_name":"Franklin Yu","link":"https://stackoverflow.com/users/4451732/franklin-yu"},"reply_to_user":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"edited":false,"score":0,"creation_date":1464150325,"post_id":6548647,"comment_id":62360195,"content_license":"CC BY-SA 3.0","body":"@PatrickM, &quot;You can leak a lot of handles, but still have plenty of memory.&quot; so it should be called (maybe) &quot;handle leak&quot; instead of &quot;memory leak&quot;."},{"owner":{"reputation":936,"user_id":1035398,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bf99c70954ad688fa0930d33211e139b?s=128&d=identicon&r=PG","display_name":"Patrick M","link":"https://stackoverflow.com/users/1035398/patrick-m"},"reply_to_user":{"reputation":6257,"user_id":4451732,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1","display_name":"Franklin Yu","link":"https://stackoverflow.com/users/4451732/franklin-yu"},"edited":false,"score":0,"creation_date":1464544739,"post_id":6548647,"comment_id":62519697,"content_license":"CC BY-SA 3.0","body":"@FranklinYu If it&#39;s something that only has 2^16 handles, I&#39;d agree, since you&#39;re likely to run out of handles without running out of RAM.  There was a type of handle that had a max of 2^31 options though.  With that one, the system ran out of RAM before you ran out of handles, so I&#39;d call that a &quot;memory leak&quot; caused by a &quot;handle leak&quot;."},{"owner":{"reputation":345,"user_id":627642,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/61403b0cb70843286b6422d5d7824b33?s=128&d=identicon&r=PG","display_name":"Tejas C","link":"https://stackoverflow.com/users/627642/tejas-c"},"reply_to_user":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1488630475,"post_id":6548647,"comment_id":72323054,"content_license":"CC BY-SA 3.0","body":"@bestsss we have faced memory issues due to unclosed open streams - causing &quot;Too many open files&quot; error which in turn caused native out of memory error."},{"owner":{"reputation":816,"user_id":947488,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b99c19bbe166745fc5d29ea09ff2c562?s=128&d=identicon&r=PG","display_name":"Stefan Reich","link":"https://stackoverflow.com/users/947488/stefan-reich"},"edited":false,"score":1,"creation_date":1547142512,"post_id":6548647,"comment_id":95099967,"content_license":"CC BY-SA 4.0","body":"String.intern() is not a memory leak."},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"edited":false,"score":0,"creation_date":1612422919,"post_id":6548647,"comment_id":116763067,"content_license":"CC BY-SA 4.0","body":"If some code accidentally leaves something that is no longer needed in a static list, and it does so repeatedly until an out of memory error crashes a prod server, no one will squabble about whether to call it a &quot;memory leak&quot; at that point.  It has the same consequence as forgetting to call <code>free</code> in C."},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"reply_to_user":{"reputation":487,"user_id":1764994,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/368c76db30124994c444d2ef77bf62b5?s=128&d=identicon&r=PG","display_name":"UrsulRosu","link":"https://stackoverflow.com/users/1764994/ursulrosu"},"edited":false,"score":0,"creation_date":1612423104,"post_id":6548647,"comment_id":116763128,"content_license":"CC BY-SA 4.0","body":"@UrsulRosu I guess smart pointers, or other classes that free a lot of resources they own in their destructors, would tend to have cascading effects just as bad as garbage-collected languages though?"},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"reply_to_user":{"reputation":5234,"user_id":18796,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tR2iM.jpg?s=128&g=1","display_name":"Ian McLaird","link":"https://stackoverflow.com/users/18796/ian-mclaird"},"edited":false,"score":0,"creation_date":1612425199,"post_id":6548647,"comment_id":116763909,"content_license":"CC BY-SA 4.0","body":"@IanMcLaird wikipedia&#39;s opinion: &quot;In computer science, a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in a way that memory which is no longer needed is not released.&quot;"}],"owner":{"reputation":10030,"user_id":686478,"user_type":"registered","accept_rate":59,"profile_image":"https://www.gravatar.com/avatar/48412d269361f2a2bc20c2af45528681?s=128&d=identicon&r=PG","display_name":"Prashant Bhate","link":"https://stackoverflow.com/users/686478/prashant-bhate"},"comment_count":24,"is_accepted":false,"community_owned_date":1311330284,"score":1256,"last_activity_date":1517355147,"last_edit_date":1517355147,"creation_date":1309527235,"answer_id":6548647,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p><strong>Static field holding object reference [esp final field]</strong></p>\n\n<pre><code>class MemorableClass {\n    static final ArrayList list = new ArrayList(100);\n}\n</code></pre>\n\n<p><strong>Calling <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29\" rel=\"noreferrer\"><code>String.intern()</code></a> on lengthy String</strong></p>\n\n<pre><code>String str=readString(); // read lengthy string any source db,textbox/jsp etc..\n// This will place the string in memory pool from which you can't remove\nstr.intern();\n</code></pre>\n\n<p><strong>(Unclosed) open streams ( file , network etc... )</strong></p>\n\n<pre><code>try {\n    BufferedReader br = new BufferedReader(new FileReader(inputFile));\n    ...\n    ...\n} catch (Exception e) {\n    e.printStacktrace();\n}\n</code></pre>\n\n<p><strong>Unclosed connections</strong></p>\n\n<pre><code>try {\n    Connection conn = ConnectionFactory.getConnection();\n    ...\n    ...\n} catch (Exception e) {\n    e.printStacktrace();\n}\n</code></pre>\n\n<p><strong>Areas that are unreachable from JVM's garbage collector</strong>, such as memory allocated through native methods</p>\n\n<p>In web applications, some objects are stored in application scope until the application is explicitly stopped or removed.</p>\n\n<pre><code>getServletContext().setAttribute(\"SOME_MAP\", map);\n</code></pre>\n\n<p><strong>Incorrect or inappropriate JVM options</strong>, such as the <code>noclassgc</code> option on IBM JDK that prevents unused class garbage collection </p>\n\n<p>See <a href=\"http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tprf_tunejvm.html\" rel=\"noreferrer\">IBM jdk settings</a>.</p>\n"},{"comments":[{"owner":{"reputation":1980,"user_id":240581,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0071d920b9116a71c1d2d59b5db4d559?s=128&d=identicon&r=PG","display_name":"DaveC","link":"https://stackoverflow.com/users/240581/davec"},"edited":false,"score":24,"creation_date":1309715957,"post_id":6552732,"comment_id":7737960,"content_license":"CC BY-SA 3.0","body":"Whenever I have asked that question, I am looking for a pretty simple answer - keep growing a queue, no finally close db etc, not odd classloader/thread details, implies they understand what the gc can and cannot do for you.  Depends on the job you are interviewing for I guess."}],"owner":{"reputation":229,"user_id":771769,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2aac653e8260dc573e881f6cabd9b8aa?s=128&d=identicon&r=PG","display_name":"PlayTank","link":"https://stackoverflow.com/users/771769/playtank"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":169,"last_activity_date":1564782378,"last_edit_date":1564782378,"creation_date":1309550770,"answer_id":6552732,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>The answer depends entirely on what the interviewer thought they were asking. </p>\n\n<p>Is it possible in practice to make Java leak? Of course it is, and there are plenty of examples in the other answers.</p>\n\n<p>But there are multiple meta-questions that may have been being asked?</p>\n\n<ul>\n<li>Is a theoretically \"perfect\" Java implementation vulnerable to leaks?</li>\n<li>Does the candidate understand the difference between theory and reality?</li>\n<li>Does the candidate understand how garbage collection works?</li>\n<li>Or how garbage collection is supposed to work in an ideal case?</li>\n<li>Do they know they can call other languages through native interfaces?</li>\n<li>Do they know to leak memory in those other languages?</li>\n<li>Does the candidate even know what memory management is, and what is going on behind the scene in Java?</li>\n</ul>\n\n<p>I'm reading your meta-question as \"What's an answer I could have used in this interview situation\". And hence, I'm going to focus on interview skills instead of Java. I believe you're more likely to repeat the situation of not knowing the answer to a question in an interview than you are to be in a place of needing to know how to make Java leak. So, hopefully, this will help.</p>\n\n<p>One of the most important skills you can develop for interviewing is learning to actively listen to the questions and working with the interviewer to extract their intent. Not only does this let you answer their question the way they want, but also shows that you have some vital communication skills. And when it comes down to a choice between many equally talented developers, I'll hire the one who listens, thinks, and understands before they respond every time.</p>\n"},{"comments":[{"owner":{"reputation":77302,"user_id":32914,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/50facfccdffe2e9cabaa589205959d30?s=128&d=identicon&r=PG","display_name":"Mason Wheeler","link":"https://stackoverflow.com/users/32914/mason-wheeler"},"edited":false,"score":13,"creation_date":1390506870,"post_id":6556426,"comment_id":32132527,"content_license":"CC BY-SA 3.0","body":"That&#39;s an extremely limited (and not very useful) definition of memory leaks.  The only definition that makes sense for practical purposes is &quot;a memory leak is any condition in which the program continues to hold memory allocated after the data it holds it is no longer needed.&quot;"},{"owner":{"reputation":40704,"user_id":607407,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG","display_name":"Tom&#225;Å¡ Zato - Reinstate Monica","link":"https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"},"edited":false,"score":1,"creation_date":1451983000,"post_id":6556426,"comment_id":56959788,"content_license":"CC BY-SA 3.0","body":"The mentioned acconrad&#39;s answer was deleted?"},{"owner":{"reputation":32010,"user_id":327301,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/wJlLQ.png?s=128&g=1","display_name":"yankee","link":"https://stackoverflow.com/users/327301/yankee"},"reply_to_user":{"reputation":40704,"user_id":607407,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG","display_name":"Tom&#225;Å¡ Zato - Reinstate Monica","link":"https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"},"edited":false,"score":1,"creation_date":1451992466,"post_id":6556426,"comment_id":56965634,"content_license":"CC BY-SA 3.0","body":"@Tom&#225;Å¡Zato: No it&#39;s not. I turned the reference above to link now, so you can easily find it."},{"owner":{"reputation":14252,"user_id":1989425,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/aGyIU.png?s=128&g=1","display_name":"autistic","link":"https://stackoverflow.com/users/1989425/autistic"},"edited":false,"score":0,"creation_date":1481044085,"post_id":6556426,"comment_id":69210721,"content_license":"CC BY-SA 3.0","body":"What is object resurrection? How many times does a destructor get called? How do these questions disprove this answer?"},{"owner":{"reputation":608,"user_id":6944068,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/af770f19fffb8ff2e81681f4141c11ea?s=128&d=identicon&r=PG","display_name":"toolforger","link":"https://stackoverflow.com/users/6944068/toolforger"},"edited":false,"score":1,"creation_date":1541288248,"post_id":6556426,"comment_id":93166033,"content_license":"CC BY-SA 4.0","body":"Well, sure you can create a memory leak inside Java, despite GC, and still fulfill the above definition. Just have an append-only data structure, protected against external access so that no other code every removes it - the program cannot release the memory because it does not have the code."},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"edited":false,"score":0,"creation_date":1612424569,"post_id":6556426,"comment_id":116763678,"content_license":"CC BY-SA 4.0","body":"Knowing Java will free resources that aren&#39;t needed sounds like complete safety.  But then you run into out of memory errors in production and realize stuff that isn&#39;t needed can easily get left in places the GC won&#39;t free it.  Java can&#39;t know if something in a static variable will be needed later."},{"owner":{"reputation":6072,"user_id":200224,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/krcuc.jpg?s=128&g=1","display_name":"Andy","link":"https://stackoverflow.com/users/200224/andy"},"edited":false,"score":0,"creation_date":1612424713,"post_id":6556426,"comment_id":116763728,"content_license":"CC BY-SA 4.0","body":"&quot;at any time you could still dereference the objects you created&quot; - you could if you edit the code, but at runtime, if no code path will dereference those objects, it&#39;s literally impossible to free them"}],"owner":{"reputation":32010,"user_id":327301,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/wJlLQ.png?s=128&g=1","display_name":"yankee","link":"https://stackoverflow.com/users/327301/yankee"},"comment_count":7,"is_accepted":false,"community_owned_date":1311330284,"score":43,"last_activity_date":1451992429,"last_edit_date":1495540049,"creation_date":1309602216,"answer_id":6556426,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I can copy my answer from here:\n<a href=\"https://stackoverflow.com/questions/4948529/easiest-way-to-cause-memory-leak-in-java/4948763\">Easiest way to cause memory leak in Java?</a></p>\n\n<p>\"A memory leak, in computer science (or leakage, in this context), occurs when a computer program consumes memory but is unable to release it back to the operating system.\" (Wikipedia)</p>\n\n<p>The easy answer is: You can't. Java does automatic memory management and will free resources that are not needed for you. You can't stop this from happening. It will ALWAYS be able to release the resources. In programs with manual memory management, this is different. You cann get some memory in C using malloc(). To free the memory, you need the pointer that malloc returned and call free() on it. But if you don't have the pointer anymore (overwritten, or lifetime exceeded), then you are unfortunately incapable of freeing this memory and thus you have a memory leak.</p>\n\n<p>All the other answers so far are in my definition not really memory leaks. They all aim at filling the memory with pointless stuff real fast. But at any time you could still dereference the objects you created and thus freeing the memory --> NO LEAK. <a href=\"https://stackoverflow.com/a/4948560/327301\">acconrad's answer</a> comes pretty close though as I have to admit since his solution is effectively to just \"crash\" the garbage collector by forcing it in an endless loop).</p>\n\n<p>The long answer is: You can get a memory leak by writing a library for Java using the JNI, which can have manual memory management and thus have memory leaks. If you call this library, your java process will leak memory. Or, you can have bugs in the JVM, so that the JVM looses memory. There are probably bugs in the JVM, there may even be some known ones since garbage collection is not that trivial, but then it's still a bug. By design this is not possible. You may be asking for some java code that is effected by such a bug. Sorry I don't know one and it might well not be a bug anymore in the next Java version anyway.</p>\n"},{"owner":{"reputation":7012,"user_id":368544,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/1cd172ae553812ace293c4fe0142850b?s=128&d=identicon&r=PG","display_name":"mschonaker","link":"https://stackoverflow.com/users/368544/mschonaker"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":10,"last_activity_date":1309675791,"creation_date":1309675791,"answer_id":6561539,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I think that a valid example could be using ThreadLocal variables in an environment where threads are pooled. </p>\n\n<p>For instance, using ThreadLocal variables in Servlets to communicate with other web components, having the threads being created by the container and maintaining the idle ones in a pool. ThreadLocal variables, if not correctly cleaned up, will live there until, possibly, the same web component overwrites their values.</p>\n\n<p>Of course, once identified, the problem can be solved easily.</p>\n"},{"comments":[{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":10,"creation_date":1309894691,"post_id":6564426,"comment_id":7770748,"content_license":"CC BY-SA 3.0","body":"This is untrue. <code>finalize()</code> will not be called but the object will be collected once there won&#39;t be more references. Garbage collector is not &#39;called&#39; either."},{"owner":{"reputation":14693,"user_id":1665365,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/1ebc8ee701d6a0e0b8a4b0a9294f2c47?s=128&d=identicon&r=PG","display_name":"Tom Cammann","link":"https://stackoverflow.com/users/1665365/tom-cammann"},"edited":false,"score":1,"creation_date":1355916998,"post_id":6564426,"comment_id":19240963,"content_license":"CC BY-SA 3.0","body":"This answer is misleading, the <code>finalize()</code> method can only be called once by the JVM, but this does not mean that it cannot be re-garbage collected if the object is resurrected and then dereferenced again. If there is resource closing code in the <code>finalize()</code> method then this code will not get run again, this may cause a memory leak."}],"owner":{"reputation":2180,"user_id":751751,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/879a07113ffcb8d3673abcefc693cde5?s=128&d=identicon&r=PG","display_name":"Ben","link":"https://stackoverflow.com/users/751751/ben"},"comment_count":2,"is_accepted":false,"community_owned_date":1311330284,"score":15,"last_activity_date":1309714618,"creation_date":1309714618,"answer_id":6564426,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I don't think anyone has said this yet: you can resurrect an object by overriding the finalize() method such that finalize() stores a reference of this somewhere. The garbage collector will only be called once on the object so after that the object will never destroyed. </p>\n"},{"comments":[{"owner":{"reputation":1693,"user_id":7341563,"user_type":"registered","profile_image":"https://i.stack.imgur.com/W1iPs.png?s=128&g=1","display_name":"Sven","link":"https://stackoverflow.com/users/7341563/sven"},"edited":false,"score":1,"creation_date":1526966632,"post_id":6565985,"comment_id":87933722,"content_license":"CC BY-SA 4.0","body":"This is not because of a memory leak, but because the class loader does not unload the previous set of classes. Therefor it is not recommended to redeploy an application server without restarting the server (not the physical machine, but the app server). I have seen the same issue with WebSphere."}],"owner":{"reputation":11638,"user_id":338614,"user_type":"registered","accept_rate":22,"profile_image":"https://www.gravatar.com/avatar/76fa9e029701c45b2bfe4403cc10e290?s=128&d=identicon&r=PG","display_name":"Harald Wellmann","link":"https://stackoverflow.com/users/338614/harald-wellmann"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":36,"last_activity_date":1309732877,"creation_date":1309732877,"answer_id":6565985,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Take any web application running in any servlet container (Tomcat, Jetty, Glassfish, whatever...). Redeploy the app 10 or 20 times in a row (it may be enough to simply touch the WAR in the server's autodeploy directory.</p>\n\n<p>Unless anybody has actually tested this, chances are high that you'll get an OutOfMemoryError after a couple of redeployments, because the application did not take care to clean up after itself. You may even find a bug in your server with this test.</p>\n\n<p>The problem is, the lifetime of the container is longer than the lifetime of your application. You have to make sure that all references the container might have to objects or classes of your application can be garbage collected.</p>\n\n<p>If there is just one reference surviving the undeployment of your web app, the corresponding classloader and by consequence all classes of your web app cannot be garbage collected.</p>\n\n<p>Threads started by your application, ThreadLocal variables, logging appenders are some of the usual suspects to cause classloader leaks.</p>\n"},{"comments":[{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":13,"creation_date":1309894595,"post_id":6573191,"comment_id":7770716,"content_license":"CC BY-SA 3.0","body":"<i>This is a classic problem with reference counting garbage collectors.</i> Even 15 years ago Java didn&#39;t use ref counting. Ref. counting is also slower than GC."},{"owner":{"reputation":4117,"user_id":170196,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/819c08b7776a89bb8ee06eda7e90b2fa?s=128&d=identicon&r=PG","display_name":"Esben Skov Pedersen","link":"https://stackoverflow.com/users/170196/esben-skov-pedersen"},"edited":false,"score":5,"creation_date":1311261315,"post_id":6573191,"comment_id":8041457,"content_license":"CC BY-SA 3.0","body":"Not a memory leak. Just an infinite loop."},{"owner":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"reply_to_user":{"reputation":4117,"user_id":170196,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/819c08b7776a89bb8ee06eda7e90b2fa?s=128&d=identicon&r=PG","display_name":"Esben Skov Pedersen","link":"https://stackoverflow.com/users/170196/esben-skov-pedersen"},"edited":false,"score":2,"creation_date":1311352677,"post_id":6573191,"comment_id":8062791,"content_license":"CC BY-SA 3.0","body":"@Esben At each iteration, the previous <code>first</code> is not useful and should be garbage collected. In <i>reference counting</i> garbage collectors, the object wouldn&#39;t be freeed because there is an active reference on it (by itself). The infinite loop is here to desmonstrate the leak: when you run the program, the memory will raise indefinitely."},{"owner":{"reputation":2730,"user_id":7212809,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128","display_name":"nz_21","link":"https://stackoverflow.com/users/7212809/nz-21"},"reply_to_user":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":0,"creation_date":1541519735,"post_id":6573191,"comment_id":93240749,"content_license":"CC BY-SA 4.0","body":"@rds @ Wesley Tarle suppose the loop was <i>not</i> infinite. Would there still be a memory leak?"}],"owner":{"reputation":638,"user_id":17057,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/be4a6389cc571751f2b25828a9749000?s=128&d=identicon&r=PG","display_name":"Wesley Tarle","link":"https://stackoverflow.com/users/17057/wesley-tarle"},"comment_count":4,"is_accepted":false,"community_owned_date":1311330284,"score":11,"last_activity_date":1309792018,"creation_date":1309792018,"answer_id":6573191,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>The interviewer might have be looking for a circular reference solution:</p>\n\n<pre><code>    public static void main(String[] args) {\n        while (true) {\n            Element first = new Element();\n            first.next = new Element();\n            first.next.next = first;\n        }\n    }\n</code></pre>\n\n<p>This is a classic problem with reference counting garbage collectors.  You would then politely explain that JVMs use a much more sophisticated algorithm that doesn't have this limitation.</p>\n\n<p>-Wes Tarle</p>\n"},{"comments":[{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":2,"creation_date":1310194444,"post_id":6632102,"comment_id":7834922,"content_license":"CC BY-SA 3.0","body":"inner classes are rarely an issue. They are a straightforward case and very easy to detect. The rumor is just a rumor too."},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":2,"creation_date":1376685206,"post_id":6632102,"comment_id":26818558,"content_license":"CC BY-SA 3.0","body":"The &quot;rumor&quot; sounds like someone half-read about how generational GC works.  Long-lived-but-now-unreachable objects can indeed stick around and take up space for a while, because the JVM promoted them out of the younger generations so it could stop checking them every pass.  They will evade the piddly &quot;clean up my 5000 temp strings&quot; passes, by design.  But they&#39;re not immortal.  They&#39;re still eligible for collection, and if the VM is strapped for RAM, it will eventually run a full GC sweep and repossess that memory."}],"owner":{"reputation":4155,"user_id":64626,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/5c0d7af14be98818e15b0d6156900de5?s=128&d=identicon&r=PG","display_name":"Suroot","link":"https://stackoverflow.com/users/64626/suroot"},"comment_count":2,"is_accepted":false,"community_owned_date":1311330284,"score":22,"last_activity_date":1310174635,"creation_date":1310174635,"answer_id":6632102,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I thought it was interesting that no one used the internal class examples.  If you have an internal class; it inherently maintains a reference to the containing class.  Of course it is not technically a memory leak because Java WILL eventually clean it up; but this can cause classes to hang around longer than anticipated.</p>\n\n<pre><code>public class Example1 {\n  public Example2 getNewExample2() {\n    return this.new Example2();\n  }\n  public class Example2 {\n    public Example2() {}\n  }\n}\n</code></pre>\n\n<p>Now if you call Example1 and get an Example2 discarding Example1, you will inherently still have a link to an Example1 object.</p>\n\n<pre><code>public class Referencer {\n  public static Example2 GetAnExample2() {\n    Example1 ex = new Example1();\n    return ex.getNewExample2();\n  }\n\n  public static void main(String[] args) {\n    Example2 ex = Referencer.GetAnExample2();\n    // As long as ex is reachable; Example1 will always remain in memory.\n  }\n}\n</code></pre>\n\n<p>I've also heard a rumor that if you have a variable that exists for longer than a specific amount of time; Java assumes that it will always exist and will actually never try to clean it up if cannot be reached in code anymore.  But that is completely unverified.</p>\n"},{"owner":{"reputation":1200,"user_id":778659,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/rKUVi.jpg?s=128&g=1","display_name":"Ben Xu","link":"https://stackoverflow.com/users/778659/ben-xu"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":10,"last_activity_date":1310283963,"creation_date":1310283963,"answer_id":6639894,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>there are many different situations memory will leak. One i encountered, which expose a map that should not be exposed and used in other place. </p>\n\n<pre><code>public class ServiceFactory {\n\nprivate Map&lt;String, Service&gt; services;\n\nprivate static ServiceFactory singleton;\n\nprivate ServiceFactory() {\n    services = new HashMap&lt;String, Service&gt;();\n}\n\npublic static synchronized ServiceFactory getDefault() {\n\n    if (singleton == null) {\n        singleton = new ServiceFactory();\n    }\n    return singleton;\n}\n\npublic void addService(String name, Service serv) {\n    services.put(name, serv);\n}\n\npublic void removeService(String name) {\n    services.remove(name);\n}\n\npublic Service getService(String name, Service serv) {\n    return services.get(name);\n}\n\n// the problematic api, which expose the map.\n//and user can do quite a lot of thing from this api.\n//for example, create service reference and forget to dispose or set it null\n//in all this is a dangerous api, and should not expose \npublic Map&lt;String, Service&gt; getAllServices() {\n    return services;\n}\n\n}\n\n// resource class is a heavy class\nclass Service {\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":5711,"user_id":653511,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/3fd33f8f1f1f70d69dc3f77c9d12ecdc?s=128&d=identicon&r=PG&f=1","display_name":"stemm","link":"https://stackoverflow.com/users/653511/stemm"},"reply_to_user":{"reputation":23898,"user_id":465179,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/a2fa6a84c0fa7de188a4777dd2bce022?s=128&d=identicon&r=PG&f=1","display_name":"MatBanik","link":"https://stackoverflow.com/users/465179/matbanik"},"edited":false,"score":1,"creation_date":1310398335,"post_id":6650413,"comment_id":7861915,"content_license":"CC BY-SA 3.0","body":"Allocated memory is invisible for garbage collector"},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":4,"creation_date":1310927711,"post_id":6650413,"comment_id":7966837,"content_license":"CC BY-SA 3.0","body":"The allocated memory doesn&#39;t belong to Java either."},{"owner":{"reputation":11106,"user_id":10522,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/8396048b39279996e7ee6c1acdac2bf7?s=128&d=identicon&r=PG","display_name":"Berlin Brown","link":"https://stackoverflow.com/users/10522/berlin-brown"},"edited":false,"score":0,"creation_date":1311266444,"post_id":6650413,"comment_id":8043176,"content_license":"CC BY-SA 3.0","body":"Is this sun/oracle jvm specific?  E.g. will this work on IBM?"},{"owner":{"reputation":5711,"user_id":653511,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/3fd33f8f1f1f70d69dc3f77c9d12ecdc?s=128&d=identicon&r=PG&f=1","display_name":"stemm","link":"https://stackoverflow.com/users/653511/stemm"},"reply_to_user":{"reputation":11106,"user_id":10522,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/8396048b39279996e7ee6c1acdac2bf7?s=128&d=identicon&r=PG","display_name":"Berlin Brown","link":"https://stackoverflow.com/users/10522/berlin-brown"},"edited":false,"score":0,"creation_date":1311342609,"post_id":6650413,"comment_id":8059332,"content_license":"CC BY-SA 3.0","body":"@Berlin Brow In fact I&#39;ve didn&#39;t work with jvm of IBM. But as I told - some standart packages (java.nio, java.util.concurrent etc.) use this service class. So if IBMs jvm supports usage of these libraries, probably it has native code to cope with sun.misc.Unsafe"},{"owner":{"reputation":60055,"user_id":221955,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG","display_name":"Michael Anderson","link":"https://stackoverflow.com/users/221955/michael-anderson"},"edited":false,"score":2,"creation_date":1464837559,"post_id":6650413,"comment_id":62650685,"content_license":"CC BY-SA 3.0","body":"The memory certainly does &quot;belong to Java&quot;, at least in the sense that i) its not available to anyone else, ii) when the Java application exits it will be returned to the system. It is just outside the JVM."},{"owner":{"reputation":60055,"user_id":221955,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG","display_name":"Michael Anderson","link":"https://stackoverflow.com/users/221955/michael-anderson"},"edited":false,"score":3,"creation_date":1464837673,"post_id":6650413,"comment_id":62650710,"content_license":"CC BY-SA 3.0","body":"This will build in eclipse (at least in recent versions) but you&#39;ll need to change the compiler settings:   in Window &gt; Preferences &gt; Java &gt; Compiler &gt; Errors/Warning &gt; Deprecated and restricted API set Forbidden reference (access rules) to &quot;Warning&quot;."},{"owner":{"reputation":3483,"user_id":1679516,"user_type":"registered","profile_image":"https://i.stack.imgur.com/gxfhm.png?s=128&g=1","display_name":"Darrell Teague","link":"https://stackoverflow.com/users/1679516/darrell-teague"},"edited":false,"score":0,"creation_date":1522781898,"post_id":6650413,"comment_id":86282273,"content_license":"CC BY-SA 3.0","body":"Strongly advise readers to consider that IDE specific behaviors in developing code is not only irrelevant but dangerous. Namely, system stability and consistency demands a singular, consistent compiler. An IDE generally uses &quot;javac&quot; of some version from some vendor/impl. Consistency in runtime behavior within a given JVM relies on having the same byte-code interpretation. Since servers do not run IDEs or their (as likely instrumented) run-time environments, it is dangerous to make any presumptions or cases around what a given IDE does or doesn&#39;t do. Reference the javac instance and JVM only."}],"owner":{"reputation":5711,"user_id":653511,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/3fd33f8f1f1f70d69dc3f77c9d12ecdc?s=128&d=identicon&r=PG&f=1","display_name":"stemm","link":"https://stackoverflow.com/users/653511/stemm"},"comment_count":7,"is_accepted":false,"community_owned_date":1311330284,"score":52,"last_activity_date":1451983055,"last_edit_date":1451983055,"creation_date":1310388959,"answer_id":6650413,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>You are able to make memory leak with <strong>sun.misc.Unsafe</strong> class. In fact this service class is used in different standard classes (for example in <strong>java.nio</strong> classes). <strong>You can't create instance of this class directly</strong>, but you may <strong>use reflection to do that</strong>.</p>\n\n<p>Code doesn't compile in Eclipse IDE - compile it using command <code>javac</code> (during compilation you'll get warnings)</p>\n\n<pre><code>import java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport sun.misc.Unsafe;\n\n\npublic class TestUnsafe {\n\n    public static void main(String[] args) throws Exception{\n        Class unsafeClass = Class.forName(\"sun.misc.Unsafe\");\n        Field f = unsafeClass.getDeclaredField(\"theUnsafe\");\n        f.setAccessible(true);\n        Unsafe unsafe = (Unsafe) f.get(null);\n        System.out.print(\"4..3..2..1...\");\n        try\n        {\n            for(;;)\n                unsafe.allocateMemory(1024*1024);\n        } catch(Error e) {\n            System.out.println(\"Boom :)\");\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n"},{"owner":{"reputation":2588,"user_id":847333,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/f50c41ad18bd5854d9878385c7eb5a39?s=128&d=identicon&r=PG","display_name":"Gravity","link":"https://stackoverflow.com/users/847333/gravity"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":6,"last_activity_date":1310776157,"creation_date":1310776157,"answer_id":6714461,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>One possibility is to create a wrapper for an ArrayList that only provides one method: one that adds things to the ArrayList.  Make the ArrayList itself private.  Now, construct one of these wrapper objects in global scope (as a static object in a class) and qualify it with the <strong>final</strong> keyword (e.g. <code>public static final ArrayListWrapper wrapperClass = new ArrayListWrapper()</code>).  So now the reference cannot be altered.  That is, <code>wrapperClass = null</code> won't work and can't be used to free the memory.  But there's also no way to do anything with <code>wrapperClass</code> other than add objects to it.  Therefore, any objects you do add to <code>wrapperClass</code> are impossible to recycle.</p>\n"},{"owner":{"reputation":1,"user_id":856547,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/e75743d020c96e654ffa280a5fdfd61f?s=128&d=identicon&r=PG","display_name":"Scott","link":"https://stackoverflow.com/users/856547/scott"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":9,"last_activity_date":1311270098,"creation_date":1311270098,"answer_id":6780310,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>An example I recently fixed is creating new GC and Image objects, but forgetting to call dispose() method.</p>\n\n<p>GC javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the GC.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required. This is particularly important\n  on Windows95 and Windows98 where the operating system has a limited\n  number of device contexts available.</p>\n</blockquote>\n\n<p>Image javadoc snippet:</p>\n\n<blockquote>\n  <p>Application code must explicitly invoke the Image.dispose() method to\n  release the operating system resources managed by each instance when\n  those instances are no longer required.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":4,"creation_date":1311353108,"post_id":6780439,"comment_id":8062915,"content_license":"CC BY-SA 3.0","body":"I wouldn&#39;t call that a memory leak, <i>per se</i>. When <code>muchSmallerString</code> is freeed (because the <code>StringLeaker</code> object is destroyed), the long string will be freed as well. What I call memory leak is memory that can never been freeed in this instance of JVM. However, you have shown yourself how to free the memory: <code>this.muchSmallerString=new String(this.muchSmallerString)</code>. With a real memory leak, there is nothing you can do."},{"owner":{"reputation":594,"user_id":443572,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/3ef125d5b0913a7af197dc0028574c85?s=128&d=identicon&r=PG","display_name":"Jon Chambers","link":"https://stackoverflow.com/users/443572/jon-chambers"},"reply_to_user":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":2,"creation_date":1311360163,"post_id":6780439,"comment_id":8064892,"content_license":"CC BY-SA 3.0","body":"@rds, that&#39;s a fair point. The non-<code>intern</code> case may be more of a &quot;memory surprise&quot; than a &quot;memory leak.&quot; <code>.intern()</code>ing the substring, though, certainly creates a situation where the reference to the longer string is preserved and cannot be freed."},{"owner":{"reputation":6932,"user_id":1057218,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/281bdb57345c7c4af04d983ce7d207d0?s=128&d=identicon&r=PG","display_name":"anstarovoyt","link":"https://stackoverflow.com/users/1057218/anstarovoyt"},"edited":false,"score":17,"creation_date":1363956226,"post_id":6780439,"comment_id":22070421,"content_license":"CC BY-SA 3.0","body":"The method substring() creates a new String in java7 (it is a new behavior)"},{"owner":{"reputation":20877,"user_id":44089,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/f300c9887f4486fce09a63c9267dfc3c?s=128&d=identicon&r=PG","display_name":"Bananeweizen","link":"https://stackoverflow.com/users/44089/bananeweizen"},"edited":false,"score":0,"creation_date":1507135576,"post_id":6780439,"comment_id":80093891,"content_license":"CC BY-SA 3.0","body":"You don&#39;t even need to do the substring() yourself: Use a regex matcher to match a tiny part of a huge input, and carry the &quot;extracted&quot; string around for a long time. The huge input stays alive up to Java 6."}],"owner":{"reputation":594,"user_id":443572,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/3ef125d5b0913a7af197dc0028574c85?s=128&d=identicon&r=PG","display_name":"Jon Chambers","link":"https://stackoverflow.com/users/443572/jon-chambers"},"comment_count":4,"is_accepted":false,"community_owned_date":1311330284,"score":39,"last_activity_date":1311274835,"last_edit_date":1311274835,"creation_date":1311270700,"answer_id":6780439,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Here's a simple/sinister one via <a href=\"http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29\" rel=\"noreferrer\">http://wiki.eclipse.org/Performance_Bloopers#String.substring.28.29</a>.</p>\n\n<pre><code>public class StringLeaker\n{\n    private final String muchSmallerString;\n\n    public StringLeaker()\n    {\n        // Imagine the whole Declaration of Independence here\n        String veryLongString = \"We hold these truths to be self-evident...\";\n\n        // The substring here maintains a reference to the internal char[]\n        // representation of the original string.\n        this.muchSmallerString = veryLongString.substring(0, 1);\n    }\n}\n</code></pre>\n\n<p>Because the substring refers to the internal representation of the original, much longer string, the original stays in memory. Thus, as long as you have a StringLeaker in play, you have the whole original string in memory, too, even though you might think you're just holding on to a single-character string.</p>\n\n<p>The way to avoid storing an unwanted reference to the original string is to do something like this:</p>\n\n<pre><code>...\nthis.muchSmallerString = new String(veryLongString.substring(0, 1));\n...\n</code></pre>\n\n<p>For added badness, you might also <code>.intern()</code> the substring:</p>\n\n<pre><code>...\nthis.muchSmallerString = veryLongString.substring(0, 1).intern();\n...\n</code></pre>\n\n<p>Doing so will keep both the original long string and the derived substring in memory even after the StringLeaker instance has been discarded.</p>\n"},{"comments":[{"owner":{"reputation":294197,"user_id":829571,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/zflGZ.png?s=128&g=1","display_name":"assylias","link":"https://stackoverflow.com/users/829571/assylias"},"edited":false,"score":7,"creation_date":1371769288,"post_id":6780483,"comment_id":24955868,"content_license":"CC BY-SA 3.0","body":"Hasn&#39;t been the case for some time now. Modern GCs know how to handle circular references."}],"owner":{"reputation":3539,"user_id":59724,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/50954aec029a724824dca5a32a1c00fa?s=128&d=identicon&r=PG","display_name":"Graham","link":"https://stackoverflow.com/users/59724/graham"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":14,"last_activity_date":1311270951,"creation_date":1311270951,"answer_id":6780483,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>As a lot of people have suggested, Resource Leaks are fairly easy to cause - like the JDBC examples. Actual Memory leaks are a bit harder - especially if you aren't relying on broken bits of the JVM to do it for you...</p>\n\n<p>The ideas of creating objects that have a very large footprint and then not being able to access them aren't real memory leaks either. If nothing can access it then it will be garbage collected, and if something can access it then it's not a leak...</p>\n\n<p>One way that <em>used</em> to work though - and I don't know if it still does - is to have a three-deep circular chain. As in Object A has a reference to Object B, Object B has a reference to Object C and Object C has a reference to Object A. The GC was clever enough to know that a two deep chain - as in A &lt;--> B - can safely be collected if A and B aren't accessible by anything else, but couldn't handle the three-way chain...</p>\n"},{"comments":[{"owner":{"reputation":5899,"user_id":124708,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/950cd0d34a9943729a4065ee4add6965?s=128&d=identicon&r=PG","display_name":"TraderJoeChicago","link":"https://stackoverflow.com/users/124708/traderjoechicago"},"edited":false,"score":0,"creation_date":1316560242,"post_id":6781750,"comment_id":9070895,"content_license":"CC BY-SA 3.0","body":"That sucks. You should check this logging library that allocates ZERO memory while logging to a file: <a href=\"http://mentalog.soliveirajr.com\" rel=\"nofollow noreferrer\">mentalog.soliveirajr.com</a>"},{"owner":{"reputation":9291,"user_id":717481,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0292aeefc5c774d3acd0ca14914c5db2?s=128&d=identicon&r=PG","display_name":"sparc_spread","link":"https://stackoverflow.com/users/717481/sparc-spread"},"edited":false,"score":0,"creation_date":1404337249,"post_id":6781750,"comment_id":38005269,"content_license":"CC BY-SA 3.0","body":"+1 Do you know offhand whether there is a similar issue with the MDC in slf4j/logback (successor products by the same author)?  I&#39;m about to do a deep dive on the source but wanted to check first.  Either way, thanks for posting this."}],"owner":{"reputation":676,"user_id":148631,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/46962245c2f486e7452d8e446e7f3774?s=128&d=identicon&r=PG","display_name":"Puneet","link":"https://stackoverflow.com/users/148631/puneet"},"comment_count":2,"is_accepted":false,"community_owned_date":1311330284,"score":22,"last_activity_date":1394227779,"last_edit_date":1394227779,"creation_date":1311277172,"answer_id":6781750,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I recently encountered a memory leak situation caused in a way by log4j.</p>\n\n<p>Log4j has this mechanism called <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html\">Nested Diagnostic Context(NDC)</a>  which is an instrument to distinguish interleaved log output from different sources. The granularity at which NDC works is threads, so it distinguishes log outputs from different threads separately.</p>\n\n<p>In order to store thread specific tags, log4j's NDC class uses a Hashtable which is keyed by the Thread object itself (as opposed to say the thread id), and thus till the NDC tag stays in memory all the objects that hang off of the thread object also stay in memory. In our web application we use NDC to tag logoutputs with a request id to distinguish logs from a single request separately. The container that associates the NDC tag with a thread, also removes it while returning the response from a request. The problem occurred when during the course of processing a request, a child thread was spawned, something like the following code:</p>\n\n<pre><code>pubclic class RequestProcessor {\n    private static final Logger logger = Logger.getLogger(RequestProcessor.class);\n    public void doSomething()  {\n        ....\n        final List&lt;String&gt; hugeList = new ArrayList&lt;String&gt;(10000);\n        new Thread() {\n           public void run() {\n               logger.info(\"Child thread spawned\")\n               for(String s:hugeList) {\n                   ....\n               }\n           }\n        }.start();\n    }\n}    \n</code></pre>\n\n<p>So an NDC context was associated with inline thread that was spawned. The thread object that was the key for this NDC context, is the inline thread which has the hugeList object hanging off of it. Hence even after the thread finished doing what it was doing, the reference to the hugeList was kept alive by the NDC context Hastable, thus causing a memory leak.</p>\n"},{"comments":[{"owner":{"reputation":9538,"user_id":1169349,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/12190e569661586c67fb666370343c80?s=128&d=identicon&r=PG","display_name":"Reg","link":"https://stackoverflow.com/users/1169349/reg"},"edited":false,"score":1,"creation_date":1441187506,"post_id":6782636,"comment_id":52573065,"content_license":"CC BY-SA 3.0","body":"Based on a true story."}],"owner":{"reputation":14510,"user_id":73274,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/f22abfd0e934eac307239b636357ada8?s=128&d=identicon&r=PG","display_name":"Paul Morie","link":"https://stackoverflow.com/users/73274/paul-morie"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":19,"last_activity_date":1311281560,"creation_date":1311281560,"answer_id":6782636,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Everyone always forgets the native code route.  Here's a simple formula for a leak:</p>\n\n<ol>\n<li>Declare native method.</li>\n<li>In native method, call <code>malloc</code>.  Don't call <code>free</code>.</li>\n<li>Call the native method.</li>\n</ol>\n\n<p>Remember, memory allocations in native code come from the JVM heap.  </p>\n"},{"comments":[{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"edited":false,"score":2,"creation_date":1377925448,"post_id":6783910,"comment_id":27278089,"content_license":"CC BY-SA 3.0","body":"The native memory allocated by a DirectByteBuffer is freed in a finalizer when the DirectByteBuffer is garbage collected. It certainly doesn&#39;t leak."}],"owner":{"reputation":21,"user_id":477534,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/100f8041558a5e7d0e08bb410d588539?s=128&d=identicon&r=PG","display_name":"Artur Ventura","link":"https://stackoverflow.com/users/477534/artur-ventura"},"comment_count":1,"is_accepted":false,"community_owned_date":1311330284,"score":8,"last_activity_date":1311289629,"creation_date":1311289629,"answer_id":6783910,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Theoretically you can't. Java memory model prevents it. However, because Java has to be implemented, there are some caveats you can use. Depends on what you can use:</p>\n\n<ul>\n<li><p>If you can use native, you can allocate memory that you don not relinquish later. </p></li>\n<li><p>If that is not available, there is a dirty little secret about java that not much people know. You can ask for a direct access array that is not managed by GC, and therefor can be easily used to make a memory leak. This is provided by DirectByteBuffer (http://download.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)). </p></li>\n<li><p>If you can't use any of those, you still can make a memory leak by tricking the GC. The JVM is implemented using a Generational garbage collection. What this means is that the heap is divided into areas: young, adults and elders. An object when its created starts at the young area. As he is used more and more, he progresses into adults up to elders. An object that reaches the eldery area most likely will not be garbaged collected. You cannot be sure that an object is leaked and if you ask for a stop and clean GC it may clean it but for a long period of time he will be leaked. More info at (http://java.sun.com/docs/hotspot/gc1.4.2/faq.html) </p></li>\n<li><p>Also, class objects are not required to be GC'ed. Might me a way to do it.</p></li>\n</ul>\n"},{"owner":{"reputation":939,"user_id":839379,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/58dad12faff240f3fe8e4074f6025a57?s=128&d=identicon&r=PG","display_name":"sethobrien","link":"https://stackoverflow.com/users/839379/sethobrien"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":16,"last_activity_date":1311321907,"creation_date":1311321907,"answer_id":6787206,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>You can create a moving memory leak by creating a new instance of a class in that class's finalize method. Bonus points if the finalizer creates multiple instances. Here's a simple program that leaks the entire heap in sometime between a few seconds and a few minutes depending on your heap size:</p>\n\n<pre><code>class Leakee {\n    public void check() {\n        if (depth &gt; 2) {\n            Leaker.done();\n        }\n    }\n    private int depth;\n    public Leakee(int d) {\n        depth = d;\n    }\n    protected void finalize() {\n        new Leakee(depth + 1).check();\n        new Leakee(depth + 1).check();\n    }\n}\n\npublic class Leaker {\n    private static boolean makeMore = true;\n    public static void done() {\n        makeMore = false;\n    }\n    public static void main(String[] args) throws InterruptedException {\n        // make a bunch of them until the garbage collector gets active\n        while (makeMore) {\n            new Leakee(0).check();\n        }\n        // sit back and watch the finalizers chew through memory\n        while (true) {\n            Thread.sleep(1000);\n            System.out.println(\"memory=\" +\n                    Runtime.getRuntime().freeMemory() + \" / \" +\n                    Runtime.getRuntime().totalMemory());\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":6883,"user_id":857727,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3772f7ef99bd17c1e77d77edbf76c13d?s=128&d=identicon&r=PG&f=1","display_name":"arnt","link":"https://stackoverflow.com/users/857727/arnt"},"comment_count":0,"is_accepted":false,"community_owned_date":1311330284,"score":7,"last_activity_date":1311330284,"creation_date":1311330284,"answer_id":6788650,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Most of the memory leaks I've seen in java concern processes getting out of sync.</p>\n\n<p>Process A talks to B via TCP, and tells process B to create something. B issues the resource an ID, say 432423, which A stores in an object and uses while talking to B. At some point the object in A is reclaimed by garbage collection (maybe due to a bug), but A never tells B that (maybe another bug).</p>\n\n<p>Now A doesn't have the ID of the object it's created in B's RAM any more, and B doesn't know that A has no more reference to the object. In effect, the object is leaked.</p>\n"},{"comments":[{"owner":{"reputation":1074,"user_id":698121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/979130d85abf3d9036ce495ee89edbb2?s=128&d=identicon&r=PG","display_name":"Peter","link":"https://stackoverflow.com/users/698121/peter"},"edited":false,"score":0,"creation_date":1311347150,"post_id":6791637,"comment_id":8060907,"content_license":"CC BY-SA 3.0","body":"To add to the discussion about what a memory leak is in my opinion the idea of &quot;intentional&quot; is important. Of course a field (static or not) pointing to a huge data structure is not yet a memory leak. But if the datastructure pointed to is of no use for your logic, just lingering around, polluting your heap, perhaps ever growing until GC gives up with an OOME, then i call it a &quot;memory leak&quot;. The memory leaked is just no longer available to me. Just like in former times where i called malloc without ever returning this to os - purify to the rescue."},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1324948620,"post_id":6791637,"comment_id":10731665,"content_license":"CC BY-SA 3.0","body":"The inflater is a good one, while not true leak (if will be finalized) it eats up native memory very well and it&#39;s hard to diagnose. You deserve a vote (but I do not vote myself). I added some more info in my answer (didn&#39;t spot yours earlier)"},{"owner":{"reputation":1074,"user_id":698121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/979130d85abf3d9036ce495ee89edbb2?s=128&d=identicon&r=PG","display_name":"Peter","link":"https://stackoverflow.com/users/698121/peter"},"reply_to_user":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1328182780,"post_id":6791637,"comment_id":11446728,"content_license":"CC BY-SA 3.0","body":"Finlizers were a bad idea, and there is no guarantee that they will ever be called. Google for Cliff Click and his comments about this..."},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1328195080,"post_id":6791637,"comment_id":11451260,"content_license":"CC BY-SA 3.0","body":"All JVMs (minus JDK7 before 7.0.2) invoke finalizer(s) more or less in good fashion. Finalizer are absolutely necessary for Direct buffers to work (even more mapped files, esp. on Windows). They are just unreliable (baring that I know what Cliff Click says about)"}],"owner":{"reputation":1074,"user_id":698121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/979130d85abf3d9036ce495ee89edbb2?s=128&d=identicon&r=PG","display_name":"Peter","link":"https://stackoverflow.com/users/698121/peter"},"comment_count":4,"is_accepted":false,"community_owned_date":1311345525,"score":7,"last_activity_date":1311345525,"creation_date":1311345525,"answer_id":6791637,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A few suggestions:</p>\n\n<ul>\n<li>use commons-logging in a servlet container (a bit provocative perhaps)</li>\n<li>start a thread in a servlet container and don't return from it's run method</li>\n<li>load animated gifs in a servlet container (this will start an animation thread)</li>\n</ul>\n\n<p>The above effects could be 'improved' by redeploying the application ;)</p>\n\n<p>Recently stumbled upon this: </p>\n\n<ul>\n<li>Calling \"new java.util.zip.Inflater();\" without calling \"Inflater.end()\" ever</li>\n</ul>\n\n<p>Read <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5072161\">http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5072161</a> and linked issues for an in-depth-discussion.</p>\n"},{"owner":{"reputation":2913,"user_id":132565,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/a6a87aaf5ff12989a79f7b9ef821b993?s=128&d=identicon&r=PG","display_name":"Chase","link":"https://stackoverflow.com/users/132565/chase"},"comment_count":0,"is_accepted":false,"community_owned_date":1338504647,"score":5,"last_activity_date":1338504647,"creation_date":1338504647,"answer_id":10842325,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>In Java a \"memory leak\" is primarily just you using too much memory which is different than in C where you are no longer using the memory but forget to return (free) it. When an interviewer asks about Java memory leaks they are asking about JVM memory usage just appearing to keep going up and they determined that restarting the JVM on a regular basis is the best fix. (unless the interviewer is <em>extremely</em> technically savvy)</p>\n\n<p>So answer this question as if they asked what makes JVM memory usage grow over time. Good answers would be storing too much data in a HttpSessions with overly long timeout or a poorly implemented in-memory cache (Singleton) that never flushes old entries. Another potential answer is having lots of JSPs or dynamically generated classes. Classes are loaded into an area of memory called PermGen that is usually small and most JVMs don't implement class unloading.</p>\n"},{"owner":{"reputation":11,"user_id":469070,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3d91ec3ebcd63f9d25748dca7aca3e96?s=128&d=identicon&r=PG","display_name":"Jay","link":"https://stackoverflow.com/users/469070/jay"},"comment_count":0,"is_accepted":false,"community_owned_date":1347480457,"score":15,"last_activity_date":1347480457,"creation_date":1347480457,"answer_id":12395504,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>I came across a more subtle kind of resource leak recently.\nWe open resources via class loader's getResourceAsStream and it happened that the input stream handles were not closed.</p>\n\n<p>Uhm, you might say, what an idiot. </p>\n\n<p>Well, what makes this interesting is: this way, you can leak heap memory of the underlying process, rather than from JVM's heap.</p>\n\n<p>All you need is a jar file with a file inside which will be referenced from Java code. The bigger the jar file, the quicker memory gets allocated.</p>\n\n<p>You can easily create such a jar with the following class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipOutputStream;\n\npublic class BigJarCreator {\n    public static void main(String[] args) throws IOException {\n        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(\"big.jar\")));\n        zos.putNextEntry(new ZipEntry(\"resource.txt\"));\n        zos.write(\"not too much in here\".getBytes());\n        zos.closeEntry();\n        zos.putNextEntry(new ZipEntry(\"largeFile.out\"));\n        for (int i=0 ; i&lt;10000000 ; i++) {\n            zos.write((int) (Math.round(Math.random()*100)+20));\n        }\n        zos.closeEntry();\n        zos.close();\n    }\n}\n</code></pre>\n\n<p>Just paste into a file named BigJarCreator.java, compile and run it from command line: </p>\n\n<pre><code>javac BigJarCreator.java\njava -cp . BigJarCreator\n</code></pre>\n\n<p>Et voilÃ : you find a jar archive in your current working directory with two files inside.</p>\n\n<p>Let's create a second class:</p>\n\n<pre><code>public class MemLeak {\n    public static void main(String[] args) throws InterruptedException {\n        int ITERATIONS=100000;\n        for (int i=0 ; i&lt;ITERATIONS ; i++) {\n            MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\");\n        }\n        System.out.println(\"finished creation of streams, now waiting to be killed\");\n\n        Thread.sleep(Long.MAX_VALUE);\n    }\n\n}\n</code></pre>\n\n<p>This class basically does nothing, but create unreferenced InputStream objects. Those objects will be garbage collected immediately and thus, do not contribute to heap size.\nIt is important for our example to load an existing resource from a jar file, and size does matter here!</p>\n\n<p>If you're doubtful, try to compile and start the class above, but make sure to chose a decent heap size (2 MB):</p>\n\n<pre><code>javac MemLeak.java\njava -Xmx2m -classpath .:big.jar MemLeak\n</code></pre>\n\n<p>You will not encounter an OOM error here, as no references are kept, the application will keep running no matter how large you chose ITERATIONS in the above example.\nThe memory consumption of your process (visible in top (RES/RSS) or process explorer) grows unless the application gets to the wait command. In the setup above, it will allocate around 150 MB in memory.</p>\n\n<p>If you want the application to play safe, close the input stream right where it's created:</p>\n\n<pre><code>MemLeak.class.getClassLoader().getResourceAsStream(\"resource.txt\").close();\n</code></pre>\n\n<p>and your process will not exceed 35 MB, independent of the iteration count.</p>\n\n<p>Quite simple and surprising.</p>\n"},{"owner":{"reputation":669,"user_id":466250,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/dc492e1bdec1ee598989734013b08058?s=128&d=identicon&r=PG","display_name":"jorgeu","link":"https://stackoverflow.com/users/466250/jorgeu"},"comment_count":0,"is_accepted":false,"community_owned_date":1348778734,"score":5,"last_activity_date":1348778734,"creation_date":1348778734,"answer_id":12629746,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Swing has it very easy with dialogs. Create a JDialog, show it, the user closes it, leak!\nYou have to call <code>dispose()</code> or configure <code>setDefaultCloseOperation(DISPOSE_ON_CLOSE)</code></p>\n"},{"owner":{"reputation":6786,"user_id":1564766,"user_type":"registered","accept_rate":15,"profile_image":"https://i.stack.imgur.com/00n8a.jpg?s=128&g=1","display_name":"abishkar bhattarai","link":"https://stackoverflow.com/users/1564766/abishkar-bhattarai"},"comment_count":0,"is_accepted":false,"community_owned_date":1354519089,"score":7,"last_activity_date":1354519089,"creation_date":1354519089,"answer_id":13678802,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>If Max heap size is X.  Y1....Yn  no of instances  So,total memory= number of instances X Bytes per instance.If X1......Xn is bytes per instances.Then total memory(M)=Y1 * X1+.....+Yn *Xn. So,if M>X  it exceeds heap space .  following can be  the   problems in code \n1.Use of more instances variable then local one.\n2.Creating instances every time instead of pooling object.\n3.Not Creating the object on demand.\n4.Making the object reference null after the completion of operation.Again ,recreating when it is demanded in program.</p>\n"},{"comments":[{"owner":{"reputation":24051,"user_id":94363,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG","display_name":"rds","link":"https://stackoverflow.com/users/94363/rds"},"edited":false,"score":35,"creation_date":1358420359,"post_id":14151509,"comment_id":19995707,"content_license":"CC BY-SA 3.0","body":"-1 this runs out of memory for sure, because the requirement is to have an infinite amount of memory. I don&#39;t call this a memory leak. It is just a stupid program."},{"owner":{"reputation":15823,"user_id":347508,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d0552df3ae8cb4abb34baaf22bb493dc?s=128&d=identicon&r=PG","display_name":"kritzikratzi","link":"https://stackoverflow.com/users/347508/kritzikratzi"},"edited":false,"score":3,"creation_date":1364846685,"post_id":14151509,"comment_id":22383465,"content_license":"CC BY-SA 3.0","body":"also -1, not a mem leak, thats just allocating too much"}],"owner":{"reputation":7538,"user_id":989857,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/4c2069752c78a37a40291865b26e2343?s=128&d=identicon&r=PG","display_name":"stones333","link":"https://stackoverflow.com/users/989857/stones333"},"comment_count":2,"is_accepted":false,"community_owned_date":1357276935,"score":-5,"last_activity_date":1358420303,"last_edit_date":1358420303,"creation_date":1357276935,"answer_id":14151509,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Here is a very simple Java program that will run out of space</p>\n\n<pre><code>public class OutOfMemory {\n\n    public static void main(String[] arg) {\n\n        List&lt;Long&gt; mem = new LinkedList&lt;Long&gt;();\n        while (true) {\n            mem.add(new Long(Long.MAX_VALUE));\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"comment_count":0,"is_accepted":false,"community_owned_date":1362622503,"score":4,"last_activity_date":1362622503,"creation_date":1362622503,"answer_id":15261858,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>If you don't use a compacting garbage collector, you can have some sort of a memory leak due to heap fragmentation.</p>\n"},{"owner":{"reputation":8400,"user_id":990750,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/nIvmG.jpg?s=128&g=1","display_name":"Tarik","link":"https://stackoverflow.com/users/990750/tarik"},"comment_count":0,"is_accepted":false,"community_owned_date":1373352321,"score":4,"last_activity_date":1373352321,"creation_date":1373352321,"answer_id":17541704,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Lapsed Listerners is a good example of memory leaks: Object is added as a Listener. All references to the object are nulled when the object is not needed anymore. However, forgetting to remove the object from the Listener list keeps the object alive and even responding to events, thereby wasting both memory and CPU. See <a href=\"http://www.drdobbs.com/jvm/java-qa/184404011\" rel=\"nofollow\">http://www.drdobbs.com/jvm/java-qa/184404011</a></p>\n"},{"owner":{"reputation":5476,"user_id":747320,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a779b8db0d92e47023b5ce31fa64e3c3?s=128&d=identicon&r=PG","display_name":"Basanth Roy","link":"https://stackoverflow.com/users/747320/basanth-roy"},"comment_count":0,"is_accepted":false,"community_owned_date":1377778239,"score":7,"last_activity_date":1377778239,"creation_date":1377778239,"answer_id":18510634,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Throw an unhandled exception from the finalize method.</p>\n"},{"comments":[{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":1,"creation_date":1380238779,"post_id":18544736,"comment_id":28137964,"content_license":"CC BY-SA 3.0","body":"@Spidey Nothing is &quot;stuck&quot;. The calling method returns promptly, and the passed object will never be reclaimed. That&#39;s precisely a leak."},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":1,"creation_date":1380245082,"post_id":18544736,"comment_id":28139318,"content_license":"CC BY-SA 3.0","body":"You&#39;ll have a thread &quot;running&quot; (or sleeping, whatever) for the lifetime of your program. That doesn&#39;t count as a leak to me. As well as a pool doesn&#39;t count as a leak, even if you don&#39;t use it entirely."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":1,"creation_date":1380245998,"post_id":18544736,"comment_id":28139458,"content_license":"CC BY-SA 3.0","body":"@Spidey &quot;You&#39;ll have a [thing] for the lifetime of your program. That doesn&#39;t count as a leak to me.&quot; Do you hear yourself?"},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380297070,"post_id":18544736,"comment_id":28161810,"content_license":"CC BY-SA 3.0","body":"Yes I do. The process still references the thread, and the thread still references the <code>o</code> object. You may have misunderstood what a memory leak is."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":3,"creation_date":1380304838,"post_id":18544736,"comment_id":28165696,"content_license":"CC BY-SA 3.0","body":"@Spidey If you would count memory that the process knows about as not being leaked, then all the answers here are wrong, since the process always tracks which pages in its virtual address space are mapped. When the process terminates, the OS cleans up all the leaks by putting the pages back on the free page stack. To take that to the next extreme, one could beat to death any argued leak by pointing out that none of the physical bits in the RAM chips or in the swap space on disk have been physically misplaced or destroyed, so you can switch the computer off and on again to clean up any leak."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":1,"creation_date":1380304858,"post_id":18544736,"comment_id":28165705,"content_license":"CC BY-SA 3.0","body":"The practical definition of a leak is that it&#39;s memory which has been lost track of such that we don&#39;t know and thus can&#39;t perform the procedure necessary to reclaim only it; we would have to tear down and rebuild the entire memory space. A rogue thread like this could arise naturally through a deadlock or dodgy threadpool implementation. Objects referenced by such threads, even indirectly, are now prevented from ever being collected, so we have memory which will not be naturally reclaimed or reusable during the lifetime of the program. I&#39;d call that a problem; specifically it&#39;s a memory leak."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380651464,"post_id":18544736,"comment_id":28278615,"content_license":"CC BY-SA 3.0","body":"@Spidey What is your answer? What do you consider a leak?"},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380722818,"post_id":18544736,"comment_id":28305579,"content_license":"CC BY-SA 3.0","body":"Since Java has a garbage collector, I don&#39;t think it can even leak."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380723765,"post_id":18544736,"comment_id":28306231,"content_license":"CC BY-SA 3.0","body":"@Spidey Then try it for yourself and you&#39;ll see that it does leak. The garbage collector isn&#39;t (and cannot be) infallible because it can&#39;t tell the difference between live references and obsolete ones, which is why explicit nulling of obsolete references is necessary when the object or scope holding the obsolete reference is still in use."},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380737235,"post_id":18544736,"comment_id":28314394,"content_license":"CC BY-SA 3.0","body":"There is no difference between &quot;live references and obsolete ones&quot; in the context of the question. They are still referenced somewhere. In a C program, a leak isn&#39;t referenced anywhere, even the OS can&#39;t touch it. It can release all memory pages used by a given process, but it can&#39;t reference each and every memory block allocated."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380742604,"post_id":18544736,"comment_id":28317271,"content_license":"CC BY-SA 3.0","body":"@Spidey It&#39;s the most important difference. At a lower level (program -&gt; JVM -&gt; OS -&gt; RAM chips -&gt; Universe) any memory leak from the higher level becomes unreal. The practical definition for a memory leak is that during execution, your memory space (at whatever level you define it) is accumulating things which are not wanted, reducing available space for things which are wanted. &quot;In a C program, a leak isn&#39;t referenced anywhere&quot; -- also wrong -- leaked memory could still be referenced. What matters is whether the memory can be re-used, which in C does not depend on whether it&#39;s referenced."},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380755998,"post_id":18544736,"comment_id":28322872,"content_license":"CC BY-SA 3.0","body":"obviously not much people think you are right. See this: <a href=\"http://www.ibm.com/developerworks/rational/library/05/0816_GuptaPalanki/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/rational/library/05/0816_GuptaPalanki</a> Memory leaks in Java are not real leaks, they are bad design choices or bugs in code."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380816890,"post_id":18544736,"comment_id":28349423,"content_license":"CC BY-SA 3.0","body":"@Spidey &quot;not much people think you are right&quot;.. Uh, about which? Which people? Where? Check the previous page of answers for the many older, popular answers that I&#39;m defending here and which you are calling wrong. &quot;Memory leaks in Java are not real leaks&quot; Nowhere does the article say that. It gives examples of memory leaks and shows how they are a real loss of usable memory due to objects not being reclaimed. Those objects accumulate over time and become a real problem. That&#39;s what a memory leak is. &quot;they are bad design choices or bugs in code&quot; ... which result in <b>memory leaks</b>, yes."},{"owner":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":0,"creation_date":1380821037,"post_id":18544736,"comment_id":28351698,"content_license":"CC BY-SA 3.0","body":"I mean all the people who read your answer and our discussion, and still didn&#39;t care to up or down your post. But that&#39;s not a real argument anyway. See slowlyLeakingVector in Listing 2. I could accept that as a memory leak, but that&#39;s different from what you are doing. As I see, your answer suggests that any unused allocated object implies in a leak. I don&#39;t agree with that."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1380837724,"post_id":18544736,"comment_id":28359981,"content_license":"CC BY-SA 3.0","body":"This is totally valid code, it&#39;s what it means to use threads.  They are designed to keep their references.  Also it&#39;s not only threads that do this, also GUI frames keep everything referenced by them even though there is no thread.  There are a few other &quot;tops&quot; to the GC tree as well.  If you have a thread that runs forever then, by design, it will keep everything it references forever, otherwise nothing will work.  If this is not what you intended however, then you DO have a programming bug!"},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"reply_to_user":{"reputation":2238,"user_id":131326,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/dd716b02472e9b21c17e62b289af01f7?s=128&d=identicon&r=PG","display_name":"Spidey","link":"https://stackoverflow.com/users/131326/spidey"},"edited":false,"score":1,"creation_date":1380861014,"post_id":18544736,"comment_id":28365335,"content_license":"CC BY-SA 3.0","body":"@Spidey &quot;I could accept that as a memory leak&quot; Thank you. Earlier, you&#39;d said something couldn&#39;t be a leak if it&#39;s still referenced and that you couldn&#39;t have a leak in Java because it has a garbage collector. &gt;_&lt; &quot;Your answer suggests that any unused allocated object implies a leak&quot;. Well, the example is a scenario of an object that the garbage collector can&#39;t/won&#39;t collect. If it emerges in a program and happens repeatedly it becomes a leak. I&#39;ll try to improve my answer with that info."},{"owner":{"reputation":13182,"user_id":290340,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/9798931483c6fe5af55ec68698ffd0a0?s=128&d=identicon&r=PG","display_name":"Evan Plaice","link":"https://stackoverflow.com/users/290340/evan-plaice"},"edited":false,"score":0,"creation_date":1393236521,"post_id":18544736,"comment_id":33315463,"content_license":"CC BY-SA 3.0","body":"Can&#39;t you just allocate a bunch of memory on background threads and intentionally deadlock them by using a very poorly structured system of nested thread locks? It fits the profile of running for the life of the program and not being accessible by the application or recoverable by the GC."}],"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"comment_count":17,"is_accepted":false,"community_owned_date":1377925827,"score":11,"last_activity_date":1380861203,"last_edit_date":1495540978,"creation_date":1377925827,"answer_id":18544736,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Threads are not collected until they terminate. They serve as <a href=\"https://stackoverflow.com/questions/6366211/what-are-the-roots\">roots</a> of garbage collection. They are one of the few objects that won't be reclaimed simply by forgetting about them or clearing references to them.</p>\n\n<p>Consider: the basic pattern to terminate a worker thread is to set some condition variable seen by the thread. The thread can check the variable periodically and use that as a signal to terminate. If the variable is not declared <code>volatile</code>, then the change to the variable might not be seen by the thread, so it won't know to terminate. Or imagine if some threads want to update a shared object, but deadlock while trying to lock on it.</p>\n\n<p>If you only have a handful of threads these bugs will probably be obvious because your program will stop working properly. If you have a thread pool that creates more threads as needed, then the obsolete/stuck threads might not be noticed, and will accumulate indefinitely, causing a memory leak. Threads are likely to use other data in your application, so will also prevent anything they directly reference from ever being collected.</p>\n\n<p>As a toy example:</p>\n\n<pre><code>static void leakMe(final Object object) {\n    new Thread() {\n        public void run() {\n            Object o = object;\n            for (;;) {\n                try {\n                    sleep(Long.MAX_VALUE);\n                } catch (InterruptedException e) {}\n            }\n        }\n    }.start();\n}\n</code></pre>\n\n<p>Call <code>System.gc()</code> all you like, but the object passed to <code>leakMe</code> will never die.</p>\n\n<p>(*edited*)</p>\n"},{"owner":{"reputation":18038,"user_id":1439305,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/gNHmR.jpg?s=128&g=1","display_name":"Audrius Meskauskas","link":"https://stackoverflow.com/users/1439305/audrius-meskauskas"},"comment_count":0,"is_accepted":false,"community_owned_date":1389099397,"score":8,"last_activity_date":1389099397,"creation_date":1389099397,"answer_id":20972237,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A thread that does not terminate (say sleeps indefinitely in its run method). It will not be garbage collected even if we loose a reference to it. You can add fields to make the thread object is a big as you want.</p>\n\n<p>The currently top answer lists more tricks around this but these seem redundant.</p>\n"},{"comments":[{"owner":{"reputation":28757,"user_id":2344584,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG","display_name":"Stefano Sanfilippo","link":"https://stackoverflow.com/users/2344584/stefano-sanfilippo"},"edited":false,"score":0,"creation_date":1434904848,"post_id":24070827,"comment_id":49965250,"content_license":"CC BY-SA 3.0","body":"Regarding the last sentence, the best way to win over the evil is knowing it well.  If you want to write a secure web application, you should make yourself familiar with the most common exploit techniques and vulnerabilities, like SQL injections or buffer overflows. Similarly, if you want to write leak-free code, you should at least be able to describe the most common ways of leaking memory, like lost pointers in C/C++. Definitely less straightforward in Java, though."}],"owner":{"reputation":7584,"user_id":919710,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/fl1Jg.jpg?s=128&g=1","display_name":"Alexandre Santos","link":"https://stackoverflow.com/users/919710/alexandre-santos"},"comment_count":1,"is_accepted":false,"community_owned_date":1402005281,"score":7,"last_activity_date":1402005281,"creation_date":1402005281,"answer_id":24070827,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>There are many answers on how to create a memory leak in Java, but please note the point asked during the interview.</p>\n\n<p>\"how to create a memory leak with Java?\" is an open-ended question, whose purpose is to evaluate the degree of experience a developer has.</p>\n\n<p>If I ask you \"Do you have experience troubleshooting memory leaks in Java?\", your answer would be a simple \"Yes\".\nI would have then to follow up with \"Could you give me examples where you hat to troubleshoot memory leaks?\", to which you would give me one or two examples.</p>\n\n<p>However, when the interviewer asks \"how to create a memory leak with Java?\" the expected answer should follow alongs these lines:</p>\n\n<ul>\n<li>I've encountered a memory leak ... (say when) [that shows me experience]</li>\n<li>The code that was causing it was... (explain code) [you fixed it yourself]</li>\n<li>The fix I applied was based on ... (explain fix) [this gives me a chance to ask specifics about the fix]</li>\n<li>The test I did was ... [gives me the chance of asking other testing methodologies]</li>\n<li>I documented it this way ... [extra points. Good if you documented it]</li>\n<li>So, it is reasonable to think that, if we follow this in reverse order, which is, get the code I fixed, and remove my fix, that we would have a memory leak.</li>\n</ul>\n\n<p>When the developer fails to follow this line of thought I try to guide him/her asking \"Could you give me an example of how could Java leak memory?\", followed by \"Did you ever have to fix any memory leak in Java?\"</p>\n\n<p>Note that I am <strong>not</strong> asking for an example on how to leak memory in Java. That would be silly. Who would be interested in a developer who can effectively write code that leaks memory?</p>\n"},{"owner":{"reputation":4093,"user_id":1817435,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/3JaIM.jpg?s=128&g=1","display_name":"Viraj","link":"https://stackoverflow.com/users/1817435/viraj"},"comment_count":0,"is_accepted":false,"community_owned_date":1403092394,"score":7,"last_activity_date":1403092394,"creation_date":1403092394,"answer_id":24284882,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>String.substring method in java 1.6 create a memory leak. This blog post explains it.</p>\n\n<p><a href=\"http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html\" rel=\"noreferrer\">http://javarevisited.blogspot.com/2011/10/how-substring-in-java-works.html</a></p>\n"},{"owner":{"reputation":14558,"user_id":1833961,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/WzG31.png?s=128&g=1","display_name":"bvdb","link":"https://stackoverflow.com/users/1833961/bvdb"},"comment_count":0,"is_accepted":false,"community_owned_date":1405711476,"score":24,"last_activity_date":1414502330,"last_edit_date":1414502330,"creation_date":1405711476,"answer_id":24832345,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>What's a memory leak:</p>\n\n<ul>\n<li>It's caused by a <strong>bug</strong> or <strong>bad design.</strong></li>\n<li>It's a waste of memory.</li>\n<li><strong>It gets worse over time.</strong></li>\n<li><strong>The garbage collector cannot clean it.</strong></li>\n</ul>\n\n<p><em>Typical example:</em></p>\n\n<p>A cache of objects is a good starting point to mess things up.</p>\n\n<pre><code>private static final Map&lt;String, Info&gt; myCache = new HashMap&lt;&gt;();\n\npublic void getInfo(String key)\n{\n    // uses cache\n    Info info = myCache.get(key);\n    if (info != null) return info;\n\n    // if it's not in cache, then fetch it from the database\n    info = Database.fetch(key);\n    if (info == null) return null;\n\n    // and store it in the cache\n    myCache.put(key, info);\n    return info;\n}\n</code></pre>\n\n<p>Your cache grows and grows. And pretty soon the entire database gets sucked into memory. A better design uses an LRUMap (Only keeps recently used objects in cache).</p>\n\n<p>Sure, you can make things a lot more complicated: </p>\n\n<ul>\n<li>using <strong>ThreadLocal</strong> constructions.</li>\n<li>adding more <strong>complex reference trees</strong>. </li>\n<li>or leaks caused by <strong>3rd party libraries</strong>.</li>\n</ul>\n\n<p><em>What often happens:</em> </p>\n\n<p>If this Info object has references to other objects, which again have references to other objects. In a way you could also consider this to be some kind of memory leak, (caused by bad design).</p>\n"},{"comments":[{"owner":{"reputation":15063,"user_id":1617737,"user_type":"registered","accept_rate":53,"profile_image":"https://i.stack.imgur.com/BSCrn.jpg?s=128&g=1","display_name":"ban-geoengineering","link":"https://stackoverflow.com/users/1617737/ban-geoengineering"},"edited":false,"score":0,"creation_date":1435151311,"post_id":25375224,"comment_id":50079440,"content_license":"CC BY-SA 3.0","body":"Would making <code>mLeakyHandler</code> static prevent it from leaking memory? And are there any (other) ways to prevent <code>mLeakyHandler</code> from leaking the activity? Also, how would you go about solving the same problem for the anonymous <code>Runnable</code> inner class?"},{"owner":{"reputation":13114,"user_id":2087628,"user_type":"registered","accept_rate":42,"profile_image":"https://www.gravatar.com/avatar/698fddc9acccb5115122e3150f6019fd?s=128&d=identicon&r=PG&f=1","display_name":"JaskeyLam","link":"https://stackoverflow.com/users/2087628/jaskeylam"},"reply_to_user":{"reputation":15063,"user_id":1617737,"user_type":"registered","accept_rate":53,"profile_image":"https://i.stack.imgur.com/BSCrn.jpg?s=128&g=1","display_name":"ban-geoengineering","link":"https://stackoverflow.com/users/1617737/ban-geoengineering"},"edited":false,"score":1,"creation_date":1435198816,"post_id":25375224,"comment_id":50103787,"content_license":"CC BY-SA 3.0","body":"@ban-geoengineering Yes, make it static and if you need to involve the  outter activity, make the handler to hold a WeakReference to the activity, please check <a href=\"http://www.androiddesignpatterns.com/2013/01/inner-class-handler-memory-leak.html\" rel=\"nofollow noreferrer\">androiddesignpatterns.com/2013/01/&hellip;</a>"}],"owner":{"reputation":13114,"user_id":2087628,"user_type":"registered","accept_rate":42,"profile_image":"https://www.gravatar.com/avatar/698fddc9acccb5115122e3150f6019fd?s=128&d=identicon&r=PG&f=1","display_name":"JaskeyLam","link":"https://stackoverflow.com/users/2087628/jaskeylam"},"comment_count":2,"is_accepted":false,"community_owned_date":1408418421,"score":4,"last_activity_date":1408418421,"creation_date":1408418421,"answer_id":25375224,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p><strong>Carelessly Using a non-static inner Class inside a class who has its own life cycle.</strong></p>\n\n<p>In Java, <strong>non-static inner and anonymous classes</strong> hold an <strong>implicit reference</strong> to their outer class. Static inner classes, on the other hand, <strong>do not</strong>.</p>\n\n<p>Here is a common example to have memory leak in Android,which is not obvious though:</p>\n\n<pre><code>public class SampleActivity extends Activity {\n\n  private final Handler mLeakyHandler = new Handler() { //non-static inner class, holds the reference to the SampleActivity outter class\n    @Override\n    public void handleMessage(Message msg) {\n      // ...\n    }\n  }\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    // Post a message and delay its execution for a long time.\n    mLeakyHandler.postDelayed(new Runnable() {//here, the anonymous inner class holds the reference to the SampleActivity class too\n      @Override\n      public void run() {\n     //.... \n      }\n    }, SOME_TOME_TIME);\n\n    // Go back to the previous Activity.\n    finish();\n  }}\n</code></pre>\n\n<p>This will prevent the activity context from being garbage collected. </p>\n"},{"owner":{"reputation":27,"user_id":4658182,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/57bd513a1bf3912510987d24a72068e9?s=128&d=identicon&r=PG&f=1","display_name":"TV Trailers","link":"https://stackoverflow.com/users/4658182/tv-trailers"},"comment_count":0,"is_accepted":false,"community_owned_date":1426084687,"score":-5,"last_activity_date":1426084687,"creation_date":1426084687,"answer_id":28989529,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>There's no such thing as a memory leak in Java. Memory leak is a phrase borrowed from C et al. Java deals with memory allocation internally with the help of the GC. There's <em>memory wastefulness</em> (ie. leaving stranded objects), but not <em>memory leak</em>.</p>\n"},{"comments":[{"owner":{"reputation":2923,"user_id":504060,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/e24394b30584fff8f4968c3713c68fbc?s=128&d=identicon&r=PG","display_name":"kiltek","link":"https://stackoverflow.com/users/504060/kiltek"},"edited":false,"score":0,"creation_date":1533194364,"post_id":41795340,"comment_id":90258943,"content_license":"CC BY-SA 4.0","body":"Why was this downvoted? It is actually taken from a book."},{"owner":{"reputation":2358,"user_id":3275754,"user_type":"registered","profile_image":"https://i.stack.imgur.com/3lIzi.gif?s=128&g=1","display_name":"0xDEADC0DE","link":"https://stackoverflow.com/users/3275754/0xdeadc0de"},"edited":false,"score":0,"creation_date":1545918746,"post_id":41795340,"comment_id":94730796,"content_license":"CC BY-SA 4.0","body":"I think it is downvoted because this example will not create obsolete references. As long as this stack is alive, each reference is accessible through the elements array. Even if <code>size</code> changes every time <code>pop</code> is called, it is still possible to iterate over the complete array using its <code>length</code> property. Therefore there are no obsolete references. I must say that it is usual that a collection releases ownership in a function such as <code>pop</code> though, but this example will not create a memory leak which is the original question"}],"owner":{"reputation":969,"user_id":2896382,"user_type":"registered","profile_image":"https://i.stack.imgur.com/mFZYD.jpg?s=128&g=1","display_name":"gurubelli","link":"https://stackoverflow.com/users/2896382/gurubelli"},"comment_count":2,"is_accepted":false,"community_owned_date":1485114053,"score":-4,"last_activity_date":1485114053,"creation_date":1485114053,"answer_id":41795340,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>From effective java book </p>\n\n<ol>\n<li><strong>whenever a class manages its own memory, the programmer should be\nalert for memory leaks</strong></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>public class Stack {\nprivate Object[] elements;\nprivate int size = 0;\nprivate static final int DEFAULT_INITIAL_CAPACITY = 16;\n\npublic Stack() {\n    elements = new Object[DEFAULT_INITIAL_CAPACITY];\n}\n\npublic void push(Object e) {\n    ensureCapacity();\n    elements[size++] = e;\n}\n\npublic Object pop() {\n    if (size == 0)\n        throw new EmptyStackException();\n    return elements[--size];\n}\n\n/**\n * Ensure space for at least one more element, roughly doubling the capacity\n * each time the array needs to grow.\n */\nprivate void ensureCapacity() {\n    if (elements.length == size)\n        elements = Arrays.copyOf(elements, 2 * size + 1);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Can you spot the memory leak?\nSo where is the memory leak? If a stack grows and then shrinks, the objects\nthat were popped off the stack will not be garbage collected, even if the program\nusing the stack has no more references to them. This is because the stack maintains\nobsolete references to these objects. An obsolete reference is simply a reference\nthat will never be dereferenced again. In this case, any references outside of\nthe âactive portionâ of the element array are obsolete. The active portion consists\nof the elements whose index is less than size.</p>\n"},{"owner":{"user_type":"does_not_exist","display_name":"user1529891"},"comment_count":0,"is_accepted":false,"community_owned_date":1492531917,"score":6,"last_activity_date":1492531917,"creation_date":1492531917,"answer_id":43477232,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A memory leak in java is not your typical C/C++ memory leak.</p>\n\n<p>To understand how the JVM works, read the <a href=\"https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\" rel=\"noreferrer\">Understanding Memory Management</a>.</p>\n\n<p>Basically, the important part is:</p>\n\n<blockquote>\n  <p>The Mark and Sweep Model</p>\n  \n  <p>The JRockit JVM uses the mark and sweep garbage collection model for\n  performing garbage collections of the whole heap. A mark and sweep\n  garbage collection consists of two phases, the mark phase and the\n  sweep phase.</p>\n  \n  <p>During the mark phase <strong>all objects that are reachable from Java\n  threads, native handles and other root sources are marked as alive</strong>, as\n  well as the objects that are reachable from these objects and so\n  forth. <strong>This process identifies and marks all objects that are still\n  used, and the rest can be considered garbage.</strong></p>\n  \n  <p>During the sweep phase the heap is traversed to find the gaps between\n  the live objects. These gaps are recorded in a free list and are made\n  available for new object allocation.</p>\n  \n  <p>The JRockit JVM uses two improved versions of the mark and sweep\n  model. One is mostly concurrent mark and sweep and the other is\n  parallel mark and sweep. You can also mix the two strategies, running\n  for example mostly concurrent mark and parallel sweep.</p>\n</blockquote>\n\n<p>So, to create a memory leak in Java; the easiest way to do that is to create a database connection, do some work, and simply not <code>Close()</code> it; then generate a new database connection while staying in scope. This isn't hard to do in a loop for example. If you have a worker that pulls from a queue and pushes to a database you can easily create a memory leak by forgetting to <code>Close()</code> connections or opening them when not necessary, and so forth.</p>\n\n<p>Eventually, you'll consume the heap that has been allocated to the JVM by forgetting to <code>Close()</code> the connection. This will result in the JVM garbage collecting like crazy; eventually resulting in <code>java.lang.OutOfMemoryError: Java heap space</code> errors. It should be noted that the error may not mean there is a memory leak; it could just mean you don't have enough memory; databases like Cassandra and ElasticSearch for example can throw that error because they don't have enough heap space.</p>\n\n<p>Its worth noting that this is true for all GC languages. Below, are some examples I've seen working as an SRE:</p>\n\n<ul>\n<li>Node using Redis as a queue; the development team created new connections every 12 hours and forgot to close the old ones. Eventually node was OOMd because it consumed all the memory.</li>\n<li>Golang (I'm guilty of this one); parsing large json files with <code>json.Unmarshal</code> and then passing the results by reference and keeping them open. Eventually, this resulted in the entire heap being consumed by accidental refs I kept open to decode json.</li>\n</ul>\n"},{"owner":{"reputation":482,"user_id":2292492,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/CD9c7.jpg?s=128&g=1","display_name":"deltamind106","link":"https://stackoverflow.com/users/2292492/deltamind106"},"comment_count":0,"is_accepted":false,"community_owned_date":1507921764,"score":22,"last_activity_date":1507921764,"creation_date":1507921764,"answer_id":46736578,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>The interviewer was probably looking for a circular reference like the code below (which incidentally only leak memory in very old JVMs that used reference counting, which isn't the case any more).  But it's a pretty vague question, so it's a prime opportunity to show off your understanding of JVM memory management.</p>\n\n<pre><code>class A {\n    B bRef;\n}\n\nclass B {\n    A aRef;\n}\n\npublic class Main {\n    public static void main(String args[]) {\n        A myA = new A();\n        B myB = new B();\n        myA.bRef = myB;\n        myB.aRef = myA;\n        myA=null;\n        myB=null;\n        /* at this point, there is no access to the myA and myB objects, */\n        /* even though both objects still have active references. */\n    } /* main */\n}\n</code></pre>\n\n<p>Then you can explain that with reference counting, the above code would leak memory.  But most modern JVMs don't use reference counting any longer, most use a sweep garbage collector, which will in fact collect this memory.</p>\n\n<p>Next you might explain creating an Object that has an underlying native resource, like this:</p>\n\n<pre><code>public class Main {\n    public static void main(String args[]) {\n        Socket s = new Socket(InetAddress.getByName(\"google.com\"),80);\n        s=null;\n        /* at this point, because you didn't close the socket properly, */\n        /* you have a leak of a native descriptor, which uses memory. */\n    }\n}\n</code></pre>\n\n<p>Then you can explain this is technically a memory leak, but really the leak is caused by native code in the JVM allocating underlying native resources, which weren't freed by your Java code.</p>\n\n<p>At the end of the day, with a modern JVM, you need to write some Java code that allocates a native resource outside the normal scope of the JVM's awareness.</p>\n"},{"comments":[{"owner":{"reputation":1357,"user_id":4958332,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/kvGxB.png?s=128&g=1","display_name":"Karan Khanna","link":"https://stackoverflow.com/users/4958332/karan-khanna"},"edited":false,"score":9,"creation_date":1524128139,"post_id":47513757,"comment_id":86848885,"content_license":"CC BY-SA 3.0","body":"This is not an example of memory leak. You are just trying to consume the whole memory here with your list. Memory leak is when obsolete references cannot be garbage collected."}],"owner":{"reputation":65,"user_id":4738608,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4890e0ad3c0a0d15fa99d96059b4c58c?s=128&d=identicon&r=PG&f=1","display_name":"akhambir","link":"https://stackoverflow.com/users/4738608/akhambir"},"comment_count":1,"is_accepted":false,"community_owned_date":1511794285,"score":-7,"last_activity_date":1511794285,"creation_date":1511794285,"answer_id":47513757,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>Just like this!</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n    while(true) {\n        objects.add(new Object());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1357,"user_id":4958332,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/kvGxB.png?s=128&g=1","display_name":"Karan Khanna","link":"https://stackoverflow.com/users/4958332/karan-khanna"},"edited":false,"score":0,"creation_date":1524129147,"post_id":48641078,"comment_id":86849520,"content_license":"CC BY-SA 3.0","body":"I don,t think so. A new String is created and returned. Here is a code snippet from open-jdk 6 for subString function return ((beginIndex == 0) &amp;&amp; (endIndex == count)) ? this : new String(offset + beginIndex, endIndex - beginIndex, value);"},{"owner":{"reputation":15,"user_id":4268603,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d49a992154cf10f1fae58f796da5e5c7?s=128&d=identicon&r=PG&f=1","display_name":"Praveen Kumar","link":"https://stackoverflow.com/users/4268603/praveen-kumar"},"reply_to_user":{"reputation":1357,"user_id":4958332,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/kvGxB.png?s=128&g=1","display_name":"Karan Khanna","link":"https://stackoverflow.com/users/4958332/karan-khanna"},"edited":false,"score":1,"creation_date":1524130056,"post_id":48641078,"comment_id":86850189,"content_license":"CC BY-SA 3.0","body":"correct new string object is getting created but if you see it is passing value which is char array of original string and newly created string keeps the reference of complete char array. you can just compare the implementation from java 6 to 8, java 7 and 8 uses Arrays.copyOfRange(value, offset, offset+count) to return actual substring"},{"owner":{"reputation":1357,"user_id":4958332,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/kvGxB.png?s=128&g=1","display_name":"Karan Khanna","link":"https://stackoverflow.com/users/4958332/karan-khanna"},"edited":false,"score":0,"creation_date":1524130704,"post_id":48641078,"comment_id":86850693,"content_license":"CC BY-SA 3.0","body":"Got it. Thanks."}],"owner":{"reputation":15,"user_id":4268603,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d49a992154cf10f1fae58f796da5e5c7?s=128&d=identicon&r=PG&f=1","display_name":"Praveen Kumar","link":"https://stackoverflow.com/users/4268603/praveen-kumar"},"comment_count":3,"is_accepted":false,"community_owned_date":1517913829,"score":0,"last_activity_date":1517915363,"last_edit_date":1517915363,"creation_date":1517913829,"answer_id":48641078,"question_id":6470651,"content_license":"CC BY-SA 3.0","body":"<p>A real time example of memory leak before JDK 1.7</p>\n\n<p>suppose you read a file of 1000 lines of text and keep in String object</p>\n\n<pre><code>String fileText = 1000 characters from file\n\nfileText = fileText.subString(900, fileText.length());\n</code></pre>\n\n<p>In above code I initially read 1000 char and then did substring to get only 100 last characters. Now fileText should only refer to 100 chars and all other characters should get garbage collected as I lost the reference but before JDK 1.7 substring function indirectly refer to original string of last 100 chars and prevents whole string from garbage collection and whole 1000 chars will be there in memory until you loose reference of substring.</p>\n\n<p>you can create memory leak example like the above</p>\n"},{"owner":{"reputation":3321,"user_id":8524301,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/RlSIc.jpg?s=128&g=1","display_name":"Marko Pacak","link":"https://stackoverflow.com/users/8524301/marko-pacak"},"comment_count":0,"is_accepted":false,"community_owned_date":1524745313,"score":13,"last_activity_date":1529306910,"last_edit_date":1529306910,"creation_date":1524745313,"answer_id":50042877,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>Another way to create potentially huge memory leaks is to hold references to <code>Map.Entry&lt;K,V&gt;</code> of a <code>TreeMap</code>.</p>\n\n<p>It is hard to asses why this applies only to <code>TreeMap</code>s, but by looking at the implementation the reason might be that: a <code>TreeMap.Entry</code> stores references to its siblings, therefore if a <code>TreeMap</code> is ready to be collected, but some other class holds a reference to any of its <code>Map.Entry</code>, then the <strong>entire</strong> Map will be retained into memory.</p>\n\n<hr>\n\n<p><strong>Real-life scenario:</strong></p>\n\n<p>Imagine having a db query that returns a big <code>TreeMap</code> data structure. People usually use <code>TreeMap</code>s as the element insertion order is retained.</p>\n\n<pre><code>public static Map&lt;String, Integer&gt; pseudoQueryDatabase();\n</code></pre>\n\n<p>If the query was called lots of times and, for each query (so, for each <code>Map</code> returned) you save an <code>Entry</code> somewhere, the memory would constantly keep growing.</p>\n\n<p>Consider the following wrapper class:</p>\n\n<pre><code>class EntryHolder {\n    Map.Entry&lt;String, Integer&gt; entry;\n\n    EntryHolder(Map.Entry&lt;String, Integer&gt; entry) {\n        this.entry = entry;\n    }\n}\n</code></pre>\n\n<p>Application:</p>\n\n<pre><code>public class LeakTest {\n\n    private final List&lt;EntryHolder&gt; holdersCache = new ArrayList&lt;&gt;();\n    private static final int MAP_SIZE = 100_000;\n\n    public void run() {\n        // create 500 entries each holding a reference to an Entry of a TreeMap\n        IntStream.range(0, 500).forEach(value -&gt; {\n            // create map\n            final Map&lt;String, Integer&gt; map = pseudoQueryDatabase();\n\n            final int index = new Random().nextInt(MAP_SIZE);\n\n            // get random entry from map\n            for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\n                if (entry.getValue().equals(index)) {\n                    holdersCache.add(new EntryHolder(entry));\n                    break;\n                }\n            }\n            // to observe behavior in visualvm\n            try {\n                Thread.sleep(500);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        });\n\n    }\n\n    public static Map&lt;String, Integer&gt; pseudoQueryDatabase() {\n        final Map&lt;String, Integer&gt; map = new TreeMap&lt;&gt;();\n        IntStream.range(0, MAP_SIZE).forEach(i -&gt; map.put(String.valueOf(i), i));\n        return map;\n    }\n\n    public static void main(String[] args) throws Exception {\n        new LeakTest().run();\n    }\n}\n</code></pre>\n\n<p>After each <code>pseudoQueryDatabase()</code> call, the <code>map</code> instances should be ready for collection, but it won't happen, as at least one <code>Entry</code> is stored somewhere else.</p>\n\n<p>Depending on your <code>jvm</code> settings, the application may crash in the early stage due to a <code>OutOfMemoryError</code>.</p>\n\n<p>You can see from this <code>visualvm</code> graph how the memory keeps growing.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Byiwn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Byiwn.png\" alt=\"Memory dump - TreeMap\"></a></p>\n\n<p>The same does not happen with a hashed data-structure (<code>HashMap</code>).</p>\n\n<p>This is the graph when using a <code>HashMap</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yr3eC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Yr3eC.png\" alt=\"Memory dump - HashMap\"></a></p>\n\n<p><strong>The solution?</strong> Just directly save the key / value (as you probably already do) rather than saving the <code>Map.Entry</code>.</p>\n\n<hr>\n\n<p>I have written a more extensive benchmark <a href=\"https://stackoverflow.com/a/49430255/8524301\">here</a>.</p>\n"},{"owner":{"reputation":1854,"user_id":545353,"user_type":"registered","profile_image":"https://i.stack.imgur.com/o0daF.png?s=128&g=1","display_name":"Pavel Molchanov","link":"https://stackoverflow.com/users/545353/pavel-molchanov"},"comment_count":0,"is_accepted":false,"community_owned_date":1529614032,"score":8,"last_activity_date":1529614032,"creation_date":1529614032,"answer_id":50977188,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>I want to give an advice on how to monitor application for the memory leaks with the tools that are available in JVM. It doesn't show how to generate the memory leak but explains how to detect it with minimum tools available.</p>\n\n<p>You need to monitor Java memory consumption first.</p>\n\n<p>The simplest way to do this is to use jstat utility that comes with JVM.</p>\n\n<pre><code>jstat -gcutil &lt;process_id&gt; &lt;timeout&gt;\n</code></pre>\n\n<p>It will report memory consumption for each generation (Young, Eldery and Old) and garbage collection times (Young and Full).</p>\n\n<p>As soon as you spot that Full Garbage Collection is executed too often and takes too much time, you can assume that application is leaking memory.</p>\n\n<p>Then you need to create a memory dump using jmap utility:</p>\n\n<pre><code>jmap -dump:live,format=b,file=heap.bin &lt;process_id&gt;\n</code></pre>\n\n<p>Then you need to analyse heap.bin file with Memory Analyser, Eclipse Memory Analyzer (MAT) for example.</p>\n\n<p>MAT will analyze the memory and provide you suspect information about memory leaks.</p>\n"},{"owner":{"reputation":5843,"user_id":2361308,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/99484dc9d142352778e01ac0c4948c1d?s=128&d=identicon&r=PG","display_name":"Hearen","link":"https://stackoverflow.com/users/2361308/hearen"},"comment_count":0,"is_accepted":false,"community_owned_date":1553757930,"score":1,"last_activity_date":1553758231,"last_edit_date":1553758231,"creation_date":1553757930,"answer_id":55392154,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>a memory leak is a type of resource leak that occurs when a computer program incorrectly manages memory allocations in such a way that memory which is <strong>no longer needed is not released</strong> => <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"nofollow noreferrer\">wiki definition</a> </p>\n</blockquote>\n\n<p><sub> It's kind of relatively context-based topic, you can just create one based on your taste as long as the unused references will never be used by clients but still stay alive.</sub></p>\n\n<p>The first example should be a custom stack without <em>nulling</em> the obsolete references in <a href=\"https://www.codeproject.com/Articles/30593/Effective-Java#pre30076\" rel=\"nofollow noreferrer\">effective java item 6</a>.</p>\n\n<p>Of course there are many more as long as you want, but if we just take look at the java built-in classes, it could be some as</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\" rel=\"nofollow noreferrer\"><code>subList()</code></a></p>\n\n<p>Let's check some <em>super silly</em> code to produce the leak. </p>\n\n<pre><code>public class MemoryLeak {\n    private static final int HUGE_SIZE = 10_000;\n\n    public static void main(String... args) {\n        letsLeakNow();\n    }\n\n    private static void letsLeakNow() {\n        Map&lt;Integer, Object&gt; leakMap = new HashMap&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            leakMap.put(i * 2, getListWithRandomNumber());\n        }\n    }\n\n\n\n    private static List&lt;Integer&gt; getListWithRandomNumber() {\n        List&lt;Integer&gt; originalHugeIntList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; HUGE_SIZE; ++i) {\n            originalHugeIntList.add(new Random().nextInt());\n        }\n        return originalHugeIntList.subList(0, 1);\n    }\n}\n</code></pre>\n\n<p>Actually there is another trick we can cause memory leak using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a> by taking advantage of its looking process. There are actually two types:</p>\n\n<ul>\n<li><code>hashCode()</code> is always the same but <code>equals()</code> are different;</li>\n<li>use <em>random</em> <code>hashCode()</code> and <code>equals()</code> always true;</li>\n</ul>\n\n<p>Why?</p>\n\n<p><a href=\"https://stackoverflow.com/a/6493946/2361308\"><strong><code>hashCode()</code> -> bucket => <code>equals()</code> to locate the pair</strong></a></p>\n\n<hr>\n\n<p>I was about to mention <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#substring-int-int-\" rel=\"nofollow noreferrer\"><code>substring()</code></a> first and then <code>subList()</code> but it seems this issue is already fixed as its source presents in JDK 8. </p>\n\n<pre><code>public String substring(int beginIndex, int endIndex) {\n    if (beginIndex &lt; 0) {\n        throw new StringIndexOutOfBoundsException(beginIndex);\n    }\n    if (endIndex &gt; value.length) {\n        throw new StringIndexOutOfBoundsException(endIndex);\n    }\n    int subLen = endIndex - beginIndex;\n    if (subLen &lt; 0) {\n        throw new StringIndexOutOfBoundsException(subLen);\n    }\n    return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this\n            : new String(value, beginIndex, subLen);\n}\n</code></pre>\n"},{"owner":{"reputation":2848,"user_id":7580839,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/ae5334c16d2cc03e6a3bc294a962b578?s=128&d=identicon&r=PG&f=1","display_name":"Amir Fo","link":"https://stackoverflow.com/users/7580839/amir-fo"},"comment_count":0,"is_accepted":false,"community_owned_date":1568820272,"score":0,"last_activity_date":1568906304,"last_edit_date":1568906304,"creation_date":1568820272,"answer_id":57996188,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>One of the java memory leakings examples is <a href=\"https://bugs.mysql.com/bug.php?id=5022\" rel=\"nofollow noreferrer\">MySQLs memory leaking bug</a> resulting when ResultSets close method is forgotten to be called. For example:</p>\n\n<pre><code>while(true) {\n    ResultSet rs = database.select(query);\n    ...\n    // going to next step of loop and leaving resultset without calling rs.close();\n}\n</code></pre>\n"},{"owner":{"reputation":1062,"user_id":11714860,"user_type":"registered","profile_image":"https://i.stack.imgur.com/e6Xo3.png?s=128&g=1","display_name":"Sapphire_Brick","link":"https://stackoverflow.com/users/11714860/sapphire-brick"},"comment_count":0,"is_accepted":false,"community_owned_date":1588555342,"score":2,"last_activity_date":1614293568,"last_edit_date":1614293568,"creation_date":1588555342,"answer_id":61583798,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<pre><code>\nimport sun.misc.Unsafe;\nimport java.lang.reflect.Field;\n\npublic class Main {\n    public static void main(String args[]) {\n        try {\n            Field f = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n            f.setAccessible(true);\n            ((Unsafe) f.get(null)).allocateMemory(2000000000);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":595,"user_id":10831193,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-YMUXc-47d0g/AAAAAAAAAAI/AAAAAAAAAAc/3wehOv-MqYE/photo.jpg?sz=128","display_name":"Jessie Lesbian","link":"https://stackoverflow.com/users/10831193/jessie-lesbian"},"comment_count":0,"is_accepted":false,"community_owned_date":1589621250,"score":0,"last_activity_date":1589621250,"creation_date":1589621250,"answer_id":61834624,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>Create a JNI function containing just a while-true loop and call it with a large object from another thread. The GC doesn't like JNI very much and is going to keep the object in memory forever.</p>\n"},{"owner":{"reputation":37,"user_id":10556375,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-ohpmAePpLOo/AAAAAAAAAAI/AAAAAAAAAA0/6vhp0g4vq0M/photo.jpg?sz=128","display_name":"Jimmy lau","link":"https://stackoverflow.com/users/10556375/jimmy-lau"},"comment_count":0,"is_accepted":false,"community_owned_date":1591417457,"score":-1,"last_activity_date":1591417457,"creation_date":1591417457,"answer_id":62227276,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>One of the easiest way to implement memory leak sample is to use static method.</p>\n\n<p>For example</p>\n\n<pre><code>static List&lt;int&gt; list = new ArrayList&lt;&gt;();\nfor (int i = 0; i &lt; 10000; i++) {\n    list.add(i);\n}\n\nsystem.sleep();\n</code></pre>\n\n<p>In this case, jvm can't release the memory of list, cuz it's a static class and it always remains memory on heap.</p>\n"},{"owner":{"reputation":1598,"user_id":12867091,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Qa0nK.jpg?s=128&g=1","display_name":"Tashkhisi","link":"https://stackoverflow.com/users/12867091/tashkhisi"},"comment_count":0,"is_accepted":false,"community_owned_date":1598637860,"score":2,"last_activity_date":1605939194,"last_edit_date":1605939194,"creation_date":1598637860,"answer_id":63638868,"question_id":6470651,"content_license":"CC BY-SA 4.0","body":"<p>There are many good examples of memory leaks in Java, and I will mention two of them in this answer.</p>\n<p><strong>Example 1:</strong></p>\n<p>Here is a good example of a memory leak from the book <em>Effective Java, Third Edition</em> (item 7: Eliminate obsolete object references):</p>\n<pre><code>// Can you spot the &quot;memory leak&quot;?\npublic class Stack {\n    private static final int DEFAULT_INITIAL_CAPACITY = 16;\n    private Object[] elements;\n    private int size = 0;\n\n    public Stack() {\n        elements = new Object[DEFAULT_INITIAL_CAPACITY];\n    }\n\n    public void push(Object e) {\n        ensureCapacity();\n        elements[size++] = e;\n    }\n\n    public Object pop() {\n        if (size == 0) throw new EmptyStackException();\n        return elements[--size];\n    }\n\n    /*** Ensure space for at least one more element, roughly* doubling the capacity each time the array needs to grow.*/\n    private void ensureCapacity() {\n        if (elements.length == size) elements = Arrays.copyOf(elements, 2 * size + 1);\n    }\n}\n</code></pre>\n<p>This is the paragraph of the book that describe why this implementation will cause a memory leak:</p>\n<blockquote>\n<p>If a stack grows and then shrinks, the objects that were popped off the\nstack will not be garbage collected, even if the program using  the\nstack  has  no  more  references  to  them.  This  is  because  the\nstack  maintains obsolete references to these objects. An obsolete\nreference is simply a reference that will never be dereferenced\nagain. In this case, any references outside of the âactive portionâ of\nthe element array are obsolete. The active portion consists of the\nelements whose index is less than size</p>\n</blockquote>\n<p>Here is the solution of the book to tackle this memory leak:</p>\n<blockquote>\n<p>The  fix  for  this  sort  of  problem  is  simple:  null  out\nreferences  once  they become obsolete. In the case of our Stack class,\nthe reference to an item becomes obsolete  as  soon  as  itâs  popped\noff  the  stack. The  corrected  version  of  the  pop method looks like this:</p>\n</blockquote>\n<pre><code>public Object pop() {\n    if (size == 0) throw new EmptyStackException();\n    Object result = elements[--size];\n    elements[size] = null; // Eliminate obsolete reference\n    return result;\n}\n</code></pre>\n<p>But how can we prevent a memory leak from happening? This is a good caveat from the book:</p>\n<blockquote>\n<p>Generally  speaking,  whenever  a  class  manages  its  own  memory,\nthe  programmer should be alert for memory leaks. Whenever an element\nis freed, any object references contained in the element should be\nnulled out.</p>\n</blockquote>\n<p><strong>Example 2:</strong></p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">observer pattern</a> also can cause a memory leak. You can read about this pattern in the following link: <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">Observer pattern</a>.</p>\n<p>This is one implementation of <code>Observer</code> pattern:</p>\n<pre><code>class EventSource {\n    public interface Observer {\n        void update(String event);\n    }\n\n    private final List&lt;Observer&gt; observers = new ArrayList&lt;&gt;();\n\n    private void notifyObservers(String event) {\n        observers.forEach(observer -&gt; observer.update(event)); //alternative lambda expression: observers.forEach(Observer::update);\n    }\n\n    public void addObserver(Observer observer) {\n        observers.add(observer);\n    }\n\n    public void scanSystemIn() {\n        Scanner scanner = new Scanner(System.in);\n        while (scanner.hasNextLine()) {\n            String line = scanner.nextLine();\n            notifyObservers(line);\n        }\n    }\n}\n</code></pre>\n<p>In this implementation, <code>EventSource</code>, which is Observable in <code>Observer</code> design pattern, can hold link to <code>Obeserver</code> objects, but this link is never removed from the <code>observers</code> field in <code>EventSource</code>. So they will never be collected by the garbage collector. One solution to tackle this problem is providing another method to client for removing the aforementioned observers from <code>observers</code> field when they don't need those observers any more:</p>\n<pre><code>public void removeObserver(Observer observer) {\n    observers.remove(observer);\n}\n</code></pre>\n"}],"owner":{"reputation":23898,"user_id":465179,"user_type":"registered","accept_rate":99,"profile_image":"https://www.gravatar.com/avatar/a2fa6a84c0fa7de188a4777dd2bce022?s=128&d=identicon&r=PG&f=1","display_name":"MatBanik","link":"https://stackoverflow.com/users/465179/matbanik"},"comment_count":0,"is_answered":true,"view_count":670200,"protected_date":1366039525,"accepted_answer_id":6471947,"answer_count":59,"community_owned_date":1311330284,"score":3385,"last_activity_date":1614293568,"creation_date":1308931912,"last_edit_date":1605938912,"question_id":6470651,"link":"https://stackoverflow.com/questions/6470651/how-can-i-create-a-memory-leak-in-java","title":"How can I create a memory leak in Java?","body":"<p>I just had an interview, and I was asked to create a <em><strong>memory leak</strong></em> with Java.</p>\n<p>Needless to say, I felt pretty dumb having no clue on how to even start creating one.</p>\n<p>What would an example be?</p>\n"},{"tags":["java","private","public","protected","access-modifiers"],"comments":[{"owner":{"reputation":5589,"user_id":827280,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG","display_name":"Museful","link":"https://stackoverflow.com/users/827280/museful"},"edited":false,"score":167,"creation_date":1360749413,"post_id":215497,"comment_id":20813700,"content_license":"CC BY-SA 3.0","body":"<code>private</code> hides from other classes within the package. <code>public</code> exposes to classes outside the package. <code>protected</code> is a version of <code>public</code> restricted only to subclasses."},{"owner":{"reputation":1479,"user_id":1824094,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/dee334d11391632e5c2ba4709d942c96?s=128&d=identicon&r=PG","display_name":"Nicolas Barbulesco","link":"https://stackoverflow.com/users/1824094/nicolas-barbulesco"},"reply_to_user":{"reputation":5589,"user_id":827280,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG","display_name":"Museful","link":"https://stackoverflow.com/users/827280/museful"},"edited":false,"score":91,"creation_date":1377078709,"post_id":215497,"comment_id":26944600,"content_license":"CC BY-SA 3.0","body":"@Tennenrishin â No ; contrary to C++, in Java <code>protected</code> makes the method also accessible from the whole package. This stupidity in Java&#39;s visiblity model breaks the goal of <code>protected</code>."},{"owner":{"reputation":5589,"user_id":827280,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG","display_name":"Museful","link":"https://stackoverflow.com/users/827280/museful"},"reply_to_user":{"reputation":1479,"user_id":1824094,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/dee334d11391632e5c2ba4709d942c96?s=128&d=identicon&r=PG","display_name":"Nicolas Barbulesco","link":"https://stackoverflow.com/users/1824094/nicolas-barbulesco"},"edited":false,"score":38,"creation_date":1394794776,"post_id":215497,"comment_id":34060988,"content_license":"CC BY-SA 3.0","body":"@Nicolas It is accessible from the whole package, with or without <code>protected</code>. As an access <i>modifier</i>, all that <code>protected</code> does is to expose to subclasses outside the package."},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"reply_to_user":{"reputation":5589,"user_id":827280,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG","display_name":"Museful","link":"https://stackoverflow.com/users/827280/museful"},"edited":false,"score":16,"creation_date":1396878338,"post_id":215497,"comment_id":34973464,"content_license":"CC BY-SA 3.0","body":"@tennenrishin - well, that is what Nicolas said... and you are just repeating it now. What you originally said was that <code>protected</code> - and I quote - &#39;is a version of public restricted only to subclasses&#39; which is not true by your own admission since protected also allows access through the whole package (ergo, it does not <b>restrict</b> access to subclasses.)"},{"owner":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"edited":false,"score":13,"creation_date":1396878814,"post_id":215497,"comment_id":34973786,"content_license":"CC BY-SA 3.0","body":"I also agree with Nicolas in that the protected access mode in Java is idiotic. What happened is that Java conflated horizontal (lattice) and vertical access restriction qualifiers. Default scope is a horizontal/lattice restriction with the lattice being the package. Public is another horizontal restriction where the lattice is the whole world. Private and (C++) protected are vertical. It would have been better if we had a cross-cut access, say, <code>protected-package</code> for the rare cases where we actually needed it, leaving <code>protected</code> to be equivalent to the C++ version of protected."},{"owner":{"reputation":5589,"user_id":827280,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/1c39ecec1f8d62bf8b6b27ba05904990?s=128&d=identicon&r=PG","display_name":"Museful","link":"https://stackoverflow.com/users/827280/museful"},"reply_to_user":{"reputation":9688,"user_id":201722,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/z5MSO.jpg?s=128&g=1","display_name":"luis.espinal","link":"https://stackoverflow.com/users/201722/luis-espinal"},"edited":false,"score":8,"creation_date":1422387828,"post_id":215497,"comment_id":44726481,"content_license":"CC BY-SA 3.0","body":"@luis.espinal Then he was just repeating what the first comment had said. You cannot expose what is already visible, and saying that <code>protected</code> is a restricted exposer does not imply that it <i>hides</i> anything. Otherwise even &quot;<code>public</code> exposes to classes outside the package&quot; would suggest that <code>public</code> <i>hides</i> from classes inside the package."},{"owner":{"reputation":28387,"user_id":639520,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/KzMc4.jpg?s=128&g=1","display_name":"E-Riz","link":"https://stackoverflow.com/users/639520/e-riz"},"reply_to_user":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"edited":false,"score":1,"creation_date":1441121282,"post_id":215497,"comment_id":52545081,"content_license":"CC BY-SA 3.0","body":"The accepted answer is not incorrect, it&#39;s just incomplete and a mere copy+paste job from the external resource. @Mechanical snail&#39;s answer (<a href=\"http://stackoverflow.com/a/12401576/639520\">stackoverflow.com/a/12401576/639520</a>) is much better IMO."},{"owner":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"reply_to_user":{"reputation":1479,"user_id":1824094,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/dee334d11391632e5c2ba4709d942c96?s=128&d=identicon&r=PG","display_name":"Nicolas Barbulesco","link":"https://stackoverflow.com/users/1824094/nicolas-barbulesco"},"edited":false,"score":3,"creation_date":1446741577,"post_id":215497,"comment_id":54879652,"content_license":"CC BY-SA 3.0","body":"@NicolasBarbulesco Contrary to C++? C++ doesn&#39;t have packages, you cannot really make the method accessible to a number of classes unless you make each of them a friend of the class manually. If Java had no concept of packages, it would work exactly the same. Speaking of the stupidity, the code from the same package is supposed to come from the same developer anyway, so I don&#39;t really see a huge problem here."},{"owner":{"reputation":1479,"user_id":1824094,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/dee334d11391632e5c2ba4709d942c96?s=128&d=identicon&r=PG","display_name":"Nicolas Barbulesco","link":"https://stackoverflow.com/users/1824094/nicolas-barbulesco"},"reply_to_user":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"edited":false,"score":1,"creation_date":1448013742,"post_id":215497,"comment_id":55412871,"content_license":"CC BY-SA 3.0","body":"@Malcolm - &quot;the code from the same package is supposed to come from the same developer anyway&quot; Who says that? Often, this is not the case."},{"owner":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"reply_to_user":{"reputation":1479,"user_id":1824094,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/dee334d11391632e5c2ba4709d942c96?s=128&d=identicon&r=PG","display_name":"Nicolas Barbulesco","link":"https://stackoverflow.com/users/1824094/nicolas-barbulesco"},"edited":false,"score":1,"creation_date":1448013989,"post_id":215497,"comment_id":55413032,"content_license":"CC BY-SA 3.0","body":"@NicolasBarbulesco I don&#39;t see how this is possible if the packages are properly prefixed with the developer&#39;s domain."},{"owner":{"reputation":7659,"user_id":2619038,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/ec0034cda843c9fffd6fcccb5ec689bc?s=128&d=identicon&r=PG","display_name":"NoName","link":"https://stackoverflow.com/users/2619038/noname"},"edited":false,"score":2,"creation_date":1498207379,"post_id":215497,"comment_id":76416056,"content_license":"CC BY-SA 3.0","body":"No one else noticed the joke that moderator Mystical <code>protected</code> this question to prevent <i>everyone</i> from answering?? Genius!"},{"owner":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"reply_to_user":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"edited":false,"score":0,"creation_date":1526627553,"post_id":215497,"comment_id":87826675,"content_license":"CC BY-SA 4.0","body":"@Malcolm that is not true, we regularly put our own classes in same packages as libraries due to package-private access"},{"owner":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"reply_to_user":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"edited":false,"score":0,"creation_date":1526650122,"post_id":215497,"comment_id":87840348,"content_license":"CC BY-SA 4.0","body":"@Enerccio What isn&#39;t true? I didn&#39;t say that no one does it. That&#39;s bad practice though, you are accessing some private APIs that way which makes the code brittle, and starting with Java 9 packages split across modules are not allowed at all."},{"owner":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"reply_to_user":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"edited":false,"score":0,"creation_date":1526738464,"post_id":215497,"comment_id":87866715,"content_license":"CC BY-SA 4.0","body":"@Malcolm package private was just a bad idea and java should have never had one. Recently I had to create default JSON element that would not throw NPE if data was null but I couldn&#39;t do it because one method on JSONElement was package private. So I had to fudge it."},{"owner":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"reply_to_user":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"edited":false,"score":0,"creation_date":1526765556,"post_id":215497,"comment_id":87873991,"content_license":"CC BY-SA 4.0","body":"@Enerccio I don&#39;t see how inconvenient API design makes it Java&#39;s fault."},{"owner":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"reply_to_user":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"edited":false,"score":0,"creation_date":1526880432,"post_id":215497,"comment_id":87898869,"content_license":"CC BY-SA 4.0","body":"@Malcolm java&#39;s fault is the fact that there is package private"},{"owner":{"reputation":38484,"user_id":45668,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG","display_name":"Malcolm","link":"https://stackoverflow.com/users/45668/malcolm"},"reply_to_user":{"reputation":580,"user_id":2892515,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/e3574ef2bd4047860a03bc73b4702bbc?s=128&d=identicon&r=PG&f=1","display_name":"Enerccio","link":"https://stackoverflow.com/users/2892515/enerccio"},"edited":false,"score":0,"creation_date":1526895689,"post_id":215497,"comment_id":87905480,"content_license":"CC BY-SA 4.0","body":"@Enerccio You&#39;ve stated this already, you didn&#39;t provide the reasoning. We can <a href=\"https://chat.stackoverflow.com/rooms/171452/room-for-malcolm-and-enerccio\">continue in the chat</a>."}],"answers":[{"comments":[{"owner":{"reputation":993,"user_id":2105539,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/3fb69f5c0744cb4e01c78c60bae497f8?s=128&d=identicon&r=PG","display_name":"niks","link":"https://stackoverflow.com/users/2105539/niks"},"edited":false,"score":23,"creation_date":1504254922,"post_id":215505,"comment_id":78952256,"content_license":"CC BY-SA 3.0","body":"The protected member can only be accessed from subclass of same package but not subclass from different package. There should be a correction in above table"},{"owner":{"reputation":132,"user_id":7310028,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/60ad15b84b315288035387aad18c2d9f?s=128&d=identicon&r=PG&f=1","display_name":"Deepak","link":"https://stackoverflow.com/users/7310028/deepak"},"edited":false,"score":2,"creation_date":1524659143,"post_id":215505,"comment_id":87060470,"content_license":"CC BY-SA 3.0","body":"I am still not able to differentiate between &#39;Public&#39; and &#39;Protected&#39;. And what is &#39;World&#39; in this answer. Does it mean access out of project folder in a different project &amp; package?? But that is not taking place. Need help on this."},{"owner":{"reputation":1817,"user_id":1572834,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG","display_name":"adprocas","link":"https://stackoverflow.com/users/1572834/adprocas"},"reply_to_user":{"reputation":132,"user_id":7310028,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/60ad15b84b315288035387aad18c2d9f?s=128&d=identicon&r=PG&f=1","display_name":"Deepak","link":"https://stackoverflow.com/users/7310028/deepak"},"edited":false,"score":1,"creation_date":1525352352,"post_id":215505,"comment_id":87328973,"content_license":"CC BY-SA 4.0","body":"@Deepak, World is within your project. If you have a class that is public, any other class can instantiate that class. Same as methods. If it is public, anyone that uses that class can use that method. Package refers to the &quot;folder&quot; that you are in. So, <code>ca.my.package.controllers</code> is different than <code>ca.my.package.models</code>. Public items are accessible outside of those packages, but the rest are not. package-private are considered public within the package, essentially. Protected means anything that inherits it, or within the same package. Private removes all outside access, including package."},{"owner":{"reputation":1817,"user_id":1572834,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG","display_name":"adprocas","link":"https://stackoverflow.com/users/1572834/adprocas"},"edited":false,"score":5,"creation_date":1525352569,"post_id":215505,"comment_id":87329155,"content_license":"CC BY-SA 4.0","body":"<i>World is within your project</i>. I should explain further. Libraries are within your project, and if you&#39;re creating a library, they would expose these public classes and methods as well. So, saying just within your project is a bit off. &quot;Everything that uses it&quot; is a better description."},{"owner":{"reputation":132,"user_id":7310028,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/60ad15b84b315288035387aad18c2d9f?s=128&d=identicon&r=PG&f=1","display_name":"Deepak","link":"https://stackoverflow.com/users/7310028/deepak"},"reply_to_user":{"reputation":1817,"user_id":1572834,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG","display_name":"adprocas","link":"https://stackoverflow.com/users/1572834/adprocas"},"edited":false,"score":1,"creation_date":1525414988,"post_id":215505,"comment_id":87354276,"content_license":"CC BY-SA 4.0","body":"@adpro - I tried at my end making methods public and protected but both of these types of methods are accessible outside their primary package and user has to extend the parent class in both the cases which is quite obvious. I am still unsure of the difference. A little bit more explanation or trick might help."},{"owner":{"reputation":1817,"user_id":1572834,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG","display_name":"adprocas","link":"https://stackoverflow.com/users/1572834/adprocas"},"reply_to_user":{"reputation":132,"user_id":7310028,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/60ad15b84b315288035387aad18c2d9f?s=128&d=identicon&r=PG&f=1","display_name":"Deepak","link":"https://stackoverflow.com/users/7310028/deepak"},"edited":false,"score":1,"creation_date":1525436538,"post_id":215505,"comment_id":87366593,"content_license":"CC BY-SA 4.0","body":"@Deepak, if you are extending (inheriting) the class then that class that is inheriting will have access to all public and protected methods and properties. If you instead instantiate that class in another class (not extend) and try to do something like <code>object.protectedMethod()</code> on a protected method, you won&#39;t be able to unless it is in the same package."},{"owner":{"reputation":1817,"user_id":1572834,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e86142d5ef74f593fe63c44e11d2bf33?s=128&d=identicon&r=PG","display_name":"adprocas","link":"https://stackoverflow.com/users/1572834/adprocas"},"edited":false,"score":5,"creation_date":1525436736,"post_id":215505,"comment_id":87366744,"content_license":"CC BY-SA 4.0","body":"For example, if I have <code>MyClass</code> and I&#39;m doing <code>AnotherClass extends MyClass</code> I will have access to all protected and public methods and properties from within <code>AnotherClass</code>. If I do <code>MyClass myClass = new MyClass();</code> in <code>AnotherClass</code> somewhere - let&#39;s say the constructor - I will only have access to the public methods if it is in a different package. Note that if I do <code>= new MyClass() { @Override protected void protectedMethod() { &#47;&#47;some logic } };</code> it appears that I can access protected methods, but this kind of the same as extending it, but inline instead."},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":7,"creation_date":1531290371,"post_id":215505,"comment_id":89534615,"content_license":"CC BY-SA 4.0","body":"Unfortunately, this answer is a gross oversimplification.  Reality is a bit more complicated, especially when you consider <code>protected</code> (which is actually quite a difficult access modifier to fully understand - most people who think they know what <code>protected</code> means really don&#39;t).  Also, as Bohemian pointed out, it doesn&#39;t answer the question - it says <i>nothing</i> about when to use each access modifier.  In my opinion, this answer isn&#39;t <i>quite</i> bad enough to downvote, but close.  But over 4000 upvotes?  How did this happen?"},{"owner":{"reputation":2028,"user_id":4685486,"user_type":"registered","accept_rate":100,"profile_image":"https://graph.facebook.com/450173618467947/picture?type=large","display_name":"Anatolii Stepaniuk","link":"https://stackoverflow.com/users/4685486/anatolii-stepaniuk"},"edited":false,"score":1,"creation_date":1536217445,"post_id":215505,"comment_id":91345689,"content_license":"CC BY-SA 4.0","body":"Subclass (same package) field is misleading, It&#39;s better to remove that column. Because it doesn&#39;t matter is that a subclass or not."},{"owner":{"reputation":443,"user_id":2767662,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/aa50246b5f5923f90731f6df0ed744c4?s=128&d=identicon&r=PG&f=1","display_name":"Heinzlmaen","link":"https://stackoverflow.com/users/2767662/heinzlmaen"},"reply_to_user":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":1,"creation_date":1581001113,"post_id":215505,"comment_id":106290572,"content_license":"CC BY-SA 4.0","body":"@DawoodsaysreinstateMonica It&#39;s a great answer, it&#39;s exactly what most people that find this page are looking for. Also, that table is from the official Oracle tutorial. But how about you toss us a link so we can learn what &quot;protected&quot; really means?"},{"owner":{"reputation":387,"user_id":9898251,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e795cc299ab4b7e5d4fbe4a2853ce2e7?s=128&d=identicon&r=PG&f=1","display_name":"Badri Paudel","link":"https://stackoverflow.com/users/9898251/badri-paudel"},"edited":false,"score":2,"creation_date":1588933126,"post_id":215505,"comment_id":109096505,"content_license":"CC BY-SA 4.0","body":"protected is only accessible in same package. Its not accessible outside of that package .  protected specifier in java is called package level specifier."},{"owner":{"reputation":101,"user_id":1315510,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1284ebb54009c4d745fa5f1bc8727b4a?s=128&d=identicon&r=PG","display_name":"jayjay","link":"https://stackoverflow.com/users/1315510/jayjay"},"reply_to_user":{"reputation":5683,"user_id":4899193,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/90b65fc5fb7ab727d1f770206d6b5325?s=128&d=identicon&r=PG","display_name":"Usagi Miyamoto","link":"https://stackoverflow.com/users/4899193/usagi-miyamoto"},"edited":false,"score":1,"creation_date":1596062657,"post_id":215505,"comment_id":111693801,"content_license":"CC BY-SA 4.0","body":"@UsagiMiyamoto  : Can you please elaborate more on how can  &quot;private members can be seen/used by any class/static method in the same source-file&quot; ?"},{"owner":{"reputation":101,"user_id":1315510,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1284ebb54009c4d745fa5f1bc8727b4a?s=128&d=identicon&r=PG","display_name":"jayjay","link":"https://stackoverflow.com/users/1315510/jayjay"},"reply_to_user":{"reputation":993,"user_id":2105539,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/3fb69f5c0744cb4e01c78c60bae497f8?s=128&d=identicon&r=PG","display_name":"niks","link":"https://stackoverflow.com/users/2105539/niks"},"edited":false,"score":2,"creation_date":1596062777,"post_id":215505,"comment_id":111693839,"content_license":"CC BY-SA 4.0","body":"@niks : I am able to access protected members from subclass of different packages"},{"owner":{"reputation":3529,"user_id":8170714,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1","display_name":"Jack","link":"https://stackoverflow.com/users/8170714/jack"},"reply_to_user":{"reputation":993,"user_id":2105539,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/3fb69f5c0744cb4e01c78c60bae497f8?s=128&d=identicon&r=PG","display_name":"niks","link":"https://stackoverflow.com/users/2105539/niks"},"edited":false,"score":4,"creation_date":1602765028,"post_id":215505,"comment_id":113827244,"content_license":"CC BY-SA 4.0","body":"@niks protected members CAN be accessed by subclasses from a different package. Isn&#39;t that the point? Otherwise what&#39;s the difference between default and protected?"},{"owner":{"reputation":3006,"user_id":2241463,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/JBAia.png?s=128&g=1","display_name":"Piovezan","link":"https://stackoverflow.com/users/2241463/piovezan"},"reply_to_user":{"reputation":3529,"user_id":8170714,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/OqwAS.jpg?s=128&g=1","display_name":"Jack","link":"https://stackoverflow.com/users/8170714/jack"},"edited":false,"score":1,"creation_date":1612493839,"post_id":215505,"comment_id":116790715,"content_license":"CC BY-SA 4.0","body":"@Jack Yeah, niks&#39; comment is wrong despite the many upvotes stating otherwise. The Java Tutorials link in the answer clearly says that protected members can also be accessed within subclasses from a different package. It seems that he/she meant &quot;package-level&quot; instead of &quot;protected&quot;, or was referring to a different edit."},{"owner":{"reputation":4328,"user_id":1108305,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=128&d=identicon&r=PG","display_name":"M. Justin","link":"https://stackoverflow.com/users/1108305/m-justin"},"edited":false,"score":1,"creation_date":1613547486,"post_id":215505,"comment_id":117104652,"content_license":"CC BY-SA 4.0","body":"@DawoodsaysreinstateMonica I think the issue here is that the title &amp; body are asking two different questions: &quot;What is the difference between the access modifiers&quot; and &quot;When should the different access modifiers be used.&quot;  This answer is answering the question in the title, but not the question in the body."}],"owner":{"reputation":77634,"user_id":13673,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/167099d07f9f55d6ed7e66d911eab025?s=128&d=identicon&r=PG","display_name":"David Segonds","link":"https://stackoverflow.com/users/13673/david-segonds"},"comment_count":16,"is_accepted":true,"score":5859,"last_activity_date":1613544299,"last_edit_date":1613544299,"creation_date":1224359870,"answer_id":215505,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"noreferrer\">The official tutorial</a> may be of some use to you.</p>\n<hr />\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>Class</th>\n<th>Package</th>\n<th>Subclass<br/>(same pkg)</th>\n<th>Subclass<br/>(diff pkg)</th>\n<th>World</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>public</code></td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n</tr>\n<tr>\n<td><code>protected</code></td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n<td></td>\n</tr>\n<tr>\n<td><em>no modifier</em></td>\n<td>+</td>\n<td>+</td>\n<td>+</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td><code>private</code></td>\n<td>+</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>+ : accessible<br/>\nblank : not accessible</p>\n"},{"comments":[{"owner":{"reputation":8152,"user_id":2786733,"user_type":"registered","accept_rate":95,"profile_image":"https://graph.facebook.com/1183370386/picture?type=large","display_name":"Andrejs","link":"https://stackoverflow.com/users/2786733/andrejs"},"reply_to_user":{"reputation":6727,"user_id":5144855,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/9b1228e7ead73fe2bcb52718ad061daa?s=128&d=identicon&r=PG","display_name":"Ruchir Baronia","link":"https://stackoverflow.com/users/5144855/ruchir-baronia"},"edited":false,"score":4,"creation_date":1456513933,"post_id":215509,"comment_id":58999891,"content_license":"CC BY-SA 3.0","body":"@RuchirBaronia, &quot;world&quot;  = all code in the application, regardless where it is."}],"owner":{"reputation":15961,"user_id":24243,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/78443e56a77d9c3328197ee5c952c3d7?s=128&d=identicon&r=PG","display_name":"John Nilsson","link":"https://stackoverflow.com/users/24243/john-nilsson"},"comment_count":1,"is_accepted":false,"score":168,"last_activity_date":1532443518,"last_edit_date":1532443518,"creation_date":1224360033,"answer_id":215509,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>Easy rule. Start with declaring everything private. And then progress towards the public as the needs arise and design warrants it.</p>\n\n<p>When exposing members ask yourself if you are exposing representation choices or abstraction choices. The first is something you want to avoid as it will introduce too many dependencies on the actual representation rather than on its observable behavior.</p>\n\n<p>As a general rule I try to avoid overriding method implementations by subclassing; it's too easy to screw up the logic. Declare abstract protected methods if you intend for it to be overridden.</p>\n\n<p>Also, use the @Override annotation when overriding to keep things from breaking when you refactor.</p>\n"},{"owner":{"reputation":44040,"user_id":20471,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/35b5e9e9ccf3bfe5ff8d22b64a5234d3?s=128&d=identicon&r=PG","display_name":"Joe Phillips","link":"https://stackoverflow.com/users/20471/joe-phillips"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1224360034,"creation_date":1224360034,"answer_id":215510,"question_id":215497,"content_license":"CC BY-SA 2.5","body":"<p>The difference can be found in the links already provided but which one to use usually comes down to the \"Principle of Least Knowledge\". Only allow the least visibility that is needed.</p>\n"},{"comments":[{"owner":{"reputation":35690,"user_id":76722,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/4baed26d9b00bbc7c0c706515aeb596e?s=128&d=identicon&r=PG","display_name":"Sebastian Mach","link":"https://stackoverflow.com/users/76722/sebastian-mach"},"edited":false,"score":26,"creation_date":1307441619,"post_id":215579,"comment_id":7307429,"content_license":"CC BY-SA 3.0","body":"friends -&gt; &quot;The less you know about it the better&quot; ---&gt; It gives selective visibility, which is still superior to package privacy. In C++, it has its uses, because not all functions can be member functions, and friends is better than public&#39;ing. Of course there is a danger of misuse by evil minds."},{"owner":{"reputation":2686,"user_id":317135,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/3548e17f91b81a5e134589afcabdf51a?s=128&d=identicon&r=PG","display_name":"Rhys van der Waerden","link":"https://stackoverflow.com/users/317135/rhys-van-der-waerden"},"edited":false,"score":30,"creation_date":1317558863,"post_id":215579,"comment_id":9259478,"content_license":"CC BY-SA 3.0","body":"It should also be noted that &quot;protected&quot; in C++ has a different meaning - a protected method is effectively private, but can still be called from an inheriting class. (As opposed to Java where it can be called by any class within the same package.)"},{"owner":{"reputation":7570,"user_id":168719,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/QWRhg.jpg?s=128&g=1","display_name":"Konrad Morawski","link":"https://stackoverflow.com/users/168719/konrad-morawski"},"reply_to_user":{"reputation":2686,"user_id":317135,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/3548e17f91b81a5e134589afcabdf51a?s=128&d=identicon&r=PG","display_name":"Rhys van der Waerden","link":"https://stackoverflow.com/users/317135/rhys-van-der-waerden"},"edited":false,"score":9,"creation_date":1381858561,"post_id":215579,"comment_id":28733671,"content_license":"CC BY-SA 3.0","body":"@RhysvanderWaerden C# is the same as C++ in this aspect. I find it pretty odd that Java doesn&#39;t allow to declare a member that&#39;s accessible to the subclass but not the entire package. It&#39;s sort of upside down to me - a package is broader scope than a child class!"},{"owner":{"reputation":4043,"user_id":309334,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/ccb6132ce896551124c59844c306c632?s=128&d=identicon&r=PG","display_name":"Eponymous","link":"https://stackoverflow.com/users/309334/eponymous"},"reply_to_user":{"reputation":7570,"user_id":168719,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/QWRhg.jpg?s=128&g=1","display_name":"Konrad Morawski","link":"https://stackoverflow.com/users/168719/konrad-morawski"},"edited":false,"score":15,"creation_date":1400791059,"post_id":215579,"comment_id":36639884,"content_license":"CC BY-SA 3.0","body":"@KonradMorawski IMHO package is smaller scope than subclass. If you haven&#39;t declared your class final, users should be able to subclass it - so java protected is part of your published interface. OTOH, packages are implicitly developed by a single organization: e.g.  com.mycompany.mypackage. If your code declares itself in my package, you implicitly declare yourself part of my organization, so we should be communicating. Thus, package publishes to a smaller/easier to reach audience (people in my company) than subclass (people who extend my object) and so counts as lower visibility."},{"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"edited":false,"score":1,"creation_date":1401255383,"post_id":215579,"comment_id":36806174,"content_license":"CC BY-SA 3.0","body":"<code>friend</code> only is good for special cases, like overloading classes. otherwise it&#39;s a bad-practice for architectural design, since it will mess up layering-concept"},{"owner":{"reputation":3528,"user_id":509614,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/f541aec9a9f53fed5b470a31a1112418?s=128&d=identicon&r=PG","display_name":"Dennis","link":"https://stackoverflow.com/users/509614/dennis"},"edited":false,"score":2,"creation_date":1418033129,"post_id":215579,"comment_id":43163815,"content_license":"CC BY-SA 3.0","body":"<code>friend</code> is good for defining special relationships between classes. It allows superior encapsulation in many cases when used correctly. For example it can be used by a privileged factory class to inject internal dependencies into a constructed type. It has a bad name because people who don&#39;t care about correctly maintaining a well designed object model can abuse it to ease their workload."},{"owner":{"reputation":1236,"user_id":2100584,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/236ecbd2033b1620c2ae79a0877e1bba?s=128&d=identicon&r=PG","display_name":"Tomas","link":"https://stackoverflow.com/users/2100584/tomas"},"reply_to_user":{"reputation":7570,"user_id":168719,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/QWRhg.jpg?s=128&g=1","display_name":"Konrad Morawski","link":"https://stackoverflow.com/users/168719/konrad-morawski"},"edited":false,"score":0,"creation_date":1446115549,"post_id":215579,"comment_id":54614157,"content_license":"CC BY-SA 3.0","body":"@konrad-morawski Java did, in very ancient times (before 1.03), have an additional access modifier <code>private protected</code>, that did just that. There were several reasons it was removed, but the primary one in my opinion is that a package in Java <i>is</i> indeed a narrower scope than a child class (that is usually in some other package), so this access made no real sense. I actually used it a couple times back then, but never really found a good case to use it in. I blame my C++ roots :)"},{"owner":{"reputation":293,"user_id":2691118,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/b0f8795a50219fee9de80f9f33891e10?s=128&d=identicon&r=PG&f=1","display_name":"User","link":"https://stackoverflow.com/users/2691118/user"},"edited":false,"score":0,"creation_date":1475920113,"post_id":215579,"comment_id":67144374,"content_license":"CC BY-SA 3.0","body":"In Java private prevents overrides, protected doesn&#39;t (but also isn&#39;t totally public), so they all do have their uses."},{"owner":{"reputation":40481,"user_id":581205,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/2be517e3b51c48a1c514627a87a1dd53?s=128&d=identicon&r=PG&f=1","display_name":"maaartinus","link":"https://stackoverflow.com/users/581205/maaartinus"},"edited":false,"score":0,"creation_date":1497086647,"post_id":215579,"comment_id":75938907,"content_license":"CC BY-SA 3.0","body":"&quot;Once an interface is more than private it&#39;s outside of your control&quot; - that&#39;s only true for those ignoring package visibility as you do. All modifiers are important for information hiding and a package is usually authored by a small tightly cooperating team which treats all package visible methods as private to them. +++ Similarly, <code>friend</code> isn&#39;t meant to wreak havoc on visibility, but to allow to tighten the rules more while adding an exception (any exception mechanism is prone to abuse; that&#39;s why package visibility is better, but maybe once a month I could use <code>friend</code>, too)."}],"owner":{"reputation":124859,"user_id":14660,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG","display_name":"Schwern","link":"https://stackoverflow.com/users/14660/schwern"},"comment_count":9,"is_accepted":false,"score":512,"last_activity_date":1590946046,"last_edit_date":1590946046,"creation_date":1224364647,"answer_id":215579,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>(Caveat:  I am not a Java programmer, I am a Perl programmer.  Perl has no formal protections which is perhaps why I understand the problem so well :) )</p>\n\n<h2>Private</h2>\n\n<p>Like you'd think, only the <strong>class</strong> in which it is declared can see it.</p>\n\n<h2>Package Private</h2>\n\n<p>It can only be seen and used by the <strong>package</strong> in which it was declared.  This is the default in Java (which some see as a mistake).</p>\n\n<h2>Protected</h2>\n\n<p>Package Private + can be seen by subclasses or package members.</p>\n\n<h2>Public</h2>\n\n<p>Everyone can see it.</p>\n\n<h2><a href=\"http://martinfowler.com/ieeeSoftware/published.pdf\" rel=\"noreferrer\">Published</a></h2>\n\n<p>Visible outside the code I control.  (While not Java syntax, it is important for this discussion).</p>\n\n<p>C++ defines an additional level called \"friend\" and the less you know about that the better.</p>\n\n<p>When should you use what?  The whole idea is encapsulation to hide information.  As much as possible you want to hide the detail of how something is done from your users.  Why?  Because then you can change them later and not break anybody's code.  This lets you optimize, refactor, redesign, and fix bugs without worry that someone was using that code you just overhauled.</p>\n\n<p>So, the rule of thumb is to make things only as visible as they have to be.  Start with private and only add more visibility as needed.  Only make public that which is absolutely necessary for the user to know, every detail you make public cramps your ability to redesign the system.</p>\n\n<p>If you want users to be able to customize behaviors, rather than making internals public so they can override them, it's often a better idea to shove those guts into an object and make that interface public.  That way they can simply plug in a new object.  For example, if you were writing a CD player and wanted the \"go find info about this CD\" bit customizable, rather than make those methods public you'd put all that functionality into its own object and make just your object getter/setter public.  In this way being stingy about exposing your guts encourages good composition and separation of concerns</p>\n\n<p>Personally, I stick with just \"private\" and \"public\".  Many OO languages just have that.  \"Protected\" can be handy, but it's really a cheat.  Once an interface is more than private it's outside of your control and you have to go looking in other people's code to find uses.</p>\n\n<p>This is where the idea of \"published\" comes in.  Changing an interface (refactoring it) requires that you find all the code which is using it and change that, too.  If the interface is private, well no problem.  If it's protected you have to go find all your subclasses.  If it's public you have to go find all the code which uses your code.  Sometimes this is possible, for example, if you're working on corporate code that's for internal use only it doesn't matter if an interface is public.  You can grab all the code out of the corporate repository.  But if an interface is \"published\", if there is code using it outside your control, then you're hosed.  You must support that interface or risk breaking code.  Even protected interfaces can be considered published (which is why I don't bother with protected).</p>\n\n<p>Many languages find the hierarchical nature of public/protected/private to be too limiting and not in line with reality.  To that end, there is the concept of a <a href=\"http://en.wikipedia.org/wiki/Trait_class\" rel=\"noreferrer\">trait class</a>, but that's another show.</p>\n"},{"owner":{"reputation":2526,"user_id":26010,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/14ef739d471d306d7ff10fc0ccfd0120?s=128&d=identicon&r=PG","display_name":"Dov Wasserman","link":"https://stackoverflow.com/users/26010/dov-wasserman"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1510438975,"last_edit_date":1510438975,"creation_date":1224386287,"answer_id":215951,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>David's answer provides the meaning of each access modifier. As for when to use each, I'd suggest making public all classes and the methods of each class that are meant for external use (its API), and everything else private.</p>\n\n<p>Over time you'll develop a sense for when to make some classes package-private and when to declare certain methods protected for use in subclasses.</p>\n"},{"comments":[{"owner":{"reputation":18132,"user_id":1152500,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/52c9add307127619573e855576ed833c?s=128&d=identicon&r=PG","display_name":"Anand","link":"https://stackoverflow.com/users/1152500/anand"},"edited":false,"score":0,"creation_date":1351364136,"post_id":9719131,"comment_id":17809707,"content_license":"CC BY-SA 3.0","body":"Just to add this &quot;Once the child gets access to the parent classâs protected member, it becomes private (or rather I would say a special private member which can be inherited by the subclasses of the subclass) member of the subclass.&quot;"}],"owner":{"reputation":470,"user_id":1081454,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fe1c6e6929241d03061c837e3621225f?s=128&d=identicon&r=PG","display_name":"dameng","link":"https://stackoverflow.com/users/1081454/dameng"},"comment_count":1,"is_accepted":false,"score":12,"last_activity_date":1510439025,"last_edit_date":1510439025,"creation_date":1331812430,"answer_id":9719131,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p><a href=\"http://sanjusoftware.wordpress.com/2007/11/06/protected-and-default-java-keyword/\" rel=\"noreferrer\">This page writes well about the protected &amp; default access modifier</a></p>\n\n<p>....\nProtected: Protected access modifier is the a little tricky and you can say is a superset of the default access modifier. Protected members are same as the default members as far as the access in the same package is concerned. The difference is that, the protected members are also accessible to the subclasses of the class in which the member is declared which are outside the package in which the parent class is present.</p>\n\n<p>But these protected members are âaccessible outside the package only through inheritanceâ. i.e you can access a protected member of a class in its subclass present in some other package directly as if the member is present in the subclass itself. But that protected member will not be accessible in the subclass outside the package by using parent classâs reference. \n....</p>\n"},{"comments":[{"owner":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"edited":false,"score":1,"creation_date":1535229292,"post_id":12401576,"comment_id":90992444,"content_license":"CC BY-SA 4.0","body":"<i>&quot;modifiers other than public are forbidden&quot;</i> â as of Java 9, this is no longer the case: interfaces can also have private methods."}],"owner":{"reputation":26139,"user_id":319931,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/KPUcH.png?s=128&g=1","display_name":"Mechanical snail","link":"https://stackoverflow.com/users/319931/mechanical-snail"},"comment_count":1,"is_accepted":false,"score":117,"last_activity_date":1347521932,"last_edit_date":1495542899,"creation_date":1347521932,"answer_id":12401576,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>It's actually a bit more complicated than a simple grid shows. The grid tells you whether an access is allowed, but what exactly constitutes an access? Also, access levels interact with nested classes and inheritance in complex ways.</p>\n\n<p>The \"default\" access (specified by the absence of a keyword) is also called <a href=\"https://stackoverflow.com/questions/5416074/java-package-private-terminology\"><strong>package-private</strong></a>. Exception: in an interface, no modifier means public access; modifiers other than public are forbidden. Enum constants are always public.</p>\n\n<h2>Summary</h2>\n\n<p>Is an access to a member with this access specifier allowed?</p>\n\n<ul>\n<li>Member is <code>private</code>: Only if member is defined within the same class as calling code.</li>\n<li>Member is package private: Only if the calling code is within the member's immediately enclosing package.</li>\n<li>Member is <code>protected</code>: Same package, or if member is defined in a superclass of the class containing the calling code.</li>\n<li>Member is <code>public</code>: Yes.</li>\n</ul>\n\n<h2>What access specifiers apply to</h2>\n\n<p>Local variables and formal parameters cannot take access specifiers. Since they are inherently inaccessible to the outside according to scoping rules, they are effectively private.</p>\n\n<p>For classes in the top scope, only <code>public</code> and package-private are permitted. This design choice is presumably because <code>protected</code> and <code>private</code> would be redundant at the package level (there is no inheritance of packages).</p>\n\n<p>All the access specifiers are possible on class members (constructors, methods and static member functions, nested classes).</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/267781/java-class-accessibility\">Java Class Accessibility</a></p>\n\n<h2>Order</h2>\n\n<p>The access specifiers can be strictly ordered</p>\n\n<blockquote>\n  <p>public > protected > package-private > private</p>\n</blockquote>\n\n<p>meaning that <code>public</code> provides the most access, <code>private</code> the least. Any reference possible on a private member is also valid for a package-private member; any reference to a package-private member is valid on a protected member, and so on. (Giving access to protected members to other classes in the same package was considered a mistake.)</p>\n\n<h2>Notes</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/676930/private-member-access-java\">A class's methods <em>are</em> allowed to access private members of other objects of the same class.</a> More precisely, a method of class C can access private members of C on objects of any subclass of C. Java doesn't support restricting access by instance, only by class. (Compare with Scala, which does support it using <code>private[this]</code>.)</li>\n<li>You need access to a constructor to construct an object. Thus if all constructors are private, the class can only be constructed by code living within the class (typically static factory methods or static variable initializers). Similarly for package-private or protected constructors.\n\n<ul>\n<li>Only having private constructors also means that the class cannot be subclassed externally, since Java requires a subclass's constructors to implicitly or explicitly call a superclass constructor. (It can, however, contain a nested class that subclasses it.)</li>\n</ul></li>\n</ul>\n\n<h2>Inner classes</h2>\n\n<p>You also have to consider <em>nested</em> scopes, such as inner classes. An example of the complexity is that inner classes have members, which themselves can take access modifiers. So you can have a private inner class with a public member; can the member be accessed? (See below.) The general rule is to look at scope and think recursively to see whether you can access each level.</p>\n\n<p>However, this is quite complicated, and for full details, <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6\" rel=\"noreferrer\">consult the Java Language Specification</a>. (Yes, there have been compiler bugs in the past.)</p>\n\n<p>For a taste of how these interact, consider this example. It is possible to \"leak\" private inner classes; this is usually a warning:</p>\n\n<pre><code>class Test {\n    public static void main(final String ... args) {\n        System.out.println(Example.leakPrivateClass()); // OK\n        Example.leakPrivateClass().secretMethod(); // error\n    }\n}\n\nclass Example {\n    private static class NestedClass {\n        public void secretMethod() {\n            System.out.println(\"Hello\");\n        }\n    }\n    public static NestedClass leakPrivateClass() {\n        return new NestedClass();\n    }\n}\n</code></pre>\n\n<p>Compiler output:</p>\n\n<pre><code>Test.java:4: secretMethod() in Example.NestedClass is defined in an inaccessible class or interface\n        Example.leakPrivateClass().secretMethod(); // error\n                                  ^\n1 error\n</code></pre>\n\n<p>Some related questions:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1350171/java-method-accessibility-inside-package-private-class\">Java - Method accessibility inside package-private class?</a></li>\n</ul>\n"},{"owner":{"reputation":28267,"user_id":1162620,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/f8bd1c472fe5832e125fd4008578608a?s=128&d=identicon&r=PG","display_name":"Ravi","link":"https://stackoverflow.com/users/1162620/ravi"},"comment_count":0,"is_accepted":false,"score":55,"last_activity_date":1474700708,"last_edit_date":1474700708,"creation_date":1351360160,"answer_id":13102616,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>In very short</p>\n\n<ul>\n<li><code>public</code>: accessible from everywhere. </li>\n<li><code>protected</code>: accessible by the classes of the same package and the subclasses residing in any package.</li>\n<li>default (no modifier specified): accessible by the classes of the same package.</li>\n<li><code>private</code>: accessible within the same class only.</li>\n</ul>\n"},{"owner":{"reputation":10624,"user_id":619860,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/6vm1N.jpg?s=128&g=1","display_name":"Hoa Nguyen","link":"https://stackoverflow.com/users/619860/hoa-nguyen"},"comment_count":0,"is_accepted":false,"score":96,"last_activity_date":1561478124,"last_edit_date":1561478124,"creation_date":1355853689,"answer_id":13938807,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>As a rule of thumb: </p>\n\n<ul>\n<li><code>private</code>: class scope.</li>\n<li><code>default</code> (or <code>package-private</code>): package scope.</li>\n<li><code>protected</code>: <code>package scope + child</code> (like package, but we can subclass it from different packages). The protected modifier always keeps the \"parent-child\" relationship.</li>\n<li><code>public</code>: everywhere.</li>\n</ul>\n\n<p>As a result, if we divide access right into three rights: </p>\n\n<ul>\n<li><strong>(D)irect</strong> (invoke from a method inside the same class, or via \"this\" syntax).</li>\n<li><strong>(R)eference</strong> (invoke a method using a reference to the class, or via \"dot\" syntax).</li>\n<li><strong>(I)nheritance</strong> (via subclassing).</li>\n</ul>\n\n<p>then we have this simple table:</p>\n\n<pre><code>+â-âââââââââââââââ+ââââââââââââ+âââââââââââ+\n|                 |    Same    | Different |\n|                 |   Package  | Packages  |\n+âââââââââââââââââ+ââââââââââââ+âââââââââââ+\n| private         |   D        |           |\n+âââââââââââââââââ+ââââââââââââ+âââââââââââ+\n| package-private |            |           |\n| (no modifier)   |   D R I    |           |\n+âââââââââââââââââ+ââââââââââââ+âââââââââââ+\n| protected       |   D R I    |       I   |\n+âââââââââââââââââ+ââââââââââââ+âââââââââââ+\n| public          |   D R I    |    R  I   |\n+âââââââââââââââââ+ââââââââââââ+âââââââââââ+\n</code></pre>\n"},{"comments":[{"owner":{"reputation":810,"user_id":3774976,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/mww4d.jpg?s=128&g=1","display_name":"vanguard69","link":"https://stackoverflow.com/users/3774976/vanguard69"},"edited":false,"score":2,"creation_date":1471280004,"post_id":14247032,"comment_id":65273116,"content_license":"CC BY-SA 3.0","body":"It is worth putting in words - &quot;Protected modifier makes the object available across other packages, whereas default/no-modifier restricts access to the same package&quot;"},{"owner":{"reputation":22711,"user_id":923560,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/739dfa7b7b4580406c6e45fc8b3e3520?s=128&d=identicon&r=PG","display_name":"Abdull","link":"https://stackoverflow.com/users/923560/abdull"},"reply_to_user":{"reputation":810,"user_id":3774976,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/mww4d.jpg?s=128&g=1","display_name":"vanguard69","link":"https://stackoverflow.com/users/3774976/vanguard69"},"edited":false,"score":2,"creation_date":1471284840,"post_id":14247032,"comment_id":65275628,"content_license":"CC BY-SA 3.0","body":"@vanguard69, the <code>protected</code> modifier makes the marked <i>thing</i> (class, method, or field) available to some other class in some other package <b>only iff</b> said other class is a subclass of the class where that <code>protected</code>- marked <i>thing</i> is declared."},{"owner":{"reputation":322587,"user_id":85371,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG","display_name":"sehe","link":"https://stackoverflow.com/users/85371/sehe"},"edited":false,"score":0,"creation_date":1512908649,"post_id":14247032,"comment_id":82437812,"content_license":"CC BY-SA 3.0","body":"&quot;nonsubbed&quot;? &quot;this subclass in another package&quot;? Huh. I thought I knew Java."},{"owner":{"reputation":322587,"user_id":85371,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG","display_name":"sehe","link":"https://stackoverflow.com/users/85371/sehe"},"reply_to_user":{"reputation":18006,"user_id":165071,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/EWdkL.jpg?s=128&g=1","display_name":"Alexander Farber","link":"https://stackoverflow.com/users/165071/alexander-farber"},"edited":false,"score":0,"creation_date":1512908948,"post_id":14247032,"comment_id":82437917,"content_license":"CC BY-SA 3.0","body":"@AlexanderFarber did you optimize for a particular browser config? <a href=\"https://i.imgur.com/kRWveBQ.png\" rel=\"nofollow noreferrer\">This is my chrome now</a> and this is <a href=\"https://i.imgur.com/FcOsp3Q.png\" rel=\"nofollow noreferrer\">Firefox</a>"},{"owner":{"reputation":18006,"user_id":165071,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/EWdkL.jpg?s=128&g=1","display_name":"Alexander Farber","link":"https://stackoverflow.com/users/165071/alexander-farber"},"edited":false,"score":0,"creation_date":1512915986,"post_id":14247032,"comment_id":82439695,"content_license":"CC BY-SA 3.0","body":"Hmm let&#39;s revert my change then"},{"owner":{"reputation":2623,"user_id":1740154,"user_type":"registered","profile_image":"https://i.stack.imgur.com/keyyz.jpg?s=128&g=1","display_name":"twitchdotcom slash KANJICODER","link":"https://stackoverflow.com/users/1740154/twitchdotcom-slash-kanjicoder"},"edited":false,"score":0,"creation_date":1531717715,"post_id":14247032,"comment_id":89682180,"content_license":"CC BY-SA 4.0","body":"Points for ascii diagram I can paste into my notes text file."}],"owner":{"reputation":22711,"user_id":923560,"user_type":"registered","accept_rate":47,"profile_image":"https://www.gravatar.com/avatar/739dfa7b7b4580406c6e45fc8b3e3520?s=128&d=identicon&r=PG","display_name":"Abdull","link":"https://stackoverflow.com/users/923560/abdull"},"comment_count":6,"is_accepted":false,"score":210,"last_activity_date":1577186607,"last_edit_date":1577186607,"creation_date":1357767760,"answer_id":14247032,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<pre><code>____________________________________________________________________\n                | highest precedence &lt;---------&gt; lowest precedence\n*âââââââââââââââ+âââââââââââââââ+âââââââââââ+âââââââââââââââ+âââââââ\n \\ xCanBeSeenBy | this          | any class | this subclass | any\n  \\__________   | class         | in same   | in another    | class\n             \\  | nonsubbed     | package   | package       |    \nModifier of x \\ |               |           |               |       \nââââââââââââââââ*âââââââââââââââ+âââââââââââ+âââââââââââââââ+âââââââ\npublic          |       â       |     â     |       â       |   â  \nââââââââââââââââ+âââââââââââââââ+âââââââââââ+âââââââââââââââ+âââââââ\nprotected       |       â       |     â     |       â       |   â   \nââââââââââââââââ+âââââââââââââââ+âââââââââââ+âââââââââââââââ+âââââââ\npackage-private |               |           |               |\n(no modifier)   |       â       |     â     |       â       |   â   \nââââââââââââââââ+âââââââââââââââ+âââââââââââ+âââââââââââââââ+âââââââ\nprivate         |       â       |     â     |       â       |   â    \n____________________________________________________________________\n</code></pre>\n"},{"comments":[{"owner":{"reputation":105922,"user_id":597657,"user_type":"registered","accept_rate":99,"profile_image":"https://i.stack.imgur.com/0h5ec.jpg?s=128&g=1","display_name":"Eng.Fouad","link":"https://stackoverflow.com/users/597657/eng-fouad"},"edited":false,"score":0,"creation_date":1384546093,"post_id":20009675,"comment_id":29794331,"content_license":"CC BY-SA 3.0","body":"<code>Object#clone()</code> is an example of a <code>protected</code> member."},{"owner":{"reputation":2249,"user_id":4037019,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/nveNe.jpg?s=128&g=1","display_name":"cst1992","link":"https://stackoverflow.com/users/4037019/cst1992"},"edited":false,"score":0,"creation_date":1509182294,"post_id":20009675,"comment_id":80922879,"content_license":"CC BY-SA 3.0","body":"What is the difference between doing <code>super.foo()</code> and the first invalid situation <code>f.foo()</code>?"},{"owner":{"reputation":12146,"user_id":2985643,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/eaacaf1426f7e6d02914fcf99dc0a33b?s=128&d=identicon&r=PG&f=1","display_name":"skomisa","link":"https://stackoverflow.com/users/2985643/skomisa"},"reply_to_user":{"reputation":2249,"user_id":4037019,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/nveNe.jpg?s=128&g=1","display_name":"cst1992","link":"https://stackoverflow.com/users/4037019/cst1992"},"edited":false,"score":1,"creation_date":1517334917,"post_id":20009675,"comment_id":84050244,"content_license":"CC BY-SA 3.0","body":"@cst1992 It&#39;s confusing but see the Java Language Specification 6.6.2: &quot;A protected member or constructor of an object may be accessed from outside the package in which it is declared only by code that is responsible for the implementation of that object&quot;. With super.foo() the reference &quot;super&quot; is &quot;directly responsible for the implementation&quot; but the reference &quot;f&quot; is not. Why? Because you can be 100% certain that &quot;super&quot; is of type Father, but not for &quot;f&quot;; at run-time it could be some other sub-type of Father. See <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-6.html#jls-6.6.2.1\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se9/html/&hellip;</a>"},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":1,"creation_date":1531290057,"post_id":20009675,"comment_id":89534452,"content_license":"CC BY-SA 4.0","body":"It&#39;s refreshing to read an answer from someone who understands <code>protected</code>.  Unfortunately, all the other answers on this page that define <code>protected</code> get it a little bit wrong."}],"owner":{"reputation":105922,"user_id":597657,"user_type":"registered","accept_rate":99,"profile_image":"https://i.stack.imgur.com/0h5ec.jpg?s=128&g=1","display_name":"Eng.Fouad","link":"https://stackoverflow.com/users/597657/eng-fouad"},"comment_count":4,"is_accepted":false,"score":48,"last_activity_date":1505417716,"last_edit_date":1505417716,"creation_date":1384546016,"answer_id":20009675,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>The most misunderstood access modifier in Java is <code>protected</code>. We know that it's similar to the default modifier with one exception in which subclasses can see it. But how? Here is an example which hopefully clarifies the confusion:</p>\n\n<ul>\n<li><p>Assume that we have 2 classes; <code>Father</code> and <code>Son</code>, each in its own package:</p>\n\n<pre><code>package fatherpackage;\n\npublic class Father\n{\n\n}\n\n-------------------------------------------\n\npackage sonpackage;\n\npublic class Son extends Father\n{\n\n}\n</code></pre></li>\n<li><p>Let's add a protected method <code>foo()</code> to <code>Father</code>.</p>\n\n<pre><code>package fatherpackage;\n\npublic class Father\n{\n    protected void foo(){}\n}\n</code></pre></li>\n<li><p>The method <code>foo()</code> can be called in 4 contexts:</p>\n\n<ol>\n<li><p>Inside a class that is located in the same package where <code>foo()</code> is defined (<code>fatherpackage</code>):</p>\n\n<pre><code>package fatherpackage;\n\npublic class SomeClass\n{\n    public void someMethod(Father f, Son s)\n    {\n        f.foo();\n        s.foo();\n    }\n}\n</code></pre></li>\n<li><p>Inside a subclass, on the current instance via <code>this</code> or <code>super</code>:</p>\n\n<pre><code>package sonpackage;\n\npublic class Son extends Father\n{\n    public void sonMethod()\n    {\n        this.foo();\n        super.foo();\n    }\n}\n</code></pre></li>\n<li><p>On an reference whose type is the same class:</p>\n\n<pre><code>package fatherpackage;\n\npublic class Father\n{\n    public void fatherMethod(Father f)\n    {\n        f.foo(); // valid even if foo() is private\n    }\n}\n\n-------------------------------------------\n\npackage sonpackage;\n\npublic class Son extends Father\n{\n    public void sonMethod(Son s)\n    {\n        s.foo();\n    }\n}\n</code></pre></li>\n<li><p>On an reference whose type is the parent class and it is <em>inside</em> the package where <code>foo()</code> is defined (<code>fatherpackage</code>) [This can be included inside context no. 1]:</p>\n\n<pre><code>package fatherpackage;\n\npublic class Son extends Father\n{\n    public void sonMethod(Father f)\n    {\n        f.foo();\n    }\n}\n</code></pre></li>\n</ol></li>\n<li><p>The following situations are not valid.</p>\n\n<ol>\n<li><p>On an reference whose type is the parent class and it is <em>outside</em> the package where <code>foo()</code> is defined (<code>fatherpackage</code>):</p>\n\n<pre><code>package sonpackage;\n\npublic class Son extends Father\n{\n    public void sonMethod(Father f)\n    {\n        f.foo(); // compilation error\n    }\n}\n</code></pre></li>\n<li><p>A non-subclass inside a package of a subclass (A subclass inherits the protected members from its parent, and it makes them private to non-subclasses):</p>\n\n<pre><code>package sonpackage;\n\npublic class SomeClass\n{\n    public void someMethod(Son s) throws Exception\n    {\n        s.foo(); // compilation error\n    }\n}\n</code></pre></li>\n</ol></li>\n</ul>\n"},{"owner":{"reputation":11314,"user_id":2675669,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/f2327502011281008ec6ec6dec6b7873?s=128&d=identicon&r=PG&f=1","display_name":"Nambi","link":"https://stackoverflow.com/users/2675669/nambi"},"comment_count":0,"is_accepted":false,"score":30,"last_activity_date":1400560973,"last_edit_date":1495540056,"creation_date":1390396136,"answer_id":21283846,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<h2><strong>Private</strong></h2>\n\n<ul>\n<li>Methods,Variables and Constructors</li>\n</ul>\n\n<p><em>Methods, Variables and Constructors that are declared private can only be accessed within the declared class itself.</em></p>\n\n<ul>\n<li>Class and Interface</li>\n</ul>\n\n<p><em>Private access modifier is the most restrictive access level. Class and interfaces cannot be private.</em></p>\n\n<p><strong><em>Note</em></strong></p>\n\n<p><em>Variables that are declared private can be accessed outside the class if public getter methods are present in the class.\nVariables, methods and constructors which are declared protected in a superclass can be accessed only by the subclasses in other package or any class within the package of the protected members' class.</em>\n<B><hr/></B></p>\n\n<h2><strong>Protected</strong></h2>\n\n<ul>\n<li><em>Class and Interface</em></li>\n</ul>\n\n<p><em>The protected access modifier cannot be applied to class and interfaces.</em></p>\n\n<p><em>Methods, fields can be declared protected, however methods and fields in a interface cannot be declared protected.</em></p>\n\n<p><strong><em>Note</em></strong></p>\n\n<p><em>Protected access gives the subclass a chance to use the helper method or variable, while preventing a nonrelated class from trying to use it.</em></p>\n\n<p><B><hr/></B></p>\n\n<h2><strong>Public</strong></h2>\n\n<p><em>A class, method, constructor, interface etc declared public can be accessed from any other class.</em> </p>\n\n<p><em>Therefore fields, methods, blocks declared inside a public class can be accessed from any class belonging to the Java Universe.</em></p>\n\n<ul>\n<li><em>Different Packages</em></li>\n</ul>\n\n<p><em>However if the public class we are trying to access is in a different package, then the public class still need to be imported.</em></p>\n\n<p><em>Because of class inheritance, all public methods and variables of a class are inherited by its subclasses.</em></p>\n\n<p><B><hr/></B></p>\n\n<h2><strong>Default -No keyword:</strong></h2>\n\n<p><em>Default access modifier means we do not explicitly declare an access modifier for a class, field, method, etc.</em></p>\n\n<ul>\n<li><em>Within the same Packages</em></li>\n</ul>\n\n<p><em>A variable or method declared without any access control modifier is available to any other class in the same package. The fields in an interface are implicitly public static final and the methods in an interface are by default public.</em></p>\n\n<p><strong><em>Note</em></strong></p>\n\n<p>We cannot Override the Static fields.if you try to override it does not show any error \nbut it doesnot work what we except.</p>\n\n<h2>Related Answers</h2>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/16617408/overriding-static-methods-in-java\"><strong>Overriding static methods in java</strong></a></li>\n</ul>\n\n<h2>References links</h2>\n\n<p><a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html</a>\n<a href=\"http://www.tutorialspoint.com/java/java_access_modifiers.htm\" rel=\"noreferrer\">http://www.tutorialspoint.com/java/java_access_modifiers.htm</a> </p>\n"},{"owner":{"reputation":631,"user_id":1142548,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/ce15808d3c378b33f5be35fc063f9d96?s=128&d=identicon&r=PG","display_name":"samkit shah","link":"https://stackoverflow.com/users/1142548/samkit-shah"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1510439179,"last_edit_date":1510439179,"creation_date":1403075582,"answer_id":24279203,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p><strong>Private</strong>: Limited access to class only</p>\n\n<p><strong>Default (no modifier)</strong>: Limited access to class and package</p>\n\n<p><strong>Protected</strong>: Limited access to class, package and subclasses (both inside and outside package)</p>\n\n<p><strong>Public</strong>: Accessible to class, package (all), and subclasses... In short, everywhere.</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1474686829,"post_id":25028485,"comment_id":66645417,"content_license":"CC BY-SA 3.0","body":"<code>Default</code> is not an access modifier, and two of the others are misspelt."}],"owner":{"reputation":111,"user_id":2310069,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1153b54701b10e9c70c02ccc770ed011?s=128&d=identicon&r=PG","display_name":"richa_v","link":"https://stackoverflow.com/users/2310069/richa-v"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1406692300,"creation_date":1406692300,"answer_id":25028485,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>Public Protected Default and private are access modifiers.</p>\n\n<p>They are meant for encapsulation, or hiding and showing contents of the class.</p>\n\n<ol>\n<li>Class can be public or default</li>\n<li>Class members can be public, protected, default or private.</li>\n</ol>\n\n<p>Private is not accessible outside the class\nDefault is accessible only in the package.\nProtected in package as well as any class which extends it.\nPublic is open for all.</p>\n\n<p>Normally, member variables are defined private, but member methods are public.</p>\n"},{"owner":{"reputation":2488,"user_id":2987706,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/5Q9zt.jpg?s=128&g=1","display_name":"Prashant","link":"https://stackoverflow.com/users/2987706/prashant"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1510439300,"last_edit_date":1510439300,"creation_date":1418797744,"answer_id":27519579,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>Access modifiers are there to restrict access at several levels.</p>\n\n<p><strong>Public:</strong> It is basically as simple as you can access from any class whether that is in same package or not.</p>\n\n<p>To access if you are in same package you can access directly, but if you are in another package then you can create an object of the class.</p>\n\n<p><strong>Default:</strong> It is accessible in the same package from any of the class of package.</p>\n\n<p>To access you can create an object of the class. But you can not access this variable outside of the package.</p>\n\n<p><strong>Protected:</strong> you can access variables in same package as well as subclass in any other package.\nso basically it is <strong>default + Inherited</strong> behavior.</p>\n\n<p>To access protected field defined in base class you can create object of child class.</p>\n\n<p><strong>Private:</strong>  it can be access in same class.</p>\n\n<p>In non-static methods you can access directly because of <strong>this</strong> reference (also in constructors)but to access in static methods you need to create object of the class.</p>\n"},{"owner":{"reputation":952,"user_id":4395148,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B1SrS.jpg?s=128&g=1","display_name":"amila isura","link":"https://stackoverflow.com/users/4395148/amila-isura"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1510439541,"last_edit_date":1510439541,"creation_date":1432652066,"answer_id":30462069,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>Visible to the package. The default. No modifiers are needed.</p>\n\n<p>Visible to the class only (<strong>private</strong>).</p>\n\n<p>Visible to the world (<strong>public</strong>).</p>\n\n<p>Visible to the package and all subclasses (<strong>protected</strong>).</p>\n\n<p>Variables and methods can be declared without any modifiers that are called. Default examples:</p>\n\n<pre><code>String name = \"john\";\n\npublic int age(){\n    return age;\n}\n</code></pre>\n\n<p>Private access modifier - private:</p>\n\n<p>Methods, variables and constructors that are declared private can only be accessed within the declared class itself. The private access modifier is the most restrictive access level. Class and interfaces cannot be private.</p>\n\n<p>Variables that are declared private can be accessed outside the class if public getter methods are present in the class.</p>\n\n<p>Using the private modifier is the main way that an object encapsulates itself and hides data from the outside world.</p>\n\n<p>Examples:</p>\n\n<pre><code>Public class Details{\n\n    private String name;\n\n    public void setName(String n){\n        this.name = n;\n    }\n\n    public String getName(){\n        return this.name;\n    }\n}\n</code></pre>\n\n<p>Public access modifier - public:</p>\n\n<p>A class, method, constructor, interface, etc. declared public can be accessed from any other class. Therefore fields, methods, blocks declared inside a public class can be accessed from any class belonging to the Java universe.</p>\n\n<p>However, if the public class we are trying to access is in a different package, then the public class still need to be imported.</p>\n\n<p>Because of class inheritance, all public methods and variables of a class are inherited by its subclasses.</p>\n\n<p>Example:</p>\n\n<pre><code>public void cal(){\n\n}\n</code></pre>\n\n<p>Protected access modifier - protected:</p>\n\n<p>Variables, methods and constructors which are declared protected in a superclass can be accessed only by the subclasses in another package or any class within the package of the protected members' class.</p>\n\n<p>The protected access modifier cannot be applied to class and interfaces. Methods, fields can be declared protected, however methods and fields in a interface cannot be declared protected.</p>\n\n<p>Protected access gives the subclass a chance to use the helper method or variable, while preventing a nonrelated class from trying to use it.</p>\n\n<pre><code>class Van{\n\n    protected boolean speed(){\n\n    }\n}\n\nclass Car{\n    boolean speed(){\n    }\n\n}\n</code></pre>\n"},{"owner":{"reputation":417,"user_id":2550410,"user_type":"registered","profile_image":"https://i.stack.imgur.com/mT92n.jpg?s=128&g=1","display_name":"Shailendra Singh","link":"https://stackoverflow.com/users/2550410/shailendra-singh"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1458142297,"last_edit_date":1458142297,"creation_date":1440832533,"answer_id":32283609,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<ul>\n<li><p><strong>public</strong> - accessible from anywhere in the application.</p></li>\n<li><p><strong>default</strong> - accessible from package.</p></li>\n<li><p><strong>protected</strong> - accessible from package and sub-classes in other package.\nas well</p></li>\n<li><p><strong>private</strong> - accessible from its class only.</p></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":125668,"user_id":1531124,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/zw18i.png?s=128&g=1","display_name":"GhostCat","link":"https://stackoverflow.com/users/1531124/ghostcat"},"edited":false,"score":14,"creation_date":1539255055,"post_id":33627846,"comment_id":92439551,"content_license":"CC BY-SA 4.0","body":"Just saying: there are a lot of people who have problems with distinguishing red/green coloring. Tables using red/green (or yellow/orange/...) coloring schemes are rarely &quot;better&quot; at anything ;-)"},{"owner":{"reputation":379204,"user_id":276052,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/UcrhR.jpg?s=128&g=1","display_name":"aioobe","link":"https://stackoverflow.com/users/276052/aioobe"},"reply_to_user":{"reputation":125668,"user_id":1531124,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/zw18i.png?s=128&g=1","display_name":"GhostCat","link":"https://stackoverflow.com/users/1531124/ghostcat"},"edited":false,"score":5,"creation_date":1542204601,"post_id":33627846,"comment_id":93484893,"content_license":"CC BY-SA 4.0","body":"@GhostCat, I disagree. I think red/green aligns intuitively with &quot;works&quot;/&quot;does not work&quot; for many people, i.e. it <i>is</i> better than many alternatives."},{"owner":{"reputation":125668,"user_id":1531124,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/zw18i.png?s=128&g=1","display_name":"GhostCat","link":"https://stackoverflow.com/users/1531124/ghostcat"},"edited":false,"score":8,"creation_date":1542204781,"post_id":33627846,"comment_id":93485034,"content_license":"CC BY-SA 4.0","body":"<a href=\"http://www.colourblindawareness.org/colour-blindness/types-of-colour-blindness/\" rel=\"nofollow noreferrer\">colourblindawareness.org/colour-blindness/&hellip;</a> ... <i>The 8% of colour blind men can be divided approximately into 1% deuteranopes, 1% protanopes, 1% protanomalous and <b>5% deuteranomalous</b>.</i> And as I am one of those 50% of that 5%, rest assured: red/green sucks."},{"owner":{"reputation":379204,"user_id":276052,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/UcrhR.jpg?s=128&g=1","display_name":"aioobe","link":"https://stackoverflow.com/users/276052/aioobe"},"reply_to_user":{"reputation":125668,"user_id":1531124,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/zw18i.png?s=128&g=1","display_name":"GhostCat","link":"https://stackoverflow.com/users/1531124/ghostcat"},"edited":false,"score":7,"creation_date":1542205971,"post_id":33627846,"comment_id":93485796,"content_license":"CC BY-SA 4.0","body":"@GhostCat Ok.. that&#39;s a larger part of the population than I expected. I uploaded the image in this <a href=\"https://www.color-blindness.com/coblis-color-blindness-simulator/\" rel=\"nofollow noreferrer\">color blindness simulator</a> and tested all different modes. Even in monochromacy/achromatopsia mode the color difference is reasonable. Can you see the difference or is the simulator off? (I&#39;m still of the opinion that red/green is very intuitive for color seeing people.)"},{"owner":{"reputation":125668,"user_id":1531124,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/zw18i.png?s=128&g=1","display_name":"GhostCat","link":"https://stackoverflow.com/users/1531124/ghostcat"},"edited":false,"score":4,"creation_date":1542206426,"post_id":33627846,"comment_id":93486080,"content_license":"CC BY-SA 4.0","body":"I can see the difference, but I am also able to pass half of the color blindness tests that we have to do in Germany for the drivers licence ;-) ... but I think such a simulator is &quot;good enough&quot;."},{"owner":{"reputation":330,"user_id":8094897,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3ebed1a42fc693cacc097c7f567cebe6?s=128&d=identicon&r=PG&f=1","display_name":"RMati","link":"https://stackoverflow.com/users/8094897/rmati"},"edited":false,"score":1,"creation_date":1561354004,"post_id":33627846,"comment_id":100019844,"content_license":"CC BY-SA 4.0","body":"I got confused with the colors"},{"owner":{"reputation":538,"user_id":10030693,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-ZIG43NDeCwE/AAAAAAAAAAI/AAAAAAAAAVc/QImMCtmMqy8/photo.jpg?sz=128","display_name":"Gilboot","link":"https://stackoverflow.com/users/10030693/gilboot"},"edited":false,"score":0,"creation_date":1593286990,"post_id":33627846,"comment_id":110728831,"content_license":"CC BY-SA 4.0","body":"Its important to remember that these access modifiers apply to the class, not to the object. So <code>objectA</code> of type <code>Chicken</code> can access the private properties of <code>objectB</code> also of type <code>Chicken</code> but only if the code is written inside class <code>Chicken</code>."}],"owner":{"reputation":379204,"user_id":276052,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/UcrhR.jpg?s=128&g=1","display_name":"aioobe","link":"https://stackoverflow.com/users/276052/aioobe"},"comment_count":7,"is_accepted":false,"score":455,"last_activity_date":1587746852,"last_edit_date":1587746852,"creation_date":1447151220,"answer_id":33627846,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>Here's a better version of the table, that also includes a column for modules.\n<br /></p>\n\n<p><a href=\"https://i.stack.imgur.com/hzv3z.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hzv3z.png\" alt=\"Java Access Modifiers\"></a></p>\n\n<h2></h2>\n\n<h2>Explanations</h2>\n\n<ul>\n<li><p>A <strong>private</strong> member (<code>i</code>) is <em>only</em> accessible within the same class as it is declared.</p></li>\n<li><p>A member with <strong>no access modifier</strong> (<code>j</code>) is only accessible within classes in the same package.</p></li>\n<li><p>A <strong>protected</strong> member (<code>k</code>) is accessible within all classes in the same package <em>and</em> within subclasses in other packages.</p></li>\n<li><p>A <strong>public</strong> member (<code>l</code>) is accessible to all classes (unless it resides in a <a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/\" rel=\"noreferrer\">module</a> that does not export the package it is declared in).</p></li>\n</ul>\n\n<hr>\n\n<h2>Which modifier to choose?</h2>\n\n<p>Access modifiers is a tool to help you to prevent accidentally breaking encapsulation<sup>(*)</sup>. Ask yourself if you intend the member to be something that's internal to the class, package, class hierarchy or not internal at all, and choose access level accordingly.</p>\n\n<p><strong>Examples:</strong></p>\n\n<ul>\n<li>A field <code>long internalCounter</code> should probably be private since it's mutable and an implementation detail.</li>\n<li>A class that should only be instantiated in a factory class (in the same package) should have a package restricted constructor, since it shouldn't be possible to call it directly from outside the package.</li>\n<li>An internal <code>void beforeRender()</code> method called right before rendering and used as a hook in subclasses should be protected.</li>\n<li>A <code>void saveGame(File dst)</code> method which is called from the GUI code should be public.</li>\n</ul>\n\n<p><sup>(*) <a href=\"https://stackoverflow.com/questions/28612420/what-is-encapsulation-exactly\">What is Encapsulation exactly?</a></sup></p>\n"},{"owner":{"reputation":2315,"user_id":1599792,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/3b6ab26200351bbab5646c58c1daddc4?s=128&d=identicon&r=PG&f=1","display_name":"Affy","link":"https://stackoverflow.com/users/1599792/affy"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1510439897,"last_edit_date":1592644375,"creation_date":1470579416,"answer_id":38815021,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p><strong>Access modifiers in Java.</strong></p>\n<p>Java access modifiers are used to provide access control in Java.</p>\n<p><strong>1. Default:</strong></p>\n<p>Accessible to the classes in the same package only.</p>\n<p>For example,</p>\n<pre><code>// Saved in file A.java\npackage pack;\n\nclass A{\n  void msg(){System.out.println(&quot;Hello&quot;);}\n}\n\n// Saved in file B.java\npackage mypack;\nimport pack.*;\n\nclass B{\n  public static void main(String args[]){\n   A obj = new A(); // Compile Time Error\n   obj.msg(); // Compile Time Error\n  }\n}\n</code></pre>\n<p>This access is more restricted than public and protected, but less restricted than private.</p>\n<p><strong>2. Public</strong></p>\n<p>Can be accessed from anywhere. (Global Access)</p>\n<p>For example,</p>\n<pre><code>// Saved in file A.java\n\npackage pack;\npublic class A{\n  public void msg(){System.out.println(&quot;Hello&quot;);}\n}\n\n// Saved in file B.java\n\npackage mypack;\nimport pack.*;\n\nclass B{\n  public static void main(String args[]){\n    A obj = new A();\n    obj.msg();\n  }\n}\n</code></pre>\n<blockquote>\n<p>Output:Hello</p>\n</blockquote>\n<p><strong>3. Private</strong></p>\n<p>Accessible only inside the same class.</p>\n<p>If you try to access private members on one class in another will throw compile error. For example,</p>\n<pre><code>class A{\n  private int data = 40;\n  private void msg(){System.out.println(&quot;Hello java&quot;);}\n}\n\npublic class Simple{\n  public static void main(String args[]){\n    A obj = new A();\n    System.out.println(obj.data); // Compile Time Error\n    obj.msg(); // Compile Time Error\n  }\n}\n</code></pre>\n<p><strong>4. Protected</strong></p>\n<p>Accessible only to the classes in the same package and to the subclasses</p>\n<p>For example,</p>\n<pre><code>// Saved in file A.java\npackage pack;\npublic class A{\n  protected void msg(){System.out.println(&quot;Hello&quot;);}\n}\n\n// Saved in file B.java\npackage mypack;\nimport pack.*;\n\nclass B extends A{\n  public static void main(String args[]){\n    B obj = new B();\n    obj.msg();\n  }\n}\n</code></pre>\n<blockquote>\n<p>Output: Hello</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/E5c6l.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/E5c6l.png\" alt=\"Enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"reputation":322587,"user_id":85371,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG","display_name":"sehe","link":"https://stackoverflow.com/users/85371/sehe"},"edited":false,"score":1,"creation_date":1479397171,"post_id":40647093,"comment_id":68549338,"content_license":"CC BY-SA 3.0","body":"what exactly is the supplement, and why is it not an edit to the existing post?"},{"owner":{"reputation":21754,"user_id":4758255,"user_type":"registered","profile_image":"https://i.stack.imgur.com/SBvf3.jpg?s=128&g=1","display_name":"××©× ×××× ×××ª×","link":"https://stackoverflow.com/users/4758255/%d7%99%d7%a9%d7%95-%d7%90%d7%95%d7%94%d7%91-%d7%90%d7%95%d7%aa%d7%9a"},"reply_to_user":{"reputation":322587,"user_id":85371,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG","display_name":"sehe","link":"https://stackoverflow.com/users/85371/sehe"},"edited":false,"score":0,"creation_date":1479435925,"post_id":40647093,"comment_id":68567624,"content_license":"CC BY-SA 3.0","body":"the supplement is Access Modifiers. Why not an edit? To keep the accepted answer unaltered for historical sake and to give my answer."}],"owner":{"reputation":21754,"user_id":4758255,"user_type":"registered","profile_image":"https://i.stack.imgur.com/SBvf3.jpg?s=128&g=1","display_name":"××©× ×××× ×××ª×","link":"https://stackoverflow.com/users/4758255/%d7%99%d7%a9%d7%95-%d7%90%d7%95%d7%94%d7%91-%d7%90%d7%95%d7%aa%d7%9a"},"comment_count":2,"is_accepted":false,"score":6,"last_activity_date":1479359101,"creation_date":1479359101,"answer_id":40647093,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>Note: <em>This is just a <strong>supplement</strong> for the accepted answer.</em></p>\n\n<p>This is related to Java <a href=\"https://en.wikipedia.org/wiki/Access_modifiers\" rel=\"noreferrer\">Access Modifiers</a>.</p>\n\n<p>From <a href=\"http://tutorials.jenkov.com/java/access-modifiers.html\" rel=\"noreferrer\">Java Access Modifiers</a>:  </p>\n\n<blockquote>\n  <p>A Java access modifier specifies which classes can access a given\n  class and its fields, constructors and methods. Access modifiers can\n  be specified separately for a class, its constructors, fields and\n  methods. Java access modifiers are also sometimes referred to in daily\n  speech as Java access specifiers, but the correct name is Java access\n  modifiers. Classes, fields, constructors and methods can have one of\n  four different Java access modifiers:</p>\n  \n  <ul>\n  <li>List item</li>\n  <li>private</li>\n  <li>default (package)</li>\n  <li>protected</li>\n  <li>public</li>\n  </ul>\n</blockquote>\n\n<p>From <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"noreferrer\">Controlling Access to Members of a Class</a> tutorials:</p>\n\n<blockquote>\n  <p>Access level modifiers determine whether other classes can use a\n  particular field or invoke a particular method. There are two levels\n  of access control:</p>\n  \n  <ul>\n  <li>At the top levelâpublic, or package-private (no explicit modifier).</li>\n  <li>At the member levelâpublic, private, protected, or package-private (no explicit modifier).  </li>\n  </ul>\n  \n  <p>A class may be declared with the modifier public, in which case that\n  class is visible to all classes everywhere. If a class has no modifier\n  (the default, also known as package-private), it is visible only\n  within its own package</p>\n  \n  <p>The following table shows the access to members permitted by each\n  modifier.</p>\n\n<pre><code>âââââââââââââââ¦ââââââââ¦ââââââââââ¦âââââââââââ¦ââââââââ\nâ Modifier    â Class â Package â Subclass â World â\nâ ââââââââââââââ¬ââââââââ¬ââââââââââ¬âââââââââââ¬ââââââââ£\nâ public      â Y     â Y       â Y        â Y     â\nâ protected   â Y     â Y       â Y        â N     â\nâ no modifier â Y     â Y       â N        â N     â\nâ private     â Y     â N       â N        â N     â\nâââââââââââââââ©ââââââââ©ââââââââââ©âââââââââââ©ââââââââ\n</code></pre>\n  \n  <p>The first data column indicates whether the class itself has access to\n  the member defined by the access level. As you can see, a class always\n  has access to its own members. The second column indicates whether\n  classes in the same package as the class (regardless of their\n  parentage) have access to the member. The third column indicates\n  whether subclasses of the class declared outside this package have\n  access to the member. The fourth column indicates whether all classes\n  have access to the member.</p>\n  \n  <p>Access levels affect you in two ways. First, when you use classes that\n  come from another source, such as the classes in the Java platform,\n  access levels determine which members of those classes your own\n  classes can use. Second, when you write a class, you need to decide\n  what access level every member variable and every method in your class\n  should have.</p>\n</blockquote>\n"},{"owner":{"reputation":71,"user_id":7696246,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cec0a890fd3849e73474091473059d87?s=128&d=identicon&r=PG&f=1","display_name":"Greedy Coder","link":"https://stackoverflow.com/users/7696246/greedy-coder"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1491451762,"creation_date":1491451762,"answer_id":43245555,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>Often times I've realized that remembering the basic concepts of any language can made possible by creating real-world analogies. Here is my analogy for understanding access modifiers in Java:</p>\n\n<p>Let's assume that you're a student at a university and you have a friend who's coming to visit you over the weekend. Suppose there exists a big statue of the university's founder in the middle of the campus.</p>\n\n<ul>\n<li><p>When you bring him to the campus, the first thing that you and your friend sees is this statue. This means that anyone who walks in the campus can look at the statue without the university's permission. This makes the statue as <strong>PUBLIC</strong>.</p></li>\n<li><p>Next, you want to take your friend to your dorm, but for that you need to register him as a visitor. This means that he gets an access pass (which is the same as yours) to get into various buildings on campus. This would make his access card as <strong>PROTECTED</strong>.</p></li>\n<li><p>Your friend wants to login to the campus WiFi but doesn't have the any credentials to do so. The only way he can get online is if you share your login with him. (Remember, every student who goes to the university also possesses these login credentials). This would make your login credentials as <strong>NO MODIFIER</strong>.</p></li>\n<li><p>Finally, your friend wants to read your progress report for the semester which is posted on the website. However, every student has their own personal login to access this section of the campus website. This would make these credentials as <strong>PRIVATE</strong>.</p></li>\n</ul>\n\n<p>Hope this helps!</p>\n"},{"owner":{"reputation":15029,"user_id":1475228,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/TgQ5O.png?s=128&g=1","display_name":"Pritam Banerjee","link":"https://stackoverflow.com/users/1475228/pritam-banerjee"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1498531098,"last_edit_date":1498531098,"creation_date":1498530796,"answer_id":44771468,"question_id":215497,"content_license":"CC BY-SA 3.0","body":"<p>When you are thinking of access modifiers just think of it in this way (applies to both <strong>variables</strong> and <strong>methods</strong>):</p>\n\n<p><code>public</code> --> accessible from every where<br>\n<code>private</code> --> accessible only within the same class where it is declared</p>\n\n<p>Now the confusion arises when it comes to <code>default</code> and <code>protected</code></p>\n\n<p><code>default</code> --> No access modifier keyword is present. This means it is available strictly within the package of the class. <strong>Nowhere</strong> outside that package it can be accessed.</p>\n\n<p><code>protected</code> --> Slightly less stricter than <code>default</code> and apart from the same package classes it can be accessed by sub classes outside the <em>package</em> it is declared. </p>\n"},{"owner":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1533036443,"last_edit_date":1533036443,"creation_date":1518602128,"answer_id":48784176,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>It is all about <strong>encapsulation</strong> (or as Joe Phillips stated, <em>least knowledge</em>).</p>\n\n<p>Start with the most restrictive (private) and see if you need less restrictive modifiers later on.</p>\n\n<p>We all use method and member modifiers like private, public, ... but one thing too few developers do is use packages to <strong>organize</strong> code logically.</p>\n\n<p>For example:\nYou may put sensitive security methods in a 'security' package.\nThen put a public class which accesses some of the security related code in this package but keep other security classes <strong>package private</strong>.\nThus other developers will only be able to use the publicly available class from outside of this package (unless they change the modifier).\nThis is not a security feature, but will <strong>guide</strong> usage.</p>\n\n<pre><code>Outside world -&gt; Package (SecurityEntryClass ---&gt; Package private classes)\n</code></pre>\n\n<p>Another thing is that classes which depend a lot on each other may end up in the same package and could eventually be refactored or merged if the dependency is too strong.</p>\n\n<p>If on the contrary you set everything as <strong>public</strong> it will not be clear what should or should not be accessed, which may lead to writing a lot of javadoc (which does not enforce anything via the compiler...).</p>\n"},{"owner":{"reputation":93,"user_id":9858025,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b0032c4ccf8f16f8aa33e366f1c833a2?s=128&d=identicon&r=PG","display_name":"Vipul Verma","link":"https://stackoverflow.com/users/9858025/vipul-verma"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1568932452,"creation_date":1568932452,"answer_id":58019647,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<ul>\n<li><p>public</p>\n\n<p>If a class member is declared with public then it can be accessed from anywhere</p></li>\n<li><p>protected</p>\n\n<p>If a class member is declared with keyword protected then it can be accessed from same class members, outside class members within the same package and inherited class members. If a class member is protected then it can NOT be accessed from outside package class unless the outside packaged class is inherited i.e. extends the other package superclass. But a protected class member is always available to same package classes it does NOT matter weather the same package class is inherited or NOT</p></li>\n<li><p>default</p>\n\n<p>In Java default is NOT an access modifier keyword. If a class member is declared without any access modifier keyword then in this case it is considered as default member. The default class member is always available to same package class members. But outside package class member can NOT access default class members even if outside classes are subclasses unlike protected members</p></li>\n<li><p>private</p>\n\n<p>If a class member is declared with keyword protected then in this case it is available ONLY to same class members</p></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":4255,"user_id":6271180,"user_type":"registered","profile_image":"https://i.stack.imgur.com/TEiRn.png?s=128&g=1","display_name":"Benoit","link":"https://stackoverflow.com/users/6271180/benoit"},"edited":false,"score":1,"creation_date":1568969873,"post_id":58023733,"comment_id":102452541,"content_license":"CC BY-SA 4.0","body":"The question was about Java, not C++."},{"owner":{"reputation":654,"user_id":6461839,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d5df1ab8186ea7627323566e0763aac?s=128&d=identicon&r=PG&f=1","display_name":"leonidaa","link":"https://stackoverflow.com/users/6461839/leonidaa"},"reply_to_user":{"reputation":4255,"user_id":6271180,"user_type":"registered","profile_image":"https://i.stack.imgur.com/TEiRn.png?s=128&g=1","display_name":"Benoit","link":"https://stackoverflow.com/users/6271180/benoit"},"edited":false,"score":1,"creation_date":1569148298,"post_id":58023733,"comment_id":102495317,"content_license":"CC BY-SA 4.0","body":"@Benoit But what I have posted , the pictures in special , are not the same for both :java and c++  ?this rules are not applying for java too ? thanks"},{"owner":{"reputation":4255,"user_id":6271180,"user_type":"registered","profile_image":"https://i.stack.imgur.com/TEiRn.png?s=128&g=1","display_name":"Benoit","link":"https://stackoverflow.com/users/6271180/benoit"},"edited":false,"score":2,"creation_date":1569230124,"post_id":58023733,"comment_id":102515337,"content_license":"CC BY-SA 4.0","body":"In C++ there are only 3 modifiers, while there are 4 in java."},{"owner":{"reputation":1222,"user_id":7551092,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1a0e2bab392d96de1d0c26a683e8ff78?s=128&d=identicon&r=PG&f=1","display_name":"mss","link":"https://stackoverflow.com/users/7551092/mss"},"edited":false,"score":1,"creation_date":1578045286,"post_id":58023733,"comment_id":105319413,"content_license":"CC BY-SA 4.0","body":"the analogy is good, but default access specifier is missing,"},{"owner":{"reputation":1221,"user_id":4026629,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ca5c39c55fcfd19ca376038abf68a908?s=128&d=identicon&r=PG&f=1","display_name":"JL_SO","link":"https://stackoverflow.com/users/4026629/jl-so"},"edited":false,"score":1,"creation_date":1586466021,"post_id":58023733,"comment_id":108146379,"content_license":"CC BY-SA 4.0","body":"OP asked the question &quot;What is the difference between public, protected, package-private and private in Java?&quot;"}],"owner":{"reputation":654,"user_id":6461839,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d5df1ab8186ea7627323566e0763aac?s=128&d=identicon&r=PG&f=1","display_name":"leonidaa","link":"https://stackoverflow.com/users/6461839/leonidaa"},"comment_count":5,"is_accepted":false,"score":2,"last_activity_date":1568964530,"creation_date":1568964530,"answer_id":58023733,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://i.stack.imgur.com/RtZLf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RtZLf.png\" alt=\"private-protected-public-perfect-analogy-for-the-variable-data-types\"></a></p>\n\n<p>Following block diagram explain how data members of <strong>base class</strong> are <strong>inherited</strong> when <strong>derived class</strong> access mode is <strong>private</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HZ5MN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HZ5MN.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Note: Declaring data members with private access specifier is known as <strong>data hiding.</strong></p>\n\n<p>Source : <a href=\"http://www.trytoprogram.com/cplusplus-programming/access-specifiers/\" rel=\"nofollow noreferrer\"> Access Specifiers â Private, Public and Protected\n</a></p>\n"},{"owner":{"reputation":1458,"user_id":528459,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/940e457011ed350f1ced2736a6cde982?s=128&d=identicon&r=PG","display_name":"Mudassar","link":"https://stackoverflow.com/users/528459/mudassar"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1571761530,"last_edit_date":1571761530,"creation_date":1571195400,"answer_id":58405200,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>My two cents :)</p>\n\n<p><strong>private:</strong></p>\n\n<p><em>class -></em> a top level class cannot be private. inner classes can be private which are accessible from same class.</p>\n\n<p><em>instance variable -></em> accessible only in the class. Cannot access outside the class.</p>\n\n<p><strong>package-private:</strong></p>\n\n<p><em>class -></em> a top level class can be package-private. It can only be accessible from same package. Not from sub package, not from outside package.</p>\n\n<p><em>instance variable -></em> accessible from same package. Not from sub package, not from outside package.</p>\n\n<p><strong>protected:</strong></p>\n\n<p><em>class -></em> a top level class cannot be protected.</p>\n\n<p><em>instance variable -></em> Only accessible in same package or subpackage. Can only be access outside the package while extending class.</p>\n\n<p><strong>public:</strong></p>\n\n<p><em>class -></em> accessible from package/subpackage/another package</p>\n\n<p><em>instance variable -></em> accessible from package/subpackage/another package</p>\n\n<p>Here is detailed answer</p>\n\n<p><a href=\"https://github.com/junto06/java-4-beginners/blob/master/basics/access-modifier.md\" rel=\"nofollow noreferrer\">https://github.com/junto06/java-4-beginners/blob/master/basics/access-modifier.md</a></p>\n"},{"owner":{"reputation":11921,"user_id":4770877,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cccebea2d190bf8f2054c1949ffa8677?s=128&d=identicon&r=PG&f=1","display_name":"yoAlex5","link":"https://stackoverflow.com/users/4770877/yoalex5"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1608660438,"last_edit_date":1608660438,"creation_date":1575664955,"answer_id":59220073,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>Java access modifies which you can use</p>\n<p><a href=\"https://i.stack.imgur.com/JqGNs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JqGNs.png\" alt=\"enter image description here\" /></a></p>\n<p>Access modifier can be applicable for <code>class</code>, <code>field</code><a href=\"https://stackoverflow.com/a/60907642/4770877\"><sup>[About]</sup></a>, <code>method</code>. Try to access, subclass or override this.</p>\n<ul>\n<li>Access to <code>field</code> or <code>method</code> is through a <code>class</code>.</li>\n<li>Inheritance and <strong>Open Closed Principle</strong>.\n<ul>\n<li>Successor <code>class</code>(subclass) access modifier can be <strong>any</strong>.</li>\n<li>Successor <code>method</code>(override) access modifier should be the <strong>same or expand it</strong></li>\n</ul>\n</li>\n</ul>\n<p>Top level class(first level scope) can be <code>public</code> and <code>default</code>. <code>Nested class</code><a href=\"https://stackoverflow.com/a/59220181/4770877\"><sup>[About]</sup></a> can have any of them</p>\n<p><code>package</code> is not applying for package hierarchy</p>\n<p><a href=\"https://stackoverflow.com/a/60905233/4770877\">[Swift access modifiers]</a></p>\n"},{"owner":{"reputation":115,"user_id":3417107,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/501090aba145d417193fd9d786f8eb2d?s=128&d=identicon&r=PG&f=1","display_name":"Tushar Baviskar","link":"https://stackoverflow.com/users/3417107/tushar-baviskar"},"comment_count":0,"is_accepted":false,"score":-1,"last_activity_date":1583148201,"last_edit_date":1583148201,"creation_date":1577111162,"answer_id":59456940,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p>Access Specifiers in Java:\nThere are 4 access specifiers in java, namely private, package-private (default), protected and public in increasing access order.</p>\n\n<p><strong>Private</strong>:\nWhen you are developing some class and you want member of this class not to be exposed outside this class then you should declare it as private. private members can be accessed only in class where they are defined i.e. enclosing class. <strong>private members can be accessed on 'this' reference and also on other instances of class enclosing these members, but only within the definition of this class.</strong></p>\n\n<p><strong>Package-private (default)</strong>:\nThis access specifier will provide access specified by private access specifier in addition to access described below.</p>\n\n<p>When you are developing some package and hence some class (say Class1) within it, you may use default (need not be mentioned explicitly) access specifier, to expose member within class, to other classes within your (same) package. In these other classes (within same package), you can access these default members on instance of Class1. Also you can access these default members within subclasses of Class1, say Class2 (on this reference or on instance of Class1 or on instance of Class2). </p>\n\n<p><strong>Basically, within same package you can access default members on instance of class directly or on 'this' reference in subclasses.</strong></p>\n\n<p><strong>protected</strong>:\nThis access specifier will provide access specified by package-private access specifier in addition to access described below.</p>\n\n<p>When you are developing some package and hence some class (say Class1) within it, then you should use protected access specifier for data member within Class1 if you don't want this member to be accessed outside your package (say in package of consumer of your package i.e. client who is using your APIs) in general, but you want to make an exception and allow access to this member only if client writes class say Class2 that extends Class1. So, in general, protected members will be accessible on 'this' reference in derived classes i.e. Class2 and also on explicit instances of Class2.</p>\n\n<p>Please note:</p>\n\n<ol>\n<li>You won't be able to access inherited protected member of Class1 in\nClass2, if you attempt to access it on explicit instance of Class1,\nalthough it is inherited in it.</li>\n<li>When you write another class Class3 within same/different package\nthat extends Class2, protected member from Class1 will be accessible\non this reference and also on explicit instance of Class3. This will\nbe true for any hierarchy that is extended i.e. protected member\nwill still be accessible on this reference or instance of extended\nclass. Note that in Class3, if you create instance of Class2 then\nyou will not be able to access protected member from Class1 though\nit is inherited.</li>\n</ol>\n\n<p>So bottom line is, <strong>protected members can be accessed in other packages, only if some class from this other package, extends class enclosing this protected member and protected member is accessed on 'this' reference or explicit instances of extended class, within definition of extended class.</strong></p>\n\n<p><strong>public</strong>: This access specifier will provide access specified by protected access specifier in addition to access described below.</p>\n\n<p>When you are developing some package and hence some class (say Class1) within it, then you should use public access specifier for data member within Class1 if you want this member to be accessible in other packages on instance of Class1 created in some class of other package. <strong>Basically this access specifier should be used when you intent to expose your data member to world without any condition.</strong></p>\n"},{"comments":[{"owner":{"reputation":12853,"user_id":1824361,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/Qo7Ur.jpg?s=128&g=1","display_name":"ahmednabil88","link":"https://stackoverflow.com/users/1824361/ahmednabil88"},"edited":false,"score":0,"creation_date":1608325011,"post_id":63858024,"comment_id":115558727,"content_license":"CC BY-SA 4.0","body":"For more clarity, <code>no modifier</code> == <code>package private</code> | <code>package protected</code>"}],"owner":{"reputation":145,"user_id":13353813,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gh6l25zm7Rwn0GxmP_MDM1CLKaQHKvYPf8xapQbtcQ=k-s128","display_name":"Mushfiqur Rahman Abir","link":"https://stackoverflow.com/users/13353813/mushfiqur-rahman-abir"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1599895990,"creation_date":1599895990,"answer_id":63858024,"question_id":215497,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://i.stack.imgur.com/nAtpl.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nAtpl.png\" alt=\"Differences between public, private, default and protected access modifiers\" /></a></p>\n<p>This image will make you understand easily about the basic differences between public, private, protected and default access modifiers. The default modifier takes place automatically when you don't declare ant access modifiers in your code.</p>\n"}],"owner":{"reputation":34599,"user_id":625,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/8f2a8ae3a27197376573647811f96901?s=128&d=identicon&r=PG","display_name":"intrepion","link":"https://stackoverflow.com/users/625/intrepion"},"comment_count":17,"is_answered":true,"view_count":2237196,"protected_date":1364437131,"accepted_answer_id":215505,"answer_count":29,"score":3312,"last_activity_date":1613544299,"creation_date":1224359592,"last_edit_date":1536677689,"question_id":215497,"link":"https://stackoverflow.com/questions/215497/what-is-the-difference-between-public-protected-package-private-and-private-in","title":"What is the difference between public, protected, package-private and private in Java?","body":"<p>In Java, are there clear rules on when to use each of access modifiers, namely the default (package private), <code>public</code>, <code>protected</code> and <code>private</code>, while making <code>class</code> and <code>interface</code> and dealing with inheritance?</p>\n"},{"tags":["java","arraylist","collections","linked-list"],"comments":[{"owner":{"reputation":5212,"user_id":99717,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/lVoCX.jpg?s=128&g=1","display_name":"Hawkeye Parker","link":"https://stackoverflow.com/users/99717/hawkeye-parker"},"edited":false,"score":6,"creation_date":1476244709,"post_id":322715,"comment_id":67258981,"content_license":"CC BY-SA 3.0","body":"See also: <a href=\"http://stackoverflow.com/questions/166884/array-versus-linked-list?rq=1\">Array versus linked-list</a>"},{"owner":{"reputation":2055,"user_id":2032701,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0abc2879537f0c8fbbd8d97dc72f5ae0?s=128&d=identicon&r=PG","display_name":"Ruslan","link":"https://stackoverflow.com/users/2032701/ruslan"},"edited":false,"score":3,"creation_date":1514315879,"post_id":322715,"comment_id":82934143,"content_license":"CC BY-SA 3.0","body":"Just see the quote from the author of LinkedList <a href=\"https://stackoverflow.com/a/42529652/2032701\">stackoverflow.com/a/42529652/2032701</a> and you&#39;ll get a practical sense of the issue."}],"answers":[{"comments":[{"owner":{"reputation":2517,"user_id":5908433,"user_type":"registered","accept_rate":100,"profile_image":"https://lh3.googleusercontent.com/-Z7z3juhMtXY/AAAAAAAAAAI/AAAAAAAAABw/Ua09V1L6sYc/photo.jpg?sz=128","display_name":"Dmitriy Fialkovskiy","link":"https://stackoverflow.com/users/5908433/dmitriy-fialkovskiy"},"edited":false,"score":1,"creation_date":1607594564,"post_id":322722,"comment_id":115323958,"content_license":"CC BY-SA 4.0","body":"worth to mention here, that <code>LinkedList</code> is fast for adding/removing only at first and last positions - then complexity will be O(1), but adding in the middle still will be O(n), because we need to run through approx n/2 elements of <code>LinkedList</code>."}],"owner":{"reputation":2596,"user_id":34450,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9363c84442cc60a0a84fdbe3db87425f?s=128&d=identicon&r=PG","display_name":"dgtized","link":"https://stackoverflow.com/users/34450/dgtized"},"comment_count":1,"is_accepted":false,"score":74,"last_activity_date":1588991929,"last_edit_date":1588991929,"creation_date":1227749999,"answer_id":322722,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>It's an efficiency question. <code>LinkedList</code> is fast for adding and deleting elements, but slow to access a specific element. <code>ArrayList</code> is fast for accessing a specific element but can be slow to add to either end, and especially slow to delete in the middle.</p>\n\n<p><a href=\"https://web.archive.org/web/20090204031044/http://www.javafaq.nu/java-article1111.html\" rel=\"noreferrer\">Array vs ArrayList vs LinkedList vs Vector</a> goes more in depth, as does \n<a href=\"http://en.wikipedia.org/wiki/Linked_list\" rel=\"noreferrer\">Linked List</a>.</p>\n"},{"comments":[{"owner":{"reputation":1139,"user_id":247447,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e99aa9c9f3742cf48986fbe46e71e976?s=128&d=identicon&r=PG","display_name":"Porculus","link":"https://stackoverflow.com/users/247447/porculus"},"edited":false,"score":17,"creation_date":1284139312,"post_id":322728,"comment_id":3883857,"content_license":"CC BY-SA 2.5","body":"LinkedList is not cheap to add elements to.  It is almost always quicker to add a million elements to an ArrayList than to add them to a LinkedList.  And most lists in real-world code are not even a million elements long."},{"owner":{"reputation":80392,"user_id":39975,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/995543cb35c3b92a2eb43275116815a7?s=128&d=identicon&r=PG","display_name":"Dustin","link":"https://stackoverflow.com/users/39975/dustin"},"edited":false,"score":10,"creation_date":1284159784,"post_id":322728,"comment_id":3886850,"content_license":"CC BY-SA 2.5","body":"At any given point, you know the cost of adding an item to your LinkedList.  The ArrayList you do not (in general).  Adding a single item to an ArrayList containing a million items <i>could</i> take a very long time -- it&#39;s an O(n) operation plus double the storage unless you preallocated space.  Adding an item to a LinkedList is O(1).  My last statement stands."},{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":4,"creation_date":1336919769,"post_id":322728,"comment_id":13688585,"content_license":"CC BY-SA 3.0","body":"Adding a single item to an ArrayList is O(1) no matter it is 1 million or 1 billion. Adding an item to a LinkedList is also O(1). &quot;Adding&quot; means ADDING TO THE END."},{"owner":{"reputation":80392,"user_id":39975,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/995543cb35c3b92a2eb43275116815a7?s=128&d=identicon&r=PG","display_name":"Dustin","link":"https://stackoverflow.com/users/39975/dustin"},"edited":false,"score":0,"creation_date":1336975055,"post_id":322728,"comment_id":13697207,"content_license":"CC BY-SA 3.0","body":"You must&#39;ve read the implementation differently than I do.  In my experience, copying a 1 billion element array takes longer than copying a 1 million element array."},{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":0,"creation_date":1337005540,"post_id":322728,"comment_id":13708242,"content_license":"CC BY-SA 3.0","body":"when you add element you add it at the end of the array. there is no copying at all. Copying (shifting) happens when you INSERT into the array."},{"owner":{"reputation":14341,"user_id":119929,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uMReY.jpg?s=128&g=1","display_name":"Stan R.","link":"https://stackoverflow.com/users/119929/stan-r"},"reply_to_user":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":6,"creation_date":1363643499,"post_id":322728,"comment_id":21924222,"content_license":"CC BY-SA 3.0","body":"@kachanov you must misunderstand Dustin. Unless you have declared an array of 1 billion items you will eventually need to resize your array in which case you will need to copy all elements into a new bigger array hence sometimes you will get O (N) however with a linked list you will always get O (1)"},{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"reply_to_user":{"reputation":14341,"user_id":119929,"user_type":"registered","profile_image":"https://i.stack.imgur.com/uMReY.jpg?s=128&g=1","display_name":"Stan R.","link":"https://stackoverflow.com/users/119929/stan-r"},"edited":false,"score":0,"creation_date":1365639828,"post_id":322728,"comment_id":22709173,"content_license":"CC BY-SA 3.0","body":"@Stan R, you must have misunderstood me. If I declare an arry of 1 billion items and adding 99999th item at the end, there is no copying to a bigger array and no resizing."},{"owner":{"reputation":8209,"user_id":3850730,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/vdJq0.jpg?s=128&g=1","display_name":"Sabir Khan","link":"https://stackoverflow.com/users/3850730/sabir-khan"},"edited":false,"score":0,"creation_date":1520853451,"post_id":322728,"comment_id":85470836,"content_license":"CC BY-SA 3.0","body":"@Dustin:For <code>LinkedList</code> class , I see in Oracle JDK-8 that methods with label - <b>Positional Access Operations</b> are implemented - <code>public E get(int index)</code> , <code>public E set(int index, E element)</code> , <code>public void add(int index, E element)</code>  &amp; <code>public E remove(int index)</code>  so I am confused about your statement that only <b>ArrayList is randomly accessible</b>. even though you haven&#39;t specifically said that LinkedList is not randomly accessible but I guess, you meant that."},{"owner":{"reputation":1146,"user_id":1725151,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/3dd74df7a1b246d669fd7618d9c8083c?s=128&d=identicon&r=PG","display_name":"Guildenstern","link":"https://stackoverflow.com/users/1725151/guildenstern"},"edited":false,"score":0,"creation_date":1614111041,"post_id":322728,"comment_id":117284157,"content_license":"CC BY-SA 4.0","body":"Dustin is of course correct that adding to the end of an <code>ArrayList</code> is O(n) in the worst case.  Most of the other commenters are talking about the O(1) amortized complexity of the same operation.  So adding to the end of an <code>ArrayList</code> might be faster on average."}],"owner":{"reputation":80392,"user_id":39975,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/995543cb35c3b92a2eb43275116815a7?s=128&d=identicon&r=PG","display_name":"Dustin","link":"https://stackoverflow.com/users/39975/dustin"},"comment_count":9,"is_accepted":false,"score":35,"last_activity_date":1524204856,"last_edit_date":1524204856,"creation_date":1227750107,"answer_id":322728,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p><code>ArrayList</code> is randomly accessible, while <code>LinkedList</code> is really cheap to expand and remove elements from. For most cases, <code>ArrayList</code> is fine.</p>\n\n<p>Unless you've created large lists and measured a bottleneck, you'll probably never need to worry about the difference.</p>\n"},{"comments":[{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":2,"creation_date":1337309616,"post_id":322729,"comment_id":13803600,"content_license":"CC BY-SA 3.0","body":"To find out more do not read, just write the code. and you will find out that ArrayList implementation is faster then LinkedList in insertion and deletion."}],"owner":{"reputation":32048,"user_id":188,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/833bfbcc9940cfcf0af6def751c23b05?s=128&d=identicon&r=PG","display_name":"Matthew Schinckel","link":"https://stackoverflow.com/users/188/matthew-schinckel"},"comment_count":1,"is_accepted":false,"score":11,"last_activity_date":1524204899,"last_edit_date":1524204899,"creation_date":1227750123,"answer_id":322729,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>It depends upon what operations you will be doing more on the List.</p>\n\n<p><code>ArrayList</code> is faster to access an indexed value. It is much worse when inserting or deleting objects.</p>\n\n<p>To find out more, read any article that talks about the difference between arrays and linked lists.</p>\n"},{"owner":{"reputation":38425,"user_id":15459,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/29daf7e795b7ee51a16a7345151ba65e?s=128&d=identicon&r=PG","display_name":"PhiLho","link":"https://stackoverflow.com/users/15459/philho"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1524204953,"last_edit_date":1524204953,"creation_date":1227750454,"answer_id":322737,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>In addition to the other good arguments above, you should notice <code>ArrayList</code> implements <code>RandomAccess</code> interface, while <code>LinkedList</code> implements <code>Queue</code>.</p>\n\n<p>So, somehow they address slightly different problems, with difference of efficiency and behavior (see their list of methods).</p>\n"},{"owner":{"reputation":14484,"user_id":12887,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/fc24fe007c2d362897829bf8302d29eb?s=128&d=identicon&r=PG","display_name":"Jonathan Tran","link":"https://stackoverflow.com/users/12887/jonathan-tran"},"comment_count":0,"is_accepted":true,"community_owned_date":1227753600,"score":3532,"last_activity_date":1613674958,"last_edit_date":1613674958,"creation_date":1227750582,"answer_id":322742,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p><strong>Summary</strong> <code>ArrayList</code> with <code>ArrayDeque</code> are preferable in <em>many</em> more use-cases than <code>LinkedList</code>. If you're not sureÂ â just start with <code>ArrayList</code>.</p>\n<hr />\n<p>TLDR, in ArrayList accessing an element takes constant time [O(1)] and adding an element takes O(n) time [worst case]. In LinkedList adding an element takes O(n) time and accessing also takes O(n) time but LinkedList uses more memory than ArrayList.</p>\n<p><code>LinkedList</code> and <code>ArrayList</code> are two different implementations of the List interface. <code>LinkedList</code> implements it with a doubly-linked list. <code>ArrayList</code> implements it with a dynamically re-sizing array.</p>\n<p>As with standard linked list and array operations, the various methods will have different algorithmic runtimes.</p>\n<p>For <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/LinkedList.html\" rel=\"noreferrer\"><code>LinkedList&lt;E&gt;</code></a></p>\n<ul>\n<li><code>get(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>getFirst()</code> and <code>getLast()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>add(int index, E element)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>addFirst()</code> and <code>addLast()</code>/<code>add()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/4</em> steps on average), but <em>O(1)</em> when <code>index = 0</code> or <code>index = list.size() - 1</code> (in this case, you can also use <code>removeFirst()</code> and <code>removeLast()</code>). <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>Iterator.remove()</code> is <em>O(1)</em>. <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n<li><code>ListIterator.add(E element)</code> is <em>O(1)</em>. <strong>One of the main benefits of</strong> <code>LinkedList&lt;E&gt;</code></li>\n</ul>\n<p><sup>Note: Many of the operations need <em>n/4</em> steps on average, <em>constant</em> number of steps in the best case (e.g. index = 0), and <em>n/2</em> steps in worst case (middle of list)</sup></p>\n<p>For <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList&lt;E&gt;</code></a></p>\n<ul>\n<li><code>get(int index)</code> is <em>O(1)</em>. <strong>Main benefit of</strong> <code>ArrayList&lt;E&gt;</code></li>\n<li><code>add(E element)</code> is <em>O(1)</em> amortized, but <em>O(n)</em> worst-case since the array must be resized and copied</li>\n<li><code>add(int index, E element)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>remove(int index)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>Iterator.remove()</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n<li><code>ListIterator.add(E element)</code> is <em>O(n)</em> (with <em>n/2</em> steps on average)</li>\n</ul>\n<p><sup>Note: Many of the operations need <em>n/2</em> steps on average, <em>constant</em> number of steps in the best case (end of list), <em>n</em> steps in the worst case (start of list)</sup></p>\n<p><code>LinkedList&lt;E&gt;</code> allows for constant-time insertions or removals <em>using iterators</em>, but only sequential access of elements. In other words, you can walk the list forwards or backwards, but finding a position in the list takes time proportional to the size of the list. Javadoc says <em>&quot;operations that index into the list will traverse the list from the beginning or the end, whichever is closer&quot;</em>, so those methods are <em>O(n)</em> (<em>n/4</em> steps) on average, though <em>O(1)</em> for <code>index = 0</code>.</p>\n<p><code>ArrayList&lt;E&gt;</code>, on the other hand, allow fast random read access, so you can grab any element in constant time. But adding or removing from anywhere but the end requires shifting all the latter elements over, either to make an opening or fill the gap. Also, if you add more elements than the capacity of the underlying array, a new array (1.5 times the size) is allocated, and the old array is copied to the new one, so adding to an <code>ArrayList</code> is <em>O(n)</em> in the worst case but constant on average.</p>\n<p>So depending on the operations you intend to do, you should choose the implementations accordingly. Iterating over either kind of List is practically equally cheap. (Iterating over an <code>ArrayList</code> is technically faster, but unless you're doing something really performance-sensitive, you shouldn't worry about this -- they're both constants.)</p>\n<p>The main benefits of using a <code>LinkedList</code> arise when you re-use existing iterators to insert and remove elements. These operations can then be done in <em>O(1)</em> by changing the list locally only. In an array list, the remainder of the array needs to be <em>moved</em> (i.e. copied). On the other side, seeking in a <code>LinkedList</code> means following the links in <em>O(n)</em> (<em>n/2</em> steps) for worst case, whereas in an <code>ArrayList</code> the desired position can be computed mathematically and accessed in <em>O(1)</em>.</p>\n<p>Another benefit of using a <code>LinkedList</code> arise when you add or remove from the head of the list, since those operations are <em>O(1)</em>, while they are <em>O(n)</em> for <code>ArrayList</code>. Note that <code>ArrayDeque</code> may be a good alternative to <code>LinkedList</code> for adding and removing from the head, but it is not a <code>List</code>.</p>\n<p>Also, if you have large lists, keep in mind that memory usage is also different. Each element of a <code>LinkedList</code> has more overhead since pointers to the next and previous elements are also stored. <code>ArrayLists</code> don't have this overhead. However, <code>ArrayLists</code> take up as much memory as is allocated for the capacity, regardless of whether elements have actually been added.</p>\n<p>The default initial capacity of an <code>ArrayList</code> is pretty small (10 from Java 1.4 - 1.8). But since the underlying implementation is an array, the array must be resized if you add a lot of elements. To avoid the high cost of resizing when you know you're going to add a lot of elements, construct the <code>ArrayList</code> with a higher initial capacity.</p>\n<p>If the data structures perspective is used to understand the two structures, a LinkedList is basically a sequential data structure which contains a head Node. The Node is a wrapper for two components : a value of type T [accepted through generics] and another reference to the Node linked to it. So, we can assert it is a recursive data structure (a Node contains another Node which has another Node and so on...). Addition of elements takes linear time in LinkedList as stated above.</p>\n<p>An ArrayList, is a growable array. It is just like a regular array. Under the hood, when an element is added at index i, it creates another array with a size which is 1 greater than previous size (So in general, when n elements are to be added to an ArrayList, a new array of size previous size plus n is created). The elements are then copied from previous array to new one and the elements that are to be added are also placed at the specified indices.</p>\n"},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"comment_count":0,"is_accepted":false,"score":264,"last_activity_date":1613831177,"last_edit_date":1613831177,"creation_date":1227795616,"answer_id":323889,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p><code>ArrayList</code> is what you want. <code>LinkedList</code> is almost always a (performance) bug.</p>\n<p>Why <code>LinkedList</code> sucks:</p>\n<ul>\n<li>It uses lots of small memory objects, and therefore impacts performance across the process.</li>\n<li>Lots of small objects are bad for cache-locality.</li>\n<li>Any indexed operation requires a traversal, i.e. has O(n) performance. This is not obvious in the source code, leading to algorithms O(n) slower than if <code>ArrayList</code> was used.</li>\n<li>Getting good performance is tricky.</li>\n<li>Even when big-O performance is the same as <code>ArrayList</code>, it is probably going to be significantly slower anyway.</li>\n<li>It's jarring to see <code>LinkedList</code> in source because it is probably the wrong choice.</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":1139,"user_id":247447,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e99aa9c9f3742cf48986fbe46e71e976?s=128&d=identicon&r=PG","display_name":"Porculus","link":"https://stackoverflow.com/users/247447/porculus"},"edited":false,"score":3,"creation_date":1284139232,"post_id":324953,"comment_id":3883841,"content_license":"CC BY-SA 2.5","body":"For small lists, ArrayList.add(0) is still always going to be faster than LinkedList.addFirst()."},{"owner":{"reputation":4305,"user_id":3151415,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/2cHKh.jpg?s=128&g=1","display_name":"garg10may","link":"https://stackoverflow.com/users/3151415/garg10may"},"reply_to_user":{"reputation":1139,"user_id":247447,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e99aa9c9f3742cf48986fbe46e71e976?s=128&d=identicon&r=PG","display_name":"Porculus","link":"https://stackoverflow.com/users/247447/porculus"},"edited":false,"score":1,"creation_date":1474373228,"post_id":324953,"comment_id":66496030,"content_license":"CC BY-SA 3.0","body":"@Porculus I am constantly hearing this argument that for small lists ArrayList.add(0) will be faster, this small is how much small? 10 elements, 10 million, ?"},{"owner":{"reputation":32686,"user_id":40013,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG","display_name":"Jesse Wilson","link":"https://stackoverflow.com/users/40013/jesse-wilson"},"reply_to_user":{"reputation":4305,"user_id":3151415,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/2cHKh.jpg?s=128&g=1","display_name":"garg10may","link":"https://stackoverflow.com/users/3151415/garg10may"},"edited":false,"score":1,"creation_date":1474469592,"post_id":324953,"comment_id":66545763,"content_license":"CC BY-SA 3.0","body":"@garg10may small is less than 10."},{"owner":{"reputation":1851,"user_id":1502439,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/67c216ca182451567e17c2098d47f26d?s=128&d=identicon&r=PG","display_name":"Janac Meena","link":"https://stackoverflow.com/users/1502439/janac-meena"},"reply_to_user":{"reputation":1139,"user_id":247447,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e99aa9c9f3742cf48986fbe46e71e976?s=128&d=identicon&r=PG","display_name":"Porculus","link":"https://stackoverflow.com/users/247447/porculus"},"edited":false,"score":0,"creation_date":1583255226,"post_id":324953,"comment_id":107051511,"content_license":"CC BY-SA 4.0","body":"@Porculus small means less than the max capacity of the internal array underlying the ArrayList."}],"owner":{"reputation":32686,"user_id":40013,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG","display_name":"Jesse Wilson","link":"https://stackoverflow.com/users/40013/jesse-wilson"},"comment_count":4,"is_accepted":false,"score":25,"last_activity_date":1524205006,"last_edit_date":1524205006,"creation_date":1227837855,"answer_id":324953,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>If your code has <code>add(0)</code> and <code>remove(0)</code>, use a <code>LinkedList</code> and it's prettier <code>addFirst()</code> and <code>removeFirst()</code> methods. Otherwise, use <code>ArrayList</code>.</p>\n\n<p>And of course, <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableList.html\" rel=\"noreferrer\">ImmutableList</a> is your best friend.</p>\n"},{"comments":[{"owner":{"reputation":27707,"user_id":205521,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/HkbYt.png?s=128&g=1","display_name":"Thomas Ahle","link":"https://stackoverflow.com/users/205521/thomas-ahle"},"edited":false,"score":40,"creation_date":1325257292,"post_id":882151,"comment_id":10792610,"content_license":"CC BY-SA 3.0","body":"From Java 6 you can use <code>ArrayDeque</code>. <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html</a>"},{"owner":{"reputation":1706,"user_id":1840613,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c2dfd4d21060ccd9b972864e0f6cb8c4?s=128&d=identicon&r=PG","display_name":"Jeremy List","link":"https://stackoverflow.com/users/1840613/jeremy-list"},"edited":false,"score":1,"creation_date":1430359947,"post_id":882151,"comment_id":48036368,"content_license":"CC BY-SA 3.0","body":"<code>ArrayDeque</code> is slower than <code>LinkedList</code> unless all operations are at the same end. It&#39;s OK when used as a stack but it doesn&#39;t make a good queue."},{"owner":{"reputation":1377,"user_id":593533,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/ekxqx.jpg?s=128&g=1","display_name":"Henno Vermeulen","link":"https://stackoverflow.com/users/593533/henno-vermeulen"},"edited":false,"score":2,"creation_date":1432289938,"post_id":882151,"comment_id":48875970,"content_license":"CC BY-SA 3.0","body":"Untrue - at least for Oracle&#39;s implementation in jdk1.7.0_60 and in the following test. I created a test where I loop for 10 million times and I have a Deque of 10 million random Integers. Inside the loop I poll one element from and offer a constant element. On my computer, LinkedList is over 10 times slower than ArrayDeque and uses less memory). The reason is that unlike ArrayList, ArrayDeque keeps a pointer to the head of the array so that it doesn&#39;t have to move all elements when the head is removed."},{"owner":{"reputation":1377,"user_id":593533,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/ekxqx.jpg?s=128&g=1","display_name":"Henno Vermeulen","link":"https://stackoverflow.com/users/593533/henno-vermeulen"},"edited":false,"score":0,"creation_date":1432290518,"post_id":882151,"comment_id":48876313,"content_license":"CC BY-SA 3.0","body":"This was in reply to Jeremy. Daniel is right. If I use a List as a queue in the same test, ArrayList is 300 times slower than LinkedList if I reduce both the loop and queue size to 300_000. I&#39;m not even going to try the 10 million times. I guess the mentioned CircularArrayList is similar to ArrayDeque in keeping a pointer to the head instead of shifting elements."},{"owner":{"reputation":18327,"user_id":1216775,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/gX53v.jpg?s=128&g=1","display_name":"akhil_mittal","link":"https://stackoverflow.com/users/1216775/akhil-mittal"},"edited":false,"score":6,"creation_date":1434555887,"post_id":882151,"comment_id":49831707,"content_license":"CC BY-SA 3.0","body":"<code>ArrayDeque</code> is likely to be faster than <code>Stack</code> when used as a stack, and faster than <code>LinkedList</code> when used as a queue."},{"owner":{"reputation":108964,"user_id":1441122,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XM5u8.jpg?s=128&g=1","display_name":"Stuart Marks","link":"https://stackoverflow.com/users/1441122/stuart-marks"},"edited":false,"score":5,"creation_date":1448750875,"post_id":882151,"comment_id":55711038,"content_license":"CC BY-SA 3.0","body":"Note that akhil_mittal&#39;s comment is a quote from the <code>ArrayDeque</code> documentation."}],"owner":{"reputation":21509,"user_id":107331,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/cf6d0868b2b4c69bac3e6f265a32b6a7?s=128&d=identicon&r=PG","display_name":"Daniel Martin","link":"https://stackoverflow.com/users/107331/daniel-martin"},"comment_count":6,"is_accepted":false,"score":113,"last_activity_date":1242732080,"creation_date":1242732080,"answer_id":882151,"question_id":322715,"content_license":"CC BY-SA 2.5","body":"<p>Yeah, I know, this is an ancient question, but I'll throw in my two cents:</p>\n\n<p>LinkedList is <em>almost always</em> the wrong choice, performance-wise.  There are some very specific algorithms where a LinkedList is called for, but those are very, very rare and the algorithm will usually specifically depend on LinkedList's ability to insert and delete elements in the middle of the list relatively quickly, once you've navigated there with a ListIterator.</p>\n\n<p>There is one common use case in which LinkedList outperforms ArrayList: that of a queue.  However, if your goal is performance, instead of LinkedList you should also consider using an ArrayBlockingQueue (if you can determine an upper bound on your queue size ahead of time, and can afford to allocate all the memory up front), or this <a href=\"http://www.javaspecialists.eu/archive/Issue027.html\" rel=\"noreferrer\">CircularArrayList implementation</a>.  (Yes, it's from 2001, so you'll need to generify it, but I got comparable performance ratios to what's quoted in the article just now in a recent JVM)</p>\n"},{"comments":[{"owner":{"reputation":8429,"user_id":219394,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/be6af8c75baccb49c9f0e6158c505973?s=128&d=identicon&r=PG","display_name":"Kevin Brock","link":"https://stackoverflow.com/users/219394/kevin-brock"},"edited":false,"score":2,"creation_date":1269304951,"post_id":2496245,"comment_id":2490992,"content_license":"CC BY-SA 2.5","body":"How is that? This may be true with linked list data structures but not a Java LinkList object. You can&#39;t just point a <code>next</code> from one list to the first node in the second list. The only way is to use <code>addAll()</code> which adds elements sequentially, though it is better than looping through and calling <code>add()</code> for each element. To do this quickly in O(1) you would need a compositing class (like org.apache.commons.collections.collection.CompositeCollectio&zwnj;&#8203;n) but then this would work for any kind of List/Collection."},{"owner":{"reputation":16203,"user_id":194609,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/c7bw7.png?s=128&g=1","display_name":"Karussell","link":"https://stackoverflow.com/users/194609/karussell"},"edited":false,"score":0,"creation_date":1269348466,"post_id":2496245,"comment_id":2494177,"content_license":"CC BY-SA 2.5","body":"yes, true. I edited the answer accordingly. but see this answer for &#39;how&#39; to do it with LinkedList: <a href=\"http://stackoverflow.com/questions/2494031/is-there-a-fast-concat-method-for-linked-list-in-java/2494884#2494884\" title=\"is there a fast concat method for linked list in java\">stackoverflow.com/questions/2494031/&hellip;</a>"}],"owner":{"reputation":16203,"user_id":194609,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/c7bw7.png?s=128&g=1","display_name":"Karussell","link":"https://stackoverflow.com/users/194609/karussell"},"comment_count":2,"is_accepted":false,"score":8,"last_activity_date":1454594980,"last_edit_date":1495540966,"creation_date":1269297151,"answer_id":2496245,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>An important feature of a linked list (which I didn't read in another answer) is the concatenation of two lists. With an array this is O(n) (+ overhead of some reallocations) with a linked list this is only O(1) or O(2) ;-)</p>\n\n<p><strong>Important</strong>: For Java its <code>LinkedList</code> this is not true! See <a href=\"https://stackoverflow.com/q/2494031/587642\">Is there a fast concat method for linked list in Java?</a></p>\n"},{"comments":[{"owner":{"reputation":1139,"user_id":247447,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e99aa9c9f3742cf48986fbe46e71e976?s=128&d=identicon&r=PG","display_name":"Porculus","link":"https://stackoverflow.com/users/247447/porculus"},"edited":false,"score":44,"creation_date":1284139395,"post_id":2603253,"comment_id":3883863,"content_license":"CC BY-SA 2.5","body":"You can&#39;t compare big-O values directly without thinking about constant factors.  For small lists (and most lists are small), ArrayList&#39;s O(N) is faster than LinkedList&#39;s O(1)."},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":5,"creation_date":1313685334,"post_id":2603253,"comment_id":8518097,"content_license":"CC BY-SA 3.0","body":"I don&#39;t care about small lists performance, and neither does my computer <i>unless</i> it is used in a loop somehow."},{"owner":{"reputation":27707,"user_id":205521,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/HkbYt.png?s=128&g=1","display_name":"Thomas Ahle","link":"https://stackoverflow.com/users/205521/thomas-ahle"},"edited":false,"score":48,"creation_date":1325257376,"post_id":2603253,"comment_id":10792635,"content_license":"CC BY-SA 3.0","body":"LinkedList can&#39;t really insert in the middle in <code>O(1)</code>. It has to run through half the list to find the insertion point."},{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":8,"creation_date":1336919352,"post_id":2603253,"comment_id":13688504,"content_license":"CC BY-SA 3.0","body":"LinkedList: insert in middle O(1) - is WRONG! I found out that even insertion into 1/10th position of the LinkedList size is slower than inserting an element into 1/10th position of an ArrayList. And even worse: the end of collection. inserting into last positions (not the very last) of ArrayList is faster then into last positions (not the very last) of LinkedList"},{"owner":{"reputation":3096,"user_id":284830,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/85b2990d6af7cd96dc7b32b84776c375?s=128&d=identicon&r=PG","display_name":"Michael Munsey","link":"https://stackoverflow.com/users/284830/michael-munsey"},"edited":false,"score":0,"creation_date":1337640222,"post_id":2603253,"comment_id":13881187,"content_license":"CC BY-SA 3.0","body":"See <a href=\"http://stackoverflow.com/questions/840648/why-is-inserting-in-the-middle-of-a-linked-list-o1\" title=\"why is inserting in the middle of a linked list o1\">stackoverflow.com/questions/840648/&hellip;</a>"},{"owner":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"reply_to_user":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":16,"creation_date":1376813587,"post_id":2603253,"comment_id":26845471,"content_license":"CC BY-SA 3.0","body":"@kachanov Inserting in a <code>LinkedList</code> <i>is</i> <code>O(1)</code> <b>if you have an iterator to the insert position</b>, i.e. <code>ListIterator.add</code> is supposedly <code>O(1)</code> for a <code>LinkedList</code>."},{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"reply_to_user":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"edited":false,"score":0,"creation_date":1379319696,"post_id":2603253,"comment_id":27765172,"content_license":"CC BY-SA 3.0","body":"@Anony-Mousse: right. &quot;If you have an iterator to the insert position&quot;. But if you don&#39;t have it, inseting in a LinkedList is NOT O(1). As you can see the original post, it says: &quot;insert in middle&quot; it does not say &quot;insert in middle where you have a position found by iterator&quot;"},{"owner":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"edited":false,"score":0,"creation_date":1379324423,"post_id":2603253,"comment_id":27767510,"content_license":"CC BY-SA 3.0","body":"Bad wording by the author. I&#39;ll edit his answer to clarify. Yes, seeking to the arithemetic average of the lists length will take <code>O(N)</code>."},{"owner":{"reputation":3096,"user_id":284830,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/85b2990d6af7cd96dc7b32b84776c375?s=128&d=identicon&r=PG","display_name":"Michael Munsey","link":"https://stackoverflow.com/users/284830/michael-munsey"},"edited":false,"score":0,"creation_date":1380576080,"post_id":2603253,"comment_id":28246480,"content_license":"CC BY-SA 3.0","body":"I might would word it as &quot;Insert after a node.&quot; You can insert after a given node whether you have an iterator or not. I still think insert in the middle means the same thing, and is clearer."},{"owner":{"reputation":18761,"user_id":1796,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/S32m4.jpg?s=128&g=1","display_name":"Andrei R&#238;nea","link":"https://stackoverflow.com/users/1796/andrei-r%c3%aenea"},"edited":false,"score":2,"creation_date":1422536929,"post_id":2603253,"comment_id":44794362,"content_license":"CC BY-SA 3.0","body":"Nice answer. A small thing though : For <code>ArrayList</code> inserting at back is not always O(1). Maybe most of the times. But when it needs to reallocate the internal array a full copy will occur and a cost of O(n) will be incurred."},{"owner":{"reputation":3096,"user_id":284830,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/85b2990d6af7cd96dc7b32b84776c375?s=128&d=identicon&r=PG","display_name":"Michael Munsey","link":"https://stackoverflow.com/users/284830/michael-munsey"},"edited":false,"score":2,"creation_date":1423008033,"post_id":2603253,"comment_id":44973013,"content_license":"CC BY-SA 3.0","body":"True.  This is still considered amortized O(1), ie <a href=\"http://anh.cs.luc.edu/363/notes/06A_Amortizing.html\" rel=\"nofollow noreferrer\">anh.cs.luc.edu/363/notes/06A_Amortizing.html</a>"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"edited":false,"score":1,"creation_date":1557852769,"post_id":2603253,"comment_id":98901315,"content_license":"CC BY-SA 4.0","body":"@Anony-Mousse mind that manipulating a <code>List</code> via an iterator will invalidate all other potentially existing iterators of that list, so it is impossible to keep multiple iterators to interesting spots in a large list; you can keep at most one iterator for manipulations which has to be moved to the next location sequentially. This makes the scenario where you have an iterator pointing to the desired position, to make a manipulation in <code>O(1)</code> an entirely theoretical one. Thatâs not a deficiency of linked lists in general, itâs just that Javaâs Collection API is not really designed for them."},{"owner":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":0,"creation_date":1557859708,"post_id":2603253,"comment_id":98904568,"content_license":"CC BY-SA 4.0","body":"@Holger it&#39;s easy to imagine workload that involves <i>searching</i> for an insert position first, then inserting at that position. In this case you <i>do</i> have such an iterator, and can avoid searching again."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":69954,"user_id":1060350,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1","display_name":"Has QUIT--Anony-Mousse","link":"https://stackoverflow.com/users/1060350/has-quit-anony-mousse"},"edited":false,"score":2,"creation_date":1557916637,"post_id":2603253,"comment_id":98924097,"content_license":"CC BY-SA 4.0","body":"@Anony-Mousse sure, if your task only involves inserting at the same position over and over again, you have the promised O(1) time complexity when keeping the iterator. Itâs just a very unlikely scenario, to have a large list (where the time complexity matters), but only care for a bunch of elements inserted at a particular position. As soon is you start using the list for other purposes, youâll likely lose anything you gained from that."}],"owner":{"reputation":3096,"user_id":284830,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/85b2990d6af7cd96dc7b32b84776c375?s=128&d=identicon&r=PG","display_name":"Michael Munsey","link":"https://stackoverflow.com/users/284830/michael-munsey"},"comment_count":14,"is_accepted":false,"score":140,"last_activity_date":1612168124,"last_edit_date":1612168124,"creation_date":1270758815,"answer_id":2603253,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<pre><code>Algorithm           ArrayList   LinkedList\nseek front            O(1)         O(1)\nseek back             O(1)         O(1)\nseek to index         O(1)         O(N)\ninsert at front       O(N)         O(1)\ninsert at back        O(1)         O(1)\ninsert after an item  O(N)         O(1)\n</code></pre>\n<p><a href=\"https://web.archive.org/web/20180729155145/http://leepoint.net/algorithms/big-oh/bigoh.html\" rel=\"nofollow noreferrer\">Algorithms: Big-Oh Notation</a> (archived)</p>\n<p>ArrayLists are good for write-once-read-many or appenders, but bad at add/remove from the front or middle.</p>\n"},{"owner":{"reputation":106823,"user_id":1942,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/de6acc2ce773724e9329a67056f2a3d2?s=128&d=identicon&r=PG","display_name":"kemiller2002","link":"https://stackoverflow.com/users/1942/kemiller2002"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1271777521,"creation_date":1271777521,"answer_id":2676424,"question_id":322715,"content_license":"CC BY-SA 2.5","body":"<p>An array list is essentially an array with methods to add items etc. (and you should use a generic list instead). It is a collection of items which can be accessed through an indexer  (for example [0]). It implies a progression from one item to the next.</p>\n\n<p>A linked list specifies a progression from one item to the next (Item a -> item b).  You can get the same effect with an array list, but a linked list absolutely says what item is supposed to follow the previous one. </p>\n"},{"comments":[{"owner":{"reputation":8408,"user_id":325452,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/60ff43e8632a20984515ac2e2c8c2c24?s=128&d=identicon&r=PG","display_name":"ingyhere","link":"https://stackoverflow.com/users/325452/ingyhere"},"edited":false,"score":9,"creation_date":1351575227,"post_id":4575612,"comment_id":17861094,"content_license":"CC BY-SA 3.0","body":"Wouldn&#39;t another solution be managing the size of the list programmatically by using the ArrayList&#39;s ensureCapacity() method? My question is why are so many things being stored in a bunch of brittle data structures when they might better be stored in a caching or db mechanism? I had an interview the other day where they swore up and down about the evils of ArrayList, but I come here and I find that the complexity analysis is all-around better! GREAT POINT FOR DISCUSSION, THOUGH. THANKS!"},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":23,"creation_date":1418847347,"post_id":4575612,"comment_id":43496507,"content_license":"CC BY-SA 3.0","body":"<i>once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts</i> Actually with LinkedList you murder the garbage collector during full GCs, it has to iterate the overly large LinkedList with cache miss on each node."},{"owner":{"reputation":4342,"user_id":3430807,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/4724eb95e279c937e4fb6dd033b35192?s=128&d=identicon&r=PG&f=1","display_name":"Andreas","link":"https://stackoverflow.com/users/3430807/andreas"},"reply_to_user":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":1,"creation_date":1434492361,"post_id":4575612,"comment_id":49799103,"content_license":"CC BY-SA 3.0","body":"@bestsss What he is saying that you will never trigger a full GC cycle with link lists; the list will grow and shrink in increments of one element and the CMS GC will run continually; no hiccups."},{"owner":{"reputation":1169,"user_id":2166594,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1c837edb252a805570c348f18c9ea3a6?s=128&d=identicon&r=PG","display_name":"Philip Devine","link":"https://stackoverflow.com/users/2166594/philip-devine"},"edited":false,"score":5,"creation_date":1434722594,"post_id":4575612,"comment_id":49915085,"content_license":"CC BY-SA 3.0","body":"That&#39;s... a horrible solution.  you&#39;re basically reliant on the GC cleaning up for you, which is incredibly expensive, when you can just call ensureCapacity() on an arraylist instead..."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":4342,"user_id":3430807,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/4724eb95e279c937e4fb6dd033b35192?s=128&d=identicon&r=PG&f=1","display_name":"Andreas","link":"https://stackoverflow.com/users/3430807/andreas"},"edited":false,"score":2,"creation_date":1467627648,"post_id":4575612,"comment_id":63790739,"content_license":"CC BY-SA 3.0","body":"@Andreas: when a list grows and shrinks in increments of one element, there is no problem with <code>ArrayList</code> at all, as it doesnât even need additional memory for that. Considering the possibility that the <code>ArrayList</code> has to increase its capacity <i>once</i> during the entire life time of a web service as a reason to downgrade performance with a <code>LinkedList</code>, is quite strange, especially, if you consider the cost of the web serviceâs I/O in comparison. Expanding the capacity of an <code>ArrayList</code>, even with millions of elements, is rather unlikely to be noticed as latency."},{"owner":{"reputation":4342,"user_id":3430807,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/4724eb95e279c937e4fb6dd033b35192?s=128&d=identicon&r=PG&f=1","display_name":"Andreas","link":"https://stackoverflow.com/users/3430807/andreas"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":1,"creation_date":1467690407,"post_id":4575612,"comment_id":63814823,"content_license":"CC BY-SA 3.0","body":"@Holger An array list that increments over its capacity allocates a new list with 50% more room. For that increment you need 2.5 times the memory (and you likely need full gc cycle afterwards). I&#39;m not concerned about day to day response time, I&#39;m worried about running out of heap memory when a peak hour hits slightly harder than it hit yesterday and a couple big arraylists deciding they need room for 2.5 times their count for a second or two. One instance of that type of behavior during peak usage blows my sla for the whole month."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":4342,"user_id":3430807,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/4724eb95e279c937e4fb6dd033b35192?s=128&d=identicon&r=PG&f=1","display_name":"Andreas","link":"https://stackoverflow.com/users/3430807/andreas"},"edited":false,"score":6,"creation_date":1467709492,"post_id":4575612,"comment_id":63822896,"content_license":"CC BY-SA 3.0","body":"@Andreas: A <code>LinkedList</code> <i>always</i> allocates five times the memory than a plain array of references, so an <code>ArrayList</code> temporarily requiring 2.5 times still consumes far less memory, even while the memory is not reclaimed. Since large array allocation bypasses the Eden space, they donât have any impact on GC behavior, unless there is really not enough memory, in which case, the <code>LinkedList</code> blew up much earlierâ¦"}],"owner":{"reputation":3462,"user_id":506908,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG","display_name":"lamont","link":"https://stackoverflow.com/users/506908/lamont"},"comment_count":7,"is_accepted":false,"score":144,"last_activity_date":1293913432,"creation_date":1293913432,"answer_id":4575612,"question_id":322715,"content_license":"CC BY-SA 2.5","body":"<p>As someone who has been doing operational performance engineering on very large scale SOA web services for about a decade, I would prefer the behavior of LinkedList over ArrayList.  While the steady-state throughput of LinkedList is worse and therefore might lead to buying more hardware -- the behavior of ArrayList under pressure could lead to apps in a cluster expanding their arrays in near synchronicity and for large array sizes could lead to lack of responsiveness in the app and an outage, while under pressure, which is catastrophic behavior.</p>\n\n<p>Similarly, you can get better throughput in an app from the default throughput tenured garbage collector, but once you get java apps with 10GB heaps you can wind up locking up the app for 25 seconds during a Full GCs which causes timeouts and failures in SOA apps and blows your SLAs if it occurs too often.  Even though the CMS collector takes more resources and does not achieve the same raw throughput, it is a much better choice because it has more predictable and smaller latency.</p>\n\n<p>ArrayList is only a better choice for performance if all you mean by performance is throughput and you can ignore latency.  In my experience at my job I cannot ignore worst-case latency.</p>\n"},{"comments":[{"owner":{"user_type":"does_not_exist","display_name":"user8898216"},"edited":false,"score":2,"creation_date":1510639702,"post_id":7304553,"comment_id":81508110,"content_license":"CC BY-SA 3.0","body":"Hi @chharvey , Link only answers get 6 Upvotes ? Please add some points that could support the link .What if oracle changes their link?"}],"owner":{"reputation":6062,"user_id":877703,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/251b6194131d9d190face48e1b400ae4?s=128&d=identicon&r=PG&f=1","display_name":"chharvey","link":"https://stackoverflow.com/users/877703/chharvey"},"comment_count":1,"is_accepted":false,"score":9,"last_activity_date":1315204432,"creation_date":1315204432,"answer_id":7304553,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>See <a href=\"http://download.oracle.com/javase/tutorial/collections/implementations/list.html\" rel=\"noreferrer\">the Java Tutorials - List Implementations</a>.</p>\n"},{"comments":[{"owner":{"reputation":21365,"user_id":531954,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/a3d6efc1f694ea517af91b8cbba15e3a?s=128&d=identicon&r=PG&f=1","display_name":"Danubian Sailor","link":"https://stackoverflow.com/users/531954/danubian-sailor"},"edited":false,"score":1,"creation_date":1367851249,"post_id":7507740,"comment_id":23511481,"content_license":"CC BY-SA 3.0","body":"ArrayList need not to be doubled, to be precise. Please check the sources first."},{"owner":{"reputation":2204,"user_id":1063961,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/s9gRK.png?s=128&g=1","display_name":"Centril","link":"https://stackoverflow.com/users/1063961/centril"},"edited":false,"score":0,"creation_date":1408614010,"post_id":7507740,"comment_id":39659627,"content_license":"CC BY-SA 3.0","body":"It should be noted that your example is flawed... You are removing from string of between: 18 + [2, 12] bytes (&quot;true0false&quot;, &quot;true500000false&quot;), on average 25 bytes, which are the sizes of the elements in the middle. It&#39;s known that as element byte size increases linked list performs better, as list size increases, a contiguous array(list) will do better. Most importantly, you are doing .equals() on strings - which is not a cheap operation. If you instead used integers, I think there would be a difference."},{"owner":{"reputation":2204,"user_id":1063961,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/s9gRK.png?s=128&g=1","display_name":"Centril","link":"https://stackoverflow.com/users/1063961/centril"},"edited":false,"score":0,"creation_date":1408614365,"post_id":7507740,"comment_id":39659830,"content_license":"CC BY-SA 3.0","body":"- and that&#39;s probably also why there is so little difference for remove/contains."},{"owner":{"reputation":9820,"user_id":452775,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/88963e7cc58eabf150447e7b78a24793?s=128&d=identicon&r=PG","display_name":"Lii","link":"https://stackoverflow.com/users/452775/lii"},"edited":false,"score":3,"creation_date":1442310820,"post_id":7507740,"comment_id":53019724,"content_license":"CC BY-SA 3.0","body":"&quot;... <i>is worse in large volume application</i>&quot;: This is a misunderstanding. <code>LinkedList</code> has far more memory overhead because for every element there is a node object with five fields. On many systems that makes 20 bytes overhead. The average memory overhead per element for <code>ArrayList</code> is one and a half word, which makes 6 bytes, and 8 bytes in the worst case."},{"owner":{"reputation":18716,"user_id":95122,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/53edd8e9c033a8a0ec7f4483d52ae62a?s=128&d=identicon&r=PG","display_name":"BobMcGee","link":"https://stackoverflow.com/users/95122/bobmcgee"},"edited":false,"score":1,"creation_date":1457635734,"post_id":7507740,"comment_id":59507938,"content_license":"CC BY-SA 3.0","body":"I&#39;ve done a better version of your benchmark <a href=\"https://gist.github.com/svanoort/4256d1801d97a2b7eef3\" rel=\"nofollow noreferrer\">here, with results</a> - the append-on-end performance for the arraylist is artificially low for yours, because addAll is giving a storage array of EXACTLY initial size, so the first insert always triggers an arraycopy.  Also, this includes warmup cycles to allow for JIT compilation before data is collected."},{"owner":{"reputation":1371,"user_id":6723250,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/84a0e8aa370e949feeaa7c5c153a3be9?s=128&d=identicon&r=PG","display_name":"Xerus","link":"https://stackoverflow.com/users/6723250/xerus"},"edited":false,"score":0,"creation_date":1527452414,"post_id":7507740,"comment_id":88123134,"content_license":"CC BY-SA 4.0","body":"<code>Edit&#47;Remove is faster in LinkedList than ArrayList.</code> That&#39;s a bit too simplified. It depends heavily on where the removal is happening, if it is at the end then ArrayList will be faster, because there is no extra object that has to be GCed at some point."},{"owner":{"reputation":1371,"user_id":6723250,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/84a0e8aa370e949feeaa7c5c153a3be9?s=128&d=identicon&r=PG","display_name":"Xerus","link":"https://stackoverflow.com/users/6723250/xerus"},"edited":false,"score":0,"creation_date":1527452516,"post_id":7507740,"comment_id":88123173,"content_license":"CC BY-SA 4.0","body":"<code>ArrayList, backed by Array, which needs to be double the size, is worse in large volume application.</code> The opposite is true. An array has much less overhead than an additional object created for <i>each element in the list</i>, which is what linkedList does."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1537459882,"post_id":7507740,"comment_id":91801983,"content_license":"CC BY-SA 4.0","body":"LinkedList has a specific (if short) set of uses.  Try performance of deleting WHILE you are iterating over a linked list (iterator.remove()).  The performance difference should be immense.  Also create a list of a few million items using only &quot;addFirst&quot; and see what you get. (ArrayList obviously shouldn&#39;t even have an add first because it&#39;s such a dumb thing to do on an arraylist.)"},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"reply_to_user":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":4,"creation_date":1557853554,"post_id":7507740,"comment_id":98901701,"content_license":"CC BY-SA 4.0","body":"@BillK since Java 8, you can use <code>removeIf(element -&gt; condition)</code> where it fits, which can be significantly faster for an <code>ArrayList</code>, compared to looping and removing via iterator, as it is not required to shift the entire remainder for every individual element. Whether this performs better or worse than <code>LinkedList</code> depends on the particular scenario, as a <code>LinkedList</code> is O(1) in theory, but removing just a single node requires several memory accesses, which can easily exceed the number needed for the <code>ArrayList</code> when removing a significant number of elements."}],"owner":{"reputation":1953,"user_id":890381,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f7e0ff40ac7948b0f236962acbc9d68f?s=128&d=identicon&r=PG","display_name":"Ash","link":"https://stackoverflow.com/users/890381/ash"},"comment_count":9,"is_accepted":false,"score":56,"last_activity_date":1524205403,"last_edit_date":1524205403,"creation_date":1316645963,"answer_id":7507740,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>Correct or Incorrect: Please execute test locally and decide for yourself!</p>\n\n<p>Edit/Remove is faster in <code>LinkedList</code> than <code>ArrayList</code>.</p>\n\n<p><code>ArrayList</code>, backed by <code>Array</code>, which needs to be double the size, is worse in large volume application.</p>\n\n<p>Below is the unit test result for each operation.Timing is given in Nanoseconds.</p>\n\n<hr>\n\n<pre><code>Operation                       ArrayList                      LinkedList  \n\nAddAll   (Insert)               101,16719                      2623,29291 \n\nAdd      (Insert-Sequentially)  152,46840                      966,62216\n\nAdd      (insert-randomly)      36527                          29193\n\nremove   (Delete)               20,56,9095                     20,45,4904\n\ncontains (Search)               186,15,704                     189,64,981\n</code></pre>\n\n<hr>\n\n<p>Here's the code:</p>\n\n<pre><code>import org.junit.Assert;\nimport org.junit.Test;\n\nimport java.util.*;\n\npublic class ArrayListVsLinkedList {\n    private static final int MAX = 500000;\n    String[] strings = maxArray();\n\n    ////////////// ADD ALL ////////////////////////////////////////\n    @Test\n    public void arrayListAddAll() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        watch.start();\n        arrayList.addAll(stringList);\n        watch.totalTime(\"Array List addAll() = \");//101,16719 Nanoseconds\n    }\n\n    @Test\n    public void linkedListAddAll() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n\n        watch.start();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(stringList);\n        watch.totalTime(\"Linked List addAll() = \");  //2623,29291 Nanoseconds\n    }\n\n    //Note: ArrayList is 26 time faster here than LinkedList for addAll()\n\n    ///////////////// INSERT /////////////////////////////////////////////\n    @Test\n    public void arrayListAdd() {\n        Watch watch = new Watch();\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        watch.start();\n        for (String string : strings)\n            arrayList.add(string);\n        watch.totalTime(\"Array List add() = \");//152,46840 Nanoseconds\n    }\n\n    @Test\n    public void linkedListAdd() {\n        Watch watch = new Watch();\n\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        watch.start();\n        for (String string : strings)\n            linkedList.add(string);\n        watch.totalTime(\"Linked List add() = \");  //966,62216 Nanoseconds\n    }\n\n    //Note: ArrayList is 9 times faster than LinkedList for add sequentially\n\n    /////////////////// INSERT IN BETWEEN ///////////////////////////////////////\n\n    @Test\n    public void arrayListInsertOne() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX + MAX / 10);\n        arrayList.addAll(stringList);\n\n        String insertString0 = getString(true, MAX / 2 + 10);\n        String insertString1 = getString(true, MAX / 2 + 20);\n        String insertString2 = getString(true, MAX / 2 + 30);\n        String insertString3 = getString(true, MAX / 2 + 40);\n\n        watch.start();\n\n        arrayList.add(insertString0);\n        arrayList.add(insertString1);\n        arrayList.add(insertString2);\n        arrayList.add(insertString3);\n\n        watch.totalTime(\"Array List add() = \");//36527\n    }\n\n    @Test\n    public void linkedListInsertOne() {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(stringList);\n\n        String insertString0 = getString(true, MAX / 2 + 10);\n        String insertString1 = getString(true, MAX / 2 + 20);\n        String insertString2 = getString(true, MAX / 2 + 30);\n        String insertString3 = getString(true, MAX / 2 + 40);\n\n        watch.start();\n\n        linkedList.add(insertString0);\n        linkedList.add(insertString1);\n        linkedList.add(insertString2);\n        linkedList.add(insertString3);\n\n        watch.totalTime(\"Linked List add = \");//29193\n    }\n\n\n    //Note: LinkedList is 3000 nanosecond faster than ArrayList for insert randomly.\n\n    ////////////////// DELETE //////////////////////////////////////////////////////\n    @Test\n    public void arrayListRemove() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        arrayList.addAll(stringList);\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        arrayList.remove(searchString0);\n        arrayList.remove(searchString1);\n        watch.totalTime(\"Array List remove() = \");//20,56,9095 Nanoseconds\n    }\n\n    @Test\n    public void linkedListRemove() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(Arrays.asList(strings));\n\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        linkedList.remove(searchString0);\n        linkedList.remove(searchString1);\n        watch.totalTime(\"Linked List remove = \");//20,45,4904 Nanoseconds\n    }\n\n    //Note: LinkedList is 10 millisecond faster than ArrayList while removing item.\n\n    ///////////////////// SEARCH ///////////////////////////////////////////\n    @Test\n    public void arrayListSearch() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; stringList = Arrays.asList(strings);\n        List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;(MAX);\n\n        arrayList.addAll(stringList);\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        arrayList.contains(searchString0);\n        arrayList.contains(searchString1);\n        watch.totalTime(\"Array List addAll() time = \");//186,15,704\n    }\n\n    @Test\n    public void linkedListSearch() throws Exception {\n        Watch watch = new Watch();\n        List&lt;String&gt; linkedList = new LinkedList&lt;String&gt;();\n        linkedList.addAll(Arrays.asList(strings));\n\n        String searchString0 = getString(true, MAX / 2 + 10);\n        String searchString1 = getString(true, MAX / 2 + 20);\n\n        watch.start();\n        linkedList.contains(searchString0);\n        linkedList.contains(searchString1);\n        watch.totalTime(\"Linked List addAll() time = \");//189,64,981\n    }\n\n    //Note: Linked List is 500 Milliseconds faster than ArrayList\n\n    class Watch {\n        private long startTime;\n        private long endTime;\n\n        public void start() {\n            startTime = System.nanoTime();\n        }\n\n        private void stop() {\n            endTime = System.nanoTime();\n        }\n\n        public void totalTime(String s) {\n            stop();\n            System.out.println(s + (endTime - startTime));\n        }\n    }\n\n\n    private String[] maxArray() {\n        String[] strings = new String[MAX];\n        Boolean result = Boolean.TRUE;\n        for (int i = 0; i &lt; MAX; i++) {\n            strings[i] = getString(result, i);\n            result = !result;\n        }\n        return strings;\n    }\n\n    private String getString(Boolean result, int i) {\n        return String.valueOf(result) + i + String.valueOf(!result);\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2040,"user_id":487117,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/e60bd8fc53ad3a51b0f4a94a44906ea1?s=128&d=identicon&r=PG","display_name":"gaijinco","link":"https://stackoverflow.com/users/487117/gaijinco"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1317684180,"creation_date":1317684180,"answer_id":7641788,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>I have read the responses, but there is one scenario where I always use a LinkedList over an ArrayList that I want to share to hear opinions:</p>\n\n<p>Every time I had a method that returns a list of data obtained from a DB I always use a LinkedList.</p>\n\n<p>My rationale was that because it is impossible to know exactly how many results am I getting, there will be not memory wasted (as in ArrayList with the difference between the capacity and actual number of elements), and there would be no time wasted trying to duplicate the capacity.</p>\n\n<p>As far a ArrayList, I agree that at least you should always use the constructor with the initial capacity, to minimize the duplication of the arrays as much as possible.</p>\n"},{"comments":[{"owner":{"reputation":16865,"user_id":188704,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b3499592f2c9d48d68eb861845a83888?s=128&d=identicon&r=PG","display_name":"Heath Hunnicutt","link":"https://stackoverflow.com/users/188704/heath-hunnicutt"},"edited":false,"score":242,"creation_date":1378426693,"post_id":7671021,"comment_id":27458255,"content_license":"CC BY-SA 3.0","body":"The problem with your math is that your graph greatly exaggerates the impact.  You are modelling objects which each contain only an <code>int</code>, so 4 or 8 bytes of data.  In the linked list, there are essentially 4 &quot;words&quot; of overhead.  Your graph thus gives the impression that linked lists use &quot;five times&quot; the storage of array lists.  This is wrong.  The overhead is 16 or 32 bytes per object, as an additive adjustment, not a scaling factor."}],"owner":{"reputation":8251,"user_id":707399,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/0USRq.png?s=128&g=1","display_name":"Numeron","link":"https://stackoverflow.com/users/707399/numeron"},"comment_count":1,"is_accepted":false,"score":653,"last_activity_date":1544566507,"last_edit_date":1544566507,"creation_date":1317883605,"answer_id":7671021,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>Thus far, nobody seems to have addressed the memory footprint of each of these lists besides the general consensus that a <code>LinkedList</code> is \"lots more\" than an <code>ArrayList</code> so I did some number crunching to demonstrate exactly how much both lists take up for N null references.</p>\n\n<p>Since references are either 32 or 64 bits (even when null) on their relative systems, I have included 4 sets of data for 32 and 64 bit <code>LinkedLists</code> and <code>ArrayLists</code>.</p>\n\n<p><strong>Note:</strong> The sizes shown for the <code>ArrayList</code> lines are for <em>trimmed lists</em> - In practice, the capacity of the backing array in an <code>ArrayList</code> is generally larger than its current element count.</p>\n\n<p><strong>Note 2:</strong> <em>(thanks BeeOnRope)</em> As CompressedOops is default now from mid JDK6 and up, the values below for 64-bit machines will basically match their 32-bit counterparts, unless of course you specifically turn it off.</p>\n\n<hr>\n\n<p><img src=\"https://i.imgur.com/f83xDyz.png\" alt=\"Graph of LinkedList and ArrayList No. of Elements x Bytes\"></p>\n\n<hr>\n\n<p>The result clearly shows that <code>LinkedList</code> is a whole lot more than <code>ArrayList</code>, especially with a very high element count. If memory is a factor, steer clear of <code>LinkedLists</code>.</p>\n\n<p>The formulas I used follow, let me know if I have done anything wrong and I will fix it up. 'b' is either 4 or 8 for 32 or 64 bit systems, and 'n' is the number of elements. Note the reason for the mods is because all objects in java will take up a multiple of 8 bytes space regardless of whether it is all used or not.</p>\n\n<p><strong>ArrayList:</strong></p>\n\n<p><code>ArrayList object header + size integer + modCount integer + array reference + (array oject header + b * n) + MOD(array oject, 8) + MOD(ArrayList object, 8) == 8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8) + MOD(8 + 4 + 4 + b + (12 + b * n) + MOD(12 + b * n, 8), 8)</code></p>\n\n<p><strong>LinkedList:</strong></p>\n\n<p><code>LinkedList object header + size integer + modCount integer + reference to header + reference to footer + (node object overhead + reference to previous element + reference to next element + reference to element) * n) + MOD(node object, 8) * n + MOD(LinkedList object, 8) == 8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n + MOD(8 + 4 + 4 + 2 * b + (8 + 3 * b) * n + MOD(8 + 3 * b, 8) * n, 8)</code></p>\n"},{"comments":[{"owner":{"reputation":8251,"user_id":707399,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/0USRq.png?s=128&g=1","display_name":"Numeron","link":"https://stackoverflow.com/users/707399/numeron"},"edited":false,"score":4,"creation_date":1375080010,"post_id":10977140,"comment_id":26175539,"content_license":"CC BY-SA 3.0","body":"I wish I could give this more than one -1: LinkedList gives O(N) on all of insert, remove and random access because you have to traverse the list to get to the correct point first. Also it might surprise you to learn that hashmap/table use resizing arrays just like ArrayList and given that the most common usage of lists is to just be indexed by a number, using one of those over an ArrayList is the worst idea."},{"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"reply_to_user":{"reputation":8251,"user_id":707399,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/0USRq.png?s=128&g=1","display_name":"Numeron","link":"https://stackoverflow.com/users/707399/numeron"},"edited":false,"score":1,"creation_date":1380783483,"post_id":10977140,"comment_id":28330123,"content_license":"CC BY-SA 3.0","body":"@Numeron you are right, it wasn&#39;t clear what I answered. Indeed when you try accessing linked list by index, it will be O(n), how ever I meant inserting to linked list by items. Then it&#39;s O(1) and also interacting over all the list it&#39;s same as array list."}],"owner":{"reputation":27189,"user_id":1129332,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/KcrPN.jpg?s=128&g=1","display_name":"Ilya Gazman","link":"https://stackoverflow.com/users/1129332/ilya-gazman"},"comment_count":2,"is_accepted":false,"score":-2,"last_activity_date":1478174744,"last_edit_date":1478174744,"creation_date":1339405686,"answer_id":10977140,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>When should I use <code>LinkedList</code>? When working with stacks mostly, or when working with buffers.\nWhen should I use <code>ArrayList</code>? Only when working with indexes,  otherwise you can use HashTable with linked list, then you get:</p>\n\n<h2>Hash table + linked list</h2>\n\n<ul>\n<li>Access by key <strong>O(1),</strong></li>\n<li>Insert by key <strong>O(1),</strong></li>\n<li>Remove by key <strong>O(1)</strong></li>\n<li>and there is a trick to implement RemoveAll / SetAll with O(1) when using versioning</li>\n</ul>\n\n<p>It seems like a good solution, and in most of the cases it is, how ever you should know:\nHashTable takes a lot of disc space, so when you need to manage 1,000,000 elements list it can become a thing that matters. This can happen in server implementations, in clients it is rarely the case.</p>\n\n<p>Also take a look at <a href=\"http://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow noreferrer\">Red-Black-Tree</a></p>\n\n<ul>\n<li>Random access <strong>Log(n),</strong></li>\n<li>Insert <strong>Log(n),</strong></li>\n<li>Remove <strong>Log(n)</strong></li>\n</ul>\n"},{"comments":[{"owner":{"reputation":2408,"user_id":191995,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/aa5140e5f2744c0659e727c2a0f5f8f2?s=128&d=identicon&r=PG","display_name":"kachanov","link":"https://stackoverflow.com/users/191995/kachanov"},"edited":false,"score":10,"creation_date":1360284845,"post_id":13253191,"comment_id":20665861,"content_license":"CC BY-SA 3.0","body":"&gt;&gt;&gt;&gt; ArrayList add --&gt; O(1) &lt;- not tru. In some cases ArrayList will have to grow to add one more element"},{"owner":{"reputation":4305,"user_id":3151415,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/2cHKh.jpg?s=128&g=1","display_name":"garg10may","link":"https://stackoverflow.com/users/3151415/garg10may"},"edited":false,"score":1,"creation_date":1474373151,"post_id":13253191,"comment_id":66495967,"content_license":"CC BY-SA 3.0","body":"LinkedList remove is not O(1), it would need to search for the element to be removed, therefore worst case O(n) and average O(n/2)"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1570651018,"post_id":13253191,"comment_id":102984088,"content_license":"CC BY-SA 4.0","body":"Neither is <code>LinkedList.add()</code>, although most of the answers here say so."}],"owner":{"reputation":693,"user_id":1490555,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/fd35a17b085c0ba6ee3c5fcf0431f48a?s=128&d=identicon&r=PG","display_name":"Rajith Delantha","link":"https://stackoverflow.com/users/1490555/rajith-delantha"},"comment_count":3,"is_accepted":false,"score":20,"last_activity_date":1524205750,"last_edit_date":1524205750,"creation_date":1352212328,"answer_id":13253191,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>Here is the Big-O notation in both <code>ArrayList</code> and <code>LinkedList</code> and also <code>CopyOnWrite-ArrayList</code>:</p>\n\n<p><strong>ArrayList</strong></p>\n\n<pre><code>get                 O(1)\nadd                 O(1)\ncontains            O(n)\nnext                O(1)\nremove              O(n)\niterator.remove     O(n)\n</code></pre>\n\n<p><strong>LinkedList</strong></p>\n\n<pre><code>get                 O(n)\nadd                 O(1)\ncontains            O(n)\nnext                O(1)\nremove              O(1)\niterator.remove     O(1)\n</code></pre>\n\n<p><strong>CopyOnWrite-ArrayList</strong></p>\n\n<pre><code>get                 O(1)\nadd                 O(n)\ncontains            O(n)\nnext                O(1)\nremove              O(n)\niterator.remove     O(n)\n</code></pre>\n\n<p>Based on these you have to decide what to choose. :)</p>\n"},{"owner":{"reputation":2181,"user_id":1218010,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/61c7418e7f42a1f86872a46d9f57b384?s=128&d=identicon&r=PG","display_name":"Ajax","link":"https://stackoverflow.com/users/1218010/ajax"},"comment_count":0,"is_accepted":false,"score":22,"last_activity_date":1524205790,"last_edit_date":1524205790,"creation_date":1366356408,"answer_id":16099449,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>I know this is an old post, but I honestly can't believe nobody mentioned that <code>LinkedList</code> implements <code>Deque</code>.  Just look at the methods in <code>Deque</code> (and <code>Queue</code>); if you want a fair comparison, try running <code>LinkedList</code> against <code>ArrayDeque</code> and do a feature-for-feature comparison. </p>\n"},{"comments":[{"owner":{"reputation":12880,"user_id":638670,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/b575bbc504d73c3407b2926b0c6a1b98?s=128&d=identicon&r=PG","display_name":"Nerrve","link":"https://stackoverflow.com/users/638670/nerrve"},"edited":false,"score":3,"creation_date":1383645600,"post_id":16126564,"comment_id":29410920,"content_license":"CC BY-SA 3.0","body":"&quot;LinkedList is faster than add/remove&quot;. Wrong, check the answer above <a href=\"http://stackoverflow.com/a/7507740/638670\">stackoverflow.com/a/7507740/638670</a>"}],"owner":{"reputation":2679,"user_id":127859,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/XQrlZ.jpg?s=128&g=1","display_name":"Ryan","link":"https://stackoverflow.com/users/127859/ryan"},"comment_count":1,"is_accepted":false,"score":54,"last_activity_date":1527416989,"last_edit_date":1527416989,"creation_date":1366502627,"answer_id":16126564,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p><code>ArrayList</code> is essentially an array. <code>LinkedList</code> is implemented as a double linked list. </p>\n\n<p>The <code>get</code> is pretty clear. O(1) for <code>ArrayList</code>, because <code>ArrayList</code> allow random access by using index. O(n) for <code>LinkedList</code>, because it needs to find the index first. Note: there are different versions of <code>add</code> and <code>remove</code>. </p>\n\n<p><code>LinkedList</code> is faster in add and remove, but slower in get. In brief, <code>LinkedList</code> should be preferred if: </p>\n\n<ol>\n<li>there are no large number of random access of element </li>\n<li>there are a large number of add/remove operations</li>\n</ol>\n\n<p>=== <strong>ArrayList</strong> ===</p>\n\n<ul>\n<li>add(E e)      \n\n<ul>\n<li>add at the end of ArrayList</li>\n<li>require memory resizing cost.  </li>\n<li>O(n) worst, O(1) amortized</li>\n</ul></li>\n<li>add(int index, E element) \n\n<ul>\n<li>add to a specific index position</li>\n<li>require shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(int index)\n\n<ul>\n<li>remove a specified element</li>\n<li>require shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(Object o) \n\n<ul>\n<li>remove the first occurrence of the specified element from this list</li>\n<li>need to search the element first, and then shifting &amp; possible memory resizing cost</li>\n<li>O(n)</li>\n</ul></li>\n</ul>\n\n<p>=== <strong>LinkedList</strong> ===</p>\n\n<ul>\n<li><p>add(E e)</p>\n\n<ul>\n<li>add to the end of the list</li>\n<li>O(1)</li>\n</ul></li>\n<li><p>add(int index, E element)</p>\n\n<ul>\n<li>insert at specified position</li>\n<li>need to find the position first</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove()\n\n<ul>\n<li>remove first element of the list</li>\n<li>O(1)</li>\n</ul></li>\n<li>remove(int index)\n\n<ul>\n<li>remove element with specified index</li>\n<li>need to find the element first</li>\n<li>O(n)</li>\n</ul></li>\n<li>remove(Object o)\n\n<ul>\n<li>remove the first occurrence of the specified element</li>\n<li>need to find the element first</li>\n<li>O(n)</li>\n</ul></li>\n</ul>\n\n<p>Here is a figure from <a href=\"http://www.programcreek.com/2013/03/arraylist-vs-linkedlist-vs-vector/\" rel=\"noreferrer\">programcreek.com</a> (<code>add</code> and <code>remove</code> are the first type, i.e., add an element at the end of the list and remove the element at the specified position in the list.):</p>\n\n<p><img src=\"https://i.stack.imgur.com/pdKaZ.png\" alt=\"enter image description here\"></p>\n"},{"owner":{"reputation":3201,"user_id":2245634,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/OHoy2.jpg?s=128&g=1","display_name":"AmitÄbha","link":"https://stackoverflow.com/users/2245634/amit%c4%81bha"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1478688514,"last_edit_date":1478688514,"creation_date":1366876658,"answer_id":16209317,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>Operation get(i) in ArrayList is faster than LinkedList, because:<br>\n<strong>ArrayList:</strong> Resizable-array implementation of the List interface<br>\n<strong>LinkedList:</strong> Doubly-linked list implementation of the List and Deque interfaces</p>\n\n<p>Operations that index into the list will traverse the list from the beginning or the end, whichever is closer to the specified index. </p>\n"},{"owner":{"reputation":1276,"user_id":5197034,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/55947b72a5972c1daecceb9c23a1107c?s=128&d=identicon&r=PG&f=1","display_name":"pietz","link":"https://stackoverflow.com/users/5197034/pietz"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1599242652,"last_edit_date":1599242652,"creation_date":1465677629,"answer_id":37768332,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>Both <code>remove()</code> and <code>insert()</code> have a runtime efficiency of O(n) for both ArrayLists and LinkedLists. However, the reason behind the linear processing time comes from two very different reasons:</p>\n<p>In an ArrayList, you get to the element in O(1), but actually removing or inserting something makes it O(n) because all the following elements need to be changed.</p>\n<p>In a LinkedList, it takes O(n) to actually get to the desired element, because we have to start at the very beginning until we reach the desired index. Actually removing or inserting is constant, because we only have to change 1 reference for <code>remove()</code> and 2 references for <code>insert()</code>.</p>\n<p>Which of the two is faster for inserting and removing depends on where it happens. If we are closer to the beginning the LinkedList will be faster, because we have to go through relatively few elements. If we are closer to the end an ArrayList will be faster, because we get there in constant time and only have to change the few remaining elements that follow it. When done precisely in the middle the LinkedList will be faster because going through n elements is quicker than moving n values.</p>\n<p>Bonus: While there is no way of making these two methods O(1) for an ArrayList, there actually is a way to do this in LinkedLists. Let's say we want to go through the entire List removing and inserting elements on our way. Usually, you would start from the very beginning for each element using the LinkedList, we could also &quot;save&quot; the current element we're working on with an Iterator. With the help of the Iterator, we get an O(1) efficiency for <code>remove()</code> and <code>insert()</code> when working in a LinkedList. Making it the only performance benefit I'm aware of where a LinkedList is always better than an ArrayList.</p>\n"},{"owner":{"reputation":480,"user_id":6168802,"user_type":"registered","profile_image":"https://i.stack.imgur.com/jG8Kj.jpg?s=128&g=1","display_name":"Real73","link":"https://stackoverflow.com/users/6168802/real73"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1478077223,"creation_date":1478077223,"answer_id":40375897,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p><code>ArrayList</code> and <code>LinkedList</code> both implements <code>List interface</code>  and their methods and results are almost identical. However there are few differences between them which make one better over another depending on the requirement.</p>\n\n<h2>ArrayList Vs LinkedList</h2>\n\n<p>1) <code>Search:</code> <code>ArrayList</code> search operation is pretty fast compared to the <code>LinkedList</code> search operation. <code>get(int index)</code> in <code>ArrayList</code> gives the performance of <code>O(1)</code> while <code>LinkedList</code> performance is <code>O(n)</code>.</p>\n\n<p><code>Reason:</code> <code>ArrayList</code> maintains index based system for its elements as it uses array data structure implicitly which makes it faster for searching an element in the list. On the other side <code>LinkedList</code> implements doubly linked list which requires the traversal through all the elements for searching an element.</p>\n\n<p>2) <code>Deletion:</code> <code>LinkedList</code> remove operation gives <code>O(1)</code> performance while <code>ArrayList</code> gives variable performance: <code>O(n)</code> in worst case (while removing first element) and <code>O(1)</code> in best case (While removing last element).</p>\n\n<blockquote>\n  <p>Conclusion: LinkedList element deletion is faster compared to\n  ArrayList.</p>\n</blockquote>\n\n<p>Reason: LinkedListâs each element maintains two pointers (addresses) which points to the both neighbor elements in the list. Hence removal only requires change in the pointer location in the two neighbor nodes (elements) of the node which is going to be removed. While In ArrayList all the elements need to be shifted to fill out the space created by removed element.</p>\n\n<p>3) <code>Inserts Performance:</code> <code>LinkedList</code> add method gives <code>O(1)</code> performance while <code>ArrayList</code> gives <code>O(n)</code> in worst case. Reason is same as explained for remove.</p>\n\n<p>4) <code>Memory Overhead:</code> <code>ArrayList</code> maintains indexes and element data while <code>LinkedList</code> maintains element data and two pointers for neighbor nodes </p>\n\n<blockquote>\n  <p>hence the memory consumption is high in LinkedList comparatively.</p>\n</blockquote>\n\n<h2>There are few similarities between these classes which are as follows:</h2>\n\n<ul>\n<li>Both ArrayList and LinkedList are implementation of List interface.</li>\n<li>They both maintain the elements insertion order which means while displaying ArrayList and LinkedList elements the result set would be having the same order in which the elements got inserted into the List.</li>\n<li>Both these classes are non-synchronized and can be made synchronized explicitly by using Collections.synchronizedList method.</li>\n<li>The <code>iterator</code> and <code>listIterator</code> returned by these classes are <code>fail-fast</code> (if list is structurally modified at any time after the iterator is created, in any way except through the <code>iteratorâs</code> own remove or add methods, the iterator will <code>throw</code> a <code>ConcurrentModificationException</code>).</li>\n</ul>\n\n<h2>When to use LinkedList and when to use ArrayList?</h2>\n\n<ul>\n<li>As explained above the insert and remove operations give good performance <code>(O(1))</code> in <code>LinkedList</code> compared to <code>ArrayList(O(n))</code>.\n\n<blockquote>\n  <p>Hence if there is a requirement of frequent addition and deletion in application then LinkedList is a best choice.</p>\n</blockquote></li>\n<li>Search (<code>get method</code>) operations are fast in <code>Arraylist (O(1))</code> but not in <code>LinkedList (O(n))</code> \n\n<blockquote>\n  <p>so If there are less add and remove operations and more search operations requirement, ArrayList would be your best bet.</p>\n</blockquote></li>\n</ul>\n"},{"owner":{"reputation":2291,"user_id":1428052,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/3b2b0ab451ccd36f1a2ddb6d8aff3481?s=128&d=identicon&r=PG","display_name":"Abhijeet Ashok Muneshwar","link":"https://stackoverflow.com/users/1428052/abhijeet-ashok-muneshwar"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1532447371,"last_edit_date":1532447371,"creation_date":1486739642,"answer_id":42162722,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>Let's compare LinkedList and ArrayList w.r.t. below parameters:</p>\n\n<h2>1. Implementation</h2>\n\n<blockquote>\n  <p><em>ArrayList</em> is the resizable array implementation of list interface , while </p>\n  \n  <p><em>LinkedList</em> is the Doubly-linked list implementation of the list interface.</p>\n</blockquote>\n\n<hr>\n\n<h2>2. Performance</h2>\n\n<ul>\n<li><h3>get(int index) or search operation</h3>\n\n<blockquote>\n  <p><em>ArrayList</em> get(int index) operation runs in constant time i.e O(1)  while </p>\n  \n  <p><em>LinkedList</em> get(int index) operation run time is O(n) .</p>\n</blockquote>\n\n<p>The reason behind <em>ArrayList</em> being faster than LinkedList is that ArrayList uses an index based system for its elements as it internally uses an array data structure, on the other hand,</p>\n\n<p><em>LinkedList</em> does not provide index-based access for its elements as it iterates either from the beginning or end (whichever is closer) to retrieve the node at the specified element index.</p></li>\n<li><h3>insert() or add(Object) operation</h3>\n\n<blockquote>\n  <p>Insertions in <em>LinkedList</em> are generally fast as compare to ArrayList. In LinkedList adding or insertion is O(1) operation . </p>\n  \n  <p>While in <em>ArrayList</em>, if the array is the full i.e worst case,  there is an extra cost of resizing array and copying elements to the new array, which makes runtime of add operation in ArrayList O(n), otherwise it is O(1).</p>\n</blockquote></li>\n<li><h3>remove(int) operation</h3>\n\n<p>Remove operation in LinkedList is generally the same as ArrayList i.e. O(n).</p>\n\n<blockquote>\n  <p>In <em>LinkedList</em>, there are two overloaded remove methods. one is remove() without any parameter which removes the head of the list and runs in constant time O(1). The other overloaded remove method in LinkedList is remove(int) or remove(Object) which removes the Object or int passed as a parameter. This method traverses the LinkedList until it found the Object and unlink it from the original list. Hence this method runtime is O(n). </p>\n  \n  <p>While in <em>ArrayList</em> remove(int) method involves copying elements from the old array to new updated array, hence its runtime is O(n).</p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<h2>3. Reverse  Iterator</h2>\n\n<blockquote>\n  <p><em>LinkedList</em> can be iterated in reverse direction using descendingIterator() while </p>\n  \n  <p>there is no descendingIterator() in <em>ArrayList</em> , so we need to write our own code to iterate over the ArrayList in reverse direction.</p>\n</blockquote>\n\n<hr>\n\n<h2>4. Initial Capacity</h2>\n\n<blockquote>\n  <p>If the constructor  is not overloaded, then <em>ArrayList</em> creates an empty list of initial capacity 10, while </p>\n  \n  <p><em>LinkedList</em>  only constructs the empty list without any initial capacity.</p>\n</blockquote>\n\n<hr>\n\n<h2>5. Memory Overhead</h2>\n\n<blockquote>\n  <p>Memory overhead in <em>LinkedList</em> is more as compared to ArrayList as a node in LinkedList needs to maintain the addresses of the next and previous node. While </p>\n  \n  <p>In <em>ArrayList</em>  each index only holds the actual object(data).</p>\n</blockquote>\n\n<hr>\n\n<p><a href=\"http://javahungry.blogspot.com/2015/04/difference-between-arraylist-and-linkedlist-in-java-example.html\" rel=\"noreferrer\">Source</a></p>\n"},{"owner":{"reputation":2055,"user_id":2032701,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/0abc2879537f0c8fbbd8d97dc72f5ae0?s=128&d=identicon&r=PG","display_name":"Ruslan","link":"https://stackoverflow.com/users/2032701/ruslan"},"comment_count":0,"is_accepted":false,"score":65,"last_activity_date":1493115786,"last_edit_date":1493115786,"creation_date":1488365263,"answer_id":42529652,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>Joshua Bloch, the author of LinkedList:</p>\n\n<blockquote>\n  <p>Does anyone actually use LinkedList?  I wrote it, and I never use it.</p>\n</blockquote>\n\n<p>Link: <a href=\"https://twitter.com/joshbloch/status/583813919019573248\" rel=\"noreferrer\">https://twitter.com/joshbloch/status/583813919019573248</a></p>\n\n<p>I'm sorry for the answer for being not that informative as the other answers, but I thought it would be the most interesting and self-explanatory.</p>\n"},{"owner":{"reputation":1289,"user_id":5974780,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/db181de522cb3dcfcddaeb95fa2925a3?s=128&d=identicon&r=PG&f=1","display_name":"Nesan Mano","link":"https://stackoverflow.com/users/5974780/nesan-mano"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1508551123,"last_edit_date":1508551123,"creation_date":1494871590,"answer_id":43986093,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>ArrayList and LinkedList have their own pros and cons.</p>\n\n<p>ArrayList uses contiguous memory address compared to LinkedList which uses pointers toward the next node. So when you want to look up an element in an ArrayList is faster than doing n iterations with LinkedList.</p>\n\n<p>On the other hand, insertion and deletion in a LinkedList are much easier because you just have to change the pointers whereas an ArrayList implies the use of shift operation for any insertion or deletion.</p>\n\n<p>If you have frequent retrieval operations in your app use an ArrayList. If you have frequent insertion and deletion use a LinkedList. </p>\n"},{"owner":{"reputation":206,"user_id":8638323,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/409519eecd1e72d7c5bfee75f29681bc?s=128&d=identicon&r=PG&f=1","display_name":"Randhawa","link":"https://stackoverflow.com/users/8638323/randhawa"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1519163479,"creation_date":1519163479,"answer_id":48894817,"question_id":322715,"content_license":"CC BY-SA 3.0","body":"<p>ArrayList extends AbstractList and implements the List Interface. ArrayList is dynamic array.<br>It can be said that it was basically created to overcome the drawbacks of arrays<br><br>\nThe LinkedList class extends AbstractSequentialList and implements List,Deque, and Queue interface.\n<br>Performance<br>\n<code>arraylist.get()</code> is  O(1) whereas <code>linkedlist.get()</code> is O(n) <br>\n<code>arraylist.add()</code> is  O(1) and <code>linkedlist.add()</code> is 0(1)<br>\n<code>arraylist.contains()</code> is O(n) and<code>linkedlist.contains()</code> is O(n) <br>\n<code>arraylist.next()</code> is O(1) and <code>linkedlist.next()</code> is O(1)<br>\n<code>arraylist.remove()</code> is O(n) whereas <code>linkedlist.remove()</code> is O(1)<br>\nIn arraylist<br><code>iterator.remove()</code> is O(n)<br> whereas In linkedlist <br><code>iterator.remove()</code>is O(1) </p>\n"},{"comments":[{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":1,"creation_date":1546021984,"post_id":50739053,"comment_id":94763313,"content_license":"CC BY-SA 4.0","body":"I think this is the best stated answer of the entire group here.  It&#39;s accurate and informative.  I would suggest changing the last line--at the end add &quot;aside from queues&quot; which are very important structures that really don&#39;t make sense for a linked list at all."}],"owner":{"reputation":71,"user_id":9902873,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-9uc1Jw304fQ/AAAAAAAAAAI/AAAAAAAAAAc/aB1FR8K019w/photo.jpg?sz=128","display_name":"Anjali Suman","link":"https://stackoverflow.com/users/9902873/anjali-suman"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1599238384,"last_edit_date":1599238384,"creation_date":1528367621,"answer_id":50739053,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p><strong>1) Underlying Data Structure</strong></p>\n<p>The first difference between ArrayList and LinkedList comes with the fact that ArrayList is backed by Array while LinkedList is backed by LinkedList. This will lead to further differences in performance.</p>\n<p><strong>2) LinkedList implements Deque</strong></p>\n<p>Another difference between ArrayList and LinkedList is that apart from the List interface, LinkedList also implements Deque interface, which provides first in first out operations for <code>add()</code> and <code>poll()</code> and several other Deque functions. 3) Adding elements in ArrayList Adding element in ArrayList is O(1) operation if it doesn't trigger re-size of Array, in which case it becomes O(log(n)), On the other hand, appending an element in LinkedList is O(1) operation, as it doesn't require any navigation.</p>\n<p><strong>4) Removing an element from a position</strong></p>\n<p>In order to remove an element from a particular index e.g. by calling <code>remove(index)</code>, ArrayList performs a copy operation which makes it close to O(n) while LinkedList needs to traverse to that point which also makes it O(n/2), as it can traverse from either direction based upon proximity.</p>\n<p><strong>5) Iterating over ArrayList or LinkedList</strong></p>\n<p>Iteration is the O(n) operation for both LinkedList and ArrayList where n is a number of an element.</p>\n<p><strong>6) Retrieving element from a position</strong></p>\n<p>The <code>get(index)</code> operation is O(1) in ArrayList while its O(n/2) in LinkedList, as it needs to traverse till that entry. Though, in Big O notation O(n/2) is just O(n) because we ignore constants there.</p>\n<p><strong>7) Memory</strong></p>\n<p>LinkedList uses a wrapper object, Entry, which is a static nested class for storing data and two nodes next and previous while ArrayList just stores data in Array.</p>\n<p>So memory requirement seems less in the case of ArrayList than LinkedList except for the case where Array performs the re-size operation when it copies content from one Array to another.</p>\n<p>If Array is large enough it may take a lot of memory at that point and trigger Garbage collection, which can slow response time.</p>\n<p>From all the above differences between ArrayList vs LinkedList, It looks ArrayList is the better choice than LinkedList in almost all cases, except when you do a frequent <code>add()</code> operation than <code>remove()</code>, or <code>get()</code>.</p>\n<p>It's easier to modify a linked list than ArrayList, especially if you are adding or removing elements from start or end because linked list internally keeps references of those positions and they are accessible in O(1) time.</p>\n<p>In other words, you don't need to traverse through the linked list to reach the position where you want to add elements, in that case, addition becomes O(n) operation. For example, inserting or deleting an element in the middle of a linked list.</p>\n<p>In my opinion, use ArrayList over LinkedList for most of the practical purpose in Java.</p>\n"},{"owner":{"reputation":9718,"user_id":1490322,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/xeCew.png?s=128&g=1","display_name":"Jose Martinez","link":"https://stackoverflow.com/users/1490322/jose-martinez"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1583259060,"last_edit_date":1583259060,"creation_date":1533408726,"answer_id":51688647,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>One of the tests I saw on here only conducts the test once.  But what I have noticed is that you need to run these tests many times and eventually their times will converge.  Basically the JVM needs to warm up.  For my particular use case I needed to add/remove items to a list that grows to about 500 items.  In my tests <code>LinkedList</code> came out faster, with <code>LinkedList</code> coming in around 50,000 NS and <code>ArrayList</code> coming in at around 90,000 NS... give or take.  See the code below.</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Long&gt; times = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 100; i++) {\n        times.add(doIt());\n    }\n    System.out.println(\"avg = \" + (times.stream().mapToLong(x -&gt; x).average()));\n}\n\nstatic long doIt() {\n    long start = System.nanoTime();\n    List&lt;Object&gt; list = new LinkedList&lt;&gt;();\n    //uncomment line below to test with ArrayList\n    //list = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 500; i++) {\n        list.add(i);\n    }\n\n    Iterator it = list.iterator();\n    while (it.hasNext()) {\n        it.next();\n        it.remove();\n    }\n    long end = System.nanoTime();\n    long diff = end - start;\n    //uncomment to see the JVM warmup and get faster for the first few iterations\n    //System.out.println(diff)\n    return diff;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1546021606,"post_id":52885253,"comment_id":94763196,"content_license":"CC BY-SA 4.0","body":"I wouldn&#39;t call a queue unique or extreme! A fifo queue is much easier implemented on a LinkedList instead of an ArrayList.  It&#39;s actually a nightmare on an ArrayList as you have to track your own start, stop and do your own reallocating, you might as well use an array, but a Linked List IS a fifo.  I&#39;m not sure about Java&#39;s implementation, but a LinkedList can do O(1) for both queue and dequeue operations (Requires a special pointer to the tail element for the remove, which I assume java has but I haven&#39;t double-checked.)"},{"owner":{"reputation":4955,"user_id":329496,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/92ab9af5b2597efeee9eab0f0d782409?s=128&d=identicon&r=PG","display_name":"simbo1905","link":"https://stackoverflow.com/users/329496/simbo1905"},"edited":false,"score":1,"creation_date":1613824246,"post_id":52885253,"comment_id":117198406,"content_license":"CC BY-SA 4.0","body":"inserting into the middle of a <code>ArrayList</code> array uses the native method  <code>java.lang.System.arraycopy()</code> which is written in C++ in the OpenJDK. so while in theory a <code>LinkedList</code> has less work to do in practice there are so many extra-linguistic mechanisms that make &quot;Big O&quot; largely irrelevant. Particularly how cache friendly things are as per this excellent answer."}],"owner":{"reputation":7770,"user_id":3834036,"user_type":"registered","profile_image":"https://i.stack.imgur.com/PEZNI.png?s=128&g=1","display_name":"Lior Bar-On","link":"https://stackoverflow.com/users/3834036/lior-bar-on"},"comment_count":2,"is_accepted":false,"score":40,"last_activity_date":1539918379,"last_edit_date":1539918379,"creation_date":1539917596,"answer_id":52885253,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p><strong>TL;DR</strong> due to modern computer architecture, <code>ArrayList</code> will be significantly more efficient for nearly any possible use-case - and therefore <code>LinkedList</code> should be avoided except some very unique and extreme cases.</p>\n\n<hr>\n\n<p>In theory, LinkedList has an O(1) for the <code>add(E element)</code></p>\n\n<p>Also adding an element in the mid of a list should be very efficient.</p>\n\n<p>Practice is very different, as LinkedList is a <strong>Cache Hostile</strong> Data structure. From performance POV - there are very little cases where <code>LinkedList</code> could be better performing than the <em>Cache-friendly</em> <code>ArrayList</code>.</p>\n\n<p>Here are results of a benchmark testing inserting elements in random locations. As you can see - the array list if much more efficient, although in theory each insert in the middle of the list will require \"move\" the <em>n</em> later elements of the array (lower values are better):</p>\n\n<p><a href=\"https://i.stack.imgur.com/edAd8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/edAd8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Working on a later generation hardware (bigger, more efficient caches) - the results are even more conclusive:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XtdBP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XtdBP.png\" alt=\"enter image description here\"></a></p>\n\n<p>LinkedList takes much more time to accomplish the same job. <a href=\"https://kjellkod.wordpress.com/2012/08/08/java-galore-linkedlist-vs-arraylist-vs-dynamicintarray/\" rel=\"noreferrer\">source</a> <a href=\"https://ideone.com/JOJ05\" rel=\"noreferrer\">Source Code</a></p>\n\n<p>There are two main reasons for this:</p>\n\n<ol>\n<li><p><strong>Mainly</strong> - that the nodes of the <code>LinkedList</code> are scattered randomly across the memory. RAM (\"Random Access Memory\") isn't really random and blocks of memory need to be fetched to cache. This operation takes time, and when such fetches happen frequently - the memory pages in the cache need to be replaced all the time -> Cache misses -> Cache is not efficient.\n<code>ArrayList</code> elements are stored on continuous memory - which is exactly what the modern CPU architecture is optimizing for.</p></li>\n<li><p><strong>Secondary</strong> <code>LinkedList</code> required to hold back/forward pointers, which means 3 times the memory consumption per value stored compared to <code>ArrayList</code>.</p></li>\n</ol>\n\n<p><a href=\"https://github.com/apache/orc/blob/master/java/core/src/java/org/apache/orc/impl/DynamicIntArray.java\" rel=\"noreferrer\">DynamicIntArray</a>, btw, is a custom ArrayList implementation holding <code>Int</code> (primitive type) and not Objects - hence all data is really stored adjacently - hence even more efficient.</p>\n\n<p>A key elements to remember is that the cost of fetching memory block, is more significant than the cost accessing a single memory cell. That's why reader 1MB of sequential memory is up to x400 times faster than reading this amount of data from different blocks of memory:</p>\n\n<pre><code>Latency Comparison Numbers (~2012)\n----------------------------------\nL1 cache reference                           0.5 ns\nBranch mispredict                            5   ns\nL2 cache reference                           7   ns                      14x L1 cache\nMutex lock/unlock                           25   ns\nMain memory reference                      100   ns                      20x L2 cache, 200x L1 cache\nCompress 1K bytes with Zippy             3,000   ns        3 us\nSend 1K bytes over 1 Gbps network       10,000   ns       10 us\nRead 4K randomly from SSD*             150,000   ns      150 us          ~1GB/sec SSD\nRead 1 MB sequentially from memory     250,000   ns      250 us\nRound trip within same datacenter      500,000   ns      500 us\nRead 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory\nDisk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip\nRead 1 MB sequentially from disk    20,000,000   ns   20,000 us   20 ms  80x memory, 20X SSD\nSend packet CA-&gt;Netherlands-&gt;CA    150,000,000   ns  150,000 us  150 ms\n</code></pre>\n\n<p>Source: <a href=\"https://gist.github.com/jboner/2841832\" rel=\"noreferrer\">Latency Numbers Every Programmer Should Know</a></p>\n\n<p>Just to make the point even clearer, please check the benchmark of adding elements to the beginning of the list. This is a use-case where, in-theory, the <code>LinkedList</code> should really shine, and <code>ArrayList</code> should present poor or even worse-case results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2EygL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2EygL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note: this is a benchmark of the C++ Std lib, but my previous experience shown the C++ and Java results are very similar. <a href=\"https://ideone.com/DDEJF\" rel=\"noreferrer\">Source Code</a></p>\n\n<p>Copying a sequential bulk of memory is an operation optimized by the modern CPUs - changing theory and actually making, again, <code>ArrayList</code>/<code>Vector</code> much more efficient</p>\n\n<hr>\n\n<p>Credits: All benchmarks posted here are created by <a href=\"https://www.linkedin.com/in/kjellkod/\" rel=\"noreferrer\">Kjell HedstrÃ¶m</a>. Even more data can be found on <a href=\"https://kjellkod.wordpress.com/\" rel=\"noreferrer\">his blog</a></p>\n"},{"comments":[{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":1,"creation_date":1550773499,"post_id":54181945,"comment_id":96404189,"content_license":"CC BY-SA 4.0","body":"The ArrayDeque balances things a bit more towards the arrays since insert/remove front/back are all O(1) the only thing Linked List still wins at is adding/removing while traversing (the Iterator operations)."}],"owner":{"reputation":6424,"user_id":3647002,"user_type":"registered","accept_rate":47,"profile_image":"https://i.stack.imgur.com/raqLI.png?s=128&g=1","display_name":"Gayan Weerakutti","link":"https://stackoverflow.com/users/3647002/gayan-weerakutti"},"comment_count":1,"is_accepted":false,"score":23,"last_activity_date":1550473681,"last_edit_date":1550473681,"creation_date":1547470452,"answer_id":54181945,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>I usually use one over the other based on the time complexities of the operations that I'd perform on that particular List.                                                                  </p>\n\n<pre><code>|---------------------|---------------------|--------------------|------------|\n|      Operation      |     ArrayList       |     LinkedList     |   Winner   |\n|---------------------|---------------------|--------------------|------------|\n|     get(index)      |       O(1)          |         O(n)       | ArrayList  |\n|                     |                     |  n/4 steps in avg  |            |\n|---------------------|---------------------|--------------------|------------|\n|      add(E)         |       O(1)          |         O(1)       | LinkedList |\n|                     |---------------------|--------------------|            |\n|                     | O(n) in worst case  |                    |            |\n|---------------------|---------------------|--------------------|------------|\n|    add(index, E)    |       O(n)          |         O(n)       | LinkedList |\n|                     |     n/2 steps       |      n/4 steps     |            |\n|                     |---------------------|--------------------|            |\n|                     |                     |  O(1) if index = 0 |            |\n|---------------------|---------------------|--------------------|------------|\n|  remove(index, E)   |       O(n)          |         O(n)       | LinkedList |\n|                     |---------------------|--------------------|            |\n|                     |     n/2 steps       |      n/4 steps     |            |\n|---------------------|---------------------|--------------------|------------|\n|  Iterator.remove()  |       O(n)          |         O(1)       | LinkedList |\n|  ListIterator.add() |                     |                    |            |\n|---------------------|---------------------|--------------------|------------|\n\n\n|--------------------------------------|-----------------------------------|\n|              ArrayList               |            LinkedList             |\n|--------------------------------------|-----------------------------------|\n|     Allows fast read access          |   Retrieving element takes O(n)   |\n|--------------------------------------|-----------------------------------|\n|   Adding an element require shifting | o(1) [but traversing takes time]  |\n|       all the later elements         |                                   |\n|--------------------------------------|-----------------------------------|\n|   To add more elements than capacity |\n|    new array need to be allocated    |\n|--------------------------------------|\n</code></pre>\n"},{"owner":{"reputation":1027,"user_id":5870336,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/21a411552aec6db6c9f636258ced2d4c?s=128&d=identicon&r=PG&f=1","display_name":"Sina Madani","link":"https://stackoverflow.com/users/5870336/sina-madani"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1570666736,"last_edit_date":1570666736,"creation_date":1570666147,"answer_id":58313753,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>My rule of thumb is if I need a <code>Collection</code> (i.e. doesn't need to be a <code>List</code>) then use <code>ArrayList</code> if you know the size in advance, or can know the size confidently, or know that it won't vary much. If you need random access (i.e. you use <code>get(index)</code>) then avoid <code>LinkedList</code>. Basically, use <code>LinkedList</code> only if you don't need index access and don't know the (approximate) size of the collection you're allocating. Also if you're going to be making lots of additions and removals (again through the <code>Collection</code> interface) then LinkedList may be preferable.</p>\n"},{"comments":[{"owner":{"reputation":327,"user_id":9451867,"user_type":"registered","profile_image":"https://i.stack.imgur.com/NZmtJ.jpg?s=128&g=1","display_name":"Doga Oruc","link":"https://stackoverflow.com/users/9451867/doga-oruc"},"edited":false,"score":0,"creation_date":1602145790,"post_id":62260383,"comment_id":113629464,"content_license":"CC BY-SA 4.0","body":"<code>Vector</code> is slower compared to <code>ArrayList</code> because <code>Vector</code> is thread-safe. The best practice is not using a <code>Vector</code> unless thread safety is needed. <code>Vector</code> doubles its size by default, <code>ArrayList</code> multiplies its size by 3/2. See:<a href=\"https://stackoverflow.com/questions/17471913/java-vector-vs-arraylist-performance-test\" title=\"java vector vs arraylist performance test\">stackoverflow.com/questions/17471913/&hellip;</a>"}],"owner":{"reputation":15,"user_id":5047682,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/95b503d71430c6cba89c2e817a4db518?s=128&d=identicon&r=PG&f=1","display_name":"Boris Fain","link":"https://stackoverflow.com/users/5047682/boris-fain"},"comment_count":1,"is_accepted":false,"score":-3,"last_activity_date":1591613469,"creation_date":1591613469,"answer_id":62260383,"question_id":322715,"content_license":"CC BY-SA 4.0","body":"<p>First of all use Vector instead ArrayList because you can overrite insureCapasity method ,\nin ArrayList is private and add 1.5 size of current array <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Vector.html#ensureCapacity-int-</a></p>\n\n<p>in many case it can be better that linkedList, the las has big advantage one you insert data with high freqency so size of you list changes very fast and you can't allocate size for number elements. \nIn the theory you can get error like not \"enough memory\"  but  in modern computers you have 16G and swaping disk, so if you list is billoins elements you can fail, comparing 15-20 years ago.  </p>\n"}],"owner":{"reputation":35621,"user_id":41200,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/625c890e8df6e3310dc357810eab83e8?s=128&d=identicon&r=PG","display_name":"sdellysse","link":"https://stackoverflow.com/users/41200/sdellysse"},"comment_count":2,"is_answered":true,"view_count":1129288,"protected_date":1304220057,"accepted_answer_id":322742,"answer_count":33,"score":3263,"last_activity_date":1613831177,"creation_date":1227749795,"last_edit_date":1536677623,"question_id":322715,"link":"https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist-in-java","title":"When to use LinkedList over ArrayList in Java?","body":"<p>I've always been one to simply use:</p>\n\n<pre><code>List&lt;String&gt; names = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>I use the interface as the type name for <em>portability</em>, so that when I ask questions such as these I can rework my code.  </p>\n\n<p>When should <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/LinkedList.html\" rel=\"noreferrer\"><code>LinkedList</code></a> be used over <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList</code></a> and vice-versa?</p>\n"},{"tags":["java","string","int","type-conversion"],"comments":[{"owner":{"reputation":1854,"user_id":545353,"user_type":"registered","profile_image":"https://i.stack.imgur.com/o0daF.png?s=128&g=1","display_name":"Pavel Molchanov","link":"https://stackoverflow.com/users/545353/pavel-molchanov"},"edited":false,"score":2,"creation_date":1529529984,"post_id":5585779,"comment_id":101966555,"content_license":"CC BY-SA 4.0","body":"By the way, be aware that if the string is null, the call: int i = Integer.parseInt(null); throws NumberFormatException, not NullPointerException."},{"owner":{"reputation":136346,"user_id":415448,"user_type":"registered","accept_rate":33,"profile_image":"https://i.stack.imgur.com/P2vVZ.png?s=128&g=1","display_name":"Michael Kay","link":"https://stackoverflow.com/users/415448/michael-kay"},"edited":false,"score":7,"creation_date":1565087362,"post_id":5585779,"comment_id":101232647,"content_license":"CC BY-SA 4.0","body":"I&#39;m a little surprised that this question should be so highly rated when an important part of the specification is missing: what should happen if the string DOESN&#39;T contain only digits? For example, many of the answers will happily parse &quot;-1&quot; and return -1, but we don&#39;t know if that&#39;s acceptable."}],"answers":[{"comments":[{"owner":{"reputation":1045,"user_id":4024628,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Xc5J8.jpg?s=128&g=1","display_name":"Allison","link":"https://stackoverflow.com/users/4024628/allison"},"edited":false,"score":30,"creation_date":1516181860,"post_id":5585800,"comment_id":83580108,"content_license":"CC BY-SA 3.0","body":"In addition to catching a NumberFormatException, the user should also be careful about the length of the strings they&#39;re passing in; if they&#39;re long enough to overflow an integer, they might want to consider using Long::parseLong instead."},{"owner":{"reputation":1131,"user_id":682107,"user_type":"registered","accept_rate":97,"profile_image":"https://www.gravatar.com/avatar/3255cbb2aa0d949de9f1da8c82ead4b3?s=128&d=identicon&r=PG&f=1","display_name":"Letholdrus","link":"https://stackoverflow.com/users/682107/letholdrus"},"reply_to_user":{"reputation":1045,"user_id":4024628,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Xc5J8.jpg?s=128&g=1","display_name":"Allison","link":"https://stackoverflow.com/users/4024628/allison"},"edited":false,"score":6,"creation_date":1516648706,"post_id":5585800,"comment_id":83765178,"content_license":"CC BY-SA 3.0","body":"@Allison especially if using BIGINT field in a PostgreSQL auto incremented primary key field for instance. Much safer to use long"},{"owner":{"reputation":639,"user_id":3293515,"user_type":"registered","profile_image":"https://i.stack.imgur.com/wi11m.jpg?s=128&g=1","display_name":"JPRLCol","link":"https://stackoverflow.com/users/3293515/jprlcol"},"edited":false,"score":7,"creation_date":1516911434,"post_id":5585800,"comment_id":83895271,"content_license":"CC BY-SA 3.0","body":"You could check if the string is a Number first: <a href=\"https://stackoverflow.com/questions/1102891/how-to-check-if-a-string-is-numeric-in-java\" title=\"how to check if a string is numeric in java\">stackoverflow.com/questions/1102891/&hellip;</a>"},{"owner":{"reputation":439,"user_id":820345,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c3d8b7eaf9dd1e1e56faaffe79517350?s=128&d=identicon&r=PG","display_name":"lokesh","link":"https://stackoverflow.com/users/820345/lokesh"},"edited":false,"score":0,"creation_date":1533726055,"post_id":5585800,"comment_id":90449673,"content_license":"CC BY-SA 4.0","body":"This method also throws exception when string is not a parsable integer in base 10. Use overloaded method to work in other bases. e.g. Integer.parseInt(&quot;1001&quot;, 8);  for base 8. <a href=\"https://howtodoinjava.com/java/convert-string-to-int/\" rel=\"nofollow noreferrer\">Source</a>."},{"owner":{"reputation":303,"user_id":5670939,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5a898828c0490facb1bf69c2e78bb8e6?s=128&d=identicon&r=PG&f=1","display_name":"Radioactive","link":"https://stackoverflow.com/users/5670939/radioactive"},"edited":false,"score":0,"creation_date":1540569003,"post_id":5585800,"comment_id":92928033,"content_license":"CC BY-SA 4.0","body":"If you use Integer.parseInt prepare to put it inside a try catch block since this will throw are NumberFormat or InputMismatch Exception if it is not a valid number. Then in that case have proper exception handling at the catch block level. Otherwise as mentioned below you can also use the Integer class and then convert it to int."},{"owner":{"reputation":381,"user_id":1997399,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/62b6a8b075d843b55d494d09fe1e0543?s=128&d=identicon&r=PG","display_name":"Kunda","link":"https://stackoverflow.com/users/1997399/kunda"},"edited":false,"score":1,"creation_date":1574085906,"post_id":5585800,"comment_id":104094247,"content_license":"CC BY-SA 4.0","body":"Since NumberFormatException is an instance of a RuntimeException, you can and probably should handle it - but you definitely don&#39;t <i>have</i> to!"},{"owner":{"reputation":381,"user_id":1997399,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/62b6a8b075d843b55d494d09fe1e0543?s=128&d=identicon&r=PG","display_name":"Kunda","link":"https://stackoverflow.com/users/1997399/kunda"},"edited":false,"score":2,"creation_date":1574086508,"post_id":5585800,"comment_id":104094589,"content_license":"CC BY-SA 4.0","body":"Also, while using Guava in combination with Java 8&#39;s Optional can be powerful, it&#39;s probably an overkill and not as concise as using <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.9/org/apache/commons/lang3/math/NumberUtils.html#toInt-java.lang.String-int-\" rel=\"nofollow noreferrer\">NumberUtils.toInt(String str, int defaultValue)</a> from the Apache <a href=\"https://commons.apache.org/proper/commons-lang\" rel=\"nofollow noreferrer\">commons-lang</a> library: <code>int foo = NumberUtils.toInt(myString, 0);</code>"},{"owner":{"reputation":259,"user_id":6278133,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-UAc4wivY8S8/AAAAAAAAAAI/AAAAAAAAD5g/qPFS_fsRglA/photo.jpg?sz=128","display_name":"Firzok Nadeem","link":"https://stackoverflow.com/users/6278133/firzok-nadeem"},"edited":false,"score":0,"creation_date":1592244658,"post_id":5585800,"comment_id":110350477,"content_license":"CC BY-SA 4.0","body":"For this kinds of conversions, I usually use this site <a href=\"https://www.converttypes.com/\" rel=\"nofollow noreferrer\">converttypes.com</a>"},{"owner":{"reputation":226,"user_id":2526181,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5c7b68d27cd1b5f3aeee15876eaae7d2?s=128&d=identicon&r=PG","display_name":"bdsl","link":"https://stackoverflow.com/users/2526181/bdsl"},"reply_to_user":{"reputation":381,"user_id":1997399,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/62b6a8b075d843b55d494d09fe1e0543?s=128&d=identicon&r=PG","display_name":"Kunda","link":"https://stackoverflow.com/users/1997399/kunda"},"edited":false,"score":0,"creation_date":1596654711,"post_id":5585800,"comment_id":111884132,"content_license":"CC BY-SA 4.0","body":"@Kunda I was about to make the same comment. And you should only handle it if you can do something sensible with it. Letting the program crash on malformed input, or letting a framework catch the exception is often likely to be better than picking an arbitrary default integer."},{"owner":{"reputation":107659,"user_id":179850,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/6b2c535fac79e482b71f15de561f55ca?s=128&d=identicon&r=PG","display_name":"Gray","link":"https://stackoverflow.com/users/179850/gray"},"edited":false,"score":1,"creation_date":1609706706,"post_id":5585800,"comment_id":115900735,"content_license":"CC BY-SA 4.0","body":"I don&#39;t like the <code>foo = 0</code> in the catch block, even with your explanation.  I worry that junior developers are going to cut&amp;paste your code and miss the comment saying that it&#39;s typically a bad idea."},{"owner":{"reputation":63,"user_id":7563004,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/218fe30ef22362effac4b32e33d06f4b?s=128&d=identicon&r=PG","display_name":"Emerald Cottet","link":"https://stackoverflow.com/users/7563004/emerald-cottet"},"edited":false,"score":0,"creation_date":1611134330,"post_id":5585800,"comment_id":116349895,"content_license":"CC BY-SA 4.0","body":"For my purpose I used <i>java.lang.Integer instead</i> of <i>int</i> and I replaced <code>foo = 0</code> by <code>foo = null</code> in the catch block. (if it can help someone a day)"}],"owner":{"reputation":110312,"user_id":29995,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/ffffa52ae8108fdeb2559d804051556e?s=128&d=identicon&r=PG","display_name":"Rob Hruska","link":"https://stackoverflow.com/users/29995/rob-hruska"},"comment_count":11,"is_accepted":true,"score":4245,"last_activity_date":1598023826,"last_edit_date":1598023826,"creation_date":1302200981,"answer_id":5585800,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<pre><code>String myString = &quot;1234&quot;;\nint foo = Integer.parseInt(myString);\n</code></pre>\n<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.String)\" rel=\"noreferrer\">Java documentation</a> you'll notice the &quot;catch&quot; is that this function can throw a <code>NumberFormatException</code>, which of course you have to handle:</p>\n<pre><code>int foo;\ntry {\n   foo = Integer.parseInt(myString);\n}\ncatch (NumberFormatException e)\n{\n   foo = 0;\n}\n</code></pre>\n<p>(This treatment defaults a malformed number to <code>0</code>, but you can do something else if you like.)</p>\n<p>Alternatively, you can use an <code>Ints</code> method from the Guava library, which in combination with Java 8's <code>Optional</code>, makes for a powerful and concise way to convert a string into an int:</p>\n<pre><code>import com.google.common.primitives.Ints;\n\nint foo = Optional.ofNullable(myString)\n .map(Ints::tryParse)\n .orElse(0)\n</code></pre>\n"},{"comments":[{"owner":{"reputation":7654,"user_id":150884,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/5vmQJ.jpg?s=128&g=1","display_name":"hertzsprung","link":"https://stackoverflow.com/users/150884/hertzsprung"},"edited":false,"score":81,"creation_date":1368952700,"post_id":5585876,"comment_id":23918423,"content_license":"CC BY-SA 3.0","body":"For the differences between the two methods, see <a href=\"http://stackoverflow.com/questions/508665/difference-between-parseint-and-valueof-in-java\">this question</a>"},{"owner":{"reputation":51630,"user_id":482717,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/82a1f0fb2478f517c945a53b697dd290?s=128&d=identicon&r=PG","display_name":"Paul Verest","link":"https://stackoverflow.com/users/482717/paul-verest"},"edited":false,"score":21,"creation_date":1414486544,"post_id":5585876,"comment_id":41821241,"content_license":"CC BY-SA 3.0","body":"<code>valueOf</code> method is just <code>return valueOf(parseInt(string));</code>"},{"owner":{"reputation":59437,"user_id":4117728,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1","display_name":"largest_prime_is_463035818","link":"https://stackoverflow.com/users/4117728/largest-prime-is-463035818"},"reply_to_user":{"reputation":51630,"user_id":482717,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/82a1f0fb2478f517c945a53b697dd290?s=128&d=identicon&r=PG","display_name":"Paul Verest","link":"https://stackoverflow.com/users/482717/paul-verest"},"edited":false,"score":0,"creation_date":1535978645,"post_id":5585876,"comment_id":91249987,"content_license":"CC BY-SA 4.0","body":"@PaulVerest i dont get it... <code>valueOf</code> calls itself recursively?"},{"owner":{"reputation":779,"user_id":5318121,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/65bccf833e50238aec64044e252f7676?s=128&d=identicon&r=PG&f=1","display_name":"PhilipRoman","link":"https://stackoverflow.com/users/5318121/philiproman"},"reply_to_user":{"reputation":59437,"user_id":4117728,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1","display_name":"largest_prime_is_463035818","link":"https://stackoverflow.com/users/4117728/largest-prime-is-463035818"},"edited":false,"score":2,"creation_date":1541004315,"post_id":5585876,"comment_id":93073628,"content_license":"CC BY-SA 4.0","body":"@user463035818 valueOf has two overloads - for int and String. <code>valueOf(String)</code> is implemented by first parsing the String to an int using <code>parseInt(String)</code> and then wrapping that int in an Integer by using <code>valueOf(int)</code>. No recursion here because <code>valueOf(String)</code> and <code>valueOf(int)</code> are two completely different functions, even if they have the same name."}],"owner":{"reputation":23682,"user_id":574799,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/9jy55.jpg?s=128&g=1","display_name":"lukastymo","link":"https://stackoverflow.com/users/574799/lukastymo"},"comment_count":4,"is_accepted":false,"score":716,"last_activity_date":1435695343,"last_edit_date":1435695343,"creation_date":1302201400,"answer_id":5585876,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>For example, here are two ways:</p>\n\n<pre><code>Integer x = Integer.valueOf(str);\n// or\nint y = Integer.parseInt(str);\n</code></pre>\n\n<p>There is a slight difference between these methods: </p>\n\n<ul>\n<li><code>valueOf</code> returns a new or cached instance of <code>java.lang.Integer</code></li>\n<li><code>parseInt</code> returns primitive <code>int</code>. </li>\n</ul>\n\n<p>The same is for all cases: <code>Short.valueOf</code>/<code>parseShort</code>, <code>Long.valueOf</code>/<code>parseLong</code>, etc.</p>\n"},{"comments":[{"owner":{"reputation":59437,"user_id":4117728,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1","display_name":"largest_prime_is_463035818","link":"https://stackoverflow.com/users/4117728/largest-prime-is-463035818"},"edited":false,"score":0,"creation_date":1526457687,"post_id":16293980,"comment_id":87746900,"content_license":"CC BY-SA 4.0","body":"how can I parse &quot;26263Hello&quot; ? I want to extract 26263 in that case"},{"owner":{"reputation":1949,"user_id":4178262,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-MVZ9ZR1BFos/AAAAAAAAAAI/AAAAAAAAAAA/aEP8yOumPbw/photo.jpg?sz=128","display_name":"Mark Stewart","link":"https://stackoverflow.com/users/4178262/mark-stewart"},"reply_to_user":{"reputation":59437,"user_id":4117728,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1","display_name":"largest_prime_is_463035818","link":"https://stackoverflow.com/users/4117728/largest-prime-is-463035818"},"edited":false,"score":1,"creation_date":1528474613,"post_id":16293980,"comment_id":88536945,"content_license":"CC BY-SA 4.0","body":"@user463035818 - See <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/package-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/regex/&hellip;</a> - a regular expresssion pattern of <code>&quot;([0-9]+)&quot;</code> will &quot;capture&quot; the first sequence of one or more digits one through nine.  Look at the <code>Matcher</code> class in that package."}],"owner":{"reputation":3491,"user_id":306711,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1056d852b1a848d4fe3fee601b059da7?s=128&d=identicon&r=PG","display_name":"Ali Akdurak","link":"https://stackoverflow.com/users/306711/ali-akdurak"},"comment_count":2,"is_accepted":false,"score":251,"last_activity_date":1455665736,"last_edit_date":1455665736,"creation_date":1367304895,"answer_id":16293980,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>Well, a very important point to consider is that the Integer parser throws NumberFormatException as stated in <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29\" rel=\"noreferrer\">Javadoc</a>. </p>\n\n<pre><code>int foo;\nString StringThatCouldBeANumberOrNot = \"26263Hello\"; //will throw exception\nString StringThatCouldBeANumberOrNot2 = \"26263\"; //will not throw exception\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot);\n} catch (NumberFormatException e) {\n      //Will Throw exception!\n      //do something! anything to handle the exception.\n}\n\ntry {\n      foo = Integer.parseInt(StringThatCouldBeANumberOrNot2);\n} catch (NumberFormatException e) {\n      //No problem this time, but still it is good practice to care about exceptions.\n      //Never trust user input :)\n      //Do something! Anything to handle the exception.\n}\n</code></pre>\n\n<p>It is important to handle this exception when trying to get integer values from split arguments or dynamically parsing something.</p>\n"},{"comments":[{"owner":{"reputation":434,"user_id":1365879,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/0161c7599073ce4de07dc6603469540a?s=128&d=identicon&r=PG","display_name":"yohm","link":"https://stackoverflow.com/users/1365879/yohm"},"edited":false,"score":23,"creation_date":1413949396,"post_id":18731580,"comment_id":41632214,"content_license":"CC BY-SA 3.0","body":"What if the input is greater than 2^32? What if the input contains non-numeric characters?"},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":89,"creation_date":1451621777,"post_id":18731580,"comment_id":56849715,"content_license":"CC BY-SA 3.0","body":"One of the things a programmer must learn on joining the workforce, if not before, is never to re-invent wheels.  This may be a fun exercise, but don&#39;t expect your code to pass code review if you do this kind of thing in a commercial setting."},{"owner":{"reputation":6951,"user_id":1290668,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/7S0Hp.jpg?s=128&g=1","display_name":"Billz","link":"https://stackoverflow.com/users/1290668/billz"},"reply_to_user":{"reputation":434,"user_id":1365879,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/0161c7599073ce4de07dc6603469540a?s=128&d=identicon&r=PG","display_name":"yohm","link":"https://stackoverflow.com/users/1365879/yohm"},"edited":false,"score":0,"creation_date":1451625509,"post_id":18731580,"comment_id":56850266,"content_license":"CC BY-SA 3.0","body":"@yohm those are special case; you can handle with long and some regex; however, by then you can use parseInt."},{"owner":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"edited":false,"score":45,"creation_date":1469726823,"post_id":18731580,"comment_id":64669135,"content_license":"CC BY-SA 3.0","body":"-1 Sorry, but this is a pretty poor algorithm, with lots of limitations, no error handling, and some weird anomalies (eg &quot;&quot; gives an exception, &quot;-&quot; will produce 0, and &quot;+&quot; produces -5). Why would anyone choose this over <code>Integer.parseInt(s)</code>? - I see the point about this being an interview question, but a) that doesn&#39;t imply you&#39;d do it this way (which is what the questioner asked), and b) this answer&#39;s a pretty bad example anyway."},{"owner":{"reputation":1189,"user_id":3649372,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1960e9fe76af8d9b3e3160d9512a114?s=128&d=identicon&r=PG&f=1","display_name":"Nathan Adams","link":"https://stackoverflow.com/users/3649372/nathan-adams"},"edited":false,"score":1,"creation_date":1556734626,"post_id":18731580,"comment_id":98534766,"content_license":"CC BY-SA 4.0","body":"-1 because what if I want to parse a base 31 int? Integer.parseInt(str, 31) is a one liner to do that. Slightly facetious comment, but serious point underneath. Never re-invent wheels when someone else has already put the work in"},{"owner":{"reputation":28448,"user_id":12299000,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0pja9.png?s=128&g=1","display_name":"kaya3","link":"https://stackoverflow.com/users/12299000/kaya3"},"edited":false,"score":2,"creation_date":1572475278,"post_id":18731580,"comment_id":103576061,"content_license":"CC BY-SA 4.0","body":"This code looks like it was adapted from a well-known library for fast IO in competitive programming contests. In that context, the input data is guaranteed to be valid, and solutions are graded on speed. It should be faster than <code>Integer.parseInt</code> <i>because</i> it does no validation."}],"owner":{"reputation":6951,"user_id":1290668,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/7S0Hp.jpg?s=128&g=1","display_name":"Billz","link":"https://stackoverflow.com/users/1290668/billz"},"comment_count":6,"is_accepted":false,"score":87,"last_activity_date":1598023912,"last_edit_date":1598023912,"creation_date":1378865304,"answer_id":18731580,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Do it manually:</p>\n<pre><code>public static int strToInt(String str){\n    int i = 0;\n    int num = 0;\n    boolean isNeg = false;\n\n    // Check for negative sign; if it's there, set the isNeg flag\n    if (str.charAt(0) == '-') {\n        isNeg = true;\n        i = 1;\n    }\n\n    // Process each character of the string;\n    while( i &lt; str.length()) {\n        num *= 10;\n        num += str.charAt(i++) - '0'; // Minus the ASCII code of '0' to get the value of the charAt(i++).\n    }\n\n    if (isNeg)\n        num = -num;\n    return num;\n}\n</code></pre>\n"},{"comments":[{"owner":{"user_type":"does_not_exist","display_name":"user289086"},"edited":false,"score":18,"creation_date":1413036014,"post_id":19477740,"comment_id":41296795,"content_license":"CC BY-SA 3.0","body":"This will cause <code>-42</code> to be parsed as <code>42</code>."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":11,"creation_date":1457089306,"post_id":19477740,"comment_id":59258504,"content_license":"CC BY-SA 3.0","body":"Yeah, this only works for non negative numbers which are correct to begin with and hence, donât need this replacement step. For every other case, this attempt to automatically fix it, will make things worse (as almost every attempt to automatically fix something). If I pass in <code>&quot;4+2&quot;</code>, Iâll get <code>42</code> as a result without any hint about that what I tried to do was misguided. The user will get the impression that entering basic expressions like <code>4+2</code> was a valid input, but the application continues with a wrong value. Besides that, the type is <code>String</code>, not <code>string</code>â¦"},{"owner":{"reputation":445,"user_id":2982121,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/b80348e8c1bad85077d608bb1e2f048d?s=128&d=identicon&r=PG&f=1","display_name":"apm","link":"https://stackoverflow.com/users/2982121/apm"},"edited":false,"score":0,"creation_date":1471604226,"post_id":19477740,"comment_id":65424047,"content_license":"CC BY-SA 3.0","body":"Or change first line to--&gt; string mystr = mystr.replaceAll( &quot;[^\\\\d\\\\-]&quot;, &quot;&quot; );"}],"owner":{"reputation":2296,"user_id":1930011,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/L09ta.jpg?s=128&g=1","display_name":"Thijser","link":"https://stackoverflow.com/users/1930011/thijser"},"comment_count":3,"is_accepted":false,"score":17,"last_activity_date":1574613582,"last_edit_date":1574613582,"creation_date":1382274709,"answer_id":19477740,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>You can also begin by removing all non-numerical characters and then parsing the integer:</p>\n\n<pre><code>String mystr = mystr.replaceAll(\"[^\\\\d]\", \"\");\nint number = Integer.parseInt(mystr);\n</code></pre>\n\n<p>But be warned that this only works for non-negative numbers. </p>\n"},{"comments":[{"owner":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"edited":false,"score":1,"creation_date":1475707959,"post_id":19477823,"comment_id":67056589,"content_license":"CC BY-SA 3.0","body":"Yes - and there&#39;s a nasty edge case around -2^31. If you try negating 2^31, you might run into difficulties......"}],"owner":{"reputation":939,"user_id":1149248,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ynaA0.jpg?s=128&g=1","display_name":"Dennis Ahaus","link":"https://stackoverflow.com/users/1149248/dennis-ahaus"},"comment_count":1,"is_accepted":false,"score":24,"last_activity_date":1598024024,"last_edit_date":1598024024,"creation_date":1382275132,"answer_id":19477823,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Converting a string to an int is more complicated than just converting a number. You have think about the following issues:</p>\n<ul>\n<li>Does the string only contain numbers <strong>0-9</strong>?</li>\n<li>What's up with <strong>-/+</strong> before or after the string? Is that possible (referring to accounting numbers)?</li>\n<li>What's up with <strong>MAX_-/MIN_INFINITY?</strong> What will happen if the string is 99999999999999999999? Can the machine treat this string as an int?</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":1098,"user_id":2086234,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Xq0ZY.jpg?s=128&g=1","display_name":"ChrisB","link":"https://stackoverflow.com/users/2086234/chrisb"},"edited":false,"score":8,"creation_date":1439562234,"post_id":22547555,"comment_id":51927088,"content_license":"CC BY-SA 3.0","body":"Using type double for parsing an integer is not only a bad idea performance-wise. Values like 0.2 are periodic numbers in floating-point representation and cannot be represented precisely. Try System.out.println(0.1+0.2) to see the point -- the result will not be 0.3! Better stick with library code whereever you can, in this case Integer.parseInt()."},{"owner":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":10,"creation_date":1457088461,"post_id":22547555,"comment_id":59257890,"content_license":"CC BY-SA 3.0","body":"Itâs not clear what kind of problem this answer tries to solve, first, why anyone should ever have that restriction you describe, second, why you have to look at an ASCII table as you can simply use <code>&#39;0&#39;</code> for the character instead of <code>48</code> and never have to bother with its actual numeric value. Third, the entire detour with <code>double</code> values makes no sense at all as you are dividing by ten, just to multiply with ten afterwards. The result simply is <code>semilastdigit * 10 + lastdigit</code> as learnt in elementary school, when the decimal system was introducedâ¦"},{"owner":{"reputation":647,"user_id":3126359,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/05d919ef26ce6e423395c5fe329d9482?s=128&d=identicon&r=PG&f=1","display_name":"Oak","link":"https://stackoverflow.com/users/3126359/oak"},"reply_to_user":{"reputation":235291,"user_id":2711488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FhkI9.jpg?s=128&g=1","display_name":"Holger","link":"https://stackoverflow.com/users/2711488/holger"},"edited":false,"score":2,"creation_date":1462178992,"post_id":22547555,"comment_id":61511981,"content_license":"CC BY-SA 3.0","body":"@Holger I was personally given that restriction when first starting out programming, and also when I had to write (pen/paper) similar interactions in a test. It&#39;s uncommon, but it&#39;s a method that is easily understood and while not being the most efficient by miles it&#39;s a method that works decently enough for small projects. SO.SE is meant to help everyone, not just a few. I provided an alternative method, for those who are starting out by learning how to create a pseudo-algorithm and turning it into an algorithm rather than using premade java expressions. Although I did forget that &#39;0&#39; is cool"},{"owner":{"reputation":1189,"user_id":3649372,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e1960e9fe76af8d9b3e3160d9512a114?s=128&d=identicon&r=PG&f=1","display_name":"Nathan Adams","link":"https://stackoverflow.com/users/3649372/nathan-adams"},"edited":false,"score":0,"creation_date":1556734761,"post_id":22547555,"comment_id":98534818,"content_license":"CC BY-SA 4.0","body":"Why divide everything by 10 then multiply back by 10 again at the end?! Besides, &quot;parseInt&quot; isn&#39;t magic and it isn&#39;t an expression, it&#39;s an inbuilt library function that&#39;s been tested and proven over nearly 3 decades"},{"owner":{"reputation":4302,"user_id":201891,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/3798fee71522049317927bc8053c0599?s=128&d=identicon&r=PG","display_name":"DavidS","link":"https://stackoverflow.com/users/201891/davids"},"edited":false,"score":4,"creation_date":1574808169,"post_id":22547555,"comment_id":104360264,"content_license":"CC BY-SA 4.0","body":"This isn&#39;t a good answer. The question is &quot;How do I convert a String to an int in Java?&quot; not, &quot;How do I solve this homework problem with arbitrary restrictions?&quot; It&#39;s StackOverflow, not HomeworkOverflow."},{"owner":{"reputation":12146,"user_id":2985643,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/eaacaf1426f7e6d02914fcf99dc0a33b?s=128&d=identicon&r=PG&f=1","display_name":"skomisa","link":"https://stackoverflow.com/users/2985643/skomisa"},"edited":false,"score":1,"creation_date":1586658481,"post_id":22547555,"comment_id":108207139,"content_license":"CC BY-SA 4.0","body":"You made the reason for using this novel approach very clear, so that in itself is not a concern. However, you stress that your approach uses <i>&quot;no repetitive cycles&quot;</i>, yet your specific example bypasses that issue completely by hard-coding the solution (for a two digit number) to use only <code>semilastdigit</code> and <code>lastdigit</code>. How would you code your solution to avoid &quot;repetitive cycles&quot; if I provided you with a valid numeric string of arbitrary length (i.e. Any value between &quot;-2147483648&quot; and &quot;2147483647&quot;?)"}],"owner":{"reputation":647,"user_id":3126359,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/05d919ef26ce6e423395c5fe329d9482?s=128&d=identicon&r=PG&f=1","display_name":"Oak","link":"https://stackoverflow.com/users/3126359/oak"},"comment_count":6,"is_accepted":false,"score":43,"last_activity_date":1598024758,"last_edit_date":1598024758,"creation_date":1395359479,"answer_id":22547555,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Currently I'm doing an assignment for college, where I can't use certain expressions, such as the ones above, and by looking at the ASCII table, I managed to do it. It's a far more complex code, but it could help others that are restricted like I was.</p>\n<p>The first thing to do is to receive the input, in this case, a string of digits; I'll call it <code>String number</code>, and in this case, I'll exemplify it using the number 12, therefore <code>String number = &quot;12&quot;;</code></p>\n<p>Another limitation was the fact that I couldn't use repetitive cycles, therefore, a <code>for</code> cycle (which would have been perfect) can't be used either. This limits us a bit, but then again, that's the goal. Since I only needed two digits (taking the last two digits), a simple <code>charAt</code>solved it:</p>\n<pre><code> // Obtaining the integer values of the char 1 and 2 in ASCII\n int semilastdigitASCII = number.charAt(number.length() - 2);\n int lastdigitASCII = number.charAt(number.length() - 1);\n</code></pre>\n<p>Having the codes, we just need to look up at the table, and make the necessary adjustments:</p>\n<pre><code> double semilastdigit = semilastdigitASCII - 48;  // A quick look, and -48 is the key\n double lastdigit = lastdigitASCII - 48;\n</code></pre>\n<p>Now, why double? Well, because of a really &quot;weird&quot; step. Currently we have two doubles, 1 and 2, but we need to turn it into 12, there isn't any mathematic operation that we can do.</p>\n<p>We're dividing the latter (lastdigit) by 10 in the fashion <code>2/10 = 0.2</code> (hence why double) like this:</p>\n<pre><code> lastdigit = lastdigit / 10;\n</code></pre>\n<p>This is merely playing with numbers. We were turning the last digit into a decimal. But now, look at what happens:</p>\n<pre><code> double jointdigits = semilastdigit + lastdigit; // 1.0 + 0.2 = 1.2\n</code></pre>\n<p>Without getting too into the math, we're simply isolating units the digits of a number. You see, since we only consider 0-9, dividing by a multiple of 10 is like creating a &quot;box&quot; where you store it (think back at when your first grade teacher explained you what a unit and a hundred were). So:</p>\n<pre><code> int finalnumber = (int) (jointdigits*10); // Be sure to use parentheses &quot;()&quot;\n</code></pre>\n<p>And there you go. You turned a String of digits (in this case, two digits), into an integer composed of those two digits, considering the following limitations:</p>\n<ul>\n<li>No repetitive cycles</li>\n<li>No &quot;Magic&quot; Expressions such as parseInt</li>\n</ul>\n"},{"comments":[{"owner":{"reputation":3248,"user_id":3948862,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/pXuEe.jpg?s=128&g=1","display_name":"D&#225;vid Horv&#225;th","link":"https://stackoverflow.com/users/3948862/d%c3%a1vid-horv%c3%a1th"},"edited":false,"score":0,"creation_date":1542102802,"post_id":23833311,"comment_id":93438432,"content_license":"CC BY-SA 4.0","body":"You can do it simpler: <code>(int) Double.parseDouble(input.replaceAll(&quot;[^0-9\\\\.\\\\-]&quot;, &quot;&quot;));</code>"}],"owner":{"reputation":912,"user_id":2172026,"user_type":"registered","profile_image":"https://i.stack.imgur.com/TXyda.png?s=128&g=1","display_name":"fitorec","link":"https://stackoverflow.com/users/2172026/fitorec"},"comment_count":1,"is_accepted":false,"score":19,"last_activity_date":1417250211,"last_edit_date":1417250211,"creation_date":1400859481,"answer_id":23833311,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>I'm have a solution, but I do not know how effective it is. But it works well, and I think you could improve it. On the other hand, I did a couple of tests with <a href=\"http://en.wikipedia.org/wiki/JUnit\">JUnit</a> which step correctly. I attached the function and testing:</p>\n\n<pre><code>static public Integer str2Int(String str) {\n    Integer result = null;\n    if (null == str || 0 == str.length()) {\n        return null;\n    }\n    try {\n        result = Integer.parseInt(str);\n    } \n    catch (NumberFormatException e) {\n        String negativeMode = \"\";\n        if(str.indexOf('-') != -1)\n            negativeMode = \"-\";\n        str = str.replaceAll(\"-\", \"\" );\n        if (str.indexOf('.') != -1) {\n            str = str.substring(0, str.indexOf('.'));\n            if (str.length() == 0) {\n                return (Integer)0;\n            }\n        }\n        String strNum = str.replaceAll(\"[^\\\\d]\", \"\" );\n        if (0 == strNum.length()) {\n            return null;\n        }\n        result = Integer.parseInt(negativeMode + strNum);\n    }\n    return result;\n}\n</code></pre>\n\n<p>Testing with JUnit:</p>\n\n<pre><code>@Test\npublic void testStr2Int() {\n    assertEquals(\"is numeric\", (Integer)(-5), Helper.str2Int(\"-5\"));\n    assertEquals(\"is numeric\", (Integer)50, Helper.str2Int(\"50.00\"));\n    assertEquals(\"is numeric\", (Integer)20, Helper.str2Int(\"$ 20.90\"));\n    assertEquals(\"is numeric\", (Integer)5, Helper.str2Int(\" 5.321\"));\n    assertEquals(\"is numeric\", (Integer)1000, Helper.str2Int(\"1,000.50\"));\n    assertEquals(\"is numeric\", (Integer)0, Helper.str2Int(\"0.50\"));\n    assertEquals(\"is numeric\", (Integer)0, Helper.str2Int(\".50\"));\n    assertEquals(\"is numeric\", (Integer)0, Helper.str2Int(\"-.10\"));\n    assertEquals(\"is numeric\", (Integer)Integer.MAX_VALUE, Helper.str2Int(\"\"+Integer.MAX_VALUE));\n    assertEquals(\"is numeric\", (Integer)Integer.MIN_VALUE, Helper.str2Int(\"\"+Integer.MIN_VALUE));\n    assertEquals(\"Not\n     is numeric\", null, Helper.str2Int(\"czv.,xcvsa\"));\n    /**\n     * Dynamic test\n     */\n    for(Integer num = 0; num &lt; 1000; num++) {\n        for(int spaces = 1; spaces &lt; 6; spaces++) {\n            String numStr = String.format(\"%0\"+spaces+\"d\", num);\n            Integer numNeg = num * -1;\n            assertEquals(numStr + \": is numeric\", num, Helper.str2Int(numStr));\n            assertEquals(numNeg + \": is numeric\", numNeg, Helper.str2Int(\"- \" + numStr));\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":9300,"user_id":15464,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c8c949d9223d9daaa34fd151b78979c0?s=128&d=identicon&r=PG","display_name":"wnoise","link":"https://stackoverflow.com/users/15464/wnoise"},"edited":false,"score":35,"creation_date":1458659898,"post_id":32248950,"comment_id":59953898,"content_license":"CC BY-SA 3.0","body":"You rarely want 0 to be used when an invalid number is parsed."},{"owner":{"reputation":679,"user_id":3224854,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5308ca9c8de8a41b9fd7dc36a03406f8?s=128&d=identicon&r=PG","display_name":"etherous","link":"https://stackoverflow.com/users/3224854/etherous"},"edited":false,"score":15,"creation_date":1496355945,"post_id":32248950,"comment_id":75641722,"content_license":"CC BY-SA 3.0","body":"@Ryboflavin No, it doesn&#39;t. One of those is a well-defined language semantic, and the other is an exception"}],"owner":{"reputation":711,"user_id":2344115,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eb2078464d417c2074b00b1d85ca5a39?s=128&d=identicon&r=PG","display_name":"Ryboflavin","link":"https://stackoverflow.com/users/2344115/ryboflavin"},"comment_count":2,"is_accepted":false,"score":58,"last_activity_date":1457216728,"last_edit_date":1457216728,"creation_date":1440677269,"answer_id":32248950,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>An alternate solution is to use <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\">Apache Commons'</a> NumberUtils:</p>\n\n<pre><code>int num = NumberUtils.toInt(\"1234\");\n</code></pre>\n\n<p>The Apache utility is nice because if the string is an invalid number format then 0 is always returned. Hence saving you the try catch block.</p>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html#toInt(java.lang.String)\">Apache NumberUtils API Version 3.4</a></p>\n"},{"owner":{"reputation":559,"user_id":3760904,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/Do5Yd.jpg?s=128&g=1","display_name":"Giridhar Kumar","link":"https://stackoverflow.com/users/3760904/giridhar-kumar"},"comment_count":0,"is_accepted":false,"score":22,"last_activity_date":1455666647,"last_edit_date":1455666647,"creation_date":1445334695,"answer_id":33233407,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>We can use the <code>parseInt(String str)</code> method of the <code>Integer</code> wrapper class for converting a String value to an integer value.</p>\n\n<p>For example:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.parseInt(strVal);\n</code></pre>\n\n<p>The <code>Integer</code> class also provides the <code>valueOf(String str)</code> method:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = Integer.valueOf(strValue);\n</code></pre>\n\n<p>We can also use <code>toInt(String strValue)</code> of <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/math/NumberUtils.html\">NumberUtils Utility Class</a> for the conversion:</p>\n\n<pre><code>String strValue = \"12345\";\nInteger intValue = NumberUtils.toInt(strValue);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":8612,"user_id":2040863,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/IspsC.jpg?s=128&g=1","display_name":"John Hascall","link":"https://stackoverflow.com/users/2040863/john-hascall"},"edited":false,"score":4,"creation_date":1457129114,"post_id":34541513,"comment_id":59283207,"content_license":"CC BY-SA 3.0","body":"Putting <code>JOptionPane.showMessageDialog()</code> in the answer to vanilla Java question makes no sense."},{"owner":{"reputation":193,"user_id":3809625,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2a6c2bbe9ea3121b216a3db4f29a6c37?s=128&d=identicon&r=PG&f=1","display_name":"php_coder_3809625","link":"https://stackoverflow.com/users/3809625/php-coder-3809625"},"edited":false,"score":2,"creation_date":1461714872,"post_id":34541513,"comment_id":61321983,"content_license":"CC BY-SA 3.0","body":"<code>Integer.valueOf(String);</code> does not return type <code>int</code>."}],"owner":{"reputation":3069,"user_id":2837359,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/9B4kt.jpg?s=128&g=1","display_name":"manikant gautam","link":"https://stackoverflow.com/users/2837359/manikant-gautam"},"comment_count":2,"is_accepted":false,"score":9,"last_activity_date":1457152097,"last_edit_date":1457152097,"creation_date":1451539728,"answer_id":34541513,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>You can use this code also, with some precautions.</p>\n\n<ul>\n<li><p>Option #1: Handle the exception explicitly, for example, showing a message dialog and then stop the execution of the current workflow. For example:</p>\n\n<pre><code>try\n    {\n        String stringValue = \"1234\";\n\n        // From String to Integer\n        int integerValue = Integer.valueOf(stringValue);\n\n        // Or\n        int integerValue = Integer.ParseInt(stringValue);\n\n        // Now from integer to back into string\n        stringValue = String.valueOf(integerValue);\n    }\ncatch (NumberFormatException ex) {\n    //JOptionPane.showMessageDialog(frame, \"Invalid input string!\");\n    System.out.println(\"Invalid input string!\");\n    return;\n}\n</code></pre></li>\n<li><p>Option #2: Reset the affected variable if the execution flow can continue in case of an exception. For example, with some modifications in the catch block</p>\n\n<pre><code>catch (NumberFormatException ex) {\n    integerValue = 0;\n}\n</code></pre></li>\n</ul>\n\n<p>Using a string constant for comparison or any sort of computing is always a good idea, because a constant never returns a null value.</p>\n"},{"comments":[{"owner":{"reputation":9646,"user_id":1147688,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/c76a3f29c105a73c4060b3d1934ccd9a?s=128&d=identicon&r=PG","display_name":"not2qubit","link":"https://stackoverflow.com/users/1147688/not2qubit"},"edited":false,"score":0,"creation_date":1493293349,"post_id":35834484,"comment_id":74360710,"content_license":"CC BY-SA 3.0","body":"Finally! Someone who actually bother to post the results/output of the conversions! Can you also add some with &quot;-&quot; signs?"}],"owner":{"reputation":46744,"user_id":3885376,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/XgeJ5.png?s=128&g=1","display_name":"ROMANIA_engineer","link":"https://stackoverflow.com/users/3885376/romania-engineer"},"comment_count":1,"is_accepted":false,"score":38,"last_activity_date":1457311369,"creation_date":1457311369,"answer_id":35834484,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<h3><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#decode-java.lang.String-\"><code>Integer.decode</code></a></h3>\n\n<p>You can also use <code>public static Integer decode(String nm) throws NumberFormatException</code>.</p>\n\n<p>It also works for base 8 and 16:</p>\n\n<pre><code>// base 10\nInteger.parseInt(\"12\");     // 12 - int\nInteger.valueOf(\"12\");      // 12 - Integer\nInteger.decode(\"12\");       // 12 - Integer\n// base 8\n// 10 (0,1,...,7,10,11,12)\nInteger.parseInt(\"12\", 8);  // 10 - int\nInteger.valueOf(\"12\", 8);   // 10 - Integer\nInteger.decode(\"012\");      // 10 - Integer\n// base 16\n// 18 (0,1,...,F,10,11,12)\nInteger.parseInt(\"12\",16);  // 18 - int\nInteger.valueOf(\"12\",16);   // 18 - Integer\nInteger.decode(\"#12\");      // 18 - Integer\nInteger.decode(\"0x12\");     // 18 - Integer\nInteger.decode(\"0X12\");     // 18 - Integer\n// base 2\nInteger.parseInt(\"11\",2);   // 3 - int\nInteger.valueOf(\"11\",2);    // 3 - Integer\n</code></pre>\n\n<p>If you want to get <code>int</code> instead of <code>Integer</code> you can use:</p>\n\n<ol>\n<li><p>Unboxing:</p>\n\n<pre><code>int val = Integer.decode(\"12\"); \n</code></pre></li>\n<li><p><code>intValue()</code>:</p>\n\n<pre><code>Integer.decode(\"12\").intValue();\n</code></pre></li>\n</ol>\n"},{"owner":{"reputation":4054,"user_id":3888450,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/8941584d8e7dd4925b21d7bb79a62b18?s=128&d=identicon&r=PG&f=1","display_name":"Stefan Dollase","link":"https://stackoverflow.com/users/3888450/stefan-dollase"},"comment_count":0,"is_accepted":false,"score":29,"last_activity_date":1586711214,"last_edit_date":1586711214,"creation_date":1459739588,"answer_id":36394016,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Whenever there is the slightest possibility that the given String does not contain an Integer, you have to handle this special case. Sadly, the standard Java methods <code>Integer::parseInt</code> and <code>Integer::valueOf</code> throw a <code>NumberFormatException</code> to signal this special case. Thus, you have to use exceptions for flow control, which is generally considered bad coding style.</p>\n\n<p>In my opinion, this special case should be handled by returning an empty <code>Optional&lt;Integer&gt;</code>. Since Java does not offer such a method, I use the following wrapper:</p>\n\n<pre><code>private Optional&lt;Integer&gt; tryParseInteger(String string) {\n    try {\n        return Optional.of(Integer.valueOf(string));\n    } catch (NumberFormatException e) {\n        return Optional.empty();\n    }\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>// prints \"12\"\nSystem.out.println(tryParseInteger(\"12\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"-1\"\nSystem.out.println(tryParseInteger(\"-1\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n// prints \"invalid\"\nSystem.out.println(tryParseInteger(\"ab\").map(i -&gt; i.toString()).orElse(\"invalid\"));\n</code></pre>\n\n<p>While this is still using exceptions for flow control internally, the usage code becomes very clean. Also, you can clearly distinguish the case where <code>-1</code> is parsed as a valid value and the case where an invalid String could not be parsed.</p>\n"},{"comments":[{"owner":{"reputation":2001,"user_id":1551685,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4db3932926e0d73a94e94db75649454a?s=128&d=identicon&r=PG","display_name":"Steve Smith","link":"https://stackoverflow.com/users/1551685/steve-smith"},"edited":false,"score":5,"creation_date":1497438923,"post_id":36740121,"comment_id":76076808,"content_license":"CC BY-SA 3.0","body":"This is exactly the same as the select answer."},{"owner":{"reputation":67931,"user_id":1081110,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fp4Pm.jpg?s=128&g=1","display_name":"Dawood ibn Kareem","link":"https://stackoverflow.com/users/1081110/dawood-ibn-kareem"},"edited":false,"score":6,"creation_date":1509301714,"post_id":36740121,"comment_id":80953908,"content_license":"CC BY-SA 3.0","body":"There is no value to the site, in repeating an answer that someone else posted FIVE YEARS before you."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1567465721,"post_id":36740121,"comment_id":101962561,"content_license":"CC BY-SA 4.0","body":"This is already covered in <a href=\"https://stackoverflow.com/questions/5585779/how-do-i-convert-a-string-to-an-int-in-java/5585800#5585800\">the accepted answer</a> (posted about 5 years prior)."}],"owner":{"reputation":599,"user_id":3641329,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/ca48c94892e78dcfa80f9cfee4ce4f45?s=128&d=identicon&r=PG&f=1","display_name":"iKing","link":"https://stackoverflow.com/users/3641329/iking"},"comment_count":3,"is_accepted":false,"score":5,"last_activity_date":1598024974,"last_edit_date":1598024974,"creation_date":1461146079,"answer_id":36740121,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<pre><code>int foo = Integer.parseInt(&quot;1234&quot;);\n</code></pre>\n<p>Make sure there is no non-numeric data in the string.</p>\n"},{"owner":{"reputation":32609,"user_id":2648077,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/fd10f51a1b9acf80448616c0a03cd261?s=128&d=identicon&r=PG&f=1","display_name":"Alireza Fattahi","link":"https://stackoverflow.com/users/2648077/alireza-fattahi"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1567465681,"last_edit_date":1567465681,"creation_date":1469510787,"answer_id":38581630,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>As mentioned, Apache Commons' <code>NumberUtils</code> can do it. It returns <code>0</code> if it cannot convert a string to an int.</p>\n\n<p>You can also define your own default value:</p>\n\n<pre><code>NumberUtils.toInt(String str, int defaultValue)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>NumberUtils.toInt(\"3244\", 1) = 3244\nNumberUtils.toInt(\"\", 1)     = 1\nNumberUtils.toInt(null, 5)   = 5\nNumberUtils.toInt(\"Hi\", 6)   = 6\nNumberUtils.toInt(\" 32 \", 1) = 1 // Space in numbers are not allowed\nNumberUtils.toInt(StringUtils.trimToEmpty(\"  32 \", 1)) = 32;\n</code></pre>\n"},{"owner":{"reputation":10624,"user_id":619860,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/6vm1N.jpg?s=128&g=1","display_name":"Hoa Nguyen","link":"https://stackoverflow.com/users/619860/hoa-nguyen"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1567465591,"last_edit_date":1567465591,"creation_date":1470062648,"answer_id":38701772,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Apart from the previous answers, I would like to add several functions. These are results while you use them:</p>\n\n<pre><code>public static void main(String[] args) {\n  System.out.println(parseIntOrDefault(\"123\", 0)); // 123\n  System.out.println(parseIntOrDefault(\"aaa\", 0)); // 0\n  System.out.println(parseIntOrDefault(\"aaa456\", 3, 0)); // 456\n  System.out.println(parseIntOrDefault(\"aaa789bbb\", 3, 6, 0)); // 789\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>public static int parseIntOrDefault(String value, int defaultValue) {\n  int result = defaultValue;\n  try {\n    result = Integer.parseInt(value);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n\npublic static int parseIntOrDefault(String value, int beginIndex, int endIndex, int defaultValue) {\n  int result = defaultValue;\n  try {\n    String stringValue = value.substring(beginIndex, endIndex);\n    result = Integer.parseInt(stringValue);\n  }\n  catch (Exception e) {\n  }\n  return result;\n}\n</code></pre>\n"},{"owner":{"reputation":95367,"user_id":288671,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/65f66029eed1093e5c7e3214b4774d8f?s=128&d=identicon&r=PG&f=1","display_name":"Vitalii Fedorenko","link":"https://stackoverflow.com/users/288671/vitalii-fedorenko"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1567465440,"last_edit_date":1567465440,"creation_date":1470506189,"answer_id":38807214,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a> has <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#tryParse(java.lang.String)\" rel=\"nofollow noreferrer\">tryParse(String)</a>, which returns <code>null</code> if the string couldn't be parsed, for example:</p>\n\n<pre><code>Integer fooInt = Ints.tryParse(fooString);\nif (fooInt != null) {\n  ...\n}\n</code></pre>\n"},{"owner":{"reputation":496,"user_id":3280682,"user_type":"registered","accept_rate":100,"profile_image":"https://lh6.googleusercontent.com/-HMPjDJYZXLY/AAAAAAAAAAI/AAAAAAAAAmw/JUTi4kFxo6A/photo.jpg?sz=128","display_name":"Aditya","link":"https://stackoverflow.com/users/3280682/aditya"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1567465381,"last_edit_date":1567465381,"creation_date":1471504044,"answer_id":39011912,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>For a normal string you can use:</p>\n\n<pre><code>int number = Integer.parseInt(\"1234\");\n</code></pre>\n\n<p>For a String builder and String buffer you can use:</p>\n\n<pre><code>Integer.parseInt(myBuilderOrBuffer.toString());\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1567465316,"post_id":40700694,"comment_id":101962502,"content_license":"CC BY-SA 4.0","body":"This is already covered in <a href=\"https://stackoverflow.com/questions/5585779/how-do-i-convert-a-string-to-an-int-in-java/5585800#5585800\">the accepted answer</a> (posted about 5 years prior)."}],"owner":{"reputation":1288,"user_id":5340833,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FbzRg.jpg?s=128&g=1","display_name":"Shivanandam","link":"https://stackoverflow.com/users/5340833/shivanandam"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1598025012,"last_edit_date":1598025012,"creation_date":1479615845,"answer_id":40700694,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Here we go</p>\n<pre><code>String str = &quot;1234&quot;;\nint number = Integer.parseInt(str);\nprint number; // 1234\n</code></pre>\n"},{"owner":{"reputation":1098,"user_id":388317,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/3a9ab9582a9dbb8455882f4a4b2229ae?s=128&d=identicon&r=PG","display_name":"Christian Ullenboom","link":"https://stackoverflow.com/users/388317/christian-ullenboom"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1488314200,"creation_date":1488314200,"answer_id":42518263,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>You can use <code>new Scanner(\"1244\").nextInt()</code>. Or ask if even an int exists: <code>new Scanner(\"1244\").hasNextInt()</code></p>\n"},{"owner":{"reputation":24255,"user_id":2815219,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d10432298a6eacf6be2f263d8fc3776b?s=128&d=identicon&r=PG","display_name":"Raman Sahasi","link":"https://stackoverflow.com/users/2815219/raman-sahasi"},"comment_count":0,"is_accepted":false,"community_owned_date":1493012179,"score":9,"last_activity_date":1567465185,"last_edit_date":1567465185,"creation_date":1493012179,"answer_id":43580481,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>In programming competitions, where you're assured that number will always be a valid integer, then you can write your own method to parse input. This will skip all validation related code (since you don't need any of that) and will be a bit more efficient.</p>\n\n<ol>\n<li><p>For valid positive integer:</p>\n\n<pre><code>private static int parseInt(String str) {\n    int i, n = 0;\n\n    for (i = 0; i &lt; str.length(); i++) {\n        n *= 10;\n        n += str.charAt(i) - 48;\n    }\n    return n;\n}\n</code></pre></li>\n<li><p>For both positive and negative integers:</p>\n\n<pre><code>private static int parseInt(String str) {\n    int i=0, n=0, sign=1;\n    if (str.charAt(0) == '-') {\n        i = 1;\n        sign = -1;\n    }\n    for(; i&lt;str.length(); i++) {\n        n* = 10;\n        n += str.charAt(i) - 48;\n    }\n    return sign*n;\n}\n</code></pre></li>\n<li><p>If you are expecting a whitespace before or after these numbers,\nthen make sure to do a <code>str = str.trim()</code> before processing further.</p></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":4777,"user_id":1970832,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/74a51ccbe8e8fa185b782c6d64ee65e9?s=128&d=identicon&r=PG&f=1","display_name":"Rahul Sharma","link":"https://stackoverflow.com/users/1970832/rahul-sharma"},"edited":false,"score":11,"creation_date":1493400444,"post_id":43685382,"comment_id":74417695,"content_license":"CC BY-SA 3.0","body":"Duplicate answer."},{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1567465094,"post_id":43685382,"comment_id":101962467,"content_license":"CC BY-SA 4.0","body":"It is not the only duplicate answer. We are now at 93 answers (includes deleted) for this simple question."}],"owner":{"reputation":341,"user_id":4226914,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9800dbafaba6194ea3168086213253ec?s=128&d=identicon&r=PG&f=1","display_name":"KIBOU Hassan","link":"https://stackoverflow.com/users/4226914/kibou-hassan"},"comment_count":2,"is_accepted":false,"score":-7,"last_activity_date":1567463795,"last_edit_date":1567463795,"creation_date":1493398784,"answer_id":43685382,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Alternatively, you can use <code>Integer.valueOf()</code>. It will return an <code>Integer</code> object.</p>\n\n<pre><code>String numberStringFormat = \"10\";\nInteger resultIntFormat = Integer.valueOf(numberStringFormat);\nLOG.info(\"result:\" + resultIntFormat);\n</code></pre>\n\n<p><strong>Output: 10</strong></p>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1567464986,"post_id":45651339,"comment_id":101962454,"content_license":"CC BY-SA 4.0","body":"Isn&#39;t this covered in previous answers?"}],"owner":{"reputation":470,"user_id":4180464,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/25ffa2d296c309b676b23ae2eb74b19d?s=128&d=identicon&r=PG&f=1","display_name":"Pankaj Mandale","link":"https://stackoverflow.com/users/4180464/pankaj-mandale"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1567464968,"last_edit_date":1567464968,"creation_date":1502547951,"answer_id":45651339,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>One method is parseInt(String). It returns a primitive int:</p>\n\n<pre><code>String number = \"10\";\nint result = Integer.parseInt(number);\nSystem.out.println(result);\n</code></pre>\n\n<p>The second method is valueOf(String), and it returns a new Integer() object:</p>\n\n<pre><code>String number = \"10\";\nInteger result = Integer.valueOf(number);\nSystem.out.println(result);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":2,"creation_date":1510313903,"post_id":45994764,"comment_id":81393457,"content_license":"CC BY-SA 3.0","body":"There is no need to reinvent the wheel, just use <code>Integer.parseInt</code>."},{"owner":{"reputation":1526,"user_id":5855888,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/5f269345d928d7415cbe68bca72be848?s=128&d=identicon&r=PG","display_name":"Anup Gupta","link":"https://stackoverflow.com/users/5855888/anup-gupta"},"reply_to_user":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1510378726,"post_id":45994764,"comment_id":81420005,"content_license":"CC BY-SA 3.0","body":"@TobiasWeimer yes, we can do but this is without using library"},{"owner":{"reputation":1526,"user_id":5855888,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/5f269345d928d7415cbe68bca72be848?s=128&d=identicon&r=PG","display_name":"Anup Gupta","link":"https://stackoverflow.com/users/5855888/anup-gupta"},"reply_to_user":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1510410403,"post_id":45994764,"comment_id":81427954,"content_license":"CC BY-SA 3.0","body":"@TobiasWeimer, some people need this how to do without using Library."},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":5,"creation_date":1510412406,"post_id":45994764,"comment_id":81428687,"content_license":"CC BY-SA 3.0","body":"No, no one needs it because it is a function inside the JDK, not some third party plugin."}],"owner":{"reputation":1526,"user_id":5855888,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/5f269345d928d7415cbe68bca72be848?s=128&d=identicon&r=PG","display_name":"Anup Gupta","link":"https://stackoverflow.com/users/5855888/anup-gupta"},"comment_count":4,"is_accepted":false,"score":4,"last_activity_date":1567464789,"last_edit_date":1567464789,"creation_date":1504248819,"answer_id":45994764,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><strong>This is a <em>complete</em> program with all conditions positive and negative without using a library</strong></p>\n\n<pre><code>import java.util.Scanner;\n\n\npublic class StringToInt {\n\n    public static void main(String args[]) {\n        String inputString;\n        Scanner s = new Scanner(System.in);\n        inputString = s.nextLine();\n\n        if (!inputString.matches(\"([+-]?([0-9]*[.])?[0-9]+)\")) {\n            System.out.println(\"Not a Number\");\n        }\n        else {\n            Double result2 = getNumber(inputString);\n            System.out.println(\"result = \" + result2);\n        }\n    }\n\n\n    public static Double getNumber(String number) {\n        Double result = 0.0;\n        Double beforeDecimal = 0.0;\n        Double afterDecimal = 0.0;\n        Double afterDecimalCount = 0.0;\n        int signBit = 1;\n        boolean flag = false;\n\n        int count = number.length();\n        if (number.charAt(0) == '-') {\n            signBit = -1;\n            flag = true;\n        }\n        else if (number.charAt(0) == '+') {\n            flag = true;\n        }\n        for (int i = 0; i &lt; count; i++) {\n            if (flag &amp;&amp; i == 0) {\n                continue;\n            }\n            if (afterDecimalCount == 0.0) {\n                if (number.charAt(i) - '.' == 0) {\n                    afterDecimalCount++;\n                }\n                else {\n                    beforeDecimal = beforeDecimal * 10 + (number.charAt(i) - '0');\n                }\n            }\n            else {\n                afterDecimal = afterDecimal * 10 + number.charAt(i) - ('0');\n                afterDecimalCount = afterDecimalCount * 10;\n            }\n        }\n        if (afterDecimalCount != 0.0) {\n            afterDecimal = afterDecimal / afterDecimalCount;\n            result = beforeDecimal + afterDecimal;\n        }\n        else {\n            result = beforeDecimal;\n        }\n        return result * signBit;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":50351,"user_id":1711796,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/6pRI7.png?s=128&g=1","display_name":"Bernhard Barker","link":"https://stackoverflow.com/users/1711796/bernhard-barker"},"edited":false,"score":0,"creation_date":1514663006,"post_id":46227128,"comment_id":83044698,"content_license":"CC BY-SA 3.0","body":"This answer doesn&#39;t appear to add anything beyond the answers recommending Integer.parseInt posted a few years earlier (converting String to double would be <a href=\"https://stackoverflow.com/questions/5769669/convert-string-to-double-in-java\">a different question</a>)."}],"owner":{"reputation":951,"user_id":7826803,"user_type":"registered","accept_rate":80,"profile_image":"https://lh6.googleusercontent.com/-YoxlEOPGR-M/AAAAAAAAAAI/AAAAAAAAATo/7liCqCmHJVA/photo.jpg?sz=128","display_name":"Vishal Yadav","link":"https://stackoverflow.com/users/7826803/vishal-yadav"},"comment_count":1,"is_accepted":false,"community_owned_date":1505418341,"score":7,"last_activity_date":1521634337,"last_edit_date":1592644375,"creation_date":1505418341,"answer_id":46227128,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Simply you can try this:</p>\n<ul>\n<li>Use <code>Integer.parseInt(your_string);</code> to convert a <code>String</code> to <code>int</code></li>\n<li>Use <code>Double.parseDouble(your_string);</code> to convert a <code>String</code> to <code>double</code></li>\n</ul>\n<h3>Example</h3>\n<pre><code>String str = &quot;8955&quot;;\nint q = Integer.parseInt(str);\nSystem.out.println(&quot;Output&gt;&gt;&gt; &quot; + q); // Output: 8955\n</code></pre>\n<hr />\n<pre><code>String str = &quot;89.55&quot;;\ndouble q = Double.parseDouble(str);\nSystem.out.println(&quot;Output&gt;&gt;&gt; &quot; + q); // Output: 89.55\n</code></pre>\n"},{"owner":{"reputation":490,"user_id":1970059,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/b72e4b4fff42b926e2b3aab32bcc6b43?s=128&d=identicon&r=PG","display_name":"Dmytro Shvechikov","link":"https://stackoverflow.com/users/1970059/dmytro-shvechikov"},"comment_count":0,"is_accepted":false,"score":26,"last_activity_date":1598025200,"last_edit_date":1598025200,"creation_date":1507058166,"answer_id":46551829,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Methods to do that:</p>\n<ol>\n<li><code>Integer.parseInt(s)</code></li>\n<li><code>Integer.parseInt(s, radix)</code></li>\n<li><code>Integer.parseInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s)</code></li>\n<li><code>Integer.parseUnsignedInt(s, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.valueOf(s)</code></li>\n<li><code>Integer.valueOf(s, radix)</code></li>\n<li><code>Integer.decode(s)</code></li>\n<li><code>NumberUtils.toInt(s)</code></li>\n<li><code>NumberUtils.toInt(s, defaultValue)</code></li>\n</ol>\n<p>Integer.valueOf produces an Integer object and all other methods a primitive int.</p>\n<p>The last two methods are from <a href=\"http://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\">commons-lang3</a> and a big article about converting <a href=\"https://explainjava.com/convert-string-int-java/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"reputation":760,"user_id":4798397,"user_type":"registered","accept_rate":90,"profile_image":"https://lh4.googleusercontent.com/-RbvyOI92KHs/AAAAAAAAAAI/AAAAAAAAAEk/B4Yg7W9lXAk/photo.jpg?sz=128","display_name":"The Coding Wombat","link":"https://stackoverflow.com/users/4798397/the-coding-wombat"},"edited":false,"score":0,"creation_date":1540396970,"post_id":46612299,"comment_id":92853259,"content_license":"CC BY-SA 4.0","body":"Does the int maximum value here also give a NumberFormatException?"},{"owner":{"reputation":369,"user_id":8697391,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/56d7d3a1db321f13736b982d4f1fdf05?s=128&d=identicon&r=PG&f=1","display_name":"Lukas Bauer","link":"https://stackoverflow.com/users/8697391/lukas-bauer"},"reply_to_user":{"reputation":760,"user_id":4798397,"user_type":"registered","accept_rate":90,"profile_image":"https://lh4.googleusercontent.com/-RbvyOI92KHs/AAAAAAAAAAI/AAAAAAAAAEk/B4Yg7W9lXAk/photo.jpg?sz=128","display_name":"The Coding Wombat","link":"https://stackoverflow.com/users/4798397/the-coding-wombat"},"edited":false,"score":0,"creation_date":1543071733,"post_id":46612299,"comment_id":93790494,"content_license":"CC BY-SA 4.0","body":"No, the maximum value is stil okay"},{"owner":{"reputation":103,"user_id":7741106,"user_type":"registered","profile_image":"https://graph.facebook.com/1887359028175773/picture?type=large","display_name":"Umesh Chakradhar","link":"https://stackoverflow.com/users/7741106/umesh-chakradhar"},"edited":false,"score":0,"creation_date":1610345440,"post_id":46612299,"comment_id":116093323,"content_license":"CC BY-SA 4.0","body":"if i have &quot;10.0&quot; ofcourse it shows exception, how can i overcome it."}],"owner":{"reputation":369,"user_id":8697391,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/56d7d3a1db321f13736b982d4f1fdf05?s=128&d=identicon&r=PG&f=1","display_name":"Lukas Bauer","link":"https://stackoverflow.com/users/8697391/lukas-bauer"},"comment_count":3,"is_accepted":false,"score":22,"last_activity_date":1567464637,"last_edit_date":1567464637,"creation_date":1507316422,"answer_id":46612299,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Use <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\" rel=\"nofollow noreferrer\"><code>Integer.parseInt(yourString)</code></a>.</p>\n\n<p><strong>Remember the following things:</strong></p>\n\n<p><code>Integer.parseInt(\"1\");</code>      // ok</p>\n\n<p><code>Integer.parseInt(\"-1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\"+1\");</code>     // ok</p>\n\n<p><code>Integer.parseInt(\" 1\");</code>     // Exception (blank space)</p>\n\n<p><code>Integer.parseInt(\"2147483648\");</code> // Exception (Integer is limited to a <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#MAX_VALUE\" rel=\"nofollow noreferrer\">maximum value</a> of 2,147,483,647)</p>\n\n<p><code>Integer.parseInt(\"1.1\");</code> // Exception (<strong>.</strong> or <strong>,</strong> or whatever is not allowed)</p>\n\n<p><code>Integer.parseInt(\"\");</code> // Exception (not 0 or something)</p>\n\n<p>There is only one type of exception: <a href=\"http://docs.oracle.com/javase/9/docs/api/java/lang/NumberFormatException.html\" rel=\"nofollow noreferrer\"><code>NumberFormatException</code></a></p>\n"},{"owner":{"reputation":483,"user_id":5693350,"user_type":"registered","accept_rate":44,"profile_image":"https://www.gravatar.com/avatar/3ac191a00d3f68a2c6bd33f2f52ed547?s=128&d=identicon&r=PG&f=1","display_name":"David","link":"https://stackoverflow.com/users/5693350/david"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1519252408,"last_edit_date":1519252408,"creation_date":1510365497,"answer_id":47233589,"question_id":5585779,"content_license":"CC BY-SA 3.0","body":"<p>Use Integer.parseInt() and put it inside a <code>try...catch</code> block to handle any errors just in case a non-numeric character is entered, for example,</p>\n\n<pre><code>private void ConvertToInt(){\n    String string = txtString.getText();\n    try{\n        int integerValue=Integer.parseInt(string);\n        System.out.println(integerValue);\n    }\n    catch(Exception e){\n       JOptionPane.showMessageDialog(\n         \"Error converting string to integer\\n\" + e.toString,\n         \"Error\",\n         JOptionPane.ERROR_MESSAGE);\n    }\n }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":18141,"user_id":125562,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/SdIqA.png?s=128&g=1","display_name":"Basilevs","link":"https://stackoverflow.com/users/125562/basilevs"},"edited":false,"score":1,"creation_date":1598548786,"post_id":49989721,"comment_id":112502428,"content_license":"CC BY-SA 4.0","body":"<a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer(java.lang.String)\" rel=\"nofollow noreferrer\">Integer constructors are derpecated</a>"}],"owner":{"reputation":2633,"user_id":2564509,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7ee271c732af6e0cfb7ae33d2c277b4d?s=128&d=identicon&r=PG","display_name":"djm.im","link":"https://stackoverflow.com/users/2564509/djm-im"},"comment_count":1,"is_accepted":false,"score":7,"last_activity_date":1598610523,"last_edit_date":1598610523,"creation_date":1524516550,"answer_id":49989721,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>I am a little bit surprised that nobody mentioned the Integer constructor that takes String as a parameter.</p>\n<p>So, here it is:</p>\n<pre><code>String myString = &quot;1234&quot;;\nint i1 = new Integer(myString);\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">Java 8 - Integer(String)</a>.</p>\n<p>Of course, the constructor will return type <code>Integer</code>, and an unboxing operation converts the value to <code>int</code>.</p>\n<hr />\n<p><em>Note 1: It's important to mention</em>: This constructor calls the <code>parseInt</code> method.</p>\n<pre><code>public Integer(String var1) throws NumberFormatException {\n    this.value = parseInt(var1, 10);\n}\n</code></pre>\n<p><em>Note 2: It's deprecated</em>: <code>@Deprecated(since=&quot;9&quot;)</code> - <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Integer.html#Integer-java.lang.String-\" rel=\"nofollow noreferrer\">JavaDoc</a>.</p>\n"},{"owner":{"reputation":1170,"user_id":8111997,"user_type":"registered","profile_image":"https://i.stack.imgur.com/9g7aA.jpg?s=128&g=1","display_name":"Poorna Senani Gamage","link":"https://stackoverflow.com/users/8111997/poorna-senani-gamage"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1567464411,"last_edit_date":1567464411,"creation_date":1532681103,"answer_id":51554190,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><strong>public static int parseInt(String s)throws NumberFormatException</strong></p>\n\n<p>You can use <code>Integer.parseInt()</code> to convert a String to an int.</p>\n\n<p>Convert a String, \"20\", to a primitive int:</p>\n\n<pre><code>String n = \"20\";\nint r = Integer.parseInt(n); // Returns a primitive int\nSystem.out.println(r);\n</code></pre>\n\n<blockquote>\n  <p>Output-20</p>\n</blockquote>\n\n<p>If the string does not contain a parsable integer, it will throw <code>NumberFormatException</code>:</p>\n\n<pre><code>String n = \"20I\"; // Throws NumberFormatException\nint r = Integer.parseInt(n);\nSystem.out.println(r);\n</code></pre>\n\n<p><strong>public static Integer valueOf(String s)throws NumberFormatException</strong></p>\n\n<p>You can use <code>Integer.valueOf()</code>. In this it will return an <code>Integer</code> object.</p>\n\n<pre><code>String n = \"20\";\nInteger r = Integer.valueOf(n); // Returns a new Integer() object.\nSystem.out.println(r);\n</code></pre>\n\n<blockquote>\n  <p>Output-20</p>\n</blockquote>\n\n<p>References\n<a href=\"https://docs.oracle.com/en/\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/</a></p>\n"},{"owner":{"reputation":197,"user_id":9487096,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-yBBSS4EZOOM/AAAAAAAAAAI/AAAAAAAAACg/5LXUu5AuclQ/photo.jpg?sz=128","display_name":"Ram Chhabra","link":"https://stackoverflow.com/users/9487096/ram-chhabra"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1551692548,"last_edit_date":1551692548,"creation_date":1536314384,"answer_id":52220091,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Try this code with different inputs of <code>String</code>:</p>\n\n<pre><code>String a = \"10\";  \nString a = \"10ssda\";  \nString a = null; \nString a = \"12102\";\n\nif(null != a) {\n    try {\n        int x = Integer.ParseInt(a.trim()); \n        Integer y = Integer.valueOf(a.trim());\n        //  It will throw a NumberFormatException in case of invalid string like (\"10ssda\" or \"123 212\") so, put this code into try catch\n    } catch(NumberFormatException ex) {\n        // ex.getMessage();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":6962,"user_id":1401019,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/bD72E.jpg?s=128&g=1","display_name":"Sundararaj Govindasamy","link":"https://stackoverflow.com/users/1401019/sundararaj-govindasamy"},"edited":false,"score":0,"creation_date":1549383854,"post_id":52291455,"comment_id":95878893,"content_license":"CC BY-SA 4.0","body":"NumberUtils handles null and empty scenarios as well."}],"owner":{"reputation":1281,"user_id":3805521,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/vcpS8.jpg?s=128&g=1","display_name":"Santosh Jadi","link":"https://stackoverflow.com/users/3805521/santosh-jadi"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1597118985,"last_edit_date":1597118985,"creation_date":1536743224,"answer_id":52291455,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><strong>It can be done in seven ways:</strong></p>\n<pre><code>import com.google.common.primitives.Ints;\nimport org.apache.commons.lang.math.NumberUtils;\n\nString number = &quot;999&quot;;\n</code></pre>\n<ol>\n<li><p><code>Ints.tryParse</code>:</p>\n<p>int result = Ints.tryParse(number);</p>\n</li>\n<li><p><code>NumberUtils.createInteger</code>:</p>\n<p>Integer result = NumberUtils.createInteger(number);</p>\n</li>\n<li><p><code>NumberUtils.toInt</code>:</p>\n<p>int result = NumberUtils.toInt(number);</p>\n</li>\n<li><p><code>Integer.valueOf</code>:</p>\n<p>Integer result = Integer.valueOf(number);</p>\n</li>\n<li><p><code>Integer.parseInt</code>:</p>\n<p>int result = Integer.parseInt(number);</p>\n</li>\n<li><p><code>Integer.decode</code>:</p>\n<p>int result = Integer.decode(number);</p>\n</li>\n<li><p><code>Integer.parseUnsignedInt</code>:</p>\n<p>int result = Integer.parseUnsignedInt(number);</p>\n</li>\n</ol>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1567464199,"post_id":53228578,"comment_id":101962346,"content_license":"CC BY-SA 4.0","body":"Why is <code>s.trim()</code> necessary?"}],"owner":{"reputation":1569,"user_id":5517435,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8af58c63aea05edd701ebaa666ad5c92?s=128&d=identicon&r=PG&f=1","display_name":"Nisarg","link":"https://stackoverflow.com/users/5517435/nisarg"},"comment_count":1,"is_accepted":false,"score":1,"last_activity_date":1567464051,"last_edit_date":1567464051,"creation_date":1541777052,"answer_id":53228578,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Convert a string to an integer with the <code>parseInt</code> method of the Java Integer class. The <code>parseInt</code> method is to convert the String to an int and throws a <code>NumberFormatException</code> if the string cannot be converted to an int type.</p>\n\n<p>Overlooking the exception it can throw, use this:</p>\n\n<pre><code>int i = Integer.parseInt(myString);\n</code></pre>\n\n<p>If the String signified by the variable <code>myString</code> is a valid integer like <code>â1234â, â200â, â1â,</code> and it will be converted to a Java int. If it fails for any reason, the change can throw a <code>NumberFormatException</code>, so the code should be a little longer to account for this.</p>\n\n<p>For example, Java <code>String</code> to <code>int</code> conversion method, control for a possible <code>NumberFormatException</code></p>\n\n<pre><code>public class JavaStringToIntExample\n{\n  public static void main (String[] args)\n  {\n    // String s = \"test\";  // Use this if you want to test the exception below\n    String s = \"1234\";\n\n    try\n    {\n      // The String to int conversion happens here\n      int i = Integer.parseInt(s.trim());\n\n      // Print out the value after the conversion\n      System.out.println(\"int i = \" + i);\n    }\n    catch (NumberFormatException nfe)\n    {\n      System.out.println(\"NumberFormatException: \" + nfe.getMessage());\n    }\n  }\n}\n</code></pre>\n\n<p>If the change attempt fails â in this case, if you can try to convert the Java String test to an int â the Integer <code>parseInt</code> process will throw a <code>NumberFormatException</code>, which you must handle in a try/catch block.</p>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":1,"creation_date":1567463704,"post_id":53921506,"comment_id":101962269,"content_license":"CC BY-SA 4.0","body":"Some explanation would be in order."}],"owner":{"reputation":227,"user_id":4464360,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/ME9CE.jpg?s=128&g=1","display_name":"Abhijeet Kale","link":"https://stackoverflow.com/users/4464360/abhijeet-kale"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1551692701,"last_edit_date":1551692701,"creation_date":1545733985,"answer_id":53921506,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<pre><code>import java.util.*;\n\npublic class strToint {\n\n    public static void main(String[] args) {\n\n        String str = \"123\";\n        byte barr[] = str.getBytes();\n\n        System.out.println(Arrays.toString(barr));\n        int result = 0;\n\n        for(int i = 0; i &lt; barr.length; i++) {\n            //System.out.print(barr[i]+\" \");\n            int ii = barr[i];\n            char a = (char) ii;\n            int no = Character.getNumericValue(a);\n            result = result * 10 + no;\n            System.out.println(result);\n        }\n\n        System.out.println(\"result:\"+result);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2030,"user_id":7449706,"user_type":"registered","profile_image":"https://graph.facebook.com/1302265936460934/picture?type=large","display_name":"Kevin Ng","link":"https://stackoverflow.com/users/7449706/kevin-ng"},"edited":false,"score":0,"creation_date":1567836691,"post_id":54282976,"comment_id":102091792,"content_license":"CC BY-SA 4.0","body":"Thank you, Peter, for making an edit for me.  It looked pretty good. I was wondering if you can help me making a project based almost on this code that I started to become better. This is the link to the project <a href=\"https://github.com/kevinhng86/Java-host.fai.lib.faiNumber\" rel=\"nofollow noreferrer\">github.com/kevinhng86/Java-host.fai.lib.faiNumber</a> ."},{"owner":{"reputation":2030,"user_id":7449706,"user_type":"registered","profile_image":"https://graph.facebook.com/1302265936460934/picture?type=large","display_name":"Kevin Ng","link":"https://stackoverflow.com/users/7449706/kevin-ng"},"edited":false,"score":0,"creation_date":1567836850,"post_id":54282976,"comment_id":102091823,"content_license":"CC BY-SA 4.0","body":"Also, to clarify. The reason why having the power array method ran faster is that Java cached the result for this type of test code. I tested, in a real-life situation, using bit shift will work way faster."}],"owner":{"reputation":2030,"user_id":7449706,"user_type":"registered","profile_image":"https://graph.facebook.com/1302265936460934/picture?type=large","display_name":"Kevin Ng","link":"https://stackoverflow.com/users/7449706/kevin-ng"},"comment_count":2,"is_accepted":false,"score":0,"last_activity_date":1567463538,"last_edit_date":1567463538,"creation_date":1548039520,"answer_id":54282976,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>I wrote this fast method to parse a string input into int or long. It is faster than the current JDK 11 Integer.parseInt or Long.parseLong. Although, you only asked for int, I also included the long parser. The code parser below requires that the parser's method must be small for it to operate quickly. An alternative version is below the test code. The alternative version is pretty quick and it does not depend on the size of the class.</p>\n\n<p>This class checks for overflow, and you could customize the code to adapt to your needs. An empty string will yield 0 with my method but that is intentional. You can change that to adapt your case or use as is.</p>\n\n<p>This is only the part of the class where parseInt and parseLong are needed. Note that this only deals with base 10 numbers.</p>\n\n<p>The test code for the int parser is below the code below.</p>\n\n<pre><code>/*\n * Copyright 2019 Khang Hoang Nguyen\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n * @author: Khang Hoang Nguyen - kevin@fai.host.\n **/\nfinal class faiNumber{\n    private static final long[] longpow = {0L, 1L, 10L, 100L, 1000L, 10000L, 100000L, 1000000L, 10000000L, 100000000L, 1000000000L,\n                                           10000000000L, 100000000000L, 1000000000000L, 10000000000000L, 100000000000000L,\n                                           1000000000000000L, 10000000000000000L, 100000000000000000L, 1000000000000000000L,\n                                          };\n\n    private static final int[] intpow = { 0, 1, 10, 100, 1000, 10000,\n                                          100000, 1000000, 10000000, 100000000, 1000000000\n                                        };\n\n    /**\n     * parseLong(String str) parse a String into Long.\n     * All errors throw by this method is NumberFormatException.\n     * Better errors can be made to tailor to each use case.\n     **/\n    public static long parseLong(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0L;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        /*\n         * Note: if length &gt; 19, possible scenario is to run through the string\n         * to check whether the string contains only valid digits.\n         * If the check had only valid digits then a negative sign meant underflow, else, overflow.\n         */\n        if (length - start &gt; 19)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n\n        long c;\n        long out = 0L;\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9L)\n                throw new NumberFormatException( String.format(\"Not a valid long value. Input '%s'.\", str) );\n            out += c * longpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1L;\n            // If out &gt; 0 number underflow(supposed to be negative).\n            if (out &gt; 0L)\n                throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n            return out;\n        }\n        // If out &lt; 0 number overflow (supposed to be positive).\n        if (out &lt; 0L)\n            throw new NumberFormatException(String.format(\"Not a valid long value. Input '%s'.\", str));\n        return out;\n    }\n\n    /**\n     * parseInt(String str) parse a string into an int.\n     * return 0 if string is empty.\n     **/\n    public static int parseInt(final String str) {\n        final int length = str.length();\n        if (length == 0)\n            return 0;\n\n        char c1 = str.charAt(0);\n        int start;\n\n        if (c1 == '-' || c1 == '+') {\n            if (length == 1)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n            start = 1;\n        } else {\n            start = 0;\n        }\n\n        int out = 0; int c;\n        int runlen = length - start;\n\n        if (runlen &gt; 9) {\n            if (runlen &gt; 10)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n            c = (str.charAt(start) ^ '0'); // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            if (c &gt; 2)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start++];\n        }\n\n        for ( ; start &lt; length; start++) {\n            c = (str.charAt(start) ^ '0');\n            if (c &gt; 9)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            out += c * intpow[length - start];\n        }\n\n        if (c1 == '-') {\n            out = ~out + 1;\n            if (out &gt; 0)\n                throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n            return out;\n        }\n\n        if (out &lt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n}\n</code></pre>\n\n<p>Test Code Section. This should take around 200 seconds or so.</p>\n\n<pre><code>// Int Number Parser Test;\nlong start = System.currentTimeMillis();\nSystem.out.println(\"INT PARSER TEST\");\nfor (int i = Integer.MIN_VALUE; i != Integer.MAX_VALUE; i++){\n   if (faiNumber.parseInt(\"\"+i) != i)\n       System.out.println(\"Wrong\");\n   if (i == 0)\n       System.out.println(\"HalfWay Done\");\n}\n\nif (faiNumber.parseInt(\"\" + Integer.MAX_VALUE) != Integer.MAX_VALUE)\n    System.out.println(\"Wrong\");\nlong end = System.currentTimeMillis();\nlong result = (end - start);\nSystem.out.println(result);\n// INT PARSER END */\n</code></pre>\n\n<p>An alternative method which is also very fast. Note that array of int pow is not used, but a mathematical optimization of multiply by 10 by bit shifting.</p>\n\n<pre><code>public static int parseInt(final String str) {\n    final int length = str.length();\n    if (length == 0)\n        return 0;\n\n    char c1 = str.charAt(0);\n    int start;\n\n    if (c1 == '-' || c1 == '+') {\n        if (length == 1)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input '%s'.\", str));\n        start = 1;\n    } else {\n        start = 0;\n    }\n\n    int out = 0;\n    int c;\n    while (start &lt; length &amp;&amp; str.charAt(start) == '0')\n        start++; // &lt;-- This to disregard leading 0. It can be\n                 // removed if you know exactly your source\n                 // does not have leading zeroes.\n    int runlen = length - start;\n\n    if (runlen &gt; 9) {\n        if (runlen &gt; 10)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n\n        c = (str.charAt(start++) ^ '0');  // &lt;- Any number from 0 - 255 ^ 48 will yield greater than 9 except 48 - 57\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        if (c &gt; 2)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c; // &lt;- Alternatively this can just be out = c or c above can just be out;\n    }\n\n    for ( ; start &lt; length; start++) {\n        c = (str.charAt(start) ^ '0');\n        if (c &gt; 9)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        out = (out &lt;&lt; 1) + (out &lt;&lt; 3) + c;\n    }\n\n    if (c1 == '-') {\n        out = ~out + 1;\n        if (out &gt; 0)\n            throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n        return out;\n    }\n\n    if (out &lt; 0)\n        throw new NumberFormatException(String.format(\"Not a valid integer value. Input: '%s'.\", str));\n    return out;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":7589,"user_id":1364007,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2d106de3dec9586b56ed7f110497689e?s=128&d=identicon&r=PG","display_name":"Wai Ha Lee","link":"https://stackoverflow.com/users/1364007/wai-ha-lee"},"edited":false,"score":0,"creation_date":1560590124,"post_id":54561825,"comment_id":99793187,"content_license":"CC BY-SA 4.0","body":"Both examples are the same"}],"owner":{"reputation":13,"user_id":8082751,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7ae66e7f3c72f846622c7f4eb31e5f30?s=128&d=identicon&r=PG&f=1","display_name":"ishant kulshreshtha","link":"https://stackoverflow.com/users/8082751/ishant-kulshreshtha"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1569002308,"last_edit_date":1569002308,"creation_date":1549484031,"answer_id":54561825,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Some of the ways to convert <code>String</code> into <code>Int</code> are as follows:</p>\n\n<ol>\n<li><p>You can use <code>Integer.parseInt()</code>:</p>\n\n<pre><code>String test = \"4568\";\nint new = Integer.parseInt(test);\n</code></pre></li>\n<li><p>Also you can use <code>Integer.valueOf()</code>:</p>\n\n<pre><code>String test = \"4568\";\nint new = Integer.valueOf(test);\n</code></pre></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1598025512,"post_id":54631469,"comment_id":112333215,"content_license":"CC BY-SA 4.0","body":"This <i>appears</i> to be plagiarised from <a href=\"https://stackoverflow.com/questions/5585779/how-do-i-convert-a-string-to-an-int-in-java/46551829#46551829\">Dmytro Shvechikov&#39;s answer</a> (from 2017)."}],"owner":{"reputation":424,"user_id":6224955,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-NLuzffYg0lw/AAAAAAAAAAI/AAAAAAAAAmY/7q2McwtkGRA/photo.jpg?sz=128","display_name":"Rajeev Ranjan","link":"https://stackoverflow.com/users/6224955/rajeev-ranjan"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1598025438,"last_edit_date":1598025438,"creation_date":1549890950,"answer_id":54631469,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>You could use any of the following:</p>\n<ol>\n<li><code>Integer.parseInt(s)</code></li>\n<li><code>Integer.parseInt(s, radix)</code></li>\n<li><code>Integer.parseInt(s, beginIndex, endIndex, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s)</code></li>\n<li><code>Integer.parseUnsignedInt(s, radix)</code></li>\n<li><code>Integer.parseUnsignedInt(s, beginIndex, endIndex, radix) </code></li>\n<li><code>Integer.valueOf(s)</code></li>\n<li><code>Integer.valueOf(s, radix)</code></li>\n<li><code>Integer.decode(s)</code></li>\n<li><code>NumberUtils.toInt(s)</code></li>\n<li><code>NumberUtils.toInt(s, defaultValue)</code></li>\n</ol>\n"},{"owner":{"reputation":304,"user_id":8258208,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4c5ccebc6005d7974048fc9e98984e1a?s=128&d=identicon&r=PG&f=1","display_name":"mohamad sheikhi","link":"https://stackoverflow.com/users/8258208/mohamad-sheikhi"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1567462792,"last_edit_date":1567462792,"creation_date":1550481781,"answer_id":54743972,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Use this method:</p>\n\n<pre><code>public int ConvertStringToInt(String number) {\n    int num = 0;\n\n    try {\n        int newNumber = Integer.ParseInt(number);\n        num = newNumber;\n    } catch(Exception ex) {\n        num = 0;\n        Log.i(\"Console\", ex.toString);\n    }\n    return num;\n}\n</code></pre>\n"},{"owner":{"reputation":574,"user_id":4314962,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/10497d83b5b8895a34c1d19b0e5f448e?s=128&d=identicon&r=PG","display_name":"nabeghe","link":"https://stackoverflow.com/users/4314962/nabeghe"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1567462730,"last_edit_date":1567462730,"creation_date":1553476462,"answer_id":55330160,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><strong>Custom algorithm:</strong></p>\n\n<pre><code>public static int toInt(String value) {\n  int output = 0;\n  boolean isFirstCharacter = true;\n  boolean isNegativeNumber = false;\n  byte bytes[] = value.getBytes();\n  for (int i = 0; i &lt; bytes.length; i++) {\n    char c = (char) bytes[i];\n    if (!Character.isDigit(c)) {\n      isNegativeNumber = (c == '-');\n      if (!(isFirstCharacter &amp;&amp; (isNegativeNumber || c == '+'))) {\n        throw new NumberFormatException(\"For input string \\\"\" + value + \"\\\"\");\n      }\n    } else {\n      int number = Character.getNumericValue(c);\n      output = output * 10 + number;\n    }\n    isFirstCharacter = false;\n  }\n  if (isNegativeNumber)\n    output *= -1;\n  return output;\n}\n</code></pre>\n\n<p><strong>Another solution:</strong></p>\n\n<p>(Use the string <em>charAt</em> method instead of convert string to byte array)</p>\n\n<pre><code>public static int toInt(String value) {\n  int output = 0;\n  boolean isFirstCharacter = true;\n  boolean isNegativeNumber = false;\n  for (int i = 0; i &lt; value.length(); i++) {\n    char c = value.charAt(i);\n    if (!Character.isDigit(c)) {\n      isNegativeNumber = (c == '-');\n      if (!(isFirstCharacter &amp;&amp; (isNegativeNumber || c == '+'))) {\n        throw new NumberFormatException(\"For input string \\\"\" + value + \"\\\"\");\n      }\n    } else {\n      int number = Character.getNumericValue(c);\n      output = output * 10 + number;\n    }\n    isFirstCharacter = false;\n  }\n  if (isNegativeNumber)\n    output *= -1;\n  return output;\n}\n</code></pre>\n\n<p><strong>Examples:</strong></p>\n\n<pre><code>int number1 = toInt(\"20\");\nint number2 = toInt(\"-20\");\nint number3 = toInt(\"+20\");\nSystem.out.println(\"Numbers = \" + number1 + \", \" + number2 + \", \" + number3);\n\ntry {\n  toInt(\"20 Hadi\");\n} catch (NumberFormatException e) {\n  System.out.println(\"Error: \" + e.getMessage());\n}\n</code></pre>\n"},{"owner":{"reputation":2615,"user_id":9106684,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b7572f2a571bd2336bbf07564476721b?s=128&d=identicon&r=PG","display_name":"shellhub","link":"https://stackoverflow.com/users/9106684/shellhub"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1580056625,"last_edit_date":1580056625,"creation_date":1571747528,"answer_id":58504383,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://github.com/shellhub/Algorithms-Java/blob/master/src/main/java/maths/StringToInteger.java\" rel=\"nofollow noreferrer\">As I write on GitHub</a>:</p>\n\n<pre><code>public class StringToInteger {\n    public static void main(String[] args) {\n        assert parseInt(\"123\") == Integer.parseInt(\"123\");\n        assert parseInt(\"-123\") == Integer.parseInt(\"-123\");\n        assert parseInt(\"0123\") == Integer.parseInt(\"0123\");\n        assert parseInt(\"+123\") == Integer.parseInt(\"+123\");\n    }\n\n    /**\n     * Parse a string to integer\n     *\n     * @param s the string\n     * @return the integer value represented by the argument in decimal.\n     * @throws NumberFormatException if the {@code string} does not contain a parsable integer.\n     */\n    public static int parseInt(String s) {\n        if (s == null) {\n            throw new NumberFormatException(\"null\");\n        }\n        boolean isNegative = s.charAt(0) == '-';\n        boolean isPositive = s.charAt(0) == '+';\n        int number = 0;\n        for (int i = isNegative ? 1 : isPositive ? 1 : 0, length = s.length(); i &lt; length; ++i) {\n            if (!Character.isDigit(s.charAt(i))) {\n                throw new NumberFormatException(\"s=\" + s);\n            }\n            number = number * 10 + s.charAt(i) - '0';\n        }\n        return isNegative ? -number : number;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1598025654,"post_id":60640829,"comment_id":112333283,"content_license":"CC BY-SA 4.0","body":"Why is an empty <code>if</code> necessary? Why not just <code>Integer.parseInt(myString), out myInt</code>?"},{"owner":{"reputation":96,"user_id":12563335,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0e295212d524c1d4bb54278a4a8b4fe4?s=128&d=identicon&r=PG&f=1","display_name":"Sachini Witharana","link":"https://stackoverflow.com/users/12563335/sachini-witharana"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1598329163,"post_id":60640829,"comment_id":112415345,"content_license":"CC BY-SA 4.0","body":"@PeterMortensen without the if condition we cannot out myInt"}],"owner":{"reputation":96,"user_id":12563335,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0e295212d524c1d4bb54278a4a8b4fe4?s=128&d=identicon&r=PG&f=1","display_name":"Sachini Witharana","link":"https://stackoverflow.com/users/12563335/sachini-witharana"},"comment_count":2,"is_accepted":false,"score":1,"last_activity_date":1583945026,"creation_date":1583945026,"answer_id":60640829,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>By using this method you can avoid errors.</p>\n\n<pre><code>String myString = \"1234\";\nint myInt;\nif(Integer.parseInt(myString), out myInt){};\n</code></pre>\n"},{"comments":[{"owner":{"reputation":12146,"user_id":2985643,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/eaacaf1426f7e6d02914fcf99dc0a33b?s=128&d=identicon&r=PG&f=1","display_name":"skomisa","link":"https://stackoverflow.com/users/2985643/skomisa"},"edited":false,"score":1,"creation_date":1586662464,"post_id":60756484,"comment_id":108207747,"content_license":"CC BY-SA 4.0","body":"How does this add anything? There are several older answers that have already provided these approaches. Please read existing answers before posting."}],"owner":{"reputation":747,"user_id":11983766,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9f2baed8c6bcf1a7b3923e9311a7ed9f?s=128&d=identicon&r=PG&f=1","display_name":"Rohan Shah","link":"https://stackoverflow.com/users/11983766/rohan-shah"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1598025708,"last_edit_date":1598025708,"creation_date":1584618053,"answer_id":60756484,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>The two main ways to do this are using the method <code>valueOf()</code> and method <code>parseInt()</code> of the <code>Integer</code> class.</p>\n<p>Suppose you are given a String like this</p>\n<pre><code>String numberInString = &quot;999&quot;;\n</code></pre>\n<p>Then you can convert it into integer by using</p>\n<pre><code>int numberInInteger = Integer.parseInt(numberInString);\n</code></pre>\n<p>And alternatively, you can use</p>\n<pre><code>int numberInInteger = Integer.valueOf(numberInString);\n</code></pre>\n<p>But the thing here is, the method <code>Integer.valueOf()</code> has the following implementation in <code>Integer</code> class:</p>\n<pre><code>public static Integer valueOf(String var0, int var1) throws NumberFormatException {\n    return parseInt(var0, var1);\n}\n</code></pre>\n<p>As you can see, the <code>Integer.valueOf()</code> internally calls <code>Integer.parseInt()</code> itself.\nAlso, <code>parseInt()</code> returns an <code>int</code>, and <code>valueOf()</code> returns an <code>Integer</code></p>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1598025979,"post_id":61498228,"comment_id":112333431,"content_license":"CC BY-SA 4.0","body":"Re <i>&quot;You need to handle NumberFormatException for the string value issue&quot;</i>: How? By <i>avoiding it happening</i> altogether by one of these three methods? Can you <a href=\"https://stackoverflow.com/posts/61498228/edit\">make it</a> more clear (<b><i>without</i></b> &quot;Update: &quot;, &quot;Edit: &quot; or similar)?"}],"owner":{"reputation":137,"user_id":10852356,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-50NUH-GavqY/AAAAAAAAAAI/AAAAAAAAAII/vOleDtZoOgc/photo.jpg?sz=128","display_name":"garima garg","link":"https://stackoverflow.com/users/10852356/garima-garg"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1598025805,"last_edit_date":1598025805,"creation_date":1588151691,"answer_id":61498228,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>There are different ways of converting a string int value into an Integer data type value. You need to handle NumberFormatException for the string value issue.</p>\n<ol>\n<li><p>Integer.parseInt</p>\n<pre><code> foo = Integer.parseInt(myString);\n</code></pre>\n</li>\n<li><p>Integer.valueOf</p>\n<pre><code> foo = Integer.valueOf(myString);\n</code></pre>\n</li>\n<li><p>Using Java 8 Optional API</p>\n<pre><code> foo = Optional.of(myString).map(Integer::parseInt).get();\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1598026261,"post_id":62871425,"comment_id":112333543,"content_license":"CC BY-SA 4.0","body":"What are the magic numbers 48 and 57? Can&#39;t (named) constants be used?"}],"owner":{"reputation":37,"user_id":5788729,"user_type":"registered","profile_image":"https://i.stack.imgur.com/4D973.jpg?s=128&g=1","display_name":"Ajay Singh Meena","link":"https://stackoverflow.com/users/5788729/ajay-singh-meena"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1598026173,"last_edit_date":1598026173,"creation_date":1594626691,"answer_id":62871425,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>You can have your own implementations for this, like:</p>\n<pre><code>public class NumericStringToInt {\n\n    public static void main(String[] args) {\n        String str = &quot;123459&quot;;\n\n        int num = stringToNumber(str);\n        System.out.println(&quot;Number of &quot; + str + &quot; is: &quot; + num);\n    }\n\n    private static int stringToNumber(String str) {\n\n        int num = 0;\n        int i = 0;\n        while (i &lt; str.length()) {\n            char ch = str.charAt(i);\n            if (ch &lt; 48 || ch &gt; 57)\n                throw new NumberFormatException(&quot;&quot; + ch);\n            num = num * 10 + Character.getNumericValue(ch);\n            i++;\n        }\n        return num;\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":5159,"user_id":4797289,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/52b438826818a6987f6b7239e3fffd1a?s=128&d=identicon&r=PG&f=1","display_name":"Rasoul Miri","link":"https://stackoverflow.com/users/4797289/rasoul-miri"},"comment_count":0,"is_accepted":false,"score":-1,"last_activity_date":1599463579,"creation_date":1599463579,"answer_id":63773051,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>you can use their wayes:</p>\n<pre><code>String stringNumber = &quot;0123456789&quot;;\n</code></pre>\n<p>1- Use parseInt</p>\n<pre><code>try {\n   int number = Integer.parseInt(stringNumber);\n}catch (NumberFormatException e){\n   // Handel exception, mybe has space or alphabet \n}\n</code></pre>\n<p>2- Use valueOf</p>\n<pre><code>try {\n   int number = Integer.valueOf(stringNumber);\n}catch (NumberFormatException e){\n   // Handel exception, mybe has space or alphabet \n}\n</code></pre>\n"},{"owner":{"reputation":130,"user_id":9363081,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/090477ff046c0a1d81e6cc76a345532a?s=128&d=identicon&r=PG&f=1","display_name":"Dubstep","link":"https://stackoverflow.com/users/9363081/dubstep"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1600210734,"creation_date":1600210734,"answer_id":63910919,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>This can work,</p>\n<pre><code>Integer.parseInt(yourString);\n</code></pre>\n"},{"owner":{"reputation":59,"user_id":6336491,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-08rOO1btHiQ/AAAAAAAAAAI/AAAAAAAAAIM/HSsILk28ewk/photo.jpg?sz=128","display_name":"Yogesh","link":"https://stackoverflow.com/users/6336491/yogesh"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1606924919,"last_edit_date":1606924919,"creation_date":1606915500,"answer_id":65108967,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Apart from all these answer i found one new way, although it uses internally <code>Integer.parseInt()</code>,</p>\n<p>By using</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.util.converter.IntegerStringConverter;\n\nnew IntegerStringConverter().fromString(&quot;1234&quot;).intValue()\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>new IntegerStringConverter().fromString(&quot;1234&quot;)\n</code></pre>\n<p>Although it is a little bit costly as new objects get created, I just wanted to add as I learned a new way.</p>\n<p>Just go through <code>javafx.util.StringConverter&lt;T&gt;</code> class it helps to convert any wrapper class value to a string or vice versa.</p>\n"},{"owner":{"reputation":579,"user_id":6693783,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-6mGP5R993ak/AAAAAAAAAAI/AAAAAAAAGqo/BANYLiTzdds/photo.jpg?sz=128","display_name":"Bathri Nathan","link":"https://stackoverflow.com/users/6693783/bathri-nathan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1611926778,"last_edit_date":1611926778,"creation_date":1611926214,"answer_id":65955206,"question_id":5585779,"content_license":"CC BY-SA 4.0","body":"<p>Kindly use <strong>NumberUtils</strong> to parse integers from a string.</p>\n<ul>\n<li>This function could also handle the exception <strong>when the given string is too long.</strong></li>\n<li>We could also <strong>give default values</strong>.</li>\n</ul>\n<p>Here is the example code.</p>\n<pre><code>NumberUtils.toInt(&quot;00450&quot;);\nNumberUtils.toInt(&quot;45464646545645400000&quot;);\nNumberUtils.toInt(&quot;45464646545645400000&quot;, 0); // Where 0 is the default value.\n\noutput:\n450\n0\n0\n</code></pre>\n"}],"owner":{"reputation":40257,"user_id":537967,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/fd0de9b7a6fdcd9368f37e71484440fb?s=128&d=identicon&r=PG","display_name":"Unknown user","link":"https://stackoverflow.com/users/537967/unknown-user"},"comment_count":2,"is_answered":true,"view_count":6219220,"protected_date":1368887701,"accepted_answer_id":5585800,"answer_count":48,"score":3173,"last_activity_date":1611926778,"creation_date":1302200874,"last_edit_date":1516232968,"question_id":5585779,"link":"https://stackoverflow.com/questions/5585779/how-do-i-convert-a-string-to-an-int-in-java","title":"How do I convert a String to an int in Java?","body":"<p>How can I convert a <code>String</code> to an <code>int</code> in Java?</p>\n\n<p>My String contains only numbers, and I want to return the number it represents.</p>\n\n<p>For example, given the string <code>\"1234\"</code> the result should be the number <code>1234</code>.</p>\n"},{"tags":["java","serialization","serialversionuid"],"comments":[{"owner":{"reputation":173,"user_id":2319364,"user_type":"registered","accept_rate":17,"profile_image":"https://www.gravatar.com/avatar/27255950392b1629e8ed7ae93b36e84f?s=128&d=identicon&r=PG","display_name":"ceyun","link":"https://stackoverflow.com/users/2319364/ceyun"},"edited":false,"score":2,"creation_date":1572866914,"post_id":285793,"comment_id":103682087,"content_license":"CC BY-SA 4.0","body":"Find a good practise about serialversionUID; <a href=\"https://dzone.com/articles/what-is-serialversionuid\" rel=\"nofollow noreferrer\">dzone.com/articles/what-is-serialversionuid</a>"}],"answers":[{"comments":[{"owner":{"reputation":20138,"user_id":29182,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/af3daf5de4ebd0531d978fad803a46a0?s=128&d=identicon&r=PG","display_name":"Ziggy","link":"https://stackoverflow.com/users/29182/ziggy"},"edited":false,"score":345,"creation_date":1230794830,"post_id":285809,"comment_id":229815,"content_license":"CC BY-SA 2.5","body":"So, what you are saying essentially is that if a user did not understand all the above material, said user aught not bother worrying about serialization? I believe you answered the &quot;how?&quot; rather than explaining the &quot;why?&quot;. I, for one, do not understand why I aught bother with SerializableVersionUID."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"edited":false,"score":375,"creation_date":1230841566,"post_id":285809,"comment_id":230518,"content_license":"CC BY-SA 2.5","body":"The why is in the second paragraph: if you don&#39;t explicitly specify serialVersionUID, a value is generated automatically - but that&#39;s brittle because it&#39;s compiler implementation dependent."},{"owner":{"reputation":3682,"user_id":1392690,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/9c5Wg.png?s=128&g=1","display_name":"JohnMerlino","link":"https://stackoverflow.com/users/1392690/johnmerlino"},"edited":false,"score":17,"creation_date":1402852359,"post_id":285809,"comment_id":37422897,"content_license":"CC BY-SA 3.0","body":"And why does Eclipse say I need &quot;private static final long serialVersionUID = 1L;&quot; when I extend the Exception class?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":3682,"user_id":1392690,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/9c5Wg.png?s=128&g=1","display_name":"JohnMerlino","link":"https://stackoverflow.com/users/1392690/johnmerlino"},"edited":false,"score":22,"creation_date":1402857803,"post_id":285809,"comment_id":37424439,"content_license":"CC BY-SA 3.0","body":"@JohnMerlino: Well I wouldn&#39;t expect it to say you <i>need</i> one - but it may be <i>suggesting</i> one in order to help you serialize exceptions correctly. If you&#39;re not going to serialize them, you really don&#39;t need the constant."},{"owner":{"reputation":1288,"user_id":235635,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/62d78ca0ea3a49693d38df790554fddc?s=128&d=identicon&r=PG","display_name":"zpon","link":"https://stackoverflow.com/users/235635/zpon"},"reply_to_user":{"reputation":3682,"user_id":1392690,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/9c5Wg.png?s=128&g=1","display_name":"JohnMerlino","link":"https://stackoverflow.com/users/1392690/johnmerlino"},"edited":false,"score":16,"creation_date":1412768932,"post_id":285809,"comment_id":41187917,"content_license":"CC BY-SA 3.0","body":"@JohnMerlino, to answer the why part of you question: Exception implements <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html\" rel=\"nofollow noreferrer\">Serializable</a> and eclipse warns that you have not set an serialVersionUID, which would be a good idea (if you wan&#39;t to serialize the class) to avoid the problems that JonSkeet&#39;s post outlines."},{"owner":{"reputation":51654,"user_id":264052,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG","display_name":"smwikipedia","link":"https://stackoverflow.com/users/264052/smwikipedia"},"edited":false,"score":1,"creation_date":1419252910,"post_id":285809,"comment_id":43628532,"content_license":"CC BY-SA 3.0","body":"@JonSkeet So does it mean that besides having an identical class definition, I have to use exactly the same version number? How could I know that if I don&#39;t have a peek of the source code of the serialized class?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":51654,"user_id":264052,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/8ccbe08a132ba61eae9ff8984ca44e81?s=128&d=identicon&r=PG","display_name":"smwikipedia","link":"https://stackoverflow.com/users/264052/smwikipedia"},"edited":false,"score":7,"creation_date":1419252975,"post_id":285809,"comment_id":43628562,"content_license":"CC BY-SA 3.0","body":"@smwikipedia: To deserialize data? Yes. It would be odd to deserialize data for a class you didn&#39;t have the source to though. Binary serialization shouldn&#39;t (IMO) be used as a general purpose public protocol."},{"owner":{"reputation":1089,"user_id":294214,"user_type":"registered","accept_rate":58,"profile_image":"https://www.gravatar.com/avatar/56fc4c400bd45ba8121b7897b389361d?s=128&d=identicon&r=PG","display_name":"amertkara","link":"https://stackoverflow.com/users/294214/amertkara"},"reply_to_user":{"reputation":20138,"user_id":29182,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/af3daf5de4ebd0531d978fad803a46a0?s=128&d=identicon&r=PG","display_name":"Ziggy","link":"https://stackoverflow.com/users/29182/ziggy"},"edited":false,"score":2,"creation_date":1436545062,"post_id":285809,"comment_id":50674980,"content_license":"CC BY-SA 3.0","body":"@Ziggy If &quot; .. since the default serialVersionUID computation is highly sensitive to class details that may vary depending on compiler implementations, and can thus result in unexpected InvalidClassExceptions during deserialization.&quot; doesn&#39;t answer Why then I am afraid, I will have to ask you to define Why :D"},{"owner":{"reputation":3060,"user_id":4762502,"user_type":"registered","accept_rate":73,"profile_image":"https://lh3.googleusercontent.com/-JBluz4YbEjk/AAAAAAAAAAI/AAAAAAAAAKM/0RsG_lxMbLs/photo.jpg?sz=128","display_name":"notescrew","link":"https://stackoverflow.com/users/4762502/notescrew"},"edited":false,"score":1,"creation_date":1449219787,"post_id":285809,"comment_id":55921344,"content_license":"CC BY-SA 3.0","body":"@JonSkeet You have mentioned in your answer &quot;since such declarations apply only to the immediately declaring class--serialVersionUID fields are not useful as inherited members.&quot; could you please explain this? Because as I know if the parent class is serialized the child is also serialized by default, so do we need to declare SerialVersionUID for child as well?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":3060,"user_id":4762502,"user_type":"registered","accept_rate":73,"profile_image":"https://lh3.googleusercontent.com/-JBluz4YbEjk/AAAAAAAAAAI/AAAAAAAAAKM/0RsG_lxMbLs/photo.jpg?sz=128","display_name":"notescrew","link":"https://stackoverflow.com/users/4762502/notescrew"},"edited":false,"score":2,"creation_date":1449219865,"post_id":285809,"comment_id":55921390,"content_license":"CC BY-SA 3.0","body":"@proudandhonour: Yes, you should do so."},{"owner":{"reputation":3060,"user_id":4762502,"user_type":"registered","accept_rate":73,"profile_image":"https://lh3.googleusercontent.com/-JBluz4YbEjk/AAAAAAAAAAI/AAAAAAAAAKM/0RsG_lxMbLs/photo.jpg?sz=128","display_name":"notescrew","link":"https://stackoverflow.com/users/4762502/notescrew"},"edited":false,"score":0,"creation_date":1449219980,"post_id":285809,"comment_id":55921450,"content_license":"CC BY-SA 3.0","body":"@JonSkeet If I make it protected then what? Won&#39;t it inherited in child class?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":3060,"user_id":4762502,"user_type":"registered","accept_rate":73,"profile_image":"https://lh3.googleusercontent.com/-JBluz4YbEjk/AAAAAAAAAAI/AAAAAAAAAKM/0RsG_lxMbLs/photo.jpg?sz=128","display_name":"notescrew","link":"https://stackoverflow.com/users/4762502/notescrew"},"edited":false,"score":1,"creation_date":1449220349,"post_id":285809,"comment_id":55921631,"content_license":"CC BY-SA 3.0","body":"@proudandhonour: I don&#39;t know exactly what happens in those cases, but why not just declare it separately in each class, as the documentation implies?"},{"owner":{"reputation":1153,"user_id":3255525,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/frDd0.jpg?s=128&g=1","display_name":"JimLohse","link":"https://stackoverflow.com/users/3255525/jimlohse"},"edited":false,"score":2,"creation_date":1450631860,"post_id":285809,"comment_id":56508672,"content_license":"CC BY-SA 3.0","body":"Just my two cents this is an issue in Spark and other parallelization APIs that depend on serializing Java classes across a cluster."},{"owner":{"reputation":2874,"user_id":2769917,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1","display_name":"Asif Mushtaq","link":"https://stackoverflow.com/users/2769917/asif-mushtaq"},"edited":false,"score":1,"creation_date":1467142174,"post_id":285809,"comment_id":63605749,"content_license":"CC BY-SA 3.0","body":"@JonSkeet who generates default UID? JVM or Compiler/JDK?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":2874,"user_id":2769917,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1","display_name":"Asif Mushtaq","link":"https://stackoverflow.com/users/2769917/asif-mushtaq"},"edited":false,"score":1,"creation_date":1467142633,"post_id":285809,"comment_id":63606001,"content_license":"CC BY-SA 3.0","body":"@UnKnown: The serialization runtime - it&#39;s at execution time."},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":1,"creation_date":1497209802,"post_id":285809,"comment_id":75969975,"content_license":"CC BY-SA 3.0","body":"So, if I understand it correctly, manually specifying the uid is unsafer than letting the runtime generate it. Because sooner or later someone will forget to update it...."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":4,"creation_date":1497216565,"post_id":285809,"comment_id":75971946,"content_license":"CC BY-SA 3.0","body":"@user1050755: There are pros and cons each way, basically."},{"owner":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":1,"creation_date":1497231955,"post_id":285809,"comment_id":75974773,"content_license":"CC BY-SA 3.0","body":"I can&#39;t see any cons against letting the runtime use the class &quot;signature&quot;. Seems to be the perfect solution to me."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":9247,"user_id":1050755,"user_type":"registered","accept_rate":51,"profile_image":"https://www.gravatar.com/avatar/c944828c87e2f4809621a6087beaa8b1?s=128&d=identicon&r=PG","display_name":"user1050755","link":"https://stackoverflow.com/users/1050755/user1050755"},"edited":false,"score":5,"creation_date":1497246462,"post_id":285809,"comment_id":75978002,"content_license":"CC BY-SA 3.0","body":"@user1050755: So you&#39;re happy that changing your compiler, even if it wouldn&#39;t change any of the details of the fields themselves, could make any stored data unreadable? Or adding a public static method, which really shouldn&#39;t change serialization details? Having been bitten by exactly this sort of thing before, it&#39;s a very definite &quot;con&quot;. Now it could be that if the algorithm had been designed better, it would be okay - but with the way it <i>is</i> designed, it&#39;s bad news."},{"owner":{"reputation":107031,"user_id":878126,"user_type":"registered","accept_rate":51,"profile_image":"https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1","display_name":"android developer","link":"https://stackoverflow.com/users/878126/android-developer"},"edited":false,"score":2,"creation_date":1528101192,"post_id":285809,"comment_id":88362318,"content_license":"CC BY-SA 4.0","body":"Tip: If you&#39;ve forgotten to add the <code>serialVersionUIDfield</code>, and you wish to change the class without affecting it, you can check what is its value on the unmodified and set it on this class after you&#39;ve modified it, using this call (found from : stackoverflow.com/a/26822688/878126): <code>long serialVersionUID = ObjectStreamClass.lookup(YourClass.class).getSerialVersionUI&zwnj;&#8203;D();</code>"},{"owner":{"reputation":3483,"user_id":1679516,"user_type":"registered","profile_image":"https://i.stack.imgur.com/gxfhm.png?s=128&g=1","display_name":"Darrell Teague","link":"https://stackoverflow.com/users/1679516/darrell-teague"},"edited":false,"score":1,"creation_date":1531158267,"post_id":285809,"comment_id":89481429,"content_license":"CC BY-SA 4.0","body":"Much of this revolves around serialization and why it should probably NOT be used as an over-the-wire protocol or persistently stored and retrieved via deserialization. It effectively creates an implementation of &quot;equals&quot; at the class-level and without any reasonable method across JVMs and countless apps/classes created by any number of developers to make this consistent/unique for a given class... creates a nuanced bug immediately for junior developers should they persist the class as serialized data and then let the compiler try to sort out the version of a class during deserialization."},{"owner":{"reputation":12414,"user_id":2039482,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/4EPA6.png?s=128&g=1","display_name":"bpoiss","link":"https://stackoverflow.com/users/2039482/bpoiss"},"edited":false,"score":2,"creation_date":1566217984,"post_id":285809,"comment_id":101575354,"content_license":"CC BY-SA 4.0","body":"So what will happen if I update my class but do not update the <code>serialVersionUIDfield</code>?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":12414,"user_id":2039482,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/4EPA6.png?s=128&g=1","display_name":"bpoiss","link":"https://stackoverflow.com/users/2039482/bpoiss"},"edited":false,"score":5,"creation_date":1566218279,"post_id":285809,"comment_id":101575547,"content_license":"CC BY-SA 4.0","body":"@bpoiss: Then it will try to deserialize old data with the new class, and will either cause errors or effectively corrupt data, depending on the exact change."}],"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"comment_count":23,"is_accepted":true,"score":2392,"last_activity_date":1610654094,"last_edit_date":1610654094,"creation_date":1226532615,"answer_id":285809,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>The docs for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Serializable.html\" rel=\"noreferrer\"><code>java.io.Serializable</code></a> are probably about as good an explanation as you'll get:</p>\n<blockquote>\n<p>The serialization runtime associates with each serializable class a version number, called a <code>serialVersionUID</code>, which is used during deserialization to verify that the sender and receiver of a serialized object have loaded classes for that object that are compatible with respect to serialization. If the receiver has loaded a class for the object that has a different <code>serialVersionUID</code> than that of the corresponding sender's class, then deserialization will result in an\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InvalidClassException.html\" rel=\"noreferrer\"><code>InvalidClassException</code></a>. A serializable class can declare its own <code>serialVersionUID</code> explicitly by declaring a field named <code>serialVersionUID</code> that must be static, final, and of type <code>long</code>:</p>\n</blockquote>\n<blockquote>\n<pre><code>ANY-ACCESS-MODIFIER static final long serialVersionUID = 42L;\n</code></pre>\n</blockquote>\n<blockquote>\n<p>If a serializable class does not explicitly declare a <code>serialVersionUID</code>, then the serialization runtime will calculate a default <code>serialVersionUID</code> value for that class based on various aspects of the class, as described in the Java(TM) Object Serialization Specification. However, it is <em>strongly recommended</em> that all serializable classes explicitly declare <code>serialVersionUID</code> values, since the default <code>serialVersionUID</code> computation is highly sensitive to class details that may vary depending on compiler implementations, and can thus result in unexpected <code>InvalidClassExceptions</code> during deserialization. Therefore, to guarantee a consistent <code>serialVersionUID</code> value across different java compiler implementations, a serializable class must declare an explicit <code>serialVersionUID</code> value. It is also strongly advised that explicit <code>serialVersionUID</code> declarations use the private modifier where possible, since such declarations apply only to the immediately declaring class â <code>serialVersionUID</code> fields are not useful as inherited members.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":247550,"user_id":3474,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ffbf4e85b8ffbae4e9039b9c0cf07bc8?s=128&d=identicon&r=PG","display_name":"erickson","link":"https://stackoverflow.com/users/3474/erickson"},"edited":false,"score":10,"creation_date":1226554491,"post_id":285811,"comment_id":135997,"content_license":"CC BY-SA 2.5","body":"If you&#39;re not going to serialize the objects, why are they Serializable?"},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":7,"creation_date":1238422359,"post_id":285811,"comment_id":510366,"content_license":"CC BY-SA 2.5","body":"@erickson - the parent class may be serializable, say, ArrayList, but you want your own object (say, a modified array list) to use it as a base but are never going to serialize the Collection that you create."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":5,"creation_date":1391735404,"post_id":285811,"comment_id":32664387,"content_license":"CC BY-SA 3.0","body":"It isn&#39;t mentioned anywhere in the Java Language Specification. It&#39;s mentioned in the Object Versioning Specification."},{"owner":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"edited":false,"score":4,"creation_date":1414987965,"post_id":285811,"comment_id":42007802,"content_license":"CC BY-SA 3.0","body":"Here is the link to the Java 8 <a href=\"http://docs.oracle.com/javase/8/docs/platform/serialization/spec/serialTOC.html\" rel=\"nofollow noreferrer\">Object Versioning Specification</a>."}],"owner":{"reputation":1226,"user_id":16201,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/649b51366f6875923d48a2bb6ca75ac7?s=128&d=identicon&r=PG","display_name":"eishay","link":"https://stackoverflow.com/users/16201/eishay"},"comment_count":4,"is_accepted":false,"score":39,"last_activity_date":1404931585,"last_edit_date":1404931585,"creation_date":1226532630,"answer_id":285811,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>If you will never need to serialize your objects to byte array and send/store them, then you don't need to worry about it. If you do, then you must consider your serialVersionUID since the deserializer of the object will match it to the version of object its classloader has. Read more about it in the Java Language Specification.</p>\n"},{"comments":[{"owner":{"reputation":20138,"user_id":29182,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/af3daf5de4ebd0531d978fad803a46a0?s=128&d=identicon&r=PG","display_name":"Ziggy","link":"https://stackoverflow.com/users/29182/ziggy"},"edited":false,"score":37,"creation_date":1230794915,"post_id":285827,"comment_id":229816,"content_license":"CC BY-SA 2.5","body":"So one might bother with SerializableVersionUID if one were concerned about compatibility w/ old versions of a class?"},{"owner":{"reputation":9149,"user_id":374499,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/baf65281d85e8019317cb96d94510606?s=128&d=identicon&r=PG","display_name":"Chander Shivdasani","link":"https://stackoverflow.com/users/374499/chander-shivdasani"},"edited":false,"score":11,"creation_date":1326484178,"post_id":285827,"comment_id":11063837,"content_license":"CC BY-SA 3.0","body":"Yup, in case if the newer version changes any public member to protected, the default SerializableVersionUID will be different and will raise an InvalidClassExceptions."},{"owner":{"reputation":8002,"user_id":887421,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/08a22e053b0b4cd9e1b62922258819fb?s=128&d=identicon&r=PG&f=1","display_name":"Achow","link":"https://stackoverflow.com/users/887421/achow"},"edited":false,"score":3,"creation_date":1362112709,"post_id":285827,"comment_id":21331605,"content_license":"CC BY-SA 3.0","body":"class Name, implemented interfaces, all public and protected methods,ALL instance variables."},{"owner":{"reputation":17017,"user_id":325742,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/sNS8v.png?s=128&g=1","display_name":"Ashutosh Jindal","link":"https://stackoverflow.com/users/325742/ashutosh-jindal"},"edited":false,"score":33,"creation_date":1404825935,"post_id":285827,"comment_id":38177778,"content_license":"CC BY-SA 3.0","body":"It is worth noting that Joshua Bloch advices that for <i>every</i> Serializable class it&#39;s worth specifying the serial version uid. Quote from chapter 11:   <i>Regardless of what serialized form you choose, declare an explicit serial version UID in every serializable class you write. This eliminates the serial version UID as a potential source of incompatibility (Item 74). There is also a small performance benefit. If no serial version UID is provided, an expensive computation is required to generate one at runtime.</i>"},{"owner":{"reputation":108,"user_id":7224691,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0411eb15d01be3dd57842f42b7498afb?s=128&d=identicon&r=PG&f=1","display_name":"Ben","link":"https://stackoverflow.com/users/7224691/ben"},"edited":false,"score":0,"creation_date":1608452966,"post_id":285827,"comment_id":115584660,"content_license":"CC BY-SA 4.0","body":"Seems relevant. A link to a couple approaches to generate the serial version UID using IDEs: <a href=\"https://mkyong.com/java/how-to-generate-serialversionuid/\" rel=\"nofollow noreferrer\">mkyong.com/java/how-to-generate-serialversionuid</a>"}],"owner":{"reputation":10051,"user_id":2495576,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/4dde4097258f44245bbadb0a08b5230a?s=128&d=identicon&r=PG","display_name":"Scott Bale","link":"https://stackoverflow.com/users/2495576/scott-bale"},"comment_count":5,"is_accepted":false,"score":319,"last_activity_date":1446125555,"last_edit_date":1446125555,"creation_date":1226533038,"answer_id":285827,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>I can't pass up this opportunity to plug Josh Bloch's book <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321356683\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Effective Java</a> (2nd Edition).  Chapter 11 is an indispensible resource on Java serialization.</p>\n\n<p>Per Josh, the automatically-generated UID is generated based on a class name, implemented interfaces, and all public and protected members.  Changing any of these in any way will change the <code>serialVersionUID</code>.  So you don't need to mess with them only if you are certain that no more than one version of the class will ever be serialized (either across processes or retrieved from storage at a later time).</p>\n\n<p>If you ignore them for now, and find later that you need to change the class in some way but maintain compatibility w/ old version of the class, you can use the JDK tool <strong>serialver</strong> to generate the <code>serialVersionUID</code> on the <em>old</em> class, and explicitly set that on the new class.  (Depending on your changes you may need to also implement custom serialization by adding <code>writeObject</code> and <code>readObject</code> methods - see <code>Serializable</code> javadoc or aforementioned chapter 11.)</p>\n"},{"comments":[{"owner":{"reputation":21774,"user_id":13687,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/83fd7d4059fec16d3f138f4f351b6423?s=128&d=identicon&r=PG","display_name":"John Gardner","link":"https://stackoverflow.com/users/13687/john-gardner"},"edited":false,"score":22,"creation_date":1226539711,"post_id":286006,"comment_id":135819,"content_license":"CC BY-SA 2.5","body":"upvote but only because the original poster doesn&#39;t appear to be serializing anything.  If the poster said &quot;i&#39;m serializing this thing and ...&quot; then you&#39;d get a vote down instead :P"},{"owner":{"reputation":131708,"user_id":4249,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c11c60c7e6d29cb4b87f3c0a3b692181?s=128&d=identicon&r=PG","display_name":"matt b","link":"https://stackoverflow.com/users/4249/matt-b"},"edited":false,"score":3,"creation_date":1226544728,"post_id":286006,"comment_id":135885,"content_license":"CC BY-SA 2.5","body":"True - I was assuming the questioner simply didn&#39;t want to be warned"},{"owner":{"reputation":20138,"user_id":29182,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/af3daf5de4ebd0531d978fad803a46a0?s=128&d=identicon&r=PG","display_name":"Ziggy","link":"https://stackoverflow.com/users/29182/ziggy"},"edited":false,"score":14,"creation_date":1230794975,"post_id":286006,"comment_id":229817,"content_license":"CC BY-SA 2.5","body":"@Gardner -&gt; agreed! But the questioner also wants to know why he might not want to be warned."},{"owner":{"reputation":917,"user_id":5218240,"user_type":"registered","accept_rate":86,"profile_image":"https://lh5.googleusercontent.com/-lr14bSsitOU/AAAAAAAAAAI/AAAAAAAATYc/yuSCjwCDkt8/photo.jpg?sz=128","display_name":"cinqS","link":"https://stackoverflow.com/users/5218240/cinqs"},"edited":false,"score":8,"creation_date":1492486298,"post_id":286006,"comment_id":73981846,"content_license":"CC BY-SA 3.0","body":"The questioner obviously cares about why there should be an UID. So simply telling him to ignore the warn should be downvoted."}],"owner":{"reputation":131708,"user_id":4249,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c11c60c7e6d29cb4b87f3c0a3b692181?s=128&d=identicon&r=PG","display_name":"matt b","link":"https://stackoverflow.com/users/4249/matt-b"},"comment_count":4,"is_accepted":false,"score":140,"last_activity_date":1226539020,"creation_date":1226539020,"answer_id":286006,"question_id":285793,"content_license":"CC BY-SA 2.5","body":"<p>You can tell Eclipse to ignore these serialVersionUID  warnings:</p>\n\n<blockquote>\n  <p>Window > Preferences > Java > Compiler > Errors / Warnings > Potential Programming Problems</p>\n</blockquote>\n\n<p>In case you didn't know, there are a lot of other warnings you can enable in this section (or even have some reported as errors), many are very useful:</p>\n\n<ul>\n<li>Potential Programming Problems: Possible accidental boolean assignment</li>\n<li>Potential Programming Problems: Null pointer access</li>\n<li>Unnecessary code: Local variable is never read</li>\n<li>Unnecessary code: Redundant null check</li>\n<li>Unnecessary code: Unnecessary cast or 'instanceof'</li>\n</ul>\n\n<p>and many more.</p>\n"},{"comments":[{"owner":{"reputation":42497,"user_id":116639,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG","display_name":"Tom Anderson","link":"https://stackoverflow.com/users/116639/tom-anderson"},"edited":false,"score":82,"creation_date":1303641804,"post_id":286254,"comment_id":6609683,"content_license":"CC BY-SA 3.0","body":"I&#39;d say that if you&#39;re not using serialization for permanent storage, you should use @SuppressWarnings rather than adding a value. It clutters the class less, and it preserves the abiity of the serialVersionUID mechanism to protect you from incompatible changes."},{"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"edited":false,"score":25,"creation_date":1303751386,"post_id":286254,"comment_id":6624658,"content_license":"CC BY-SA 3.0","body":"I don&#39;t see how adding one line (@SuppressWarnings annotation) as opposed to another line (serializable id) &quot;clutters the class less&quot;.  And if you&#39;re not using serialization for permanent storage, why wouldn&#39;t you just use &quot;1&quot;?  You would not care about the autogenerated ID in that case anyways."},{"owner":{"reputation":6412,"user_id":336656,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/21f9d9fb84dc64acfcf90569c1e945f6?s=128&d=identicon&r=PG","display_name":"AbdullahC","link":"https://stackoverflow.com/users/336656/abdullahc"},"reply_to_user":{"reputation":42497,"user_id":116639,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG","display_name":"Tom Anderson","link":"https://stackoverflow.com/users/116639/tom-anderson"},"edited":false,"score":72,"creation_date":1325255525,"post_id":286254,"comment_id":10792169,"content_license":"CC BY-SA 3.0","body":"@MetroidFan2002: I think @TomAnderson&#39;s point of <code>serialVersionUID</code> protecting you from incompatible changes is valid. Using <code>@SuppressWarnings</code> documents the intent better if you don&#39;t wish to use the class for permanent storage."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":11,"creation_date":1355273941,"post_id":286254,"comment_id":19035345,"content_license":"CC BY-SA 3.0","body":"&quot;You should increment it if the current version of your class is not backwards compatible with its previous version:&quot; You should first explore the extensive object versioning support of Serialization, (a) to ensure that the class really is now serialization-incompatible way, which per the specification is quite difficult to achieve; (b) to try a scheme such as custom read/writeObject() methods, readResolve/writeReplace() methods, serializableFields declarations, etc, to make sure that the stream remains compatible. Changing the actual <code>serialVersionUID</code> is a last resort, a counsel of despair."},{"owner":{"reputation":11253,"user_id":3317808,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1","display_name":"overexchange","link":"https://stackoverflow.com/users/3317808/overexchange"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":4,"creation_date":1419435578,"post_id":286254,"comment_id":43697182,"content_license":"CC BY-SA 3.0","body":"@EJP increment of serialVersionUID comes into picture when initial author of the class has introduced explicitly.I would say, jvm generated serial id, should be fine. this is the best <a href=\"http://stackoverflow.com/a/27601774/3317808\">answer</a> that i saw on serialisation."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"reply_to_user":{"reputation":11253,"user_id":3317808,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1","display_name":"overexchange","link":"https://stackoverflow.com/users/3317808/overexchange"},"edited":false,"score":0,"creation_date":1430738274,"post_id":286254,"comment_id":48173884,"content_license":"CC BY-SA 3.0","body":"@overexchange What does &#39;has introduced explicitly&#39; mean?"},{"owner":{"reputation":11253,"user_id":3317808,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1","display_name":"overexchange","link":"https://stackoverflow.com/users/3317808/overexchange"},"edited":false,"score":0,"creation_date":1430738872,"post_id":286254,"comment_id":48174256,"content_license":"CC BY-SA 3.0","body":"I mean declared explicitly"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"reply_to_user":{"reputation":11253,"user_id":3317808,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1","display_name":"overexchange","link":"https://stackoverflow.com/users/3317808/overexchange"},"edited":false,"score":0,"creation_date":1511601072,"post_id":286254,"comment_id":81923405,"content_license":"CC BY-SA 3.0","body":"@overexchange You mean &#39;declared&#39; <i>what</i> &#39;explicitly&#39;?"},{"owner":{"reputation":11253,"user_id":3317808,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1","display_name":"overexchange","link":"https://stackoverflow.com/users/3317808/overexchange"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1511601195,"post_id":286254,"comment_id":81923438,"content_license":"CC BY-SA 3.0","body":"@EJP Declared serialVersionUID explicitly."},{"owner":{"reputation":6765,"user_id":1262865,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/1c93afaf48cdb37ee73b67acb533e63c?s=128&d=identicon&r=PG","display_name":"john16384","link":"https://stackoverflow.com/users/1262865/john16384"},"edited":false,"score":0,"creation_date":1518260775,"post_id":286254,"comment_id":84439018,"content_license":"CC BY-SA 3.0","body":"If you&#39;re not using serialization (in like 99.9999% of the cases) just turn off this stupid default warning.  No pointless meaningless random numbers in your code and no unnecessary SuppressWarnings.  Jeez, every time I see code bases which &quot;workaround&quot; this warning I really wonder why they not simply turn off this warning (and perhaps activate a few that are more useful), instead of this zombie mentality to just &quot;fix&quot; the warning."},{"owner":{"reputation":1176,"user_id":4854931,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/060bc28b9269322a762c3419d18c3443?s=128&d=identicon&r=PG&f=1","display_name":"Alex78191","link":"https://stackoverflow.com/users/4854931/alex78191"},"reply_to_user":{"reputation":42497,"user_id":116639,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/30700279c97553494d9479ec7d667483?s=128&d=identicon&r=PG","display_name":"Tom Anderson","link":"https://stackoverflow.com/users/116639/tom-anderson"},"edited":false,"score":0,"creation_date":1528419204,"post_id":286254,"comment_id":88511858,"content_license":"CC BY-SA 4.0","body":"@TomAnderson No warning are shown in IDEA by default."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1564139091,"post_id":286254,"comment_id":100941731,"content_license":"CC BY-SA 4.0","body":"@overexchangeI agree entirely with @JBNizet&#39;s answer, but there is nothing there about incrementing the <code>serialVersionUID</code>. You should either leave it alone or change it to the newly computed value as reported by the <code>serialver</code> tool, having first thoroughly explored the alternatives I mentioned, and having even prior to that determined definitely that it really needs to change, which it usually doesn&#39;t. There is nothing to be gained by deliberately introducing incompatibilites, especially when gratuitous."}],"owner":{"reputation":27299,"user_id":8026,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/60929e8e0445f0070e501f5ded8ad348?s=128&d=identicon&r=PG","display_name":"MetroidFan2002","link":"https://stackoverflow.com/users/8026/metroidfan2002"},"comment_count":12,"is_accepted":false,"score":491,"last_activity_date":1550992644,"last_edit_date":1550992644,"creation_date":1226550297,"answer_id":286254,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>If you're serializing just because you have to serialize for the implementation's sake (who cares if you serialize for an <code>HTTPSession</code>, for instance...if it's stored or not, you probably don't care about <code>de-serializing</code> a form object), then you can ignore this.</p>\n\n<p>If you're actually using serialization, it only matters if you plan on storing and retrieving objects using serialization directly.  The <code>serialVersionUID</code> represents your class version, and you should increment it if the current version of your class is not backwards compatible with its previous version.</p>\n\n<p>Most of the time, you will probably not use serialization directly.  If this is the case, generate a default <code>SerialVersionUID</code> by clicking the quick fix option and don't worry about it.</p>\n"},{"comments":[{"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"edited":false,"score":8,"creation_date":1298167453,"post_id":337345,"comment_id":5659197,"content_license":"CC BY-SA 2.5","body":"If you set the serialVersionUID always to the same value the generator would produce, you don&#39;t really need it at all. After all, its raison d&#39;&#234;tre is to stay same after changes, when the class is still compatible."},{"owner":{"reputation":6947,"user_id":15127,"user_type":"registered","accept_rate":97,"profile_image":"https://www.gravatar.com/avatar/89061a4464c9f4770092a4941aee72b2?s=128&d=identicon&r=PG","display_name":"Andrew Backer","link":"https://stackoverflow.com/users/15127/andrew-backer"},"edited":false,"score":4,"creation_date":1312878563,"post_id":337345,"comment_id":8346569,"content_license":"CC BY-SA 3.0","body":"The reason is so that different compilers come up with the same value for the same class.  As explained in the javadocs (also answered above), the generated version is brittle and can vary even when the class is properly deserializable.  As long as you run this test on the same compiler each time, it should be safe.  god help you if you upgrade the jdk and a new rule comes out, even though you code didn&#39;t change."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":2,"creation_date":1391735445,"post_id":337345,"comment_id":32664399,"content_license":"CC BY-SA 3.0","body":"It&#39;s not required to match what <code>serialver</code> would produce. -1"},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"reply_to_user":{"reputation":6947,"user_id":15127,"user_type":"registered","accept_rate":97,"profile_image":"https://www.gravatar.com/avatar/89061a4464c9f4770092a4941aee72b2?s=128&d=identicon&r=PG","display_name":"Andrew Backer","link":"https://stackoverflow.com/users/15127/andrew-backer"},"edited":false,"score":0,"creation_date":1516914395,"post_id":337345,"comment_id":83896807,"content_license":"CC BY-SA 3.0","body":"In general it&#39;s not required at all.  @AndrewBacker&#39;s case would require two different compilers on the same .java file with both versions of the .class files communicating with each other--most of the time you just create the class and distribute it.  If that&#39;s the case, then not having an SUID would work fine."},{"owner":{"reputation":6765,"user_id":1262865,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/1c93afaf48cdb37ee73b67acb533e63c?s=128&d=identicon&r=PG","display_name":"john16384","link":"https://stackoverflow.com/users/1262865/john16384"},"edited":false,"score":1,"creation_date":1518261111,"post_id":337345,"comment_id":84439105,"content_license":"CC BY-SA 3.0","body":"People that truly use Serialization for purposes of storage / retrieval will generally set the <code>serialVersionUID</code> to 1.  If a newer version of the class is incompatible, but still requires to be able to handle the old data, you increment the version number and add special code to deal with older formats.  I cry every time I see a <code>serialVersionUID</code> larger than 1 digit, either because it was a random number (useless) or because the class apparently needs to deal with more than 10 different versions."}],"owner":{"user_type":"does_not_exist","display_name":"David Wright"},"comment_count":5,"is_accepted":false,"score":11,"last_activity_date":1228315473,"creation_date":1228315473,"answer_id":337345,"question_id":285793,"content_license":"CC BY-SA 2.5","body":"<p>It would be nice if CheckStyle could verify that the serialVersionUID on a class that implements Serializable has a good value, i.e. that it matches what the serial version id  generator would produce.  If you have a project with lots of serializable DTOs, for example, remembering to delete the existing serialVersionUID and regenerate it is a pain, and currently the only way (that I know of) to verify this is to regenerate for each class and compare to the old one.  This is very very painful.</p>\n"},{"comments":[{"owner":{"reputation":1893,"user_id":255830,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/782742f27b6e9da82b666f6d1dcc9d92?s=128&d=identicon&r=PG","display_name":"piepera","link":"https://stackoverflow.com/users/255830/piepera"},"edited":false,"score":4,"creation_date":1323271248,"post_id":4881563,"comment_id":10398149,"content_license":"CC BY-SA 3.0","body":"I think you&#39;re right that composition over inhneritance makes more sense, particularly when you&#39;re discussing classes such as ArrayList. However, many frameworks require people to extend from abstract superclasses which are serializable (such as Struts 1.2&#39;s ActionForm class, or Saxon&#39;s ExtensionFunctionDefinition) in which case this solution is infeasible.  I think you&#39;re right, it would be nice if the warning were ignored in certain cases (like if you were extending from an abstract serializable class)"},{"owner":{"reputation":1609,"user_id":884502,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/1f4a1119fab3984edda7b7809dc1e639?s=128&d=identicon&r=PG","display_name":"M_M","link":"https://stackoverflow.com/users/884502/m-m"},"edited":false,"score":2,"creation_date":1345414536,"post_id":4881563,"comment_id":16057015,"content_license":"CC BY-SA 3.0","body":"Surely if you add a class as a member, rather than inheriting from it, you would have to write a wrapper method for EVERY method of the member class that you wished to use, which would make it unfeasible in a large number of situations... unless java has a function similar to perl&#39;s <code>__AUTOLOAD</code>, which I don&#39;t know about."},{"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"reply_to_user":{"reputation":1609,"user_id":884502,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/1f4a1119fab3984edda7b7809dc1e639?s=128&d=identicon&r=PG","display_name":"M_M","link":"https://stackoverflow.com/users/884502/m-m"},"edited":false,"score":4,"creation_date":1345450196,"post_id":4881563,"comment_id":16063072,"content_license":"CC BY-SA 3.0","body":"@M_M: When you would delegate lots of methods to your wrapped object, of course it would not be appropriate to use delegation. But I suppose that this case is a sign of a design mistake - the users of your class (e.g. &quot;MainGui&quot;) shouldn&#39;t need to call lots of methods of the wrapped object (e.g. JFrame)."},{"owner":{"reputation":1624,"user_id":3009607,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/jHlAq.jpg?s=128&g=1","display_name":"WVrock","link":"https://stackoverflow.com/users/3009607/wvrock"},"edited":false,"score":1,"creation_date":1417245286,"post_id":4881563,"comment_id":42883606,"content_license":"CC BY-SA 3.0","body":"What I don&#39;t like about delegation is the need to hold a reference to the delegate. And every reference means more memory. Correct me if I&#39;m wrong. If I need a  CustomizedArrayList of 100 objects then this wouldn&#39;t matter much but if I need hundreds of CustomizdeArrayLists of a few objects then memory usage increases significantly."},{"owner":{"reputation":1409,"user_id":747739,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/63f7411b16341f1bc6c7ebdc791bc38f?s=128&d=identicon&r=PG","display_name":"Phil","link":"https://stackoverflow.com/users/747739/phil"},"edited":false,"score":2,"creation_date":1492052348,"post_id":4881563,"comment_id":73827461,"content_license":"CC BY-SA 3.0","body":"Throwable is serializable, and only Throwable is throwable, so it&#39;s not possible to define an exception that isn&#39;t serializable.  Delegation isn&#39;t possible."},{"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"reply_to_user":{"reputation":1409,"user_id":747739,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/63f7411b16341f1bc6c7ebdc791bc38f?s=128&d=identicon&r=PG","display_name":"Phil","link":"https://stackoverflow.com/users/747739/phil"},"edited":false,"score":0,"creation_date":1492501138,"post_id":4881563,"comment_id":73987823,"content_license":"CC BY-SA 3.0","body":"@Phil I think this is by design â even if you don&#39;t want to serialize your exception class, someone else might want to serialize an exception thrown by you. (Of course, one could argue that most exception classes should be fine with the auto-generated serialVersionUID and not need a fixed one.)"},{"owner":{"reputation":9752,"user_id":1786065,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/udTpS.png?s=128&g=1","display_name":"Rogue","link":"https://stackoverflow.com/users/1786065/rogue"},"reply_to_user":{"reputation":1624,"user_id":3009607,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/jHlAq.jpg?s=128&g=1","display_name":"WVrock","link":"https://stackoverflow.com/users/3009607/wvrock"},"edited":false,"score":0,"creation_date":1497361331,"post_id":4881563,"comment_id":76038464,"content_license":"CC BY-SA 3.0","body":"@WVrock Well, that wouldn&#39;t be any different if you had numerous <code>ArrayList</code> instances either. An instance of your wrapper class is a size on the order of bytes + the size of the arraylist, whereas through inheritence you would be initializing the same amount but under 1 class definition. References are light, the underlying objects are heavy."}],"owner":{"reputation":67931,"user_id":600500,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/5925786f174975db18cbc83dd85e5c1d?s=128&d=identicon&r=PG","display_name":"PaÅ­lo Ebermann","link":"https://stackoverflow.com/users/600500/pa%c5%adlo-ebermann"},"comment_count":7,"is_accepted":false,"score":34,"last_activity_date":1296693123,"creation_date":1296693123,"answer_id":4881563,"question_id":285793,"content_license":"CC BY-SA 2.5","body":"<p>If you get this warning on a class you don't ever think about serializing, and that you didn't declare yourself <code>implements Serializable</code>, it is often because you inherited from a superclass, which implements Serializable. Often then it would be better to delegate to such a object instead of using inheritance.</p>\n\n<p>So, instead of </p>\n\n<pre><code>public class MyExample extends ArrayList&lt;String&gt; {\n\n    public MyExample() {\n        super();\n    }\n    ...\n}\n</code></pre>\n\n<p>do</p>\n\n<pre><code>public class MyExample {\n    private List&lt;String&gt; myList;\n\n    public MyExample() {\n         this.myList = new ArrayList&lt;String&gt;();\n    }\n    ...\n}\n</code></pre>\n\n<p>and in the relevant methods call <code>myList.foo()</code> instead of <code>this.foo()</code> (or <code>super.foo()</code>). (This does not fit in all cases, but still quite often.)</p>\n\n<p>I often see people extending JFrame or such, when they really only need to delegate to this. (This also helps for auto-completing in a IDE, since JFrame has hundreds of methods, which you don't need when you want to call your custom ones on your class.)</p>\n\n<p>One case where the warning (or the serialVersionUID) is unavoidable is when you extend from AbstractAction, normally in a anonymous class, only adding the actionPerformed-method. I think there shouldn't be a warning in this case (since you normally can't reliable serialize and deserialize such anonymous classes anyway accross different versions of your class), but I'm not sure how the compiler could recognize this.</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":3,"creation_date":1521714644,"post_id":10373579,"comment_id":85853449,"content_license":"CC BY-SA 3.0","body":"Rubbish. It is adequate in the case where the class hasn&#39;t changed. You have zero evidence to support &#39;99.9999%&#39;."},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1604418294,"post_id":10373579,"comment_id":114338539,"content_license":"CC BY-SA 4.0","body":"The problem is not that it isn&#39;t &quot;good&quot;, but it isn&#39;t guaranteed to be consistent over different versions."}],"owner":{"reputation":671,"user_id":1364371,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9006e687716255b5e083ab6d5ecde64a?s=128&d=identicon&r=PG","display_name":"grand johnson","link":"https://stackoverflow.com/users/1364371/grand-johnson"},"comment_count":2,"is_accepted":false,"score":17,"last_activity_date":1335715181,"creation_date":1335715181,"answer_id":10373579,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>Don't bother, the default calculation is really good and suffice for 99,9999% of the cases. And if you run into problems, you can - as already stated - introduce UID's as the need arrise (which is highly unlikely)</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":4,"creation_date":1391735133,"post_id":12702699,"comment_id":32664308,"content_license":"CC BY-SA 3.0","body":"Adding or removing non-transient fields doesn&#39;t make the class serialization-incompatible. There is therefore no reason to &#39;bump it&#39; on such changes."},{"owner":{"reputation":16464,"user_id":83741,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG","display_name":"Alexander Torstling","link":"https://stackoverflow.com/users/83741/alexander-torstling"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":4,"creation_date":1391800361,"post_id":12702699,"comment_id":32695998,"content_license":"CC BY-SA 3.0","body":"@EJP: Huh? Adding data definitely changes the serialization data in my world."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":3,"creation_date":1400621271,"post_id":12702699,"comment_id":36553164,"content_license":"CC BY-SA 3.0","body":"@AlexanderTorstling Read what I wrote. I didn&#39;t say it doesn&#39;t &#39;change the serialization data&#39;. I said it &#39;doesn&#39;t make the class serialization-incompatible&#39;. It isn&#39;t the same thing. You need to read the Versioning chapter of the Object Serialization Specification."},{"owner":{"reputation":16464,"user_id":83741,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG","display_name":"Alexander Torstling","link":"https://stackoverflow.com/users/83741/alexander-torstling"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":3,"creation_date":1400654537,"post_id":12702699,"comment_id":36562936,"content_license":"CC BY-SA 3.0","body":"@EJP: I realize that adding a non-transient field  doesn&#39;t necessarily mean that you make the class serialization-incompatible, but it is a structural change which alters the serialized data and you usually want to bump the version when doing so unless you handle backwards compatibility, which I also explained later in the post. What is your point exactly?"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":4,"creation_date":1430738187,"post_id":12702699,"comment_id":48173833,"content_license":"CC BY-SA 3.0","body":"My point remains exactly what I said. Adding or removing non-transient fields doesn&#39;t make the class Serialization-incompatible.  You therefore don&#39;t need to bump the serialVersionUID every time you do so."}],"owner":{"reputation":16464,"user_id":83741,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG","display_name":"Alexander Torstling","link":"https://stackoverflow.com/users/83741/alexander-torstling"},"comment_count":5,"is_accepted":false,"score":117,"last_activity_date":1349245258,"last_edit_date":1349245258,"creation_date":1349244345,"answer_id":12702699,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p><code>serialVersionUID</code> facilitates versioning of serialized data. Its value is stored with the data when serializing. When de-serializing, the same version is checked to see how the serialized data matches the current code. </p>\n\n<p>If you want to version your data, you normally start with a <code>serialVersionUID</code> of 0, and bump it with every structural change to your class which alters the serialized data (adding or removing non-transient fields). </p>\n\n<p>The built-in de-serialization mechanism (<code>in.defaultReadObject()</code>) will refuse to de-serialize from old versions of the data. But if you want to you can define your own <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/input.html#2971\" rel=\"noreferrer\">readObject()</a>-function which can read back old data. This custom code can then check the <code>serialVersionUID</code> in order to know which version the data is in and decide how to de-serialize it. This versioning technique is useful if you store serialized data which survives several versions of your code.</p>\n\n<p>But storing serialized data for such a long time span is not very common. It is far more common to use the serialization mechanism to temporarily write data to for instance a cache or send it over the network to another program with the same version of the relevant parts of the codebase. </p>\n\n<p>In this case you are not interested in maintaining backwards compatibility. You are only concerned with making sure that the code bases which are communicating indeed have the same versions of relevant classes. In order to facilitate such a check, you must maintain the <code>serialVersionUID</code> just like before and not forget to update it when making changes to your classes. </p>\n\n<p>If you do forget to update the field, you might end up with two different versions of a class with different structure but with the same <code>serialVersionUID</code>. If this happens, the default mechanism (<code>in.defaultReadObject()</code>) will not detect any difference, and try to de-serialize incompatible data. Now you might end up with a cryptic runtime error or silent failure (null fields). These types of errors might be hard to find.</p>\n\n<p>So to help this usecase, the Java platform offers you a choice of not setting the <code>serialVersionUID</code> manually. Instead, a hash of the class structure will be generated at compile-time and used as id. This mechanism will make sure that you never have different class structures with the same id, and so you will not get these hard-to-trace runtime serialization failures mentioned above.</p>\n\n<p>But there is a backside to the auto-generated id strategy. Namely that the generated ids for the same class might differ between compilers (as mentioned by Jon Skeet above). So if you communicate serialized data between code compiled with different compilers, it is recommended to maintain the ids manually anyway. </p>\n\n<p>And if you are backwards-compatible with your data like in the first use case mentioned, you also probably want to maintain the id yourself. This in order to get readable ids and have greater control over when and how they change.</p>\n"},{"owner":{"reputation":241,"user_id":2165875,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a79a1cb0c9611fb8b1e92ac4750285ae?s=128&d=identicon&r=PG","display_name":"Mukti","link":"https://stackoverflow.com/users/2165875/mukti"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1363186476,"last_edit_date":1363186476,"creation_date":1363184813,"answer_id":15388086,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>Field data represents some information stored in the class.\nClass implements the <code>Serializable</code> interface, \nso eclipse automatically offered  to declare the <code>serialVersionUID</code> field. Lets start with value 1 set there.</p>\n\n<p>If you don't want that warning to come, use this:</p>\n\n<pre><code>@SuppressWarnings(\"serial\")\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4505,"user_id":1875434,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dc064a0af5b489a8a5aec8dcf53cc21e?s=128&d=identicon&r=PG","display_name":"abbas","link":"https://stackoverflow.com/users/1875434/abbas"},"edited":false,"score":0,"creation_date":1509068069,"post_id":15861472,"comment_id":80879955,"content_license":"CC BY-SA 3.0","body":"And one should assign a random long number, not 1L, to every UID."},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"reply_to_user":{"reputation":4505,"user_id":1875434,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dc064a0af5b489a8a5aec8dcf53cc21e?s=128&d=identicon&r=PG","display_name":"abbas","link":"https://stackoverflow.com/users/1875434/abbas"},"edited":false,"score":4,"creation_date":1511600298,"post_id":15861472,"comment_id":81923230,"content_license":"CC BY-SA 3.0","body":"@abbas &#39;One should&#39; do that why? Please explain what difference it makes."},{"owner":{"reputation":4505,"user_id":1875434,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dc064a0af5b489a8a5aec8dcf53cc21e?s=128&d=identicon&r=PG","display_name":"abbas","link":"https://stackoverflow.com/users/1875434/abbas"},"edited":false,"score":0,"creation_date":1511743142,"post_id":15861472,"comment_id":81960869,"content_license":"CC BY-SA 3.0","body":"As the name says, it represents the version of the class that was used to serialize the object. If you assign it the same number every time, you won&#39;t be able to find the right class to de-serialize it. So whenever you make a change in the class, it is better to change the version too."},{"owner":{"reputation":20767,"user_id":603516,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG","display_name":"Vadzim","link":"https://stackoverflow.com/users/603516/vadzim"},"reply_to_user":{"reputation":4505,"user_id":1875434,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dc064a0af5b489a8a5aec8dcf53cc21e?s=128&d=identicon&r=PG","display_name":"abbas","link":"https://stackoverflow.com/users/1875434/abbas"},"edited":false,"score":2,"creation_date":1513275699,"post_id":15861472,"comment_id":82601664,"content_license":"CC BY-SA 3.0","body":"@abbas, this intention doesn&#39;t clash with using incrementing natural numbers from <code>1</code> and so on."},{"owner":{"reputation":20767,"user_id":603516,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG","display_name":"Vadzim","link":"https://stackoverflow.com/users/603516/vadzim"},"reply_to_user":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":3,"creation_date":1516962404,"post_id":15861472,"comment_id":83911792,"content_license":"CC BY-SA 3.0","body":"@BillK, I thought serialization check is bound to the pair of classname and serialVersionUID. So different numbering schemes of different classes and libraries can&#39;t interfere in any way. Or did you imply code-generating libraries?"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"reply_to_user":{"reputation":4505,"user_id":1875434,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dc064a0af5b489a8a5aec8dcf53cc21e?s=128&d=identicon&r=PG","display_name":"abbas","link":"https://stackoverflow.com/users/1875434/abbas"},"edited":false,"score":0,"creation_date":1521714531,"post_id":15861472,"comment_id":85853344,"content_license":"CC BY-SA 3.0","body":"@abbas <code>serialVersionUID</code> doesn&#39;t have anything to do with &#39;find[ing] the right version of the class&#39;."},{"owner":{"reputation":1772,"user_id":257364,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/fd01dd06eefc977f4746b1ff55799c2b?s=128&d=identicon&r=PG","display_name":"Volksman","link":"https://stackoverflow.com/users/257364/volksman"},"edited":false,"score":0,"creation_date":1588415712,"post_id":15861472,"comment_id":108889392,"content_license":"CC BY-SA 4.0","body":"The thing I always found crazy was that the algorithm to derive serialVersionUID when none is explicitly declared is based on package, name, attributes but ALSO methods... methods are not serialized and adding/removing methods makes no difference to the serialized form of the object so why produce a different serialVersionUID when a method is added/deleted/changed&quot;?"}],"owner":{"reputation":2317,"user_id":1270989,"user_type":"registered","accept_rate":48,"profile_image":"https://i.stack.imgur.com/CcQbg.jpg?s=128&g=1","display_name":"Rupesh","link":"https://stackoverflow.com/users/1270989/rupesh"},"comment_count":7,"is_accepted":false,"score":59,"last_activity_date":1547477795,"last_edit_date":1547477795,"creation_date":1365331407,"answer_id":15861472,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>Original question has asked for 'why is it important' and 'example' where this <code>Serial Version ID</code> would be useful. Well I have found one.</p>\n\n<p>Say you create a <code>Car</code> class, instantiate it, and write it out to an object stream. The flattened car object sits in the file system for some time. Meanwhile, if the <code>Car</code> class is modified by adding a new field. Later on, when you try to read (i.e. deserialize) the flattened <code>Car</code> object, you get the <code>java.io.InvalidClassException</code> â because all serializable classes are automatically given a unique identifier. This exception is thrown when the identifier of the class is not equal to the identifier of the flattened object. If you really think about it, the exception is thrown because of the addition of the new field. You can avoid this exception being thrown by controlling the versioning yourself by declaring an explicit serialVersionUID. There is also a small performance benefit in explicitly declaring your <code>serialVersionUID</code> (because does not have to be calculated). So, it is best practice to add your own serialVersionUID to your Serializable classes as soon as you create them as shown below:</p>\n\n<pre><code>public class Car {\n    static final long serialVersionUID = 1L; //assign a long value\n}\n</code></pre>\n"},{"owner":{"reputation":3097,"user_id":1264138,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/sR3pc.jpg?s=128&g=1","display_name":"Henrique Ordine","link":"https://stackoverflow.com/users/1264138/henrique-ordine"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1387476918,"last_edit_date":1387476918,"creation_date":1369078357,"answer_id":16656980,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>As for an example where the missing serialVersionUID might cause a problem:</p>\n\n<p>I'm working on this Java EE application that is composed of a Web module that uses an <code>EJB</code> module. The web module calls the <code>EJB</code> module remotely and passes a <code>POJO</code> that implements <code>Serializable</code> as an argument.</p>\n\n<p>This <code>POJO's</code> class was packaged inside the EJB jar and inside it's own jar in the WEB-INF/lib of the web module. They're actually the same class, but when I package the EJB module I unpack this POJO's jar to pack it together with the EJB module.</p>\n\n<p>The call to the <code>EJB</code> was failing with the Exception below because I hadn't declared its <code>serialVersionUID</code>:</p>\n\n<pre><code>Caused by: java.io.IOException: Mismatched serialization UIDs : Source\n (Rep.\n IDRMI:com.hordine.pedra.softbudget.domain.Budget:5CF7CE11E6810A36:04A3FEBED5DA4588)\n = 04A3FEBED5DA4588 whereas Target (Rep. ID RMI:com.hordine.pedra.softbudget.domain.Budget:7AF5ED7A7CFDFF31:6227F23FA74A9A52)\n = 6227F23FA74A9A52\n</code></pre>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":2,"creation_date":1400621710,"post_id":16880322,"comment_id":36553346,"content_license":"CC BY-SA 3.0","body":"The algorithm doesn&#39;t vary, but it is slightly under-specified."},{"owner":{"reputation":960,"user_id":1092670,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/sZiEO.jpg?s=128&g=1","display_name":"AnthonyJClink","link":"https://stackoverflow.com/users/1092670/anthonyjclink"},"reply_to_user":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1567126875,"post_id":16880322,"comment_id":101880176,"content_license":"CC BY-SA 4.0","body":"... the algorithm doesn&#39;t vary, but it is slightly under-specified... meaning any jvm may vary..... @user207421"}],"owner":{"reputation":251,"user_id":2444506,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f439960718f0dcd01d26f47a791a599?s=128&d=identicon&r=PG","display_name":"Nitesh Soni","link":"https://stackoverflow.com/users/2444506/nitesh-soni"},"comment_count":2,"is_accepted":false,"score":22,"last_activity_date":1400621692,"last_edit_date":1400621692,"creation_date":1370154031,"answer_id":16880322,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>To understand the significance of field serialVersionUID, one should understand how Serialization/Deserialization works.</p>\n\n<p>When a Serializable class object is serialized Java Runtime associates a serial version no.(called as serialVersionUID) with this serialized object. At the time when you deserialize this serialized object Java Runtime matches the serialVersionUID of serialized object with the serialVersionUID of the class. If both are equal then only it proceeds with the further process of deserialization else throws InvalidClassException.</p>\n\n<p>So we conclude that to make Serialization/Deserialization process successful the serialVersionUID of serialized object must be equivalent to the serialVersionUID of the class. In case if programmer specifies the serialVersionUID value explicitly in the program then the same value will be associated with the serialized object and the class, irrespective of the serialization and deserialzation platform(for ex. serialization might be done on platform like windows by using sun or MS JVM and Deserialization might be on different platform Linux using Zing JVM).</p>\n\n<p>But in case if serialVersionUID is not specified by programmer then while doing Serialization\\DeSerialization  of any object, Java runtime uses its own algorithm to calculate it. This serialVersionUID calculation algorithm varies from one JRE to another. It is also possible that the environment where the object is serialized is using one JRE (ex: SUN JVM) and the environment where deserialzation happens is using Linux Jvm(zing). In such cases serialVersionUID associated with serialized object will be different than the serialVersionUID of class calculated at deserialzation environment. In turn deserialization will not be successful. So to avoid such situations/issues programmer must always specify serialVersionUID of Serializable class.</p>\n"},{"comments":[{"owner":{"reputation":488,"user_id":3041275,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/UUx25.png?s=128&g=1","display_name":"Kranthi Sama","link":"https://stackoverflow.com/users/3041275/kranthi-sama"},"edited":false,"score":3,"creation_date":1402916805,"post_id":19418317,"comment_id":37442460,"content_license":"CC BY-SA 3.0","body":"@Vinothbabu but serialVersionUID is static so static variables cannot be serialized. then how come jvm will check version, without knowing what is the version of the deserializing object"},{"owner":{"reputation":12784,"user_id":266531,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/619aaf27f793d8ffdbc879c74884c0cc?s=128&d=identicon&r=PG","display_name":"Kirby","link":"https://stackoverflow.com/users/266531/kirby"},"edited":false,"score":3,"creation_date":1403022651,"post_id":19418317,"comment_id":37493467,"content_license":"CC BY-SA 3.0","body":"The one thing not mentioned in this answer is that you may cause unintended consequences by blindly including <code>serialVersionUID</code> without knowing why. Tom Anderson&#39;s comment on MetroidFan2002&#39;s answer addresses this: &quot;I&#39;d say that if you&#39;re not using serialization for permanent storage, you should use @SuppressWarnings rather than adding a value. It clutters the class less, and it preserves the ability of the serialVersionUID mechanism to protect you from incompatible changes.&quot;"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":8,"creation_date":1433823438,"post_id":19418317,"comment_id":49503070,"content_license":"CC BY-SA 3.0","body":"<code>serialVersionUID</code> is <i>not</i> a &#39;unique identifier for each class&#39;. The fully-qualified class name is that. It is a <i>version</i> indicator."}],"owner":{"reputation":20456,"user_id":337128,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/Qo1Yy.jpg?s=128&g=1","display_name":"Thalaivar","link":"https://stackoverflow.com/users/337128/thalaivar"},"comment_count":3,"is_accepted":false,"score":76,"last_activity_date":1531033436,"last_edit_date":1531033436,"creation_date":1381984103,"answer_id":19418317,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>What is a <strong>serialVersionUID</strong> and why should I use it?</p>\n</blockquote>\n\n<p><code>SerialVersionUID</code> is a unique identifier for each class, <code>JVM</code> uses it to compare the versions of the class ensuring that the same class was used during Serialization is loaded during Deserialization.</p>\n\n<p>Specifying one gives more control, though JVM does generate one if you don't specify. The value generated can differ between different compilers. Furthermore, sometimes you just want for some reason to forbid deserialization of old serialized objects [<code>backward incompatibility</code>], and in this case you just have to change the serialVersionUID. </p>\n\n<p><strong>The <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html\" rel=\"noreferrer\">javadocs for <code>Serializable</code></a> say</strong>:</p>\n\n<blockquote>\n  <p>the default serialVersionUID computation is highly sensitive to class\n  details that may vary depending on compiler implementations, and can\n  thus result in unexpected <code>InvalidClassException</code>s during\n  deserialization.</p>\n</blockquote>\n\n<p><strong>Therefore, you must declare serialVersionUID because it give us more control</strong>.</p>\n\n<p><a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=45\" rel=\"noreferrer\">This article</a> has some good points on the topic.</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1400621776,"post_id":22177263,"comment_id":36553376,"content_license":"CC BY-SA 3.0","body":"It doesn&#39;t include HttpServlet in containers where they can be swapped out, or Exception in RMI for example."}],"owner":{"reputation":21546,"user_id":242042,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/a798a3d661375ece15776f83fbb80c2c?s=128&d=identicon&r=PG","display_name":"Archimedes Trajano","link":"https://stackoverflow.com/users/242042/archimedes-trajano"},"comment_count":1,"is_accepted":false,"score":16,"last_activity_date":1393949868,"creation_date":1393949868,"answer_id":22177263,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>I generally use <code>serialVersionUID</code> in one context:  When I know it will be leaving the context of the Java VM.  </p>\n\n<p>I would know this when I to use <code>ObjectInputStream</code> and <code>ObjectOutputStream</code> for my application or if I know a library/framework I use will use it.  The serialVersionID ensures different Java VMs of varying versions or vendors will inter-operate correctly or if it is stored and retrieved outside the VM for example <code>HttpSession</code> the session data can remain even during a restart and upgrade of the application server.</p>\n\n<p>For all other cases, I use </p>\n\n<pre><code>@SuppressWarnings(\"serial\")\n</code></pre>\n\n<p>since most of the time the default <code>serialVersionUID</code> is sufficient.  This includes <code>Exception</code>, <code>HttpServlet</code>.</p>\n"},{"owner":{"reputation":2501,"user_id":3875380,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/K4YDD.jpg?s=128&g=1","display_name":"Coder123","link":"https://stackoverflow.com/users/3875380/coder123"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1427317691,"creation_date":1427317691,"answer_id":29266546,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>SerialVersionUID is used for version control of object. you can specify serialVersionUID in your class file also. Consequence of not specifying serialVersionUID is that when you add or modify any field in class then already serialized class will not be able to recover because serialVersionUID generated for new class and for old serialized object will be different. Java serialization process relies on correct serialVersionUID for recovering state of serialized object and throws java.io.InvalidClassException in case of serialVersionUID mismatch</p>\n\n<p>Read more: <a href=\"http://javarevisited.blogspot.com/2011/04/top-10-java-serialization-interview.html#ixzz3VQxnpOPZ\">http://javarevisited.blogspot.com/2011/04/top-10-java-serialization-interview.html#ixzz3VQxnpOPZ</a></p>\n"},{"comments":[{"owner":{"reputation":9576,"user_id":1197045,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bc014d2173a1a5ea2c0417712ced8ff0?s=128&d=identicon&r=PG","display_name":"Ignazio","link":"https://stackoverflow.com/users/1197045/ignazio"},"edited":false,"score":2,"creation_date":1458237945,"post_id":31088833,"comment_id":59783006,"content_license":"CC BY-SA 3.0","body":"Gives me an idea: always regenerate the serial version uid with a tool like this, never by hand, before making a release - that way, you avoid forgetting to make a change to a class whose serial version uid should have changed because of an actual incompatible change. Keeping track of that manually is very hard."}],"owner":{"reputation":250,"user_id":3061706,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dd36c86ebf5d061d727e877e322266de?s=128&d=identicon&r=PG&f=1","display_name":"schnell18","link":"https://stackoverflow.com/users/3061706/schnell18"},"comment_count":1,"is_accepted":false,"score":8,"last_activity_date":1435408567,"creation_date":1435408567,"answer_id":31088833,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>If you want to amend a huge number of classes which had no serialVersionUID set in the first place while maintain the compatibility with the old classes, tools like IntelliJ Idea, Eclipse fall short as they generate random numbers and does not work on a bunch of files in one go. I come up the following bash script(I'm sorry for Windows users, consider buy a Mac or convert to Linux) to make amending serialVersionUID issue with ease:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>base_dir=$(pwd)                                                                  \nsrc_dir=$base_dir/src/main/java                                                  \nic_api_cp=$base_dir/target/classes                                               \n\nwhile read f                                                                     \ndo                                                                               \n    clazz=${f//\\//.}                                                             \n    clazz=${clazz/%.java/}                                                       \n    seruidstr=$(serialver -classpath $ic_api_cp $clazz | cut -d ':' -f 2 | sed -e 's/^\\s\\+//')\n    perl -ni.bak -e \"print $_; printf qq{%s\\n}, q{    private $seruidstr} if /public class/\" $src_dir/$f\ndone\n</code></pre>\n\n<p>you save the this script, say add_serialVersionUID.sh to you ~/bin. Then you run it in the root directory of your Maven or Gradle project like:</p>\n\n<pre><code>add_serialVersionUID.sh &lt; myJavaToAmend.lst\n</code></pre>\n\n<p>This .lst includes the list of java files to add the serialVersionUID in the following format:</p>\n\n<pre><code>com/abc/ic/api/model/domain/item/BizOrderTransDO.java\ncom/abc/ic/api/model/domain/item/CardPassFeature.java\ncom/abc/ic/api/model/domain/item/CategoryFeature.java\ncom/abc/ic/api/model/domain/item/GoodsFeature.java\ncom/abc/ic/api/model/domain/item/ItemFeature.java\ncom/abc/ic/api/model/domain/item/ItemPicUrls.java\ncom/abc/ic/api/model/domain/item/ItemSkuDO.java\ncom/abc/ic/api/model/domain/serve/ServeCategoryFeature.java\ncom/abc/ic/api/model/domain/serve/ServeFeature.java\ncom/abc/ic/api/model/param/depot/DepotItemDTO.java\ncom/abc/ic/api/model/param/depot/DepotItemQueryDTO.java\ncom/abc/ic/api/model/param/depot/InDepotDTO.java\ncom/abc/ic/api/model/param/depot/OutDepotDTO.java\n</code></pre>\n\n<p>This script uses the JDK serialVer tool under hood. So make sure your $JAVA_HOME/bin is in the PATH.</p>\n"},{"owner":{"reputation":21406,"user_id":102040,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/dbf44501979768be513fc1d001e4238e?s=128&d=identicon&r=PG","display_name":"Geek","link":"https://stackoverflow.com/users/102040/geek"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1438630891,"creation_date":1438630891,"answer_id":31795462,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>This question is very well documented in Effective Java by Joshua Bloch. A very good book and a must read. I will outline some of the reasons below :</p>\n\n<p>The serialization runtime comes up with a number called Serial version for each serializable class. This number is called serialVersionUID. Now there is some Math behind this number and it comes out based on the fields/methods that are defined in the class. For the same class the same version is generated every time. This number is used during deserialization to verify that the sender and receiver of a serialized object have loaded classes for that object that are compatible with respect to serialization. If the receiver has loaded a class for the object that has a different serialVersionUID than that of the corresponding sender's class, then deserialization will result in an InvalidClassException.</p>\n\n<p>If the class is serializable you can also declare your own serialVersionUID explicitly  by declaring a field named \"serialVersionUID\" that must be static, final, and of type long. Most IDE's like Eclipse help you generate that long string.</p>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":1,"creation_date":1511600406,"post_id":36681325,"comment_id":81923259,"content_license":"CC BY-SA 3.0","body":"Each time the <i>class</i> of an object is serialized the <code>serialVersionUID</code> is transmitted. It isn&#39;t sent with every object."}],"owner":{"reputation":508,"user_id":4142806,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/c2c6c.jpg?s=128&g=1","display_name":"Naved Ali","link":"https://stackoverflow.com/users/4142806/naved-ali"},"comment_count":1,"is_accepted":false,"score":6,"last_activity_date":1460969543,"last_edit_date":1495542885,"creation_date":1460922151,"answer_id":36681325,"question_id":285793,"content_license":"CC BY-SA 3.0","body":"<p>Each time an object is serialized the object is stamped with a version ID number for the object's class.This ID is called <a href=\"https://stackoverflow.com/q/285793/1387612\">serialVersionUID</a> and it is computed based on information about the class structure. Suppose you made an Employee class and it has version id #333 (assigned by JVM),Now when you will serialize the object of that class (Suppose Employee object), JVM will assign UID to it as #333.</p>\n\n<p>Consider a situation - in the future you need to edit or change your class and in that case when you modify it, JVM will assign it a new UID (Suppose #444).\nNow when you try to deserialize the employee object, JVM will compare serialized object's (Employee object) version ID(#333) with that of the class i.e #444(Since it was changed). On comparison JVM will find both version UID are different and hence Deserialization will fail.\nHence if serialVersionID for each class is defined by programmer itself. It will be same even if the class is evolved in future and hence JVM will always find that class is compatible with serialized object even though the class is changed. For more Info you can refer chapter 14 of HEAD FIRST JAVA.</p>\n"},{"owner":{"reputation":6153,"user_id":5167682,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/2vexc.jpg?s=128&g=1","display_name":"roottraveller","link":"https://stackoverflow.com/users/5167682/roottraveller"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1591328275,"last_edit_date":1591328275,"creation_date":1488865682,"answer_id":42641080,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p><strong>Why use <code>SerialVersionUID</code> inside <code>Serializable</code> class in Java?</strong></p>\n\n<p>During <code>serialization</code>, Java runtime creates a version number for a class, so that it can de-serialize it later. This version number is known as <code>SerialVersionUID</code> in Java.</p>\n\n<p><code>SerialVersionUID</code> is used to version serialized data. You can only de-serialize a class if it's <code>SerialVersionUID</code> matches with the serialized instance. When we don't declare <code>SerialVersionUID</code> in our class, Java runtime generates it for us but its not recommended. It's recommended to declare <code>SerialVersionUID</code> as <code>private static final long</code> variable to avoid default mechanism. </p>\n\n<p>When you declare a class as <code>Serializable</code> by implementing marker interface <code>java.io.Serializable</code>, Java runtime persist instance of that class into disk by using default Serialization mechanism, provided you have not customized the process using <code>Externalizable</code> interface.</p>\n\n<p>see also <a href=\"http://javarevisited.blogspot.com/2014/05/why-use-serialversionuid-inside-serializable-class-in-java.html\" rel=\"nofollow noreferrer\">Why use SerialVersionUID inside Serializable class in Java</a></p>\n"},{"comments":[{"owner":{"reputation":477,"user_id":2407369,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/3ab75cc461f20f7728c5fef1ba8e1b1f?s=128&d=identicon&r=PG","display_name":"Victor","link":"https://stackoverflow.com/users/2407369/victor"},"edited":false,"score":0,"creation_date":1591189410,"post_id":48374672,"comment_id":109960305,"content_license":"CC BY-SA 4.0","body":"Correct me if I&#39;m wrong - the local class is the one that you are currently having/using in the classpath and the stream one is the one used by another party (eg. a server that is returning you an answer and has serialized the response). You can encounter this situation when you are communicating with a server that has updated its 3rd party libs, but you (the client) did not yer done this."}],"owner":{"reputation":1573,"user_id":3230563,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/MnydM.jpg?s=128&g=1","display_name":"JegsVala","link":"https://stackoverflow.com/users/3230563/jegsvala"},"comment_count":1,"is_accepted":false,"score":49,"last_activity_date":1592822767,"last_edit_date":1592822767,"creation_date":1516595260,"answer_id":48374672,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>First I need to explain what serialization is.</p>\n<p><strong>Serialization</strong> allows to convert an object to a stream, for sending that object over the network OR Save to file OR save into DB for letter usage.</p>\n<p><em><strong>There are some rules for serialization</strong></em>.</p>\n<ul>\n<li><p>An object is serializable only if its class or its superclass implements the Serializable interface</p>\n</li>\n<li><p>An object is serializable (itself implements the Serializable interface) even if its superclass is not. However, the first superclass in the hierarchy of the serializable class, that does not implements Serializable interface, MUST have a no-arg constructor. If this is violated, readObject() will produce a java.io.InvalidClassException in runtime</p>\n</li>\n<li><p>All primitive types are serializable.</p>\n</li>\n<li><p>Transient fields (with transient modifier) are NOT serialized, (i.e., not saved or restored). A class that implements Serializable must mark transient fields of classes that do not support serialization (e.g., a file stream).</p>\n</li>\n<li><p>Static fields (with static modifier) are not serialized.</p>\n</li>\n</ul>\n<p>When <code>Object</code> is serialized, Java Runtime associates the serial version number aka, the <code>serialVersionID</code>.</p>\n<p><em><strong>Where we need serialVersionID:</strong></em></p>\n<p>During the deserialization to verify that sender and receiver are compatible with respect to serialization. If the receiver loaded the class with a different <code>serialVersionID</code> then deserialization will end with <code>InvalidClassCastException</code>.<br />\nA serializable class can declare its own <code>serialVersionUID</code> explicitly by declaring a field named <code>serialVersionUID</code> that must be static, final, and of type long.</p>\n<p>Let's try this with an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.Serializable;\n\npublic class Employee implements Serializable {\n    private static final long serialVersionUID = 1L;\n    private String empname;\n    private byte empage;\n\n    public String getEmpName() {\n        return name;\n    }\n\n    public void setEmpName(String empname) {\n        this.empname = empname;\n    }\n\n    public byte getEmpAge() {\n        return empage;\n    }\n\n    public void setEmpAge(byte empage) {\n        this.empage = empage;\n    }\n\n    public String whoIsThis() {\n        return getEmpName() + &quot; is &quot; + getEmpAge() + &quot;years old&quot;;\n    }\n}\n</code></pre>\n<p>Create Serialize Object</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.ObjectOutputStream;\n\npublic class Writer {\n    public static void main(String[] args) throws IOException {\n        Employee employee = new Employee();\n        employee.setEmpName(&quot;Jagdish&quot;);\n        employee.setEmpAge((byte) 30);\n\n        FileOutputStream fout = new\n                FileOutputStream(&quot;/users/Jagdish.vala/employee.obj&quot;);\n        ObjectOutputStream oos = new ObjectOutputStream(fout);\n        oos.writeObject(employee);\n        oos.close();\n        System.out.println(&quot;Process complete&quot;);\n    }\n}\n</code></pre>\n<p>Deserialize the object</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.ObjectInputStream;\n\npublic class Reader {\n    public static void main(String[] args) throws ClassNotFoundException, IOException {\n        Employee employee = new Employee();\n        FileInputStream fin = new FileInputStream(&quot;/users/Jagdish.vala/employee.obj&quot;);\n        ObjectInputStream ois = new ObjectInputStream(fin);\n        employee = (Employee) ois.readObject();\n        ois.close();\n        System.out.println(employee.whoIsThis());\n    }\n}\n</code></pre>\n<p>NOTE: Now change the serialVersionUID of the Employee class and save:</p>\n<pre><code>private static final long serialVersionUID = 4L;\n</code></pre>\n<p>And execute the Reader class. Not to execute the Writer class and you will get the exception.</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.InvalidClassException: \ncom.jagdish.vala.java.serialVersion.Employee; local class incompatible: \nstream classdesc serialVersionUID = 1, local class serialVersionUID = 4\nat java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:616)\nat java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1623)\nat java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1518)\nat java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1774)\nat java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)\nat java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)\nat com.krishantha.sample.java.serialVersion.Reader.main(Reader.java:14)\n</code></pre>\n"},{"owner":{"reputation":909,"user_id":3862024,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/HYIdB.jpg?s=128&g=1","display_name":"gagarwa","link":"https://stackoverflow.com/users/3862024/gagarwa"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1555076669,"last_edit_date":1555076669,"creation_date":1547681341,"answer_id":54226923,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>A Simple Explanation:</p>\n\n<ol>\n<li><p>Are you serializing data?</p>\n\n<p>Serialization is basically writing class data to a file/stream/etc.  De-serialization is reading that data back to a class.  </p></li>\n<li><p>Do you intend to go into production?</p>\n\n<p>If you are just testing something with unimportant/fake data, then don't worry about it (unless you are testing serialization directly).  </p></li>\n<li><p>Is this the first version?</p>\n\n<p>If so, set <code>serialVersionUID=1L</code>.  </p></li>\n<li><p>Is this the second, third, etc. prod version?</p>\n\n<p>Now you need to worry about <code>serialVersionUID</code>, and should look into it in depth.</p></li>\n</ol>\n\n<p>Basically, if you don't update the version correctly when you update a class you need to write/read, you will get an error when you try to read old data.</p>\n"},{"owner":{"reputation":206,"user_id":5580567,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-hqwHmWigIJo/AAAAAAAAAAI/AAAAAAAAANk/Nt-fGNNCYUs/photo.jpg?sz=128","display_name":"Stanislav Orlov","link":"https://stackoverflow.com/users/5580567/stanislav-orlov"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1555347303,"creation_date":1555347303,"answer_id":55693983,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>To tell the long story short this field is used to check if serialized data can be deserialized correctly. Serialization and deserialization are often made by different copies of program - for example server converts object to string and client converts received string to object. This field tells that both operates with same idea about what this object is. This field helps when:</p>\n\n<ul>\n<li><p>you have many different copies of your program in different places (like 1 server and 100 clients). If you will change your object, alter your version number and forget to update one this clients, it will know that he is not capable of deserialization</p></li>\n<li><p>you have stored your data in some file and later on you try to open it with updated version of your program with modified object - you will know that this file is not compatible if you keep your version right</p></li>\n</ul>\n\n<p>When is it important? </p>\n\n<p>Most obvious - if you add some fields to your object, older versions will not be able to use them because they do not have these fields in their object structure.</p>\n\n<p>Less obvious - When you deserialize object, fields that where not present in string will be kept as NULL. If you have removed field from your object, older versions will keep this field as allways-NULL that can lead to misbehavior if older versions rely on data in this field (anyway you have created it for something, not just for fun :-) ) </p>\n\n<p>Least obvious - Sometimes you change the idea you put in some field's meaning. For example when you are 12 years old you mean \"bicycle\" under \"bike\", but when you are 18 you mean \"motorcycle\" - if your friends will invite you to \"bike ride across city\" and you will be the only one who came on bicycle, you will undestand how important it is to keep same meaning across fields :-)</p>\n"},{"owner":{"reputation":79,"user_id":11004892,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-ZOKO10uy_js/AAAAAAAAAAI/AAAAAAAAASE/hHX9gnEy5-E/photo.jpg?sz=128","display_name":"Shanks D Shiva","link":"https://stackoverflow.com/users/11004892/shanks-d-shiva"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1556514382,"creation_date":1556514382,"answer_id":55897241,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>Firstly to answer your question, when we don't declare SerialVersionUID in our class, Java runtime generates it for us, but that process is sensitive to many class meta data including number of fields, type of fields, access modifier of fields, interface implemented by class etc. Therefore it is recommended to declare it ourselves and Eclipse is warning you about the same.</p>\n\n<p>Serialization:\nWe often work with important objects whose state (data in the variables of the object) is so important that we can not risk to lose it due to power/system failures (or) network failures in case of sending the object state to other machine. The solution for this problem is named \"Persistence\" which simply means persisting (holding/saving) the data. Serialization is one of many other ways to achieve persistence (by saving data to disk/memory). When saving the state of the object, it is important to create an identity for the object, to be able to properly read it back (de-serialization). This unique identification is ID is SerialVersionUID. </p>\n"},{"owner":{"reputation":1221,"user_id":2468375,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7bb422a9f7bbfaec418e2402e07ba523?s=128&d=identicon&r=PG","display_name":"forkdbloke","link":"https://stackoverflow.com/users/2468375/forkdbloke"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1573833965,"creation_date":1573833965,"answer_id":58880758,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>What is SerialVersionUID?\nAnswer : - Lets say there are two persons, one from HQ and another from ODC, both are going to perform serialization and deserialization respectively. In this case to authenticate that the receiver who is in ODC is the authenticated person, JVM creates a Unique ID which is known as SerialVersionUID.</p>\n\n<p>Here is a nice explanation based on the scenario,</p>\n\n<p>Why SerialVersionUID?</p>\n\n<p><strong>Serialization</strong> : At the time of serialization, with every object sender side JVM will save a Unique Identifier. JVM is responsible to generate that unique ID based on the corresponding .class file which is present in the sender system.</p>\n\n<p><strong>Deserialization</strong>: At the time of deserialization, receiver side JVM will compare the unique ID associated with the Object with local class Unique ID i.e. JVM will also create a Unique ID based on the corresponding .class file which is present in the receiver system. If both unique ID matched then only deserialization will be performed. Otherwise we will get Runtime Exception saying InvalidClassException. This unique Identifier is nothing but SerialVersionUID</p>\n"},{"owner":{"reputation":2507,"user_id":3302424,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/70d64f2369ad3cfd0d9271792bdccf3c?s=128&d=identicon&r=PG&f=1","display_name":"Hari Krishna","link":"https://stackoverflow.com/users/3302424/hari-krishna"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1579533299,"creation_date":1579533299,"answer_id":59826166,"question_id":285793,"content_license":"CC BY-SA 4.0","body":"<p>'serialVersionUID' is a 64 bit number used to uniquely identify a class during deserialization process. When you serialize an object, serialVersionUID of the class also written to the file. Whenever you deserialize this object, java run time extract this serialVersionUID value from the serialized data and compare the same value associate with the class. If both do not match, then 'java.io.InvalidClassException' will be thrown.</p>\n\n<p>If a serializable class do not explicitly declare a serialVersionUID, then serialization runtime will calculate  serialVersionUID value for that class based on various aspects of the class like fields, methods etc.,, You can refer this <a href=\"https://self-learning-java-tutorial.blogspot.com/2014/09/serialversionuid.html\" rel=\"nofollow noreferrer\">link</a> for demo application.</p>\n"}],"owner":{"reputation":73738,"user_id":33203,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/07856b52198509b8bd0d2e5418d0bf37?s=128&d=identicon&r=PG","display_name":"ashokgelal","link":"https://stackoverflow.com/users/33203/ashokgelal"},"comment_count":1,"is_answered":true,"view_count":964736,"protected_date":1430753768,"accepted_answer_id":285809,"answer_count":26,"score":3127,"last_activity_date":1610654094,"creation_date":1226532296,"last_edit_date":1426632249,"question_id":285793,"link":"https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it","title":"What is a serialVersionUID and why should I use it?","body":"<p>Eclipse issues warnings when a <code>serialVersionUID</code> is missing.  </p>\n\n<blockquote>\n  <p>The serializable class Foo does not declare a static final\n  serialVersionUID field of type long</p>\n</blockquote>\n\n<p>What is <code>serialVersionUID</code> and why is it important?  Please show an example where missing <code>serialVersionUID</code> will cause a problem.</p>\n"},{"tags":["java","collections","arraylist","initialization"],"comments":[{"owner":{"reputation":199057,"user_id":11236,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/40656706454dcbdbcec125b85b01f1e4?s=128&d=identicon&r=PG","display_name":"ripper234","link":"https://stackoverflow.com/users/11236/ripper234"},"edited":false,"score":35,"creation_date":1293831659,"post_id":1005073,"comment_id":5017678,"content_license":"CC BY-SA 2.5","body":"If this is intended for unit testing, try groovy out for a swing. You can write your test code in it while testing java code, and use <code>ArrasyList&lt;String&gt; places = [&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;]</code>"},{"owner":{"reputation":2372,"user_id":466884,"user_type":"registered","accept_rate":62,"profile_image":"https://i.stack.imgur.com/b0QUm.png?s=128&g=1","display_name":"Rose","link":"https://stackoverflow.com/users/466884/rose"},"edited":false,"score":5,"creation_date":1436303550,"post_id":1005073,"comment_id":50552399,"content_license":"CC BY-SA 3.0","body":"In Java SE 7, you can substitute the parameterized type of the constructor with an empty set of type parameters (&lt;&gt;): Map&lt;String, List&lt;String&gt;&gt; myMap = new HashMap&lt;&gt;();"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":2,"creation_date":1444302335,"post_id":1005073,"comment_id":53851082,"content_license":"CC BY-SA 3.0","body":"See also <a href=\"http://stackoverflow.com/questions/157944/create-arraylist-from-array\" title=\"create arraylist from array\">stackoverflow.com/questions/157944/create-arraylist-from-arr&zwnj;&#8203;ay</a>"},{"owner":{"reputation":1274,"user_id":4328100,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/08fe181f0f9c414733724680ef792139?s=128&d=identicon&r=PG&f=1","display_name":"Mohammadreza Khatami","link":"https://stackoverflow.com/users/4328100/mohammadreza-khatami"},"edited":false,"score":2,"creation_date":1461684986,"post_id":1005073,"comment_id":61306239,"content_license":"CC BY-SA 3.0","body":"use double bracing initialization :)"},{"owner":{"reputation":5760,"user_id":4501354,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1","display_name":"Donato","link":"https://stackoverflow.com/users/4501354/donato"},"edited":false,"score":0,"creation_date":1502324349,"post_id":1005073,"comment_id":78164391,"content_license":"CC BY-SA 3.0","body":"It seems like you answered yourself in the question: ArrayList&lt;String&gt; places = new ArrayList&lt;String&gt;(asList(&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;)); Arrays in Arrays.asList is not needed."},{"owner":{"reputation":2470,"user_id":4949653,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AV8al.jpg?s=128&g=1","display_name":"torina","link":"https://stackoverflow.com/users/4949653/torina"},"edited":false,"score":9,"creation_date":1507916234,"post_id":1005073,"comment_id":80417123,"content_license":"CC BY-SA 3.0","body":"Stream.of(&quot;val1&quot;, &quot;val2&quot;).collect(Collectors.toList()); //creates ArrayList, Java8 solution."},{"owner":{"reputation":454,"user_id":1231935,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a30736ad0cf7bfce43f40c58b6364892?s=128&d=identicon&r=PG","display_name":"Paul Smith","link":"https://stackoverflow.com/users/1231935/paul-smith"},"edited":false,"score":0,"creation_date":1556700842,"post_id":1005073,"comment_id":98520259,"content_license":"CC BY-SA 4.0","body":"Why not just use String [] places = {&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;); ?"},{"owner":{"reputation":960,"user_id":6380992,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/iTzJ5.jpg?s=128&g=1","display_name":"Seshadri R","link":"https://stackoverflow.com/users/6380992/seshadri-r"},"reply_to_user":{"reputation":454,"user_id":1231935,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a30736ad0cf7bfce43f40c58b6364892?s=128&d=identicon&r=PG","display_name":"Paul Smith","link":"https://stackoverflow.com/users/1231935/paul-smith"},"edited":false,"score":0,"creation_date":1589971948,"post_id":1005073,"comment_id":109502518,"content_license":"CC BY-SA 4.0","body":"@PaulSmith He might be interested in an elastic array that can grow dynamically. Your initialization will make <b>places</b> to have just three elements."}],"answers":[{"comments":[{"owner":{"reputation":50869,"user_id":57752,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/3d184a8ef609eaabcaabd0dd19196a74?s=128&d=identicon&r=PG","display_name":"Eddie","link":"https://stackoverflow.com/users/57752/eddie"},"edited":false,"score":178,"creation_date":1245212472,"post_id":1005083,"comment_id":814082,"content_license":"CC BY-SA 2.5","body":"See <a href=\"http://stackoverflow.com/questions/924285/\">stackoverflow.com/questions/924285</a> for more information about the double-brace initialization, pros and cons."},{"owner":{"reputation":150576,"user_id":17172,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1de7574c70db36492ea962c22e2252a8?s=128&d=identicon&r=PG","display_name":"coobird","link":"https://stackoverflow.com/users/17172/coobird"},"edited":false,"score":7,"creation_date":1245212583,"post_id":1005083,"comment_id":814088,"content_license":"CC BY-SA 2.5","body":"@Eddie: Good call for the link -- one sentence on double-brace initialization isn&#39;t enough to describe it fully."},{"owner":{"reputation":724,"user_id":1417653,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/3fa02c341aed737820b2780729caf77d?s=128&d=identicon&r=PG","display_name":"Richard B","link":"https://stackoverflow.com/users/1417653/richard-b"},"edited":false,"score":2,"creation_date":1418643725,"post_id":1005083,"comment_id":43398855,"content_license":"CC BY-SA 3.0","body":"Only works if you aren&#39;t relying on Auto boxing List&lt;Double&gt; list = [1.0, 2.0, 3.0]; fails."},{"owner":{"reputation":4901,"user_id":635549,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/f1014fca35accf96cf9a5d3f30c1623d?s=128&d=identicon&r=PG","display_name":"galath","link":"https://stackoverflow.com/users/635549/galath"},"reply_to_user":{"reputation":3243,"user_id":1198404,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/0fcd0321633a7a4815aea66cb0b4d3ab?s=128&d=identicon&r=PG","display_name":"chelder","link":"https://stackoverflow.com/users/1198404/chelder"},"edited":false,"score":2,"creation_date":1441279161,"post_id":1005083,"comment_id":52619169,"content_license":"CC BY-SA 3.0","body":"@chelder could you elaborate ? <code>List&lt;String&gt; list = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;];</code> does not work here.  Thanks."},{"owner":{"reputation":775,"user_id":761231,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/f857273f6c859da68c1538d40d32b3b3?s=128&d=identicon&r=PG","display_name":"Asaf","link":"https://stackoverflow.com/users/761231/asaf"},"edited":false,"score":9,"creation_date":1513657931,"post_id":1005083,"comment_id":82726021,"content_license":"CC BY-SA 3.0","body":"Since this answer is the most upvoted and mentioned Project Coin I think you should call out that java 9 shipped with List.of(...) syntax: <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E...-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/9/docs/api/java/util/List.html#of-E..&zwnj;&#8203;.-</a>"},{"owner":{"reputation":447,"user_id":4037411,"user_type":"registered","accept_rate":50,"profile_image":"https://lh6.googleusercontent.com/-hZizbpJJvHw/AAAAAAAAAAI/AAAAAAAAAHE/5QQc1799fSM/photo.jpg?sz=128","display_name":"Bagus Aji Santoso","link":"https://stackoverflow.com/users/4037411/bagus-aji-santoso"},"edited":false,"score":0,"creation_date":1590478168,"post_id":1005083,"comment_id":109686224,"content_license":"CC BY-SA 4.0","body":"How to define a new arraylist with 10 members and all the values are false?"},{"owner":{"reputation":101,"user_id":8387760,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5xVHu.png?s=128&g=1","display_name":"Void","link":"https://stackoverflow.com/users/8387760/void"},"reply_to_user":{"reputation":447,"user_id":4037411,"user_type":"registered","accept_rate":50,"profile_image":"https://lh6.googleusercontent.com/-hZizbpJJvHw/AAAAAAAAAAI/AAAAAAAAAHE/5QQc1799fSM/photo.jpg?sz=128","display_name":"Bagus Aji Santoso","link":"https://stackoverflow.com/users/4037411/bagus-aji-santoso"},"edited":false,"score":0,"creation_date":1605499013,"post_id":1005083,"comment_id":114659668,"content_license":"CC BY-SA 4.0","body":"@BagusAjiSantoso Choose one of the methodologies listed above and use Boolean (i.e., true / false) in place of String. You can also use a counted (i.e., for) loop and add 10 Boolean values of false to some initialized List &#39;foo&#39; with: <code>foo.add(false);</code>."}],"owner":{"reputation":150576,"user_id":17172,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1de7574c70db36492ea962c22e2252a8?s=128&d=identicon&r=PG","display_name":"coobird","link":"https://stackoverflow.com/users/17172/coobird"},"comment_count":7,"is_accepted":true,"score":2121,"last_activity_date":1426260455,"last_edit_date":1426260455,"creation_date":1245212016,"answer_id":1005083,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Actually, probably the \"best\" way to initialize the <code>ArrayList</code> is the method you wrote, as it does not need to create a new <code>List</code> in any way:</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\nlist.add(\"A\");\nlist.add(\"B\");\nlist.add(\"C\");\n</code></pre>\n\n<p>The catch is that there is quite a bit of typing required to refer to that <code>list</code> instance.</p>\n\n<p>There are alternatives, such as making an anonymous inner class with an instance initializer (also known as an \"double brace initialization\"):</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;() {{\n    add(\"A\");\n    add(\"B\");\n    add(\"C\");\n}};\n</code></pre>\n\n<p>However, I'm not too fond of that method because what you end up with is a subclass of <code>ArrayList</code> which has an instance initializer, and that class is created just to create one object -- that just seems like a little bit overkill to me.</p>\n\n<p>What would have been nice was if the <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001193.html\" rel=\"noreferrer\">Collection Literals proposal</a> for <a href=\"http://openjdk.java.net/projects/coin\" rel=\"noreferrer\">Project Coin</a> was accepted (it was slated to be introduced in Java 7, but it's not likely to be part of Java 8 either.):</p>\n\n<pre><code>List&lt;String&gt; list = [\"A\", \"B\", \"C\"];\n</code></pre>\n\n<p>Unfortunately it won't help you here, as it will initialize an immutable <code>List</code> rather than an <code>ArrayList</code>, and furthermore, it's not available yet, if it ever will be.</p>\n"},{"comments":[{"owner":{"reputation":86325,"user_id":119895,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/dEYOs.jpg?s=128&g=1","display_name":"Macarse","link":"https://stackoverflow.com/users/119895/macarse"},"edited":false,"score":2,"creation_date":1245212555,"post_id":1005089,"comment_id":814084,"content_license":"CC BY-SA 2.5","body":"Yes, my class has an private ArrayList&lt;String&gt;."},{"owner":{"reputation":58646,"user_id":8946,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/8c6e2d5c384c074a893830b34f1c0a9a?s=128&d=identicon&r=PG","display_name":"Lawrence Dol","link":"https://stackoverflow.com/users/8946/lawrence-dol"},"edited":false,"score":20,"creation_date":1245215084,"post_id":1005089,"comment_id":814208,"content_license":"CC BY-SA 2.5","body":"@Marcase: Can you not change your class to use a List instead of ArrayList?"},{"owner":{"reputation":86325,"user_id":119895,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/dEYOs.jpg?s=128&g=1","display_name":"Macarse","link":"https://stackoverflow.com/users/119895/macarse"},"edited":false,"score":1,"creation_date":1245219556,"post_id":1005089,"comment_id":814372,"content_license":"CC BY-SA 2.5","body":"@Software Monkey: I wanted to know how to initialize an ArrayList. It&#39;s not real code, I was just testing things out. So, yes I might change it to List, but that would not answer my question."},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":76,"creation_date":1284035835,"post_id":1005089,"comment_id":3871114,"content_license":"CC BY-SA 2.5","body":"As per my answer, if you&#39;re not using methods specific to <code>ArrayList</code>, it would be better design to change the declaration to <code>List</code>. Specify interfaces, not implementations."},{"owner":{"reputation":5474,"user_id":491790,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/9c4b745ad5d4e802fe513efddb6fc780?s=128&d=identicon&r=PG&f=1","display_name":"maks","link":"https://stackoverflow.com/users/491790/maks"},"reply_to_user":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":10,"creation_date":1316954906,"post_id":1005089,"comment_id":9143646,"content_license":"CC BY-SA 3.0","body":"@Christoffer Hammarstr&#246;m: if he changes the declaration to <i>List</i> and uses the <i>List&lt;String&gt; places = Arrays.asList(...);</i> he will not be able to use <i>places.add(&quot;blabla&quot;)</i>"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"reply_to_user":{"reputation":5474,"user_id":491790,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/9c4b745ad5d4e802fe513efddb6fc780?s=128&d=identicon&r=PG&f=1","display_name":"maks","link":"https://stackoverflow.com/users/491790/maks"},"edited":false,"score":2,"creation_date":1316994333,"post_id":1005089,"comment_id":9149202,"content_license":"CC BY-SA 3.0","body":"@maks: True, except that&#39;s because of using <code>asList(...)</code>, not because of changing the declaration from <code>ArrayList</code> to <code>List</code>. I would put it as &quot;he will not <i>need</i> to use <code>places.add(&quot;blabla&quot;)</code>&quot;. He already changed it to <code>asList(...)</code> himself."},{"owner":{"reputation":1260,"user_id":714249,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5d7d56398e3e55f20b3b5afdb30d3e9f?s=128&d=identicon&r=PG","display_name":"Splash","link":"https://stackoverflow.com/users/714249/splash"},"edited":false,"score":58,"creation_date":1334191804,"post_id":1005089,"comment_id":12962996,"content_license":"CC BY-SA 3.0","body":"Just to be clear, <code>asList(...)</code> returns a fixed size <code>List</code> that blows up on mutating operations like <code>remove</code> and <code>clear</code>, things the <code>List</code> contract claims to support. Even if you left declaration as <code>List</code>, you sill need to use <code>List l = new ArrayList(asList(...))</code> in order to get an object that doesn&#39;t throw OperationNotSupported exceptions. Liskov Substitution Principle anyone?"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"reply_to_user":{"reputation":1260,"user_id":714249,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5d7d56398e3e55f20b3b5afdb30d3e9f?s=128&d=identicon&r=PG","display_name":"Splash","link":"https://stackoverflow.com/users/714249/splash"},"edited":false,"score":6,"creation_date":1344690185,"post_id":1005089,"comment_id":15864159,"content_license":"CC BY-SA 3.0","body":"@Splash: <code>remove</code> and <code>clear</code> are optional operations in <code>List</code>, so <code>asList(...)</code> does follow the contract. Nowhere does the OP say he needs to add more elements later, the example is just of a <code>List</code> that needs to be initialized with three elements."},{"owner":{"reputation":13380,"user_id":3973,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/cbd511f0cd39f36c6f2a9bc17fb0f2da?s=128&d=identicon&r=PG","display_name":"Binil Thomas","link":"https://stackoverflow.com/users/3973/binil-thomas"},"edited":false,"score":2,"creation_date":1397854992,"post_id":1005089,"comment_id":35420439,"content_license":"CC BY-SA 3.0","body":"&quot;trying to change it will cause an exception to be thrown&quot; &lt;- only for operations which change the size of the list. <code>places.set(0, &quot;New York&quot;)</code> should work fine."},{"owner":{"reputation":2418,"user_id":1129420,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5c8de776018d6eaae68740f2cfe24c90?s=128&d=identicon&r=PG","display_name":"iono","link":"https://stackoverflow.com/users/1129420/iono"},"edited":false,"score":1,"creation_date":1570724761,"post_id":1005089,"comment_id":103012942,"content_license":"CC BY-SA 4.0","body":"This language is an actual nightmare, and I come from JavaScript"},{"owner":{"reputation":1715,"user_id":3182598,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/13c1b35032fa363408d0b544127f65c8?s=128&d=identicon&r=PG&f=1","display_name":"nomadSK25","link":"https://stackoverflow.com/users/3182598/nomadsk25"},"edited":false,"score":0,"creation_date":1577635013,"post_id":1005089,"comment_id":105212803,"content_license":"CC BY-SA 4.0","body":"This must be the selected answer."}],"owner":{"reputation":38791,"user_id":8969,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/15JSR.jpg?s=128&g=1","display_name":"Tom","link":"https://stackoverflow.com/users/8969/tom"},"comment_count":11,"is_accepted":false,"score":2264,"last_activity_date":1466113110,"last_edit_date":1466113110,"creation_date":1245212106,"answer_id":1005089,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>It would be simpler if you were to just declare it as a <code>List</code> - does it have to be an ArrayList?</p>\n\n<pre><code>List&lt;String&gt; places = Arrays.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>Or if you have only one element:</p>\n\n<pre><code>List&lt;String&gt; places = Collections.singletonList(\"Buenos Aires\");\n</code></pre>\n\n<p>This would mean that <code>places</code> is <strong>immutable</strong> (trying to change it will cause an <code>UnsupportedOperationException</code> exception to be thrown).</p>\n\n<p>To make a mutable list that is a concrete <code>ArrayList</code> you can create an <code>ArrayList</code> from the immutable list:</p>\n\n<pre><code>ArrayList&lt;String&gt; places = new ArrayList&lt;&gt;(Arrays.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"));\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3454,"user_id":369824,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d800ae5b8e065e908bd52bd018a264db?s=128&d=identicon&r=PG","display_name":"L. Holanda","link":"https://stackoverflow.com/users/369824/l-holanda"},"edited":false,"score":2,"creation_date":1345065858,"post_id":2762159,"comment_id":15967749,"content_license":"CC BY-SA 3.0","body":"Look back at the original post, it is asking for array initialization in <i>one line</i>, not 7 additional lines."},{"owner":{"reputation":50802,"user_id":31158,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/e10c6b474db05fa2b2afd5fd0ea27b50?s=128&d=identicon&r=PG","display_name":"Jord&#227;o","link":"https://stackoverflow.com/users/31158/jord%c3%a3o"},"reply_to_user":{"reputation":3454,"user_id":369824,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d800ae5b8e065e908bd52bd018a264db?s=128&d=identicon&r=PG","display_name":"L. Holanda","link":"https://stackoverflow.com/users/369824/l-holanda"},"edited":false,"score":7,"creation_date":1345070366,"post_id":2762159,"comment_id":15969293,"content_license":"CC BY-SA 3.0","body":"@LeoHolanda: Creating factory methods for every little thing is too much, I agree. But <i>depending</i> on the situation, and on the number of times that that method is going to be used, it might make sense to create it. Creating extra abstraction layers is meant to <i>remove</i> complexity, by creating more <i>meaningful</i> methods that capture the <i>intent</i> of the designer."}],"owner":{"reputation":50802,"user_id":31158,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/e10c6b474db05fa2b2afd5fd0ea27b50?s=128&d=identicon&r=PG","display_name":"Jord&#227;o","link":"https://stackoverflow.com/users/31158/jord%c3%a3o"},"comment_count":2,"is_accepted":false,"score":24,"last_activity_date":1520198946,"last_edit_date":1520198946,"creation_date":1272934674,"answer_id":2762159,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>You could create a factory method:</p>\n\n<pre><code>public static ArrayList&lt;String&gt; createArrayList(String ... elements) {\n  ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n  for (String element : elements) {\n    list.add(element);\n  }\n  return list;\n}\n\n....\n\nArrayList&lt;String&gt; places = createArrayList(\n  \"SÃ£o Paulo\", \"Rio de Janeiro\", \"BrasÃ­lia\");\n</code></pre>\n\n<p>But it's not much better than your first refactoring.</p>\n\n<p>For greater flexibility, it can be generic:</p>\n\n<pre><code>public static &lt;T&gt; ArrayList&lt;T&gt; createArrayList(T ... elements) {\n  ArrayList&lt;T&gt; list = new ArrayList&lt;T&gt;();\n  for (T element : elements) {\n    list.add(element);\n  }\n  return list;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":86325,"user_id":119895,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/dEYOs.jpg?s=128&g=1","display_name":"Macarse","link":"https://stackoverflow.com/users/119895/macarse"},"edited":false,"score":5,"creation_date":1273673807,"post_id":2819065,"comment_id":2859272,"content_license":"CC BY-SA 2.5","body":"I don&#39;t want to add a new dependency just to do that."},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":6,"creation_date":1284716864,"post_id":2819065,"comment_id":3944534,"content_license":"CC BY-SA 2.5","body":"That&#39;s the same as <code>Collections.unmodifiableList(Arrays.asList(&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;))</code>, which becomes <code>unmodifiableList(asList(&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;))</code> with static imports. You don&#39;t need Google Collections for this."},{"owner":{"reputation":9025,"user_id":18296,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f9d8c89371a7c17aa70edec1e08c1d0b?s=128&d=identicon&r=PG","display_name":"David Pierre","link":"https://stackoverflow.com/users/18296/david-pierre"},"edited":false,"score":9,"creation_date":1288791728,"post_id":2819065,"comment_id":4396063,"content_license":"CC BY-SA 2.5","body":"No, it&#39;s not the same. As ImmutableList is documenting its immutability in the result type when unmodifiableList masquerades it  as a normal List."},{"owner":{"reputation":3454,"user_id":369824,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/d800ae5b8e065e908bd52bd018a264db?s=128&d=identicon&r=PG","display_name":"L. Holanda","link":"https://stackoverflow.com/users/369824/l-holanda"},"edited":false,"score":2,"creation_date":1345066814,"post_id":2819065,"comment_id":15968163,"content_license":"CC BY-SA 3.0","body":"Instead of the immutable one, google collections also offer mutable array list: List&lt;String&gt; = Lists.newArrayList(&quot;Buenos Aires&quot;, &quot;C&#243;rdoba&quot;, &quot;La Plata&quot;);"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":3,"creation_date":1405516870,"post_id":2819065,"comment_id":38458350,"content_license":"CC BY-SA 3.0","body":"You&#39;re going to pass that <code>ImmutableList</code> to other methods that take a <code>List</code>, and then you&#39;ve lost that documentation anyway."},{"owner":{"reputation":422,"user_id":5083456,"user_type":"registered","accept_rate":62,"profile_image":"https://lh5.googleusercontent.com/-3aCVskJgx7Y/AAAAAAAAAAI/AAAAAAAACkE/ujlUOTqCCwo/photo.jpg?sz=128","display_name":"IMustBeSomeone","link":"https://stackoverflow.com/users/5083456/imustbesomeone"},"edited":false,"score":1,"creation_date":1465150893,"post_id":2819065,"comment_id":62770451,"content_license":"CC BY-SA 3.0","body":"There is no way this is worth it. Have you seen the answers above? There isn&#39;t a need to download a new dependency,"}],"owner":{"reputation":3313,"user_id":64679,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/2e2c6a13c0667002af849d1749e6ab56?s=128&d=identicon&r=PG","display_name":"George","link":"https://stackoverflow.com/users/64679/george"},"comment_count":6,"is_accepted":false,"score":32,"last_activity_date":1273670056,"creation_date":1273670056,"answer_id":2819065,"question_id":1005073,"content_license":"CC BY-SA 2.5","body":"<pre><code>import com.google.common.collect.ImmutableList;\n\n....\n\nList&lt;String&gt; places = ImmutableList.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":569,"user_id":1020678,"user_type":"registered","accept_rate":21,"profile_image":"https://www.gravatar.com/avatar/bad0ec98cf101fec618cb2ef862c9485?s=128&d=identicon&r=PG&f=1","display_name":"jollyroger","link":"https://stackoverflow.com/users/1020678/jollyroger"},"edited":false,"score":1,"creation_date":1359594827,"post_id":3676539,"comment_id":20412391,"content_license":"CC BY-SA 3.0","body":"Thank you ever so much. I tried to omit &#39;static&#39; import in my code, but the compiler wouldn&#39;t have any of it. Why is static necessary for the code to work?"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"reply_to_user":{"reputation":569,"user_id":1020678,"user_type":"registered","accept_rate":21,"profile_image":"https://www.gravatar.com/avatar/bad0ec98cf101fec618cb2ef862c9485?s=128&d=identicon&r=PG&f=1","display_name":"jollyroger","link":"https://stackoverflow.com/users/1020678/jollyroger"},"edited":false,"score":3,"creation_date":1359635303,"post_id":3676539,"comment_id":20427048,"content_license":"CC BY-SA 3.0","body":"@jollyroger: <code>Arrays.asList</code> is a static method. See <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/1.5.0/docs/guide/language/&hellip;</a>"},{"owner":{"reputation":569,"user_id":1020678,"user_type":"registered","accept_rate":21,"profile_image":"https://www.gravatar.com/avatar/bad0ec98cf101fec618cb2ef862c9485?s=128&d=identicon&r=PG&f=1","display_name":"jollyroger","link":"https://stackoverflow.com/users/1020678/jollyroger"},"edited":false,"score":2,"creation_date":1359725247,"post_id":3676539,"comment_id":20464956,"content_license":"CC BY-SA 3.0","body":"@ChristofferHammarstr&#246;m In that case, my novice mind tells me that static import bares strong resemblance to global variables and the perils that pertain to such usage. Is this assumption correct and is it also the reason for the similar answer above getting more votes?"},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"edited":false,"score":2,"creation_date":1359730493,"post_id":3676539,"comment_id":20467854,"content_license":"CC BY-SA 3.0","body":"The answer above i think you&#39;re talking about was made a year before. And no, the problem with global variables is that they are mutable. They have nothing to do with static imports."},{"owner":{"reputation":1440,"user_id":1048722,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2682ca1f3af1b4695d0f6bb89defa038?s=128&d=identicon&r=PG","display_name":"Geert Weening","link":"https://stackoverflow.com/users/1048722/geert-weening"},"edited":false,"score":2,"creation_date":1362009032,"post_id":3676539,"comment_id":21287239,"content_license":"CC BY-SA 3.0","body":"If you don&#39;t want the static import you can also define the full path to the static asList method, as so: List&lt;String&gt; strings = java.util.Arrays.asList(&quot;&quot;,&quot;&quot;);"},{"owner":{"reputation":5665,"user_id":1493294,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/hyY7Y.png?s=128&g=1","display_name":"candied_orange","link":"https://stackoverflow.com/users/1493294/candied-orange"},"edited":false,"score":2,"creation_date":1410498719,"post_id":3676539,"comment_id":40357500,"content_license":"CC BY-SA 3.0","body":"Or you can use import java.util.Arrays; and Arrays.asList(&quot;&quot;,&quot;&quot;);  You don&#39;t have to use a static import.  You don&#39;t have to use a full path.  Static methods don&#39;t care about the import.  They just get annoyed if you use an instance to find them."},{"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"reply_to_user":{"reputation":486,"user_id":1308453,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/60141568189a5c57ba6ddb06022fe851?s=128&d=identicon&r=PG","display_name":"Philip Rego","link":"https://stackoverflow.com/users/1308453/philip-rego"},"edited":false,"score":2,"creation_date":1558894347,"post_id":3676539,"comment_id":99241397,"content_license":"CC BY-SA 4.0","body":"@PhilipRego: It&#39;s <code>java.util.Arrays</code>. Most IDEs will suggest this for you. E.g. in IntelliJ IDEA you press Alt+Enter when <code>java.util.Arrays</code> is suggested."}],"owner":{"reputation":23806,"user_id":233014,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1","display_name":"Christoffer Hammarstr&#246;m","link":"https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"},"comment_count":7,"is_accepted":false,"score":933,"last_activity_date":1582290616,"last_edit_date":1592644375,"creation_date":1284035595,"answer_id":3676539,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<h1>The simple answer</h1>\n<p>In <strong>Java 9</strong> or later, after <code>List.of()</code> was added:</p>\n<pre><code>List&lt;String&gt; strings = List.of(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\n</code></pre>\n<p>With <strong>Java 10</strong> or later, this can be shortened with the <code>var</code> keyword.</p>\n<pre><code>var strings = List.of(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\n</code></pre>\n<p>This will give you an <em>immutable</em> <code>List</code>, so it cannot be changed.<br />\nWhich is what you want in most cases where you're prepopulating it.</p>\n<hr />\n<h1>Java 8 or earlier:</h1>\n<pre><code>List&lt;String&gt; strings = Arrays.asList(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\n</code></pre>\n<p>This will give you a <code>List</code> backed by an array, so it cannot change length.<br />\nBut you can call <code>List.set</code>, so it's still <em>mutable</em>.</p>\n<hr />\n<p>You can make <code>Arrays.asList</code> even shorter with a static import:</p>\n<pre><code>List&lt;String&gt; strings = asList(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\n</code></pre>\n<p>The static import:</p>\n<pre><code>import static java.util.Arrays.asList;  \n</code></pre>\n<p>Which any modern IDE will suggest and automatically do for you.<br />\nFor example in IntelliJ IDEA you press <code>Alt+Enter</code> and select <code>Static import method...</code>.</p>\n<hr />\n<p>However, i don't recommend shortening the <code>List.of</code> method to <code>of</code>, because that becomes confusing.<br />\n<code>List.of</code> is already short enough and reads well.</p>\n<hr />\n<h1>Using <code>Stream</code>s</h1>\n<p>Why does it have to be a <code>List</code>?<br />\nWith Java 8 or later you can use a <code>Stream</code> which is more flexible:</p>\n<pre><code>Stream&lt;String&gt; strings = Stream.of(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;);\n</code></pre>\n<p>You can concatenate <code>Stream</code>s:</p>\n<pre><code>Stream&lt;String&gt; strings = Stream.concat(Stream.of(&quot;foo&quot;, &quot;bar&quot;),\n                                       Stream.of(&quot;baz&quot;, &quot;qux&quot;));\n</code></pre>\n<p>Or you can go from a <code>Stream</code> to a <code>List</code>:</p>\n<pre><code>import static java.util.stream.Collectors.toList;\n\nList&lt;String&gt; strings = Stream.of(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;).collect(toList());\n</code></pre>\n<p>But preferably, just use the <code>Stream</code> without collecting it to a <code>List</code>.</p>\n<hr />\n<h1>If you <em>really</em> specifically need a <code>java.util.ArrayList</code></h1>\n<p>(You probably don't.)<br />\nTo quote <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">JEP 269</a> (emphasis mine):</p>\n<blockquote>\n<p>There is a <strong>small set</strong> of use cases for initializing a mutable collection instance with a predefined set of values. It's usually preferable to have those predefined values be in an immutable collection, and then to initialize the mutable collection via a copy constructor.</p>\n</blockquote>\n<hr />\n<p>If you want to <em>both</em> prepopulate an <code>ArrayList</code> <em>and</em> add to it afterwards (why?), use</p>\n<pre><code>ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;(List.of(&quot;foo&quot;, &quot;bar&quot;));\nstrings.add(&quot;baz&quot;);\n</code></pre>\n<p>or in Java 8 or earlier:</p>\n<pre><code>ArrayList&lt;String&gt; strings = new ArrayList&lt;&gt;(asList(&quot;foo&quot;, &quot;bar&quot;));\nstrings.add(&quot;baz&quot;);\n</code></pre>\n<p>or using <code>Stream</code>:</p>\n<pre><code>import static java.util.stream.Collectors.toCollection;\n\nArrayList&lt;String&gt; strings = Stream.of(&quot;foo&quot;, &quot;bar&quot;)\n                             .collect(toCollection(ArrayList::new));\nstrings.add(&quot;baz&quot;);\n</code></pre>\n<p>But again, it's better to just use the <code>Stream</code> directly instead of collecting it to a <code>List</code>.</p>\n<hr />\n<h1>Program to interfaces, not to implementations</h1>\n<p>You said you've declared the list as an <code>ArrayList</code> in your code, but you should only do that if you're using some member of <code>ArrayList</code> that's not in <code>List</code>.</p>\n<p>Which you are most likely not doing.</p>\n<p>Usually you should just declare variables by the most general interface that you are going to use (e.g. <code>Iterable</code>, <code>Collection</code>, or <code>List</code>), and initialize them with the specific implementation (e.g. <code>ArrayList</code>, <code>LinkedList</code> or <code>Arrays.asList()</code>).</p>\n<p>Otherwise you're limiting your code to that specific type, and it'll be harder to change when you want to.</p>\n<p>For example, if you're passing an <code>ArrayList</code> to a <code>void method(...)</code>:</p>\n<pre><code>// Iterable if you just need iteration, for (String s : strings):\nvoid method(Iterable&lt;String&gt; strings) { \n    for (String s : strings) { ... } \n}\n\n// Collection if you also need .size(), .isEmpty(), or .stream():\nvoid method(Collection&lt;String&gt; strings) {\n    if (!strings.isEmpty()) { strings.stream()... }\n}\n\n// List if you also need .get(index):\nvoid method(List&lt;String&gt; strings) {\n    strings.get(...)\n}\n\n// Don't declare a specific list implementation\n// unless you're sure you need it:\nvoid method(ArrayList&lt;String&gt; strings) {\n    ??? // You don't want to limit yourself to just ArrayList\n}\n</code></pre>\n<hr />\n<p>Another example would be always declaring variable an <code>InputStream</code> even though it is usually a <code>FileInputStream</code> or a <code>BufferedInputStream</code>, because one day soon you or somebody else will want to use some other kind of <code>InputStream</code>.</p>\n"},{"owner":{"reputation":2815,"user_id":9518,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/ddbadbdb89a8375f01c6b898fcd365a3?s=128&d=identicon&r=PG","display_name":"Randyaa","link":"https://stackoverflow.com/users/9518/randyaa"},"comment_count":0,"is_accepted":false,"score":113,"last_activity_date":1495920666,"last_edit_date":1495920666,"creation_date":1314678785,"answer_id":7238739,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>If you need a simple list of size 1:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;String&gt;(Collections.singletonList(\"A\"));\n</code></pre>\n\n<p>If you need a list of several objects:</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;String&gt;();\nCollections.addAll(strings,\"A\",\"B\",\"C\",\"D\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":359614,"user_id":256196,"user_type":"moderator","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG","display_name":"Bohemian","link":"https://stackoverflow.com/users/256196/bohemian"},"edited":false,"score":5,"creation_date":1344516816,"post_id":9268535,"comment_id":15813458,"content_license":"CC BY-SA 3.0","body":"Wrong! You <i>can</i> do the first line, and that is the right answer btw"}],"owner":{"reputation":61,"user_id":1207828,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/d8bd5afef54e22dcb96bce121028c8f5?s=128&d=identicon&r=PG","display_name":"Dawg","link":"https://stackoverflow.com/users/1207828/dawg"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1329173060,"last_edit_date":1329173060,"creation_date":1329169654,"answer_id":9268535,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>In Java, you can't do</p>\n\n<pre><code>ArrayList&lt;String&gt; places = new ArrayList&lt;String&gt;( Arrays.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"));\n</code></pre>\n\n<p>As was pointed out, you'd need to do a double brace initialization:</p>\n\n<pre><code>List&lt;String&gt; places = new ArrayList&lt;String&gt;() {{ add(\"x\"); add(\"y\"); }};\n</code></pre>\n\n<p>But this may force you into adding an annotation <code>@SuppressWarnings(\"serial\")</code> or generate a serial UUID which is annoying. Also most code formatters will unwrap that into multiple statements/lines.</p>\n\n<p>Alternatively you can do</p>\n\n<pre><code>List&lt;String&gt; places = Arrays.asList(new String[] {\"x\", \"y\" });\n</code></pre>\n\n<p>but then you may want to do a <code>@SuppressWarnings(\"unchecked\")</code>.</p>\n\n<p>Also according to javadoc you should be able to do this:</p>\n\n<pre><code>List&lt;String&gt; stooges = Arrays.asList(\"Larry\", \"Moe\", \"Curly\");\n</code></pre>\n\n<p>But I'm not able to get it to compile with JDK 1.6.</p>\n"},{"comments":[{"owner":{"reputation":51155,"user_id":697449,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/0d825a4fb8f4417045815f4c921aa0cc?s=128&d=identicon&r=PG","display_name":"Paul Bellora","link":"https://stackoverflow.com/users/697449/paul-bellora"},"edited":false,"score":2,"creation_date":1358118637,"post_id":11741122,"comment_id":19880367,"content_license":"CC BY-SA 3.0","body":"-1 Those are <a href=\"http://stackoverflow.com/questions/12015980/arrays-aslist-confusing-source-code/12015999#12015999\">not the same class</a>."}],"owner":{"reputation":794,"user_id":1357822,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/a495e0bf11b45242ed52a4d34ee19f68?s=128&d=identicon&r=PG","display_name":"abaelter","link":"https://stackoverflow.com/users/1357822/abaelter"},"comment_count":1,"is_accepted":false,"score":-4,"last_activity_date":1343740978,"creation_date":1343740978,"answer_id":11741122,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<pre><code>public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n    return new ArrayList&lt;T&gt;(a);\n}\n</code></pre>\n\n<p>This is the implementation of <code>Arrays.asList</code>, so you could go with</p>\n\n<pre><code>ArrayList&lt;String&gt; arr = (ArrayList&lt;String&gt;) Arrays.asList(\"1\", \"2\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":433498,"user_id":922184,"user_type":"registered","profile_image":"https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1","display_name":"Mysticial","link":"https://stackoverflow.com/users/922184/mysticial"},"edited":false,"score":3,"creation_date":1370180240,"post_id":16883254,"comment_id":24358258,"content_license":"CC BY-SA 3.0","body":"May I ask what this adds to the question? This answer is already covered multiple times by other answers."},{"owner":{"reputation":8727,"user_id":1549135,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/734f78bfa617357edce993d5cbcb95f9?s=128&d=identicon&r=PG","display_name":"Atais","link":"https://stackoverflow.com/users/1549135/atais"},"edited":false,"score":0,"creation_date":1443004547,"post_id":16883254,"comment_id":53315100,"content_license":"CC BY-SA 3.0","body":"This is actually a really bad soluition as it creates an ABSTRACT LIST. You will not be able to add anything more to the container."}],"owner":{"reputation":25,"user_id":2445174,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/ba6078344a3f2a310e97511186cdb6f3?s=128&d=identicon&r=PG","display_name":"Adrian","link":"https://stackoverflow.com/users/2445174/adrian"},"comment_count":2,"is_accepted":false,"score":-1,"last_activity_date":1495920696,"last_edit_date":1495920696,"creation_date":1370180057,"answer_id":16883254,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Actually, it's possible to do it in one line:</p>\n\n<pre><code>Arrays.asList(new MyClass[] {new MyClass(\"arg1\"), new MyClass(\"arg2\")})\n</code></pre>\n"},{"owner":{"reputation":1470,"user_id":439407,"user_type":"registered","accept_rate":37,"profile_image":"https://www.gravatar.com/avatar/37c9eaf4a128967d340dbe87aff81d50?s=128&d=identicon&r=PG","display_name":"user439407","link":"https://stackoverflow.com/users/439407/user439407"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1513047427,"last_edit_date":1513047427,"creation_date":1370497466,"answer_id":16954474,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>(Should be a comment, but too long, so new reply).  As others have mentioned, the <code>Arrays.asList</code> method is fixed size, but that's not the only issue with it.  It also doesn't handle inheritance very well.  For instance, suppose you have the following:</p>\n\n<pre><code>class A{}\nclass B extends A{}\n\npublic List&lt;A&gt; getAList(){\n    return Arrays.asList(new B());\n}\n</code></pre>\n\n<p>The above results in a compiler error, because <code>List&lt;B&gt;</code>(which is what is returned by Arrays.asList) is not a subclass of <code>List&lt;A&gt;</code>, even though you can add Objects of type B to a <code>List&lt;A&gt;</code> object.  To get around this, you need to do something like:</p>\n\n<pre><code>new ArrayList&lt;A&gt;(Arrays.&lt;A&gt;asList(b1, b2, b3))\n</code></pre>\n\n<p>This is probably the best way to go about doing this, esp. if you need an unbounded list or need to use inheritance.</p>\n"},{"owner":{"reputation":7777,"user_id":1031312,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/q2qhc.jpg?s=128&g=1","display_name":"Ozzy","link":"https://stackoverflow.com/users/1031312/ozzy"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1371492783,"last_edit_date":1495541448,"creation_date":1371491844,"answer_id":17153770,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Like <a href=\"https://stackoverflow.com/a/1005089/1031312\">Tom said</a>:</p>\n\n<pre><code>List&lt;String&gt; places = Arrays.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>But since you complained of wanting an ArrayList, you should firstly know that ArrayList is a subclass of List and you could simply add this line:</p>\n\n<pre><code>ArrayList&lt;String&gt; myPlaces = new ArrayList(places);\n</code></pre>\n\n<p>Although, that might make you complain of 'performance'.</p>\n\n<p>In that case it doesn't make sense to me, why, since your list is predefined it wasn't defined as an array (since the size is known at time of initialisation). And if that's an option for you:</p>\n\n<pre><code>String[] places = {\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"};\n</code></pre>\n\n<p>In case you don't care of the minor performance differences then you can also copy an array to an ArrayList very simply:</p>\n\n<pre><code>ArrayList&lt;String&gt; myPlaces = new ArrayList(Arrays.asList(places));\n</code></pre>\n\n<p>Okay, but in future you need a bit more than just the place name, you need a country code too. Assuming this is still a predefined list which will never change during run-time, then it's fitting to use an <code>enum</code> set, which would require re-compilation if the list needed to be changed in the future.</p>\n\n<pre><code>enum Places {BUENOS_AIRES, CORDOBA, LA_PLATA}\n</code></pre>\n\n<p>would become:</p>\n\n<pre><code>enum Places {\n    BUENOS_AIRES(\"Buenos Aires\",123),\n    CORDOBA(\"CÃ³rdoba\",456),\n    LA_PLATA(\"La Plata\",789);\n\n    String name;\n    int code;\n    Places(String name, int code) {\n      this.name=name;\n      this.code=code;\n    }\n}\n</code></pre>\n\n<p>Enum's have a static <code>values</code> method that returns an array containing all of the values of the enum in the order they are declared, e.g.:</p>\n\n<pre><code>for (Places p:Places.values()) {\n    System.out.printf(\"The place %s has code %d%n\",\n                  p.name, p.code);\n}\n</code></pre>\n\n<p>In that case I guess you wouldn't need your ArrayList.</p>\n\n<p>P.S. <a href=\"https://stackoverflow.com/a/7238739/1031312\">Randyaa demonstrated</a> another nice way using the static utility method <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html\" rel=\"nofollow noreferrer\">Collections.addAll</a>.</p>\n"},{"comments":[{"owner":{"reputation":1432,"user_id":2592424,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/zaexb.jpg?s=128&g=1","display_name":"beckah","link":"https://stackoverflow.com/users/2592424/beckah"},"edited":false,"score":1,"creation_date":1435348784,"post_id":17925308,"comment_id":50180817,"content_license":"CC BY-SA 3.0","body":"I&#39;m pretty sure you can do this with just <code>java.util.Arrays</code> such as, <code>List&lt;String&gt; names = Arrays.asList(&quot;Beckah&quot;, &quot;Sam&quot;, &quot;Michael&quot;);</code>"},{"owner":{"reputation":2735,"user_id":1268294,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/qymw2.jpg?s=128&g=1","display_name":"PaweÅ Adamski","link":"https://stackoverflow.com/users/1268294/pawe%c5%82-adamski"},"reply_to_user":{"reputation":1432,"user_id":2592424,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/zaexb.jpg?s=128&g=1","display_name":"beckah","link":"https://stackoverflow.com/users/2592424/beckah"},"edited":false,"score":2,"creation_date":1436852042,"post_id":17925308,"comment_id":50771931,"content_license":"CC BY-SA 3.0","body":"@beckah method Arrays.asLists creates object of type List, while question is about creating ArrayList"},{"owner":{"reputation":42512,"user_id":1553851,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG","display_name":"shmosel","link":"https://stackoverflow.com/users/1553851/shmosel"},"edited":false,"score":1,"creation_date":1513047840,"post_id":17925308,"comment_id":82490794,"content_license":"CC BY-SA 3.0","body":"<a href=\"https://google.github.io/guava/releases/22.0/api/docs/com/google/common/collect/Lists.html#newArrayList-E...-\" rel=\"nofollow noreferrer\"><i>This method is not actually very useful and will likely be deprecated in the future.</i></a>"}],"owner":{"reputation":2735,"user_id":1268294,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/qymw2.jpg?s=128&g=1","display_name":"PaweÅ Adamski","link":"https://stackoverflow.com/users/1268294/pawe%c5%82-adamski"},"comment_count":3,"is_accepted":false,"score":58,"last_activity_date":1513047742,"last_edit_date":1513047742,"creation_date":1375104284,"answer_id":17925308,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>With <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"noreferrer\">Guava</a> you can write:</p>\n\n<pre><code>ArrayList&lt;String&gt; places = Lists.newArrayList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>In Guava there are also other useful static constructors. You can read about them <a href=\"https://github.com/google/guava/wiki/CollectionUtilitiesExplained\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"reputation":2470,"user_id":2254382,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/38b5fff7f4b2cddee56d3f0120339f84?s=128&d=identicon&r=PG","display_name":"melwil","link":"https://stackoverflow.com/users/2254382/melwil"},"reply_to_user":{"reputation":2577,"user_id":1214055,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/23029ac714b9258a6ef71acc010d5eb1?s=128&d=identicon&r=PG","display_name":"bsd","link":"https://stackoverflow.com/users/1214055/bsd"},"edited":false,"score":2,"creation_date":1407634254,"post_id":18931164,"comment_id":39290331,"content_license":"CC BY-SA 3.0","body":"@bsd You can use this method to declare the list before entering any method. So when defining class variables, content can be added to the list without having to invoke a method to do so."},{"owner":{"reputation":1512,"user_id":760393,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/24e27e5c8b053d6600b9fca6f86c78ec?s=128&d=identicon&r=PG","display_name":"Ra&#250;l","link":"https://stackoverflow.com/users/760393/ra%c3%bal"},"edited":false,"score":2,"creation_date":1479217094,"post_id":18931164,"comment_id":68456650,"content_license":"CC BY-SA 3.0","body":"double braces initialization should be avoided as far as possible. see : <a href=\"http://stackoverflow.com/a/924326/760393\">stackoverflow.com/a/924326/760393</a>"}],"owner":{"reputation":99,"user_id":2801794,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c127a96bd7ef670da1afe867cb1e908d?s=128&d=identicon&r=PG&f=1","display_name":"user2801794","link":"https://stackoverflow.com/users/2801794/user2801794"},"comment_count":2,"is_accepted":false,"score":8,"last_activity_date":1513047468,"last_edit_date":1513047468,"creation_date":1379756587,"answer_id":18931164,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Simply use below code as follows.</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;() {{\n            add(\"A\");\n            add(\"B\");\n            add(\"C\");\n}};\n</code></pre>\n"},{"owner":{"reputation":1907,"user_id":3486249,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AjIuQ.jpg?s=128&g=1","display_name":"Mark","link":"https://stackoverflow.com/users/3486249/mark"},"comment_count":0,"is_accepted":false,"score":34,"last_activity_date":1396567308,"creation_date":1396567308,"answer_id":22850794,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Collection literals didn't make it into Java 8, but it is possible to use the Stream API to initialize a list in one rather long line:</p>\n\n<pre><code>List&lt;String&gt; places = Stream.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\").collect(Collectors.toList());\n</code></pre>\n\n<p>If you need to ensure that your <code>List</code> is an <code>ArrayList</code>:</p>\n\n<pre><code>ArrayList&lt;String&gt; places = Stream.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\").collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n"},{"owner":{"reputation":3043,"user_id":2447599,"user_type":"registered","profile_image":"https://i.stack.imgur.com/xXP4z.jpg?s=128&g=1","display_name":"Ran Adler","link":"https://stackoverflow.com/users/2447599/ran-adler"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1443014331,"last_edit_date":1443014331,"creation_date":1403424751,"answer_id":24349372,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<pre><code>List&lt;String&gt; names = Arrays.asList(\"2\",\"@2234\",\"21\",\"11\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":22723,"user_id":6998684,"user_type":"registered","profile_image":"https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1","display_name":"IgorGanapolsky","link":"https://stackoverflow.com/users/6998684/igorganapolsky"},"edited":false,"score":0,"creation_date":1449003037,"post_id":27339963,"comment_id":55815098,"content_license":"CC BY-SA 3.0","body":"Why is Arrays.asList() better than creating a new ArrayList in one line with <code>add()</code> methods?"}],"owner":{"reputation":101,"user_id":2282246,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9bfd3b63ba790bf02f0e6c0a5b921fcb?s=128&d=identicon&r=PG","display_name":"Manoj Kumar","link":"https://stackoverflow.com/users/2282246/manoj-kumar"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1417930632,"creation_date":1417930632,"answer_id":27339963,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>For me Arrays.asList() is the best and convenient one. I always like to initialize that way.\nIf you are a beginner into Java Collections then I would like you to refer <a href=\"http://www.gitarani.com/classified.htm?classifiedId=3011\" rel=\"nofollow\">ArrayList initialization</a></p>\n"},{"owner":{"reputation":724,"user_id":1417653,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/3fa02c341aed737820b2780729caf77d?s=128&d=identicon&r=PG","display_name":"Richard B","link":"https://stackoverflow.com/users/1417653/richard-b"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1418643855,"creation_date":1418643855,"answer_id":27483301,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>About the most compact way to do this is:</p>\n\n<pre><code>Double array[] = { 1.0, 2.0, 3.0};\nList&lt;Double&gt; list = Arrays.asList(array);\n</code></pre>\n"},{"owner":{"reputation":5666,"user_id":1570415,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Scl35.jpg?s=128&g=1","display_name":"Donald Raab","link":"https://stackoverflow.com/users/1570415/donald-raab"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1556675590,"last_edit_date":1556675590,"creation_date":1422408635,"answer_id":28183168,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a> you can write the following:</p>\n\n<pre><code>List&lt;String&gt; list = Lists.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>You can also be more specific about the types and whether they are Mutable or Immutable.</p>\n\n<pre><code>MutableList&lt;String&gt; mList = Lists.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nImmutableList&lt;String&gt; iList = Lists.immutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>You can also do the same with Sets and Bags:</p>\n\n<pre><code>Set&lt;String&gt; set = Sets.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nMutableSet&lt;String&gt; mSet = Sets.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nImmutableSet&lt;String&gt; iSet = Sets.immutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n\nBag&lt;String&gt; bag = Bags.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nMutableBag&lt;String&gt; mBag = Bags.mutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nImmutableBag&lt;String&gt; iBag = Bags.immutable.with(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p><strong>Note:</strong> I am a committer for Eclipse Collections.</p>\n"},{"owner":{"reputation":10251,"user_id":517381,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/9d3bebe088c64440ec8870918299d18f?s=128&d=identicon&r=PG","display_name":"ViliusK","link":"https://stackoverflow.com/users/517381/viliusk"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1428053438,"creation_date":1428053438,"answer_id":29429576,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<pre><code>Collections.singletonList(messageBody)\n</code></pre>\n\n<p>If you'd need to have a list of <strong>one item</strong>!</p>\n\n<p><em>Collections</em> is from <em>java.util</em> package.</p>\n"},{"comments":[{"owner":{"reputation":2460,"user_id":3919009,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/836c238f05fe7faac08b593d2bace718?s=128&d=identicon&r=PG","display_name":"Gustavo Morales","link":"https://stackoverflow.com/users/3919009/gustavo-morales"},"edited":false,"score":1,"creation_date":1463407515,"post_id":37255450,"comment_id":62038835,"content_license":"CC BY-SA 3.0","body":"Add a brief description of your answer."}],"owner":{"reputation":1234,"user_id":6233653,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/3iNsk.jpg?s=128&g=1","display_name":"Ant20","link":"https://stackoverflow.com/users/6233653/ant20"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1463408718,"last_edit_date":1463408718,"creation_date":1463406301,"answer_id":37255450,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Try with this code line:</p>\n\n<pre><code>Collections.singletonList(provider)\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4461,"user_id":1431720,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG","display_name":"Robert","link":"https://stackoverflow.com/users/1431720/robert"},"edited":false,"score":1,"creation_date":1473370072,"post_id":38424597,"comment_id":66126983,"content_license":"CC BY-SA 3.0","body":"If you go through all the trouble you might as well make it a template method instead of using plain <code>Object</code>."}],"owner":{"reputation":13285,"user_id":6089852,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/h15pk.png?s=128&g=1","display_name":"Charif DZ","link":"https://stackoverflow.com/users/6089852/charif-dz"},"comment_count":1,"is_accepted":false,"score":1,"last_activity_date":1495920925,"last_edit_date":1495920925,"creation_date":1468780271,"answer_id":38424597,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>The best way to do it:</p>\n\n<pre><code>package main_package;\n\nimport java.util.ArrayList;\n\n\npublic class Stackkkk {\n    public static void main(String[] args) {\n        ArrayList&lt;Object&gt; list = new ArrayList&lt;Object&gt;();\n        add(list, \"1\", \"2\", \"3\", \"4\", \"5\", \"6\");\n        System.out.println(\"I added \" + list.size() + \" element in one line\");\n    }\n\n    public static void add(ArrayList&lt;Object&gt; list,Object...objects){\n        for(Object object:objects)\n            list.add(object);\n    }\n}\n</code></pre>\n\n<p>Just create a function that can have as many elements as you want and call it to add them in one line.</p>\n"},{"owner":{"reputation":181,"user_id":5089473,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/EVfDj.jpg?s=128&g=1","display_name":"Akash Manngroliya","link":"https://stackoverflow.com/users/5089473/akash-manngroliya"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1473746095,"creation_date":1473746095,"answer_id":39463036,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Yes with the help of Arrays you can initialize array list in one line,</p>\n\n<pre><code>List&lt;String&gt; strlist= Arrays.asList(\"aaa\", \"bbb\", \"ccc\");\n</code></pre>\n"},{"owner":{"reputation":1385,"user_id":3380739,"user_type":"registered","profile_image":"https://graph.facebook.com/711282833/picture?type=large","display_name":"user_3380739","link":"https://stackoverflow.com/users/3380739/user-3380739"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1548629196,"last_edit_date":1548629196,"creation_date":1480362997,"answer_id":40852432,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<p>Here is code by <a href=\"https://github.com/landawn/AbacusUtil\" rel=\"nofollow noreferrer\">AbacusUtil</a></p>\n\n<pre><code>// ArrayList\nList&lt;String&gt; list = N.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n// HashSet\nSet&lt;String&gt; set = N.asSet(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n// HashMap\nMap&lt;String, Integer&gt; map = N.asMap(\"Buenos Aires\", 1, \"CÃ³rdoba\", 2, \"La Plata\", 3);\n\n// Or for Immutable List/Set/Map\nImmutableList.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nImmutableSet.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\nImmutableSet.of(\"Buenos Aires\", 1, \"CÃ³rdoba\", 2, \"La Plata\", 3);\n\n// The most efficient way, which is similar with Arrays.asList(...) in JDK. \n// but returns a flexible-size list backed by the specified array.\nList&lt;String&gt; set = Array.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>Declarationï¼ I'm the developer of AbacusUtil.</p>\n"},{"comments":[{"owner":{"reputation":8231,"user_id":441902,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/6c9abe80acfc58b78432c81b16234032?s=128&d=identicon&r=PG&f=1","display_name":"teon","link":"https://stackoverflow.com/users/441902/teon"},"edited":false,"score":1,"creation_date":1559918083,"post_id":40992475,"comment_id":99581597,"content_license":"CC BY-SA 4.0","body":"Its good that you explicitly said &quot;immutable list&quot; and then showed another example of mutable list because it makes it clear which to use when."}],"owner":{"reputation":27490,"user_id":85421,"user_type":"registered","profile_image":"https://i.stack.imgur.com/kKvXH.gif?s=128&g=1","display_name":"user85421","link":"https://stackoverflow.com/users/85421/user85421"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1481018269,"creation_date":1481018269,"answer_id":40992475,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Java 9 has the following method to create an <em>immutable</em> list:</p>\n\n<pre><code>List&lt;String&gt; places = List.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>which is easily adapted to create a mutable list, if required:</p>\n\n<pre><code>List&lt;String&gt; places = new ArrayList&lt;&gt;(List.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"));\n</code></pre>\n\n<p>Similar methods are available for <code>Set</code> and <code>Map</code>.</p>\n"},{"owner":{"reputation":42308,"user_id":1746118,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/a4a3P.png?s=128&g=1","display_name":"Naman","link":"https://stackoverflow.com/users/1746118/naman"},"comment_count":0,"is_accepted":false,"score":44,"last_activity_date":1589713858,"last_edit_date":1592644375,"creation_date":1486056984,"answer_id":42008770,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<p>With <a href=\"/questions/tagged/java-9\" class=\"post-tag\" title=\"show questions tagged &#39;java-9&#39;\" rel=\"tag\">java-9</a> and above, as suggested in <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">JEP 269: Convenience Factory Methods for Collections</a>, this could be achieved using <em>collection literals</em> now with -</p>\n<pre><code>List&lt;String&gt; list = List.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n\nSet&lt;String&gt; set = Set.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n</code></pre>\n<p>A similar approach would apply to <code>Map</code> as well -</p>\n<pre><code>Map&lt;String, String&gt; map = Map.of(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;)\n</code></pre>\n<p>which is similar to <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001193.html\" rel=\"noreferrer\">Collection Literals proposal</a> as stated by @coobird. Further clarified in the JEP as well -</p>\n<hr />\n<p><strong>Alternatives</strong></p>\n<blockquote>\n<p>Language changes have been considered several times, and rejected:</p>\n<p><a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001112.html\" rel=\"noreferrer\">Project Coin Proposal, 29 March 2009</a></p>\n<p><a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/001193.html\" rel=\"noreferrer\">Project Coin Proposal, 30 March 2009</a></p>\n<p><a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2014-January/011671.html\" rel=\"noreferrer\">JEP 186 discussion on lambda-dev, January-March 2014</a></p>\n<p>The language\nproposals were set aside in preference to a library-based proposal as\nsummarized in this <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2014-March/011938.html\" rel=\"noreferrer\">message.</a></p>\n</blockquote>\n<p>Related: <a href=\"https://stackoverflow.com/questions/41918934/what-is-the-point-of-overloaded-convenience-factory-methods-for-collections-in-j/41918976#41918976\">What is the point of overloaded Convenience Factory Methods for Collections in Java 9</a></p>\n"},{"owner":{"reputation":754,"user_id":1291525,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ad1b5b352d226bf0231656cae360dd0a?s=128&d=identicon&r=PG","display_name":"Henok T","link":"https://stackoverflow.com/users/1291525/henok-t"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1488329360,"last_edit_date":1488329360,"creation_date":1488322254,"answer_id":42520216,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Here is another way:</p>\n\n<pre><code>List&lt;String&gt; values = Stream.of(\"One\", \"Two\").collect(Collectors.toList());\n</code></pre>\n"},{"comments":[{"owner":{"reputation":228,"user_id":961575,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f94ff2f513b37c737608ade46ad92a80?s=128&d=identicon&r=PG","display_name":"Pavel Repin","link":"https://stackoverflow.com/users/961575/pavel-repin"},"edited":false,"score":0,"creation_date":1519652524,"post_id":43079154,"comment_id":84984350,"content_license":"CC BY-SA 3.0","body":"You can inline first expression to have compact solution: <code>letters = Arrays.asList(new String[]{&quot;A&quot;, &quot;B&quot;, &quot;C&quot;});</code>"}],"owner":{"reputation":2541,"user_id":6714430,"user_type":"registered","profile_image":"https://i.stack.imgur.com/adedu.jpg?s=128&g=1","display_name":"rashedcs","link":"https://stackoverflow.com/users/6714430/rashedcs"},"comment_count":1,"is_accepted":false,"community_owned_date":1499528991,"score":6,"last_activity_date":1495921187,"last_edit_date":1592644375,"creation_date":1490732283,"answer_id":43079154,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<p>You can use the below statements:</p>\n<h3>Code Snippet:</h3>\n<pre><code>String [] arr = {&quot;Sharlock&quot;, &quot;Homes&quot;, &quot;Watson&quot;};\n\nList&lt;String&gt; names = Arrays.asList(arr);\n</code></pre>\n"},{"owner":{"reputation":92649,"user_id":187141,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG","display_name":"yegor256","link":"https://stackoverflow.com/users/187141/yegor256"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1498412897,"creation_date":1498412897,"answer_id":44748988,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>You can use <code>StickyList</code> from <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>List&lt;String&gt; names = new StickyList&lt;&gt;(\n  \"Scott Fitzgerald\", \"Fyodor Dostoyevsky\"\n);\n</code></pre>\n"},{"owner":{"reputation":2524,"user_id":6051536,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-5RJ4vhbXHuk/AAAAAAAAAAI/AAAAAAAAFXw/8NiskXWvAL8/photo.jpg?sz=128","display_name":"Mohit Tyagi","link":"https://stackoverflow.com/users/6051536/mohit-tyagi"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1520202541,"last_edit_date":1520202541,"creation_date":1507252570,"answer_id":46596909,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>In Java 9 we can easily initialize an <code>ArrayList</code> in a single line:</p>\n\n<pre><code>List&lt;String&gt; places = List.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n\n<p>or</p>\n\n<pre><code>List&lt;String&gt; places = new ArrayList&lt;&gt;(List.of(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"));\n</code></pre>\n\n<p>This new approach of Java 9 has many advantages over the previous ones:</p>\n\n<ol>\n<li><a href=\"https://docs.oracle.com/javase/9/core/creating-immutable-lists-sets-and-maps.htm#JSCOR-GUID-6A9BAE41-A1AD-4AA1-AF1A-A8FC99A14199\" rel=\"noreferrer\">Space Efficiency</a></li>\n<li><a href=\"https://docs.oracle.com/javase/9/core/creating-immutable-lists-sets-and-maps.htm#JSCOR-GUID-4F3E2B7D-CE90-4862-A78A-414FC08DA6E4\" rel=\"noreferrer\">Immutability</a></li>\n<li><a href=\"https://docs.oracle.com/javase/9/core/creating-immutable-lists-sets-and-maps.htm#JSCOR-GUID-DD066F67-9C9B-444E-A3CB-820503735951\" rel=\"noreferrer\">Thread Safe</a></li>\n</ol>\n\n<p>See this post for more details -> <em><a href=\"https://stackoverflow.com/questions/46579074/what-is-the-difference-between-list-of-and-arrays-aslist\">What is the difference between List.of and Arrays.asList?</a></em></p>\n"},{"comments":[{"owner":{"reputation":10232,"user_id":4138801,"user_type":"registered","accept_rate":97,"profile_image":"https://lh4.googleusercontent.com/-aVJI2hM4hYc/AAAAAAAAAAI/AAAAAAAAAEk/cXFqsfUYh0o/photo.jpg?sz=128","display_name":"Clashsoft","link":"https://stackoverflow.com/users/4138801/clashsoft"},"edited":false,"score":1,"creation_date":1602244762,"post_id":47632239,"comment_id":113666551,"content_license":"CC BY-SA 4.0","body":"you could use Collections.addAll instead of the for loop. Also, if you name the method <code>list</code>, the name requires no explanation :)"}],"owner":{"reputation":816,"user_id":947488,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b99c19bbe166745fc5d29ea09ff2c562?s=128&d=identicon&r=PG","display_name":"Stefan Reich","link":"https://stackoverflow.com/users/947488/stefan-reich"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1512386588,"creation_date":1512386588,"answer_id":47632239,"question_id":1005073,"content_license":"CC BY-SA 3.0","body":"<p>Why not make a simple utility function that does this?</p>\n\n<pre><code>static &lt;A&gt; ArrayList&lt;A&gt; ll(A... a) {\n  ArrayList l = new ArrayList(a.length);\n  for (A x : a) l.add(x);\n  return l;\n}\n</code></pre>\n\n<p>\"<code>ll</code>\" stands for \"literal list\".</p>\n\n<pre><code>ArrayList&lt;String&gt; places = ll(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\");\n</code></pre>\n"},{"owner":{"reputation":629,"user_id":11199879,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0a9c56c2190957960c9463c03486df8?s=128&d=identicon&r=PG&f=1","display_name":"Kaplan","link":"https://stackoverflow.com/users/11199879/kaplan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1570201451,"creation_date":1570201451,"answer_id":58238964,"question_id":1005073,"content_license":"CC BY-SA 4.0","body":"<p><em>interestingly no one-liner with the other overloaded</em> <code>Stream::collect</code> <em>method is listed</em></p>\n\n<pre><code>ArrayList&lt;String&gt; places = Stream.of( \"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\" ).collect( ArrayList::new, ArrayList::add, ArrayList::addAll );\n</code></pre>\n"}],"owner":{"reputation":86325,"user_id":119895,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/dEYOs.jpg?s=128&g=1","display_name":"Macarse","link":"https://stackoverflow.com/users/119895/macarse"},"comment_count":8,"is_answered":true,"view_count":3127253,"protected_date":1428573066,"accepted_answer_id":1005083,"answer_count":31,"score":2894,"last_activity_date":1589713858,"creation_date":1245211820,"last_edit_date":1574329708,"question_id":1005073,"link":"https://stackoverflow.com/questions/1005073/initialization-of-an-arraylist-in-one-line","title":"Initialization of an ArrayList in one line","body":"<p>I wanted to create a list of options for testing purposes. At first, I did this:</p>\n\n<pre><code>ArrayList&lt;String&gt; places = new ArrayList&lt;String&gt;();\nplaces.add(\"Buenos Aires\");\nplaces.add(\"CÃ³rdoba\");\nplaces.add(\"La Plata\");\n</code></pre>\n\n<p>Then, I refactored the code as follows:</p>\n\n<pre><code>ArrayList&lt;String&gt; places = new ArrayList&lt;String&gt;(\n    Arrays.asList(\"Buenos Aires\", \"CÃ³rdoba\", \"La Plata\"));\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"},{"tags":["java","unit-testing","tdd"],"comments":[{"owner":{"reputation":4739,"user_id":70551,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/c5a248cded4b8de6ea69feab15a9b6e6?s=128&d=identicon&r=PG","display_name":"Surya","link":"https://stackoverflow.com/users/70551/surya"},"edited":false,"score":270,"creation_date":1283201036,"post_id":34571,"comment_id":3783996,"content_license":"CC BY-SA 2.5","body":"Best way to test a private method is not testing it directly"},{"owner":{"reputation":34844,"user_id":271999,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/UOdwH.png?s=128&g=1","display_name":"Mouna Cheikhna","link":"https://stackoverflow.com/users/271999/mouna-cheikhna"},"edited":false,"score":27,"creation_date":1286962441,"post_id":34571,"comment_id":20651624,"content_license":"CC BY-SA 2.5","body":"Check the article <i><a href=\"http://www.artima.com/suiterunner/privateP.html\" rel=\"nofollow noreferrer\">Testing Private Methods with JUnit and SuiteRunner</a></i>."}],"answers":[{"comments":[{"owner":{"reputation":744,"user_id":1476154,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/d878b45af06f96aa81304df6c694e6af?s=128&d=identicon&r=PG","display_name":"grinch","link":"https://stackoverflow.com/users/1476154/grinch"},"edited":false,"score":7,"creation_date":1360787350,"post_id":34586,"comment_id":20834192,"content_license":"CC BY-SA 3.0","body":"Further, we never get close to 100% code coverage anyway, so why not focus your time doing quality testing on the methods that clients will actually be using directly."},{"owner":{"reputation":1596,"user_id":2020801,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/9981dde909678f98fb25eed05cc9f23f?s=128&d=identicon&r=PG","display_name":"Erik Madsen","link":"https://stackoverflow.com/users/2020801/erik-madsen"},"reply_to_user":{"reputation":744,"user_id":1476154,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/d878b45af06f96aa81304df6c694e6af?s=128&d=identicon&r=PG","display_name":"grinch","link":"https://stackoverflow.com/users/1476154/grinch"},"edited":false,"score":40,"creation_date":1372146816,"post_id":34586,"comment_id":25072489,"content_license":"CC BY-SA 3.0","body":"@grinch Spot on. The only thing you would gain from testing private methods is debugging information, and that&#39;s what debuggers are for. If your tests of the class&#39;s contract have full coverage then you have all the information you need. Private methods are an <b>implementation</b> detail. If you test them you will have to change your tests every time your implementation changes, even if the contract doesn&#39;t. In the full life cycle of the software this is likely to cost a lot more than the benefit it gives."}],"owner":{"reputation":7100,"user_id":2822,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/687b3538510fe4217ecbe06fcac473e2?s=128&d=identicon&r=PG","display_name":"Trumpi","link":"https://stackoverflow.com/users/2822/trumpi"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":692,"last_activity_date":1220026459,"creation_date":1220026459,"answer_id":34586,"question_id":34571,"content_license":"CC BY-SA 2.5","body":"<p>The best way to test a private method is via another public method. If this cannot be done, then one of the following conditions is true:</p>\n\n<ol>\n<li>The private method is dead code</li>\n<li>There is a design smell near the class that you are testing</li>\n<li>The method that you are trying to test should not be private</li>\n</ol>\n"},{"comments":[{"owner":{"reputation":388,"user_id":880942,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7ca81d636f92ced28a287d69ecff7943?s=128&d=identicon&r=PG","display_name":"Dan Haynes","link":"https://stackoverflow.com/users/880942/dan-haynes"},"edited":false,"score":18,"creation_date":1368801532,"post_id":34590,"comment_id":23881000,"content_license":"CC BY-SA 3.0","body":"That&#39;s the best answer IMO, or as it is usually said, test behaviour, not methods. Unit testing is not a replacement for source code metrics, static code analysis tools and code reviews. If private methods are so complex that they need separates tests then it probably needs to be refactored, not more tests thrown at it."},{"owner":{"reputation":2235,"user_id":346057,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/ad4d3f051749ebbb0aafabfc603df4ee?s=128&d=identicon&r=PG","display_name":"razor","link":"https://stackoverflow.com/users/346057/razor"},"edited":false,"score":15,"creation_date":1432053724,"post_id":34590,"comment_id":48757575,"content_license":"CC BY-SA 3.0","body":"so don&#39;t write private methods, just create 10 other small classes ?"},{"owner":{"reputation":427,"user_id":5111897,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c63a8a7d93df885ae3e7d17f3fcf5303?s=128&d=identicon&r=PG&f=1","display_name":"Akshat Sharda","link":"https://stackoverflow.com/users/5111897/akshat-sharda"},"edited":false,"score":3,"creation_date":1581519183,"post_id":34590,"comment_id":106462411,"content_license":"CC BY-SA 4.0","body":"No, it basically means that you can test the functionality of the private methods using the public method that invokes them."}],"owner":{"reputation":6293,"user_id":3305,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/9f88abf7dbaa66d72efc2e3cda54c732?s=128&d=identicon&r=PG","display_name":"John Channing","link":"https://stackoverflow.com/users/3305/john-channing"},"comment_count":3,"is_accepted":false,"community_owned_date":1365626788,"score":138,"last_activity_date":1356774740,"last_edit_date":1356774740,"creation_date":1220026494,"answer_id":34590,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Generally a unit test is intended to exercise the public interface of a class or unit. Therefore, private methods are implementation detail that you would not expect to test explicitly.</p>\n"},{"comments":[{"owner":{"reputation":1214,"user_id":3645375,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2ba0dfc80b363486da9d9c92e429e745?s=128&d=identicon&r=PG&f=1","display_name":"Bernardo Dal Corno","link":"https://stackoverflow.com/users/3645375/bernardo-dal-corno"},"edited":false,"score":0,"creation_date":1525889465,"post_id":34594,"comment_id":87537120,"content_license":"CC BY-SA 4.0","body":"True fact. The problem is when the implementation is more complicated, like if one public method calls several private methods. Which one did fail? Or if it is a complicated private method, that can&#39;t be exposed nor transferred to a new class"},{"owner":{"reputation":742,"user_id":1854834,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/605df56f7a59b96f2ae70e9237f7d2fa?s=128&d=identicon&r=PG","display_name":"Wei Qiu","link":"https://stackoverflow.com/users/1854834/wei-qiu"},"edited":false,"score":0,"creation_date":1529377454,"post_id":34594,"comment_id":88839757,"content_license":"CC BY-SA 4.0","body":"You already mentioned why the private method should be tested. You said &quot;then that could be &quot;, so you are not sure. IMO, whether a method should be tested is orthogonal to its access level."}],"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":62,"last_activity_date":1220026530,"creation_date":1220026530,"answer_id":34594,"question_id":34571,"content_license":"CC BY-SA 2.5","body":"<p>The private methods are called by a public method, so the inputs to your public methods should also test private methods that are called by those public methods. When a public method fails, then that could be a failure in the private method.</p>\n"},{"comments":[{"owner":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"reply_to_user":{"reputation":3623,"user_id":1659790,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/sS2uf.png?s=128&g=1","display_name":"Jimmy T.","link":"https://stackoverflow.com/users/1659790/jimmy-t"},"edited":false,"score":0,"creation_date":1440140605,"post_id":34598,"comment_id":52158971,"content_license":"CC BY-SA 3.0","body":"@JimmyT., Depends on who the &quot;production code&quot; is for. I would call code produced for applications stationed within VPN whose target users are sysadmins to be production code."},{"owner":{"reputation":3623,"user_id":1659790,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/sS2uf.png?s=128&g=1","display_name":"Jimmy T.","link":"https://stackoverflow.com/users/1659790/jimmy-t"},"reply_to_user":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"edited":false,"score":0,"creation_date":1440188821,"post_id":34598,"comment_id":52186909,"content_license":"CC BY-SA 3.0","body":"@Pacerier What do you mean?"},{"owner":{"reputation":1066,"user_id":2441441,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/51eea1787b9429c6873be5d34e0059e2?s=128&d=identicon&r=PG","display_name":"user2441441","link":"https://stackoverflow.com/users/2441441/user2441441"},"edited":false,"score":1,"creation_date":1468357546,"post_id":34598,"comment_id":64092114,"content_license":"CC BY-SA 3.0","body":"5th option, like mentioned above is testing the public method that calls the private method? Correct?"},{"owner":{"user_type":"does_not_exist","display_name":"user2918461"},"reply_to_user":{"reputation":2322,"user_id":4737909,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/8f9d4fdee09400e46fc1b088fdc5848b?s=128&d=identicon&r=PG&f=1","display_name":"Lorenzo Lerate","link":"https://stackoverflow.com/users/4737909/lorenzo-lerate"},"edited":false,"score":1,"creation_date":1505921576,"post_id":34598,"comment_id":79613156,"content_license":"CC BY-SA 3.0","body":"@LorenzoLerate I&#39;ve been wrestling with this because I&#39;m doing embedded development and I&#39;d like my software to be as small as possible. Size constraints and performance is the only reason I can think of."},{"owner":{"reputation":645,"user_id":1568881,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/24164ab238f93cf20266cbde9a577ec8?s=128&d=identicon&r=PG&f=1","display_name":"Aguid","link":"https://stackoverflow.com/users/1568881/aguid"},"edited":false,"score":0,"creation_date":1509138804,"post_id":34598,"comment_id":80914389,"content_license":"CC BY-SA 3.0","body":"I really like the test using reflection: Here the pattern Method method = targetClass.getDeclaredMethod(methodName, argClasses); method.setAccessible(true); return method.invoke(targetObject, argObjects);"},{"owner":{"reputation":10592,"user_id":2601671,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/9e7a8b29723c6d38e1b1a1f245c27b4c?s=128&d=identicon&r=PG","display_name":"Trenton","link":"https://stackoverflow.com/users/2601671/trenton"},"reply_to_user":{"reputation":1066,"user_id":2441441,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/51eea1787b9429c6873be5d34e0059e2?s=128&d=identicon&r=PG","display_name":"user2441441","link":"https://stackoverflow.com/users/2441441/user2441441"},"edited":false,"score":0,"creation_date":1587598413,"post_id":34598,"comment_id":108578269,"content_license":"CC BY-SA 4.0","body":"@user2441441 that&#39;s the same as #1 â don&#39;t test private methods"}],"owner":{"reputation":6621,"user_id":2697,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/17404e0c1869fec55dd69f7c033de12e?s=128&d=identicon&r=PG","display_name":"Iker Jimenez","link":"https://stackoverflow.com/users/2697/iker-jimenez"},"comment_count":6,"is_accepted":false,"community_owned_date":1365626788,"score":216,"last_activity_date":1614839781,"last_edit_date":1614839781,"creation_date":1220026580,"answer_id":34598,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>From this article: <a href=\"http://www.artima.com/suiterunner/private.html\" rel=\"nofollow noreferrer\">Testing Private Methods with JUnit and SuiteRunner</a> (Bill Venners), you basically have 4 options:</p>\n<blockquote>\n<ol>\n<li>Don't test private methods.</li>\n<li>Give the methods package access.</li>\n<li>Use a nested test class.</li>\n<li><strike>Use reflection.</strike></li>\n</ol>\n</blockquote>\n"},{"owner":{"reputation":24446,"user_id":1931,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/4a330b7317cb51cafd60b0c345922744?s=128&d=identicon&r=PG","display_name":"bmurphy1976","link":"https://stackoverflow.com/users/1931/bmurphy1976"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":16,"last_activity_date":1220027025,"creation_date":1220027025,"answer_id":34630,"question_id":34571,"content_license":"CC BY-SA 2.5","body":"<p>I tend not to test private methods.  There lies madness.  Personally, I believe you should only test your publicly exposed interfaces (and that includes protected and internal methods).  </p>\n"},{"comments":[{"owner":{"reputation":73387,"user_id":1782,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/4dfc8f56817006ef21327d5ff19ce04f?s=128&d=identicon&r=PG","display_name":"juan","link":"https://stackoverflow.com/users/1782/juan"},"edited":false,"score":0,"creation_date":1220027655,"post_id":34644,"comment_id":11369841,"content_license":"CC BY-SA 2.5","body":"you can&#39;t use reflection to get private methods from outside the owner class, the private modifier affects reflection also <a href=\"http://www.codeproject.com/KB/cs/testnonpublicmembers.aspx\" rel=\"nofollow noreferrer\">Here</a>&#39;s a good article on the question&#39;s subject"},{"owner":{"reputation":32787,"user_id":349112,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9b69ebb35f216518130c1f301c5e938f?s=128&d=identicon&r=PG","display_name":"tc.","link":"https://stackoverflow.com/users/349112/tc"},"reply_to_user":{"reputation":73387,"user_id":1782,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/4dfc8f56817006ef21327d5ff19ce04f?s=128&d=identicon&r=PG","display_name":"juan","link":"https://stackoverflow.com/users/1782/juan"},"edited":false,"score":0,"creation_date":1363982616,"post_id":34644,"comment_id":22085595,"content_license":"CC BY-SA 3.0","body":"@jmfsg The article you link to link to specifically says &quot;Testing private methods is a little more involved; but we can still do it using <code>System.Reflection</code>.&quot; (Apparently you need <code>ReflectionPermission</code>, but that&#39;s not normally a problem.)"}],"owner":{"reputation":48640,"user_id":2030,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/73fad2d46ffaac8dd679d302a681147b?s=128&d=identicon&r=PG","display_name":"Josh Brown","link":"https://stackoverflow.com/users/2030/josh-brown"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":6,"last_activity_date":1513254400,"last_edit_date":1513254400,"creation_date":1220027403,"answer_id":34644,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>For Java I'd use <a href=\"http://docs.oracle.com/javase/tutorial/reflect/index.html\" rel=\"nofollow noreferrer\">reflection</a>, since I don't like the idea of changing the access to a package on the declared method just for the sake of testing. However, I usually just test the public methods which should also ensure the private methods are working correctly.</p>\n\n<blockquote>\n  <p>you can't use reflection to get private methods from outside the owner class, the private modifier affects reflection also</p>\n</blockquote>\n\n<p>This is not true. You most certainly can, as mentioned in <a href=\"https://stackoverflow.com/questions/34571/whats-the-best-way-of-unit-testing-private-methods#34658\">Cem Catikkas's answer</a>.</p>\n"},{"comments":[{"owner":{"reputation":2476,"user_id":117361,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0c0319b9236bfd4b39af7729ff99383a?s=128&d=identicon&r=PG&f=1","display_name":"andygavin","link":"https://stackoverflow.com/users/117361/andygavin"},"edited":false,"score":371,"creation_date":1246026209,"post_id":34658,"comment_id":860803,"content_license":"CC BY-SA 2.5","body":"Useful if you don&#39;t know the API perhaps, but if you are having to test private methods in this manner there is something up with your design. As another poster says unit testing should test the class&#39;s contract: if the contract is too broad and instantiates too much of the system then the design should be addressed."}],"owner":{"reputation":6950,"user_id":3087,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7d0939f834c7658366376f94fbc6a4e6?s=128&d=identicon&r=PG","display_name":"Cem Catikkas","link":"https://stackoverflow.com/users/3087/cem-catikkas"},"comment_count":1,"is_accepted":true,"community_owned_date":1365626788,"score":1716,"last_activity_date":1552618255,"last_edit_date":1552618255,"creation_date":1220027711,"answer_id":34658,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p><strong>Update:</strong></p>\n  \n  <p>Some 10 years later perhaps the best way to test a private method, or any inaccessible member, is via <strong><code>@Jailbreak</code></strong> from the <a href=\"https://manifold.systems\" rel=\"noreferrer\">Manifold</a> framework.</p>\n\n<pre><code>@Jailbreak Foo foo = new Foo();\n// Direct, *type-safe* access to *all* foo's members\nfoo.privateMethod(x, y, z);\nfoo.privateField = value;\n</code></pre>\n  \n  <p>This way your code remains type-safe and readable.  No design compromises, no overexposing methods and fields for the sake of tests.</p>\n</blockquote>\n\n<p>If you have somewhat of a legacy <strong>Java</strong> application, and you're not allowed to change the visibility of your methods, the best way to test private methods is to use <a href=\"http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29\" rel=\"noreferrer\">reflection</a>. </p>\n\n<p>Internally we're using helpers to get/set <code>private</code> and <code>private static</code> variables as well as invoke <code>private</code> and <code>private static</code> methods. The following patterns will let you do pretty much anything related to the private methods and fields. Of course, you can't change <code>private static final</code> variables through reflection.</p>\n\n<pre><code>Method method = TargetClass.getDeclaredMethod(methodName, argClasses);\nmethod.setAccessible(true);\nreturn method.invoke(targetObject, argObjects);\n</code></pre>\n\n<p>And for fields:</p>\n\n<pre><code>Field field = TargetClass.getDeclaredField(fieldName);\nfield.setAccessible(true);\nfield.set(object, value);\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><strong>Notes:</strong><br>\n  1. <code>TargetClass.getDeclaredMethod(methodName, argClasses)</code> lets you look into <code>private</code> methods. The same thing applies for\n  <code>getDeclaredField</code>.<br>\n  2. The <code>setAccessible(true)</code> is required to play around with privates.</p>\n</blockquote>\n"},{"owner":{"reputation":113845,"user_id":4120,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/71f8f2fa409ea5ce2757c8d490ece924?s=128&d=identicon&r=PG","display_name":"Grundlefleck","link":"https://stackoverflow.com/users/4120/grundlefleck"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":31,"last_activity_date":1513254152,"last_edit_date":1513254152,"creation_date":1220302727,"answer_id":38425,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Having tried Cem Catikkas' <a href=\"https://stackoverflow.com/questions/34571/whats-the-best-way-of-unit-testing-private-methods#34658\">solution using reflection</a> for Java, I'd have to say his was a more elegant solution than I have described here. However, if you're looking for an alternative to using reflection, and have access to the source you're testing, this will still be an option.</p>\n\n<p>There is possible merit in testing private methods of a class, particularly with <a href=\"http://en.wikipedia.org/wiki/Test-driven_development\" rel=\"noreferrer\">test-driven development</a>, where you would like to design small tests before you write any code.</p>\n\n<p>Creating a test with access to private members and methods can test areas of code which are difficult to target specifically with access only to public methods. If a public method has several steps involved, it can consist of several private methods, which can then be tested individually.</p>\n\n<p>Advantages:</p>\n\n<ul>\n<li>Can test to a finer granularity</li>\n</ul>\n\n<p>Disadvantages:</p>\n\n<ul>\n<li>Test code must reside in the same\nfile as source code, which can be\nmore difficult to maintain</li>\n<li>Similarly with .class output files, they must remain within the same package as declared in source code</li>\n</ul>\n\n<p>However, if continuous testing requires this method, it may be a signal that the private methods should be extracted, which could be tested in the traditional, public way.</p>\n\n<p>Here is a convoluted example of how this would work:</p>\n\n<pre><code>// Import statements and package declarations\n\npublic class ClassToTest\n{\n    private int decrement(int toDecrement) {\n        toDecrement--;\n        return toDecrement;\n    }\n\n    // Constructor and the rest of the class\n\n    public static class StaticInnerTest extends TestCase\n    {\n        public StaticInnerTest(){\n            super();\n        }\n\n        public void testDecrement(){\n            int number = 10;\n            ClassToTest toTest= new ClassToTest();\n            int decremented = toTest.decrement(number);\n            assertEquals(9, decremented);\n        }\n\n        public static void main(String[] args) {\n            junit.textui.TestRunner.run(StaticInnerTest.class);\n        }\n    }\n}\n</code></pre>\n\n<p>The inner class would be compiled to <code>ClassToTest$StaticInnerTest</code>.</p>\n\n<p>See also: <em><a href=\"http://www.javaworld.com/javaworld/javatips/jw-javatip106.html\" rel=\"noreferrer\">Java Tip 106: Static inner classes for fun and profit</a></em></p>\n"},{"owner":{"reputation":40091,"user_id":4794,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG","display_name":"Don Kirkby","link":"https://stackoverflow.com/users/4794/don-kirkby"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":25,"last_activity_date":1484334508,"last_edit_date":1484334508,"creation_date":1220632785,"answer_id":46255,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>If you're trying to test existing code that you're reluctant or unable to change, reflection is a good choice.</p>\n\n<p>If the class's design is still flexible, and you've got a complicated private method that you'd like to test separately, I suggest you pull it out into a separate class and test that class separately. This doesn't have to change the public interface of the original class; it can internally create an instance of the helper class and call the helper method.</p>\n\n<p>If you want to test difficult error conditions coming from the helper method, you can go a step further. Extract an interface from the helper class, add a public getter and setter to the original class to inject the helper class (used through its interface), and then inject a mock version of the helper class into the original class to test how the original class responds to exceptions from the helper. This approach is also helpful if you want to test the original class without also testing the helper class.</p>\n"},{"comments":[{"owner":{"reputation":4800,"user_id":622440,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/0cf638dd0a3f0786c42d681689ffc35e?s=128&d=identicon&r=PG","display_name":"Domenic D.","link":"https://stackoverflow.com/users/622440/domenic-d"},"edited":false,"score":4,"creation_date":1384834977,"post_id":51192,"comment_id":29885124,"content_license":"CC BY-SA 3.0","body":"As part of the jmockit library, you have access to the Deencapsulation class which makes testing private methods easy:   <code>Deencapsulation.invoke(instance, &quot;privateMethod&quot;, param1, param2);</code>"},{"owner":{"reputation":13667,"user_id":62539,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/09dae57dd154198e0479c5aeb7c5b4d8?s=128&d=identicon&r=PG","display_name":"MedicineMan","link":"https://stackoverflow.com/users/62539/medicineman"},"edited":false,"score":0,"creation_date":1511156316,"post_id":51192,"comment_id":81724234,"content_license":"CC BY-SA 3.0","body":"I use this approach all the time.  Very helpful"}],"owner":{"reputation":4279,"user_id":5266,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f11a6143fb27e81c709f0339c7a95211?s=128&d=identicon&r=PG","display_name":"Will Sargent","link":"https://stackoverflow.com/users/5266/will-sargent"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":17,"last_activity_date":1513254213,"last_edit_date":1513254213,"creation_date":1220932256,"answer_id":51192,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>If you want to test private methods of a legacy application where you can't change the code, one option for Java is <a href=\"http://code.google.com/p/jmockit/\" rel=\"nofollow noreferrer\">jMockit</a>, which will allow you to create mocks to an object even when they're private to the class.</p>\n"},{"comments":[{"owner":{"reputation":1684,"user_id":205943,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG","display_name":"Dainius","link":"https://stackoverflow.com/users/205943/dainius"},"edited":false,"score":26,"creation_date":1343994040,"post_id":52054,"comment_id":15670535,"content_license":"CC BY-SA 3.0","body":"Question was how to test private methods. You say that you would do new class for that (and add much more complexity) and after suggest to not create new class. So how test private methods?"},{"owner":{"reputation":1684,"user_id":205943,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG","display_name":"Dainius","link":"https://stackoverflow.com/users/205943/dainius"},"edited":false,"score":4,"creation_date":1344098122,"post_id":52054,"comment_id":15695624,"content_license":"CC BY-SA 3.0","body":"I think that if you have method there is no need to create another class just to be able to test that method. I don&#39;t think that class design was question here.. So I assume that author did everything to have proper design before, so introducing another class for one method you just increasing complexity. Of course when you have enough complex program, there will be no obvious bugs.."},{"owner":{"reputation":40897,"user_id":5314,"user_type":"registered","accept_rate":36,"profile_image":"https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG","display_name":"Jay Bazuzi","link":"https://stackoverflow.com/users/5314/jay-bazuzi"},"reply_to_user":{"reputation":1684,"user_id":205943,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG","display_name":"Dainius","link":"https://stackoverflow.com/users/205943/dainius"},"edited":false,"score":29,"creation_date":1344114914,"post_id":52054,"comment_id":15698909,"content_license":"CC BY-SA 3.0","body":"@Dainius: I don&#39;t suggest creating a new class <i>solely</i> so you can test that method. I do suggest that writing tests can help you improve your design: good designs are easy to test."},{"owner":{"reputation":1684,"user_id":205943,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/a6fe3fd7c49c4cb055f1d73b7dc4fed6?s=128&d=identicon&r=PG","display_name":"Dainius","link":"https://stackoverflow.com/users/205943/dainius"},"edited":false,"score":13,"creation_date":1344236013,"post_id":52054,"comment_id":15718060,"content_license":"CC BY-SA 3.0","body":"But you agree that good OOD would expose (make public) only methods that are necessary for that class/object to work correctly? all other should be private/protectec. So in some private methods there will be some logic, and IMO testing these methods will only improve quality of software. Of course I agree that if some piece of code is to complex it should be divided to separate methods/class."},{"owner":{"reputation":1185,"user_id":2391315,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e3bea36da7e3c24d4baf1bfc75a4be70?s=128&d=identicon&r=PG","display_name":"confusopoly","link":"https://stackoverflow.com/users/2391315/confusopoly"},"edited":false,"score":2,"creation_date":1371506347,"post_id":52054,"comment_id":24837900,"content_license":"CC BY-SA 3.0","body":"There is a bit of a chicken-and-egg problem here. Strictly speaking you should have code that you want to refactor under test first, yet to test the code you first need to put it in a different class. That seems a bit suboptimal to me."},{"owner":{"reputation":40897,"user_id":5314,"user_type":"registered","accept_rate":36,"profile_image":"https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG","display_name":"Jay Bazuzi","link":"https://stackoverflow.com/users/5314/jay-bazuzi"},"edited":false,"score":1,"creation_date":1371513871,"post_id":52054,"comment_id":24840175,"content_license":"CC BY-SA 3.0","body":"What you describe is an ongoing problem for anyone trying to do unit testing, and far beyond the scope of this question. A short answer is &quot;Read <i>Working Effectively with Legacy Code</i> by Michael Feathers and then remember that all code is legacy code, 5 minutes after you write it."},{"owner":{"reputation":27109,"user_id":1019167,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/juW4C.png?s=128&g=1","display_name":"AlexWien","link":"https://stackoverflow.com/users/1019167/alexwien"},"edited":false,"score":6,"creation_date":1372712049,"post_id":52054,"comment_id":25288286,"content_license":"CC BY-SA 3.0","body":"@Danius: Adding a new class, in most cases reduce the complexity. Just measure it. Testability in some cases fights against OOD. The modern approach is favor testability."},{"owner":{"reputation":955,"user_id":2025948,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0a2eba20314e13b364fe1e7b7108e13f?s=128&d=identicon&r=PG","display_name":"Charles","link":"https://stackoverflow.com/users/2025948/charles"},"edited":false,"score":1,"creation_date":1413123802,"post_id":52054,"comment_id":41316484,"content_license":"CC BY-SA 3.0","body":"Here&#39;s a dangerous statement: &quot;is sufficiently complicated that I feel the need to test&quot;. If you only feel the need to test &quot;sufficiently complicated&quot; code, you are doing it wrong. You would not believe how often tests of simple getters and setters save the day."},{"owner":{"reputation":46145,"user_id":574479,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/79f682361ccbe900f8846a1098d13921?s=128&d=identicon&r=PG","display_name":"biziclop","link":"https://stackoverflow.com/users/574479/biziclop"},"reply_to_user":{"reputation":955,"user_id":2025948,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0a2eba20314e13b364fe1e7b7108e13f?s=128&d=identicon&r=PG","display_name":"Charles","link":"https://stackoverflow.com/users/2025948/charles"},"edited":false,"score":3,"creation_date":1437683122,"post_id":52054,"comment_id":51146457,"content_license":"CC BY-SA 3.0","body":"@Charles But of course all private methods are already tested through public methods. The statement should read &quot;is sufficiently complicated that I feel the need to test it <b>in isolation</b>&quot;."},{"owner":{"reputation":598,"user_id":2780081,"user_type":"registered","profile_image":"https://i.stack.imgur.com/lgKtG.jpg?s=128&g=1","display_name":"c-garcia","link":"https://stackoverflow.com/users/2780081/c-garcia"},"edited":false,"score":2,"creation_date":1442133449,"post_id":52054,"comment_id":52951900,"content_license":"CC BY-SA 3.0","body":"For me, the first line of this entry was pretty enlightening. If the algorithm is too complex and it deserves to be tested to reduce noise in other tests, from now on, I will consider the <i>Strategy pattern</i>. Considering does not mean using but, definitely, worth to have a look at."},{"owner":{"reputation":787,"user_id":92822,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/abb3692549bc59b790bfebb755ae94cb?s=128&d=identicon&r=PG","display_name":"pnschofield","link":"https://stackoverflow.com/users/92822/pnschofield"},"edited":false,"score":8,"creation_date":1480714553,"post_id":52054,"comment_id":69093929,"content_license":"CC BY-SA 3.0","body":"This is <i>exactly</i> how to use the feedback from your tests to drive and improve your design! Listen to your tests. if they are hard to write, that is telling you something important about your code!"},{"owner":{"reputation":1395,"user_id":999264,"user_type":"registered","accept_rate":39,"profile_image":"https://www.gravatar.com/avatar/12491b2a358bf2427bc8871251649d91?s=128&d=identicon&r=PG","display_name":"John Donn","link":"https://stackoverflow.com/users/999264/john-donn"},"edited":false,"score":0,"creation_date":1501154756,"post_id":52054,"comment_id":77659758,"content_license":"CC BY-SA 3.0","body":"&quot;When I have private methods in a class that are sufficiently complicated that I feel the need to test the private methods directly, that is a code smell&quot; - sometimes introducing additional classes makes your logic needlessly obscure and spread over different places."},{"owner":{"reputation":40897,"user_id":5314,"user_type":"registered","accept_rate":36,"profile_image":"https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG","display_name":"Jay Bazuzi","link":"https://stackoverflow.com/users/5314/jay-bazuzi"},"reply_to_user":{"reputation":1395,"user_id":999264,"user_type":"registered","accept_rate":39,"profile_image":"https://www.gravatar.com/avatar/12491b2a358bf2427bc8871251649d91?s=128&d=identicon&r=PG","display_name":"John Donn","link":"https://stackoverflow.com/users/999264/john-donn"},"edited":false,"score":1,"creation_date":1504157613,"post_id":52054,"comment_id":78906477,"content_license":"CC BY-SA 3.0","body":"@JohnDonn Sure. But &quot;Code Smell&quot; does not mean &quot;you must change the code in the following way&quot;. It means &quot;here&#39;s a hint about a place where you might be able to improve things.&quot; It&#39;s up to you to find the right change/judge whether your improvement idea is a keeper, and decide if this is the right time to execute that change."},{"owner":{"reputation":1693,"user_id":2757620,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/wFg9k.jpg?s=128&g=1","display_name":"qartal","link":"https://stackoverflow.com/users/2757620/qartal"},"edited":false,"score":0,"creation_date":1574350667,"post_id":52054,"comment_id":104210174,"content_license":"CC BY-SA 4.0","body":"It is completely fine to test private methods. The comments that if we are testing private methods then the design is not good are irrational. It is fine to apply testing in different levels: at the class internal levels (private/protected methods), class level (public methods), module level, system level, etc."}],"owner":{"reputation":40897,"user_id":5314,"user_type":"registered","accept_rate":36,"profile_image":"https://www.gravatar.com/avatar/59ca40f0fafad6de52790016d2195abc?s=128&d=identicon&r=PG","display_name":"Jay Bazuzi","link":"https://stackoverflow.com/users/5314/jay-bazuzi"},"comment_count":14,"is_accepted":false,"community_owned_date":1365626788,"score":343,"last_activity_date":1463650739,"last_edit_date":1463650739,"creation_date":1220971385,"answer_id":52054,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>When I have private methods in a class that are sufficiently complicated that I feel the need to test the private methods directly, that is a code smell: my class is too complicated.  </p>\n\n<p>My usual approach to addressing such issues is to tease out a new class that contains the interesting bits.  Often, this method and the fields it interacts with, and maybe another method or two can be extracted in to a new class.  </p>\n\n<p>The new class exposes these methods as 'public', so they're accessible for unit testing.  The new and old classes are now both simpler than the original class, which is great for me (I need to keep things simple, or I get lost!).</p>\n\n<p>Note that I'm not suggesting that people create classes without using their brain! The point here is to use the forces of unit testing to help you find good new classes.  </p>\n"},{"comments":[{"owner":{"reputation":27109,"user_id":1019167,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/juW4C.png?s=128&g=1","display_name":"AlexWien","link":"https://stackoverflow.com/users/1019167/alexwien"},"edited":false,"score":0,"creation_date":1372711867,"post_id":53571,"comment_id":25288189,"content_license":"CC BY-SA 3.0","body":"You should not indirectly test! Not only touching via coverage ; test that the expected result is delivered!"}],"owner":{"reputation":3226,"user_id":151,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/2f38ca4af6139077092c687c3c7ab9a5?s=128&d=identicon&r=PG","display_name":"Darren Greaves","link":"https://stackoverflow.com/users/151/darren-greaves"},"comment_count":1,"is_accepted":false,"community_owned_date":1365626788,"score":12,"last_activity_date":1221032922,"creation_date":1221032922,"answer_id":53571,"question_id":34571,"content_license":"CC BY-SA 2.5","body":"<p>As many above have suggested, a good way is to test them via your public interfaces.</p>\n\n<p>If you do this, it's a good idea to use a code coverage tool (like Emma) to see if your private methods are in fact being executed from your tests.</p>\n"},{"owner":{"reputation":786,"user_id":5313,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f5a8f90cf5bbb85b1037d1ed7baf6375?s=128&d=identicon&r=PG","display_name":"Joe","link":"https://stackoverflow.com/users/5313/joe"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":15,"last_activity_date":1513254267,"last_edit_date":1513254267,"creation_date":1221171628,"answer_id":57795,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>If you're using JUnit, have a look at <a href=\"http://junit-addons.sourceforge.net/\" rel=\"nofollow noreferrer\">junit-addons</a>. It has the ability to ignore the Java security model and access private methods and attributes.</p>\n"},{"comments":[{"owner":{"reputation":128679,"user_id":16853,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/lUxU7.jpg?s=128&g=1","display_name":"oxbow_lakes","link":"https://stackoverflow.com/users/16853/oxbow-lakes"},"edited":false,"score":3,"creation_date":1234719187,"post_id":91206,"comment_id":362841,"content_license":"CC BY-SA 2.5","body":"Because often a particular piece of code from a public method is refactored into an internal private method and is really the critical piece of logic which you might have got wrong. You want to test this independently from the public method"},{"owner":{"reputation":27109,"user_id":1019167,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/juW4C.png?s=128&g=1","display_name":"AlexWien","link":"https://stackoverflow.com/users/1019167/alexwien"},"edited":false,"score":0,"creation_date":1372711737,"post_id":91206,"comment_id":25288119,"content_license":"CC BY-SA 3.0","body":"Even the shortest code sometimes without unit test is not correct. Just try to caluclate the difference between 2 geograhpical angles. 4 lines of code, and most will not do it correct at first try. Such methods needs unit test, because the form the base of a trustfull code. (Ans such usefull code can be public, too; less usefull protected"}],"owner":{"reputation":3293,"user_id":14153,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/80dade8a6e4fa68b48b4a63dc16ab433?s=128&d=identicon&r=PG","display_name":"Aaron","link":"https://stackoverflow.com/users/14153/aaron"},"comment_count":2,"is_accepted":false,"community_owned_date":1221730190,"score":10,"last_activity_date":1484334724,"last_edit_date":1484334724,"creation_date":1221730190,"answer_id":91206,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>First, I'll throw this question out: Why do your private members need isolated testing? Are they that complex, providing such complicated behaviors as to require testing apart from the public surface? It's unit testing, not 'line-of-code' testing. Don't sweat the small stuff.</p>\n\n<p>If they are that big, big enough that these private members are each a 'unit' large in complexity -- consider refactoring such private members out of this class.</p>\n\n<p>If refactoring is inappropriate or infeasible, can you use the strategy pattern to replace access to these private member functions / member classes when under unit test? Under unit test, the strategy would provide added validation, but in release builds it would be simple passthrough.</p>\n"},{"comments":[{"owner":{"reputation":27109,"user_id":1019167,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/juW4C.png?s=128&g=1","display_name":"AlexWien","link":"https://stackoverflow.com/users/1019167/alexwien"},"edited":false,"score":4,"creation_date":1372711393,"post_id":190338,"comment_id":25287950,"content_license":"CC BY-SA 3.0","body":"unit test and src code are a pair. If you change the src, maybe you have to change the unit test. That is the sense of junit test. They shall garuantee that all works as before. and it is fine if they break, if you change the code."},{"owner":{"reputation":22770,"user_id":2281790,"user_type":"registered","accept_rate":46,"profile_image":"https://i.stack.imgur.com/pP0ow.jpg?s=128&g=1","display_name":"Harald Coppoolse","link":"https://stackoverflow.com/users/2281790/harald-coppoolse"},"edited":false,"score":1,"creation_date":1447075634,"post_id":190338,"comment_id":54994609,"content_license":"CC BY-SA 3.0","body":"Do not agree that unit test should change if code changes. If you are ordered to add functionality to a class without changing the existing functionality of the class, then the exist unit tests ought to pass even after you&#39;ve changed your code. As Peter mentions, unit tests ought to test the interface, not how it is done internally. In Test Driven Development unit tests are created before the code is written, to focus on the interface of the class, not on how it is solved internally."}],"owner":{"reputation":5067,"user_id":19520,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/44e500d45df133c3e941d1293c3e224c?s=128&d=identicon&r=PG","display_name":"ema","link":"https://stackoverflow.com/users/19520/ema"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":20,"last_activity_date":1356775363,"last_edit_date":1356775363,"creation_date":1223621042,"answer_id":190338,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Testing private methods breaks the encapsulation of your class because every time you change the internal implementation you break client code (in this case, the tests).</p>\n\n<p>So don't test private methods.</p>\n"},{"comments":[{"owner":{"reputation":2679,"user_id":853599,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/a05d4f0059368a056ddf29ef647d591b?s=128&d=identicon&r=PG","display_name":"coolcfan","link":"https://stackoverflow.com/users/853599/coolcfan"},"edited":false,"score":0,"creation_date":1344478811,"post_id":549551,"comment_id":15801252,"content_license":"CC BY-SA 3.0","body":"Up for code coverage. No matter what kind of logic is in the private method, you are still invoking those logic through a public method. A code coverage tool can show you which parts are covered by the test, therefore you can see if your private method is tested."},{"owner":{"reputation":18038,"user_id":1439305,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/gNHmR.jpg?s=128&g=1","display_name":"Audrius Meskauskas","link":"https://stackoverflow.com/users/1439305/audrius-meskauskas"},"edited":false,"score":0,"creation_date":1418373803,"post_id":549551,"comment_id":43319288,"content_license":"CC BY-SA 3.0","body":"I have seen classes where the only public method is main[], and they pop up GUI plus connect the database and a couple of web servers worldwide. Easy to say &quot;do not test indirectly&quot;..."}],"owner":{"reputation":57706,"user_id":65868,"user_type":"registered","accept_rate":68,"profile_image":"https://i.stack.imgur.com/1c5lJ.png?s=128&g=1","display_name":"TofuBeer","link":"https://stackoverflow.com/users/65868/tofubeer"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":27,"last_activity_date":1484334800,"last_edit_date":1484334800,"creation_date":1234637583,"answer_id":549551,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>As others have said... don't test private methods directly. Here are a few thoughts:</p>\n\n<ol>\n<li>Keep all methods small and focused (easy to test, easy to find what is wrong)</li>\n<li>Use code coverage tools. I like <a href=\"http://cobertura.sourceforge.net/index.html\" rel=\"noreferrer\">Cobertura</a> (oh happy day, looks like a new version is out!)</li>\n</ol>\n\n<p>Run the code coverage on the unit tests. If you see that methods are not fully tested add to the tests to get the coverage up. Aim for 100% code coverage, but realize that you probably won't get it.</p>\n"},{"owner":{"reputation":57706,"user_id":65868,"user_type":"registered","accept_rate":68,"profile_image":"https://i.stack.imgur.com/1c5lJ.png?s=128&g=1","display_name":"TofuBeer","link":"https://stackoverflow.com/users/65868/tofubeer"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":4,"last_activity_date":1513254471,"last_edit_date":1513254471,"creation_date":1234637685,"answer_id":549558,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>You can turn off Java access restrictions for reflection so that private means nothing.</p>\n\n<p>The <code>setAccessible(true)</code> call does that.</p>\n\n<p>The only restriction is that a ClassLoader may disallow you from doing that.</p>\n\n<p>See <em><a href=\"http://www.onjava.com/pub/a/onjava/2003/11/12/reflection.html\" rel=\"nofollow noreferrer\">Subverting Java Access Protection for Unit Testing</a></em> (Ross Burton) for a way to do this in Java.</p>\n"},{"owner":{"reputation":5433,"user_id":29746,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e90fd4968a902ae667f3e9ce0b040a94?s=128&d=identicon&r=PG","display_name":"Thomas Hansen","link":"https://stackoverflow.com/users/29746/thomas-hansen"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":2,"last_activity_date":1484334916,"last_edit_date":1484334916,"creation_date":1234638661,"answer_id":549592,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>In C# you could have used <code>System.Reflection</code>, though in Java I don't know. Though I feel the urge to answer this anyway since if you \"feel you need to unit test private methods\" my guess is that there is something else which is wrong...</p>\n\n<p>I would seriously consider looking at my architecture again with fresh eyes...</p>\n"},{"comments":[{"owner":{"reputation":2235,"user_id":346057,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/ad4d3f051749ebbb0aafabfc603df4ee?s=128&d=identicon&r=PG","display_name":"razor","link":"https://stackoverflow.com/users/346057/razor"},"edited":false,"score":0,"creation_date":1432053653,"post_id":1038507,"comment_id":48757533,"content_license":"CC BY-SA 3.0","body":"tests can be in different folders (like src/test/java and app code in src/main/java) but the package needs to be the same."}],"owner":{"reputation":559,"user_id":126875,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ef4aa134664f17673c4d9480bfaeff67?s=128&d=identicon&r=PG","display_name":"Diego Amicabile","link":"https://stackoverflow.com/users/126875/diego-amicabile"},"comment_count":1,"is_accepted":false,"community_owned_date":1365626788,"score":2,"last_activity_date":1356775553,"last_edit_date":1356775553,"creation_date":1245851383,"answer_id":1038507,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>What if your test classes are in the same package as the class that should be tested?</p>\n\n<p>But in a different directory of course, <code>src</code> &amp; <code>classes</code> for your source code, <code>test/src</code> and <code>test/classes</code> for your test classes. And let <code>classes</code> and <code>test/classes</code> be in your classpath.</p>\n"},{"comments":[{"owner":{"reputation":11782,"user_id":683077,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/f9374eb11453c92578511c19deb2a34f?s=128&d=identicon&r=PG&f=1","display_name":"Colin M","link":"https://stackoverflow.com/users/683077/colin-m"},"edited":false,"score":78,"creation_date":1373290046,"post_id":1043013,"comment_id":25488163,"content_license":"CC BY-SA 3.0","body":"+1 to this. In my opinion it&#39;s the best answer to the question. By testing private methods you are testing the implementation. This defeats the purpose of unit testing, which is to test the inputs/outputs of a class&#39; contract. A test should <i>only</i> know enough about the implementation to mock the methods it calls on its dependencies. Nothing more. If you can not change your implementation without having to change a test - chances are that your test strategy is poor."},{"owner":{"reputation":143,"user_id":3167155,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/fd4705e916f325c8ec2c40955e9bc424?s=128&d=identicon&r=PG&f=1","display_name":"Aaron Marcus","link":"https://stackoverflow.com/users/3167155/aaron-marcus"},"reply_to_user":{"reputation":11782,"user_id":683077,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/f9374eb11453c92578511c19deb2a34f?s=128&d=identicon&r=PG&f=1","display_name":"Colin M","link":"https://stackoverflow.com/users/683077/colin-m"},"edited":false,"score":11,"creation_date":1427991708,"post_id":1043013,"comment_id":47007579,"content_license":"CC BY-SA 3.0","body":"@Colin M That&#39;s not really what he&#39;s asking though ;) Let him decide it, you don&#39;t know the project."},{"owner":{"reputation":7916,"user_id":912829,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/8155348e86202fd2f553332dde3b2fcf?s=128&d=identicon&r=PG&f=1","display_name":"ACV","link":"https://stackoverflow.com/users/912829/acv"},"edited":false,"score":2,"creation_date":1512041567,"post_id":1043013,"comment_id":82101788,"content_license":"CC BY-SA 3.0","body":"Not really true. It could take a lot of effort to test a small part of the private method through the public method using it. The public method could require significant setup before you reach the line that calls your private method"},{"owner":{"reputation":994,"user_id":1171253,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9962fbb2d62f7850f29374e68ceef4f5?s=128&d=identicon&r=PG","display_name":"wuppi","link":"https://stackoverflow.com/users/1171253/wuppi"},"edited":false,"score":1,"creation_date":1562053410,"post_id":1043013,"comment_id":100245925,"content_license":"CC BY-SA 4.0","body":"I agree. You should test, if the contract is fulfilled. You should not test, how this is done. If the contact is fulfilled without reaching 100% code coverage (in private methods), that might be dead or useless code."}],"owner":{"reputation":3290,"user_id":128285,"user_type":"registered","accept_rate":64,"profile_image":"https://www.gravatar.com/avatar/a237710fcffbb701c6af99aee0e56ec0?s=128&d=identicon&r=PG","display_name":"Jon","link":"https://stackoverflow.com/users/128285/jon"},"comment_count":4,"is_accepted":false,"community_owned_date":1365626788,"score":299,"last_activity_date":1513253975,"last_edit_date":1513253975,"creation_date":1245924072,"answer_id":1043013,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>I have used <a href=\"http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29\" rel=\"noreferrer\">reflection</a> to do this for Java in the past, and in my opinion it was a big mistake.</p>\n\n<p>Strictly speaking, you should <em>not</em> be writing unit tests that directly test private methods. What you <em>should</em> be testing is the public contract that the class has with other objects; you should never directly test an object's internals. If another developer wants to make a small internal change to the class, which doesn't affect the classes public contract, he/she then has to modify your reflection based test to ensure that it works. If you do this repeatedly throughout a project, unit tests then stop being a useful measurement of code health, and start to become a hindrance to development, and an annoyance to the development team.</p>\n\n<p>What I recommend doing instead is using a code coverage tool such as Cobertura, to ensure that the unit tests you write provide decent coverage of the code in private methods. That way, you indirectly test what the private methods are doing, and maintain a higher level of agility.</p>\n"},{"comments":[{"owner":{"reputation":1390,"user_id":1486498,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92a10a7ccb8296747bfdbdb894949c32?s=128&d=identicon&r=PG","display_name":"ngreen","link":"https://stackoverflow.com/users/1486498/ngreen"},"edited":false,"score":7,"creation_date":1397101516,"post_id":3177465,"comment_id":35089055,"content_license":"CC BY-SA 3.0","body":"While you should never make a method public just to test it, <code>private</code> is not the only alternative. No access modifier is <code>package private</code> and means that you can unit test it as long as your unit test lives in the same package."},{"owner":{"reputation":27739,"user_id":383414,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/a0252c97758708e419523490aa848ded?s=128&d=identicon&r=PG","display_name":"Richard Le Mesurier","link":"https://stackoverflow.com/users/383414/richard-le-mesurier"},"reply_to_user":{"reputation":1390,"user_id":1486498,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92a10a7ccb8296747bfdbdb894949c32?s=128&d=identicon&r=PG","display_name":"ngreen","link":"https://stackoverflow.com/users/1486498/ngreen"},"edited":false,"score":0,"creation_date":1397124393,"post_id":3177465,"comment_id":35100309,"content_license":"CC BY-SA 3.0","body":"@ngreen that is all true, but is not what the question is about. OP asks about testing private methods. Default is not the same as private; as stated, you can easily see a default access method from a class just by declaring that class in the same package. With private access, you require reflection, which is a whole other ballgame."},{"owner":{"reputation":1390,"user_id":1486498,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92a10a7ccb8296747bfdbdb894949c32?s=128&d=identicon&r=PG","display_name":"ngreen","link":"https://stackoverflow.com/users/1486498/ngreen"},"edited":false,"score":2,"creation_date":1397147439,"post_id":3177465,"comment_id":35116738,"content_license":"CC BY-SA 3.0","body":"I was commenting on your answer, point 1 in particular, not the OP. There is no need to make a method private just because you don&#39;t want it to be public."},{"owner":{"reputation":27739,"user_id":383414,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/a0252c97758708e419523490aa848ded?s=128&d=identicon&r=PG","display_name":"Richard Le Mesurier","link":"https://stackoverflow.com/users/383414/richard-le-mesurier"},"reply_to_user":{"reputation":1390,"user_id":1486498,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92a10a7ccb8296747bfdbdb894949c32?s=128&d=identicon&r=PG","display_name":"ngreen","link":"https://stackoverflow.com/users/1486498/ngreen"},"edited":false,"score":2,"creation_date":1397148399,"post_id":3177465,"comment_id":35117315,"content_license":"CC BY-SA 3.0","body":"@ngreen true thx - I was lazy with the word &quot;public&quot;. I have updated the answer to include public, protected, default (and to make mention of reflection). The point I was trying to make is that there is good reason for some code to be secret, however that shouldn&#39;t prevent us from testing it."},{"owner":{"reputation":1214,"user_id":3645375,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2ba0dfc80b363486da9d9c92e429e745?s=128&d=identicon&r=PG&f=1","display_name":"Bernardo Dal Corno","link":"https://stackoverflow.com/users/3645375/bernardo-dal-corno"},"edited":false,"score":2,"creation_date":1525888840,"post_id":3177465,"comment_id":87536813,"content_license":"CC BY-SA 4.0","body":"Thanks for giving real examples to everyone. Most answers are good, but in a theorical point of view. In real world, we do need to hide implementation from the contract, and we still need to test it. Reading all these, I think maybe this should be a whole new level of testing, with a different name"},{"owner":{"reputation":837,"user_id":3218627,"user_type":"registered","accept_rate":38,"profile_image":"https://graph.facebook.com/100000812061368/picture?type=large","display_name":"Nether","link":"https://stackoverflow.com/users/3218627/nether"},"edited":false,"score":1,"creation_date":1589133564,"post_id":3177465,"comment_id":109166431,"content_license":"CC BY-SA 4.0","body":"One more example - <b>Crawler HTML parsers</b>.  Having to parse a whole html page into domain objects requires a ton of nitty-gritty logic of validating little parts of the structure.  It makes sense to break that up into methods and call it from one public method, yet it doesn&#39;t make sense to have all the smaller methods composing it be public, nor does it make much sense to create 10 classes per HTML page."}],"owner":{"reputation":27739,"user_id":383414,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/a0252c97758708e419523490aa848ded?s=128&d=identicon&r=PG","display_name":"Richard Le Mesurier","link":"https://stackoverflow.com/users/383414/richard-le-mesurier"},"comment_count":6,"is_accepted":false,"community_owned_date":1365626788,"score":71,"last_activity_date":1484335444,"last_edit_date":1484335444,"creation_date":1278310213,"answer_id":3177465,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Just two examples of where I would want to test a private method:</p>\n\n<ol>\n<li><strong>Decryption routines</strong> - I would not\nwant to make them visible to anyone to see just for\nthe sake of testing, else anyone can\nuse them to decrypt. But they are\nintrinsic to the code, complicated,\nand need to always work (the obvious exception is reflection which can be used to view even private methods in most cases, when <code>SecurityManager</code> is not configured to prevent this).</li>\n<li><strong>Creating an SDK</strong> for community\nconsumption. Here public takes on a\nwholly different meaning, since this\nis code that the whole world may see\n(not just internal to my application). I put\ncode into private methods if I don't\nwant the SDK users to see it - I\ndon't see this as code smell, merely\nas how SDK programming works. But of\ncourse I still need to test my\nprivate methods, and they are where\nthe functionality of my SDK actually\nlives.</li>\n</ol>\n\n<p>I understand the idea of only testing the \"contract\". But I don't see one can advocate actually not testing code - your mileage may vary.</p>\n\n<p>So my tradeoff involves complicating the JUnits with reflection, rather than compromising my security &amp; SDK.</p>\n"},{"comments":[{"owner":{"reputation":1248,"user_id":1678392,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/LuMvG.jpg?s=128&g=1","display_name":"skia.heliou","link":"https://stackoverflow.com/users/1678392/skia-heliou"},"edited":false,"score":2,"creation_date":1421327579,"post_id":4667692,"comment_id":44321418,"content_license":"CC BY-SA 3.0","body":"Be sure to download the entire JUnit-addons (<a href=\"http://sourceforge.net/projects/junit-addons/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/junit-addons</a>) package, not the Source Forge-Recommended Project PrivateAccessor."},{"owner":{"reputation":1248,"user_id":1678392,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/LuMvG.jpg?s=128&g=1","display_name":"skia.heliou","link":"https://stackoverflow.com/users/1678392/skia-heliou"},"edited":false,"score":2,"creation_date":1421782828,"post_id":4667692,"comment_id":44489436,"content_license":"CC BY-SA 3.0","body":"And be sure that, when you&#39;re using a <code>Class</code> as your first parameter in these methods, that you&#39;re accessing only <code>static</code> members."}],"owner":{"reputation":261,"user_id":373975,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YOqCw.jpg?s=128&g=1","display_name":"phareim","link":"https://stackoverflow.com/users/373975/phareim"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":37,"last_activity_date":1513254038,"last_edit_date":1513254038,"creation_date":1294828041,"answer_id":4667692,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>To test legacy code with large and quirky classes, it is often very helpful to be able to test the one private (or public) method I'm writing <em>right now</em>.</p>\n\n<p>I use the <strong>junitx.util.PrivateAccessor</strong>-package for Java . Lots of helpful one-liners for accessing private methods and private fields.</p>\n\n<pre><code>import junitx.util.PrivateAccessor;\n\nPrivateAccessor.setField(myObjectReference, \"myCrucialButHardToReachPrivateField\", myNewValue);\nPrivateAccessor.invoke(myObjectReference, \"privateMethodName\", java.lang.Class[] parameterTypes, java.lang.Object[] args);\n</code></pre>\n"},{"owner":{"reputation":9347,"user_id":300248,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/bc25a8b55f2b511375416cfe60055d17?s=128&d=identicon&r=PG","display_name":"simpatico","link":"https://stackoverflow.com/users/300248/simpatico"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":17,"last_activity_date":1459432443,"last_edit_date":1495540510,"creation_date":1298403671,"answer_id":5083041,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>The answer from <a href=\"http://junit.org/faq.html#atests_11\" rel=\"noreferrer\">JUnit.org FAQ page</a>:</p>\n\n<blockquote>\n  <p>But if you must...</p>\n  \n  <p>If you are using JDK 1.3 or higher, you can use reflection to subvert\n  the access control mechanism with the aid of the <a href=\"http://sourceforge.net/projects/privaccessor/\" rel=\"noreferrer\">PrivilegedAccessor</a>.\n  For details on how to use it, read <a href=\"http://www.onjava.com/pub/a/onjava/2003/11/12/reflection.html\" rel=\"noreferrer\">this article</a>.</p>\n  \n  <p>If you are using JDK 1.6 or higher and you annotate your tests with\n  @Test, you can use <a href=\"http://dp4j.com\" rel=\"noreferrer\">Dp4j</a> to inject reflection in your test methods. For\n  details on how to use it, see <a href=\"http://dp4j.com/testscript\" rel=\"noreferrer\">this test script</a>.</p>\n</blockquote>\n\n<p>P.S. I'm the main contributor to <a href=\"http://dp4j.com\" rel=\"noreferrer\">Dp4j</a>, ask <a href=\"https://stackoverflow.com/users/300248\">me</a> if you need help. :)</p>\n"},{"owner":{"reputation":4535,"user_id":424903,"user_type":"registered","profile_image":"https://i.stack.imgur.com/8oHZF.png?s=128&g=1","display_name":"Gimby","link":"https://stackoverflow.com/users/424903/gimby"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":0,"last_activity_date":1304002907,"creation_date":1304002907,"answer_id":5820700,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>I only test the public interface, but I have been known to make specific private methods protected so I can either mock them out entirely, or add in additional steps specific for unit testing purposes. A general case is to hook in flags I can set from the unit test to make certain methods intentionally cause an exception to be able to test fault paths; the exception triggering code is only in the test path in an overridden implementation of the protected method.</p>\n\n<p>I minimize the need for this though and I always document the precise reasons to avoid confusion.</p>\n"},{"owner":{"reputation":5223,"user_id":946904,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/4Km5a.png?s=128&g=1","display_name":"marc wellman","link":"https://stackoverflow.com/users/946904/marc-wellman"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":3,"last_activity_date":1484335796,"last_edit_date":1484335796,"creation_date":1321374156,"answer_id":8139572,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>I am not sure whether this is a good technique, but I developed the following pattern to unit test private methods:</p>\n\n<p>I don't modify the visibility of the method that I want to test and add an additional method. Instead I am adding an additional public method for every private method I want to test. I call this additional method <code>Test-Port</code> and denote them with the prefix <code>t_</code>. This <code>Test-Port</code> method then simply accesses the according private method.</p>\n\n<p>Additionally I add a boolean flag to the <code>Test-Port</code> method to decide whether I grant access to the private method through the <code>Test-Port</code> method from outside. This flag is then set globally in a static class where I place e.g. other global settings for the application. So I can switch the access to the private methods on and off in one place e.g. in the corresponding unit test.</p>\n"},{"comments":[{"owner":{"reputation":12820,"user_id":7852,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/HP5eX.jpg?s=128&g=1","display_name":"givanse","link":"https://stackoverflow.com/users/7852/givanse"},"edited":false,"score":2,"creation_date":1342190947,"post_id":8704898,"comment_id":15148000,"content_license":"CC BY-SA 3.0","body":"That is a hack not a real solution."},{"owner":{"reputation":5742,"user_id":56708,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/64c66e0f95ddc09d2c46f78bf74e0525?s=128&d=identicon&r=PG","display_name":"Jeff Olson","link":"https://stackoverflow.com/users/56708/jeff-olson"},"reply_to_user":{"reputation":12820,"user_id":7852,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/HP5eX.jpg?s=128&g=1","display_name":"givanse","link":"https://stackoverflow.com/users/7852/givanse"},"edited":false,"score":3,"creation_date":1367948083,"post_id":8704898,"comment_id":23553710,"content_license":"CC BY-SA 3.0","body":"@givanse I disagree...this is one of the reasons testing Java code using Groovy is so powerful."}],"owner":{"reputation":78,"user_id":107852,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0f7bc6c44cc0ac8e9f0a7cd03b3646af?s=128&d=identicon&r=PG","display_name":"sagehen03","link":"https://stackoverflow.com/users/107852/sagehen03"},"comment_count":2,"is_accepted":false,"community_owned_date":1365626788,"score":0,"last_activity_date":1325535174,"creation_date":1325535174,"answer_id":8704898,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Groovy has a <a href=\"http://jira.codehaus.org/browse/GROOVY-1875\" rel=\"nofollow\">bug/feature</a>, through which you can invoke private methods as if they were public.  So if you're able to use Groovy in your project, it's an option you can use in lieu of reflection.  Check out <a href=\"http://marciogarcia.com/?p=80\" rel=\"nofollow\">this page</a> for an example.</p>\n"},{"owner":{"reputation":128,"user_id":419109,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8f53a1c548c17a4740656e301f1f2726?s=128&d=identicon&r=PG","display_name":"Steven Bluen","link":"https://stackoverflow.com/users/419109/steven-bluen"},"comment_count":0,"is_accepted":false,"community_owned_date":1365626788,"score":1,"last_activity_date":1362355663,"creation_date":1362355663,"answer_id":15192546,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>JML has a spec_public comment annotation syntax that allows you to specify a method as public during tests:</p>\n\n<pre><code>private /*@ spec_public @*/ int methodName(){\n...\n}\n</code></pre>\n\n<p>This syntax is discussed at <a href=\"http://www.eecs.ucf.edu/~leavens/JML/jmlrefman/jmlrefman_2.html#SEC12\" rel=\"nofollow\">http://www.eecs.ucf.edu/~leavens/JML/jmlrefman/jmlrefman_2.html#SEC12</a>. There also exists a program that translates JML specifications into JUnit tests. I'm not sure how well that works or what its capabilities are, but it doesn't appear to be necessary since JML is a viable testing framework on its own.</p>\n"},{"comments":[{"owner":{"reputation":9685,"user_id":887343,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/adlbM.jpg?s=128&g=1","display_name":"forhas","link":"https://stackoverflow.com/users/887343/forhas"},"edited":false,"score":1,"creation_date":1380723134,"post_id":18859235,"comment_id":28305805,"content_license":"CC BY-SA 3.0","body":"Just tried it, BoundBox is a simple and elegant and solution!"}],"owner":{"reputation":36678,"user_id":693752,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/1f9cd9b9bad9aa6115a1ed72433c180d?s=128&d=identicon&r=PG","display_name":"Snicolas","link":"https://stackoverflow.com/users/693752/snicolas"},"comment_count":1,"is_accepted":false,"community_owned_date":1379449430,"score":11,"last_activity_date":1513254337,"last_edit_date":1513254337,"creation_date":1379449430,"answer_id":18859235,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Today, I pushed a Java library to help testing private methods and fields. It has been designed with Android in mind, but it can really be used for any Java project.</p>\n\n<p>If you got some code with private methods or fields or constructors, you can use <a href=\"https://github.com/stephanenicolas/boundbox\" rel=\"nofollow noreferrer\"><strong>BoundBox</strong></a>. It does exactly what you are looking for.\nHere below is an example of a test that accesses two private fields of an Android activity to test it:</p>\n\n<pre><code>@UiThreadTest\npublic void testCompute() {\n\n    // Given\n    boundBoxOfMainActivity = new BoundBoxOfMainActivity(getActivity());\n\n    // When\n    boundBoxOfMainActivity.boundBox_getButtonMain().performClick();\n\n    // Then\n    assertEquals(\"42\", boundBoxOfMainActivity.boundBox_getTextViewMain().getText());\n}\n</code></pre>\n\n<p><strong>BoundBox</strong> makes it easy to test private/protected fields, methods and constructors. You can even access stuff that is hidden by inheritance. Indeed, BoundBox breaks encapsulation. It will give you access to all that through reflection, <strong>BUT</strong> everything is checked at compile time.</p>\n\n<p>It is ideal for testing some legacy code. Use it carefully. ;)</p>\n\n<p><a href=\"https://github.com/stephanenicolas/boundbox\" rel=\"nofollow noreferrer\">https://github.com/stephanenicolas/boundbox</a></p>\n"},{"comments":[{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":2,"creation_date":1475272283,"post_id":20337937,"comment_id":66893691,"content_license":"CC BY-SA 3.0","body":"Although this is true, it can lead to some very complicated tests--it&#39;s a better pattern to test a single method at a time (Unit testing) rather than a whole group of them.  Not a terrible suggestion but I think there are better answers here--this should be a last resort."}],"owner":{"reputation":248,"user_id":312957,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/9ea1e767fe1989551e96690080c23d34?s=128&d=identicon&r=PG","display_name":"Antony Booth","link":"https://stackoverflow.com/users/312957/antony-booth"},"comment_count":1,"is_accepted":false,"community_owned_date":1386018773,"score":27,"last_activity_date":1484335993,"last_edit_date":1484335993,"creation_date":1386018773,"answer_id":20337937,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Private methods are consumed by public ones. Otherwise, they're dead code. That's why you test the public method, asserting the expected results of the public method and thereby, the private methods it consumes.</p>\n\n<p>Testing private methods should be tested by debugging before running your unit tests on public methods.</p>\n\n<p>They may also be debugged using test-driven development, debugging your unit tests until all your assertions are met.</p>\n\n<p>I personally believe it is better to create classes using TDD; creating the public method stubs, then generating unit tests with <strong>all</strong> the assertions defined in advance, so the expected outcome of the method is determined before you code it. This way, you don't go down the wrong path of making the unit test assertions fit the results. Your class is then robust and meets requirements when all your unit tests pass.</p>\n"},{"owner":{"reputation":618,"user_id":1789360,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/CmbCW.jpg?s=128&g=1","display_name":"Yuli Reiri","link":"https://stackoverflow.com/users/1789360/yuli-reiri"},"comment_count":0,"is_accepted":false,"community_owned_date":1389169359,"score":12,"last_activity_date":1484336028,"last_edit_date":1484336028,"creation_date":1389169359,"answer_id":20990300,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Here is my generic function to test private fields:</p>\n\n<pre><code>protected &lt;F&gt; F getPrivateField(String fieldName, Object obj)\n    throws NoSuchFieldException, IllegalAccessException {\n    Field field =\n        obj.getClass().getDeclaredField(fieldName);\n\n    field.setAccessible(true);\n    return (F)field.get(obj);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":661,"user_id":609033,"user_type":"registered","accept_rate":30,"profile_image":"https://www.gravatar.com/avatar/6069a0e406e575a2bbe52b80753004bf?s=128&d=identicon&r=PG","display_name":"Sayo Oladeji","link":"https://stackoverflow.com/users/609033/sayo-oladeji"},"edited":false,"score":0,"creation_date":1433037843,"post_id":23441118,"comment_id":49178499,"content_license":"CC BY-SA 3.0","body":"You&#39;re mixing &quot;protected&quot; with &quot;friendly.&quot; A protected method can only be accessed by a class whose objects are assignable to the target class (i.e subclasses)."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":1,"creation_date":1475272091,"post_id":23441118,"comment_id":66893625,"content_license":"CC BY-SA 3.0","body":"Actually there is no &quot;Friendly&quot; in Java, the term is &quot;Package&quot; and it&#39;s indicated by the lack of a private/public/protected modifier.  I would have just corrected this answer but there is a really good one that already says this--so I&#39;d just recommend deleting it."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489085648,"post_id":23441118,"comment_id":72528590,"content_license":"CC BY-SA 3.0","body":"I almost downvoted, thinking all along &quot;This answer is just plain wrong.&quot; until I got to the very last sentence, which contradicts the rest of the answer. The last sentence should have been the first."}],"owner":{"reputation":1302,"user_id":2373304,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/1dccy.jpg?s=128&g=1","display_name":"loknath","link":"https://stackoverflow.com/users/2373304/loknath"},"comment_count":3,"is_accepted":false,"community_owned_date":1399098798,"score":13,"last_activity_date":1484337235,"last_edit_date":1495541909,"creation_date":1399098798,"answer_id":23441118,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>A private method is only to be accessed within the same class. So there is no way to test a âprivateâ method of a target class from any test class. A way out is that you can perform unit testing manually or can change your method from âprivateâ to âprotectedâ.</p>\n\n<p>And then a protected method can only be accessed within the same package where the class is defined. So, testing a protected method of a target class means we need to define your test class in the same package as the target class.</p>\n\n<p>If all the above does not suits your requirement, use <a href=\"https://stackoverflow.com/questions/11483647/how-to-access-private-methods-and-private-data-members-via-reflection\"><strong>the  reflection way</strong></a> to access the private method.  </p>\n"},{"owner":{"reputation":31448,"user_id":1063716,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/594dfa12a4f922652c182c46b6bc2de3?s=128&d=identicon&r=PG","display_name":"Steve Chambers","link":"https://stackoverflow.com/users/1063716/steve-chambers"},"comment_count":0,"is_accepted":false,"community_owned_date":1415662560,"score":25,"last_activity_date":1415662560,"creation_date":1415662560,"answer_id":26855013,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>If using Spring, <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/util/ReflectionTestUtils.html\" rel=\"noreferrer\">ReflectionTestUtils</a> provides some handy tools that help out here with minimal effort. For example, to set up a mock on a private member without being forced to add an undesirable public setter:</p>\n\n<pre><code>ReflectionTestUtils.setField(theClass, \"theUnsettableField\", theMockObject);\n</code></pre>\n"},{"owner":{"reputation":6598,"user_id":4497253,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/dc929d11ae26463d18e337d295c86fcc?s=128&d=identicon&r=PG&f=1","display_name":"CoronA","link":"https://stackoverflow.com/users/4497253/corona"},"comment_count":0,"is_accepted":false,"community_owned_date":1430978564,"score":8,"last_activity_date":1484337395,"last_edit_date":1484337395,"creation_date":1430978564,"answer_id":30093076,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>I recently had this problem and wrote a little tool, called <a href=\"https://github.com/almondtools/picklock\" rel=\"noreferrer\">Picklock</a>, that avoids the problems of explicitly using the Java reflection API, two examples:</p>\n\n<p><strong>Calling methods, e.g. <code>private void method(String s)</code> - by Java reflection</strong></p>\n\n<pre><code>Method method = targetClass.getDeclaredMethod(\"method\", String.class);\nmethod.setAccessible(true);\nreturn method.invoke(targetObject, \"mystring\");\n</code></pre>\n\n<p><strong>Calling methods, e.g. <code>private void method(String s)</code> - by Picklock</strong></p>\n\n<pre><code>interface Accessible {\n  void method(String s);\n}\n\n...\nAccessible a = ObjectAccess.unlock(targetObject).features(Accessible.class);\na.method(\"mystring\");\n</code></pre>\n\n<p><strong>Setting fields, e.g. <code>private BigInteger amount;</code> - by Java reflection</strong></p>\n\n<pre><code>Field field = targetClass.getDeclaredField(\"amount\");\nfield.setAccessible(true);\nfield.set(object, BigInteger.valueOf(42));\n</code></pre>\n\n<p><strong>Setting fields, e.g. <code>private BigInteger amount;</code> - by Picklock</strong></p>\n\n<pre><code>interface Accessible {\n  void setAmount(BigInteger amount);\n}\n\n...\nAccessible a = ObjectAccess.unlock(targetObject).features(Accessible.class);\na.setAmount(BigInteger.valueOf(42));\n</code></pre>\n"},{"comments":[{"owner":{"reputation":220,"user_id":405131,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c0380b517275c4d69b9edc33a943f423?s=128&d=identicon&r=PG","display_name":"Denis Nikolaenko","link":"https://stackoverflow.com/users/405131/denis-nikolaenko"},"edited":false,"score":1,"creation_date":1584243057,"post_id":31020978,"comment_id":107375407,"content_license":"CC BY-SA 4.0","body":"The cleanest and the most concise solution so far, but only if you are using Spring."}],"owner":{"reputation":2164,"user_id":1781357,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/82f0d252a13f7f930e212c15d69ca684?s=128&d=identicon&r=PG","display_name":"Mikhail","link":"https://stackoverflow.com/users/1781357/mikhail"},"comment_count":1,"is_accepted":false,"community_owned_date":1435132868,"score":36,"last_activity_date":1484337432,"last_edit_date":1484337432,"creation_date":1435132868,"answer_id":31020978,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>In the <a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"noreferrer\">Spring Framework</a> you can test private methods using this method:</p>\n\n<pre><code>ReflectionTestUtils.invokeMethod()\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>ReflectionTestUtils.invokeMethod(TestClazz, \"createTest\", \"input data\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2374,"user_id":3938606,"user_type":"registered","accept_rate":44,"profile_image":"https://www.gravatar.com/avatar/bb2c702a03d6218cf9f9b81adefa89e9?s=128&d=identicon&r=PG&f=1","display_name":"Seb","link":"https://stackoverflow.com/users/3938606/seb"},"edited":false,"score":2,"creation_date":1485858319,"post_id":36115967,"comment_id":71089057,"content_license":"CC BY-SA 3.0","body":"I didn&#39;t know about this one, it&#39;s interresting, I still think that if you need that kind of annottaion you have design issues."},{"owner":{"reputation":322,"user_id":2641025,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1be0d013a9711d11e3e06daec2cfd6a3?s=128&d=identicon&r=PG","display_name":"Fr Jeremy Krieg","link":"https://stackoverflow.com/users/2641025/fr-jeremy-krieg"},"edited":false,"score":3,"creation_date":1509923706,"post_id":36115967,"comment_id":81205465,"content_license":"CC BY-SA 3.0","body":"To me, this is like saying instead of giving a one-off key to your fire warden to test the fire drill, you leave your front door unlocked with a sign on the door saying - &quot;unlocked for testing - if you&#39;re not from our company, please don&#39;t enter&quot;."},{"owner":{"reputation":1170,"user_id":6648326,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/zaG25.jpg?s=128&g=1","display_name":"MasterJoe","link":"https://stackoverflow.com/users/6648326/masterjoe"},"reply_to_user":{"reputation":322,"user_id":2641025,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1be0d013a9711d11e3e06daec2cfd6a3?s=128&d=identicon&r=PG","display_name":"Fr Jeremy Krieg","link":"https://stackoverflow.com/users/2641025/fr-jeremy-krieg"},"edited":false,"score":0,"creation_date":1583860495,"post_id":36115967,"comment_id":107252392,"content_license":"CC BY-SA 4.0","body":"@FrJeremyKrieg - what does that mean ?"},{"owner":{"reputation":322,"user_id":2641025,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1be0d013a9711d11e3e06daec2cfd6a3?s=128&d=identicon&r=PG","display_name":"Fr Jeremy Krieg","link":"https://stackoverflow.com/users/2641025/fr-jeremy-krieg"},"reply_to_user":{"reputation":1170,"user_id":6648326,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/zaG25.jpg?s=128&g=1","display_name":"MasterJoe","link":"https://stackoverflow.com/users/6648326/masterjoe"},"edited":false,"score":2,"creation_date":1583971258,"post_id":36115967,"comment_id":107295434,"content_license":"CC BY-SA 4.0","body":"@MasterJoe2: the purpose of a fire test is to improve the safety of your building against the risk of fire. But you have to give the warden access to your building. If you permanently leave the front door unlocked, you increase the risk of unauthorised access and make it <i>less</i> safe. The same is true of the VisibleForTesting pattern - you&#39;re increasing the risk of unauthorised access in order to reduce the risk of &quot;fire&quot;. Better to grant access as a one-off for testing only when you need to (eg, using reflection) rather than leave it permanently unlocked (non-private)."}],"owner":{"reputation":2684,"user_id":538160,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/4b816c3331088ec95af69b0f33137ad9?s=128&d=identicon&r=PG","display_name":"supernova","link":"https://stackoverflow.com/users/538160/supernova"},"comment_count":4,"is_accepted":false,"community_owned_date":1458489183,"score":42,"last_activity_date":1484337537,"last_edit_date":1484337537,"creation_date":1458489183,"answer_id":36115967,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Another approach I have used is to change a private method to package private or protected then complement it with the <strong>@VisibleForTesting</strong> annotation of the Google Guava library.</p>\n\n<p>This will tell anybody using this method to take caution and not access it directly even in a package. Also a test class need not be in same package <strong>physically</strong>, but in the same package under the <strong>test</strong> folder.</p>\n\n<p>For example, if a method to be tested is in <code>src/main/java/mypackage/MyClass.java</code> then your test call should be placed in <code>src/test/java/mypackage/MyClassTest.java</code>. That way, you got access to the test method in your test class.</p>\n"},{"owner":{"reputation":805,"user_id":2335016,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/09564e73403344f1d05d78e38140690c?s=128&d=identicon&r=PG","display_name":"Olcay Tarazan","link":"https://stackoverflow.com/users/2335016/olcay-tarazan"},"comment_count":0,"is_accepted":false,"community_owned_date":1464868321,"score":12,"last_activity_date":1484337582,"last_edit_date":1484337582,"creation_date":1464868321,"answer_id":37591098,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Please see below for an example;</p>\n\n<p>The following import statement should be added:</p>\n\n<pre><code>import org.powermock.reflect.Whitebox;\n</code></pre>\n\n<p>Now you can directly pass the object which has the private method, method name to be called, and additional parameters as below.</p>\n\n<pre><code>Whitebox.invokeMethod(obj, \"privateMethod\", \"param1\");\n</code></pre>\n"},{"owner":{"reputation":1413,"user_id":2197088,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d938fd6a5c00595ba7680269988b74e5?s=128&d=identicon&r=PG","display_name":"Legna","link":"https://stackoverflow.com/users/2197088/legna"},"comment_count":0,"is_accepted":false,"community_owned_date":1464968869,"score":3,"last_activity_date":1484337672,"last_edit_date":1484337672,"creation_date":1464968869,"answer_id":37618628,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>A quick addition to @Cem Catikka's comment, when using ExpectedException:</p>\n\n<p>Keep in mind that your expected exception will be wrapped in an InvocationTargetException, so in order to get to your exception you will have to throw the cause of the InvocationTargetException you received. Something like (testing private method validateRequest() on BizService):</p>\n\n<pre><code>@Rule\npublic ExpectedException thrown = ExpectedException.none();\n\n@Autowired(required = true)\nprivate BizService svc;\n\n\n@Test\npublic void testValidateRequest() throws Exception {\n\n    thrown.expect(BizException.class);\n    thrown.expectMessage(expectMessage);\n\n    BizRequest request = /* Mock it, read from source - file, etc. */;\n    validateRequest(request);\n}\n\nprivate void validateRequest(BizRequest request) throws Exception {\n    Method method = svc.getClass().getDeclaredMethod(\"validateRequest\", BizRequest.class);\n    method.setAccessible(true);\n    try {\n        method.invoke(svc, request);\n    }\n    catch (InvocationTargetException e) {\n        throw ((BizException)e.getCause());\n    }\n }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":1,"creation_date":1489085180,"post_id":39215279,"comment_id":72528284,"content_license":"CC BY-SA 3.0","body":"Disagree with the <code>ClassToTest(Callable)</code> injection. That makes <code>ClassToTest</code> more complicated. Keep it simple. Also, that then requires <i>someone else</i> to tell <code>ClassToTest</code> something that <code>ClassToTest</code> should be the boss of. There is a place for injecting logic, but this is not it. You have just made the class harder to maintain, not easier."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489085342,"post_id":39215279,"comment_id":72528386,"content_license":"CC BY-SA 3.0","body":"Also, it is preferable if your method of testing <code>X</code> does not increase <code>X</code> complexity to the point where it might cause more problems... and therefore require additional testing... which if you&#39;ve implemented in a way that can cause more problems... (this is not an infinite loops; each iteration is likely smaller than the one before it, but still annoying)"},{"owner":{"reputation":3401,"user_id":3930424,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/dOJRF.jpg?s=128&g=1","display_name":"GROX13","link":"https://stackoverflow.com/users/3930424/grox13"},"reply_to_user":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":2,"creation_date":1489085560,"post_id":39215279,"comment_id":72528530,"content_license":"CC BY-SA 3.0","body":"Could you explain why would it make class <code>ClassToTest</code> harder to maintain? Actually it makes your application easier to maintain, what do you suggest making new class for every different value you&#39;ll need in <code>first</code> and &#39;second&#39; variables?"},{"owner":{"reputation":3401,"user_id":3930424,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/dOJRF.jpg?s=128&g=1","display_name":"GROX13","link":"https://stackoverflow.com/users/3930424/grox13"},"reply_to_user":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":1,"creation_date":1489085687,"post_id":39215279,"comment_id":72528613,"content_license":"CC BY-SA 3.0","body":"Method of testing doesn&#39;t increase complexity. It&#39;s just your class which is poorly written, so poorly that it can&#39;t be tested."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489096768,"post_id":39215279,"comment_id":72534403,"content_license":"CC BY-SA 3.0","body":"Harder to maintain because the class is more complicated. <code>class A{ A(){} f(){} }</code> is simpler than <code>class A { Logic f; A(logic_f) } class B { g() { new A( logic_f) } }</code>. If that were not true, and if it were true that supplying a class&#39; logic as constructor arguments were easier to maintain, then we would pass all logic as constructor arguments. I just don&#39;t see how you can claim <code>class B{ g() { new A( you_dont_know_your_own_logic_but_I_do ) } }</code> ever makes A easier to maintain. There are cases where injecting like this makes sense, but I don&#39;t see your example as &quot;easier to maintain&quot;"},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489097185,"post_id":39215279,"comment_id":72534597,"content_license":"CC BY-SA 3.0","body":"As for &quot;what do you suggest making new class for every different value you&#39;ll need&quot;... I don&#39;t understand how that follows. No. I&#39;m saying keep it simple. <code>class A { M m; N n; f() { } }</code> super simple. Don&#39;t break from that unless you have a reason. If you had to in order to test private members, sure, fine; I just don&#39;t see how you can claim it is &quot;easier to maintain.&quot; Dependency injection only makes things easier to maintain when it reduces complexity (decouples classes, makes graphs/charts easier to follow, <i>something</i>), which it did not in your example."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489097275,"post_id":39215279,"comment_id":72534649,"content_license":"CC BY-SA 3.0","body":"Note that I am not suggesting that your actual answer is invalid. Supplying the logic from the outside can in fact answer the original question. I am only commenting on a specific statement within the answer, a statement which the answer does not hinge on."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489097626,"post_id":39215279,"comment_id":72534799,"content_license":"CC BY-SA 3.0","body":"Actually, on third (or fourth?) read over, I see I may have missed a point. In your no-arg <code>public ClassToTest() { this(...); }</code>, is that implying that the class no-arg constructor is generally used, that it can supply its own logic known internally to the class, and the other constructor used <b>only</b> for testing (or if <code>B</code> wants to change its behavior for some reason; a handy side effect)? I did not catch that the first couple reads over."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1489097994,"post_id":39215279,"comment_id":72534956,"content_license":"CC BY-SA 3.0","body":"Yes, I gotcha now. The fact that you do not have a default implementation known internally to <code>ClassToTest</code> threw me off, but you do have it implied by the ellipse. For some reason, I was originally thinking you intended that the logic must be supplied only from the outside. For suckers like me, could you just edit the &quot;...&quot; to be something like &quot;defaultLogic&quot;; assuming I understand you correctly now."}],"owner":{"reputation":3401,"user_id":3930424,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/dOJRF.jpg?s=128&g=1","display_name":"GROX13","link":"https://stackoverflow.com/users/3930424/grox13"},"comment_count":9,"is_accepted":false,"community_owned_date":1472505059,"score":14,"last_activity_date":1484337912,"last_edit_date":1484337912,"creation_date":1472505059,"answer_id":39215279,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>I would suggest you refactoring your code a little bit. When you have to start thinking about using reflection or other kind of stuff, for just testing your code, something is going wrong with your code.</p>\n\n<p>You mentioned different types of problems. Let's start with private fields. In case of private fields I would have added a new constructor and injected fields into that. Instead of this:</p>\n\n<pre><code>public class ClassToTest {\n\n    private final String first = \"first\";\n    private final List&lt;String&gt; second = new ArrayList&lt;&gt;();\n    ...\n}\n</code></pre>\n\n<p>I'd have used this:</p>\n\n<pre><code>public class ClassToTest {\n\n    private final String first;\n    private final List&lt;String&gt; second;\n\n    public ClassToTest() {\n        this(\"first\", new ArrayList&lt;&gt;());\n    }\n\n    public ClassToTest(final String first, final List&lt;String&gt; second) {\n        this.first = first;\n        this.second = second;\n    }\n    ...\n}\n</code></pre>\n\n<p>This won't be a problem even with some legacy code. Old code will be using an empty constructor, and if you ask me, refactored code will look cleaner, and you'll be able to inject necessary values in test without reflection.</p>\n\n<p>Now about private methods. In my personal experience when you have to stub a private method for testing, then that method has nothing to do in that class. A common pattern, in that case, would be to <em>wrap</em> it within an interface, like <code>Callable</code> and then you pass in that interface also in the constructor (with that multiple constructor trick):</p>\n\n<pre><code>public ClassToTest() {\n    this(...);\n}\n\npublic ClassToTest(final Callable&lt;T&gt; privateMethodLogic) {\n    this.privateMethodLogic = privateMethodLogic;\n}\n</code></pre>\n\n<p>Mostly all that I wrote looks like it's a dependency injection pattern. In my personal experience it's really useful while testing, and I think that this kind of code is cleaner and will be easier to maintain. I'd say the same about nested classes. If a nested class contains heavy logic it would be better if you'd moved it as a package private class and have injected it into a class needing it.</p>\n\n<p>There are also several other design patterns which I have used while refactoring and maintaining legacy code, but it all depends on cases of your code to test. Using reflection mostly is not a problem, but when you have an enterprise application which is heavily tested and tests are run before every deployment everything gets really slow (it's just annoying and I don't like that kind of stuff).</p>\n\n<p>There is also setter injection, but I wouldn't recommended using it. I'd better stick with a constructor and initialize everything when it's really necessary, leaving the possibility for injecting necessary dependencies.</p>\n"},{"owner":{"reputation":190,"user_id":7599315,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c0365d97605028731a4cd879a6cab525?s=128&d=identicon&r=PG&f=1","display_name":"Rahul","link":"https://stackoverflow.com/users/7599315/rahul"},"comment_count":0,"is_accepted":false,"community_owned_date":1504892218,"score":1,"last_activity_date":1504892585,"last_edit_date":1504892585,"creation_date":1504892218,"answer_id":46121866,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>You can use PowerMockito to set return values for private fields and private methods that are called/used in the private method you want to test:</p>\n\n<p>Eg. Setting return value for private method:</p>\n\n<pre><code>MyClient classUnderTest = PowerMockito.spy(new MyClient());\n\n//Set expected return value\nPowerMockito.doReturn(20).when(classUnderTest, \"myPrivateMethod\", anyString(), anyInt());\n//This is very important otherwise it will not work\nclassUnderTest.myPrivateMethod(); \n\n//Setting private field value as someValue:\nWhitebox.setInternalState(classUnderTest, \"privateField\", someValue);\n</code></pre>\n\n<p>Then finally you can validate your private method under test is returning correct value based on set values above by:</p>\n\n<pre><code>String msg = Whitebox.invokeMethod(obj, \"privateMethodToBeTested\", \"param1\");\nAssert.assertEquals(privateMsg, msg);\n</code></pre>\n\n<p>Or </p>\n\n<p>If classUnderTest private method does not return value but it set another private field then you can get that private field value to see if it was set correctly:</p>\n\n<pre><code>//To get value of private field\nMyClass obj = Whitebox.getInternalState(classUnderTest, \"foo\");\nassertThat(obj, is(notNull(MyClass.class))); // or test value\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1008,"user_id":3794038,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a3279d4553a6a584651144d08c4c75aa?s=128&d=identicon&r=PG&f=1","display_name":"Constantinos","link":"https://stackoverflow.com/users/3794038/constantinos"},"edited":false,"score":5,"creation_date":1509305125,"post_id":47004093,"comment_id":80955062,"content_license":"CC BY-SA 3.0","body":"You make good points (some/most of which have already been made by others), but please try to avoid antagonizing by using words such as &quot;pseudo developers/engineers&quot;. As you said (and I agree), we should not ostracize, but instead create a better status quo and help everyone to learn and improve."},{"owner":{"reputation":184,"user_id":4836141,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0af12576ab19d54b1901beaeccb4fb5b?s=128&d=identicon&r=PG&f=1","display_name":"Miladinho","link":"https://stackoverflow.com/users/4836141/miladinho"},"reply_to_user":{"reputation":1008,"user_id":3794038,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a3279d4553a6a584651144d08c4c75aa?s=128&d=identicon&r=PG&f=1","display_name":"Constantinos","link":"https://stackoverflow.com/users/3794038/constantinos"},"edited":false,"score":3,"creation_date":1546890775,"post_id":47004093,"comment_id":94995194,"content_license":"CC BY-SA 4.0","body":"@Constantinos Thanks for pointing that out. I recall when I was writing this response that I was frustrated at the lack of resources (or perception thereof)  to learn good practices. Having barely graduated college at that time, I was seeking a criterion that could guide me on how to write good code. I agree that the language I used was not ok and I have edited that out. Thank you."}],"owner":{"reputation":184,"user_id":4836141,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0af12576ab19d54b1901beaeccb4fb5b?s=128&d=identicon&r=PG&f=1","display_name":"Miladinho","link":"https://stackoverflow.com/users/4836141/miladinho"},"comment_count":2,"is_accepted":false,"community_owned_date":1509303695,"score":5,"last_activity_date":1546890410,"last_edit_date":1546890410,"creation_date":1509303695,"answer_id":47004093,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>I'd like to contribute that of you are worried by not testing private methods as many of the posts suggest, consider that a <strong>code coverage</strong> tool will determine exactly how much of your code is tested and where it leaks, so it is quantifiably acceptable to do this.</p>\n\n<p>I am going to say something that needs to be said but many may not like to hear. Those of you contributing answers that direct the author of the question towards a 'work around' are doing a massive disservice to the community. Testing is a major part of all engineering disciplines, you would not want to buy a car that is not properly tested, and tested in a meaningful way, so why would anyone want to buy or use software that is tested poorly? The reason people do this anyways is probably because the effects of badly tested software are felt way after the fact, and we don't usually associate them with bodily harm. This is a very dangerous perception which will be difficult to change, but it is our responsibility to deliver safe products regardless of what even management is bullying us to do. Think Equifax hack... </p>\n\n<p>We must strive to build an environment that encourages good software engineering practices, this does not mean ostracizing the weak/lazy among us who do not take their craft seriously, but rather, to create a status quo of accountability and self reflection that would encourage everyone to pursue growth, both mentally and skillfully. I am still learning, and may have wrong perceptions/opinions myself, but I do firmly believe that we need to hold ourselves accountable to good practices and shun irresponsible hacks or workarounds to problems.</p>\n"},{"owner":{"reputation":4504,"user_id":1550509,"user_type":"registered","accept_rate":44,"profile_image":"https://i.stack.imgur.com/DPQCa.jpg?s=128&g=1","display_name":"Android is everything for me","link":"https://stackoverflow.com/users/1550509/android-is-everything-for-me"},"comment_count":0,"is_accepted":false,"community_owned_date":1511436840,"score":2,"last_activity_date":1513254520,"last_edit_date":1513254520,"creation_date":1511436840,"answer_id":47454552,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>Best and proper legal way to test Java private method from test framework is <strong>@VisibleForTesting</strong> annotation over the method so same method will be visible for test framework as like public method.</p>\n"},{"comments":[{"owner":{"reputation":929,"user_id":4610114,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/7HTdY.png?s=128&g=1","display_name":"Franz D.","link":"https://stackoverflow.com/users/4610114/franz-d"},"edited":false,"score":0,"creation_date":1530801131,"post_id":48182688,"comment_id":89369253,"content_license":"CC BY-SA 4.0","body":"Ouch. I guess it works fine, but I&#39;d prefer using friend declarations instead of messing around with #defines on such a basic level."},{"owner":{"reputation":9534,"user_id":3691783,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG","display_name":"Matt Messersmith","link":"https://stackoverflow.com/users/3691783/matt-messersmith"},"edited":false,"score":1,"creation_date":1534298303,"post_id":48182688,"comment_id":90656676,"content_license":"CC BY-SA 4.0","body":"Yeah that&#39;ll work...but holy **** is that (likely) awful for your design"},{"owner":{"reputation":33626,"user_id":45685,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1","display_name":"AndersK","link":"https://stackoverflow.com/users/45685/andersk"},"edited":false,"score":2,"creation_date":1551079146,"post_id":48182688,"comment_id":96492984,"content_license":"CC BY-SA 4.0","body":"FYI this no longer works in VS2019, it is not allowed to use macros that way any longer."}],"owner":{"reputation":802,"user_id":1125774,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zthh8.jpg?s=128&g=1","display_name":"mohammad madani","link":"https://stackoverflow.com/users/1125774/mohammad-madani"},"comment_count":3,"is_accepted":false,"community_owned_date":1515571007,"score":6,"last_activity_date":1515571007,"creation_date":1515571007,"answer_id":48182688,"question_id":34571,"content_license":"CC BY-SA 3.0","body":"<p>In c++ : before including class header that has a private function that you want test it</p>\n\n<p>Use this code:</p>\n\n<pre><code>#define private public\n#define protected public\n</code></pre>\n"},{"owner":{"reputation":12933,"user_id":522729,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/5610e7161cc5e1dee1d7209ab65cc5ad?s=128&d=identicon&r=PG","display_name":"Victor Grazi","link":"https://stackoverflow.com/users/522729/victor-grazi"},"comment_count":0,"is_accepted":false,"community_owned_date":1516824508,"score":9,"last_activity_date":1593714897,"last_edit_date":1593714897,"creation_date":1516824508,"answer_id":48430793,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>PowerMockito is made for this.\nUse maven dependency</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n        &lt;artifactId&gt;powermock-core&lt;/artifactId&gt;\n        &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Then you can do</p>\n<pre><code>import org.powermock.reflect.Whitebox;\n...\nMyClass sut = new MyClass();\nSomeType rval = Whitebox.invokeMethod(sut, &quot;myPrivateMethod&quot;, params, moreParams);\n</code></pre>\n"},{"owner":{"reputation":169,"user_id":8356771,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/2757e8c6c6fa9f1450c95ea016b8854c?s=128&d=identicon&r=PG&f=1","display_name":"HilaB","link":"https://stackoverflow.com/users/8356771/hilab"},"comment_count":0,"is_accepted":false,"community_owned_date":1530184772,"score":1,"last_activity_date":1530184772,"creation_date":1530184772,"answer_id":51081607,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>My team and I are using Typemock, which has an API that allows you to <a href=\"https://www.typemock.com/docs/?book=Isolator&amp;page=Documentation%2FHtmlDocs%2Fcontrollingnonpublicmethods.htm\" rel=\"nofollow noreferrer\">fake non-public methods.</a> \nRecently they added the ability to <a href=\"https://www.typemock.com/docs/?book=Isolator&amp;page=Documentation%2FHtmlDocs%2Ffakingnonpublicobjects.htm\" rel=\"nofollow noreferrer\">fake non-visible types</a> and to use XUnit. </p>\n"},{"owner":{"reputation":2859,"user_id":2300013,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a3d1849176183b37842920c364db487a?s=128&d=identicon&r=PG","display_name":"AR1","link":"https://stackoverflow.com/users/2300013/ar1"},"comment_count":0,"is_accepted":false,"community_owned_date":1537609671,"score":1,"last_activity_date":1537609671,"creation_date":1537609671,"answer_id":52455476,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>If you have a case where you really need to test a private method/class etc.. directly, you can use reflection as already mentioned in other answers. However if it comes to that, instead of dealing directly with reflection I'd rather use util classes provided by your framework. For instance, for Java we have:</p>\n\n<ul>\n<li><p><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/ReflectionUtils.html\" rel=\"nofollow noreferrer\">ReflectionUtils</a>  Spring framework</p></li>\n<li><p><a href=\"https://junit.org/junit5/docs/5.0.3/api/org/junit/platform/commons/util/ReflectionUtils.html\" rel=\"nofollow noreferrer\">ReflectionUtils</a> JUnit</p></li>\n</ul>\n\n<p>As per how to use them, you can find plenty of articles online. Here one that I particularly liked:</p>\n\n<ul>\n<li><a href=\"https://www.programcreek.com/java-api-examples/index.php?api=org.springframework.util.ReflectionUtils\" rel=\"nofollow noreferrer\">Java Code Examples for org.springframework.util.ReflectionUtils</a></li>\n</ul>\n"},{"owner":{"reputation":1004,"user_id":7629797,"user_type":"registered","profile_image":"https://i.stack.imgur.com/dhQVE.jpg?s=128&g=1","display_name":"Louis Saglio","link":"https://stackoverflow.com/users/7629797/louis-saglio"},"comment_count":0,"is_accepted":false,"community_owned_date":1544730020,"score":2,"last_activity_date":1544730020,"creation_date":1544730020,"answer_id":53768967,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>You can create a special public method to proxy the private method to test.\nThe @TestOnly annotation is out of the box available when using IntelliJ.\nThe downside is is that if somebody want to to use the private method in a public context, he can do it. But he will be warned by the annotation and the method name. On IntelliJ a warning will appear when doing it.</p>\n\n<pre><code>import org.jetbrains.annotations.TestOnly\n\nclass MyClass {\n\n    private void aPrivateMethod() {}\n\n    @TestOnly\n    public void aPrivateMethodForTest() {\n        aPrivateMethod()\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":1211,"user_id":4308897,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128","display_name":"Ercan","link":"https://stackoverflow.com/users/4308897/ercan"},"comment_count":0,"is_accepted":false,"community_owned_date":1554798212,"score":0,"last_activity_date":1554798212,"creation_date":1554798212,"answer_id":55588184,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>There is another approach to test your private methods.\nIf you \"enable assertion\" in run configurations then you can unit test your method inside method itself. For example;</p>\n\n<pre><code>assert (\"Ercan\".equals(person1.name));\nassert (Person.count == 2);\n</code></pre>\n"},{"owner":{"reputation":6698,"user_id":4537090,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/Dwxvn.jpg?s=128&g=1","display_name":"WesternGun","link":"https://stackoverflow.com/users/4537090/westerngun"},"comment_count":0,"is_accepted":false,"community_owned_date":1557671253,"score":1,"last_activity_date":1572444372,"last_edit_date":1572444372,"creation_date":1557671253,"answer_id":56100192,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p><code>PowerMock.Whitebox</code> is the best option I have seen, but when I read its source code, it reads private fields with reflection, so I think I have my answer: </p>\n\n<ul>\n<li>test private internal states(fields) with PowerMock, or just reflection without the overhead of introducing another independency</li>\n<li>for private methods: actually, the upvote for this question itself, and the huge number of comments and answers, shows that it is a very concurrent and controversial topic <strong>where no definite answer could be given to suit every circumstance</strong>. I understand that only contract should be tested, but we also have coverage to consider. Actually, <strong>I doubt that only testing contracts will 100% make a class immune to errors</strong>. Private methods are those who process data in the class where it is defined and thus does not interest other classes, so we cannot simply expose to make it testable. I will <strong>try not to test them</strong>, but when you have to, <strong>just go for it and forget all the answers here</strong>. You know better your situation and restrictions than any other one in the Internet. When you have control over your code, use that. With consideration, but without over-thinking. </li>\n</ul>\n\n<hr>\n\n<p>After some time, when I reconsider it, I still believe this is true, but I saw better approaches.</p>\n\n<p>First of all, <code>Powermock.Whitebox</code> is still usable. </p>\n\n<p>And, Mockito <code>Whitebox</code> has been hidden after v2(the latest version I can find with <code>Whitebox</code> is <code>testImplementation 'org.mockito:mockito-core:1.10.19'</code>) and it has always been part of <code>org.mockito.internal</code> package, which is prone of breaking changes in the future(see <a href=\"https://stackoverflow.com/questions/40280918/what-do-i-use-instead-of-whitebox-in-mockito-2-2-to-set-fields\">this post</a>). So now I tend not to use it. </p>\n\n<p>In Gradle/Maven projects, if you define private methods or fields, there is no other ways then reflection to get access to them, so the first part stays true. But, if you change the visibility to \"package private\", <strong>the tests following the same structure in <code>test</code> package will have access to them.</strong> That is also another important reason why we are encouraged to create the same hierarchy in <code>main</code> and <code>test</code> package. So, when you have control over production code as well as tests, delete that <code>private</code> access modifier may be the best option for you because relatively it does not cause huge impact. And, that makes testing as well as <strong>private method spying</strong> possible.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate SomeService service; // with a package private method \"doSomething()\"\n\n@Test\nvoid shouldReturnTrueDoSomething() {\n    assertThat(doSomething(input), is(true)); // package private method testing\n}\n\n@Test\nvoid shouldReturnTrueWhenServiceThrowsException() {\n    SomeService spy = Mockito.spy(service); // spying real object\n    doThrow(new AppException()).when(spy).doSomething(input); // spy package private method\n    ...\n\n}\n</code></pre>\n\n<p>When it comes to internal fields, in Spring you have <code>ReflectionUtils.setField()</code>. </p>\n\n<p>At last, sometimes we can bypass the problem itself: if there is a coverage requirement to meet, maybe you can move these private methods into an inner static class and ignore this class in Jacoco. I just found some way to ignore inner class in Jacoco gradle tasks. <a href=\"https://stackoverflow.com/questions/58604955/how-to-ignore-inner-static-classes-in-jacoco-when-using-gradle\">another question</a></p>\n"},{"owner":{"reputation":11921,"user_id":4770877,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cccebea2d190bf8f2054c1949ffa8677?s=128&d=identicon&r=PG&f=1","display_name":"yoAlex5","link":"https://stackoverflow.com/users/4770877/yoalex5"},"comment_count":0,"is_accepted":false,"community_owned_date":1562946652,"score":1,"last_activity_date":1562946652,"creation_date":1562946652,"answer_id":57010282,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>Android has <a href=\"https://developer.android.com/studio/write/annotations.html#visible\" rel=\"nofollow noreferrer\"><code>@VisibleForTesting</code></a> annotation from <code>android.support.annotation</code> package.</p>\n\n<blockquote>\n  <p>The <code>@VisibleForTesting</code> annotation indicates that an annotated method is more visible than normally necessary to make the method testable. This annotation has an optional <code>otherwise</code> argument that lets you designate what the visibility of the method should have been if not for the need to make it visible for testing. Lint uses the <code>otherwise</code> argument to enforce the intended visibility.</p>\n</blockquote>\n\n<p>On the practice it means that you should make a method open for testing and the <code>@VisibleForTesting</code> annotation will show a warning.</p>\n\n<p>For example</p>\n\n<pre><code>package com.mypackage;\n\npublic class ClassA {\n\n    @VisibleForTesting(otherwise = VisibleForTesting.PRIVATE)\n    static void myMethod() {\n\n    }\n}\n</code></pre>\n\n<p>And when you call ClassA.myMethod() within the same package(com.mypackage) you will see the warning.</p>\n\n<p><a href=\"https://i.stack.imgur.com/25FX3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/25FX3.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"reputation":720,"user_id":4818802,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/a760701b7a9260a73bc49ffcdb0567af?s=128&d=identicon&r=PG&f=1","display_name":"Xeverous","link":"https://stackoverflow.com/users/4818802/xeverous"},"edited":false,"score":0,"creation_date":1566844658,"post_id":57514468,"comment_id":101775295,"content_license":"CC BY-SA 4.0","body":"There is also a template trick which allows to get to private members (through some pointer indirection IIRC) or just <code>-fno-access-control</code> (which just ignores <code>private</code> and <code>protected</code> restrictions)."}],"owner":{"reputation":3993,"user_id":2915032,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/VMG1A.jpg?s=128&g=1","display_name":"avtomaton","link":"https://stackoverflow.com/users/2915032/avtomaton"},"comment_count":1,"is_accepted":false,"community_owned_date":1565893963,"score":0,"last_activity_date":1565894467,"last_edit_date":1565894467,"creation_date":1565893963,"answer_id":57514468,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>For C++ (since C++11) adding the test class as a friend works perfectly and does not break production encapsulation.</p>\n\n<p>Let's suppose that we have some class <code>Foo</code> with some private functions which really require testing, and some class <code>FooTest</code> that should have access to Foo's private members. Then we should write the following:</p>\n\n<pre><code>// prod.h: some production code header\n\n// forward declaration is enough\n// we should not include testing headers into production code\nclass FooTest;\n\nclass Foo\n{\n  // that does not affect Foo's functionality\n  // but now we have access to Foo's members from FooTest\n  friend FooTest;\npublic:\n  Foo();\nprivate:\n  bool veryComplicatedPrivateFuncThatReallyRequiresTesting();\n}\n</code></pre>\n\n<pre><code>// test.cpp: some test\n#include &lt;prod.h&gt;\n\nclass FooTest\n{\npublic:\n  void complicatedFisture() {\n    Foo foo;\n    ASSERT_TRUE(foo.veryComplicatedPrivateFuncThatReallyRequiresTesting());\n  }\n}\n\nint main(int /*argc*/, char* argv[])\n{\n  FooTest test;\n  test.complicatedFixture();  // and it really works!\n}\n</code></pre>\n"},{"owner":{"reputation":2229,"user_id":6769119,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-cJOCPQ3_674/AAAAAAAAAAI/AAAAAAAABBw/WCyslIvdXbk/photo.jpg?sz=128","display_name":"Mukundhan","link":"https://stackoverflow.com/users/6769119/mukundhan"},"comment_count":0,"is_accepted":false,"community_owned_date":1571406813,"score":0,"last_activity_date":1571406813,"creation_date":1571406813,"answer_id":58452308,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>The following <strong>Reflection TestUtil</strong> could be <strong><em>used generically</em></strong> to test the <strong><em>private methods for their atomicity</em></strong>.</p>\n\n<pre><code>import com.google.common.base.Preconditions;\n\nimport org.springframework.test.util.ReflectionTestUtils;\n\n/**\n * &lt;p&gt;\n * Invoker\n * &lt;/p&gt;\n *\n * @author\n * @created Oct-10-2019\n */\npublic class Invoker {\n    private Object target;\n    private String methodName;\n    private Object[] arguments;\n\n    public &lt;T&gt; T invoke() {\n        try {\n            Preconditions.checkNotNull(target, \"Target cannot be empty\");\n            Preconditions.checkNotNull(methodName, \"MethodName cannot be empty\");\n            if (null == arguments) {\n                return ReflectionTestUtils.invokeMethod(target, methodName);\n            } else {\n                return ReflectionTestUtils.invokeMethod(target, methodName, arguments);\n            }\n        } catch (Exception e) {\n           throw e;\n        }\n    }\n\n    public Invoker withTarget(Object target) {\n        this.target = target;\n        return this;\n    }\n\n    public Invoker withMethod(String methodName) {\n        this.methodName = methodName;\n        return this;\n    }\n\n    public Invoker withArguments(Object... args) {\n        this.arguments = args;\n        return this;\n    }\n\n}\n\nObject privateMethodResponse = new Invoker()\n  .withTarget(targetObject)\n  .withMethod(PRIVATE_METHOD_NAME_TO_INVOKE)\n  .withArguments(arg1, arg2, arg3)\n  .invoke();\nAssert.assertNotNutll(privateMethodResponse)\n</code></pre>\n"},{"owner":{"reputation":37,"user_id":4458900,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/809fe77ef5079fbb6c618d594d49ad80?s=128&d=identicon&r=PG&f=1","display_name":"Vishwas","link":"https://stackoverflow.com/users/4458900/vishwas"},"comment_count":0,"is_accepted":false,"community_owned_date":1579141772,"score":0,"last_activity_date":1579146872,"last_edit_date":1579146872,"creation_date":1579141772,"answer_id":59762243,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>If you are only using Mockito:</p>\n\n<p>You can consider the private method as a part of public method being tested. You can make sure you cover all the cases in private method when testing public method.</p>\n\n<p>Suppose you are a mockito only user(You are not allowed or don't want to use Powermock or reflection or any such tools) and you dont want to change the existing code or libraries being tested, this might be the best way. </p>\n\n<p>The only thing you need to handle if you choose this way is the variables(user defined objects) declared locally within private methods.  If the private method depends on locally declared variable objects and their methods, make sure you declare those user defined objects globally as private object instead of locally declared objects. You can instantiate these objects locally . </p>\n\n<p>This allows you to mock these objects and inject them back to testing object. You can also mock(using when/then) their methods. </p>\n\n<p>This will allow you test private method without errors when testing the public method.</p>\n\n<p>Advantages\n1. code coverage\n2. Able to test the complete private method.</p>\n\n<p>Disadvantages\n1. Scope of the Object - If you don't want the object to be exposed to other methods within same class, this might not be your way.\n2. You might end up testing the private method multiple times when invoked at different public methods and/or in same method multiple times.</p>\n"},{"owner":{"reputation":1568,"user_id":9389293,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AjGCK.jpg?s=128&g=1","display_name":"Abhishek Sengupta","link":"https://stackoverflow.com/users/9389293/abhishek-sengupta"},"comment_count":0,"is_accepted":false,"community_owned_date":1584121344,"score":3,"last_activity_date":1584121344,"creation_date":1584121344,"answer_id":60675043,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>Hey use this utility class if you are on <strong>spring</strong>.</p>\n\n<pre><code>ReflectionTestUtils.invokeMethod(new ClassName(), \"privateMethodName\");\n</code></pre>\n"},{"owner":{"reputation":617,"user_id":7280140,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/fHhkQ.jpg?s=128&g=1","display_name":"Ahmed Hussein","link":"https://stackoverflow.com/users/7280140/ahmed-hussein"},"comment_count":0,"is_accepted":false,"community_owned_date":1593413584,"score":0,"last_activity_date":1593413584,"creation_date":1593413584,"answer_id":62632701,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>In your class:</p>\n<pre><code>namespace my_namespace {\n    #ifdef UNIT_TEST\n        class test_class;\n    #endif\n\n    class my_class {\n        public:\n            #ifdef UNIT_TEST\n                friend class test_class;\n            #endif\n        private:\n            void fun() { cout &lt;&lt; &quot;I am private&quot; &lt;&lt; endl; }\n    }\n}\n</code></pre>\n<p>In your unit test class:</p>\n<pre><code>#ifndef UNIT_TEST\n    #define UNIT_TEST\n#endif\n\n#include &quot;my_class.h&quot;\n\nclass my_namespace::test_class {\n    public:\n        void fun() { my_obj.fun(); }\n    private:\n        my_class my_obj;\n}\n\nvoid my_unit_test() {\n    test_class test_obj;\n    test_obj.fun(); // here you accessed the private function ;)\n}\n</code></pre>\n"},{"owner":{"reputation":570,"user_id":3110488,"user_type":"registered","profile_image":"https://i.stack.imgur.com/seEic.jpg?s=128&g=1","display_name":"m.nguyencntt","link":"https://stackoverflow.com/users/3110488/m-nguyencntt"},"comment_count":0,"is_accepted":false,"community_owned_date":1595576782,"score":3,"last_activity_date":1595576782,"creation_date":1595576782,"answer_id":63069114,"question_id":34571,"content_license":"CC BY-SA 4.0","body":"<p>Detail my sample with lombok as below. private field, private method:</p>\n<pre><code>public static void main(String[] args) throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException, NoSuchMethodException, InvocationTargetException {\n    Student student = new Student();\n\n    Field privateFieldName = Student.class.getDeclaredField(&quot;name&quot;);\n    privateFieldName.setAccessible(true);\n    privateFieldName.set(student, &quot;Naruto&quot;);\n\n    Field privateFieldAge = Student.class.getDeclaredField(&quot;age&quot;);\n    privateFieldAge.setAccessible(true);\n    privateFieldAge.set(student, &quot;28&quot;);\n\n    System.out.println(student.toString());\n\n    Method privateMethodGetInfo = Student.class.getDeclaredMethod(&quot;getInfo&quot;, String.class, String.class);\n    privateMethodGetInfo.setAccessible(true);\n    System.out.println(privateMethodGetInfo.invoke(student, &quot;Sasuke&quot;, &quot;29&quot;));\n}\n\n\n@Setter\n@Getter\n@ToString\nclass Student {\n  private String name;\n  private String age;\n\n  private String getInfo(String name, String age) {\n    return name + &quot;-&quot; + age;\n  }\n}\n</code></pre>\n"}],"owner":{"reputation":11006,"user_id":3098,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/90f5ff22cf73eefda97decffdf45de32?s=128&d=identicon&r=PG","display_name":"MattGrommes","link":"https://stackoverflow.com/users/3098/mattgrommes"},"comment_count":2,"is_answered":true,"view_count":960352,"protected_date":1325475919,"accepted_answer_id":34658,"answer_count":55,"community_owned_date":1365626788,"score":2868,"last_activity_date":1614839781,"creation_date":1220026269,"last_edit_date":1571152033,"question_id":34571,"link":"https://stackoverflow.com/questions/34571/how-do-i-test-a-private-function-or-a-class-that-has-private-methods-fields-or","title":"How do I test a private function or a class that has private methods, fields or inner classes?","body":"<p>How do I unit test (using xUnit) a class that has internal private methods, fields or nested classes? Or a function that is made private by having <a href=\"https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage\">internal linkage</a> (<code>static</code> in C/C++) or is in a private (<a href=\"https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions\">anonymous</a>) namespace?</p>\n\n<p>It seems bad to change the access modifier for a method or function just to be able to run a test. </p>\n"},{"tags":["java","performance","loops","for-loop","system.out"],"comments":[{"owner":{"reputation":4323,"user_id":1565862,"user_type":"registered","profile_image":"https://i.stack.imgur.com/wJLo7.png?s=128&g=1","display_name":"fejese","link":"https://stackoverflow.com/users/1565862/fejese"},"edited":false,"score":62,"creation_date":1393026583,"post_id":21947452,"comment_id":33249854,"content_license":"CC BY-SA 3.0","body":"Try changing rand.nextInt(4) == 0 to i &lt; 250 to eliminate the effect of the random generator. You might run out of entropy that slows down the random generation"},{"owner":{"reputation":249530,"user_id":438154,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/827d86026ddc062f449ccedece1c52da?s=128&d=identicon&r=PG&f=1","display_name":"Sotirios Delimanolis","link":"https://stackoverflow.com/users/438154/sotirios-delimanolis"},"edited":false,"score":3,"creation_date":1393026696,"post_id":21947452,"comment_id":33249898,"content_license":"CC BY-SA 3.0","body":"Both seem to run for same amount of time on my machine, ~4 seconds."},{"owner":{"reputation":20234,"user_id":1896169,"user_type":"registered","accept_rate":98,"profile_image":"https://i.stack.imgur.com/jap8U.png?s=128&g=1","display_name":"Justin","link":"https://stackoverflow.com/users/1896169/justin"},"reply_to_user":{"reputation":4323,"user_id":1565862,"user_type":"registered","profile_image":"https://i.stack.imgur.com/wJLo7.png?s=128&g=1","display_name":"fejese","link":"https://stackoverflow.com/users/1565862/fejese"},"edited":false,"score":3,"creation_date":1393026723,"post_id":21947452,"comment_id":33249909,"content_license":"CC BY-SA 3.0","body":"@fejese Then <a href=\"http://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902\">branch prediction</a> would kick in. Something like changing <code>rand.nextInt(4)==0</code> to <code>i%4==0</code> would be better (in terms of avoiding branch prediction speeding up the process)"},{"owner":{"reputation":4257,"user_id":1142253,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JTDfX.jpg?s=128&g=1","display_name":"Kakarot","link":"https://stackoverflow.com/users/1142253/kakarot"},"edited":false,"score":160,"creation_date":1393026769,"post_id":21947452,"comment_id":33249925,"content_license":"CC BY-SA 3.0","body":"if you are suggesting that printing B takes more time than printing #....why dont you try to print all B &amp; all # rather than relying on random variable r"},{"owner":{"reputation":9446,"user_id":2305826,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/xRwWw.png?s=128&g=1","display_name":"MarsAtomic","link":"https://stackoverflow.com/users/2305826/marsatomic"},"edited":false,"score":2,"creation_date":1393027169,"post_id":21947452,"comment_id":33250058,"content_license":"CC BY-SA 3.0","body":"Across three trials of each (&#39;B&#39; vs &#39;#&#39;) I&#39;m getting between 36 and 38 seconds (rounded down). I added startTime and endTime fields that grab System.currentTimeMillis before and after the loop for my timing. I&#39;m going to suggest that there&#39;s some problem local to you (runtime engine, processor, black helicopters)."},{"owner":{"reputation":581144,"user_id":1491895,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG","display_name":"Barmar","link":"https://stackoverflow.com/users/1491895/barmar"},"edited":false,"score":19,"creation_date":1393125670,"post_id":21947452,"comment_id":33279059,"content_license":"CC BY-SA 3.0","body":"Based on the accepted answer, you apparently didn&#39;t try running it with output redirected to a file or /dev/null."},{"owner":{"reputation":512,"user_id":401346,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2c9632d7d0e52bfbc0dbb902e8db3520?s=128&d=identicon&r=PG","display_name":"Divide","link":"https://stackoverflow.com/users/401346/divide"},"reply_to_user":{"reputation":4323,"user_id":1565862,"user_type":"registered","profile_image":"https://i.stack.imgur.com/wJLo7.png?s=128&g=1","display_name":"fejese","link":"https://stackoverflow.com/users/1565862/fejese"},"edited":false,"score":24,"creation_date":1393328686,"post_id":21947452,"comment_id":33366229,"content_license":"CC BY-SA 3.0","body":"@fejese, Random() is not a cryptographical rng and so doesn&#39;t use up the entropy pool."},{"owner":{"reputation":10144,"user_id":2157640,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/aoymS.png?s=128&g=1","display_name":"Palec","link":"https://stackoverflow.com/users/2157640/palec"},"reply_to_user":{"reputation":7688,"user_id":3453226,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/8c681e1b2ff238b273596e227be778ac?s=128&d=identicon&r=PG&f=1","display_name":"Francesco Menzani","link":"https://stackoverflow.com/users/3453226/francesco-menzani"},"edited":false,"score":0,"creation_date":1441042837,"post_id":21947452,"comment_id":52508768,"content_license":"CC BY-SA 3.0","body":"<a href=\"https://stackoverflow.com/questions/tagged/matrix\">matrix</a>, @FrancescoMenzani? IMO it makes no sense here; is makes the question not a bit easier to find, does not describe its scope better, just adds noise."},{"owner":{"reputation":7688,"user_id":3453226,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/8c681e1b2ff238b273596e227be778ac?s=128&d=identicon&r=PG&f=1","display_name":"Francesco Menzani","link":"https://stackoverflow.com/users/3453226/francesco-menzani"},"reply_to_user":{"reputation":10144,"user_id":2157640,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/aoymS.png?s=128&g=1","display_name":"Palec","link":"https://stackoverflow.com/users/2157640/palec"},"edited":false,"score":1,"creation_date":1441113053,"post_id":21947452,"comment_id":52539277,"content_license":"CC BY-SA 3.0","body":"@Palec I couldn&#39;t find any print tag specific to <code>System.out</code>, but I think <a href=\"https://stackoverflow.com/questions/tagged/system.out\">system.out</a> itself will represent that part of the question quite good."},{"owner":{"reputation":928,"user_id":2655988,"user_type":"registered","accept_rate":30,"profile_image":"https://www.gravatar.com/avatar/85bec2e7ca2632bde58e60fd1ff11927?s=128&d=identicon&r=PG","display_name":"Nishit","link":"https://stackoverflow.com/users/2655988/nishit"},"edited":false,"score":0,"creation_date":1522901642,"post_id":21947452,"comment_id":86337891,"content_license":"CC BY-SA 3.0","body":"I tried running the same code on my system. In each of the 20 trials, printing &quot;#&quot; code was 3-5 times <i>SLOWER</i> than printing &quot;B&quot;."}],"answers":[{"comments":[{"owner":{"reputation":1449,"user_id":556742,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/33008536cdf6697c002fd5f2629ca895?s=128&d=identicon&r=PG","display_name":"Bob Kerns","link":"https://stackoverflow.com/users/556742/bob-kerns"},"edited":false,"score":322,"creation_date":1393195122,"post_id":21947627,"comment_id":33300222,"content_license":"CC BY-SA 3.0","body":"Brilliant deduction. But we should generalize from this lesson, and always measure performance with output either eliminated, directed to /dev/null (NUL on Windows) or at least to a file. Displaying on any sort of Console is generally very expensive IO, and always distorts timings -- even if not as dramatically confusingly as this."},{"owner":{"reputation":25965,"user_id":338068,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/4cb6a6a3ccc0d568a0944a6655e22803?s=128&d=identicon&r=PG","display_name":"Chris","link":"https://stackoverflow.com/users/338068/chris"},"reply_to_user":{"reputation":1449,"user_id":556742,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/33008536cdf6697c002fd5f2629ca895?s=128&d=identicon&r=PG","display_name":"Bob Kerns","link":"https://stackoverflow.com/users/556742/bob-kerns"},"edited":false,"score":18,"creation_date":1393254585,"post_id":21947627,"comment_id":33327824,"content_license":"CC BY-SA 3.0","body":"@BobKerns: Surely that would still have generated an appropriate question though. The problem remains that printing Bs takes longer and not printing them isn&#39;t really a solution so much as a trick to help debug the problem."},{"owner":{"reputation":42188,"user_id":1016716,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG","display_name":"Mr Lister","link":"https://stackoverflow.com/users/1016716/mr-lister"},"edited":false,"score":2,"creation_date":1393446121,"post_id":21947627,"comment_id":33436942,"content_license":"CC BY-SA 3.0","body":"Is this still speculation? I mean, does System.out.print actually do word wrapping? Do we have documentation somewhere? Can you switch this feature on and off?"},{"owner":{"reputation":3587,"user_id":371191,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/e1caa49eebfe37ffe3ef64e19364b0b3?s=128&d=identicon&r=PG","display_name":"Silly Freak","link":"https://stackoverflow.com/users/371191/silly-freak"},"reply_to_user":{"reputation":42188,"user_id":1016716,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG","display_name":"Mr Lister","link":"https://stackoverflow.com/users/1016716/mr-lister"},"edited":false,"score":7,"creation_date":1393446901,"post_id":21947627,"comment_id":33437414,"content_license":"CC BY-SA 3.0","body":"@MrLister this is not an issue with System.out, but with its consumer, in this case NetBeans&#39; console view. Whether you can turn it off, check in Netbeans&#39; settings."},{"owner":{"reputation":860709,"user_id":157247,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/4HovX.jpg?s=128&g=1","display_name":"T.J. Crowder","link":"https://stackoverflow.com/users/157247/t-j-crowder"},"reply_to_user":{"reputation":42188,"user_id":1016716,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG","display_name":"Mr Lister","link":"https://stackoverflow.com/users/1016716/mr-lister"},"edited":false,"score":39,"creation_date":1393452673,"post_id":21947627,"comment_id":33440840,"content_license":"CC BY-SA 3.0","body":"@MrLister: <code>System.out.println</code> doesn&#39;t do wordwrapping; the thing it was outputting to was doing word-wrapping (and blocking, so <code>System.out.println</code> had to wait)."},{"owner":{"reputation":1449,"user_id":556742,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/33008536cdf6697c002fd5f2629ca895?s=128&d=identicon&r=PG","display_name":"Bob Kerns","link":"https://stackoverflow.com/users/556742/bob-kerns"},"reply_to_user":{"reputation":25965,"user_id":338068,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/4cb6a6a3ccc0d568a0944a6655e22803?s=128&d=identicon&r=PG","display_name":"Chris","link":"https://stackoverflow.com/users/338068/chris"},"edited":false,"score":39,"creation_date":1393849668,"post_id":21947627,"comment_id":33605454,"content_license":"CC BY-SA 3.0","body":"@Chris -- actually, I&#39;ll argue that not printing them IS the solution, to the problem of getting accurate timings of the algorithm.  Each time you print to a Console (of any sort), you&#39;re invoking all manner of external processing not related to what you&#39;re testing the performance of. That&#39;s a bug in your measurement procedure, pure and simple.  On the other hand, if you view the problem not as measurement, but understanding the discrepancy, then yes, not printing is a debugging trick.  It comes down to, which problem are you trying to solve?"},{"owner":{"reputation":4145,"user_id":1410669,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e48a0c062eea7f211bd8cf5ae31c2886?s=128&d=identicon&r=PG&f=1","display_name":"UpAndAdam","link":"https://stackoverflow.com/users/1410669/upandadam"},"reply_to_user":{"reputation":1449,"user_id":556742,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/33008536cdf6697c002fd5f2629ca895?s=128&d=identicon&r=PG","display_name":"Bob Kerns","link":"https://stackoverflow.com/users/556742/bob-kerns"},"edited":false,"score":9,"creation_date":1396642286,"post_id":21947627,"comment_id":34897675,"content_license":"CC BY-SA 3.0","body":"@BobKerns Thanks for injecting some sanity into this thread! So many people don&#39;t seem to understand this.  You need to be careful that you are <b>only measuring the thing you are trying to measure</b>"},{"owner":{"reputation":20116,"user_id":1173112,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1","display_name":"Koray Tugay","link":"https://stackoverflow.com/users/1173112/koray-tugay"},"reply_to_user":{"reputation":3587,"user_id":371191,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/e1caa49eebfe37ffe3ef64e19364b0b3?s=128&d=identicon&r=PG","display_name":"Silly Freak","link":"https://stackoverflow.com/users/371191/silly-freak"},"edited":false,"score":0,"creation_date":1420995139,"post_id":21947627,"comment_id":44180102,"content_license":"CC BY-SA 3.0","body":"@SillyFreak Can you please tell me what is meant by &quot;word wrapping must be done in case of B&quot; ?"},{"owner":{"reputation":3587,"user_id":371191,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/e1caa49eebfe37ffe3ef64e19364b0b3?s=128&d=identicon&r=PG","display_name":"Silly Freak","link":"https://stackoverflow.com/users/371191/silly-freak"},"reply_to_user":{"reputation":20116,"user_id":1173112,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1","display_name":"Koray Tugay","link":"https://stackoverflow.com/users/1173112/koray-tugay"},"edited":false,"score":0,"creation_date":1421008472,"post_id":21947627,"comment_id":44184603,"content_license":"CC BY-SA 3.0","body":"@KorayTugay where do you have that quote from? Word wrapping apparently <i>is</i> done, and that&#39;s the <i>problem</i>, if you want to view it as such. It&#39;s nothing that &quot;must be done&quot; to fix anything relating to this question."},{"owner":{"reputation":3841,"user_id":889053,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG","display_name":"Christian Bongiorno","link":"https://stackoverflow.com/users/889053/christian-bongiorno"},"edited":false,"score":7,"creation_date":1421254743,"post_id":21947627,"comment_id":44291627,"content_license":"CC BY-SA 3.0","body":"IO is crazy expensive. We once needed to write to a DB random data. The guy who originally wrote the code put printf(&quot;%s\\r&quot;,lineCount); for all iterations. 1 million entries did not finish in 24 hours. I simply put a if(lineCount % 1000 ==) and it finished within 30 seconds."},{"owner":{"reputation":5792,"user_id":3950982,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7491f45ae073ed6bfe01b1e63fb06bf0?s=128&d=identicon&r=PG","display_name":"Luke Hutchison","link":"https://stackoverflow.com/users/3950982/luke-hutchison"},"edited":false,"score":0,"creation_date":1520742969,"post_id":21947627,"comment_id":85437381,"content_license":"CC BY-SA 3.0","body":"Eclipse, NetBeans, less, gedit and emacs all have major performance issues with long lines. Somehow they managed to write code that runs as something like O(N^2) in the length of the line. This is a common, dumb problem that really needs to be solved in all these programs."},{"owner":{"reputation":580,"user_id":1330085,"user_type":"registered","profile_image":"https://i.stack.imgur.com/H8jo2.png?s=128&g=1","display_name":"cleberz","link":"https://stackoverflow.com/users/1330085/cleberz"},"edited":false,"score":1,"creation_date":1538689366,"post_id":21947627,"comment_id":92242404,"content_license":"CC BY-SA 4.0","body":"I noticed many years ago how applications printing a lot of things to the console can run a lot faster when minimized, so I figured the output stream is a blocking operation, but never would have thought the other side of the stream (in this case, the shell) would have a hard time keeping up taking stuff out of the stream. Great catch, great answer. I wonder if these terminals should add multithreading for reducing the time blocking the streams."},{"owner":{"reputation":3075,"user_id":1324393,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/462dfbd15fcd32d5c52ca867fa914b9b?s=128&d=identicon&r=PG","display_name":"GoatInTheMachine","link":"https://stackoverflow.com/users/1324393/goatinthemachine"},"reply_to_user":{"reputation":580,"user_id":1330085,"user_type":"registered","profile_image":"https://i.stack.imgur.com/H8jo2.png?s=128&g=1","display_name":"cleberz","link":"https://stackoverflow.com/users/1330085/cleberz"},"edited":false,"score":1,"creation_date":1540302907,"post_id":21947627,"comment_id":92809604,"content_license":"CC BY-SA 4.0","body":"@cleberz there&#39;s a number of processes I run from Command that I always run in minimized or tiny windows because they finish much, much more quickly that way."}],"owner":{"reputation":860709,"user_id":157247,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/4HovX.jpg?s=128&g=1","display_name":"T.J. Crowder","link":"https://stackoverflow.com/users/157247/t-j-crowder"},"comment_count":13,"is_accepted":true,"community_owned_date":1393027321,"score":4137,"last_activity_date":1489389389,"last_edit_date":1489389389,"creation_date":1393027321,"answer_id":21947627,"question_id":21947452,"content_license":"CC BY-SA 3.0","body":"<p><em>Pure speculation</em> is that you're using a terminal that attempts to do <a href=\"http://en.wikipedia.org/wiki/Word_wrap\" rel=\"noreferrer\">word-wrapping</a> rather than character-wrapping, and treats <code>B</code> as a word character but <code>#</code> as a non-word character. So when it reaches the end of a line and searches for a place to break the line, it sees a <code>#</code> almost immediately and happily breaks there; whereas with the <code>B</code>, it has to keep searching for longer, and may have more text to wrap (which may be expensive on some terminals, e.g., outputting backspaces, then outputting spaces to overwrite the letters being wrapped).</p>\n\n<p>But that's pure speculation.</p>\n"},{"comments":[{"owner":{"reputation":318,"user_id":1394917,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/540c60ff8bfc7057ac9af4f7231a7999?s=128&d=identicon&r=PG","display_name":"silph","link":"https://stackoverflow.com/users/1394917/silph"},"edited":false,"score":34,"creation_date":1477802985,"post_id":29434641,"comment_id":67907562,"content_license":"CC BY-SA 3.0","body":"can you elaborate on your research strategies and then what finally led you to find out that line-wrapping was the culprit? (i&#39;m curious about your detective skills, that is!)"},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":0,"creation_date":1593861951,"post_id":29434641,"comment_id":110928297,"content_license":"CC BY-SA 4.0","body":"Word wrapping in Netbeans can be disabled."},{"owner":{"reputation":173,"user_id":11670196,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ad0ea391d628290be8b71786bfb2e217?s=128&d=identicon&r=PG&f=1","display_name":"Tobias","link":"https://stackoverflow.com/users/11670196/tobias"},"edited":false,"score":1,"creation_date":1604584267,"post_id":29434641,"comment_id":114395047,"content_license":"CC BY-SA 4.0","body":"The longer i am around, the less attractive becomes Netbeans."}],"owner":{"reputation":4399,"user_id":3962211,"user_type":"registered","accept_rate":71,"profile_image":"https://graph.facebook.com/100001763507125/picture?type=large","display_name":"Roy Shmuli","link":"https://stackoverflow.com/users/3962211/roy-shmuli"},"comment_count":3,"is_accepted":false,"score":222,"last_activity_date":1447796095,"last_edit_date":1592644375,"creation_date":1428073264,"answer_id":29434641,"question_id":21947452,"content_license":"CC BY-SA 4.0","body":"<p>I performed tests on Eclipse vs Netbeans 8.0.2, both with Java version 1.8;\nI used <code>System.nanoTime()</code> for measurements.</p>\n<h2>Eclipse:</h2>\n<p>I got the <strong>same time on both cases</strong> - around <strong>1.564 seconds</strong>.</p>\n<h2>Netbeans:</h2>\n<ul>\n<li>Using &quot;#&quot;: <strong>1.536 seconds</strong></li>\n<li>Using &quot;B&quot;: <strong>44.164 seconds</strong></li>\n</ul>\n<p>So, it looks like Netbeans has bad performance on print to console.</p>\n<p>After more research I realized that the problem is <a href=\"http://en.wikipedia.org/wiki/Line_wrap_and_word_wrap\" rel=\"noreferrer\">line-wrapping</a> of the max buffer of Netbeans (it's not restricted to <code>System.out.println</code> command), demonstrated by this code:</p>\n<pre><code>for (int i = 0; i &lt; 1000; i++) {\n    long t1 = System.nanoTime();\n    System.out.print(&quot;BBB......BBB&quot;); \\\\&lt;-contain 1000 &quot;B&quot;\n    long t2 = System.nanoTime();\n    System.out.println(t2-t1);\n    System.out.println(&quot;&quot;);\n}\n</code></pre>\n<p>The time results are less then 1 millisecond every iteration except <strong>every fifth iteration</strong>, when the time result is around 225 millisecond. Something like (in nanoseconds):</p>\n<pre><code>BBB...31744\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...226365807\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...31744\nBBB...226365807\n.\n.\n.\n</code></pre>\n<p>And so on..</p>\n<h2>Summary:</h2>\n<ol>\n<li>Eclipse works perfectly with &quot;B&quot;</li>\n<li>Netbeans has a line-wrapping problem that can be solved (because the problem does not occur in eclipse)(without adding space after B (&quot;B &quot;)).</li>\n</ol>\n"},{"comments":[{"owner":{"reputation":44166,"user_id":365237,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/fb9385b7f1a792d5159eca8bbb2c34f8?s=128&d=identicon&r=PG","display_name":"eis","link":"https://stackoverflow.com/users/365237/eis"},"edited":false,"score":1,"creation_date":1610903685,"post_id":57798920,"comment_id":116273761,"content_license":"CC BY-SA 4.0","body":"&quot;It will take almost 6.24% less time to compile the program.&quot; surely you refer to executing, not compiling..."}],"owner":{"reputation":773,"user_id":8504033,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b166c14f06ea17be1d560bbcfe79e070?s=128&d=identicon&r=PG","display_name":"Abdul Alim Shakir","link":"https://stackoverflow.com/users/8504033/abdul-alim-shakir"},"comment_count":1,"is_accepted":false,"score":14,"last_activity_date":1583216098,"last_edit_date":1583216098,"creation_date":1567661130,"answer_id":57798920,"question_id":21947452,"content_license":"CC BY-SA 4.0","body":"<p>Yes the culprit is definitely word-wrapping. When I tested your two programs, NetBeans IDE 8.2 gave me the following result.</p>\n\n<ol>\n<li>First Matrix: O and # = <strong><em>6.03 seconds</em></strong></li>\n<li>Second Matrix: O and B = <strong><em>50.97 seconds</em></strong></li>\n</ol>\n\n<p>Looking at your code closely you have used a line break at the end of first loop. But you didn't use any line break in second loop. So you are going to print a word with 1000 characters in the second loop. That causes a word-wrapping problem. If we use a non-word character \" \" after B, it takes only <strong><em>5.35 seconds</em></strong> to compile the program. And If we use a line break in the second loop after passing 100 values or 50 values, it takes only <strong><em>8.56 seconds</em></strong> and <strong><em>7.05 seconds</em></strong> respectively. </p>\n\n<pre><code>Random r = new Random();\nfor (int i = 0; i &lt; 1000; i++) {\n    for (int j = 0; j &lt; 1000; j++) {\n        if(r.nextInt(4) == 0) {\n            System.out.print(\"O\");\n        } else {\n            System.out.print(\"B\");\n        }\n        if(j%100==0){               //Adding a line break in second loop      \n            System.out.println();\n        }                    \n    }\n    System.out.println(\"\");                \n}\n</code></pre>\n\n<p>Another advice is that to change settings of NetBeans IDE. First of all, go to NetBeans <strong>Tools</strong> and click <strong>Options</strong>. After that click <strong>Editor</strong> and go to <strong>Formatting</strong> tab. Then select <em>Anywhere</em> in <strong>Line Wrap</strong> Option. It will take almost 6.24% less time to compile the program. </p>\n\n<p><a href=\"https://i.stack.imgur.com/yv2eL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yv2eL.jpg\" alt=\"NetBeans Editor Settings\"></a></p>\n"}],"owner":{"reputation":24678,"user_id":1732709,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/1e93a4869dec073619f6ba377ec87691?s=128&d=identicon&r=PG","display_name":"Kuba Spatny","link":"https://stackoverflow.com/users/1732709/kuba-spatny"},"comment_count":10,"is_answered":true,"view_count":241128,"protected_date":1393358700,"accepted_answer_id":21947627,"answer_count":3,"score":2808,"last_activity_date":1583216098,"creation_date":1393026343,"last_edit_date":1523001683,"question_id":21947452,"link":"https://stackoverflow.com/questions/21947452/why-is-printing-b-dramatically-slower-than-printing","title":"Why is printing &quot;B&quot; dramatically slower than printing &quot;#&quot;?","body":"<p>I generated two matrices of <code>1000</code> x <code>1000</code>:</p>\n\n<p>First Matrix: <code>O</code> and <code>#</code>.<br>\nSecond Matrix: <code>O</code> and <code>B</code>.</p>\n\n<p>Using the following code, the first matrix took 8.52 seconds to complete:</p>\n\n<pre><code>Random r = new Random();\nfor (int i = 0; i &lt; 1000; i++) {\n    for (int j = 0; j &lt; 1000; j++) {\n        if(r.nextInt(4) == 0) {\n            System.out.print(\"O\");\n        } else {\n            System.out.print(\"#\");\n        }\n    }\n\n   System.out.println(\"\");\n }\n</code></pre>\n\n<p>With this code, the second matrix took 259.152 seconds to complete:</p>\n\n<pre><code>Random r = new Random();\nfor (int i = 0; i &lt; 1000; i++) {\n    for (int j = 0; j &lt; 1000; j++) {\n        if(r.nextInt(4) == 0) {\n            System.out.print(\"O\");\n        } else {\n            System.out.print(\"B\"); //only line changed\n        }\n    }\n\n    System.out.println(\"\");\n}\n</code></pre>\n\n<p>What is the reason behind the dramatically different run times?</p>\n\n<hr>\n\n<p>As suggested in the comments, printing only <code>System.out.print(\"#\");</code> takes <code>7.8871</code> seconds, whereas <code>System.out.print(\"B\");</code> gives <code>still printing...</code>.</p>\n\n<p>As others who pointed out that it works for them normally, I tried <a href=\"http://ideone.com\" rel=\"noreferrer\">Ideone.com</a> for instance, and both pieces of code execute at the same speed.</p>\n\n<p>Test Conditions:</p>\n\n<ul>\n<li>I ran this test from <em>Netbeans 7.2</em>, with the output into its console</li>\n<li>I used <code>System.nanoTime()</code> for measurements</li>\n</ul>\n"},{"tags":["java","maven-2","build-process","build-automation","executable-jar"],"comments":[{"owner":{"reputation":15366,"user_id":56039,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/bededa744012c87721d68f69342f81b0?s=128&d=identicon&r=PG","display_name":"Matthew McCullough","link":"https://stackoverflow.com/users/56039/matthew-mccullough"},"edited":false,"score":15,"creation_date":1236784310,"post_id":574594,"comment_id":11501234,"content_license":"CC BY-SA 2.5","body":"Please explain which goal of the dependency plugin you are referring to.  I know of no goal which does what the original question requests: to put all the dependencies either A) inside the authors jar via repackaging, or B) make an executable jar that has the others in a classpath of MANIFEST.MF"},{"owner":{"reputation":9033,"user_id":253231,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/e6ba36648047adc44c5567e2b9c4dbc7?s=128&d=identicon&r=PG","display_name":"Dan","link":"https://stackoverflow.com/users/253231/dan"},"edited":false,"score":2,"creation_date":1422903714,"post_id":574594,"comment_id":44923586,"content_license":"CC BY-SA 3.0","body":"You might find this useful <a href=\"http://www.rationaljava.com/2015/02/maven-tip-all-about-executable-jars.html\" rel=\"nofollow noreferrer\">rationaljava.com/2015/02/&hellip;</a>"},{"owner":{"reputation":20116,"user_id":1173112,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/rtcjY.jpg?s=128&g=1","display_name":"Koray Tugay","link":"https://stackoverflow.com/users/1173112/koray-tugay"},"edited":false,"score":1,"creation_date":1490856858,"post_id":574594,"comment_id":73301277,"content_license":"CC BY-SA 3.0","body":"2 examples: <a href=\"http://www.tugay.biz/2015/12/a-standalone-java-web-application-with.html\" rel=\"nofollow noreferrer\">tugay.biz/2015/12/a-standalone-java-web-application-with.htm&zwnj;&#8203;l</a> <a href=\"http://www.tugay.biz/2016/11/how-did-i-create-executable-jar-with.html\" rel=\"nofollow noreferrer\">tugay.biz/2016/11/how-did-i-create-executable-jar-with.html</a>"},{"owner":{"reputation":6651,"user_id":5678086,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/iJDcj.jpg?s=128&g=1","display_name":"Thanga","link":"https://stackoverflow.com/users/5678086/thanga"},"edited":false,"score":1,"creation_date":1505117896,"post_id":574594,"comment_id":79263695,"content_license":"CC BY-SA 3.0","body":"Refer <a href=\"https://stackoverflow.com/questions/35217128/is-it-possible-to-build-a-java-project-only-once-using-eclipse-and-share/35359756#35359756\" title=\"is it possible to build a java project only once using eclipse and share\">stackoverflow.com/questions/35217128/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"reputation":33084,"user_id":13379,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/29d7c49f6f174710788c79011219bae1?s=128&d=identicon&r=PG","display_name":"Michael","link":"https://stackoverflow.com/users/13379/michael"},"reply_to_user":{"reputation":55142,"user_id":30453,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22dd0a01a087140791952d22cfd13b6c?s=128&d=identicon&r=PG","display_name":"IAdapter","link":"https://stackoverflow.com/users/30453/iadapter"},"edited":false,"score":25,"creation_date":1306868613,"post_id":574650,"comment_id":7204090,"content_license":"CC BY-SA 3.0","body":"Thanks @IAdapter.  Note that you should always do a compile before hand because it will just put whatever is in &quot;target/classes&quot; in the JAR.  This will ensure that the JAR includes any changes you recently made to the source code.  So, you should do something like: <code>mvn clean compile assembly:single</code>."},{"owner":{"reputation":58116,"user_id":474189,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/jzXIJ.jpg?s=128&g=1","display_name":"Duncan Jones","link":"https://stackoverflow.com/users/474189/duncan-jones"},"edited":false,"score":10,"creation_date":1361435906,"post_id":574650,"comment_id":21066036,"content_license":"CC BY-SA 3.0","body":"I&#39;ve edited the question to include the phase binding. I removed the deprecated assembly goal, because no-one needs to know about that."},{"owner":{"reputation":343,"user_id":651406,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/hMWrE.jpg?s=128&g=1","display_name":"Sahil Dave","link":"https://stackoverflow.com/users/651406/sahil-dave"},"edited":false,"score":1,"creation_date":1382540135,"post_id":574650,"comment_id":29000111,"content_license":"CC BY-SA 3.0","body":"I&#39;ve associated the assembly:single goal with the package phase in my project&#39;s pom.xml, but it works only when I do a mvn assembly:single from the command line."},{"owner":{"reputation":448,"user_id":1407277,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/8f84b2094fe16c6cc6a3cf5a5d15e30e?s=128&d=identicon&r=PG","display_name":"Prashant Vaidyanathan","link":"https://stackoverflow.com/users/1407277/prashant-vaidyanathan"},"edited":false,"score":0,"creation_date":1405476650,"post_id":574650,"comment_id":38438171,"content_license":"CC BY-SA 3.0","body":"Is here any way I can direct the &lt;mainClass&gt; to a class under the test directory? I have a main class under org.core (the directory structure exists under main and test) but maven only includes compiled classes from main and not test."},{"owner":{"reputation":871,"user_id":1391454,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/JaGXc.jpg?s=128&g=1","display_name":"Mubasher","link":"https://stackoverflow.com/users/1391454/mubasher"},"edited":false,"score":0,"creation_date":1411059360,"post_id":574650,"comment_id":40570999,"content_license":"CC BY-SA 3.0","body":"Can we use this metod for java fx jar. Our the default ant jar task is better. But i am facing issues of dependencies with ant jar task.look my Question <a href=\"http://stackoverflow.com/questions/25915793/using-maven-ant-plugin-in-javafx-application-how-to-add-dependencies-in-javafx\" title=\"using maven ant plugin in javafx application how to add dependencies in javafx\">stackoverflow.com/questions/25915793/&hellip;</a>"},{"owner":{"reputation":2372,"user_id":1284868,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/ccafa13724eaae58ab1c5041f1dcf13b?s=128&d=identicon&r=PG","display_name":"pitchblack408","link":"https://stackoverflow.com/users/1284868/pitchblack408"},"edited":false,"score":3,"creation_date":1428424272,"post_id":574650,"comment_id":47151842,"content_license":"CC BY-SA 3.0","body":"I see that this doesn&#39;t add the jars to the uber jar, instead this just adds all the class files to the jar."},{"owner":{"reputation":1537,"user_id":1060779,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/17097df0f5471dede472d7666f4f5aa6?s=128&d=identicon&r=PG","display_name":"maxivis","link":"https://stackoverflow.com/users/1060779/maxivis"},"edited":false,"score":187,"creation_date":1430940149,"post_id":574650,"comment_id":48284596,"content_license":"CC BY-SA 3.0","body":"Tip: you can also add the element <code>&lt;appendAssemblyId&gt;false&lt;&#47;appendAssemblyId&gt;</code> into the <code>configuration</code> to avoid the annoying &quot;-jar-with-dependencies&quot; suffix in the name"},{"owner":{"reputation":26593,"user_id":432903,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/YCgsh.jpg?s=128&g=1","display_name":"prayagupd","link":"https://stackoverflow.com/users/432903/prayagupd"},"edited":false,"score":8,"creation_date":1478997846,"post_id":574650,"comment_id":68375077,"content_license":"CC BY-SA 3.0","body":"forget <code>compile</code> and you are screwed."},{"owner":{"reputation":910,"user_id":3774109,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c8e907ecb562bb1b8d8c99e0c3dcabf6?s=128&d=identicon&r=PG&f=1","display_name":"user3774109","link":"https://stackoverflow.com/users/3774109/user3774109"},"edited":false,"score":0,"creation_date":1489072051,"post_id":574650,"comment_id":72519363,"content_license":"CC BY-SA 3.0","body":"maven assembly plugin could introduce some issues because could override some dependencies, so I cannot tell you to use it! Use the maven Shade plugin instead which works very nice for us. We spent some days to found that the maven assembly plugin overrides some dependencies which break application jar. Have a look there : <a href=\"https://www.mkyong.com/maven/create-a-fat-jar-file-maven-shade-plugin/\" rel=\"nofollow noreferrer\">mkyong.com/maven/create-a-fat-jar-file-maven-shade-plugin</a>"},{"owner":{"reputation":21799,"user_id":108207,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1","display_name":"Niklas R.","link":"https://stackoverflow.com/users/108207/niklas-r"},"edited":false,"score":0,"creation_date":1511300900,"post_id":574650,"comment_id":81801298,"content_license":"CC BY-SA 3.0","body":"8 levels of wrapping is insane overdoing it"},{"owner":{"reputation":2775,"user_id":405326,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/6b19171e5d2f922dde018b57d8501c89?s=128&d=identicon&r=PG","display_name":"Raffi Khatchadourian","link":"https://stackoverflow.com/users/405326/raffi-khatchadourian"},"reply_to_user":{"reputation":1537,"user_id":1060779,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/17097df0f5471dede472d7666f4f5aa6?s=128&d=identicon&r=PG","display_name":"maxivis","link":"https://stackoverflow.com/users/1060779/maxivis"},"edited":false,"score":1,"creation_date":1517524901,"post_id":574650,"comment_id":84142668,"content_license":"CC BY-SA 3.0","body":"@maxivis Doing this seems to work but generates some warnings."},{"owner":{"reputation":928,"user_id":4719725,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-mcCgejRuIKg/AAAAAAAAAAI/AAAAAAAAACc/P9xPV8FH8hE/photo.jpg?sz=128","display_name":"parlad","link":"https://stackoverflow.com/users/4719725/parlad"},"edited":false,"score":2,"creation_date":1532084556,"post_id":574650,"comment_id":89852026,"content_license":"CC BY-SA 4.0","body":"what if i don&#39;t have main method or class, i just need some random java file to be jar?"},{"owner":{"reputation":4298,"user_id":697099,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/c1dd89427d4d5d899642c7624147ac7c?s=128&d=identicon&r=PG","display_name":"gerardw","link":"https://stackoverflow.com/users/697099/gerardw"},"reply_to_user":{"reputation":928,"user_id":4719725,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-mcCgejRuIKg/AAAAAAAAAAI/AAAAAAAAACc/P9xPV8FH8hE/photo.jpg?sz=128","display_name":"parlad","link":"https://stackoverflow.com/users/4719725/parlad"},"edited":false,"score":0,"creation_date":1540398471,"post_id":574650,"comment_id":92854128,"content_license":"CC BY-SA 4.0","body":"@parladneupane leave out the &lt;archive&gt; ...&lt;/archive&gt; portion"},{"owner":{"user_type":"does_not_exist","display_name":"user10201743"},"edited":false,"score":0,"creation_date":1542751450,"post_id":574650,"comment_id":93679858,"content_license":"CC BY-SA 4.0","body":"He do not asked to use plugings, maven should be able compile with dependencies itself without strange commands and plugings"},{"owner":{"reputation":573,"user_id":5236247,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/X84Js.png?s=128&g=1","display_name":"Adowrath","link":"https://stackoverflow.com/users/5236247/adowrath"},"edited":false,"score":3,"creation_date":1552759751,"post_id":574650,"comment_id":97137175,"content_license":"CC BY-SA 4.0","body":"@user10201743 Just to give a little context: <i>Everything</i> in Maven is a plugin. The compiler? <code>maven-compiler-plugin</code>. Tests? <code>maven-surefire-plugin</code>. These two, including the assembly, are official maven plugins, so they might as well be considered as part of maven (esp. cause, at least now, all three of them are in your effective POM by default)."},{"owner":{"reputation":151,"user_id":3277070,"user_type":"registered","profile_image":"https://i.stack.imgur.com/XVfyE.jpg?s=128&g=1","display_name":"Richard Bradley Smith","link":"https://stackoverflow.com/users/3277070/richard-bradley-smith"},"edited":false,"score":0,"creation_date":1558747008,"post_id":574650,"comment_id":99213871,"content_license":"CC BY-SA 4.0","body":"I ran into this with the alexa-skills-kit-sdk-for-java which worked well until the instructions to create the WAR barfed in Maven. In &#39;Developing Your First Skill&#39; it says enter the line command &#39;mvn org.apache.maven.plugins:maven-assembly-plugin:2.6:assembly -DdescriptorId=jar-with-dependencies package&#39; which does not work. I put the above plug-in in the &#39;highest POM&#39; (closest to the root file) and ran the line command &#39;mvn clean compile assembly:single&#39; from that POM (directory) and it worked perfectly."},{"owner":{"reputation":678,"user_id":5217790,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/---u55cTd7v4/AAAAAAAAAAI/AAAAAAAAAD0/KmliRKWfORI/photo.jpg?sz=128","display_name":"Halil Ä°brahim OymacÄ±","link":"https://stackoverflow.com/users/5217790/halil-%c4%b0brahim-oymac%c4%b1"},"edited":false,"score":1,"creation_date":1585646746,"post_id":574650,"comment_id":107827405,"content_license":"CC BY-SA 4.0","body":"For example if your main class path is <code>src&#47;main&#47;java&#47;com&#47;example&#47;ui&#47;Main.java</code>, you must write like that to pom.xml: <code>&lt;mainClass&gt;com.example.ui.Main&lt;&#47;mainClass&gt;</code>."},{"owner":{"reputation":604,"user_id":7949704,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JOTXA.jpg?s=128&g=1","display_name":"Alejandro Gonzalez","link":"https://stackoverflow.com/users/7949704/alejandro-gonzalez"},"edited":false,"score":0,"creation_date":1595440420,"post_id":574650,"comment_id":111478384,"content_license":"CC BY-SA 4.0","body":"Thank you men, it was useful"},{"owner":{"reputation":136,"user_id":2001265,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0d099487862f2623c22e024913ee12c7?s=128&d=identicon&r=PG","display_name":"Jack D Menendez","link":"https://stackoverflow.com/users/2001265/jack-d-menendez"},"edited":false,"score":0,"creation_date":1607285151,"post_id":574650,"comment_id":115218092,"content_license":"CC BY-SA 4.0","body":"I got into trouble with this because I kept placing my various attempts using different plugin under build pluginManagement plugins instead of build plugins.  Of course, there are no error messages to tell you about this mistake."},{"owner":{"reputation":30014,"user_id":300224,"user_type":"registered","accept_rate":68,"profile_image":"https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1","display_name":"William Entriken","link":"https://stackoverflow.com/users/300224/william-entriken"},"edited":false,"score":0,"creation_date":1613696872,"post_id":574650,"comment_id":117162741,"content_license":"CC BY-SA 4.0","body":"And in case you&#39;re new here, you would run that new compiled program using: <code>java -jar target&#47;*with-dependencies.jar</code> and you can add any command line arguments you want to pass to your program."}],"owner":{"reputation":55142,"user_id":30453,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/22dd0a01a087140791952d22cfd13b6c?s=128&d=identicon&r=PG","display_name":"IAdapter","link":"https://stackoverflow.com/users/30453/iadapter"},"comment_count":20,"is_accepted":true,"community_owned_date":1361435852,"score":2520,"last_activity_date":1361435852,"last_edit_date":1361435852,"creation_date":1235295088,"answer_id":574650,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>and you run it with</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>mvn clean compile assembly:single\n</code></pre>\n\n<p><em>Compile goal should be added before assembly:single or otherwise the code on your own project is not included.</em></p>\n\n<p>See more details in comments.</p>\n\n<hr>\n\n<p>Commonly this goal is tied to a build phase to execute automatically. This ensures the JAR is built when executing <code>mvn install</code> or performing a deployment/release.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n      &lt;/manifest&gt;\n    &lt;/archive&gt;\n    &lt;descriptorRefs&gt;\n      &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n    &lt;/descriptorRefs&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;make-assembly&lt;/id&gt; &lt;!-- this is used for inheritance merges --&gt;\n      &lt;phase&gt;package&lt;/phase&gt; &lt;!-- bind to the packaging phase --&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;single&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"owner":{"reputation":15366,"user_id":56039,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/bededa744012c87721d68f69342f81b0?s=128&d=identicon&r=PG","display_name":"Matthew McCullough","link":"https://stackoverflow.com/users/56039/matthew-mccullough"},"comment_count":0,"is_accepted":false,"score":144,"last_activity_date":1354121965,"last_edit_date":1354121965,"creation_date":1235622665,"answer_id":589111,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Taking Unanswered's answer and reformatting it, we have:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Next, I would recommend making this a natural part of your build, rather than something to call explicitly.  To make this a integral part of your build, add this plugin to your <code>pom.xml</code> and bind it to the <code>package</code> lifecycle event.  However, a gotcha is that you need to call the <code>assembly:single</code> goal if putting this in your pom.xml, while you would call 'assembly:assembly' if executing it manually from the command line.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n  [...]\n  &lt;build&gt;\n      &lt;plugins&gt;\n          &lt;plugin&gt;\n              &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n              &lt;configuration&gt;\n                  &lt;archive&gt;\n                      &lt;manifest&gt;\n                          &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                          &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n                      &lt;/manifest&gt;\n                  &lt;/archive&gt;\n                  &lt;descriptorRefs&gt;\n                      &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                  &lt;/descriptorRefs&gt;\n              &lt;/configuration&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;id&gt;make-my-jar-with-dependencies&lt;/id&gt;\n                      &lt;phase&gt;package&lt;/phase&gt;\n                      &lt;goals&gt;\n                          &lt;goal&gt;single&lt;/goal&gt;\n                      &lt;/goals&gt;\n                  &lt;/execution&gt;\n              &lt;/executions&gt;\n          &lt;/plugin&gt;\n      [...]\n      &lt;/plugins&gt;\n    [...]\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"owner":{"reputation":15366,"user_id":56039,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/bededa744012c87721d68f69342f81b0?s=128&d=identicon&r=PG","display_name":"Matthew McCullough","link":"https://stackoverflow.com/users/56039/matthew-mccullough"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1236784835,"last_edit_date":1236784835,"creation_date":1236784375,"answer_id":634989,"question_id":574594,"content_license":"CC BY-SA 2.5","body":"<p>Another option if you really want to repackage the other JARs contents inside your single resultant JAR is the <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"noreferrer\">Maven Assembly plugin</a>.  It unpacks and then repacks everything into a directory via <code>&lt;unpack&gt;true&lt;/unpack&gt;</code>. Then you'd have a second pass that built it into one massive JAR.</p>\n\n<p><a href=\"http://code.google.com/p/onejar-maven-plugin/\" rel=\"noreferrer\">Another option is the OneJar plugin</a>.  This performs the above repackaging actions all in one step.</p>\n"},{"owner":{"reputation":4163,"user_id":170865,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/eb2b0cd9d5f718264c171f2e3d987bc1?s=128&d=identicon&r=PG","display_name":"Matthew Franglen","link":"https://stackoverflow.com/users/170865/matthew-franglen"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1252503463,"creation_date":1252503463,"answer_id":1399739,"question_id":574594,"content_license":"CC BY-SA 2.5","body":"<p>Ken Liu has it right in my opinion. The maven dependency plugin allows you to expand all the dependencies, which you can then treat as resources. This allows you to include them in the <em>main</em> artifact. The use of the assembly plugin creates a secondary artifact which can be difficult to modify - in my case I wanted to add custom manifest entries. My pom ended up as:</p>\n\n<pre><code>&lt;project&gt;\n ...\n &lt;build&gt;\n  &lt;plugins&gt;\n   &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n     &lt;execution&gt;\n      &lt;id&gt;unpack-dependencies&lt;/id&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n       &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\n      &lt;/goals&gt;\n     &lt;/execution&gt;\n    &lt;/executions&gt;\n   &lt;/plugin&gt;\n  &lt;/plugins&gt;\n  ...\n  &lt;resources&gt;\n   &lt;resource&gt;\n    &lt;directory&gt;${basedir}/target/dependency&lt;/directory&gt;\n    &lt;targetPath&gt;/&lt;/targetPath&gt;\n   &lt;/resource&gt;\n  &lt;/resources&gt;\n &lt;/build&gt;\n ...\n&lt;/project&gt;\n</code></pre>\n"},{"owner":{"user_type":"does_not_exist","display_name":"user189057"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1255436184,"creation_date":1255436184,"answer_id":1559850,"question_id":574594,"content_license":"CC BY-SA 2.5","body":"<p>You can use maven-dependency-plugin, but the question was how to create an executable JAR. To do that requires the following alteration to Matthew Franglen's response (btw, using the dependency plugin takes longer to build when starting from a clean target):</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;fully.qualified.MainClass&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;unpack-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${basedir}/target/dependency&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"owner":{"reputation":1501,"user_id":195463,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4fa56a04d27cbb608964b21a01b196b6?s=128&d=identicon&r=PG","display_name":"SRG","link":"https://stackoverflow.com/users/195463/srg"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1262018615,"creation_date":1262018615,"answer_id":1970326,"question_id":574594,"content_license":"CC BY-SA 2.5","body":"<p>I won't answer directly the question as other have already done that before, but I really wonder if it's a good idea to embed all the dependencies in the project's jar itself.</p>\n\n<p>I see the point (ease of deployment / usage) but it depends of the use case of your poject (and there may be alternatives (see below)).</p>\n\n<p>If you use it fully standalone, why not.</p>\n\n<p>But if you use your project in other contexts (like in a webapp, or dropped in a folder where other jars are sitting), you may have jar duplicates in your classpath (the ones in the folder, the one in the jars). Maybe not a bid deal but i usually avoid this.</p>\n\n<p>A good alternative :</p>\n\n<ul>\n<li>deploy your application as a .zip / .war : the archive contains your project's jar and all dependent jars ;</li>\n<li>use a dynamic classloader mechanism (see Spring, or you can easily do this yourself) to have a single entry point of your project (a single class to start - see the Manifest mechanism on another answer), which will add (dynamically) to the current classpath all the other needed jars.</li>\n</ul>\n\n<p>Like this, with in the end just a manifest and a \"special dynamic classloader main\", you can start your project with :</p>\n\n<pre><code>java -jar ProjectMainJar.jar com.stackoverflow.projectName.MainDynamicClassLoaderClass\n</code></pre>\n"},{"comments":[{"owner":{"reputation":826,"user_id":2405670,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DDOvS.jpg?s=128&g=1","display_name":"MoHaN K RaJ","link":"https://stackoverflow.com/users/2405670/mohan-k-raj"},"edited":false,"score":0,"creation_date":1608035645,"post_id":2387907,"comment_id":115453617,"content_license":"CC BY-SA 4.0","body":"Getting this issue: org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.2:unpac&zwnj;&#8203;k-dependencies (unpack-dependencies) on project services: Unknown archiver type"}],"owner":{"reputation":101,"user_id":287244,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/cbc89ae600530421b951d05d7a8743c4?s=128&d=identicon&r=PG","display_name":"kac-ani","link":"https://stackoverflow.com/users/287244/kac-ani"},"comment_count":1,"is_accepted":false,"score":10,"last_activity_date":1562738824,"last_edit_date":1562738824,"creation_date":1267803559,"answer_id":2387907,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>It should be like that:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack-dependencies&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Unpacking have to be in generate-resources phase because, if in package phase, will not be included as resources.\nTry clean package and you'll see.</p>\n"},{"comments":[{"owner":{"reputation":18942,"user_id":714112,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/83b2bbbdc0f34ed6148dab188c6bb987?s=128&d=identicon&r=PG","display_name":"Sridhar Sarnobat","link":"https://stackoverflow.com/users/714112/sridhar-sarnobat"},"edited":false,"score":5,"creation_date":1504897147,"post_id":3706174,"comment_id":79208558,"content_license":"CC BY-SA 3.0","body":"I think you still need to do some stuff in the <code>pom.xml</code> otherwise you get <code>Error reading assemblies: No assembly descriptors found.</code>. That&#39;s what happens for me anyway."}],"owner":{"reputation":51,"user_id":446986,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/80eeeb391c97c521cfddee492956fc88?s=128&d=identicon&r=PG","display_name":"Mayank ","link":"https://stackoverflow.com/users/446986/mayank"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1565854252,"last_edit_date":1565854252,"creation_date":1284439063,"answer_id":3706174,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>To create an executable JAR from command line itself just run the below command from the project path:</p>\n\n<pre><code>mvn assembly:assembly\n</code></pre>\n"},{"owner":{"reputation":1251,"user_id":455180,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4e0c6b3670db888abcf0fded61300fb3?s=128&d=identicon&r=PG","display_name":"Vijay Katam","link":"https://stackoverflow.com/users/455180/vijay-katam"},"comment_count":0,"is_accepted":false,"score":100,"last_activity_date":1341936434,"last_edit_date":1341936434,"creation_date":1285168820,"answer_id":3770791,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Use the maven-shade-plugin to package all dependencies into one uber-jar. It can also be used to build an executable jar by specifying the main class. After trying to use maven-assembly and maven-jar , I found that this plugin best suited my needs. </p>\n\n<p>I found this plugin particularly useful as it merges content of specific files instead of overwriting them. This is needed when there are resource files that are have the same name across the jars and the plugin tries to package all the resource files</p>\n\n<p>See example below </p>\n\n<pre><code>      &lt;plugins&gt;\n    &lt;!-- This plugin provides the capability to package the artifact in an uber-jar, including its dependencies and to shade - i.e. rename - the packages of some of the dependencies. --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;artifactSet&gt;\n                        &lt;!-- signed jars--&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;bouncycastle:bcprov-jdk15&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/artifactSet&gt;\n\n                         &lt;transformers&gt;\n                            &lt;transformer\n                                implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                                &lt;!-- Main class --&gt;\n                                &lt;mainClass&gt;com.main.MyMainClass&lt;/mainClass&gt;\n                            &lt;/transformer&gt;\n                            &lt;!-- Use resource transformers to prevent file overwrites --&gt;\n                            &lt;transformer \n                                 implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;properties.properties&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer\n                                implementation=\"org.apache.maven.plugins.shade.resource.XmlAppendingTransformer\"&gt;\n                                &lt;resource&gt;applicationContext.xml&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer\n                                implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/cxf/cxf.extension&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                            &lt;transformer\n                                implementation=\"org.apache.maven.plugins.shade.resource.XmlAppendingTransformer\"&gt;\n                                &lt;resource&gt;META-INF/cxf/bus-extensions.xml&lt;/resource&gt;\n                            &lt;/transformer&gt;\n                     &lt;/transformers&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n</code></pre>\n"},{"owner":{"reputation":3661,"user_id":526415,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/d1c7ca5e13c5d5236eb0550a86ba4a74?s=128&d=identicon&r=PG","display_name":"Andr&#233; Aronsen","link":"https://stackoverflow.com/users/526415/andr%c3%a9-aronsen"},"comment_count":0,"is_accepted":false,"score":366,"last_activity_date":1411474119,"last_edit_date":1411474119,"creation_date":1291200384,"answer_id":4323501,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>You can use the dependency-plugin to generate all dependencies in a separate directory before the package phase and then include that in the classpath of the manifest:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy-dependencies&lt;/id&gt;\n            &lt;phase&gt;prepare-package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                &lt;mainClass&gt;theMainClass&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Alternatively use <code>${project.build.directory}/classes/lib</code> as OutputDirectory to integrate all jar-files into the main jar, but then you will need to add custom classloading code to load the jars.</p>\n"},{"owner":{"reputation":81,"user_id":657445,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/10ec89c0d42d3fa1a7b425c6d0ac3284?s=128&d=identicon&r=PG","display_name":"Rostislav StÅ&#237;brn&#253;","link":"https://stackoverflow.com/users/657445/rostislav-st%c5%99%c3%adbrn%c3%bd"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1359591997,"last_edit_date":1359591997,"creation_date":1300016445,"answer_id":5289121,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Problem with locating shared assembly file with maven-assembly-plugin-2.2.1?</p>\n\n<p>Try using descriptorId configuration parameter instead of descriptors/descriptor or descriptorRefs/descriptorRef parameters.</p>\n\n<p>Neither of them do what you need: look for the file on classpath.\nOf course you need adding the package where the shared assembly resides on maven-assembly-plugin's classpath (see below).\nIf you're using Maven 2.x (not Maven 3.x), you may need adding this dependency in top-most parent pom.xml in pluginManagement section.</p>\n\n<p>See <a href=\"http://svn.apache.org/repos/asf/maven/plugins/tags/maven-assembly-plugin-2.2.1\" rel=\"noreferrer\">this</a> for more details.</p>\n\n<p>Class: org.apache.maven.plugin.assembly.io.DefaultAssemblyReader</p>\n\n<p>Example:</p>\n\n<pre><code>        &lt;!-- Use the assembly plugin to create a zip file of all our dependencies. --&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.2.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;descriptorId&gt;assembly-zip-for-wid&lt;/descriptorId&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;cz.ness.ct.ip.assemblies&lt;/groupId&gt;\n                    &lt;artifactId&gt;TEST_SharedAssemblyDescriptor&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"owner":{"reputation":39711,"user_id":451634,"user_type":"registered","accept_rate":58,"profile_image":"https://www.gravatar.com/avatar/360ebfce7ad37f53a1302f8e68843139?s=128&d=identicon&r=PG","display_name":"Benny Neugebauer","link":"https://stackoverflow.com/users/451634/benny-neugebauer"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1313259823,"creation_date":1313259823,"answer_id":7052423,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>You can add the following to your <strong>pom.xml</strong>:</p>\n\n<pre><code>&lt;build&gt;\n&lt;defaultGoal&gt;install&lt;/defaultGoal&gt;\n&lt;plugins&gt;\n  &lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;source&gt;1.6&lt;/source&gt;\n      &lt;target&gt;1.6&lt;/target&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;archive&gt;\n        &lt;manifest&gt;\n          &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n          &lt;mainClass&gt;com.mycompany.package.MainClass&lt;/mainClass&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n  &lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;descriptorRefs&gt;\n        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n      &lt;/descriptorRefs&gt;\n      &lt;archive&gt;\n        &lt;manifest&gt;\n          &lt;mainClass&gt;com.mycompany.package.MainClass&lt;/mainClass&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;make-my-jar-with-dependencies&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n&lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Afterwards you have to switch via the console to the directory, where the pom.xml is located. Then you have to execute <strong>mvn assembly:single</strong> and then your executable JAR file with dependencies will be hopefully build. You can check it when switching to the output (target) directory with <strong>cd ./target</strong> and starting your jar with a command similiar to <strong>java -jar mavenproject1-1.0-SNAPSHOT-jar-with-dependencies.jar</strong>. </p>\n\n<p>I tested this with <strong>Apache Maven 3.0.3</strong>.</p>\n"},{"comments":[{"owner":{"reputation":11978,"user_id":80714,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/bfATw.png?s=128&g=1","display_name":"Chadwick","link":"https://stackoverflow.com/users/80714/chadwick"},"edited":false,"score":4,"creation_date":1330378540,"post_id":8279014,"comment_id":11987168,"content_license":"CC BY-SA 3.0","body":"The Shade plugin now has means of specifying the Main-Class entry in the manifest: <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/examples/executable-jar.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-shade-plugin/examples/&hellip;</a>"}],"owner":{"reputation":470,"user_id":891846,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/22415dfe4dd72f4f45a5acdbd55bff54?s=128&d=identicon&r=PG","display_name":"Oliver","link":"https://stackoverflow.com/users/891846/oliver"},"comment_count":1,"is_accepted":false,"score":13,"last_activity_date":1359591861,"last_edit_date":1359591861,"creation_date":1322317021,"answer_id":8279014,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>You could combine the <code>maven-shade-plugin</code> and <code>maven-jar-plugin</code>.</p>\n\n<ul>\n<li>The <code>maven-shade-plugin</code> packs your classes and all dependencies in a single jar file.</li>\n<li>Configure the <code>maven-jar-plugin</code> to specify the main class of your executable jar (see <a href=\"http://maven.apache.org/shared/maven-archiver/examples/classpath.html\" rel=\"noreferrer\">Set Up The Classpath</a>, chapter \"Make The Jar Executable\").</li>\n</ul>\n\n<p>Example POM configuration for <code>maven-jar-plugin</code>:</p>\n\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;mainClass&gt;com.example.MyMainClass&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Finally create the executable jar by invoking:</p>\n\n<pre><code>mvn clean package shade:shade\n</code></pre>\n"},{"owner":{"reputation":24268,"user_id":404395,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/482810f6637ba931bc76524140b1a727?s=128&d=identicon&r=PG","display_name":"marioosh","link":"https://stackoverflow.com/users/404395/marioosh"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1331672158,"last_edit_date":1495539204,"creation_date":1331672158,"answer_id":9692010,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Long used the <strong>maven assembly plugin</strong>, but I could not find a solution to the problem with <a href=\"https://stackoverflow.com/questions/2596655/how-do-i-surpress-maven-assembly-plugin-skipping-files-that-are-already-added-o\"><code>\"already added, skipping\"</code></a>. Now, I'm using another plugin - <a href=\"http://code.google.com/p/onejar-maven-plugin/\" rel=\"noreferrer\"><strong>onejar-maven-plugin</strong></a>. Example below (<code>mvn package</code> build jar):</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.dstovall&lt;/groupId&gt;\n    &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;com.company.MainClass&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;one-jar&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>You need to add repository for that plugin:</p>\n\n<pre><code>&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;onejar-maven-plugin.googlecode.com&lt;/id&gt;\n        &lt;url&gt;http://onejar-maven-plugin.googlecode.com/svn/mavenrepo&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n"},{"owner":{"reputation":469,"user_id":547689,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/93c9d62bd8a66c85d85335fe50d06faf?s=128&d=identicon&r=PG","display_name":"Chris","link":"https://stackoverflow.com/users/547689/chris"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1369424524,"creation_date":1369424524,"answer_id":16742511,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>The maven-assembly-plugin worked great for me.\nI spent hours with the maven-dependency-plugin and couldn't make it work. The main reason was that I had to define in the configuration section explicitly the artifact items which should be included as it is described in the <a href=\"http://maven.apache.org/plugins/maven-dependency-plugin/usage.html\" rel=\"nofollow\">documentation</a>. \nThere is an example there for the cases when you want to use it like: <code>mvn dependency:copy</code>, where there are not included any artifactItems but it doesn't work.</p>\n"},{"owner":{"reputation":1103,"user_id":2695990,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c05194ea1fcc0d2729ac3de4e023de72?s=128&d=identicon&r=PG","display_name":"fascynacja","link":"https://stackoverflow.com/users/2695990/fascynacja"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1394898434,"last_edit_date":1394898434,"creation_date":1380039076,"answer_id":18986754,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Something that have worked for me was:</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;unpack-dependencies&lt;/id&gt;\n        &lt;phase&gt;prepare-package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;unpack-dependencies&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;outputDirectory&gt;${project.build.directory}/classes&lt;/outputDirectory&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n\n\n  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;unpack-dependencies&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n      &lt;archive&gt;\n        &lt;manifest&gt;\n          &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n          &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n          &lt;mainClass&gt;SimpleKeyLogger&lt;/mainClass&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>I had extraordinary case because my dependency was system one:</p>\n\n<pre><code>&lt;dependency&gt;\n  ..\n  &lt;scope&gt;system&lt;/scope&gt;\n  &lt;systemPath&gt;${project.basedir}/lib/myjar.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I have changed the code provided by @user189057 with changes:\n1) maven-dependency-plugin is executed in \"prepare-package\" phase\n2) I am extracting unpacked classess directly to \"target/classes\"</p>\n"},{"owner":{"reputation":16799,"user_id":330457,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/2JN6W.jpg?s=128&g=1","display_name":"Jin Kwon","link":"https://stackoverflow.com/users/330457/jin-kwon"},"comment_count":0,"is_accepted":false,"score":260,"last_activity_date":1612779801,"last_edit_date":1612779801,"creation_date":1401678113,"answer_id":23986765,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>See <a href=\"https://github.com/jinahya/executable-jar-with-maven-example\" rel=\"noreferrer\">executable-jar-with-maven-example</a> (GitHub)</p>\n<h2>Notes</h2>\n<p>Those pros and cons are provided by <a href=\"https://stackoverflow.com/users/363573/stephan\">Stephan</a>.</p>\n<hr />\n<h2>For Manual Deployment</h2>\n<ul>\n<li>Pros</li>\n<li>Cons\n<ul>\n<li>Dependencies are out of the final jar.</li>\n</ul>\n</li>\n</ul>\n<h3>Copy Dependencies to a specific directory</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;copy-dependencies&lt;/id&gt;\n      &lt;phase&gt;prepare-package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;outputDirectory&gt;${project.build.directory}/${project.build.finalName}.lib&lt;/outputDirectory&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<h3>Make the Jar Executable and Classpath Aware</h3>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;archive&gt;\n      &lt;manifest&gt;\n        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n        &lt;classpathPrefix&gt;${project.build.finalName}.lib/&lt;/classpathPrefix&gt;\n        &lt;mainClass&gt;${fully.qualified.main.class}&lt;/mainClass&gt;\n      &lt;/manifest&gt;\n    &lt;/archive&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>At this point the <code>jar</code> is actually executable with external classpath elements.</p>\n<pre><code>$ java -jar target/${project.build.finalName}.jar\n</code></pre>\n<h3>Make Deployable Archives</h3>\n<p>The <code>jar</code> file is only executable with the sibling <code>...lib/</code> directory. We need to make archives to deploy with the directory and its content.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;antrun-archive&lt;/id&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;run&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;target&gt;\n          &lt;property name=&quot;final.name&quot; value=&quot;${project.build.directory}/${project.build.finalName}&quot;/&gt;\n          &lt;property name=&quot;archive.includes&quot; value=&quot;${project.build.finalName}.${project.packaging} ${project.build.finalName}.lib/*&quot;/&gt;\n          &lt;property name=&quot;tar.destfile&quot; value=&quot;${final.name}.tar&quot;/&gt;\n          &lt;zip basedir=&quot;${project.build.directory}&quot; destfile=&quot;${final.name}.zip&quot; includes=&quot;${archive.includes}&quot; /&gt;\n          &lt;tar basedir=&quot;${project.build.directory}&quot; destfile=&quot;${tar.destfile}&quot; includes=&quot;${archive.includes}&quot; /&gt;\n          &lt;gzip src=&quot;${tar.destfile}&quot; destfile=&quot;${tar.destfile}.gz&quot; /&gt;\n          &lt;bzip2 src=&quot;${tar.destfile}&quot; destfile=&quot;${tar.destfile}.bz2&quot; /&gt;\n        &lt;/target&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Now you have <code>target/${project.build.finalName}.(zip|tar|tar.bz2|tar.gz)</code> which each contains the <code>jar</code> and <code>lib/*</code>.</p>\n<hr />\n<h2>Apache Maven Assembly Plugin</h2>\n<ul>\n<li>Pros</li>\n<li>Cons\n<ul>\n<li>No class relocation support (use maven-shade-plugin if class relocation is needed).</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;phase&gt;package&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;single&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;mainClass&gt;${fully.qualified.main.class}&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>You have <code>target/${project.bulid.finalName}-jar-with-dependencies.jar</code>.</p>\n<hr />\n<h2>Apache Maven Shade Plugin</h2>\n<ul>\n<li>Pros</li>\n<li>Cons</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;shade&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n        &lt;transformers&gt;\n          &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n            &lt;mainClass&gt;${fully.qualified.main.class}&lt;/mainClass&gt;\n          &lt;/transformer&gt;\n        &lt;/transformers&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>You have <code>target/${project.build.finalName}-shaded.jar</code>.</p>\n<hr />\n<h2>onejar-maven-plugin</h2>\n<ul>\n<li>Pros</li>\n<li>Cons\n<ul>\n<li>Not actively supported since 2012.</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;!--groupId&gt;org.dstovall&lt;/groupId--&gt; &lt;!-- not available on the central --&gt;\n  &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n  &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;configuration&gt;\n        &lt;mainClass&gt;${fully.qualified.main.class}&lt;/mainClass&gt;\n        &lt;attachToBuild&gt;true&lt;/attachToBuild&gt;\n        &lt;!-- https://code.google.com/p/onejar-maven-plugin/issues/detail?id=8 --&gt;\n        &lt;!--classifier&gt;onejar&lt;/classifier--&gt;\n        &lt;filename&gt;${project.build.finalName}-onejar.${project.packaging}&lt;/filename&gt;\n      &lt;/configuration&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;one-jar&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<hr />\n<h2>Spring Boot Maven Plugin</h2>\n<ul>\n<li>Pros</li>\n<li>Cons\n<ul>\n<li>Add potential unecessary Spring and Spring Boot related classes.</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;repackage&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;classifier&gt;spring-boot&lt;/classifier&gt;\n        &lt;mainClass&gt;${fully.qualified.main.class}&lt;/mainClass&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>You have <code>target/${project.bulid.finalName}-spring-boot.jar</code>.</p>\n"},{"owner":{"reputation":1341,"user_id":2289765,"user_type":"registered","accept_rate":72,"profile_image":"https://www.gravatar.com/avatar/508912e7551ed0d5df1a7c76042af1b4?s=128&d=identicon&r=PG","display_name":"Rocky Inde","link":"https://stackoverflow.com/users/2289765/rocky-inde"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1412979078,"creation_date":1412979078,"answer_id":26308794,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>I tried the most up-voted answer here, and was able to get the jar runnable. But the program didn't run correctly. I do not know what the reason was. When I try to run from <code>Eclipse</code>, I get a different result but when I run the jar from command-line I get a different result (it crashes with a program-specific runtime error).</p>\n\n<p>I had a similar requirement as the OP just that I had too many (Maven) dependencies for my project. Fortunately, the only solution that worked for me was that using <code>Eclipse</code>. Very simple and very straightforward. This is not a solution to the OP but is a solution for someone who has a similar requirement but with many Maven dependencies,</p>\n\n<p>1) Just right-click on your project folder (in Eclipse) and select <code>Export</code></p>\n\n<p>2) Then select <code>Java</code> -> <code>Runnable Jar</code></p>\n\n<p>3) You will be asked to choose the location of the jar file</p>\n\n<p>4) Finally, select the class that has the Main method that you want to run and choose <code>Package dependencies with the Jar file</code> and click <code>Finish</code></p>\n"},{"comments":[{"owner":{"reputation":7927,"user_id":338249,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a660dd7e94731072e5543e7b6da75321?s=128&d=identicon&r=PG","display_name":"rjdkolb","link":"https://stackoverflow.com/users/338249/rjdkolb"},"edited":false,"score":2,"creation_date":1446461148,"post_id":28490744,"comment_id":54736705,"content_license":"CC BY-SA 3.0","body":"Try opening the Maven project you created with Netbeans. The basic rule of Netbeans is always create a Maven project and never a &#39;Java application&#39; The add a maven-shade-plugin like one of the answers. Works like a charm."}],"owner":{"reputation":931,"user_id":2556114,"user_type":"registered","accept_rate":8,"profile_image":"https://www.gravatar.com/avatar/7daa9fe1470ca721d33dcc48fa40b93c?s=128&d=identicon&r=PG","display_name":"mycowan","link":"https://stackoverflow.com/users/2556114/mycowan"},"comment_count":1,"is_accepted":false,"score":-2,"last_activity_date":1455354737,"last_edit_date":1455354737,"creation_date":1423788716,"answer_id":28490744,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>Okay, so this is my solution. I know it's not using the pom.xml file. But I had the problem my programmme compiling and running on Netbeans but it failing when I tried Java -jar MyJarFile.jar. Now, I don't fully understand Maven and I think this why was having trouble getting Netbeans 8.0.2 to include my jar file in a library to put them into a jar file. I was thinking about how I used to use jar files with no Maven in Eclipse. </p>\n\n<p>It's Maven that can compile all the dependanices and plugins. Not Netbeans. (If you can get Netbeans and be able to use java .jar to do this please tell me how (^.^)v )</p>\n\n<p>[Solved - for Linux] by opening a terminal. </p>\n\n<p>Then</p>\n\n<pre><code>cd /MyRootDirectoryForMyProject\n</code></pre>\n\n<p>Next</p>\n\n<pre><code>mvn org.apache.maven.plugins:maven-compiler-plugin:compile\n</code></pre>\n\n<p>Next</p>\n\n<pre><code>mvn install\n</code></pre>\n\n<p>This will create jar file in the target directory.</p>\n\n<pre><code>MyJarFile-1.0-jar-with-dependencies.jar\n</code></pre>\n\n<p>Now</p>\n\n<pre><code>cd target\n</code></pre>\n\n<p>(You may need to run: <code>chmod +x MyJarFile-1.0-jar-with-dependencies.jar</code>)</p>\n\n<p>And finally</p>\n\n<pre><code>java -jar MyJarFile-1.0-jar-with-dependencies.jar\n</code></pre>\n\n<p>Please see </p>\n\n<p><a href=\"https://cwiki.apache.org/confluence/display/MAVEN/LifecyclePhaseNotFoundException\" rel=\"nofollow\">https://cwiki.apache.org/confluence/display/MAVEN/LifecyclePhaseNotFoundException</a></p>\n\n<p>I'll post this solution in on a couple of other pages with a similar problem. Hopefully I can save somebody from a week of frustration.</p>\n"},{"owner":{"reputation":7195,"user_id":3233398,"user_type":"registered","accept_rate":9,"profile_image":"https://www.gravatar.com/avatar/c2ab25926e68d6897da205117b1fe9fd?s=128&d=identicon&r=PG","display_name":"EliuX","link":"https://stackoverflow.com/users/3233398/eliux"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1443633768,"last_edit_date":1443633768,"creation_date":1425939770,"answer_id":28952832,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>This is the best way i found:</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.4&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;archive&gt;\n        &lt;manifest&gt;\n        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n        &lt;mainClass&gt;com.myDomain.etc.MainClassName&lt;/mainClass&gt;\n        &lt;classpathPrefix&gt;dependency-jars/&lt;/classpathPrefix&gt;\n        &lt;/manifest&gt;\n      &lt;/archive&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.5.1&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;copy-dependencies&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;outputDirectory&gt;\n               ${project.build.directory}/dependency-jars/\n            &lt;/outputDirectory&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>With this configuration, all dependencies will be located in <code>/dependency-jars</code>. My application has no <code>Main</code> class, just context ones, but one of my dependencies do have a <code>Main</code> class (<code>com.myDomain.etc.MainClassName</code>) that starts the JMX server, and receives a <code>start</code> or a <code>stop</code> parameter. So with this i was able to start my application like this:</p>\n\n<pre><code>java -jar ./lib/TestApp-1.0-SNAPSHOT.jar start\n</code></pre>\n\n<p>I wait it be useful for you all.</p>\n"},{"owner":{"reputation":96,"user_id":911617,"user_type":"registered","profile_image":"https://i.stack.imgur.com/gJgwY.jpg?s=128&g=1","display_name":"Jan Ziegler","link":"https://stackoverflow.com/users/911617/jan-ziegler"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1432740115,"creation_date":1432740115,"answer_id":30486689,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>This blog post shows another approach with combining the maven-jar and maven-assembly plugins. With the assembly configuration xml from the blog post it can also be controlled if dependencies will be expanded or just be collected in a folder and referenced by a classpath entry in the manifest:</p>\n\n<blockquote>\n  <p>The ideal solution is to include the jars in a lib folder and the manifest.mf file of the main jar include all the jars in classpath.</p>\n</blockquote>\n\n<p>And exactly that one is described here: <a href=\"https://caffebig.wordpress.com/2013/04/05/executable-jar-file-with-dependent-jars-using-maven/\" rel=\"nofollow\">https://caffebig.wordpress.com/2013/04/05/executable-jar-file-with-dependent-jars-using-maven/</a></p>\n"},{"owner":{"reputation":657,"user_id":2390974,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/GNH1d.jpg?s=128&g=1","display_name":"dsutherland","link":"https://stackoverflow.com/users/2390974/dsutherland"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1448316279,"last_edit_date":1448316279,"creation_date":1448310535,"answer_id":33880083,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>I went through every one of these responses looking to make a fat executable jar containing all dependencies and none of them worked right.  The answer is the shade plugin, its very easy and straightforward.</p>\n\n<pre><code>    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.3&lt;/version&gt;\n      &lt;executions&gt;\n         &lt;!-- Run shade goal on package phase --&gt;\n        &lt;execution&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;shade&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;transformers&gt;\n             &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                &lt;mainClass&gt;path.to.MainClass&lt;/mainClass&gt;\n             &lt;/transformer&gt;\n          &lt;/transformers&gt;\n        &lt;/configuration&gt;\n          &lt;/execution&gt;\n      &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n\n<p>Be aware that your dependencies need to have a scope of compile or runtime for this to work properly.</p>\n\n<p><a href=\"http://www.mkyong.com/maven/create-a-fat-jar-file-maven-shade-plugin/\" rel=\"noreferrer\">This example came from mkyong.com</a></p>\n"},{"owner":{"reputation":1183,"user_id":3375762,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/P0MrP.jpg?s=128&g=1","display_name":"salmanbw","link":"https://stackoverflow.com/users/3375762/salmanbw"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1448448027,"creation_date":1448448027,"answer_id":33914333,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>This could also be an option,You will be able to build your jar file</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;!-- Build an executable JAR --&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                        &lt;mainClass&gt;WordListDriver&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"owner":{"reputation":415,"user_id":1077748,"user_type":"registered","accept_rate":76,"profile_image":"https://www.gravatar.com/avatar/fe1a3f1853e3abeb3d155f3bee8e217c?s=128&d=identicon&r=PG","display_name":"Fabio","link":"https://stackoverflow.com/users/1077748/fabio"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1456337521,"creation_date":1456337521,"answer_id":35609830,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>I compared the tree plugins mentioned in this post. I generated 2 jars and a directory with all the jars. I compared the results and definitely the maven-shade-plugin is the best. My challenge was that I have multiple spring resources that needed to be merged, as well as jax-rs, and JDBC services. They were all merged properly by the shade plugin in comparison with the maven-assembly-plugin. In which case the spring will fail unless you copy them to your own resources folder and merge them manually one time. Both plugins output the correct dependency tree. I had multiple scopes like test,provide, compile, etc the test and provided were skipped by both plugins. They both produced the same manifest but I was able to consolidate licenses with the shade plugin using their transformer.\nWith the maven-dependency-plugin of course you don't have those problems because the jars are not extracted. But like some other have pointed you need to carry one extra file(s) to work properly.\nHere is a snip of the pom.xml</p>\n\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy-dependencies&lt;/id&gt;\n                    &lt;phase&gt;prepare-package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                        &lt;includeScope&gt;compile&lt;/includeScope&gt;\n                        &lt;excludeTransitive&gt;true&lt;/excludeTransitive&gt;\n                        &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                        &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                        &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;mainClass&gt;com.rbccm.itf.cdd.poller.landingzone.LandingZonePoller&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-my-jar-with-dependencies&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;shadedArtifactAttached&gt;false&lt;/shadedArtifactAttached&gt;\n                &lt;keepDependenciesWithProvidedScope&gt;false&lt;/keepDependenciesWithProvidedScope&gt;\n                &lt;transformers&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                        &lt;resource&gt;META-INF/services/javax.ws.rs.ext.Providers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                        &lt;resource&gt;META-INF/spring.factories&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                        &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                        &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                        &lt;resource&gt;META-INF/spring.tooling&lt;/resource&gt;\n                    &lt;/transformer&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"/&gt;\n                    &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ApacheLicenseResourceTransformer\"&gt;\n                    &lt;/transformer&gt;\n                &lt;/transformers&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"owner":{"reputation":1112,"user_id":1332486,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/58d306dcd2bc83379aab647ee098fe06?s=128&d=identicon&r=PG","display_name":"Paul Bormans","link":"https://stackoverflow.com/users/1332486/paul-bormans"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1466261417,"last_edit_date":1466261417,"creation_date":1462262952,"answer_id":36998853,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>For anyone looking for options to exclude specific dependencies from the uber-jar, this is a solution that worked for me:</p>\n\n<pre><code>&lt;project...&gt;\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.11&lt;/artifactId&gt;\n            &lt;version&gt;1.6.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt; &lt;=============\n        &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;...&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;make-assembly&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>So it's not a configuration of the mvn-assembly-plugin but a property of the dependency.</p>\n"},{"owner":{"reputation":359,"user_id":6698976,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/458a953846aa0f3593d20a4388e1fc4f?s=128&d=identicon&r=PG","display_name":"Anoop Rai","link":"https://stackoverflow.com/users/6698976/anoop-rai"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1472725312,"creation_date":1472725312,"answer_id":39268946,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>To resolve this issue we will use Maven Assembly Plugin that will create the JAR together with its dependency JARs into a single executable JAR file. Just add below plugin configuration in your pom.xml file.</p>\n\n<pre><code>&lt;build&gt;\n   &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n               &lt;archive&gt;\n                  &lt;manifest&gt;\n                     &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                     &lt;mainClass&gt;com.your.package.MainClass&lt;/mainClass&gt;\n                  &lt;/manifest&gt;\n               &lt;/archive&gt;\n               &lt;descriptorRefs&gt;\n                  &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n               &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n               &lt;execution&gt;\n                  &lt;id&gt;make-my-jar-with-dependencies&lt;/id&gt;\n                  &lt;phase&gt;package&lt;/phase&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;single&lt;/goal&gt;\n                  &lt;/goals&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>After doing this donât forget to run MAVEN tool with this command mvn clean compile assembly:single</p>\n\n<p><a href=\"http://jkoder.com/maven-creating-a-jar-together-with-its-dependency-jars-into-a-single-executable-jar-file/\" rel=\"noreferrer\">http://jkoder.com/maven-creating-a-jar-together-with-its-dependency-jars-into-a-single-executable-jar-file/</a></p>\n"},{"owner":{"reputation":26593,"user_id":432903,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/YCgsh.jpg?s=128&g=1","display_name":"prayagupd","link":"https://stackoverflow.com/users/432903/prayagupd"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1475191624,"creation_date":1475191624,"answer_id":39781522,"question_id":574594,"content_license":"CC BY-SA 3.0","body":"<p>There are millions of answers already, I wanted to add you don't need <code>&lt;mainClass&gt;</code> if you don't need to add entryPoint to your application. <strong>For example APIs may not have necessarily have <code>main</code> method.</strong></p>\n\n<h2>maven plugin config</h2>\n\n<pre><code>  &lt;build&gt;\n    &lt;finalName&gt;log-enrichment&lt;/finalName&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n\n<h2>build</h2>\n\n<pre><code>mvn clean compile assembly:single\n</code></pre>\n\n<h2>verify</h2>\n\n<pre><code>ll target/\ntotal 35100\ndrwxrwx--- 1 root vboxsf     4096 Sep 29 16:25 ./\ndrwxrwx--- 1 root vboxsf     4096 Sep 29 16:25 ../\ndrwxrwx--- 1 root vboxsf        0 Sep 29 16:08 archive-tmp/\ndrwxrwx--- 1 root vboxsf        0 Sep 29 16:25 classes/\ndrwxrwx--- 1 root vboxsf        0 Sep 29 16:25 generated-sources/\ndrwxrwx--- 1 root vboxsf        0 Sep 29 16:25 generated-test-sources/\n-rwxrwx--- 1 root vboxsf 35929841 Sep 29 16:10 log-enrichment-jar-with-dependencies.jar*\ndrwxrwx--- 1 root vboxsf        0 Sep 29 16:08 maven-status/\n</code></pre>\n"},{"owner":{"reputation":2687,"user_id":470517,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/gWEdm.jpg?s=128&g=1","display_name":"Aydin K.","link":"https://stackoverflow.com/users/470517/aydin-k"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1541575029,"last_edit_date":1541575029,"creation_date":1498073738,"answer_id":44684869,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>Add to pom.xml:</p>\n\n<pre><code>  &lt;dependency&gt;\n            &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n            &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.4.4&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;plugin&gt;\n       &lt;groupId&gt;com.jolira&lt;/groupId&gt;\n       &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n       &lt;version&gt;1.4.4&lt;/version&gt;\n       &lt;executions&gt;\n              &lt;execution&gt;\n                     &lt;goals&gt;\n                         &lt;goal&gt;one-jar&lt;/goal&gt;\n                     &lt;/goals&gt;\n              &lt;/execution&gt;\n       &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Thats it. Next mvn package will also create one fat jar additionally, including all dependency jars.</p>\n"},{"owner":{"reputation":1545,"user_id":3088897,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/nLj69.jpg?s=128&g=1","display_name":"Minisha","link":"https://stackoverflow.com/users/3088897/minisha"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1562738866,"last_edit_date":1562738866,"creation_date":1508979471,"answer_id":46944196,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>You can use maven-shade plugin to build a uber jar like below</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1949,"user_id":4178262,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-MVZ9ZR1BFos/AAAAAAAAAAI/AAAAAAAAAAA/aEP8yOumPbw/photo.jpg?sz=128","display_name":"Mark Stewart","link":"https://stackoverflow.com/users/4178262/mark-stewart"},"edited":false,"score":1,"creation_date":1556892610,"post_id":54934796,"comment_id":98593785,"content_license":"CC BY-SA 4.0","body":"Need a little bit more explanation of this; are those comments just documentation, or does there need to be additional options need to be placed at those comments&#39; locations?"}],"owner":{"reputation":51,"user_id":10344261,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-USMHPAw6Xm4/AAAAAAAAAAI/AAAAAAAAAEY/G7bPI-D4KP0/photo.jpg?sz=128","display_name":"Shang Gao","link":"https://stackoverflow.com/users/10344261/shang-gao"},"comment_count":1,"is_accepted":false,"score":0,"last_activity_date":1551390459,"creation_date":1551390459,"answer_id":54934796,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.4.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;!-- get all project dependencies --&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                    &lt;!-- bind to the packaging phase --&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"owner":{"reputation":438,"user_id":5754238,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2c904324232f30ce9c2997ecf9aaf6a8?s=128&d=identicon&r=PG&f=1","display_name":"uwevil","link":"https://stackoverflow.com/users/5754238/uwevil"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1593088411,"creation_date":1593088411,"answer_id":62575445,"question_id":574594,"content_license":"CC BY-SA 4.0","body":"<p>I hope my experience can help somebody: I want to migrate my app Spring (using cas client) to Spring Boot (1.5 not 2.4 yet). I stucked with many problem like :</p>\n<blockquote>\n<p>no main manifest attribute, in target/cas-client-web.jar</p>\n</blockquote>\n<p>I want to make one unique jar with all dependencies. After some days in searching on the Internet. I can do my job with theses lines :</p>\n<pre><code>         &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;fork&gt;true&lt;/fork&gt;\n                &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;repackage&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                        &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>with <em>start-class</em> is your main class</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;start-class&gt;com.test.Application&lt;/start-class&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>And my <em>Application</em> is like :</p>\n<pre><code>package com.test;\n\nimport java.util.Arrays;\n\nimport com.test.TestProperties;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\n\n\n@SpringBootApplication\n@EnableAutoConfiguration\n@EnableConfigurationProperties({TestProperties.class})\npublic class Application {\n\npublic static void main(String[] args) {\n    SpringApplication.run(Application.class, args);\n}\n\n@Bean\npublic CommandLineRunner commandLineRunner(ApplicationContext ctx) {\n    return args -&gt; {\n\n        System.out.println(&quot;Let's inspect the beans provided by Spring Boot:&quot;);\n\n        String[] beanNames = ctx.getBeanDefinitionNames();\n        Arrays.sort(beanNames);\n        for (String beanName : beanNames) {\n            System.out.println(beanName);\n        }\n\n    };\n}\n\n}\n</code></pre>\n"}],"owner":{"reputation":26116,"user_id":67219,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0f3cc17431211a37e6d52154fef3f710?s=128&d=identicon&r=PG","display_name":"soemirno","link":"https://stackoverflow.com/users/67219/soemirno"},"comment_count":4,"is_answered":true,"view_count":1454507,"protected_date":1302806041,"accepted_answer_id":574650,"answer_count":31,"score":2557,"last_activity_date":1612779801,"creation_date":1235292225,"last_edit_date":1527731979,"question_id":574594,"link":"https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven","title":"How can I create an executable JAR with dependencies using Maven?","body":"<p>I want to package my project in a single executable JAR for distribution.</p>\n\n<p>How can I make a Maven project package all dependency JARs into my output JAR?</p>\n"},{"tags":["java","android","android-networking","networkonmainthread"],"comments":[{"owner":{"reputation":1031,"user_id":1357390,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1d8e5e3a2133ed88992dcbf571435be6?s=128&d=identicon&r=PG","display_name":"Adrian Monk","link":"https://stackoverflow.com/users/1357390/adrian-monk"},"edited":false,"score":132,"creation_date":1344343126,"post_id":6343166,"comment_id":15753428,"content_license":"CC BY-SA 3.0","body":"<a href=\"http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html\" rel=\"nofollow noreferrer\"><b>Read this blog post</b></a> on the NetworkOnMainThreadException for more information. It explains why this occurs on Android 3.0 and above."},{"owner":{"reputation":498,"user_id":1542237,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/e7bbd815136df3c4f7b8291544694940?s=128&d=identicon&r=PG","display_name":"Anuj Sharma","link":"https://stackoverflow.com/users/1542237/anuj-sharma"},"edited":false,"score":6,"creation_date":1390459151,"post_id":6343166,"comment_id":32102445,"content_license":"CC BY-SA 3.0","body":"To be on rite track first read about the Network Requests in android then i would recommend to study &quot;Volley&quot;."},{"owner":{"reputation":36678,"user_id":693752,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/1f9cd9b9bad9aa6115a1ed72433c180d?s=128&d=identicon&r=PG","display_name":"Snicolas","link":"https://stackoverflow.com/users/693752/snicolas"},"edited":false,"score":3,"creation_date":1392159324,"post_id":6343166,"comment_id":32836328,"content_license":"CC BY-SA 3.0","body":"There are many alternative libraries that solve this issue. Many are listed <a href=\"https://github.com/octo-online/robospice/blob/release/README.md#alternatives-to-robospice-\" rel=\"nofollow noreferrer\">at the bottom of this page</a>. If you got more, we take them :)"},{"owner":{"reputation":6069,"user_id":2915785,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/JkoNf.png?s=128&g=1","display_name":"Naveed Ahmad","link":"https://stackoverflow.com/users/2915785/naveed-ahmad"},"edited":false,"score":0,"creation_date":1414701858,"post_id":6343166,"comment_id":41927758,"content_license":"CC BY-SA 3.0","body":"You need to run internet activities on a thread separate from main (UI) thread"},{"owner":{"reputation":2984,"user_id":141437,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/8da873d447f6682ea907bbf83e8fcb36?s=128&d=identicon&r=PG","display_name":"Jay","link":"https://stackoverflow.com/users/141437/jay"},"edited":false,"score":0,"creation_date":1511131878,"post_id":6343166,"comment_id":81718447,"content_license":"CC BY-SA 3.0","body":"&quot;Due to a bug in previous versions of Android, the system did not flag writing to a TCP socket on the main thread as a strict-mode violation. Android 7.0 fixes this bug. Apps that exhibit this behavior now throw an android.os.NetworkOnMainThreadException.&quot; - So some of us haven&#39;t hit this until recently!  <a href=\"https://developer.android.com/about/versions/nougat/android-7.0-changes.html\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/nougat/&hellip;</a>"}],"answers":[{"owner":{"reputation":21444,"user_id":694378,"user_type":"registered","profile_image":"https://i.stack.imgur.com/hlX0K.png?s=128&g=1","display_name":"Mark Allison","link":"https://stackoverflow.com/users/694378/mark-allison"},"comment_count":0,"is_accepted":false,"score":149,"last_activity_date":1391963122,"last_edit_date":1391963122,"creation_date":1308053271,"answer_id":6343230,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You cannot perform network <a href=\"http://en.wikipedia.org/wiki/Input/output\" rel=\"noreferrer\">I/O</a> on the UI thread on <a href=\"https://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29\" rel=\"noreferrer\">Honeycomb</a>. Technically, it <em>is</em> possible on earlier versions of Android, but it is a really bad idea as it will cause your app to stop responding, and can result in the OS killing your app for being badly behaved. You'll need to run a background process or use AsyncTask to perform your network transaction on a background thread.</p>\n\n<p>There is an article about <a href=\"http://android-developers.blogspot.com/2009/05/painless-threading.html\" rel=\"noreferrer\">Painless Threading</a> on the Android developer site which is a good introduction to this, and it will provide you with a much better depth of an answer than can be realistically provided here.</p>\n"},{"owner":{"reputation":34713,"user_id":398309,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/be7a307aae139b8e2b80d91237d20356?s=128&d=identicon&r=PG","display_name":"Michael Spector","link":"https://stackoverflow.com/users/398309/michael-spector"},"comment_count":0,"is_accepted":true,"score":2605,"last_activity_date":1602140564,"last_edit_date":1602140564,"creation_date":1308053705,"answer_id":6343299,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p><strong>NOTE : AsyncTask was deprecated in API level 30.<br />\n<a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"noreferrer\">https://developer.android.com/reference/android/os/AsyncTask</a></strong></p>\n<p>This exception is thrown when an application attempts to perform a networking operation on its main thread. Run your code in <a href=\"http://developer.android.com/reference/android/os/AsyncTask.html\" rel=\"noreferrer\"><code>AsyncTask</code></a>:</p>\n<pre><code>class RetrieveFeedTask extends AsyncTask&lt;String, Void, RSSFeed&gt; {\n\n    private Exception exception;\n\n    protected RSSFeed doInBackground(String... urls) {\n        try {\n            URL url = new URL(urls[0]);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser parser = factory.newSAXParser();\n            XMLReader xmlreader = parser.getXMLReader();\n            RssHandler theRSSHandler = new RssHandler();\n            xmlreader.setContentHandler(theRSSHandler);\n            InputSource is = new InputSource(url.openStream());\n            xmlreader.parse(is);\n\n            return theRSSHandler.getFeed();\n        } catch (Exception e) {\n            this.exception = e;\n\n            return null;\n        } finally {\n            is.close();\n        }\n    }\n\n    protected void onPostExecute(RSSFeed feed) {\n        // TODO: check this.exception\n        // TODO: do something with the feed\n    }\n}\n</code></pre>\n<p>How to execute the task:</p>\n<p>In <code>MainActivity.java</code> file you can add this line within your <code>oncreate()</code> method</p>\n<pre><code>new RetrieveFeedTask().execute(urlToRssFeed);\n</code></pre>\n<p>Don't forget to add this to <code>AndroidManifest.xml</code> file:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n</code></pre>\n"},{"owner":{"reputation":8411,"user_id":1169115,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1143fd841010526e2fb11dd38a819de6?s=128&d=identicon&r=PG","display_name":"user1169115","link":"https://stackoverflow.com/users/1169115/user1169115"},"comment_count":0,"is_accepted":false,"score":717,"last_activity_date":1518358729,"last_edit_date":1518358729,"creation_date":1329289190,"answer_id":9289190,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p><strong>You should almost always run network operations on a thread or as an asynchronous task.</strong></p>\n\n<p>But it <em>is</em> possible to remove this restriction and you override the default behavior, if you are willing to accept the consequences.</p>\n\n<p>Add:</p>\n\n<pre><code>StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n\nStrictMode.setThreadPolicy(policy); \n</code></pre>\n\n<p>In your class,</p>\n\n<p>and</p>\n\n<p>ADD this permission in android manifest.xml file: Â  Â </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n\n<p>Consequences:</p>\n\n<p>Your app will (in areas of spotty internet connection) become unresponsive and lock up, the user perceives slowness and has to do a force kill, and you risk the activity manager killing your app and telling the user that the app has stopped.</p>\n\n<p>Android has some good tips on good programming practices to design for responsiveness:\n<a href=\"http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\" rel=\"noreferrer\">http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html</a></p>\n"},{"comments":[{"owner":{"reputation":1311,"user_id":878106,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5ac7Q.jpg?s=128&g=1","display_name":"Muhammad Mubashir","link":"https://stackoverflow.com/users/878106/muhammad-mubashir"},"edited":false,"score":2,"creation_date":1367839430,"post_id":13044412,"comment_id":23505245,"content_license":"CC BY-SA 3.0","body":"Yes ANR error would be come. means App not responding with in 5 sec."},{"owner":{"reputation":16168,"user_id":603270,"user_type":"registered","accept_rate":98,"profile_image":"https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG","display_name":"shkschneider","link":"https://stackoverflow.com/users/603270/shkschneider"},"edited":false,"score":13,"creation_date":1377788485,"post_id":13044412,"comment_id":27224060,"content_license":"CC BY-SA 3.0","body":"This is a really bad answer. You should not change the thread&#39;s policy but to write better code: do not make network operations on main thread!"},{"owner":{"reputation":1033,"user_id":3470479,"user_type":"registered","profile_image":"https://graph.facebook.com/100002931125658/picture?type=large","display_name":"Prakhar1001","link":"https://stackoverflow.com/users/3470479/prakhar1001"},"edited":false,"score":0,"creation_date":1473948361,"post_id":13044412,"comment_id":66342186,"content_license":"CC BY-SA 3.0","body":"@Sandeep You and other viewers should read this too. <a href=\"http://stackoverflow.com/a/18335031/3470479\">stackoverflow.com/a/18335031/3470479</a>"}],"owner":{"reputation":4042,"user_id":1029089,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/67fa77173dda3fd89d4124da7bc6873d?s=128&d=identicon&r=PG","display_name":"Piyush-Ask Any Difference","link":"https://stackoverflow.com/users/1029089/piyush-ask-any-difference"},"comment_count":3,"is_accepted":false,"score":72,"last_activity_date":1586329170,"last_edit_date":1586329170,"creation_date":1351062603,"answer_id":13044412,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>You disable the strict mode using following code:</p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n    StrictMode.ThreadPolicy policy = \n        new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n}\n</code></pre>\n\n<p><strong>This is not recommended</strong>: use the <code>AsyncTask</code> interface.</p>\n\n<p><a href=\"https://askanydifference.com/how-to-fix-android-os-networkonmainthreadexception/\" rel=\"noreferrer\">Full code for both the methods</a></p>\n"},{"comments":[{"owner":{"reputation":140,"user_id":1781157,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/72d398d3ca3ab886a9b6d35546294627?s=128&d=identicon&r=PG","display_name":"Richi Gonz&#225;lez","link":"https://stackoverflow.com/users/1781157/richi-gonz%c3%a1lez"},"edited":false,"score":10,"creation_date":1369727238,"post_id":13136668,"comment_id":24189011,"content_license":"CC BY-SA 3.0","body":"Following your second solution is a bad practice. Async is the way to do it <i>correctly</i>. You are like hiding your problem if you change the policy!"}],"owner":{"reputation":21381,"user_id":1466188,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/a070e78946e97428453fa3b797c678ae?s=128&d=identicon&r=PG","display_name":"Dipak Keshariya","link":"https://stackoverflow.com/users/1466188/dipak-keshariya"},"comment_count":1,"is_accepted":false,"score":122,"last_activity_date":1351591937,"last_edit_date":1351591937,"creation_date":1351591592,"answer_id":13136668,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>There are two Solution of this Problem.</p>\n\n<p>1) Don't write network call in Main UI Thread, Use Async Task for that.</p>\n\n<p>2) Write below code into your MainActivity file after setContentView(R.layout.activity_main);</p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n}\n</code></pre>\n\n<p>And below import statement into your java file.</p>\n\n<pre><code>import android.os.StrictMode;\n</code></pre>\n"},{"owner":{"reputation":5501,"user_id":1099990,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sPaVW.jpg?s=128&g=1","display_name":"Dr.Luiji","link":"https://stackoverflow.com/users/1099990/dr-luiji"},"comment_count":0,"is_accepted":false,"score":460,"last_activity_date":1475660544,"last_edit_date":1475660544,"creation_date":1358785895,"answer_id":14443056,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>I solved this problem using a new <code>Thread</code>.</p>\n\n<pre><code>Thread thread = new Thread(new Runnable() {\n\n    @Override\n    public void run() {\n        try  {\n            //Your code goes here\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\n\nthread.start(); \n</code></pre>\n"},{"owner":{"reputation":4074,"user_id":2559284,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/3f893b556d42b01e6de76195343ea25e?s=128&d=identicon&r=PG","display_name":"sivag1","link":"https://stackoverflow.com/users/2559284/sivag1"},"comment_count":0,"is_accepted":false,"score":43,"last_activity_date":1466629468,"last_edit_date":1495540049,"creation_date":1374173542,"answer_id":17731654,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>The top <a href=\"https://stackoverflow.com/questions/6343166/how-to-fix-android-os-networkonmainthreadexception/6343299#6343299\">answer of spektom</a> works perfect.</p>\n\n<p>If you are writing the <code>AsyncTask</code> inline and not extending as a class, and on top of this, if there is a need to get a response out of the <code>AsyncTask</code>, one can use the <code>get()</code> method as below.</p>\n\n<pre><code>RSSFeed feed = new RetreiveFeedTask().execute(urlToRssFeed).get();\n</code></pre>\n\n<p>(From his example.)</p>\n"},{"comments":[{"owner":{"reputation":7212,"user_id":473338,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/629f85340a6e54d11aae14d5b26bbbbe?s=128&d=identicon&r=PG","display_name":"Stevie","link":"https://stackoverflow.com/users/473338/stevie"},"edited":false,"score":8,"creation_date":1390379630,"post_id":18297581,"comment_id":32061459,"content_license":"CC BY-SA 3.0","body":"Perhaps worth stressing the point that if you use a Service you will still need to create a separate thread - Service callbacks run on the main thread. An IntentService, on the other hand, runs its onHandleIntent method on a background thread."},{"owner":{"reputation":211,"user_id":2535511,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6b7d5869b9aab61ee320f779db44b432?s=128&d=identicon&r=PG","display_name":"Dage","link":"https://stackoverflow.com/users/2535511/dage"},"edited":false,"score":0,"creation_date":1391510475,"post_id":18297581,"comment_id":32544146,"content_license":"CC BY-SA 3.0","body":"you should not use an AsyncTask for long running operations! Guidelines specify 2 to 3 seconds max."}],"owner":{"reputation":5783,"user_id":1645339,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/eecdecec53a6c9fddbcad6bf1dd99c21?s=128&d=identicon&r=PG","display_name":"venergiac","link":"https://stackoverflow.com/users/1645339/venergiac"},"comment_count":2,"is_accepted":false,"score":81,"last_activity_date":1466629559,"last_edit_date":1495542398,"creation_date":1376817528,"answer_id":18297581,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<ol>\n<li>Do not use strictMode (only in debug mode)</li>\n<li>Do not change SDK version</li>\n<li>Do not use a separate thread</li>\n</ol>\n\n<p>Use Service or AsyncTask</p>\n\n<p>See also Stack&nbsp;Overflow question:</p>\n\n<p><em><a href=\"https://stackoverflow.com/questions/18297485/i-get-an-android-os-networkonmainthreadexception-sending-an-email-from-android/18297516#18297516\">android.os.NetworkOnMainThreadException sending an email from Android</a></em></p>\n"},{"owner":{"reputation":531,"user_id":2447827,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8de1201f0e387ee197ec341cd44364d2?s=128&d=identicon&r=PG","display_name":"raihan ahmed","link":"https://stackoverflow.com/users/2447827/raihan-ahmed"},"comment_count":0,"is_accepted":false,"score":50,"last_activity_date":1391963250,"last_edit_date":1391963250,"creation_date":1378368994,"answer_id":18631130,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>This happens in Android 3.0 and above. From Android 3.0 and above, they have restricted using network operations (functions that access the Internet) from running in the main thread/UI thread (what spawns from your on create and on resume methods in the activity).</p>\n\n<p>This is to encourage using separate threads for network operations. See <a href=\"http://developer.android.com/reference/android/os/AsyncTask.html\">AsyncTask</a> for more details on how to perform network activities the right way.</p>\n"},{"comments":[{"owner":{"reputation":6465,"user_id":690952,"user_type":"registered","profile_image":"https://i.stack.imgur.com/B9WfV.png?s=128&g=1","display_name":"Selvin","link":"https://stackoverflow.com/users/690952/selvin"},"edited":false,"score":11,"creation_date":1379432169,"post_id":18849603,"comment_id":27818760,"content_license":"CC BY-SA 3.0","body":"Let me explain you what you are doing here: <code>NetworkOnMainThreadException</code> is the Guardian which is telling you: do not shoot at your own foot ... your solution is: let&#39;s go back to the past when there was no Guardian - now i can shoot at my foot freely"},{"owner":{"reputation":2040,"user_id":1308850,"user_type":"registered","accept_rate":37,"profile_image":"https://graph.facebook.com/100000712576206/picture?type=large","display_name":"FractalBob","link":"https://stackoverflow.com/users/1308850/fractalbob"},"edited":false,"score":1,"creation_date":1382729769,"post_id":18849603,"comment_id":29089237,"content_license":"CC BY-SA 3.0","body":"I took this approach, too, and didn&#39;t have any problems. Guardian is too fussy sometimes."}],"owner":{"reputation":1887,"user_id":1292736,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/47d17f7686caeefc7c5d502751488bb6?s=128&d=identicon&r=PG","display_name":"rharvey","link":"https://stackoverflow.com/users/1292736/rharvey"},"comment_count":2,"is_accepted":false,"score":28,"last_activity_date":1466629648,"last_edit_date":1466629648,"creation_date":1379420121,"answer_id":18849603,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>For me it was this:</p>\n\n<pre><code>&lt;uses-sdk\n        android:minSdkVersion=\"8\"\n        android:targetSdkVersion=\"10\" /&gt;\n</code></pre>\n\n<p>The device I was testing my app on was 4.1.2 which is SDK Version 16!</p>\n\n<p>Make the sure the target version is the same as your Android Target Library. If you are unsure what your target library is, right click your Project -> <em>Build Path</em> -> <em>Android</em>, and it should be the one that is ticked.</p>\n\n<p>Also, as others have mentioned, include the correct permissions to access the Internet:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n"},{"owner":{"reputation":3503,"user_id":1897334,"user_type":"registered","accept_rate":45,"profile_image":"https://i.stack.imgur.com/1H2y4.jpg?s=128&g=1","display_name":"henry4343","link":"https://stackoverflow.com/users/1897334/henry4343"},"comment_count":0,"is_accepted":false,"score":84,"last_activity_date":1473796195,"last_edit_date":1473796195,"creation_date":1387895588,"answer_id":20762621,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Do the network actions on another thread</p>\n\n<blockquote>\n  <p>For Example:</p>\n</blockquote>\n\n<pre><code>new Thread(new Runnable(){\n    @Override\n    public void run() {\n        // Do network action in this function\n    }\n}).start();\n</code></pre>\n\n<p>And add this to AndroidManifest.xml    </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n"},{"owner":{"reputation":5355,"user_id":1360732,"user_type":"registered","profile_image":"https://i.stack.imgur.com/NFzsy.jpg?s=128&g=1","display_name":"Kapil Vats","link":"https://stackoverflow.com/users/1360732/kapil-vats"},"comment_count":0,"is_accepted":false,"score":44,"last_activity_date":1391963381,"last_edit_date":1391963381,"creation_date":1388946518,"answer_id":20937422,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You should not do any time-consuming task on the main thread (UI thread), like any network operation, file I/O, or SQLite database operations. So for this kind of operation, you should create a worker thread, but the problem is that you can not directly perform any UI related operation from your worker thread. For that, you have to use <code>Handler</code> and pass the <code>Message</code>. </p>\n\n<p>To simplify all these things, Android provides various ways, like <code>AsyncTask</code>, <code>AsyncTaskLoader</code>, <code>CursorLoader</code> or <code>IntentService</code>. So you can use any of these according to your requirements.</p>\n"},{"comments":[{"owner":{"reputation":3048,"user_id":1429432,"user_type":"registered","accept_rate":68,"profile_image":"https://www.gravatar.com/avatar/d54fcc6f3d6d39688c69999f846e427a?s=128&d=identicon&r=PG","display_name":"Yousha Aleayoub","link":"https://stackoverflow.com/users/1429432/yousha-aleayoub"},"edited":false,"score":1,"creation_date":1457788704,"post_id":21107128,"comment_id":59571522,"content_license":"CC BY-SA 3.0","body":"Anonymous Runnable is NOT the best way, since it has an implicit reference to the enclosing class and preventing it from being GC ed until the thread completes! Also this thread will run at the Same Priority as the main/US thread, contending with lifecycle methods and UI frame rates!"}],"owner":{"reputation":1006,"user_id":3129443,"user_type":"registered","accept_rate":33,"profile_image":"https://www.gravatar.com/avatar/7201a07ae19dce89e13b4c3366720fad?s=128&d=identicon&r=PG&f=1","display_name":"Dhruv Jindal","link":"https://stackoverflow.com/users/3129443/dhruv-jindal"},"comment_count":1,"is_accepted":false,"score":60,"last_activity_date":1466629718,"last_edit_date":1466629718,"creation_date":1389680053,"answer_id":21107128,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Network-based operations cannot be run on the main thread. You need to run all network-based tasks on a child thread or implement AsyncTask.</p>\n\n<p>This is how you run a task in a child thread:</p>\n\n<pre><code>new Thread(new Runnable(){\n    @Override\n    public void run() {\n        try {\n            // Your implementation goes here\n        } \n        catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n</code></pre>\n"},{"owner":{"reputation":7212,"user_id":473338,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/629f85340a6e54d11aae14d5b26bbbbe?s=128&d=identicon&r=PG","display_name":"Stevie","link":"https://stackoverflow.com/users/473338/stevie"},"comment_count":0,"is_accepted":false,"score":181,"last_activity_date":1585137257,"last_edit_date":1585137257,"creation_date":1390396652,"answer_id":21284021,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p><strong>The accepted answer has some significant down-sides. It is not advisable to use AsyncTask for networking unless you <em>really</em> know what you are doing. Some of the down-sides include:</strong></p>\n\n<ul>\n<li>AsyncTask's created as non-static inner classes have an implicit reference to the enclosing Activity object, its context, and the entire View hierarchy created by that activity. This reference prevents the Activity from being garbage collected until the AsyncTask's background work completes. If the user's connection is slow, and/or the download is large, these short-term memory leaks can become a problem - for example, if the orientation changes several times (and you don't cancel the executing tasks), or the user navigates away from the Activity.</li>\n<li>AsyncTask has different execution characteristics depending on the platform it executes on: prior to API level 4 AsyncTasks execute serially on a single background thread; from API level 4 through API level 10, AsyncTasks execute on a pool of up to 128 threads; from API level 11 onwards AsyncTask executes serially on a single background thread (unless you use the overloaded <code>executeOnExecutor</code> method and supply an alternative executor). Code that works fine when running serially on ICS may break when executed concurrently on Gingerbread, say if you have inadvertent order-of-execution dependencies.</li>\n</ul>\n\n<p>If you want to avoid short-term memory leaks, have well-defined execution characteristics across all platforms, and have a base to build really robust network handling, you might want to consider:</p>\n\n<ol>\n<li>Using a library that does a nice job of this for you - there's a nice comparison of networking libs in <a href=\"https://stackoverflow.com/questions/16902716/comparison-of-android-networking-libraries-okhttp-retrofit-volley\">this question</a>, or</li>\n<li>Using a <code>Service</code> or <code>IntentService</code> instead, perhaps with a <code>PendingIntent</code> to return the result via the Activity's <code>onActivityResult</code> method.</li>\n</ol>\n\n<h2><em>IntentService approach</em></h2>\n\n<p>Down-sides:</p>\n\n<ul>\n<li>More code and complexity than <code>AsyncTask</code>, though not as much as you might think</li>\n<li>Will queue requests and run them on a <em>single</em> background thread. You can easily control this by replacing <code>IntentService</code> with an equivalent <code>Service</code> implementation, perhaps like <a href=\"https://github.com/steveliles/AsyncAndroid/blob/master/AsyncAndroid/src/main/java/com/packt/asyncandroid/chapter6/ConcurrentIntentService.java\" rel=\"noreferrer\">this one</a>.</li>\n<li>Um, I can't think of any others right now actually</li>\n</ul>\n\n<p>Up-sides:</p>\n\n<ul>\n<li>Avoids the short-term memory leak problem</li>\n<li>If your activity restarts while network operations are in-flight it can still receive the result of the download via its <code>onActivityResult</code> method</li>\n<li>Better platform than AsyncTask to build and re-use robust networking code. Example: if you need to do an important upload, you could do it from <code>AsyncTask</code> in an <code>Activity</code>, but if the user context-switches out of the app to take a phone call, the system <em>may</em> kill the app before the upload completes. It is <em>less likely</em> to kill an application with an active <code>Service</code>.</li>\n<li>If you use your own concurrent version of <code>IntentService</code> (like the one I linked above) you can control the level of concurrency via the <code>Executor</code>.</li>\n</ul>\n\n<h2><em>Implementation summary</em></h2>\n\n<p>You can implement an <code>IntentService</code> to perform downloads on a single background thread quite easily.</p>\n\n<p>Step 1: Create an <code>IntentService</code> to perform the download. You can tell it what to download via <code>Intent</code> extra's, and pass it a <code>PendingIntent</code> to use to return the result to the <code>Activity</code>:</p>\n\n<pre><code>import android.app.IntentService;\nimport android.app.PendingIntent;\nimport android.content.Intent;\nimport android.util.Log;\n\nimport java.io.InputStream;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\npublic class DownloadIntentService extends IntentService {\n\n    private static final String TAG = DownloadIntentService.class.getSimpleName();\n\n    public static final String PENDING_RESULT_EXTRA = \"pending_result\";\n    public static final String URL_EXTRA = \"url\";\n    public static final String RSS_RESULT_EXTRA = \"url\";\n\n    public static final int RESULT_CODE = 0;\n    public static final int INVALID_URL_CODE = 1;\n    public static final int ERROR_CODE = 2;\n\n    private IllustrativeRSSParser parser;\n\n    public DownloadIntentService() {\n        super(TAG);\n\n        // make one and re-use, in the case where more than one intent is queued\n        parser = new IllustrativeRSSParser();\n    }\n\n    @Override\n    protected void onHandleIntent(Intent intent) {\n        PendingIntent reply = intent.getParcelableExtra(PENDING_RESULT_EXTRA);\n        InputStream in = null;\n        try {\n            try {\n                URL url = new URL(intent.getStringExtra(URL_EXTRA));\n                IllustrativeRSS rss = parser.parse(in = url.openStream());\n\n                Intent result = new Intent();\n                result.putExtra(RSS_RESULT_EXTRA, rss);\n\n                reply.send(this, RESULT_CODE, result);\n            } catch (MalformedURLException exc) {\n                reply.send(INVALID_URL_CODE);\n            } catch (Exception exc) {\n                // could do better by treating the different sax/xml exceptions individually\n                reply.send(ERROR_CODE);\n            }\n        } catch (PendingIntent.CanceledException exc) {\n            Log.i(TAG, \"reply cancelled\", exc);\n        }\n    }\n}\n</code></pre>\n\n<p>Step 2: Register the service in the manifest:</p>\n\n<pre><code>&lt;service\n        android:name=\".DownloadIntentService\"\n        android:exported=\"false\"/&gt;\n</code></pre>\n\n<p>Step 3: Invoke the service from the Activity, passing a PendingResult object which the Service will use to return the result:</p>\n\n<pre><code>PendingIntent pendingResult = createPendingResult(\n    RSS_DOWNLOAD_REQUEST_CODE, new Intent(), 0);\nIntent intent = new Intent(getApplicationContext(), DownloadIntentService.class);\nintent.putExtra(DownloadIntentService.URL_EXTRA, URL);\nintent.putExtra(DownloadIntentService.PENDING_RESULT_EXTRA, pendingResult);\nstartService(intent);\n</code></pre>\n\n<p>Step 4: Handle the result in onActivityResult:</p>\n\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (requestCode == RSS_DOWNLOAD_REQUEST_CODE) {\n        switch (resultCode) {\n            case DownloadIntentService.INVALID_URL_CODE:\n                handleInvalidURL();\n                break;\n            case DownloadIntentService.ERROR_CODE:\n                handleError(data);\n                break;\n            case DownloadIntentService.RESULT_CODE:\n                handleRSS(data);\n                break;\n        }\n        handleRSS(data);\n    }\n    super.onActivityResult(requestCode, resultCode, data);\n}\n</code></pre>\n\n<p>A Github project containing a complete working Android-Studio/Gradle project is available <a href=\"https://github.com/steveliles/Android-Download-Service-Example\" rel=\"noreferrer\">here</a>.</p>\n"},{"owner":{"reputation":848,"user_id":1837505,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/vXYYa.jpg?s=128&g=1","display_name":"perry","link":"https://stackoverflow.com/users/1837505/perry"},"comment_count":0,"is_accepted":false,"score":32,"last_activity_date":1466629774,"last_edit_date":1466629774,"creation_date":1393309431,"answer_id":22006259,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>This is only thrown for applications targeting the <a href=\"http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29\" rel=\"noreferrer\">Honeycomb</a> SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads.</p>\n\n<p><a href=\"http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\" rel=\"noreferrer\">The error is the SDK warning!</a></p>\n"},{"owner":{"reputation":459,"user_id":3081554,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/Nh0OL.jpg?s=128&g=1","display_name":"dhiraj kakran","link":"https://stackoverflow.com/users/3081554/dhiraj-kakran"},"comment_count":0,"is_accepted":false,"score":26,"last_activity_date":1543838844,"last_edit_date":1543838844,"creation_date":1393681439,"answer_id":22115167,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p><strong>Use this in Your Activity</strong></p>\n\n<pre><code>    btnsub.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            new Thread(new Runnable() {\n\n                @Override\n                public void run() {\n                    // TODO Auto-generated method stub\n\n                    //Initialize soap request + add parameters\n                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);\n\n                    //Use this to add parameters\n                    request.addProperty(\"pincode\", txtpincode.getText().toString());\n                    request.addProperty(\"bg\", bloodgroup.getSelectedItem().toString());\n\n                    //Declare the version of the SOAP request\n                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n\n                    envelope.setOutputSoapObject(request);\n                    envelope.dotNet = true;\n\n                    try {\n                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\n\n                        //this is the actual part that will call the webservice\n                        androidHttpTransport.call(SOAP_ACTION1, envelope);\n\n                        // Get the SoapResult from the envelope body.\n                        SoapObject result = (SoapObject) envelope.getResponse();\n                        Log.e(\"result data\", \"data\" + result);\n                        SoapObject root = (SoapObject) result.getProperty(0);\n                        // SoapObject s_deals = (SoapObject) root.getProperty(0);\n                        // SoapObject s_deals_1 = (SoapObject) s_deals.getProperty(0);\n                        //\n\n                        System.out.println(\"********Count : \" + root.getPropertyCount());\n\n                        value = new ArrayList&lt;Detailinfo&gt;();\n\n                        for (int i = 0; i &lt; root.getPropertyCount(); i++) {\n                            SoapObject s_deals = (SoapObject) root.getProperty(i);\n                            Detailinfo info = new Detailinfo();\n\n                            info.setFirstName(s_deals.getProperty(\"Firstname\").toString());\n                            info.setLastName(s_deals.getProperty(\"Lastname\").toString());\n                            info.setDOB(s_deals.getProperty(\"DOB\").toString());\n                            info.setGender(s_deals.getProperty(\"Gender\").toString());\n                            info.setAddress(s_deals.getProperty(\"Address\").toString());\n                            info.setCity(s_deals.getProperty(\"City\").toString());\n                            info.setState(s_deals.getProperty(\"State\").toString());\n                            info.setPinecode(s_deals.getProperty(\"Pinecode\").toString());\n                            info.setMobile(s_deals.getProperty(\"Mobile\").toString());\n                            info.setEmail(s_deals.getProperty(\"Email\").toString());\n                            info.setBloodgroup(s_deals.getProperty(\"Bloodgroup\").toString());\n                            info.setAdddate(s_deals.getProperty(\"Adddate\").toString());\n                            info.setWaight(s_deals.getProperty(\"waight\").toString());\n                            value.add(info);\n                        }\n\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                    Intent intent = new Intent(getApplicationContext(), ComposeMail.class);\n                    //intent.putParcelableArrayListExtra(\"valuesList\", value);\n\n                    startActivity(intent);\n                }\n            }).start();\n        }\n    });\n</code></pre>\n"},{"comments":[{"owner":{"reputation":30102,"user_id":1367392,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/ddba466166e7ea3c4923d16f96cff1f7?s=128&d=identicon&r=PG&f=1","display_name":"Oleksiy","link":"https://stackoverflow.com/users/1367392/oleksiy"},"reply_to_user":{"reputation":17958,"user_id":661589,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG","display_name":"Gavriel","link":"https://stackoverflow.com/users/661589/gavriel"},"edited":false,"score":6,"creation_date":1439947833,"post_id":24175886,"comment_id":52066140,"content_license":"CC BY-SA 3.0","body":"@Gavriel it creates duplicates of everything you annotate, whether it&#39;s a method, activity, fragment, singleton etc, so there is twice as much code and it takes longer to compile it. It may also have some issues due to bugs in the library. Debugging and finding errors would become more difficult."}],"owner":{"reputation":30102,"user_id":1367392,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/ddba466166e7ea3c4923d16f96cff1f7?s=128&d=identicon&r=PG&f=1","display_name":"Oleksiy","link":"https://stackoverflow.com/users/1367392/oleksiy"},"comment_count":1,"is_accepted":false,"score":49,"last_activity_date":1430412371,"last_edit_date":1430412371,"creation_date":1402542654,"answer_id":24175886,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Using <a href=\"http://androidannotations.org/\" rel=\"noreferrer\">Android Annotations</a> is an option. It will allow you to simply run any method in a background thread:</p>\n\n<pre><code>// normal method\nprivate void normal() {\n    doSomething(); // do something in background\n}\n\n@Background\nprotected void doSomething() \n    // run your networking code here\n}\n</code></pre>\n\n<p>Note, that although it provides benefits of simplicity and readability, it has its disadvantages. </p>\n"},{"owner":{"reputation":4252,"user_id":1092746,"user_type":"registered","accept_rate":58,"profile_image":"https://www.gravatar.com/avatar/75214b33ad242fe56b4b8aaa6f379996?s=128&d=identicon&r=PG","display_name":"Novak","link":"https://stackoverflow.com/users/1092746/novak"},"comment_count":0,"is_accepted":false,"score":24,"last_activity_date":1403645573,"creation_date":1403645573,"answer_id":24396701,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Just to spell out something explicitly:</p>\n\n<p>The main thread is basically the UI thread.</p>\n\n<p>So saying that you cannot do networking operations in the main thread means you cannot do networking operations in the UI thread, which means <em>you cannot do networking operations in a <code>*runOnUiThread(new Runnable() { ... }*</code> block</em> inside some other thread, either.</p>\n\n<p>(I just had a long head-scratching moment trying to figure out why I was getting that error somewhere other than my main thread.  This was why; this thread helped; and hopefully this comment will help someone else.)</p>\n"},{"owner":{"reputation":3203,"user_id":2767181,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/rNeHp.jpg?s=128&g=1","display_name":"Ashwin S Ashok","link":"https://stackoverflow.com/users/2767181/ashwin-s-ashok"},"comment_count":0,"is_accepted":false,"score":45,"last_activity_date":1504759987,"last_edit_date":1504759987,"creation_date":1405490977,"answer_id":24773389,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>The error is due to executing long running operations in main thread,You can easily rectify the problem by using <a href=\"https://developer.android.com/reference/android/os/AsyncTask.html\" rel=\"noreferrer\">AsynTask</a> or <a href=\"https://developer.android.com/reference/java/lang/Thread.html\" rel=\"noreferrer\">Thread</a>. You can checkout this library <a href=\"http://loopj.com/android-async-http/\" rel=\"noreferrer\">AsyncHTTPClient</a> for better handling. </p>\n\n<pre><code>AsyncHttpClient client = new AsyncHttpClient();\nclient.get(\"http://www.google.com\", new AsyncHttpResponseHandler() {\n\n    @Override\n    public void onStart() {\n        // Called before a request is started\n    }\n\n    @Override\n    public void onSuccess(int statusCode, Header[] headers, byte[] response) {\n        // Called when response HTTP status is \"200 OK\"\n    }\n\n    @Override\n    public void onFailure(int statusCode, Header[] headers, byte[] errorResponse, Throwable e) {\n        // Called when response HTTP status is \"4XX\" (for example, 401, 403, 404)\n    }\n\n    @Override\n    public void onRetry(int retryNo) {\n        // Called when request is retried\n    }\n});\n</code></pre>\n"},{"owner":{"reputation":462,"user_id":2201778,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/euyRE.jpg?s=128&g=1","display_name":"amardeep","link":"https://stackoverflow.com/users/2201778/amardeep"},"comment_count":0,"is_accepted":false,"score":22,"last_activity_date":1466629956,"last_edit_date":1466629956,"creation_date":1405943600,"answer_id":24864462,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>This exception occurs due to any heavy task performed on the main thread if that performing task takes <em>too much time</em>.</p>\n\n<p>To avoid this, we can handle it using <strong>threads</strong> or <strong>executers</strong></p>\n\n<pre><code>Executors.newSingleThreadExecutor().submit(new Runnable() {\n    @Override\n    public void run() {\n        // You can perform your task here.\n    }\n});\n</code></pre>\n"},{"owner":{"reputation":4774,"user_id":3129572,"user_type":"registered","profile_image":"https://i.stack.imgur.com/YjXYb.jpg?s=128&g=1","display_name":"Vaishali Sutariya","link":"https://stackoverflow.com/users/3129572/vaishali-sutariya"},"comment_count":0,"is_accepted":false,"score":52,"last_activity_date":1466629995,"last_edit_date":1466629995,"creation_date":1406544193,"answer_id":24993517,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Put your code inside:</p>\n\n<pre><code>new Thread(new Runnable(){\n    @Override\n    public void run() {\n        try {\n            // Your implementation\n        }\n        catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>class DemoTask extends AsyncTask&lt;Void, Void, Void&gt; {\n\n    protected Void doInBackground(Void... arg0) {\n        //Your implementation\n    }\n\n    protected void onPostExecute(Void result) {\n        // TODO: do something with the feed\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":131,"user_id":2313968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ec5d4492b22befa8e51dc06a43fab69a?s=128&d=identicon&r=PG","display_name":"Kumarsunil","link":"https://stackoverflow.com/users/2313968/kumarsunil"},"comment_count":0,"is_accepted":false,"score":-5,"last_activity_date":1466630171,"last_edit_date":1466630171,"creation_date":1418357541,"answer_id":27436728,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Android does not allow a separate process into the main activity thread, and the HTTP connection is an independent thread here. That is the reason you are getting the \"<strong>android.os.NetworkOnMainThreadException</strong>\".</p>\n\n<p>There can be a need where you want to check the actual Internet connection before showing webview to the user, because if there is not Internet the web view will show the <em>page not found</em> error to the user, which normally you don't what to show.</p>\n\n<p>For checking Internet availability, the ping command can be used, but in case of Wi-Fi pinging can be disabled at the Wi-Fi server, so in this case you use an HTTP connection to check the status of the request.</p>\n\n<p>This can be the right approach if you are checking your own webview URL link before showing a webview to the user. In this case, you can use the strict mode of Android, but don't permit all the policy because you don't need it.</p>\n\n<p>You should only give network allow policy for the strict mode. Just add the below line into your code, and you will not get this error.</p>\n\n<pre><code>StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitNetwork().build();\nStrictMode.setThreadPolicy(policy);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2319,"user_id":3514144,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/hRi21.jpg?s=128&g=1","display_name":"Ajay Pandya","link":"https://stackoverflow.com/users/3514144/ajay-pandya"},"edited":false,"score":0,"creation_date":1481278299,"post_id":27587768,"comment_id":69322468,"content_license":"CC BY-SA 3.0","body":"For more link not work , Can u post some detail as ans for understanding"}],"owner":{"reputation":5547,"user_id":2721917,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/LXHdu.jpg?s=128&g=1","display_name":"Subhalaxmi","link":"https://stackoverflow.com/users/2721917/subhalaxmi"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1466630234,"last_edit_date":1466630234,"creation_date":1419149867,"answer_id":27587768,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>I solved this problem in a simple way...</p>\n\n<p>I added after <code>oncreate</code> <code>StrictMode.enableDefaults();</code> and solved this.</p>\n\n<p>Or</p>\n\n<p>use <code>Service</code> or <code>AsyncTask</code> to solve this</p>\n\n<p>Note:</p>\n\n<pre><code>Do not change SDK version\nDo not use a separate thread\n</code></pre>\n\n<p>For more, <a href=\"http://sevennet.org/2014/11/21/how-to-android-os-networkonmainthreadexception/\" rel=\"nofollow\">check this</a>.</p>\n"},{"owner":{"reputation":121,"user_id":3151440,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/aKRzK.jpg?s=128&g=1","display_name":"Gurpreet singh","link":"https://stackoverflow.com/users/3151440/gurpreet-singh"},"comment_count":0,"is_accepted":false,"score":-4,"last_activity_date":1466630411,"last_edit_date":1466630411,"creation_date":1422352603,"answer_id":28167574,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Use the below code to perform heavy tasks.</p>\n\n<pre><code>// Your package here\n\n\nimport java.util.List;\nimport org.apache.http.NameValuePair;\n\nimport android.app.Activity;\nimport android.app.ProgressDialog;\nimport android.content.Context;\nimport android.os.AsyncTask;\nimport android.view.View.OnSystemUiVisibilityChangeListener;\n\npublic class AsyncRequest extends AsyncTask&lt;String, Integer, String&gt; {\n\n    Context context;\n    ProgressDialog pDialog;\n\n    // Three Constructors\n    public AsyncRequest(Activity a, String m, List&lt;NameValuePair&gt; p) {\n        context = a;\n        method = m;\n        parameters = p;\n    }\n\n    public AsyncRequest(Activity a) {\n        this.caller = (OnAsyncRequestComplete) a;\n        context = a;\n    }\n\n    public String doInBackground(String... urls) {\n\n        //Perform your task here\n        return result;\n    }\n\n    public void onPreExecute() {\n        pDialog = new ProgressDialog(context);\n        pDialog.setMessage(\"Please wait..\");\n        pDialog.setCancelable(false);\n        pDialog.show();\n    }\n\n    public void onProgressUpdate(Integer... progress) {\n        // You can implement some progressBar and update it in this record.\n        //   setProgressPercent(progress[0]);\n    }\n\n    public void onPostExecute(String response) {\n        if (pDialog != null &amp;&amp; pDialog.isShowing()) {\n            pDialog.dismiss();\n        }\n        // Get the result here\n    }\n\n    protected void onCancelled(String response) {\n\n        if (pDialog != null &amp;&amp; pDialog.isShowing()) {\n            pDialog.dismiss();\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2927,"user_id":2763256,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EmWiu.jpg?s=128&g=1","display_name":"Kacy","link":"https://stackoverflow.com/users/2763256/kacy"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1423869017,"creation_date":1423869017,"answer_id":28510296,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>This works. Just made Dr.Luiji's answer a little simpler.</p>\n\n<pre><code>new Thread() {\n    @Override\n    public void run() {\n        try {\n            //Your code goes here\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}.start();\n</code></pre>\n"},{"owner":{"reputation":1806,"user_id":2251011,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/7585fe839269d49d9baa8725a1f77ebf?s=128&d=identicon&r=PG","display_name":"msysmilu","link":"https://stackoverflow.com/users/2251011/msysmilu"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1424169091,"creation_date":1424169091,"answer_id":28559884,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Although above there is a huge solution pool, no one mentioned <code>com.koushikdutta.ion</code>: <a href=\"https://github.com/koush/ion\" rel=\"noreferrer\">https://github.com/koush/ion</a></p>\n\n<p>It's also <strong>asynchronous</strong> and <strong>very simple</strong> to use:</p>\n\n<pre><code>Ion.with(context)\n.load(\"http://example.com/thing.json\")\n.asJsonObject()\n.setCallback(new FutureCallback&lt;JsonObject&gt;() {\n   @Override\n    public void onCompleted(Exception e, JsonObject result) {\n        // do stuff with the result or error\n    }\n});\n</code></pre>\n"},{"comments":[{"owner":{"reputation":7716,"user_id":4588760,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/35a154ab6dfafe9494629fd0176f4cec?s=128&d=identicon&r=PG&f=1","display_name":"ci_","link":"https://stackoverflow.com/users/4588760/ci"},"edited":false,"score":2,"creation_date":1426845610,"post_id":28735304,"comment_id":46546772,"content_license":"CC BY-SA 3.0","body":"Bypassing the detection of network code on the UI thread is really bad advice, there is a reason it&#39;s there to begin with."}],"owner":{"reputation":1057,"user_id":3340034,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Ji2PX.png?s=128&g=1","display_name":"prat3ik-patel","link":"https://stackoverflow.com/users/3340034/prat3ik-patel"},"comment_count":1,"is_accepted":false,"score":-5,"last_activity_date":1424929477,"creation_date":1424929477,"answer_id":28735304,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You have to simple add following line in manifest.xml after manifest tag</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n\n<p>and in activity file add following code after binding statement</p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n   StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n   StrictMode.setThreadPolicy(policy);\n}\n</code></pre>\n"},{"owner":{"reputation":4402,"user_id":1294150,"user_type":"registered","accept_rate":24,"profile_image":"https://i.stack.imgur.com/vyetp.jpg?s=128&g=1","display_name":"Ponsuyambu Velladurai","link":"https://stackoverflow.com/users/1294150/ponsuyambu-velladurai"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1466847171,"last_edit_date":1466847171,"creation_date":1435218179,"answer_id":31044168,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>On Android, network operations cannot be run on the main thread. You can use Thread, AsyncTask (short-running tasks), Service (long-running tasks) to do network operations.</p>\n"},{"owner":{"reputation":9481,"user_id":2770850,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1","display_name":"Nabin","link":"https://stackoverflow.com/users/2770850/nabin"},"comment_count":0,"is_accepted":false,"score":16,"last_activity_date":1466847264,"last_edit_date":1495541445,"creation_date":1437530744,"answer_id":31552681,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>In simple words,</p>\n\n<p><strong>DO NOT DO NETWORK WORK IN THE UI THREAD</strong></p>\n\n<p>For example, if you do an HTTP request, that is a network action.</p>\n\n<p><strong>Solution:</strong></p>\n\n<ol>\n<li>You have to create a new Thread</li>\n<li><strong>Or</strong> use <a href=\"https://www.google.com.np/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB0QFjAAahUKEwjgivqS0-3GAhUGOJQKHV_YD84&amp;url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask.html&amp;ei=RfquVaDUPIbw0ATfsL_wDA&amp;usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&amp;sig2=qTI0AgoyYUXyDwHFQup9sw\" rel=\"noreferrer\">AsyncTask class</a></li>\n</ol>\n\n<p><strong>Way:</strong></p>\n\n<p>Put all your works inside</p>\n\n<ol>\n<li><code>run()</code> method of new thread</li>\n<li><strong>Or</strong> <code>doInBackground()</code> method of AsyncTask class.</li>\n</ol>\n\n<p><strong>But:</strong></p>\n\n<p>When you get something from Network response and want to show it on your view (like display response message in TextView), you need to <strong>return back to the UI</strong> thread.</p>\n\n<p>If you don't do it, you will get <code>ViewRootImpl$CalledFromWrongThreadException</code>.</p>\n\n<p><strong>How to?</strong></p>\n\n<ol>\n<li>While using AsyncTask, update view from <code>onPostExecute()</code> method</li>\n<li><strong>Or</strong> call <a href=\"https://stackoverflow.com/questions/11140285/how-to-use-runonuithread\"><code>runOnUiThread()</code></a> method and update view inside the <code>run()</code> method.</li>\n</ol>\n"},{"owner":{"reputation":1780,"user_id":4522954,"user_type":"registered","accept_rate":67,"profile_image":"https://lh5.googleusercontent.com/-QWRqvk7DlDA/AAAAAAAAAAI/AAAAAAAAB6k/LwtJUTMOjh0/photo.jpg?sz=128","display_name":"RevanthKrishnaKumar V.","link":"https://stackoverflow.com/users/4522954/revanthkrishnakumar-v"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1466847331,"last_edit_date":1466847331,"creation_date":1439454374,"answer_id":31983115,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Accessing network resources from the main (UI) thread cause this exception. Use a separate thread or AsyncTask for accessing a network resource to avoid this problem.</p>\n"},{"owner":{"reputation":783,"user_id":4581645,"user_type":"registered","profile_image":"https://i.stack.imgur.com/eqFSO.jpg?s=128&g=1","display_name":"RobotCharlie","link":"https://stackoverflow.com/users/4581645/robotcharlie"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1439776048,"creation_date":1439776048,"answer_id":32041717,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You can actually start a new Thread, I had this problem before and solved it by this way.</p>\n"},{"owner":{"reputation":2083,"user_id":4549000,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/PbH24.jpg?s=128&g=1","display_name":"Krishna","link":"https://stackoverflow.com/users/4549000/krishna"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1466847543,"last_edit_date":1466847543,"creation_date":1450430601,"answer_id":34352221,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You are not allowed to implement network operations on the UI thread on Android. You will have to use AsyncTask class to perform network related operations like sending API request, downloading image from a URL, etc. and using callback methods of AsyncTask, you can get you result in onPostExecute menthod and you will be in the UI thread and you can populate UI with data from web service or something like that.</p>\n\n<p>Example: Suppose you want to download image from an URL: <a href=\"https://www.samplewebsite.com/sampleimage.jpg\" rel=\"noreferrer\">https://www.samplewebsite.com/sampleimage.jpg</a></p>\n\n<p>Solution using AsyncTask:\n are  respectively.</p>\n\n<pre><code>    public class MyDownloader extends AsyncTask&lt;String,Void,Bitmap&gt;\n    {\n        @Override\n        protected void onPreExecute() {\n            // Show progress dialog\n            super.onPreExecute();\n        }\n\n        @Override\n        protected void onPostExecute(Bitmap bitmap) {\n            //Populate Ui\n            super.onPostExecute(bitmap);\n        }\n\n        @Override\n        protected Bitmap doInBackground(String... params) {\n            // Open URL connection read bitmaps and return form here\n            return result;\n        }\n\n        @Override\n        protected void onProgressUpdate(Void... values) {\n            // Show progress update\n            super.onProgressUpdate(values);\n        }\n\n\n    }\n}\n</code></pre>\n\n<p>Note: Do not forget to add the Internet permission in the Android manifest file. It will work like a charm. :)</p>\n"},{"owner":{"reputation":3088,"user_id":1367344,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/cAx41.jpg?s=128&g=1","display_name":"Adnan Abdollah Zaki","link":"https://stackoverflow.com/users/1367344/adnan-abdollah-zaki"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1466847661,"last_edit_date":1466847661,"creation_date":1452876474,"answer_id":34815939,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>This exception is thrown when an application attempts to perform a networking operation on its main thread.\nIf your task took above five seconds, it takes a force close.</p>\n\n<p>Run your code in <code>AsyncTask</code>:</p>\n\n<pre><code>class RetrieveFeedTask extends AsyncTask&lt;String, Void, Boolean&gt; {\n\n    protected RSSFeed doInBackground(String... urls) {\n       // TODO: Connect\n    }\n\n    protected void onPostExecute(RSSFeed feed) {\n        // TODO: Check this.exception\n        // TODO: Do something with the feed\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":1280,"user_id":4286151,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/bf8ba2c9b6a2b96af1b5ffddf4d02715?s=128&d=identicon&r=PG&f=1","display_name":"BalaramNayak","link":"https://stackoverflow.com/users/4286151/balaramnayak"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1466847870,"last_edit_date":1466847870,"creation_date":1453197176,"answer_id":34873530,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>The NetworkOnMainThread exception occurs because you have called some network operation on the default thread, that is, the UI thread. \nAs per Android version <a href=\"http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29\" rel=\"nofollow\">Android&nbsp;3</a> (Honeycomb) which is not allowed, you should call network operation outside the main thread.</p>\n\n<p>You can use AsyncTask, IntentService, or creating your own thread and calling inside the run method.\nFor more information, visit <em><a href=\"http://developer.android.com/training/basics/network-ops/connecting.html\" rel=\"nofollow\">Connecting to the Network</a></em>.</p>\n"},{"owner":{"reputation":976,"user_id":2014374,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/57ad363424103144895c629c34fcf396?s=128&d=identicon&r=PG","display_name":"bpr10","link":"https://stackoverflow.com/users/2014374/bpr10"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1463995935,"last_edit_date":1495535496,"creation_date":1463995935,"answer_id":37387412,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>We can also use RxJava to move network operations to a background thread. And it's fairly simple as well.</p>\n\n<pre><code>webService.doSomething(someData)\n          .subscribeOn(Schedulers.newThread())-- This for background thread\n          .observeOn(AndroidSchedulers.mainThread()) -- for callback on UI              \n          .subscribe(result -&gt; resultText.setText(\"It worked!\"),\n              e -&gt; handleError(e));\n</code></pre>\n\n<p>You can do a lot more stuff with RxJava.Here are some links for RxJava. Feel free to dig in. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/29670452/rxjava-async-task-in-android\">RxJava Async task in Android</a></p>\n\n<p><a href=\"http://blog.stablekernel.com/replace-asynctask-asynctaskloader-rx-observable-rxjava-android-patterns/\" rel=\"nofollow noreferrer\">http://blog.stablekernel.com/replace-asynctask-asynctaskloader-rx-observable-rxjava-android-patterns/</a></p>\n"},{"owner":{"reputation":3128,"user_id":6175778,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4b8c79d13cbaa9aa0a445a6adba7b5d6?s=128&d=identicon&r=PG&f=1","display_name":"Alex Shutov","link":"https://stackoverflow.com/users/6175778/alex-shutov"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1466848114,"last_edit_date":1466848114,"creation_date":1466719202,"answer_id":38002606,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>There is another very convenient way for tackling this issue - use rxJava's concurrency capabilities. You can execute any task in background and post results to main thread in a very convenient way, so these results will be handed to processing chain.</p>\n\n<p>The first verified answer advice is to use AsynTask. Yes, this is a solution, but it is obsolete nowadays, because there are new tools around.</p>\n\n<pre><code>String getUrl() {\n    return \"SomeUrl\";\n}\n\nprivate Object makeCallParseResponse(String url) {\n    return null;\n    //\n}\n\nprivate void processResponse(Object o) {\n\n}\n</code></pre>\n\n<p>The getUrl method provides the URL address, and it will be executed on the main thread.</p>\n\n<p>makeCallParseResponse(..) - does actual work</p>\n\n<p>processResponse(..) - will handle result on main thread.</p>\n\n<p>The code for asynchronous execution will look like:</p>\n\n<pre><code>rx.Observable.defer(new Func0&lt;rx.Observable&lt;String&gt;&gt;() {\n    @Override\n    public rx.Observable&lt;String&gt; call() {\n        return rx.Observable.just(getUrl());\n    }\n})\n    .subscribeOn(Schedulers.io())\n    .observeOn(Schedulers.io())\n    .map(new Func1&lt;String, Object&gt;() {\n        @Override\n        public Object call(final String s) {\n            return makeCallParseResponse(s);\n        }\n    })\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new Action1&lt;Object&gt;() {\n        @Override\n        public void call(Object o) {\n             processResponse(o);\n        }\n    },\n    new Action1&lt;Throwable&gt;() {\n        @Override\n        public void call(Throwable throwable) {\n            // Process error here, it will be posted on\n            // the main thread\n        }\n    });\n</code></pre>\n\n<p>Compared to AsyncTask, this method allow to switch schedulers an arbitrary number of times (say, fetch data on one scheduler and process those data on another (say, Scheduler.computation()). You can also define you own schedulers.</p>\n\n<p>In order to use this library, include following lines into you build.gradle file:</p>\n\n<pre><code>   compile 'io.reactivex:rxjava:1.1.5'\n   compile 'io.reactivex:rxandroid:1.2.0'\n</code></pre>\n\n<p>The last dependency includes support for the .mainThread() scheduler.</p>\n\n<p>There is <a href=\"https://github.com/Froussios/Intro-To-RxJava\" rel=\"noreferrer\">an excellent ebook for rx-java</a>.</p>\n"},{"owner":{"reputation":2267,"user_id":3306437,"user_type":"registered","profile_image":"https://i.stack.imgur.com/GR4Wx.jpg?s=128&g=1","display_name":"Lovekush Vishwakarma","link":"https://stackoverflow.com/users/3306437/lovekush-vishwakarma"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1479758712,"last_edit_date":1479758712,"creation_date":1475568051,"answer_id":39847133,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>How to fix android.os.NetworkOnMainThreadException</p>\n\n<p>What is NetworkOnMainThreadException:</p>\n\n<p>In Android all the UI operations we have to do on the UI thread (main thread). If we perform background operations or some network operation on the main thread then we risk this exception will occur and the app will not respond.</p>\n\n<p>How to fix it:</p>\n\n<p>To avoid this problem, you have to use another thread for background operations or network operations, like using asyncTask and use some library for network operations like Volley, AsyncHttp, etc.</p>\n"},{"owner":{"reputation":1166,"user_id":3578677,"user_type":"registered","accept_rate":27,"profile_image":"https://i.stack.imgur.com/aSQbU.jpg?s=128&g=1","display_name":"Mansuu....","link":"https://stackoverflow.com/users/3578677/mansuu"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1498912067,"last_edit_date":1498912067,"creation_date":1484542618,"answer_id":41669680,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>android.os.NetworkOnMainThreadException is thrown when network operations are performed on the main thread. You better do this in AsyncTask to remove this Exception. Write it this way:</p>\n\n<pre><code>    new AsyncTask&lt;Void,String,String&gt;(){\n\n        @Override\n        protected Void doInBackground(Void... params) {\n            // Perform your network operation.\n            // Get JSON or XML string from the server.\n            // Store in a local variable (say response) and return.\n            return response;\n        }\n\n        protected void onPostExecute(String results){\n            // Response returned by doInBackGround() will be received\n            // by onPostExecute(String results).\n            // Now manipulate your jason/xml String(results).\n        }\n\n    }.execute();\n}\n</code></pre>\n"},{"owner":{"reputation":107,"user_id":1511022,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0e5a855f463091028a64b36affdba416?s=128&d=identicon&r=PG","display_name":"Himanshu","link":"https://stackoverflow.com/users/1511022/himanshu"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1498911918,"last_edit_date":1498911918,"creation_date":1487503871,"answer_id":42326705,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You can also resolve this issue by using Strict Mode using the below code. It's also an alternative to resolving this issue.</p>\n\n<pre><code>StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(policy);\n</code></pre>\n\n<p>But the best practice would be to use AsyncTask.</p>\n"},{"owner":{"reputation":85,"user_id":6136614,"user_type":"registered","accept_rate":17,"profile_image":"https://www.gravatar.com/avatar/ec7517d0c5497fa2f6add5f6da6bb4fd?s=128&d=identicon&r=PG&f=1","display_name":"aks","link":"https://stackoverflow.com/users/6136614/aks"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1498911800,"last_edit_date":1498911800,"creation_date":1488471374,"answer_id":42560499,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>As Android is working on a single thread, you should not do any network operation on the main thread. There are various ways to avoid this.</p>\n\n<p>Use the following way to perform a network operation</p>\n\n<ul>\n<li><strong>Asysnctask</strong>: For small operations which don't take much time.</li>\n<li><strong>Intent Service</strong>: For network operation which take a big amount of time.</li>\n<li>Use a custom library like <strong>Volley</strong> and <strong>Retrofit</strong> for handling\ncomplex network operations</li>\n</ul>\n\n<p><strong>Never use StrictMode.setThreadPolicy(policy)</strong>, as it will freeze your UI and is not at all a good idea.</p>\n"},{"owner":{"reputation":79,"user_id":6180676,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-emttGcROwWU/AAAAAAAAAAI/AAAAAAAANa8/Ulmsa8KZ_oc/photo.jpg?sz=128","display_name":"Hossain Ahamed","link":"https://stackoverflow.com/users/6180676/hossain-ahamed"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1498911851,"last_edit_date":1498911851,"creation_date":1489730444,"answer_id":42850269,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You can not call network on the main thread or UI thread. On Android if you want to call network there are two options -</p>\n\n<ol>\n<li>Call asynctask, which will run one background thread to handle the network operation.</li>\n<li>You can create your own runnable thread to handle the network operation.</li>\n</ol>\n\n<p>Personally I prefer asynctask. For further information you can refer <a href=\"https://developer.android.com/training/basics/network-ops/connecting.html\" rel=\"nofollow noreferrer\">this link</a>.</p>\n"},{"owner":{"reputation":41397,"user_id":4999394,"user_type":"registered","accept_rate":98,"profile_image":"https://i.stack.imgur.com/nAGmt.png?s=128&g=1","display_name":"Ravindra babu","link":"https://stackoverflow.com/users/4999394/ravindra-babu"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1509856863,"last_edit_date":1509856863,"creation_date":1494015116,"answer_id":43813062,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>New <code>Thread</code> and <a href=\"https://developer.android.com/reference/android/os/AsyncTask.html\" rel=\"noreferrer\">AsyncTask</a> solutions have been explained already.</p>\n\n<p><code>AsyncTask</code> should ideally be used for short operations. Normal <code>Thread</code> is not preferable for Android. </p>\n\n<p>Have a look at alternate solution using <a href=\"https://developer.android.com/reference/android/os/HandlerThread.html\" rel=\"noreferrer\">HandlerThread</a> and <a href=\"https://developer.android.com/reference/android/os/Handler.html\" rel=\"noreferrer\">Handler</a></p>\n\n<p><strong>HandlerThread</strong></p>\n\n<blockquote>\n  <p>Handy class for starting a new thread that has a looper. The looper can then be used to create handler classes. Note that <code>start()</code> must still be called.</p>\n</blockquote>\n\n<p><strong>Handler:</strong></p>\n\n<blockquote>\n  <p>A Handler allows you to send and process Message and Runnable objects associated with a thread's MessageQueue. Each Handler instance is associated with a single thread and that thread's message queue. When you create a new Handler, it is bound to the thread / message queue of the thread that is creating it -- from that point on, it will deliver messages and runnables to that message queue and execute them as they come out of the message queue.</p>\n</blockquote>\n\n<p>Solution:</p>\n\n<ol>\n<li><p>Create <code>HandlerThread</code></p></li>\n<li><p>Call <code>start()</code> on <code>HandlerThread</code></p></li>\n<li><p>Create <code>Handler</code> by getting <code>Looper</code> from <code>HanlerThread</code></p></li>\n<li><p>Embed your Network operation related code in <code>Runnable</code> object</p></li>\n<li><p>Submit <code>Runnable</code> task to <code>Handler</code></p></li>\n</ol>\n\n<p>Sample code snippet, which address  <code>NetworkOnMainThreadException</code></p>\n\n<pre><code>HandlerThread handlerThread = new HandlerThread(\"URLConnection\");\nhandlerThread.start();\nhandler mainHandler = new Handler(handlerThread.getLooper());\n\nRunnable myRunnable = new Runnable() {\n    @Override\n    public void run() {\n        try {\n            Log.d(\"Ravi\", \"Before IO call\");\n            URL page = new URL(\"http://www.google.com\");\n            StringBuffer text = new StringBuffer();\n            HttpURLConnection conn = (HttpURLConnection) page.openConnection();\n            conn.connect();\n            InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());\n            BufferedReader buff = new BufferedReader(in);\n            String line;\n            while ( (line =  buff.readLine()) != null) {\n                text.append(line + \"\\n\");\n            }\n            Log.d(\"Ravi\", \"After IO call\");\n            Log.d(\"Ravi\",text.toString());\n\n        }catch( Exception err){\n            err.printStackTrace();\n        }\n    }\n};\nmainHandler.post(myRunnable);\n</code></pre>\n\n<p>Pros of using this approach:</p>\n\n<ol>\n<li>Creating new <code>Thread/AsyncTask</code> for each network operation is expensive. The <code>Thread/AsyncTask</code> will be destroyed and re-created for next Network operations. But with <code>Handler</code> and <code>HandlerThread</code> approach, you can submit many network operations (as Runnable tasks) to single <code>HandlerThread</code> by using <code>Handler</code>. </li>\n</ol>\n"},{"owner":{"reputation":559,"user_id":7856490,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/618ec36cb20d5db87a126e5e871d9eb5?s=128&d=identicon&r=PG&f=1","display_name":"Shinoo Goyal","link":"https://stackoverflow.com/users/7856490/shinoo-goyal"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1507621967,"last_edit_date":1507621967,"creation_date":1496987845,"answer_id":44450277,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p><code>RxAndroid</code> is another better alternative to this problem and it saves us from hassles of creating threads and then posting results on Android UI thread.\nWe just need to specify threads on which tasks need to be executed and everything is handled internally.</p>\n\n<pre><code>Observable&lt;List&lt;String&gt;&gt; musicShowsObservable = Observable.fromCallable(new Callable&lt;List&lt;String&gt;&gt;() { \n\n  @Override \n  public List&lt;String&gt; call() { \n    return mRestClient.getFavoriteMusicShows(); \n  }\n});\n\nmMusicShowSubscription = musicShowsObservable\n.subscribeOn(Schedulers.io())\n.observeOn(AndroidSchedulers.mainThread())\n.subscribe(new Observer&lt;List&lt;String&gt;&gt;() {\n\n    @Override \n    public void onCompleted() { }\n\n    @Override \n    public void onError(Throwable e) { }\n\n    @Override \n    public void onNext(List&lt;String&gt; musicShows){\n        listMusicShows(musicShows);\n    }\n});\n</code></pre>\n\n<ol>\n<li><p>By specifiying <code>(Schedulers.io())</code>,RxAndroid will run <code>getFavoriteMusicShows()</code>  on a different thread.</p></li>\n<li><p>By using <code>AndroidSchedulers.mainThread()</code> we want to observe this Observable on the UI thread, i.e. we want our <code>onNext()</code> callback to be called on the UI thread</p></li>\n</ol>\n"},{"owner":{"reputation":309,"user_id":6656818,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4e629ee2481c49d17f4c763c55ee34ae?s=128&d=identicon&r=PG&f=1","display_name":"J.D.1731","link":"https://stackoverflow.com/users/6656818/j-d-1731"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1499677615,"creation_date":1499677615,"answer_id":45007912,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>You can either use <code>KOTLIN</code> and <code>ANKO</code>. </p>\n\n<p><strong>Kotlin</strong> is new official language for <em>Android</em> more about it you can find here\n<a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a></p>\n\n<p><strong>Anko</strong> supported library for Kotlin in Android, some doc here\n<a href=\"https://github.com/Kotlin/anko\" rel=\"noreferrer\">https://github.com/Kotlin/anko</a></p>\n\n<p>The solution which is really useful and have only few lines of code written by @AntonioLeiva \n<a href=\"https://antonioleiva.com/anko-background-kotlin-android/\" rel=\"noreferrer\">https://antonioleiva.com/anko-background-kotlin-android/</a></p>\n\n<pre><code>doAsync {\n    var result = runLongTask()\n    uiThread {\n        toast(result)\n    }\n}\n</code></pre>\n\n<p>Simple as it is, <code>NetworkOnMainThread</code> occurs when you run background job on <code>UI Thread</code> so one thing you have to do is to run your <code>longTask job</code> in the background. You can do this using this method and <strong>Kotlin</strong> with <strong>Anko</strong> in your Android App.</p>\n"},{"owner":{"reputation":9399,"user_id":1380032,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG","display_name":"Rahul","link":"https://stackoverflow.com/users/1380032/rahul"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1501608694,"creation_date":1501608694,"answer_id":45444333,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>Never do any long running work on UI thread, that long running work can be communication with server, read/write on file etc. These tasks should be on background thread, thats why <code>Service</code>, <code>AsyncTask</code>, <code>Threads</code> created. You can disable <code>StrictMode</code> that will prevent crash but that never recommended. </p>\n\n<p>I would suggest you take an advantage of <code>StrictMode</code> atleast in Debug mode. Use below code to get logs of any issue which slows down your App on main thread.</p>\n\n<pre><code>StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()\n            .detectAll()\n            .penaltyLog()\n            .build());\n</code></pre>\n\n<p>You can set different penalties - </p>\n\n<pre><code>penaltyLog() // to print log\npenaltyDeath() // This will crash you App(so costly penalty)\npenaltyDialog() // Show alert when something went lazy on Main thread\n</code></pre>\n\n<p>There is so much about <a href=\"https://developer.android.com/reference/android/os/StrictMode.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/StrictMode.html</a></p>\n"},{"owner":{"reputation":3774,"user_id":6602675,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0fba4065805a535f33e4062872831559?s=128&d=identicon&r=PG&f=1","display_name":"Sharath kumar","link":"https://stackoverflow.com/users/6602675/sharath-kumar"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1516518505,"last_edit_date":1516518505,"creation_date":1504521799,"answer_id":46035352,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>The main thread is the UI thread, and you cannot do an operation in the main thread which may block the user interaction. You can solve this in two ways:</p>\n\n<p>Force to do the task in the main thread like this</p>\n\n<pre><code>StrictMode.ThreadPolicy threadPolicy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(threadPolicy);\n</code></pre>\n\n<p>Or create a simple handler and update the main thread if you want.</p>\n\n<pre><code>Runnable runnable;\nHandler newHandler;\n\nnewHandler = new Handler();\nrunnable = new Runnable() {\n    @Override\n    public void run() {\n         try {\n            //update UI\n        } catch (Exception e) {\n            e.printStackTrace();\n        } \n    }\n};\nnewHandler.post(runnable);\n</code></pre>\n\n<p>And to stop the thread use:</p>\n\n<pre><code>newHandler.removeCallbacks(runnable);\n</code></pre>\n\n<p>For more information check this out: <em><a href=\"https://android-developers.googleblog.com/2009/05/painless-threading.html\" rel=\"noreferrer\">Painless threading</a></em></p>\n"},{"owner":{"reputation":3221,"user_id":1024412,"user_type":"registered","accept_rate":54,"profile_image":"https://www.gravatar.com/avatar/86a328376ad10ede36774e864cb6efa4?s=128&d=identicon&r=PG","display_name":"KG6ZVP","link":"https://stackoverflow.com/users/1024412/kg6zvp"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1521275197,"last_edit_date":1521275197,"creation_date":1508543407,"answer_id":46858724,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>There are many great answers already on this question, but a lot of great libraries have come out since those answers were posted. This is intended as a kind of newbie-guide.</p>\n\n<p>I will cover several use cases for performing network operations and <em>a</em> solution or two for each.</p>\n\n<h1>ReST over HTTP</h1>\n\n<p><em>Typically Json, can be XML or something else</em></p>\n\n<h2>Full API Access</h2>\n\n<p>Let's say you are writing an app that lets users track stock prices, interest rates and currecy exchange rates. You find an Json API that looks something like this:</p>\n\n<pre><code>http://api.example.com/stocks                       //ResponseWrapper&lt;String&gt; object containing a list of Srings with ticker symbols\nhttp://api.example.com/stocks/$symbol               //Stock object\nhttp://api.example.com/stocks/$symbol/prices        //PriceHistory&lt;Stock&gt; object\nhttp://api.example.com/currencies                   //ResponseWrapper&lt;String&gt; object containing a list of currency abbreviation\nhttp://api.example.com/currencies/$currency         //Currency object\nhttp://api.example.com/currencies/$id1/values/$id2  //PriceHistory&lt;Currency&gt; object comparing the prices of the first currency (id1) to the second (id2)\n</code></pre>\n\n<h3>Retrofit from Square</h3>\n\n<p>This is an excellent choice for an API with multiple endpoints and allows you to declare the ReST endpoints instead of having to code them individually as with other libraries like ion or Volley. (website: <a href=\"http://square.github.io/retrofit/\" rel=\"noreferrer\">http://square.github.io/retrofit/</a>)</p>\n\n<p>How do you use it with the finances API?</p>\n\n<p><strong>build.gradle</strong></p>\n\n<p>Add these lines to your Module level buid.gradle:</p>\n\n<pre><code>implementation 'com.squareup.retrofit2:retrofit:2.3.0' //retrofit library, current as of September 21, 2017\nimplementation 'com.squareup.retrofit2:converter-gson:2.3.0' //gson serialization and deserialization support for retrofit, version must match retrofit version\n</code></pre>\n\n<p><strong>FinancesApi.java</strong></p>\n\n<pre><code>public interface FinancesApi {\n    @GET(\"stocks\")\n    Call&lt;ResponseWrapper&lt;String&gt;&gt; listStocks();\n    @GET(\"stocks/{symbol}\")\n    Call&lt;Stock&gt; getStock(@Path(\"symbol\")String tickerSymbol);\n    @GET(\"stocks/{symbol}/prices\")\n    Call&lt;PriceHistory&lt;Stock&gt;&gt; getPriceHistory(@Path(\"symbol\")String tickerSymbol);\n\n    @GET(\"currencies\")\n    Call&lt;ResponseWrapper&lt;String&gt;&gt; listCurrencies();\n    @GET(\"currencies/{symbol}\")\n    Call&lt;Currency&gt; getCurrency(@Path(\"symbol\")String currencySymbol);\n    @GET(\"currencies/{symbol}/values/{compare_symbol}\")\n    Call&lt;PriceHistory&lt;Currency&gt;&gt; getComparativeHistory(@Path(\"symbol\")String currency, @Path(\"compare_symbol\")String currencyToPriceAgainst);\n}\n</code></pre>\n\n<p><strong>FinancesApiBuilder</strong></p>\n\n<pre><code>public class FinancesApiBuilder {\n    public static FinancesApi build(String baseUrl){\n        return new Retrofit.Builder()\n                    .baseUrl(baseUrl)\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .build()\n                    .create(FinancesApi.class);\n    }\n}\n</code></pre>\n\n<p><strong>FinancesFragment snippet</strong></p>\n\n<pre><code>FinancesApi api = FinancesApiBuilder.build(\"http://api.example.com/\"); //trailing '/' required for predictable behavior\napi.getStock(\"INTC\").enqueue(new Callback&lt;Stock&gt;(){\n    @Override\n    public void onResponse(Call&lt;Stock&gt; stockCall, Response&lt;Stock&gt; stockResponse){\n        Stock stock = stockCall.body();\n        //do something with the stock\n    }\n    @Override\n    public void onResponse(Call&lt;Stock&gt; stockCall, Throwable t){\n        //something bad happened\n    }\n}\n</code></pre>\n\n<p><em>If your API requires an API Key or other header like a user token, etc. to be sent, Retrofit makes this easy (see this awesome answer for details: <a href=\"https://stackoverflow.com/a/42899766/1024412\">https://stackoverflow.com/a/42899766/1024412</a>).</em></p>\n\n<h2>One off ReST API access</h2>\n\n<p>Let's say you're building a \"mood weather\" app that looks up the users GPS location and checks the current temperature in that area and tells them the mood. This type of app doesn't need to declare API endpoints; it just needs to be able to access one API endpoint.</p>\n\n<h3>Ion</h3>\n\n<p>This is a great library for this type of access.</p>\n\n<p>Please read msysmilu's great answer (<a href=\"https://stackoverflow.com/a/28559884/1024412\">https://stackoverflow.com/a/28559884/1024412</a>)</p>\n\n<h1>Load images via HTTP</h1>\n\n<h2>Volley</h2>\n\n<p><em>Volley can also be used for ReST APIs, but due to the more complicated setup required I prefer to use Retrofit from Square as above (<a href=\"http://square.github.io/retrofit/\" rel=\"noreferrer\">http://square.github.io/retrofit/</a>)</em></p>\n\n<p>Let's say you are building a social networking app and want to load profile pictures of friends.</p>\n\n<p><strong>build.gradle</strong></p>\n\n<p>Add this line to your Module level buid.gradle:</p>\n\n<pre><code>implementation 'com.android.volley:volley:1.0.0'\n</code></pre>\n\n<p><strong>ImageFetch.java</strong></p>\n\n<p>Volley requires more setup than Retrofit. You will need to create a class like this to setup a RequestQueue, an ImageLoader and an ImageCache, but it's not too bad:</p>\n\n<pre><code>public class ImageFetch {\n    private static ImageLoader imageLoader = null;\n    private static RequestQueue imageQueue = null;\n\n    public static ImageLoader getImageLoader(Context ctx){\n        if(imageLoader == null){\n            if(imageQueue == null){\n                imageQueue = Volley.newRequestQueue(ctx.getApplicationContext());\n            }\n            imageLoader = new ImageLoader(imageQueue, new ImageLoader.ImageCache() {\n                Map&lt;String, Bitmap&gt; cache = new HashMap&lt;String, Bitmap&gt;();\n                @Override\n                public Bitmap getBitmap(String url) {\n                    return cache.get(url);\n                }\n                @Override\n                public void putBitmap(String url, Bitmap bitmap) {\n                    cache.put(url, bitmap);\n                }\n            });\n        }\n        return imageLoader;\n    }\n}\n</code></pre>\n\n<p><strong>user_view_dialog.xml</strong></p>\n\n<p>Add the following to your layout xml file to add an image:</p>\n\n<pre><code>&lt;com.android.volley.toolbox.NetworkImageView\n    android:id=\"@+id/profile_picture\"\n    android:layout_width=\"32dp\"\n    android:layout_height=\"32dp\"\n    android:layout_alignParentTop=\"true\"\n    android:layout_centerHorizontal=\"true\"\n    app:srcCompat=\"@android:drawable/spinner_background\"/&gt;\n</code></pre>\n\n<p><strong>UserViewDialog.java</strong></p>\n\n<p>Add the following code to the onCreate method (Fragment, Activity) or the constructor (Dialog):</p>\n\n<pre><code>NetworkImageView profilePicture = view.findViewById(R.id.profile_picture);\nprofilePicture.setImageUrl(\"http://example.com/users/images/profile.jpg\", ImageFetch.getImageLoader(getContext());\n</code></pre>\n\n<h2>Picasso</h2>\n\n<p>Another excellent library from Square. Please see the site for some great examples: <a href=\"http://square.github.io/picasso/\" rel=\"noreferrer\">http://square.github.io/picasso/</a></p>\n"},{"comments":[{"owner":{"reputation":28015,"user_id":3286489,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/yTcB3.png?s=128&g=1","display_name":"Elye","link":"https://stackoverflow.com/users/3286489/elye"},"edited":false,"score":0,"creation_date":1516226163,"post_id":48310641,"comment_id":83607003,"content_license":"CC BY-SA 3.0","body":"You could find the complete code from <a href=\"https://github.com/elye/demo_android_network_evolution\" rel=\"nofollow noreferrer\">github.com/elye/demo_android_network_evolution</a>"},{"owner":{"reputation":28015,"user_id":3286489,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/yTcB3.png?s=128&g=1","display_name":"Elye","link":"https://stackoverflow.com/users/3286489/elye"},"edited":false,"score":0,"creation_date":1516226210,"post_id":48310641,"comment_id":83607023,"content_license":"CC BY-SA 3.0","body":"If you like to look at the overall trend of network access in Android historically to present, check out <a href=\"https://medium.com/@elye.project/the-evolution-of-android-network-access-1e199fc6e9a2\" rel=\"nofollow noreferrer\">medium.com/@elye.project/&hellip;</a>"}],"owner":{"reputation":28015,"user_id":3286489,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/yTcB3.png?s=128&g=1","display_name":"Elye","link":"https://stackoverflow.com/users/3286489/elye"},"comment_count":2,"is_accepted":false,"score":0,"last_activity_date":1516518376,"last_edit_date":1516518376,"creation_date":1516226096,"answer_id":48310641,"question_id":6343166,"content_license":"CC BY-SA 3.0","body":"<p>As of 2018, I would recommend to use RxJava in Kotlin for network fetching. A simple example is below.</p>\n\n<pre><code>Single.fromCallable {\n        // Your Network Fetching Code\n        Network.fetchHttp(url) \n    }\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe {\n        // What you need to do with your result on the view \n        result -&gt; view.updateScreen(result) \n    }\n</code></pre>\n"},{"owner":{"reputation":11921,"user_id":4770877,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/cccebea2d190bf8f2054c1949ffa8677?s=128&d=identicon&r=PG&f=1","display_name":"yoAlex5","link":"https://stackoverflow.com/users/4770877/yoalex5"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1615389349,"last_edit_date":1615389349,"creation_date":1521302329,"answer_id":49338894,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>You are able to move a part of your code into another thread to offload the <code>main thread</code> and avoid getting <a href=\"https://developer.android.com/topic/performance/vitals/anr.html\" rel=\"nofollow noreferrer\">ANR</a>, <a href=\"https://developer.android.com/reference/android/os/NetworkOnMainThreadException.html\" rel=\"nofollow noreferrer\">NetworkOnMainThreadException</a>, <a href=\"https://developer.android.com/reference/java/lang/IllegalStateException.html\" rel=\"nofollow noreferrer\">IllegalStateException</a>(e.g. Cannot access database on the main thread since it may potentially lock the UI for a long period of time).</p>\n<p>There are some approaches that you should choose depends on the situation</p>\n<p>Java <a href=\"https://developer.android.com/reference/java/lang/Thread.html\" rel=\"nofollow noreferrer\">Thread</a> or Android <a href=\"https://developer.android.com/reference/android/os/HandlerThread.html\" rel=\"nofollow noreferrer\">HandlerThread</a></p>\n<blockquote>\n<p>Java threads are one-time use only and die after executing its run method.</p>\n<p>HandlerThread is a handy class for starting a new thread that has a looper.</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/reference/android/os/AsyncTask.html\" rel=\"nofollow noreferrer\">AsyncTask</a> (<strong>deprecated</strong> in API level 30)</p>\n<blockquote>\n<p><strong>AsyncTask</strong> is designed to be a helper class around <strong>Thread</strong> and <strong>Handler</strong> and does not constitute a generic threading framework. AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time, it is highly recommended you use the various APIs provided by the java.util.concurrent package such as <strong>Executor</strong>, <strong>ThreadPoolExecutor</strong> and <strong>FutureTask</strong>.</p>\n</blockquote>\n<p>Since Main thread monopolizes UI components it is not possible to access to some View, that is why Handler is on the rescue</p>\n<p><a href=\"https://stackoverflow.com/a/66567556/4770877\">[Executor framework]</a></p>\n<blockquote>\n<p>ThreadPoolExecutor class that implements ExecutorService which gives fine control on the thread pool (Eg, core pool size, max pool size, keep alive time, etc.)</p>\n<p>ScheduledThreadPoolExecutor - a class that extends ThreadPoolExecutor. It can schedule tasks after a given delay or periodically.</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/reference/java/util/concurrent/FutureTask.html\" rel=\"nofollow noreferrer\">FutureTask</a></p>\n<blockquote>\n<p>FutureTask performs asynchronous processing, however, if the result is not ready yet or processing has not complete, calling get() will be block the thread</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/reference/android/content/AsyncTaskLoader.html\" rel=\"nofollow noreferrer\">AsyncTaskLoaders</a></p>\n<blockquote>\n<p>AsyncTaskLoaders as they solve a lot of problems that are inherent to AsyncTask</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/reference/android/app/IntentService.html\" rel=\"nofollow noreferrer\">IntentService</a></p>\n<blockquote>\n<p>This is the defacto choice for long running processing on Android, a good example would be to upload or download large files. The upload and download may continue even if the user exits the app and you certainly do not want to block the user from being able to use the app while these tasks are going on.</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/reference/android/app/job/JobScheduler.html\" rel=\"nofollow noreferrer\">JobScheduler</a></p>\n<blockquote>\n<p>Effectively, you have to create a Service and create a job using JobInfo.Builder that specifies your criteria for when to run the service.</p>\n</blockquote>\n<p><a href=\"https://github.com/ReactiveX/RxJava\" rel=\"nofollow noreferrer\">RxJava</a></p>\n<blockquote>\n<p>Library for composing asynchronous and event-based programs by using observable sequences.</p>\n</blockquote>\n<p><a href=\"https://kotlinlang.org/docs/reference/coroutines.html\" rel=\"nofollow noreferrer\">Coroutines</a> (Kotlin)</p>\n<blockquote>\n<p>The main gist of it is, it makes asynchronous code looks so much like synchronous</p>\n</blockquote>\n<p>Read more <a href=\"https://android.jlelse.eu/8-ways-to-do-asynchronous-processing-in-android-and-counting-f634dc6fae4e\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://medium.com/@elye.project/the-evolution-of-android-network-access-1e199fc6e9a2\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://medium.com/@frank.tan/using-a-thread-pool-in-android-e3c88f59d07f\" rel=\"nofollow noreferrer\">here</a>, <a href=\"https://guides.codepath.com/android/Managing-Threads-and-Custom-Services#handlerthread-caveats\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"owner":{"reputation":1029,"user_id":6375170,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-zugq_QmaxMM/AAAAAAAAAAI/AAAAAAAAAPQ/U_tBeKw3rDg/photo.jpg?sz=128","display_name":"Ashok Kumar","link":"https://stackoverflow.com/users/6375170/ashok-kumar"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1525944279,"creation_date":1525944279,"answer_id":50269579,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Different options:</p>\n\n<ol>\n<li><p>use normal java runnable thread to process network task and can use runOnUIThread() to update the UI</p></li>\n<li><p>intentservice/ async task can be used in case you want to update the UI after getting network response</p></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":69879,"user_id":2413303,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1","display_name":"EpicPandaForce","link":"https://stackoverflow.com/users/2413303/epicpandaforce"},"edited":false,"score":0,"creation_date":1577793222,"post_id":53714429,"comment_id":105256424,"content_license":"CC BY-SA 4.0","body":"Anko is deprecated"}],"owner":{"reputation":325,"user_id":6728443,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/c2f16743be505a3a163831cc20e6c32c?s=128&d=identicon&r=PG&f=1","display_name":"Devix","link":"https://stackoverflow.com/users/6728443/devix"},"comment_count":1,"is_accepted":false,"score":2,"last_activity_date":1544479777,"creation_date":1544479777,"answer_id":53714429,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>If you are working in kotlin and anko you can add </p>\n\n<pre><code> doAsync {\n   method()\n}\n</code></pre>\n"},{"owner":{"reputation":8351,"user_id":7258332,"user_type":"registered","accept_rate":33,"profile_image":"https://graph.facebook.com/1162962850406223/picture?type=large","display_name":"Santanu Sur","link":"https://stackoverflow.com/users/7258332/santanu-sur"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1566561792,"last_edit_date":1566561792,"creation_date":1551461855,"answer_id":54949705,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>You can use <code>Kotlin-coroutines</code></p>\n\n<pre><code> class YoutActivity : AppCompatActivity, CoroutineScope {\n\n      override fun onCreate(...) {\n         launch {  yourHeavyMethod() }\n      }\n\n      suspend fun yourHeavyMethod() {\n         with(Dispatchers.IO){ yourNetworkCall() }\n         ...\n         ...\n      }\n } \n</code></pre>\n\n<blockquote>\n  <p>You can follow <a href=\"https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#1\" rel=\"nofollow noreferrer\">this</a> guide. </p>\n</blockquote>\n"},{"owner":{"reputation":28420,"user_id":1084174,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/BsASP.png?s=128&g=1","display_name":"Sazzad Hissain Khan","link":"https://stackoverflow.com/users/1084174/sazzad-hissain-khan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1559374863,"last_edit_date":1592644375,"creation_date":1559374863,"answer_id":56404790,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<h1>Kotlin version</h1>\n<pre><code>internal class RetrieveFeedTask : AsyncTask&lt;String, Void, RSSFeed&gt;() {\n\n    override fun doInBackground(vararg urls: String): RSSFeed? {\n\n        try {\n             // download\n             // prepare RSSFeeds\n             return RSSFeeds\n\n         } catch (e: Exception) {\n\n            //handle exception\n            return null\n        }\n    }\n\n    override fun onPostExecute(feed: RSSFeed) {\n        // TODO: check this.exception\n        // TODO: do something with the feed\n    }\n}\n</code></pre>\n<p>Call example,</p>\n<pre><code>RetrieveFeedTask().execute(url)\n</code></pre>\n"},{"owner":{"reputation":987,"user_id":10835287,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tTarp.jpg?s=128&g=1","display_name":"Vipul Prajapati","link":"https://stackoverflow.com/users/10835287/vipul-prajapati"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1560142947,"last_edit_date":1560142947,"creation_date":1560142255,"answer_id":56520664,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Do this in Background Thread using <code>AsycTask</code></p>\n\n<p><strong>Java</strong></p>\n\n<pre><code>class NetworkThread extends AsyncTask&lt;String, Void, String&gt; {\n\n    protected Void doInBackground(String... arg0) {\n        //Your implementation\n    }\n\n    protected void onPostExecute(String result) {\n        // TODO: do something with the feed\n    }\n}\n</code></pre>\n\n<p>Call wherever you need</p>\n\n<pre><code>new NetworkThread().execute(\"Your URL here\");\n</code></pre>\n\n<p><strong>Kotlin</strong></p>\n\n<pre><code>internal class MyNetworkTask : AsyncTask&lt;String, Void, RSSFeed&gt;() {\n\n    override fun doInBackground(vararg urls: String): RSSFeed? {\n        try {\n             // download\n             // prepare RSSFeeds\n             return RSSFeeds\n         } catch (e: Exception) {\n            //handle exception\n            return null\n        }\n    }\n\n    override fun onPostExecute(feed: RSSFeed) {\n        // TODO: check this.exception\n        // TODO: do something with the feed\n    }\n}\n</code></pre>\n\n<p>Call in kotlin</p>\n\n<pre><code>MyNetworkTask().execute(url)\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1326,"user_id":3999808,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/BVpV8.png?s=128&g=1","display_name":"Zun","link":"https://stackoverflow.com/users/3999808/zun"},"edited":false,"score":1,"creation_date":1566546692,"post_id":57546836,"comment_id":101697854,"content_license":"CC BY-SA 4.0","body":"Horrible answer. Just stop performing tasks that take longer than 16ms to complete on the main thread"},{"owner":{"reputation":231,"user_id":10553536,"user_type":"registered","profile_image":"https://i.stack.imgur.com/P9aJT.png?s=128&g=1","display_name":"Shubham Suryawanshi","link":"https://stackoverflow.com/users/10553536/shubham-suryawanshi"},"edited":false,"score":0,"creation_date":1568360515,"post_id":57546836,"comment_id":102256521,"content_license":"CC BY-SA 4.0","body":"@RichardKamere from the official documentation for <code>StrictMode</code> you can check that &#39;StrictMode is a developer tool which detects things you might be doing by accident and brings them to your attention so you can fix them&#39; and &#39;you should never leave StrictMode enabled in applications distributed on Google Play.&#39; <a href=\"https://developer.android.com/reference/android/os/StrictMode.html\" rel=\"nofollow noreferrer\">Check Here</a>"},{"owner":{"reputation":113021,"user_id":250260,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/mLw78.png?s=128&g=1","display_name":"Jorgesys","link":"https://stackoverflow.com/users/250260/jorgesys"},"edited":false,"score":0,"creation_date":1572296689,"post_id":57546836,"comment_id":103509311,"content_license":"CC BY-SA 4.0","body":"This will help for testing purposes but cannot be considered as solution, use an asynctask instead."},{"owner":{"reputation":7696,"user_id":944593,"user_type":"registered","accept_rate":94,"profile_image":"https://www.gravatar.com/avatar/12ad4669bb7abadfcd47243e206bd170?s=128&d=identicon&r=PG","display_name":"shareef","link":"https://stackoverflow.com/users/944593/shareef"},"reply_to_user":{"reputation":1326,"user_id":3999808,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/BVpV8.png?s=128&g=1","display_name":"Zun","link":"https://stackoverflow.com/users/3999808/zun"},"edited":false,"score":0,"creation_date":1583829778,"post_id":57546836,"comment_id":107236711,"content_license":"CC BY-SA 4.0","body":"@Zun what if i want ot check internet connection on API server?"}],"owner":{"reputation":420,"user_id":9653703,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128","display_name":"Richard Kamere","link":"https://stackoverflow.com/users/9653703/richard-kamere"},"comment_count":4,"is_accepted":false,"score":5,"last_activity_date":1577793197,"last_edit_date":1577793197,"creation_date":1566149221,"answer_id":57546836,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>I had a similar problem, I just used the following in oncreate method of your activity.</p>\n\n<pre><code>//allow strict mode\nStrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\nStrictMode.setThreadPolicy(policy);\n</code></pre>\n\n<p>and it worked well.</p>\n\n<p>Caveat is that using this for a network request that takes more than 100 miliseconds will cause noticeable UI freeze and potentially ANRs (Application Not Responding), so keep that in mind.</p>\n"},{"owner":{"reputation":2518,"user_id":6295668,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/I0Oia.png?s=128&g=1","display_name":"Jinesh Francis","link":"https://stackoverflow.com/users/6295668/jinesh-francis"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1573015964,"creation_date":1573015964,"answer_id":58723311,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Android Jetpack introduced <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager\" rel=\"nofollow noreferrer\"><code>WorkManager</code></a>,which fixes the problem of background service restriction in Oreo and use of Alarm Manager below Lolipop and JobScheduler above Lolipop.</p>\n\n<p>Please use <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager\" rel=\"nofollow noreferrer\"><code>WorkManager</code></a> to run tasks on background thread and it's continue to run even after user closes the app.</p>\n"},{"owner":{"reputation":1525,"user_id":7765316,"user_type":"registered","profile_image":"https://i.stack.imgur.com/sbgMV.jpg?s=128&g=1","display_name":"majurageerthan","link":"https://stackoverflow.com/users/7765316/majurageerthan"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1577890330,"creation_date":1577890330,"answer_id":59553481,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<blockquote>\n  <p>AsyncTasks should ideally be used for short operations (a few seconds\n  at the most.) - <a href=\"https://developer.android.com/reference/android/os/AsyncTask.html\" rel=\"nofollow noreferrer\">developer-android</a></p>\n</blockquote>\n\n<p>Using <code>newCachedThreadPool</code> is the good one. also you can consider other options like <code>newSingleThreadExecutor</code>, <code>newFixedThreadPool</code></p>\n\n<pre><code>    ExecutorService myExecutor = Executors.newCachedThreadPool();\n    myExecutor.execute(new Runnable() {\n        @Override\n        public void run() {\n            URL url = new URL(urls[0]);\n            SAXParserFactory factory = SAXParserFactory.newInstance();\n            SAXParser parser = factory.newSAXParser();\n            XMLReader xmlreader = parser.getXMLReader();\n            RssHandler theRSSHandler = new RssHandler();\n            xmlreader.setContentHandler(theRSSHandler);\n            InputSource is = new InputSource(url.openStream());\n            xmlreader.parse(is);\n        }\n    });\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a> is a helper class to make this process easier. This\n  class manages the creation of a group of threads, sets their\n  priorities, and manages how work is distributed among those threads.\n  As workload increases or decreases, the class spins up or destroys\n  more threads to adjust to the workload.</p>\n</blockquote>\n\n<p>See <a href=\"https://developer.android.com/topic/performance/threads\" rel=\"nofollow noreferrer\">this</a> for more info about Android threads</p>\n"},{"owner":{"reputation":2306,"user_id":6138892,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/EzIOa.jpg?s=128&g=1","display_name":"Rahul","link":"https://stackoverflow.com/users/6138892/rahul"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1581416882,"creation_date":1581416882,"answer_id":60166784,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>On Android, network operations cannot be run on the main thread. You can use <code>Thread</code>, <code>AsyncTask</code> (short-running tasks), <code>Service</code> (long-running tasks) to do network operations. <code>android.os.NetworkOnMainThreadException</code> is thrown when an application attempts to perform a networking operation on its main thread. If your task took above five seconds, it takes a force close.</p>\n\n<p>Run your code in <code>AsyncTask</code>:</p>\n\n<pre><code>class FeedTask extends AsyncTask&lt;String, Void, Boolean&gt; {\n\n    protected RSSFeed doInBackground(String... urls) {\n       // TODO: Connect\n    }\n\n    protected void onPostExecute(RSSFeed feed) {\n        // TODO: Check this.exception\n        // TODO: Do something with the feed\n    }\n}\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>new Thread(new Runnable(){\n    @Override\n    public void run() {\n        try {\n            // Your implementation\n        }\n        catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}).start();\n</code></pre>\n\n<p><strong>This is not recommended.</strong>\nBut for DEBUG purpose you can disable the strict mode as well using the following code:</p>\n\n<pre><code>if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n    StrictMode.ThreadPolicy policy = \n        new StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n}\n</code></pre>\n"},{"owner":{"reputation":4161,"user_id":1152643,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/095bf83a49faf8a8c8282020b28dfb5b?s=128&d=identicon&r=PG","display_name":"Oleg Gryb","link":"https://stackoverflow.com/users/1152643/oleg-gryb"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1584144717,"creation_date":1584144717,"answer_id":60678608,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>These answers need to be updated to use more contemporary way to connect to servers on Internet and to process asynchronous tasks in general, e.g. you can find examples where <strong>Tasks</strong> are used in <a href=\"https://github.com/gsuitedevs/android-samples/tree/master/drive/deprecation\" rel=\"nofollow noreferrer\">Google Drive API sample</a>. The same should be used in this case. I'll use OP's original code to demonstrate this approach.</p>\n\n<p>First, you'll need to define an off-main thread executor and you need to do it only once:</p>\n\n<pre><code>        private val mExecutor: Executor = Executors.newSingleThreadExecutor()\n</code></pre>\n\n<p>Then process your logic in that executor, which will be running off main thread </p>\n\n<pre><code>        Tasks.call (mExecutor, Callable&lt;String&gt; {\n\n                val url = URL(urlToRssFeed)\n                val factory = SAXParserFactory.newInstance()\n                val parser = factory.newSAXParser()\n                val xmlreader = parser.getXMLReader()\n                val theRSSHandler = RssHandler()\n                xmlreader.setContentHandler(theRSSHandler)\n                val is = InputSource(url.openStream())\n                xmlreader.parse(is)\n                theRSSHandler.getFeed()\n                // complete processing and return String or other object\n                // e.g. you could return Boolean indicating a success or failure\n                return@Callable someResult\n        }).continueWith{\n            // it.result here is what your asynchronous task has returned\n            processResult(it.result)\n        }\n</code></pre>\n\n<p><strong>continueWith</strong> clause will be executed after your asynchronous task is completed and you will have an access to a value that has been returned by the task through <strong>it.result</strong>.</p>\n"},{"owner":{"reputation":100,"user_id":12232152,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/06047a38a129790eda78d5acbc5647d5?s=128&d=identicon&r=PG&f=1","display_name":"El Sushiboi","link":"https://stackoverflow.com/users/12232152/el-sushiboi"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1597414783,"creation_date":1597414783,"answer_id":63414575,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<h2> Kotlin </h2>\n<p>If you are using Kotlin, you can use a <code>coroutine</code></p>\n<pre><code>fun doSomeNetworkStuff() {\n    GlobalScope.launch(Dispatchers.IO) {\n        // ...\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":63,"user_id":10089961,"user_type":"registered","profile_image":"https://graph.facebook.com/1024522111030263/picture?type=large","display_name":"Shay Ribera","link":"https://stackoverflow.com/users/10089961/shay-ribera"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1602773794,"creation_date":1602773794,"answer_id":64374371,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Google deprecated the Android AsyncTask API in Android 11, even if you create a thread class outside the main activity, just by calling it in main you will get the same error, the calls must be inside a runnable thread, but if you need some asynchronous code to execute on the background or some on post afterwards here you can check out some alternatives for both Kotlin and Java</p>\n<pre><code>https://stackoverflow.com/questions/58767733/android-asynctask-api-deprecating-in-android-11-what-are-the-alternatives\n</code></pre>\n<p>the one that worked for me specifically was an answer by mayank1513 for a java 8 implementation of runnable thread found on the above link, code is as follows</p>\n<pre><code>new Thread(() -&gt; {\n        // do background stuff here\n        runOnUiThread(()-&gt;{\n            // OnPostExecute stuff here\n        });\n    }).start();\n</code></pre>\n<p>However you can define the thread first in some part of your code and start it somewhere else like this</p>\n<p>thread definition</p>\n<pre><code>Thread thread = new Thread(() -&gt; {\n            // do background stuff here\n            runOnUiThread(()-&gt;{\n                // OnPostExecute stuff here\n            });\n        });\n</code></pre>\n<p>thread call</p>\n<pre><code>thread.start();\n</code></pre>\n<p>hope this saves someone the headache of seeing deprecated AsyncTask</p>\n"},{"comments":[{"owner":{"reputation":1711,"user_id":7353562,"user_type":"registered","accept_rate":75,"profile_image":"https://graph.facebook.com/1358578430859865/picture?type=large","display_name":"Arpan Saini","link":"https://stackoverflow.com/users/7353562/arpan-saini"},"edited":false,"score":0,"creation_date":1612612458,"post_id":65882706,"comment_id":116824255,"content_license":"CC BY-SA 4.0","body":"Getting error : System.err: java.util.concurrent.ExecutionException: javax.net.ssl.SSLException: Unable to parse TLS packet header"},{"owner":{"reputation":14567,"user_id":13365,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG","display_name":"neu242","link":"https://stackoverflow.com/users/13365/neu242"},"reply_to_user":{"reputation":1711,"user_id":7353562,"user_type":"registered","accept_rate":75,"profile_image":"https://graph.facebook.com/1358578430859865/picture?type=large","display_name":"Arpan Saini","link":"https://stackoverflow.com/users/7353562/arpan-saini"},"edited":false,"score":0,"creation_date":1612781330,"post_id":65882706,"comment_id":116864347,"content_license":"CC BY-SA 4.0","body":"@ArpanSaini Does your exact URL work with curl or in a browser?  Maybe switch from https to http (or vice versa) and see if it works?"}],"owner":{"reputation":14567,"user_id":13365,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG","display_name":"neu242","link":"https://stackoverflow.com/users/13365/neu242"},"comment_count":2,"is_accepted":false,"score":0,"last_activity_date":1612781403,"last_edit_date":1612781403,"creation_date":1611569567,"answer_id":65882706,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Here's a simple solution using <code>OkHttp</code>, <code>Future</code>, <code>ExecutorService</code> and <code>Callable</code>:</p>\n<pre><code>final OkHttpClient httpClient = new OkHttpClient();\nfinal ExecutorService executor = newFixedThreadPool(3);\n\nfinal Request request = new Request.Builder().url(&quot;http://example.com&quot;).build();\n\nResponse response = executor.submit(new Callable&lt;Response&gt;() {\n   public Response call() throws IOException {\n      return httpClient.newCall(request).execute();\n   }\n}).get();\n</code></pre>\n"},{"owner":{"reputation":71,"user_id":12999770,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14GjKfIEfobe4nO9No68FYiVLBLSaQQE9cZHKujlJ=k-s128","display_name":"Sunny Gupta","link":"https://stackoverflow.com/users/12999770/sunny-gupta"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1613897689,"creation_date":1613897689,"answer_id":66300622,"question_id":6343166,"content_license":"CC BY-SA 4.0","body":"<p>Android does not allow to run long running operations on the main thread.\nSo just use a different thread and post result to main thread when needed.</p>\n<pre><code>new Thread(new Runnable() {\n        @Override\n        public void run() {\n            /*\n            // run operation here\n            */\n            //after getting result\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    //post result to main thread\n                }\n            });\n        }\n    }).start();\n</code></pre>\n"}],"owner":{"reputation":26847,"user_id":797593,"user_type":"registered","accept_rate":44,"profile_image":"https://www.gravatar.com/avatar/ed2f53c878a1477e24121d5d87d048c8?s=128&d=identicon&r=PG","display_name":"bejoy george","link":"https://stackoverflow.com/users/797593/bejoy-george"},"comment_count":5,"is_answered":true,"view_count":1289184,"protected_date":1390933774,"accepted_answer_id":6343299,"answer_count":63,"score":2497,"last_activity_date":1615389349,"creation_date":1308052920,"last_edit_date":1576047119,"question_id":6343166,"link":"https://stackoverflow.com/questions/6343166/how-to-fix-android-os-networkonmainthreadexception","title":"How to fix &#39;android.os.NetworkOnMainThreadException&#39;?","body":"<p>I got an error while running my Android project for RssReader. </p>\n\n<p>Code:</p>\n\n<pre><code>URL url = new URL(urlToRssFeed);\nSAXParserFactory factory = SAXParserFactory.newInstance();\nSAXParser parser = factory.newSAXParser();\nXMLReader xmlreader = parser.getXMLReader();\nRssHandler theRSSHandler = new RssHandler();\nxmlreader.setContentHandler(theRSSHandler);\nInputSource is = new InputSource(url.openStream());\nxmlreader.parse(is);\nreturn theRSSHandler.getFeed();\n</code></pre>\n\n<p>And it shows the below error:</p>\n\n<pre><code>android.os.NetworkOnMainThreadException\n</code></pre>\n\n<p>How can I fix this issue?</p>\n"},{"tags":["java","error-handling","return","try-catch-finally"],"comments":[{"owner":{"reputation":51307,"user_id":154152,"user_type":"registered","profile_image":"https://i.stack.imgur.com/tbD5u.jpg?s=128&g=1","display_name":"Noon Silk","link":"https://stackoverflow.com/users/154152/noon-silk"},"edited":false,"score":559,"creation_date":1273731485,"post_id":65035,"comment_id":2865351,"content_license":"CC BY-SA 2.5","body":"If it didn&#39;t, the keyword should be named <code>probably</code> instead."},{"owner":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"edited":false,"score":46,"creation_date":1379897524,"post_id":65035,"comment_id":27985422,"content_license":"CC BY-SA 3.0","body":"<a href=\"http://thedailywtf.com/Articles/My-Tales.aspx\" rel=\"nofollow noreferrer\">Not <i>always</i></a>"},{"owner":{"reputation":15591,"user_id":1068546,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/VJvqA.jpg?s=128&g=1","display_name":"Binoy Babu","link":"https://stackoverflow.com/users/1068546/binoy-babu"},"edited":false,"score":3,"creation_date":1418526539,"post_id":65035,"comment_id":43367926,"content_license":"CC BY-SA 3.0","body":"Effective java says otherwise <a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=7\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=1216151&amp;seqNum=7</a>"},{"owner":{"reputation":10534,"user_id":1371329,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/oqbUC.png?s=128&g=1","display_name":"jaco0646","link":"https://stackoverflow.com/users/1371329/jaco0646"},"reply_to_user":{"reputation":15591,"user_id":1068546,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/VJvqA.jpg?s=128&g=1","display_name":"Binoy Babu","link":"https://stackoverflow.com/users/1068546/binoy-babu"},"edited":false,"score":33,"creation_date":1468339895,"post_id":65035,"comment_id":64082518,"content_license":"CC BY-SA 3.0","body":"@BinoyBabu, <i>finalizer</i> != <code>finally</code>; <i>finalizer</i> == the <code>finalize()</code> method."},{"owner":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"reply_to_user":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"edited":false,"score":4,"creation_date":1484854857,"post_id":65035,"comment_id":70692946,"content_license":"CC BY-SA 3.0","body":"@Boann Correct, &quot;not always&quot; indeed. But then you can <i>never ever</i> use the words &quot;guaranteed&quot; or &quot;always&quot;."},{"owner":{"reputation":1301,"user_id":4681187,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/7d025467f6b411aba51f9b973c47319c?s=128&d=identicon&r=PG&f=1","display_name":"Imperishable Night","link":"https://stackoverflow.com/users/4681187/imperishable-night"},"reply_to_user":{"reputation":44714,"user_id":964243,"user_type":"registered","accept_rate":66,"profile_image":"https://i.stack.imgur.com/fL1rH.png?s=128&g=1","display_name":"Boann","link":"https://stackoverflow.com/users/964243/boann"},"edited":false,"score":2,"creation_date":1540587724,"post_id":65035,"comment_id":92936112,"content_license":"CC BY-SA 4.0","body":"@Boann I would put it this way: the execution flow always goes through finally before it escapes the try-finally structure. If it dies inside then I&#39;m fine with that, because the primary purpose of finally is to make sure things are not messed up for other parts of the code."},{"owner":{"reputation":403,"user_id":4084636,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/1E6K5.jpg?s=128&g=1","display_name":"Adrian M.","link":"https://stackoverflow.com/users/4084636/adrian-m"},"edited":false,"score":0,"creation_date":1590628079,"post_id":65035,"comment_id":109754182,"content_license":"CC BY-SA 4.0","body":"Looks like you caught quite a fish there!"},{"owner":{"reputation":6995,"user_id":816416,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG","display_name":"Vishnu Haridas","link":"https://stackoverflow.com/users/816416/vishnu-haridas"},"edited":false,"score":0,"creation_date":1600795062,"post_id":65035,"comment_id":113198551,"content_license":"CC BY-SA 4.0","body":"If the <code>finally</code> block returns a value, then the try/catch block can&#39;t return."}],"answers":[{"comments":[{"owner":{"reputation":13973,"user_id":65458,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/Nm7Is.png?s=128&g=1","display_name":"Piotr Findeisen","link":"https://stackoverflow.com/users/65458/piotr-findeisen"},"edited":false,"score":45,"creation_date":1301519539,"post_id":65049,"comment_id":6231412,"content_license":"CC BY-SA 2.5","body":"Actually <code>thread.stop()</code> does not necessarily prevent <code>finally</code> block from being executed."},{"owner":{"reputation":96967,"user_id":45664,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/YPWiu.png?s=128&g=1","display_name":"Andrzej Doyle","link":"https://stackoverflow.com/users/45664/andrzej-doyle"},"edited":false,"score":194,"creation_date":1316172288,"post_id":65049,"comment_id":9001640,"content_license":"CC BY-SA 3.0","body":"How about we say that the <code>finally</code> block will be called <i>after</i> the <code>try</code> block, and <i>before</i> control passes to the following statements.  That&#39;s consistent with the try block involving an infinite loop and hence the finally block never actually being invoked."},{"owner":{"reputation":1983,"user_id":696686,"user_type":"registered","accept_rate":48,"profile_image":"https://www.gravatar.com/avatar/47ade21a23e1adf85d6165e79430429e?s=128&d=identicon&r=PG","display_name":"dieend","link":"https://stackoverflow.com/users/696686/dieend"},"reply_to_user":{"reputation":96967,"user_id":45664,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/YPWiu.png?s=128&g=1","display_name":"Andrzej Doyle","link":"https://stackoverflow.com/users/45664/andrzej-doyle"},"edited":false,"score":0,"creation_date":1366530249,"post_id":65049,"comment_id":23038943,"content_license":"CC BY-SA 3.0","body":"By @andrzejDoyle definition, it will return <code>success</code> first before going to <code>finally</code> block. Is that correct?"},{"owner":{"reputation":2745,"user_id":2071258,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/6da5a603fd4dcea53e578bcfac0c178b?s=128&d=identicon&r=PG","display_name":"Laurent LA RIZZA","link":"https://stackoverflow.com/users/2071258/laurent-la-rizza"},"reply_to_user":{"reputation":1983,"user_id":696686,"user_type":"registered","accept_rate":48,"profile_image":"https://www.gravatar.com/avatar/47ade21a23e1adf85d6165e79430429e?s=128&d=identicon&r=PG","display_name":"dieend","link":"https://stackoverflow.com/users/696686/dieend"},"edited":false,"score":1,"creation_date":1372395650,"post_id":65049,"comment_id":25187937,"content_license":"CC BY-SA 3.0","body":"@dieend: It will decide that the return value will be success, executes the finally block, then gives back control to the calling function. Nothing will be returned if the finally block throws."},{"owner":{"reputation":4066,"user_id":1021970,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/xmiuH.jpg?s=128&g=1","display_name":"ruhungry","link":"https://stackoverflow.com/users/1021970/ruhungry"},"edited":false,"score":9,"creation_date":1395520774,"post_id":65049,"comment_id":34379394,"content_license":"CC BY-SA 3.0","body":"there is also another case, when we use nested <b>try-catch-finally</b> blocks"},{"owner":{"reputation":711,"user_id":3187521,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/11dcaa3d3173757107f075c0a45c2f39?s=128&d=identicon&r=PG&f=1","display_name":"Amrish Pandey","link":"https://stackoverflow.com/users/3187521/amrish-pandey"},"edited":false,"score":7,"creation_date":1410437266,"post_id":65049,"comment_id":40330727,"content_license":"CC BY-SA 3.0","body":"also, finally block is not called in case of exception thrown by daemon thread."},{"owner":{"reputation":15591,"user_id":1068546,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/VJvqA.jpg?s=128&g=1","display_name":"Binoy Babu","link":"https://stackoverflow.com/users/1068546/binoy-babu"},"edited":false,"score":1,"creation_date":1418526486,"post_id":65049,"comment_id":43367918,"content_license":"CC BY-SA 3.0","body":"But effective java says otherwise. <a href=\"http://www.informit.com/articles/article.aspx?p=1216151&amp;seqNum=7\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=1216151&amp;seqNum=7</a>"},{"owner":{"reputation":558,"user_id":2942487,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/JYegH.jpg?s=128&g=1","display_name":"Mikhail Krutov","link":"https://stackoverflow.com/users/2942487/mikhail-krutov"},"edited":false,"score":1,"creation_date":1439684562,"post_id":65049,"comment_id":51962823,"content_license":"CC BY-SA 3.0","body":"This is rather interesting that finally would be called when one re-throws his exception in catch() as new RuntimeException."},{"owner":{"reputation":1508,"user_id":1526421,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/97Hjn.png?s=128&g=1","display_name":"avmohan","link":"https://stackoverflow.com/users/1526421/avmohan"},"reply_to_user":{"reputation":15591,"user_id":1068546,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/VJvqA.jpg?s=128&g=1","display_name":"Binoy Babu","link":"https://stackoverflow.com/users/1068546/binoy-babu"},"edited":false,"score":15,"creation_date":1483611421,"post_id":65049,"comment_id":70169722,"content_license":"CC BY-SA 3.0","body":"@BinoyBabu - That&#39;s about finalizer, not finally block"},{"owner":{"reputation":30803,"user_id":2674303,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/411d782b77899035a96abb71b64e062a?s=128&d=identicon&r=PG","display_name":"gstackoverflow","link":"https://stackoverflow.com/users/2674303/gstackoverflow"},"edited":false,"score":3,"creation_date":1489394117,"post_id":65049,"comment_id":72634158,"content_license":"CC BY-SA 3.0","body":"What about <b>Runtime#halt</b> ?"},{"owner":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"reply_to_user":{"reputation":711,"user_id":3187521,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/11dcaa3d3173757107f075c0a45c2f39?s=128&d=identicon&r=PG&f=1","display_name":"Amrish Pandey","link":"https://stackoverflow.com/users/3187521/amrish-pandey"},"edited":false,"score":2,"creation_date":1493125187,"post_id":65049,"comment_id":74271559,"content_license":"CC BY-SA 3.0","body":"@AmrishPandey &quot;finally block is not called in case of exception thrown by daemon thread&quot; - really?? [Citation Needed], I think?"},{"owner":{"reputation":711,"user_id":3187521,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/11dcaa3d3173757107f075c0a45c2f39?s=128&d=identicon&r=PG&f=1","display_name":"Amrish Pandey","link":"https://stackoverflow.com/users/3187521/amrish-pandey"},"reply_to_user":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"edited":false,"score":0,"creation_date":1496681028,"post_id":65049,"comment_id":75748360,"content_license":"CC BY-SA 3.0","body":"@SusanW <a href=\"http://javarevisited.blogspot.in/2012/03/what-is-daemon-thread-in-java-and.html?m=1\" rel=\"nofollow noreferrer\">javarevisited.blogspot.in/2012/03/&hellip;</a>"},{"owner":{"reputation":711,"user_id":3187521,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/11dcaa3d3173757107f075c0a45c2f39?s=128&d=identicon&r=PG&f=1","display_name":"Amrish Pandey","link":"https://stackoverflow.com/users/3187521/amrish-pandey"},"reply_to_user":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"edited":false,"score":0,"creation_date":1496681143,"post_id":65049,"comment_id":75748423,"content_license":"CC BY-SA 3.0","body":"@SusanW <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/exceptions/&hellip;</a>"},{"owner":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"reply_to_user":{"reputation":711,"user_id":3187521,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/11dcaa3d3173757107f075c0a45c2f39?s=128&d=identicon&r=PG&f=1","display_name":"Amrish Pandey","link":"https://stackoverflow.com/users/3187521/amrish-pandey"},"edited":false,"score":4,"creation_date":1496686872,"post_id":65049,"comment_id":75751439,"content_license":"CC BY-SA 3.0","body":"@AmrishPandey The Oracle page doesn&#39;t mention daemons at all. The other (blogger) page discusses a JVM <i>terminating</i>, but fails to go on to show any difference vs a non-daemon thread. Reality is: on System.exit completion (incl shutdown hooks) or other termination, all threads just die where they are standing whether daemon or not: no finallys get executed either way. The blogger is incorrect where they note this as a difference ... try it yourself."},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"reply_to_user":{"reputation":1473,"user_id":5851520,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1050ad350ce5bed47c2db205b54c3f16?s=128&d=identicon&r=PG&f=1","display_name":"SusanW","link":"https://stackoverflow.com/users/5851520/susanw"},"edited":false,"score":1,"creation_date":1503191813,"post_id":65049,"comment_id":78512858,"content_license":"CC BY-SA 3.0","body":"@SusanW - Correct.  The reason that the daemon thread is not executing <code>finally</code> in that example is reason 3).  It is in an infinite loop.  If the loop wasn&#39;t there, then it could also fail to execute the <code>finally</code> for reason 1).  When <code>main</code> method returns (and there are no non-daemon threads) it executes <code>System.exit()</code> ... or the equivalent.  Bottom line: daemon threads are NOT an exception to the reasons given by the Answer above."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":4,"creation_date":1514992639,"post_id":65049,"comment_id":83134342,"content_license":"CC BY-SA 3.0","body":"Infinite loop is not really an exception to the &quot;finally will be called when try block finishes&quot; rule. Even with an infinite loop in the try block, the finally block still <i>will</i> execute <b><i>when the try block finishes</i></b>, as usual - the try block just does not finish. This is not a special case."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":2,"creation_date":1514992833,"post_id":65049,"comment_id":83134464,"content_license":"CC BY-SA 3.0","body":"&quot;The host system dies; eg. power failure, hardware error...&quot; is not really an exception to the finally block rule either. That&#39;s like &quot;will <code>return 1+1</code> always return 2?&quot; &quot;Not necessarily; a power loss can stop <code>return 1+1</code> from returning 2.&quot; ... not really a part of the answer. Same thing with #4, the <code>kill -9</code> example; it is sufficient for #4 and #5 both that #2 &quot;JVM crash&quot; is listed, which could be worded &quot;JVM terminates abruptly&quot; to better catch all situations."},{"owner":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"edited":false,"score":0,"creation_date":1519830023,"post_id":65049,"comment_id":85069632,"content_license":"CC BY-SA 3.0","body":"<code>finally</code> is also executed when a <code>StackOverflowError</code> is thrown."},{"owner":{"reputation":3248,"user_id":3948862,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/pXuEe.jpg?s=128&g=1","display_name":"D&#225;vid Horv&#225;th","link":"https://stackoverflow.com/users/3948862/d%c3%a1vid-horv%c3%a1th"},"edited":false,"score":1,"creation_date":1525356275,"post_id":65049,"comment_id":87331761,"content_license":"CC BY-SA 4.0","body":"Java&#39;s<code>System.exit();</code> (like C#&#39;s or PHP&#39;s) can be confusing for developers coming from other programming languages. In Python <code>sys.exit()</code> raises a (regular) <code>SystemExit</code> exception that can be catched. In Pascal <code>exit</code> is a regular control statement, and <code>finally</code> will be executed too."},{"owner":{"reputation":3024,"user_id":1941654,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0e446b8cae7132038fefdb922b7d233?s=128&d=identicon&r=PG","display_name":"Mike Hill","link":"https://stackoverflow.com/users/1941654/mike-hill"},"reply_to_user":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"edited":false,"score":2,"creation_date":1533136542,"post_id":65049,"comment_id":90238047,"content_license":"CC BY-SA 4.0","body":"@MCEmperor, to piggy-back on this, although <code>finally</code> is executed even after a <code>StackOverflowError</code>, frames added to the stack within a <code>finally</code> block can cause an unexpected <i>additional</i> <code>StackOverflowError</code>, leading to the remaining contents of the <code>finally</code> block being skipped. For this reason, <code>StackOverflowError</code> errors can be quite dangerous. We recently ran into a difficult issue with semaphores not being released in a <code>finally</code> block for this very reason."},{"owner":{"reputation":1024,"user_id":209394,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7b41fcdb3406c69e82a480948bbc7f81?s=128&d=identicon&r=PG","display_name":"JugsteR","link":"https://stackoverflow.com/users/209394/jugster"},"edited":false,"score":2,"creation_date":1534231623,"post_id":65049,"comment_id":90625255,"content_license":"CC BY-SA 4.0","body":"Q: Does it always? A: Yes, except... To me this means the accepted answer should be no. If there is exceptions to always, then its no. It may run most of the time. But not always. I am surprised I am one of few to react on this."},{"owner":{"reputation":5505,"user_id":1858327,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/i9v0b.jpg?s=128&g=1","display_name":"Captain Man","link":"https://stackoverflow.com/users/1858327/captain-man"},"reply_to_user":{"reputation":1024,"user_id":209394,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7b41fcdb3406c69e82a480948bbc7f81?s=128&d=identicon&r=PG","display_name":"JugsteR","link":"https://stackoverflow.com/users/209394/jugster"},"edited":false,"score":0,"creation_date":1536863193,"post_id":65049,"comment_id":91586796,"content_license":"CC BY-SA 4.0","body":"@JugsteR All of the cases when it doesn&#39;t is when something crazy happens like someone force killing the process, it entering an infinite loop, or the power going out. To me, if it behaves a certain way except in those most extreme of edge cases it&#39;s fine to say &quot;yes always, except...&quot; instead of &quot;no&quot;. Actually, in the case of an infinite loop, it <i>would</i> still execute the finally, it&#39;s just that it never finishes what it&#39;s doing before it."},{"owner":{"reputation":3045,"user_id":956880,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/8wevB.png?s=128&g=1","display_name":"Anonymous Coward","link":"https://stackoverflow.com/users/956880/anonymous-coward"},"edited":false,"score":1,"creation_date":1540424284,"post_id":65049,"comment_id":92865128,"content_license":"CC BY-SA 4.0","body":"If the machine is suspended. If the kernel never again gives the JVM time to execute. There are probably many more edge cases when finally is not executed. This answer gives a good and easy to understand explanation. But it would be easier and more simple to say <i>&quot;If the try block or try-catch block completes then the finally block is executed.&quot;</i> The JLS uses this same kind of language."},{"owner":{"reputation":17303,"user_id":257299,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/cVFYE.png?s=128&g=1","display_name":"kevinarpe","link":"https://stackoverflow.com/users/257299/kevinarpe"},"edited":false,"score":0,"creation_date":1607602624,"post_id":65049,"comment_id":115327545,"content_license":"CC BY-SA 4.0","body":"Another one: When I debug using IntelliJ, if I drop stack frame inside a <code>try</code> block (that also has an associated <code>finally</code> block), I am asked by IntelliJ if I want to execute the <code>finally</code> block or not.  I&#39;m not sure if this is a standard Java debugger feature, or something IntelliJ developed themselves."}],"owner":{"reputation":47035,"user_id":4223,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/dd30e98147680eebcd4904bcca51cf3d?s=128&d=identicon&r=PG","display_name":"jodonnell","link":"https://stackoverflow.com/users/4223/jodonnell"},"comment_count":24,"is_accepted":true,"score":2819,"last_activity_date":1572558477,"last_edit_date":1572558477,"creation_date":1221500739,"answer_id":65049,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>Yes, <code>finally</code> will be called after the execution of the <code>try</code> or <code>catch</code> code blocks.</p>\n\n<p>The only times <code>finally</code> won't be called are:</p>\n\n<ol>\n<li>If you invoke <code>System.exit()</code></li>\n<li>If you invoke <code>Runtime.getRuntime().halt(exitStatus)</code></li>\n<li>If the JVM crashes first</li>\n<li>If the JVM reaches an infinite loop (or some other non-interruptable, non-terminating statement) in the <code>try</code> or <code>catch</code> block</li>\n<li>If the OS forcibly terminates the JVM process; e.g., <code>kill -9 &lt;pid&gt;</code> on UNIX</li>\n<li>If the host system dies; e.g., power failure, hardware error, OS panic, et cetera</li>\n<li>If the <code>finally</code> block is going to be executed by a daemon thread and all other non-daemon threads exit before <code>finally</code> is called</li>\n</ol>\n"},{"owner":{"reputation":8023,"user_id":7616,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/65200fa240ec9fd105e5aae657d22dbb?s=128&d=identicon&r=PG","display_name":"shyam","link":"https://stackoverflow.com/users/7616/shyam"},"comment_count":0,"is_accepted":false,"score":20,"last_activity_date":1453203596,"last_edit_date":1453203596,"creation_date":1221500778,"answer_id":65056,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>finally is always executed unless there is abnormal program termination (like calling System.exit(0)..). so, your sysout will get printed</p>\n"},{"owner":{"reputation":34249,"user_id":3320,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/82b1a2cb56adfa86634e7310ff639064?s=128&d=identicon&r=PG","display_name":"Mendelt","link":"https://stackoverflow.com/users/3320/mendelt"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1221500800,"creation_date":1221500800,"answer_id":65059,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Yes it will get called. That's the whole point of having a finally keyword. If jumping out of the try/catch block could just skip the finally block it was the same as putting the System.out.println outside the try/catch.</p>\n"},{"comments":[{"owner":{"reputation":7276,"user_id":448357,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/2a937e2f64c4fa7c3a0baf9d1b13a52d?s=128&d=identicon&r=PG","display_name":"Alexander Pacha","link":"https://stackoverflow.com/users/448357/alexander-pacha"},"edited":false,"score":18,"creation_date":1383206913,"post_id":65185,"comment_id":29264486,"content_license":"CC BY-SA 3.0","body":"FYI: In C# the behaviour is identical apart from the fact that replacing the statement in the <code>finally</code>-clause with <code>return 2;</code> is not allowed (Compiler-Error)."},{"owner":{"reputation":6091,"user_id":2684342,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/wsLfH.jpg?s=128&g=1","display_name":"WoodenKitty","link":"https://stackoverflow.com/users/2684342/woodenkitty"},"edited":false,"score":15,"creation_date":1386113877,"post_id":65185,"comment_id":30401604,"content_license":"CC BY-SA 3.0","body":"Here is an important detail to be aware of: <a href=\"http://stackoverflow.com/a/20363941/2684342\">stackoverflow.com/a/20363941/2684342</a>"},{"owner":{"reputation":1343,"user_id":1712683,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/72d2f7808eddcfec4f7b3ab164de3fb1?s=128&d=identicon&r=PG&f=1","display_name":"Harry","link":"https://stackoverflow.com/users/1712683/harry"},"edited":false,"score":0,"creation_date":1414300803,"post_id":65185,"comment_id":41758768,"content_license":"CC BY-SA 3.0","body":"IF YOU ADD CATCH BLOCK, <code>error: missing return statement</code>"},{"owner":{"reputation":1270,"user_id":593146,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/2404c3e4304714294c0458b3feb39ff0?s=128&d=identicon&r=PG","display_name":"Zyl","link":"https://stackoverflow.com/users/593146/zyl"},"edited":false,"score":20,"creation_date":1429118733,"post_id":65185,"comment_id":47453228,"content_license":"CC BY-SA 3.0","body":"You can even add a return statement in the finally block itself, which will then override the previous return value. This also magically discards unhandled exceptions. At that point, you should consider refactoring your code."},{"owner":{"reputation":367,"user_id":2949494,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0753176b73a13711922576888755bdb3?s=128&d=identicon&r=PG&f=1","display_name":"Trimtab","link":"https://stackoverflow.com/users/2949494/trimtab"},"edited":false,"score":9,"creation_date":1466482819,"post_id":65185,"comment_id":63320862,"content_license":"CC BY-SA 3.0","body":"That does not really prove that finally trumps return. The return value is printed from the caller code. Doesn&#39;t seem to prove much."},{"owner":{"reputation":6332,"user_id":1058366,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6bb8c0b2d5a8664a0fb932a8c9f37b38?s=128&d=identicon&r=PG","display_name":"Kevin","link":"https://stackoverflow.com/users/1058366/kevin"},"reply_to_user":{"reputation":367,"user_id":2949494,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0753176b73a13711922576888755bdb3?s=128&d=identicon&r=PG&f=1","display_name":"Trimtab","link":"https://stackoverflow.com/users/2949494/trimtab"},"edited":false,"score":0,"creation_date":1466539341,"post_id":65185,"comment_id":63355643,"content_license":"CC BY-SA 3.0","body":"@Trimtab, Yes, it&#39;s only answering the question as asked. <a href=\"http://stackoverflow.com/a/20363941/1058366\">Tristan&#39;s answer</a> clarifies that the value to return is evaluated, the <code>finally</code> block is run, and then control is returned to the caller."},{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":22,"creation_date":1503192261,"post_id":65185,"comment_id":78512912,"content_license":"CC BY-SA 3.0","body":"Sorry, but this is a demonstration not a proof.  It is only a proof if you can show that this example always behaves this way on all Java platforms, AND that similar examples also always behave this way."},{"owner":{"reputation":1166,"user_id":8272600,"user_type":"registered","profile_image":"https://i.stack.imgur.com/pMuKT.jpg?s=128&g=1","display_name":"Julio Cezar Silva","link":"https://stackoverflow.com/users/8272600/julio-cezar-silva"},"edited":false,"score":3,"creation_date":1597422037,"post_id":65185,"comment_id":112136911,"content_license":"CC BY-SA 4.0","body":"On a very off-topic side note, I&#39;m <i>politically</i> sure this print statement is gonna age like milk."}],"owner":{"reputation":6332,"user_id":1058366,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6bb8c0b2d5a8664a0fb932a8c9f37b38?s=128&d=identicon&r=PG","display_name":"Kevin","link":"https://stackoverflow.com/users/1058366/kevin"},"comment_count":8,"is_accepted":false,"score":587,"last_activity_date":1512494406,"last_edit_date":1512494406,"creation_date":1221501592,"answer_id":65185,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Example code:</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(Test.test());\n}\n\npublic static int test() {\n    try {\n        return 0;\n    }\n    finally {\n        System.out.println(\"finally trumps return.\");\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>finally trumps return. \n0\n</code></pre>\n"},{"owner":{"reputation":40161,"user_id":1559,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/e74e26bfd345fdd80bedf436178c5829?s=128&d=identicon&r=PG","display_name":"Scott Dorman","link":"https://stackoverflow.com/users/1559/scott-dorman"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1221501785,"creation_date":1221501785,"answer_id":65219,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>That's actually true in any language...finally will always execute before a return statement, no matter where that return is in the method body. If that wasn't the case, the finally block wouldn't have much meaning.</p>\n"},{"owner":{"reputation":229,"user_id":9189,"user_type":"registered","display_name":"user9189","link":"https://stackoverflow.com/users/9189/user9189"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1493848417,"last_edit_date":1493848417,"creation_date":1221502315,"answer_id":65282,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>The finally block is always executed unless there is abnormal program termination, either resulting from a JVM crash or from a call to <code>System.exit(0)</code>.</p>\n\n<p>On top of that, any value returned from within the finally block will override the value returned prior to execution of the finally block, so be careful of checking all exit points when using try finally.</p>\n"},{"comments":[{"owner":{"reputation":20340,"user_id":3535,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/7b4287aaf0ec5c4432a3cea172c4ed99?s=128&d=identicon&r=PG","display_name":"John Meagher","link":"https://stackoverflow.com/users/3535/john-meagher"},"edited":false,"score":98,"creation_date":1221533276,"post_id":65362,"comment_id":6598,"content_license":"CC BY-SA 2.5","body":"This is a REALLY bad practice.  See <a href=\"http://stackoverflow.com/questions/48088/returning-from-a-finally-block-in-java\" title=\"returning from a finally block in java\">stackoverflow.com/questions/48088/&hellip;</a> for more info about why it&#39;s bad."},{"owner":{"reputation":14567,"user_id":13365,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/c2c5b0152d840d838de072a4ef32453b?s=128&d=identicon&r=PG","display_name":"neu242","link":"https://stackoverflow.com/users/13365/neu242"},"edited":false,"score":23,"creation_date":1224659540,"post_id":65362,"comment_id":92201,"content_license":"CC BY-SA 2.5","body":"Agreed.  A return within finally{} ignores any exception thrown in try{}.  Scary!"},{"owner":{"reputation":2118,"user_id":682263,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/vYPIh.jpg?s=128&g=1","display_name":"dominicbri7","link":"https://stackoverflow.com/users/682263/dominicbri7"},"edited":false,"score":1,"creation_date":1310044468,"post_id":65362,"comment_id":7802757,"content_license":"CC BY-SA 3.0","body":"No matter what, I always have ONLY ONE <code>return</code> statement in my methods (which is at the end), well except when its <code>void</code>. That&#39;s what they taught me at school and I think it&#39;s a better practice too."},{"owner":{"reputation":76229,"user_id":330057,"user_type":"registered","accept_rate":77,"profile_image":"https://i.stack.imgur.com/i6yM6.png?s=128&g=1","display_name":"corsiKa","link":"https://stackoverflow.com/users/330057/corsika"},"reply_to_user":{"reputation":2118,"user_id":682263,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/vYPIh.jpg?s=128&g=1","display_name":"dominicbri7","link":"https://stackoverflow.com/users/682263/dominicbri7"},"edited":false,"score":8,"creation_date":1310502396,"post_id":65362,"comment_id":7888247,"content_license":"CC BY-SA 3.0","body":"@dominicbri7 Why do you think it&#39;s a better practice? And why should it be different when the function/method is void?"},{"owner":{"reputation":2118,"user_id":682263,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/vYPIh.jpg?s=128&g=1","display_name":"dominicbri7","link":"https://stackoverflow.com/users/682263/dominicbri7"},"edited":false,"score":8,"creation_date":1310557631,"post_id":65362,"comment_id":7898943,"content_license":"CC BY-SA 3.0","body":"For the same reason I NEVER use goto&#39;s in my C++ codes. I think multiple returns makes it harder to read and more difficult to debug (of course in really simple cases it doesn&#39;t apply). I guess that&#39;s just personnal preferrence and in the end you can achieve the same thing using either method"},{"owner":{"reputation":141,"user_id":1135142,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/2df4ad9b48bba1df1ecbd09fd9f4be44?s=128&d=identicon&r=PG","display_name":"iHearGeoff","link":"https://stackoverflow.com/users/1135142/iheargeoff"},"edited":false,"score":16,"creation_date":1361575440,"post_id":65362,"comment_id":21130316,"content_license":"CC BY-SA 3.0","body":"I tend to use a number of returns when some kind of exceptional case happens. Like if(there is a reason not to continue) return;"},{"owner":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"edited":false,"score":0,"creation_date":1403985966,"post_id":65362,"comment_id":37872968,"content_license":"CC BY-SA 3.0","body":"I interpret <code>finally</code> block as a shorthand for writing the same code at the end of each <code>catch</code> block: `catch (Exc exc) { doSome(); } catch (AnotherExc exc) { doSome(); }"},{"owner":{"reputation":831,"user_id":1257384,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/1f017a62966e81d7a641becd180dea51?s=128&d=identicon&r=PG","display_name":"GregT","link":"https://stackoverflow.com/users/1257384/gregt"},"reply_to_user":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"edited":false,"score":0,"creation_date":1496243616,"post_id":65362,"comment_id":75583766,"content_license":"CC BY-SA 3.0","body":"@MCEmperor Not the same, because as the answer states, if the <code>finally</code> block has a return statement, it will override the one in the <code>catch</code> block. You cannot do it with <code>catch</code>."},{"owner":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"edited":false,"score":0,"creation_date":1589074080,"post_id":65362,"comment_id":109147967,"content_license":"CC BY-SA 4.0","body":"@MooBob42, should do it with embedded finallys"},{"owner":{"reputation":673,"user_id":5119030,"user_type":"registered","accept_rate":71,"profile_image":"https://graph.facebook.com/10206413200742635/picture?type=large","display_name":"Mikheil Zhghenti","link":"https://stackoverflow.com/users/5119030/mikheil-zhghenti"},"edited":false,"score":0,"creation_date":1600636180,"post_id":65362,"comment_id":113142795,"content_license":"CC BY-SA 4.0","body":"Very interesting example provided."}],"owner":{"reputation":4045,"user_id":9271,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/49d0b320a3031596677b56f3dcc9134e?s=128&d=identicon&r=PG","display_name":"MooBob42","link":"https://stackoverflow.com/users/9271/moobob42"},"comment_count":10,"is_accepted":false,"score":402,"last_activity_date":1221502793,"creation_date":1221502793,"answer_id":65362,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Also, although it's bad practice, if there is a return statement within the finally block, it will trump any other return from the regular block. That is, the following block would return false:</p>\n\n<pre><code>try { return true; } finally { return false; }\n</code></pre>\n\n<p>Same thing with throwing exceptions from the finally block.</p>\n"},{"owner":{"reputation":2571,"user_id":6770,"user_type":"registered","accept_rate":26,"profile_image":"https://www.gravatar.com/avatar/411bea3733c8d8d41e914b0b650d7f9e?s=128&d=identicon&r=PG","display_name":"James A. N. Stauffer","link":"https://stackoverflow.com/users/6770/james-a-n-stauffer"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1221506775,"creation_date":1221506775,"answer_id":65943,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Also a return in finally will throw away any exception.  <a href=\"http://jamesjava.blogspot.com/2006/03/dont-return-in-finally-clause.html\" rel=\"noreferrer\">http://jamesjava.blogspot.com/2006/03/dont-return-in-finally-clause.html</a></p>\n"},{"comments":[{"owner":{"reputation":565,"user_id":305487,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/16b3feebb5942965f36411566f66de2d?s=128&d=identicon&r=PG","display_name":"matias","link":"https://stackoverflow.com/users/305487/matias"},"edited":false,"score":10,"creation_date":1274902052,"post_id":65949,"comment_id":2967905,"content_license":"CC BY-SA 2.5","body":"Is this just &quot;a logical way to think about it&quot; or is it really how the finally block is intended to work according to the specifications ? A link to a Sun resource would be very interesting in here."}],"owner":{"reputation":10424,"user_id":2635682,"user_type":"registered","accept_rate":60,"profile_image":"https://graph.facebook.com/100000529711018/picture?type=large","display_name":"Garth Gilmour","link":"https://stackoverflow.com/users/2635682/garth-gilmour"},"comment_count":1,"is_accepted":false,"score":41,"last_activity_date":1221506804,"creation_date":1221506804,"answer_id":65949,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>A logical way to think about this is:</p>\n\n<ol>\n<li>Code placed in a finally block must be executed <strong>whatever occurs</strong> within the try block</li>\n<li>So if code in the try block tries to return a value or throw an exception the item is placed 'on the shelf' till the finally block can execute</li>\n<li>Because code in the finally block has (by definition) a high priority it can return or throw whatever it likes. In which case anything left 'on the shelf' is discarded.</li>\n<li>The only exception to this is if the VM shuts down completely during the try block e.g. by 'System.exit'</li>\n</ol>\n"},{"owner":{"reputation":64779,"user_id":7671,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/4b6b8c8935300db9089a9277d7e76a88?s=128&d=identicon&r=PG","display_name":"Alex Miller","link":"https://stackoverflow.com/users/7671/alex-miller"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1222874144,"creation_date":1222874144,"answer_id":158141,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>In addition to the point about return in finally replacing a return in the try block, the same is true of an exception.  A finally block that throws an exception will replace a return or exception thrown from within the try block.</p>\n"},{"comments":[{"owner":{"reputation":1439,"user_id":5191731,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/ff87f873ff5492f763e544405c951fd8?s=128&d=identicon&r=PG&f=1","display_name":"HopefullyHelpful","link":"https://stackoverflow.com/users/5191731/hopefullyhelpful"},"edited":false,"score":11,"creation_date":1473325912,"post_id":296053,"comment_id":66100467,"content_license":"CC BY-SA 3.0","body":"This example is awesome, it adds something that hasn&#39;t been mentioned in dozens finally related threads. I think barely any developer will know this."},{"owner":{"reputation":1044,"user_id":1316459,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/6XQL4.jpg?s=128&g=1","display_name":"Yamcha","link":"https://stackoverflow.com/users/1316459/yamcha"},"edited":false,"score":4,"creation_date":1473454222,"post_id":296053,"comment_id":66164133,"content_license":"CC BY-SA 3.0","body":"What if <code>i</code> was not a primitive, but an Integer object."},{"owner":{"reputation":465,"user_id":1930283,"user_type":"registered","accept_rate":27,"profile_image":"https://www.gravatar.com/avatar/193057ef470dd5aca709d2de7e59c123?s=128&d=identicon&r=PG","display_name":"meexplorer","link":"https://stackoverflow.com/users/1930283/meexplorer"},"edited":false,"score":0,"creation_date":1479234079,"post_id":296053,"comment_id":68467998,"content_license":"CC BY-SA 3.0","body":"I am having a hard time understanding this case. <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.17\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14&zwnj;&#8203;.17</a> says that, &quot;A return statement with an Expression attempts to transfer control to the invoker of the method or lambda body that contains it.... If evaluation of the Expression completes normally, producing a value V..&quot; What I could guess from this statement is- it seems that return doesn&#39;t evaluate the expression again once it evaluates value V, that&#39;s why changed i doesn&#39;t affect the returned value, correct me."},{"owner":{"reputation":465,"user_id":1930283,"user_type":"registered","accept_rate":27,"profile_image":"https://www.gravatar.com/avatar/193057ef470dd5aca709d2de7e59c123?s=128&d=identicon&r=PG","display_name":"meexplorer","link":"https://stackoverflow.com/users/1930283/meexplorer"},"edited":false,"score":0,"creation_date":1479234431,"post_id":296053,"comment_id":68468182,"content_license":"CC BY-SA 3.0","body":"But I coudn&#39;t found any proof regarding this, where is it mentioned that return doesn&#39;t evaluate the expression again."},{"owner":{"reputation":27490,"user_id":85421,"user_type":"registered","profile_image":"https://i.stack.imgur.com/kKvXH.gif?s=128&g=1","display_name":"user85421","link":"https://stackoverflow.com/users/85421/user85421"},"reply_to_user":{"reputation":465,"user_id":1930283,"user_type":"registered","accept_rate":27,"profile_image":"https://www.gravatar.com/avatar/193057ef470dd5aca709d2de7e59c123?s=128&d=identicon&r=PG","display_name":"meexplorer","link":"https://stackoverflow.com/users/1930283/meexplorer"},"edited":false,"score":1,"creation_date":1495048696,"post_id":296053,"comment_id":75092677,"content_license":"CC BY-SA 3.0","body":"@meexplorer a bit late, but it is explained in <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2-100-C\" rel=\"nofollow noreferrer\">JLS 14.20.2. Execution of try-finally and try-catch-finally</a> - worded a bit complicated, <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.17-430\" rel=\"nofollow noreferrer\">14.17. The return Statement</a> must also be read"},{"owner":{"reputation":309,"user_id":1863039,"user_type":"registered","accept_rate":45,"profile_image":"https://www.gravatar.com/avatar/c86ddea17f6a22b13eeb16c1a4e026f3?s=128&d=identicon&r=PG","display_name":"Ngupta","link":"https://stackoverflow.com/users/1863039/ngupta"},"edited":false,"score":0,"creation_date":1496666156,"post_id":296053,"comment_id":75739083,"content_license":"CC BY-SA 3.0","body":"@ Yamcha  It would still be same"},{"owner":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":0,"creation_date":1526317520,"post_id":296053,"comment_id":87687310,"content_license":"CC BY-SA 4.0","body":"I believe that if you added a return statement to the finally block, the value returned would be 12, not 2.  The example basically shows that the finally block is pushed onto the call stack exactly the same as calling a method - that makes a local copy of i, which reverts to 2 after the stack is popped."}],"owner":{"reputation":1219,"user_id":38266,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/39acc5e19eabed7db5dcdf3834cfd752?s=128&d=identicon&r=PG","display_name":"vibhash","link":"https://stackoverflow.com/users/38266/vibhash"},"comment_count":7,"is_accepted":false,"score":121,"last_activity_date":1423368180,"last_edit_date":1423368180,"creation_date":1226939136,"answer_id":296053,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>I tried the above example with slight modification-</p>\n\n<pre><code>public static void main(final String[] args) {\n    System.out.println(test());\n}\n\npublic static int test() {\n    int i = 0;\n    try {\n        i = 2;\n        return i;\n    } finally {\n        i = 12;\n        System.out.println(\"finally trumps return.\");\n    }\n}\n</code></pre>\n\n<p>The above code outputs:</p>\n\n<blockquote>\n  <p>finally trumps return.<br>\n  2</p>\n</blockquote>\n\n<p>This is because when <code>return i;</code> is executed <code>i</code> has a value 2. After this the <code>finally</code> block is executed where 12 is assigned to <code>i</code> and then <code>System.out</code> out is executed.</p>\n\n<p>After executing the <code>finally</code> block the <code>try</code> block returns 2, rather than returning 12, because this return statement is not executed again.</p>\n\n<p>If you will debug this code in Eclipse then you'll get a feeling that after executing <code>System.out</code> of <code>finally</code> block the <code>return</code> statement of <code>try</code> block is executed again. But this is not the case. It simply returns the value 2.</p>\n"},{"owner":{"reputation":98071,"user_id":3848,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/W10YY.jpg?s=128&g=1","display_name":"Motti","link":"https://stackoverflow.com/users/3848/motti"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1273731833,"last_edit_date":1273731833,"creation_date":1273731503,"answer_id":2824754,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Finally is always run that's the whole point, just because it appears in the code after the return doesn't mean that that's how it's implemented. The Java runtime has the responsibility to run this code when exiting the <code>try</code> block.</p>\n\n<p>For example if you have the following:</p>\n\n<pre><code>int foo() { \n    try {\n        return 42;\n    }\n    finally {\n        System.out.println(\"done\");\n    }\n}\n</code></pre>\n\n<p>The runtime will generate something like this:</p>\n\n<pre><code>int foo() {\n    int ret = 42;\n    System.out.println(\"done\");\n    return 42;\n}\n</code></pre>\n\n<p>If an uncaught exception is thrown the <code>finally</code> block will run and the exception will continue propagating. </p>\n"},{"owner":{"reputation":50749,"user_id":52249,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/44adec8d6f10bfc9c0219015a89eca61?s=128&d=identicon&r=PG","display_name":"Jay Riggs","link":"https://stackoverflow.com/users/52249/jay-riggs"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1273731557,"creation_date":1273731557,"answer_id":2824758,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Because a finally block will always be called unless you call <code>System.exit()</code> (or the thread crashes).</p>\n"},{"comments":[{"owner":{"reputation":21779,"user_id":715269,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/81265cf97af6195bd098512acbf47d03?s=128&d=identicon&r=PG","display_name":"Gangnus","link":"https://stackoverflow.com/users/715269/gangnus"},"edited":false,"score":0,"creation_date":1557253157,"post_id":2824759,"comment_id":98700344,"content_license":"CC BY-SA 4.0","body":"That is an extremely weak answer. <a href=\"https://stackoverflow.com/a/65049/715269\">stackoverflow.com/a/65049/715269</a>"}],"owner":{"reputation":16134,"user_id":300807,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/WxsTX.jpg?s=128&g=1","display_name":"Chris Cooper","link":"https://stackoverflow.com/users/300807/chris-cooper"},"comment_count":1,"is_accepted":false,"score":53,"last_activity_date":1441127489,"last_edit_date":1441127489,"creation_date":1273731557,"answer_id":2824759,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>That is the whole idea of a finally block. It lets you make sure you do cleanups that might otherwise be skipped because you return, among other things, of course.</p>\n\n<p>Finally gets called <strong>regardless of what happens</strong> in the try block (<em>unless</em> you call <code>System.exit(int)</code> or the Java Virtual Machine kicks out for some other reason).</p>\n"},{"owner":{"reputation":18246,"user_id":227698,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/874c1b0de39f3a9937e2744ad2431bf3?s=128&d=identicon&r=PG","display_name":"vodkhang","link":"https://stackoverflow.com/users/227698/vodkhang"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1273731587,"creation_date":1273731587,"answer_id":2824762,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Because the final is always be called in whatever cases you have. You don't have exception, it is still called, catch exception, it is still called</p>\n"},{"comments":[{"owner":{"reputation":8452,"user_id":162895,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/da3b58702a60fd2681ece7edddec2ccd?s=128&d=identicon&r=PG","display_name":"Dimitris Andreou","link":"https://stackoverflow.com/users/162895/dimitris-andreou"},"edited":false,"score":65,"creation_date":1273751646,"post_id":2824998,"comment_id":2867161,"content_license":"CC BY-SA 2.5","body":"It should be noted that the middle case is precisely the reason why having a return statement inside a finally block is absolutely horrible (it could hide any Throwable)."},{"owner":{"reputation":551,"user_id":4398194,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/27aa20e586603771aac6489468530905?s=128&d=identicon&r=PG&f=1","display_name":"RecursiveExceptionException","link":"https://stackoverflow.com/users/4398194/recursiveexceptionexception"},"edited":false,"score":2,"creation_date":1549562766,"post_id":2824998,"comment_id":95956469,"content_license":"CC BY-SA 4.0","body":"Who <i>doesn&#39;t</i> want a surpressed <code>OutOfMemoryError</code>? ;)"},{"owner":{"reputation":78696,"user_id":589259,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1","display_name":"Maarten Bodewes","link":"https://stackoverflow.com/users/589259/maarten-bodewes"},"edited":false,"score":0,"creation_date":1577030568,"post_id":2824998,"comment_id":105074310,"content_license":"CC BY-SA 4.0","body":"I tested it and it does suppress such an error (yipes!). It also generates a warning when I compile it (yay!). And you can work around it by defining a return variable and then using <code>return retVal</code> <i>after</i> the <code>finally</code> block, although that of course assumes that you suppressed some other exceptions because the code would not make sense otherwise."}],"owner":{"reputation":20876,"user_id":196211,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/2a25b405968b6e5c2f1d45602365308e?s=128&d=identicon&r=PG","display_name":"Eyal Schneider","link":"https://stackoverflow.com/users/196211/eyal-schneider"},"comment_count":3,"is_accepted":false,"score":166,"last_activity_date":1477665335,"last_edit_date":1477665335,"creation_date":1273734719,"answer_id":2824998,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>In addition to the other responses, it is important to point out that 'finally' has the right to override any exception/returned value by the try..catch block. For example, the following code returns 12:</p>\n\n<pre><code>public static int getMonthsInYear() {\n    try {\n        return 10;\n    }\n    finally {\n        return 12;\n    }\n}\n</code></pre>\n\n<p>Similarly, the following method does not throw an exception:</p>\n\n<pre><code>public static int getMonthsInYear() {\n    try {\n        throw new RuntimeException();\n    }\n    finally {\n        return 12;\n    }\n}\n</code></pre>\n\n<p>While the following method does throw it:</p>\n\n<pre><code>public static int getMonthsInYear() {\n    try {\n        return 12;          \n    }\n    finally {\n        throw new RuntimeException();\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":444,"user_id":338082,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/21566f3e76140136fe0db18983fb2df9?s=128&d=identicon&r=PG","display_name":"Gala101","link":"https://stackoverflow.com/users/338082/gala101"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1273751414,"creation_date":1273751414,"answer_id":2826472,"question_id":65035,"content_license":"CC BY-SA 2.5","body":"<p>Consider this in a normal course of execution (i.e without any Exception being thrown): if method is not 'void' then it always explicitly returns something, yet, finally always gets executed</p>\n"},{"owner":{"reputation":101,"user_id":349636,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/2bbe789485e82f25a9248b1855fa14a7?s=128&d=identicon&r=PG","display_name":"Wasim","link":"https://stackoverflow.com/users/349636/wasim"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1440054009,"last_edit_date":1440054009,"creation_date":1274769389,"answer_id":2902505,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>This is because you assigned the value of i as 12, but did not return the value of i to the function. The correct code is as follows:</p>\n\n<pre><code>public static int test() {\n    int i = 0;\n    try {\n        return i;\n    } finally {\n        i = 12;\n        System.out.println(\"finally trumps return.\");\n        return i;\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":344763,"user_id":276101,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/30fe97e726af0ea4ff8b756fbf2e6d15?s=128&d=identicon&r=PG","display_name":"polygenelubricants","link":"https://stackoverflow.com/users/276101/polygenelubricants"},"comment_count":0,"is_accepted":false,"score":259,"last_activity_date":1465329096,"last_edit_date":1465329096,"creation_date":1274770216,"answer_id":2902578,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Here's the official words from the Java Language Specification.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.2\" rel=\"noreferrer\">14.20.2. Execution of try-finally and try-catch-finally</a></p>\n\n<blockquote>\n  <p><strong>A <code>try</code> statement with a <code>finally</code> block is executed by first executing the <code>try</code> block. Then there is a choice:</strong></p>\n  \n  <ul>\n  <li>If execution of the <code>try</code> block completes normally, [...]</li>\n  <li>If execution of the <code>try</code> block completes abruptly because of a <code>throw</code> of a value <em>V</em>, [...]</li>\n  <li><strong>If execution of the <code>try</code> block completes abruptly for any other reason <em>R</em>, then the <code>finally</code> block is executed. Then there is a choice:</strong>\n  \n  <ul>\n  <li>If the finally block completes normally, then the <code>try</code> statement completes abruptly for reason <em>R</em>. </li>\n  <li>If the <code>finally</code> block completes abruptly for reason <em>S</em>, then the <code>try</code> statement completes abruptly for reason <em>S</em> (<strong>and reason <em>R</em> is discarded</strong>).</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p>The specification for <code>return</code> actually makes this explicit:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.17\" rel=\"noreferrer\">JLS 14.17 The return Statement</a></p>\n\n<blockquote>\n<pre><code>ReturnStatement:\n     return Expression(opt) ;\n</code></pre>\n  \n  <p>A <code>return</code> statement with no <code>Expression</code> <strong>attempts</strong> to transfer control to the invoker of the method or constructor that contains it. </p>\n  \n  <p>A <code>return</code> statement with an <code>Expression</code> <strong>attempts</strong> to transfer control to the invoker of the method that contains it; the value of the <code>Expression</code> becomes the value of the method invocation.</p>\n  \n  <p>The preceding descriptions say \"<em><strong>attempts</strong> to transfer control</em>\" rather than just \"<em>transfers control</em>\" because if there are any <code>try</code> statements within the method or constructor whose <code>try</code> blocks contain the <code>return</code> statement, then any <code>finally</code> clauses of those <code>try</code> statements will be executed, in order, innermost to outermost, before control is transferred to the invoker of the method or constructor. Abrupt completion of a <code>finally</code> clause can disrupt the transfer of control initiated by a <code>return</code> statement.</p>\n</blockquote>\n"},{"owner":{"reputation":15775,"user_id":645226,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/230d51291a37cb1287650e40cdef4c78?s=128&d=identicon&r=PG&f=1","display_name":"Bhushan","link":"https://stackoverflow.com/users/645226/bhushan"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1318521715,"creation_date":1318521715,"answer_id":7756997,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>If an exception is thrown, finally runs. If an exception is not thrown, finally runs. If the exception is caught, finally runs. If the exception is not caught, finally runs.</p>\n\n<p>Only time it does not run is when JVM exits.</p>\n"},{"owner":{"reputation":3240,"user_id":44512,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/c98586dc2dccc7d6738e3c83c98bac12?s=128&d=identicon&r=PG&f=1","display_name":"eric2323223","link":"https://stackoverflow.com/users/44512/eric2323223"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1334653616,"creation_date":1334653616,"answer_id":10188271,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Try this code, you will understand the <strong>code in finally block is get executed after return statement</strong>.</p>\n\n<pre><code>public class TestTryCatchFinally {\n    static int x = 0;\n\n    public static void main(String[] args){\n        System.out.println(f1() );\n        System.out.println(f2() );\n    }\n\n    public static int f1(){\n        try{\n            x = 1;\n            return x;\n        }finally{\n            x = 2;\n        }\n    }\n\n    public static int f2(){\n        return x;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":929,"user_id":4610114,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/7HTdY.png?s=128&g=1","display_name":"Franz D.","link":"https://stackoverflow.com/users/4610114/franz-d"},"edited":false,"score":0,"creation_date":1536604463,"post_id":17634958,"comment_id":91475013,"content_license":"CC BY-SA 4.0","body":"And that&#39;s one of the reasons you really should never call System.exit()..."}],"owner":{"reputation":179,"user_id":2287871,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oBa9U.jpg?s=128&g=1","display_name":"Rajendra Jadi","link":"https://stackoverflow.com/users/2287871/rajendra-jadi"},"comment_count":1,"is_accepted":false,"score":18,"last_activity_date":1534744923,"last_edit_date":1534744923,"creation_date":1373756543,"answer_id":17634958,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>No, not always one exception case is//\nSystem.exit(0);\nbefore the finally block prevents finally to be  executed.</p>\n\n<pre><code>  class A {\n    public static void main(String args[]){\n        DataInputStream cin = new DataInputStream(System.in);\n        try{\n            int i=Integer.parseInt(cin.readLine());\n        }catch(ArithmeticException e){\n        }catch(Exception e){\n           System.exit(0);//Program terminates before executing finally block\n        }finally{\n            System.out.println(\"Won't be executed\");\n            System.out.println(\"No error\");\n        }\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":2056,"user_id":1927543,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ad92404d9739ea60c7c90e1a7d0c6742?s=128&d=identicon&r=PG","display_name":"Karthikeyan","link":"https://stackoverflow.com/users/1927543/karthikeyan"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1376654420,"creation_date":1376654420,"answer_id":18272854,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes, it will. No matter what happens in your try or catch block unless otherwise System.exit() called or JVM crashed. if there is any return statement in the block(s),finally will be executed prior to that return statement.</p>\n"},{"comments":[{"owner":{"reputation":16279,"user_id":1229624,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/33221e57892f65c519a16ff5cd30f874?s=128&d=identicon&r=PG","display_name":"Aminadav Glickshtein","link":"https://stackoverflow.com/users/1229624/aminadav-glickshtein"},"edited":false,"score":8,"creation_date":1530878819,"post_id":20363941,"comment_id":89400750,"content_license":"CC BY-SA 4.0","body":"Important to know."},{"owner":{"reputation":179,"user_id":11613795,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/76ac47f909b7c793860399429f818716?s=128&d=identicon&r=PG&f=1","display_name":"Albert","link":"https://stackoverflow.com/users/11613795/albert"},"edited":false,"score":0,"creation_date":1561546686,"post_id":20363941,"comment_id":100097782,"content_license":"CC BY-SA 4.0","body":"Good to know, and makes sense as well. It seems that actually returning the value of return is what comes after <code>finally</code>. Calculating the return value (<code>printX()</code> here) still comes before it."},{"owner":{"reputation":74856,"user_id":632951,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/77f196f4d3b4b89fc179071f3aa21e1e?s=128&d=identicon&r=PG","display_name":"Pacerier","link":"https://stackoverflow.com/users/632951/pacerier"},"edited":false,"score":0,"creation_date":1589073689,"post_id":20363941,"comment_id":109147875,"content_license":"CC BY-SA 4.0","body":"Nope. The code above should replace <code>System.out.println(&quot;finally trumps return... sort of&quot;);</code> with <code>System.out.print(&quot;finally trumps return in try&quot;); return 42;</code>"}],"owner":{"reputation":6091,"user_id":2684342,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/wsLfH.jpg?s=128&g=1","display_name":"WoodenKitty","link":"https://stackoverflow.com/users/2684342/woodenkitty"},"comment_count":3,"is_accepted":false,"score":124,"last_activity_date":1477662628,"last_edit_date":1495542893,"creation_date":1386113773,"answer_id":20363941,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Here's an elaboration of <a href=\"https://stackoverflow.com/a/65185/2684342\">Kevin's answer</a>. It's important to know that the expression to be returned is evaluated before <code>finally</code>, even if it is returned after.</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(Test.test());\n}\n\npublic static int printX() {\n    System.out.println(\"X\");\n    return 0;\n}\n\npublic static int test() {\n    try {\n        return printX();\n    }\n    finally {\n        System.out.println(\"finally trumps return... sort of\");\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>X\nfinally trumps return... sort of\n0\n</code></pre>\n"},{"owner":{"reputation":720,"user_id":1596606,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/0184381b11db880288cf5ff1165667c0?s=128&d=identicon&r=PG&f=1","display_name":"abhig","link":"https://stackoverflow.com/users/1596606/abhig"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1389738557,"creation_date":1389738557,"answer_id":21125379,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes It will.\nOnly case it will not is JVM exits or crashes </p>\n"},{"owner":{"reputation":109,"user_id":3317784,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fee8b31207d07fa67eda34274411b373?s=128&d=identicon&r=PG&f=1","display_name":"Rohit Chugh","link":"https://stackoverflow.com/users/3317784/rohit-chugh"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1392626905,"creation_date":1392626905,"answer_id":21824431,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Finally block always execute whether exception  handle or not .if any exception occurred before try block then finally block will not execute.</p>\n"},{"owner":{"reputation":1295,"user_id":3149356,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Fi2yu.jpg?s=128&g=1","display_name":"bikz05","link":"https://stackoverflow.com/users/3149356/bikz05"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1413237110,"creation_date":1413237110,"answer_id":26349456,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Concisely, in the official Java Documentation (Click <a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"noreferrer\">here</a>), it is written that - </p>\n\n<blockquote>\n  <p>If the JVM exits while the try or catch code is being executed, then\n  the finally block may not execute. Likewise, if the thread executing\n  the try or catch code is interrupted or killed, the finally block may\n  not execute even though the application as a whole continues.</p>\n</blockquote>\n"},{"owner":{"reputation":447,"user_id":4315585,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bdaaa73c0f032ca9c4d67f41169aa105?s=128&d=identicon&r=PG&f=1","display_name":"Gautam Viradiya","link":"https://stackoverflow.com/users/4315585/gautam-viradiya"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1417523414,"creation_date":1417523414,"answer_id":27249545,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes, finally block is always execute. Most of developer use this block the closing the database connection, resultset object, statement object and also uses into the java hibernate to rollback the transaction.</p>\n"},{"owner":{"reputation":133,"user_id":3201107,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/92921ae751862284d2f3ba7b8e245ceb?s=128&d=identicon&r=PG","display_name":"Utkash Bhatt","link":"https://stackoverflow.com/users/3201107/utkash-bhatt"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1478860787,"last_edit_date":1478860787,"creation_date":1418884616,"answer_id":27540550,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p><code>finally</code> will execute and that is for sure.</p>\n\n<p><code>finally</code> will not execute in below cases: </p>\n\n<p>case 1 :</p>\n\n<p>When you are executing <code>System.exit()</code>.</p>\n\n<p>case 2 :</p>\n\n<p>When your JVM / Thread crashes.</p>\n\n<p>case 3 : </p>\n\n<p>When your execution is stopped in between manually.</p>\n"},{"owner":{"reputation":69,"user_id":873900,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/04856efa68392eba3fce33a05f3889bb?s=128&d=identicon&r=PG","display_name":"milton","link":"https://stackoverflow.com/users/873900/milton"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1431517978,"last_edit_date":1592644375,"creation_date":1431515461,"answer_id":30213111,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>I was very confused with all the answers provided on different forums and decided to finally code and see. The ouput is :</p>\n<p><strong>finally will be executed even if there is return in try and catch block.</strong></p>\n<pre><code>try {  \n  System.out.println(&quot;try&quot;); \n  return;\n  //int  i =5/0;\n  //System.exit(0 ) ;\n} catch (Exception e) {   \n  System.out.println(&quot;catch&quot;);\n  return;\n  //int  i =5/0;\n  //System.exit(0 ) ;\n} finally {  \n   System.out.println(&quot;Print me FINALLY&quot;);\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<blockquote>\n<p>try</p>\n<p>Print me FINALLY</p>\n</blockquote>\n<ol start=\"2\">\n<li>If return is replaced by <code>System.exit(0)</code> in try and catch block in above code and an exception occurs before it,for any reason.</li>\n</ol>\n"},{"owner":{"reputation":3045,"user_id":956880,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/8wevB.png?s=128&g=1","display_name":"Anonymous Coward","link":"https://stackoverflow.com/users/956880/anonymous-coward"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1583601081,"last_edit_date":1583601081,"creation_date":1449930653,"answer_id":34240980,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<h1>NOT ALWAYS</h1>\n\n<p>The Java Language specification describes how <code>try</code>-<code>catch</code>-<code>finally</code> and <code>try</code>-<code>catch</code> blocks work at <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2\" rel=\"nofollow noreferrer\">14.20.2</a><br>\nIn no place it specifies that the <code>finally</code> block is always executed.\nBut for all cases in which the <code>try</code>-<code>catch</code>-<code>finally</code> and <code>try</code>-<code>finally</code> blocks complete it does specify that before completion <code>finally</code> must be executed.</p>\n\n<pre><code>try {\n  CODE inside the try block\n}\nfinally {\n  FIN code inside finally block\n}\nNEXT code executed after the try-finally block (may be in a different method).\n</code></pre>\n\n<p>The JLS does not guarantee that <strong>FIN</strong> is executed after <strong>CODE</strong>.\nThe JLS guarantees that if <strong>CODE</strong> and <strong>NEXT</strong> are executed then <strong>FIN</strong> will always be executed after <strong>CODE</strong> and before <strong>NEXT</strong>.</p>\n\n<p>Why doesn't the JLS guarantee that the <code>finally</code> block is always executed after the <code>try</code> block? <em>Because it is impossible.</em> It is unlikely but possible that the JVM will be aborted (kill, crash, power off) just after completing the <code>try</code> block but before execution of the <code>finally</code> block. There is nothing the JLS can do to avoid this.</p>\n\n<p>Thus, any software which for their proper behaviour depends on <code>finally</code> blocks always being executed after their <code>try</code> blocks complete are bugged.</p>\n\n<p><code>return</code> instructions in the <code>try</code> block are irrelevant to this issue. If execution reaches code after the <code>try</code>-<code>catch</code>-<code>finally</code> it is guaranteed that the <code>finally</code> block will have been executed before, with or without <code>return</code> instructions inside the <code>try</code> block.</p>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":4,"creation_date":1503192460,"post_id":36116269,"comment_id":78512941,"content_license":"CC BY-SA 3.0","body":"See the accepted answer.  This is just an edge case of &quot;infinite loop&quot;."}],"owner":{"reputation":3120,"user_id":2987755,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/gHWsA.jpg?s=128&g=1","display_name":"dkb","link":"https://stackoverflow.com/users/2987755/dkb"},"comment_count":1,"is_accepted":false,"score":8,"last_activity_date":1583586856,"last_edit_date":1583586856,"creation_date":1458490842,"answer_id":36116269,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>I tried this,\nIt is single threaded.</p>\n\n<pre><code>public static void main(String args[]) throws Exception {\n    Object obj = new Object();\n    try {\n        synchronized (obj) {\n            obj.wait();\n            System.out.println(\"after wait()\");\n        }\n    } catch (Exception ignored) {\n    } finally {\n        System.out.println(\"finally\");\n    }\n}\n</code></pre>\n\n<p>The <code>main</code> <code>Thread</code> will be on <code>wait</code> state forever, hence <em><code>finally</code> will never be called</em>,</p>\n\n<p>so console output will not <code>print</code> <code>String</code>: after <code>wait()</code> or <code>finally</code></p>\n\n<p>Agreed with @Stephen C, the above example is one of the 3rd case mention <a href=\"https://stackoverflow.com/a/65049/2987755\">here</a>:</p>\n\n<p>Adding some more such infinite loop possibilities in following code:</p>\n\n<pre><code>// import java.util.concurrent.Semaphore;\n\npublic static void main(String[] args) {\n    try {\n        // Thread.sleep(Long.MAX_VALUE);\n        // Thread.currentThread().join();\n        // new Semaphore(0).acquire();\n        // while (true){}\n        System.out.println(\"after sleep join semaphore exit infinite while loop\");\n    } catch (Exception ignored) {\n    } finally {\n        System.out.println(\"finally\");\n    }\n}\n</code></pre>\n\n<p>Case 2: If the JVM crashes first</p>\n\n<pre><code>import sun.misc.Unsafe;\nimport java.lang.reflect.Field;\n\npublic static void main(String args[]) {\n    try {\n        unsafeMethod();\n        //Runtime.getRuntime().halt(123);\n        System.out.println(\"After Jvm Crash!\");\n    } catch (Exception e) {\n    } finally {\n        System.out.println(\"finally\");\n    }\n}\n\nprivate static void unsafeMethod() throws NoSuchFieldException, IllegalAccessException {\n    Field f = Unsafe.class.getDeclaredField(\"theUnsafe\");\n    f.setAccessible(true);\n    Unsafe unsafe = (Unsafe) f.get(null);\n    unsafe.putAddress(0, 0);\n}\n</code></pre>\n\n<p>Ref: <a href=\"https://stackoverflow.com/q/65200/2987755\">How do you crash a JVM?</a></p>\n\n<p>Case 6: If <code>finally</code> block is going to be executed by daemon <code>Thread</code> and all other non-daemon <code>Threads</code> exit before <code>finally</code> is called.</p>\n\n<pre><code>public static void main(String args[]) {\n    Runnable runnable = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                printThreads(\"Daemon Thread printing\");\n                // just to ensure this thread will live longer than main thread\n                Thread.sleep(10000);\n            } catch (Exception e) {\n            } finally {\n                System.out.println(\"finally\");\n            }\n        }\n    };\n    Thread daemonThread = new Thread(runnable);\n    daemonThread.setDaemon(Boolean.TRUE);\n    daemonThread.setName(\"My Daemon Thread\");\n    daemonThread.start();\n    printThreads(\"main Thread Printing\");\n}\n\nprivate static synchronized void printThreads(String str) {\n    System.out.println(str);\n    int threadCount = 0;\n    Set&lt;Thread&gt; threadSet = Thread.getAllStackTraces().keySet();\n    for (Thread t : threadSet) {\n        if (t.getThreadGroup() == Thread.currentThread().getThreadGroup()) {\n            System.out.println(\"Thread :\" + t + \":\" + \"state:\" + t.getState());\n            ++threadCount;\n        }\n    }\n    System.out.println(\"Thread count started by Main thread:\" + threadCount);\n    System.out.println(\"-------------------------------------------------\");\n}\n</code></pre>\n\n<p>output: This does not print \"finally\" which implies \"Finally block\" in \"daemon thread\" did not execute  </p>\n\n<blockquote>\n<pre><code>main Thread Printing  \nThread :Thread[My Daemon Thread,5,main]:state:BLOCKED  \nThread :Thread[main,5,main]:state:RUNNABLE  \nThread :Thread[Monitor Ctrl-Break,5,main]:state:RUNNABLE   \nThread count started by Main thread:3  \n-------------------------------------------------  \nDaemon Thread printing  \nThread :Thread[My Daemon Thread,5,main]:state:RUNNABLE  \nThread :Thread[Monitor Ctrl-Break,5,main]:state:RUNNABLE  \nThread count started by Main thread:2  \n-------------------------------------------------  \n\nProcess finished with exit code 0\n</code></pre>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":1,"creation_date":1514991911,"post_id":36926373,"comment_id":83133883,"content_license":"CC BY-SA 3.0","body":"Just noting that this is completely normal behavior. Any/all code exits prematurely if an exception is thrown. This is no different than an exception thrown anywhere else. There is no special rule in the spec that says &quot;exceptions cannot be used inside a finally block.&quot; Because of this, I even misunderstood your answer at first and almost gave -1, until I reread it a couple times."},{"owner":{"reputation":1439,"user_id":5191731,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/ff87f873ff5492f763e544405c951fd8?s=128&d=identicon&r=PG&f=1","display_name":"HopefullyHelpful","link":"https://stackoverflow.com/users/5191731/hopefullyhelpful"},"reply_to_user":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":0,"creation_date":1515013001,"post_id":36926373,"comment_id":83144861,"content_license":"CC BY-SA 3.0","body":"Well, but how is a return different from a throw? If you return then the block should return but in a finally block, the return will be postponed and there are some weird exception for return, so it isn&#39;t clear that finally handles throw in a normal way.  That is the main reason why I wrote this back then.  Also throw in a try or catch block won&#39;t hinder the finally block from execution, so ofc. one might expect that when you throw in a finally block it still executes."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":1,"creation_date":1515025473,"post_id":36926373,"comment_id":83149043,"content_license":"CC BY-SA 3.0","body":"&quot;how is return different from throw?&quot; In a few ways, none of which are relevant here. In a finally block, return is not postponed, or did you mean the return in the try-block being postponed until after finally-block executes (in which case, yes that is true)? Either way, the same holds for thrown exceptions. No matter what happens in a <code>try</code>, when the end of <code>try</code> is reached, the control passes to <code>finally</code>, then all the same rules apply within the <code>finally</code> (with any try/catch inside of finally operating as they usually would)."},{"owner":{"reputation":1822,"user_id":369604,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG","display_name":"Loduwijk","link":"https://stackoverflow.com/users/369604/loduwijk"},"edited":false,"score":2,"creation_date":1515025760,"post_id":36926373,"comment_id":83149106,"content_license":"CC BY-SA 3.0","body":"I am not saying your answer is wrong or useless or anything like that. It is technically correct. I merely noted that the behavior you describe is nothing that breaks the try/finally rule which is simply &quot;No matter what happens in <code>try&#47;catch</code>, once they are done control flow <b><i>will</i></b> pass to the finally block&quot; The try/finally guarantee is essentially nothing more, nothing less than that. Within any block, be it try/catch/finally or otherwise, you can within it nest other try/catch/finally blocks as you suggest. Indeed, some people are unaware of that."}],"owner":{"reputation":1439,"user_id":5191731,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/ff87f873ff5492f763e544405c951fd8?s=128&d=identicon&r=PG&f=1","display_name":"HopefullyHelpful","link":"https://stackoverflow.com/users/5191731/hopefullyhelpful"},"comment_count":4,"is_accepted":false,"score":3,"last_activity_date":1583589807,"last_edit_date":1583589807,"creation_date":1461881492,"answer_id":36926373,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p><code>finally</code> can also be exited prematurely if an <code>Exception</code> is <code>throw</code>n inside a <em>nested <code>finally</code> block</em>. The compiler will warn you that the <code>finally</code> block does not complete normally or give an error that you have unreachable code. The error for unreachable code will be shown only if the <code>throw</code> is not behind a conditional statement or inside a loop.</p>\n\n<pre><code>try{\n}finally{\n   try{\n   }finally{\n      //if(someCondition) --&gt; no error because of unreachable code\n      throw new RunTimeException();\n   }\n   int a = 5;//unreachable code\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1503192353,"post_id":38187529,"comment_id":78512924,"content_license":"CC BY-SA 3.0","body":"Duplicative answer"}],"owner":{"reputation":67,"user_id":6547976,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AlQ2Q.gif?s=128&g=1","display_name":"dibo","link":"https://stackoverflow.com/users/6547976/dibo"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1467644033,"creation_date":1467644033,"answer_id":38187529,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Same with the following code:</p>\n\n<pre><code>static int f() {\n    while (true) {\n        try {\n            return 1;\n        } finally {\n            break;\n        }\n    }\n    return 2;\n}\n</code></pre>\n\n<p>f will return 2!</p>\n"},{"comments":[{"owner":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"edited":false,"score":1,"creation_date":1513239947,"post_id":38930134,"comment_id":82578744,"content_license":"CC BY-SA 3.0","body":"Answer is simple NO."},{"owner":{"reputation":2393,"user_id":5373110,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/Yo7Ni.jpg?s=128&g=1","display_name":"Meet Vora","link":"https://stackoverflow.com/users/5373110/meet-vora"},"reply_to_user":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"edited":false,"score":1,"creation_date":1513243489,"post_id":38930134,"comment_id":82580753,"content_license":"CC BY-SA 3.0","body":"@ChristopheRoussy How? Can you explain please?"},{"owner":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"edited":false,"score":1,"creation_date":1513245495,"post_id":38930134,"comment_id":82582089,"content_license":"CC BY-SA 3.0","body":"read the accepted answer, the original question is about &#39;Will it always execute&#39; and it will not always. In your case it will but this does not answer the original question and may even be misleading beginners."},{"owner":{"reputation":2393,"user_id":5373110,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/Yo7Ni.jpg?s=128&g=1","display_name":"Meet Vora","link":"https://stackoverflow.com/users/5373110/meet-vora"},"reply_to_user":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"edited":false,"score":0,"creation_date":1513334468,"post_id":38930134,"comment_id":82623869,"content_license":"CC BY-SA 3.0","body":"then in which case it wont get execute?"},{"owner":{"reputation":13302,"user_id":657427,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/dd071a6a7c97ba637c558c5e71137c7b?s=128&d=identicon&r=PG","display_name":"Christophe Roussy","link":"https://stackoverflow.com/users/657427/christophe-roussy"},"edited":false,"score":0,"creation_date":1513589857,"post_id":38930134,"comment_id":82695997,"content_license":"CC BY-SA 3.0","body":"In all cases mentioned in other answers, see accepted answer with 1000+ upvotes."}],"owner":{"reputation":2393,"user_id":5373110,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/Yo7Ni.jpg?s=128&g=1","display_name":"Meet Vora","link":"https://stackoverflow.com/users/5373110/meet-vora"},"comment_count":5,"is_accepted":false,"score":10,"last_activity_date":1510130912,"last_edit_date":1510130912,"creation_date":1471071638,"answer_id":38930134,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<blockquote>\n  <p>Answer is simple <strong>YES</strong>.</p>\n</blockquote>\n\n<p><strong>INPUT:</strong></p>\n\n<pre><code>try{\n    int divideByZeroException = 5 / 0;\n} catch (Exception e){\n    System.out.println(\"catch\");\n    return;    // also tried with break; in switch-case, got same output\n} finally {\n    System.out.println(\"finally\");\n}\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>catch\nfinally\n</code></pre>\n"},{"comments":[{"owner":{"reputation":623216,"user_id":139985,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG","display_name":"Stephen C","link":"https://stackoverflow.com/users/139985/stephen-c"},"edited":false,"score":0,"creation_date":1503192321,"post_id":39462828,"comment_id":78512921,"content_license":"CC BY-SA 3.0","body":"Duplicative answer"},{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":0,"creation_date":1565262143,"post_id":39462828,"comment_id":101302238,"content_license":"CC BY-SA 4.0","body":"Not only &#39;duplicative&#39; but self-contradictory."}],"owner":{"reputation":181,"user_id":5089473,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/EVfDj.jpg?s=128&g=1","display_name":"Akash Manngroliya","link":"https://stackoverflow.com/users/5089473/akash-manngroliya"},"comment_count":2,"is_accepted":false,"score":3,"last_activity_date":1473744990,"creation_date":1473744990,"answer_id":39462828,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes it will always called but in one situation it not call when you use System.exit()</p>\n\n<pre><code>try{\n//risky code\n}catch(Exception e){\n//exception handling code\n}\nfinally(){\n//It always execute but before this block if there is any statement like System.exit(0); then this block not execute.\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":13742,"user_id":3824919,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0HpYR.png?s=128&g=1","display_name":"Tom","link":"https://stackoverflow.com/users/3824919/tom"},"edited":false,"score":2,"creation_date":1495282776,"post_id":44085757,"comment_id":75193875,"content_license":"CC BY-SA 3.0","body":"This has been answered many times, so which new information does your answer add?"}],"owner":{"reputation":1240,"user_id":4295595,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-zBPNiEhjJA8/AAAAAAAAAAI/AAAAAAAAAGQ/UG2qTkgD0ME/photo.jpg?sz=128","display_name":"Avinash Pande","link":"https://stackoverflow.com/users/4295595/avinash-pande"},"comment_count":1,"is_accepted":false,"score":6,"last_activity_date":1495282569,"creation_date":1495282569,"answer_id":44085757,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<ol>\n<li>Finally  Block always get executed. Unless and until\n<strong>System.exit()</strong> statement exists there (first statement in finally block).</li>\n<li>If <strong>system.exit()</strong> is first statement then finally block won't get executed and control come out of the finally block.\nWhenever System.exit() statement gets in finally block till that statement finally block executed and when System.exit() appears then control force fully come out of the finally block.</li>\n</ol>\n"},{"owner":{"reputation":494,"user_id":7504001,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/21b4b79917b04d5e0b5d13b54b25b5fb?s=128&d=identicon&r=PG&f=1","display_name":"Vikas Suryawanshi","link":"https://stackoverflow.com/users/7504001/vikas-suryawanshi"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1496925700,"creation_date":1496925700,"answer_id":44436111,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>If you don't handle exception, before terminating the program, JVM executes finally block. It will not executed only if normal execution of program will fail mean's termination of program due to these following reasons..</p>\n\n<ol>\n<li><p>By causing a fatal error that causes the process to abort.</p></li>\n<li><p>Termination of program due to memory corrupt.</p></li>\n<li><p>By calling System.exit()</p></li>\n<li><p>If program goes into infinity loop.</p></li>\n</ol>\n"},{"owner":{"reputation":594,"user_id":6826372,"user_type":"registered","accept_rate":75,"profile_image":"https://lh6.googleusercontent.com/-68hU4fK0fPM/AAAAAAAAAAI/AAAAAAAAFOA/G3UMUf35OGQ/photo.jpg?sz=128","display_name":"Sandip Solanki","link":"https://stackoverflow.com/users/6826372/sandip-solanki"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1510220501,"creation_date":1510220501,"answer_id":47198461,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>The finally block will not be called after return in a couple of unique scenarios: if System.exit() is called first, or if the JVM crashes.</p>\n\n<p>Let me try to answer your question in the easiest possible way.</p>\n\n<p><strong>Rule 1</strong> : The finally block always run\n (Though there are exceptions to it. But let's stick to this for sometime.)</p>\n\n<p><strong>Rule 2</strong> : the statements in the finally block run when control leaves a try or a catch block.The transfer of control can occur as a result of normal execution ,of execution of a break , continue, goto or a return statement, or of a propogation of an exception.</p>\n\n<p>In case of a return statement specifically (since its captioned), the control has to leave the calling method , And hence calls the finally block of the corresponding  try-finally structure. The return statement is executed after the finally block.</p>\n\n<p>In case there's a return statement in the finally block also, it will definitely override the one pending at the try block , since its clearing the call stack.</p>\n\n<p>You can refer a better explanation here : <a href=\"http://msdn.microsoft.com/en-us/\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/</a>.... the concept is mostly same in all the high level languages.</p>\n"},{"owner":{"reputation":3248,"user_id":3948862,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/pXuEe.jpg?s=128&g=1","display_name":"D&#225;vid Horv&#225;th","link":"https://stackoverflow.com/users/3948862/d%c3%a1vid-horv%c3%a1th"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1513438596,"creation_date":1513438596,"answer_id":47847227,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes, because <strong>no control statement</strong> can prevent <code>finally</code> from being executed.</p>\n\n<p>Here is a reference example, where all code blocks will be executed:</p>\n\n<pre><code>| x | Current result | Code \n|---|----------------|------ - - -\n|   |                |     \n|   |                | public static int finallyTest() {\n| 3 |                |     int x = 3;\n|   |                |     try {\n|   |                |        try {\n| 4 |                |             x++;\n| 4 | return 4       |             return x;\n|   |                |         } finally {\n| 3 |                |             x--;\n| 3 | throw          |             throw new RuntimeException(\"Ahh!\");\n|   |                |         }\n|   |                |     } catch (RuntimeException e) {\n| 4 | return 4       |         return ++x;\n|   |                |     } finally {\n| 3 |                |         x--;\n|   |                |     }\n|   |                | }\n|   |                |\n|---|----------------|------ - - -\n|   | Result: 4      |\n</code></pre>\n\n<p>In the variant below, <code>return x;</code> will be skipped. Result is still <code>4</code>:</p>\n\n<pre><code>public static int finallyTest() {\n    int x = 3;\n    try {\n        try {\n            x++;\n            if (true) throw new RuntimeException(\"Ahh!\");\n            return x; // skipped\n        } finally {\n            x--;\n        }\n    } catch (RuntimeException e) {\n        return ++x;\n    } finally {\n        x--;\n    }\n}\n</code></pre>\n\n<p>References, of course, track their status. This example returns a reference with <code>value = 4</code>:</p>\n\n<pre><code>static class IntRef { public int value; }\npublic static IntRef finallyTest() {\n    IntRef x = new IntRef();\n    x.value = 3;\n    try {\n        return x;\n    } finally {\n        x.value++; // will be tracked even after return\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":287560,"user_id":207421,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG","display_name":"user207421","link":"https://stackoverflow.com/users/207421/user207421"},"edited":false,"score":2,"creation_date":1565262255,"post_id":49614632,"comment_id":101302289,"content_license":"CC BY-SA 4.0","body":"So when you say yes you mean no?"}],"owner":{"reputation":353,"user_id":5635466,"user_type":"registered","profile_image":"https://i.stack.imgur.com/952fW.jpg?s=128&g=1","display_name":"Danail Tsvetanov","link":"https://stackoverflow.com/users/5635466/danail-tsvetanov"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1522685172,"creation_date":1522685172,"answer_id":49614632,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Yes, it is written <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"noreferrer\">here</a></p>\n\n<blockquote>\n  <p>If the JVM exits while the try or catch code is being executed, then the finally block may not execute. Likewise, if the thread executing the try or catch code is interrupted or killed, the finally block may not execute even though the application as a whole continues.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":1413,"user_id":7538821,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FaRRO.jpg?s=128&g=1","display_name":"sam","link":"https://stackoverflow.com/users/7538821/sam"},"edited":false,"score":0,"creation_date":1525076919,"post_id":49752573,"comment_id":87209477,"content_license":"CC BY-SA 3.0","body":"As of Java 1.8.162, this is not the output."}],"owner":{"reputation":189,"user_id":2851699,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/e35f1153b008e115ad68058bd00cb961?s=128&d=identicon&r=PG&f=1","display_name":"Pradeep Kumaresan","link":"https://stackoverflow.com/users/2851699/pradeep-kumaresan"},"comment_count":1,"is_accepted":false,"score":8,"last_activity_date":1523979359,"last_edit_date":1523979359,"creation_date":1523360014,"answer_id":49752573,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>Adding to <a href=\"https://stackoverflow.com/a/296053/4298200\">@vibhash's answer</a> as no other answer explains what happens in the case of a mutable object like the one below.</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(test().toString());\n}\n\npublic static StringBuffer test() {\n    StringBuffer s = new StringBuffer();\n    try {\n        s.append(\"sb\");\n        return s;\n    } finally {\n        s.append(\"updated \");\n    }\n}\n</code></pre>\n\n<p>Will output</p>\n\n<blockquote>\n<pre><code>sbupdated \n</code></pre>\n</blockquote>\n"},{"owner":{"reputation":1170,"user_id":8111997,"user_type":"registered","profile_image":"https://i.stack.imgur.com/9g7aA.jpg?s=128&g=1","display_name":"Poorna Senani Gamage","link":"https://stackoverflow.com/users/8111997/poorna-senani-gamage"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1523858469,"creation_date":1523858469,"answer_id":49850492,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p><code>try</code>- <code>catch</code>- <code>finally</code> are the key words for using exception handling case.<br> \nAs normal explanotory</p>\n\n<pre><code>try {\n     //code statements\n     //exception thrown here\n     //lines not reached if exception thrown\n} catch (Exception e) {\n    //lines reached only when exception is thrown\n} finally {\n    // always executed when the try block is exited\n    //independent of an exception thrown or not\n}\n</code></pre>\n\n<p>The finally block  prevent executing...</p>\n\n<ul>\n<li>When you called <code>System.exit(0);</code></li>\n<li>If JVM exits.</li>\n<li>Errors in the JVM</li>\n</ul>\n"},{"owner":{"reputation":394,"user_id":6706261,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/1009089699a99d83537d305ba795d17a?s=128&d=identicon&r=PG&f=1","display_name":"Sabrina","link":"https://stackoverflow.com/users/6706261/sabrina"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1524268652,"creation_date":1524268652,"answer_id":49951065,"question_id":65035,"content_license":"CC BY-SA 3.0","body":"<p>finally block is executed always even if you put a return statement in the try block. The finally block will be executed before the return statement.</p>\n"},{"comments":[{"owner":{"reputation":45780,"user_id":7294900,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1","display_name":"user7294900","link":"https://stackoverflow.com/users/7294900/user7294900"},"edited":false,"score":0,"creation_date":1536129512,"post_id":50096809,"comment_id":91307225,"content_license":"CC BY-SA 4.0","body":"Shouldn&#39;t it be <code>sb.setLength(0)</code> in finally?"},{"owner":{"reputation":1413,"user_id":7538821,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FaRRO.jpg?s=128&g=1","display_name":"sam","link":"https://stackoverflow.com/users/7538821/sam"},"reply_to_user":{"reputation":45780,"user_id":7294900,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1","display_name":"user7294900","link":"https://stackoverflow.com/users/7294900/user7294900"},"edited":false,"score":0,"creation_date":1536167816,"post_id":50096809,"comment_id":91330541,"content_license":"CC BY-SA 4.0","body":"sb.setLength(0) will just empty the data in the StringBuffer. So, sb = null will disassociate the object from the reference."},{"owner":{"reputation":1283,"user_id":3361335,"user_type":"registered","accept_rate":15,"profile_image":"https://www.gravatar.com/avatar/52beaaa0b4c2e49ea752e12fd656c111?s=128&d=identicon&r=PG&f=1","display_name":"fresko","link":"https://stackoverflow.com/users/3361335/fresko"},"edited":false,"score":0,"creation_date":1550053378,"post_id":50096809,"comment_id":96125767,"content_license":"CC BY-SA 4.0","body":"Shouldn&#39;t &quot;xyz&quot; be printed twice in the output? Since the function was called twice, why &quot;finally&quot; was only once?"},{"owner":{"reputation":1413,"user_id":7538821,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FaRRO.jpg?s=128&g=1","display_name":"sam","link":"https://stackoverflow.com/users/7538821/sam"},"reply_to_user":{"reputation":1283,"user_id":3361335,"user_type":"registered","accept_rate":15,"profile_image":"https://www.gravatar.com/avatar/52beaaa0b4c2e49ea752e12fd656c111?s=128&d=identicon&r=PG&f=1","display_name":"fresko","link":"https://stackoverflow.com/users/3361335/fresko"},"edited":false,"score":0,"creation_date":1550071273,"post_id":50096809,"comment_id":96136949,"content_license":"CC BY-SA 4.0","body":"@fresko : finallly is definitely called twice but when it comes to the output in the console it will only show once because of the return statement. You can run the program and see the output, and after that add another statement <code>System.out.println(sb.toString());</code>"},{"owner":{"reputation":9021,"user_id":2191890,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/pA1bu.jpg?s=128&g=1","display_name":"Roc Boronat","link":"https://stackoverflow.com/users/2191890/roc-boronat"},"edited":false,"score":2,"creation_date":1550275114,"post_id":50096809,"comment_id":96222713,"content_license":"CC BY-SA 4.0","body":"This isn&#39;t a good practice. That finally block with <code>sb = null;</code> just adds unneeded code. I understand that you mean that a <code>finally</code> block is a good place to free resources like a database connection or something like that, but have in mind that your example could confuse newcomers."},{"owner":{"reputation":1283,"user_id":3361335,"user_type":"registered","accept_rate":15,"profile_image":"https://www.gravatar.com/avatar/52beaaa0b4c2e49ea752e12fd656c111?s=128&d=identicon&r=PG&f=1","display_name":"fresko","link":"https://stackoverflow.com/users/3361335/fresko"},"edited":false,"score":1,"creation_date":1550581717,"post_id":50096809,"comment_id":96314146,"content_license":"CC BY-SA 4.0","body":"@Samim Thanks, I added the lines          <code>System.out.println(&quot;---AGAIN2---&quot;);</code>         <code>System.out.println(sb);</code> and it&#39;s more clear now. As it was, the output was against your thesis :p I also added to your answer, but the edit must be accepted by a moderator or somebody like that. Else you can add them"}],"owner":{"reputation":1413,"user_id":7538821,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/FaRRO.jpg?s=128&g=1","display_name":"sam","link":"https://stackoverflow.com/users/7538821/sam"},"comment_count":6,"is_accepted":false,"score":7,"last_activity_date":1585597372,"last_edit_date":1585597372,"creation_date":1525077405,"answer_id":50096809,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>Consider the following program:</p>\n\n<pre><code>public class SomeTest {\n\n    private static StringBuilder sb = new StringBuilder();\n\n    public static void main(String args[]) {\n\n        System.out.println(someString());\n        System.out.println(\"---AGAIN---\");\n        System.out.println(someString());\n        System.out.println(\"---PRINT THE RESULT---\");\n        System.out.println(sb.toString());\n    }\n\n    private static String someString() {\n\n        try {\n            sb.append(\"-abc-\");\n            return sb.toString();\n\n        } finally {\n            sb.append(\"xyz\");\n        }\n    }\n}\n</code></pre>\n\n<p>As of Java 1.8.162, the above code block gives the following output:</p>\n\n<pre><code>-abc-\n---AGAIN---\n-abc-xyz-abc-\n---PRINT THE RESULT---\n-abc-xyz-abc-xyz\n</code></pre>\n\n<p>this means that using <code>finally</code> to free up objects is a good practice like the following code:</p>\n\n<pre><code>private static String someString() {\n\n    StringBuilder sb = new StringBuilder();\n\n    try {\n        sb.append(\"abc\");\n        return sb.toString();\n\n    } finally {\n        sb = null; // Just an example, but you can close streams or DB connections this way.\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":41,"user_id":6929015,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/486bff80652848b2d0bd443e1be3505b?s=128&d=identicon&r=PG&f=1","display_name":"Rubin Luitel","link":"https://stackoverflow.com/users/6929015/rubin-luitel"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1525902727,"creation_date":1525902727,"answer_id":50262581,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>Finally is always called at the end</p>\n\n<p>when you try, it executes some code, if something happens in try, then catch will catch that exception and you could print some mssg out or throw an error, then finally block is executed.</p>\n\n<p>Finally is normally used when doing cleanups, for instance, if you use a scanner in java, you should probably close the scanner as it leads to other problems such as not being able to open some file</p>\n"},{"owner":{"reputation":16765,"user_id":448078,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/0cea45314cdd61d5e1f9dc6f0c1c0582?s=128&d=identicon&r=PG","display_name":"Mike","link":"https://stackoverflow.com/users/448078/mike"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1565214838,"creation_date":1565214838,"answer_id":57402744,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>Here are some conditions which can bypass a finally block:</p>\n\n<ol>\n<li>If the JVM exits while the try or catch code is being executed, then the finally block may not execute. More on <a href=\"http://download.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"nofollow noreferrer\">sun tutorial</a>  </li>\n<li>Normal Shutdown - this occurs either when the last non-daemon thread exits OR when Runtime.exit() (<a href=\"http://geekexplains.blogspot.com/2008/06/jvm-shutdown-jvm-shutdown-sequence.html\" rel=\"nofollow noreferrer\">some good blog</a>). When a thread exits, the JVM performs an inventory of running threads, and if the only threads that are left are daemon threads, it initiates an orderly shutdown. When the JVM halts, any remaining daemon threads are abandoned finally blocks are not executed, stacks are not unwound the JVM just exits. Daemon threads should be used sparingly few processing activities can be safely abandoned at any time with no cleanup. In particular, it is dangerous to use daemon threads for tasks that might perform any sort of I/O. Daemon threads are best saved for \"housekeeping\" tasks, such as a background thread that periodically removes expired entries from an in-memory cache (<a href=\"https://rads.stackoverflow.com/amzn/click/com/0321349601\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">source</a>)</li>\n</ol>\n\n<p>Last non-daemon thread exits example:  </p>\n\n<pre><code>public class TestDaemon {\n    private static Runnable runnable = new Runnable() {\n        @Override\n        public void run() {\n            try {\n                while (true) {\n                    System.out.println(\"Is alive\");\n                    Thread.sleep(10);\n                    // throw new RuntimeException();\n                }\n            } catch (Throwable t) {\n                t.printStackTrace();\n            } finally {\n                System.out.println(\"This will never be executed.\");\n            }\n        }\n    };\n\n    public static void main(String[] args) throws InterruptedException {\n        Thread daemon = new Thread(runnable);\n        daemon.setDaemon(true);\n        daemon.start();\n        Thread.sleep(100);\n        // daemon.stop();\n        System.out.println(\"Last non-daemon thread exits.\");\n    }\n}\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>Is alive\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\nLast non-daemon thread exits.\nIs alive\nIs alive\nIs alive\nIs alive\nIs alive\n</code></pre>\n"},{"comments":[{"owner":{"reputation":36186,"user_id":238704,"user_type":"registered","profile_image":"https://i.stack.imgur.com/VgOZI.png?s=128&g=1","display_name":"President James K. Polk","link":"https://stackoverflow.com/users/238704/president-james-k-polk"},"edited":false,"score":0,"creation_date":1580845032,"post_id":59932063,"comment_id":106229721,"content_license":"CC BY-SA 4.0","body":"Nice illustrative example, +1."}],"owner":{"reputation":4273,"user_id":1379734,"user_type":"registered","accept_rate":61,"profile_image":"https://i.stack.imgur.com/I2sHw.png?s=128&g=1","display_name":"hellzone","link":"https://stackoverflow.com/users/1379734/hellzone"},"comment_count":1,"is_accepted":false,"score":7,"last_activity_date":1583595921,"last_edit_date":1583595921,"creation_date":1580131461,"answer_id":59932063,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p><code>finally</code> is always executed and before returning <code>x</code>'s (calculated) value.</p>\n\n<pre><code>System.out.println(foo());\n\n....\n\nint foo(){\n    int x = 2;\n    try{\n        return x++;\n    } finally{\n        System.out.println(x);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3\n2\n</code></pre>\n"},{"owner":{"reputation":89,"user_id":2862834,"user_type":"registered","profile_image":"https://i.stack.imgur.com/5ITAM.png?s=128&g=1","display_name":"Youngrok Ko","link":"https://stackoverflow.com/users/2862834/youngrok-ko"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1581137125,"creation_date":1581137125,"answer_id":60123997,"question_id":65035,"content_license":"CC BY-SA 4.0","body":"<p>try-with-resoruce example</p>\n\n<pre><code>static class IamAutoCloseable implements AutoCloseable {\n    private final String name;\n    IamAutoCloseable(String name) {\n        this.name = name;\n    }\n    public void close() {\n        System.out.println(name);\n    }\n}\n\n@Test\npublic void withResourceFinally() {\n    try (IamAutoCloseable closeable1 = new IamAutoCloseable(\"closeable1\");\n         IamAutoCloseable closeable2 = new IamAutoCloseable(\"closeable2\")) {\n        System.out.println(\"try\");\n    } finally {\n        System.out.println(\"finally\");\n    }\n}\n</code></pre>\n\n<p>Test output:</p>\n\n<pre><code>try\ncloseable2\ncloseable1\nfinally\n</code></pre>\n"}],"owner":{"reputation":25262,"user_id":885027,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b822dd193d8b86b734967ec5f4a8a92b?s=128&d=identicon&r=PG","display_name":"jonny five","link":"https://stackoverflow.com/users/885027/jonny-five"},"comment_count":8,"is_answered":true,"view_count":529972,"protected_date":1503225474,"accepted_answer_id":65049,"answer_count":49,"score":2484,"last_activity_date":1590627519,"creation_date":1221500634,"last_edit_date":1590627519,"question_id":65035,"link":"https://stackoverflow.com/questions/65035/does-a-finally-block-always-get-executed-in-java","title":"Does a finally block always get executed in Java?","body":"<p>Considering this code, can I be <em>absolutely sure</em> that the <code>finally</code> block always executes, no matter what <code>something()</code> is?</p>\n\n<pre><code>try {  \n    something();  \n    return success;  \n}  \ncatch (Exception e) {   \n    return failure;  \n}  \nfinally {  \n    System.out.println(\"I don't know if this will get printed out\");\n}\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"reputation":2394,"user_id":63609,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/ce7af87d7b9cd5fc61267c49aa988ae4?s=128&d=identicon&r=PG","display_name":"Zack","link":"https://stackoverflow.com/users/63609/zack"},"edited":false,"score":5,"creation_date":1247619067,"post_id":1128723,"comment_id":946245,"content_license":"CC BY-SA 2.5","body":"Long way around it, but you can use a for loop: &quot;for (String s : VALUES) if (s.equals(&quot;MYVALUE&quot;)) return true;"},{"owner":{"reputation":30052,"user_id":16534,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/JnmCP.jpg?s=128&g=1","display_name":"Mike Sickler","link":"https://stackoverflow.com/users/16534/mike-sickler"},"edited":false,"score":0,"creation_date":1247620853,"post_id":1128723,"comment_id":946314,"content_license":"CC BY-SA 2.5","body":"Yeah, I was almost embarrassed to ask the question, but at the same time was surprised that it hadn&#39;t been asked. It&#39;s one of those APIs that I just haven&#39;t been exposed to..."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":3,"creation_date":1367218236,"post_id":1128723,"comment_id":23287906,"content_license":"CC BY-SA 3.0","body":"@camickr--I have a nearly identical situation with this one: <a href=\"http://stackoverflow.com/a/223929/12943\">stackoverflow.com/a/223929/12943</a>  It just keeps getting votes yet was just a copy/paste from sun&#39;s documentation.  I guess score is based on how much help you provided and not how much effort you put into it--and mostly how fast you post it!  Maybe we&#39;ve stumbled onto John Skeet&#39;s secret!  Well good answer, +1 for you."},{"owner":{"reputation":52003,"user_id":197229,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG","display_name":"Mr. Boy","link":"https://stackoverflow.com/users/197229/mr-boy"},"edited":false,"score":1,"creation_date":1384290332,"post_id":1128723,"comment_id":48495196,"content_license":"CC BY-SA 3.0","body":"If you&#39;re using Apache Commons, then <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#contains%28java.lang.Object%5B%5D,%20java.lang.Object%29\" rel=\"nofollow noreferrer\">org.apache.commons.lang.ArrayUtils.contains()</a> does this for you."},{"owner":{"reputation":2158,"user_id":1980925,"user_type":"registered","profile_image":"https://i.stack.imgur.com/UgYrw.jpg?s=128&g=1","display_name":"Alex Mazzariol","link":"https://stackoverflow.com/users/1980925/alex-mazzariol"},"edited":false,"score":0,"creation_date":1413816720,"post_id":1128723,"comment_id":41574776,"content_license":"CC BY-SA 3.0","body":"@Zach: you are falling in the trap of the for-if antipattern, don&#39;t do that."},{"owner":{"reputation":1845,"user_id":4714970,"user_type":"registered","accept_rate":53,"profile_image":"https://www.gravatar.com/avatar/e29b1cd1e24528881ced8e0f15cc18db?s=128&d=identicon&r=PG&f=1","display_name":"Aequitas","link":"https://stackoverflow.com/users/4714970/aequitas"},"reply_to_user":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"edited":false,"score":38,"creation_date":1437360086,"post_id":1128723,"comment_id":50978893,"content_license":"CC BY-SA 3.0","body":"@camickr because people, like me, google a question, click on the SO result, see your answer, test it, it works, upvote the answer and then leave."},{"owner":{"reputation":15402,"user_id":15472,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG","display_name":"tucuxi","link":"https://stackoverflow.com/users/15472/tucuxi"},"edited":false,"score":0,"creation_date":1588329498,"post_id":1128723,"comment_id":108859913,"content_license":"CC BY-SA 4.0","body":"I really miss a simple <code>indexOf</code> and <code>contains</code> in <code>java.util.Arrays</code> - which would both contain straightforward loops. Yes, you can write those in 1 minute; but I still went over to StackOverflow expecting to find them somewhere in the JDK."}],"answers":[{"comments":[{"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"edited":false,"score":96,"creation_date":1247616367,"post_id":1128728,"comment_id":946141,"content_license":"CC BY-SA 2.5","body":"I am somewhat curious as to the performance of this versus the searching functions in the Arrays class versus iterating over an array and using an equals() function or == for primitives."},{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":3,"creation_date":1247616476,"post_id":1128728,"comment_id":946148,"content_license":"CC BY-SA 2.5","body":"They would both be a linear search."},{"owner":{"reputation":84181,"user_id":23072,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ad19b9146f4ffd608bf137323f68de0c?s=128&d=identicon&r=PG","display_name":"Uri","link":"https://stackoverflow.com/users/23072/uri"},"edited":false,"score":0,"creation_date":1247616545,"post_id":1128728,"comment_id":946151,"content_license":"CC BY-SA 2.5","body":"@Thomas: I think that asList() might actually allocate a new object that delegates to the existing array, so you are paying the allocation cost. The list is backed by the array so the elements themselves shoudln&#39;t be reallocated."},{"owner":{"reputation":312474,"user_id":73070,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG","display_name":"Joey","link":"https://stackoverflow.com/users/73070/joey"},"edited":false,"score":190,"creation_date":1247616547,"post_id":1128728,"comment_id":946152,"content_license":"CC BY-SA 2.5","body":"You don&#39;t lose much, as asList() returns an ArrayList which has an array at its heart. The constructor will just change a reference so that&#39;s not much work to be done there. And contains()/indexOf() will iterate and use equals(). For primitives you should be better off coding it yourself, though. For Strings or other classes, the difference will not be noticeable."},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"edited":false,"score":1,"creation_date":1247619934,"post_id":1128728,"comment_id":946276,"content_license":"CC BY-SA 2.5","body":"The <code>Array.asList</code> method is very fast for arrays of primitives. ;)"},{"owner":{"reputation":4564,"user_id":395685,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG","display_name":"Nyerguds","link":"https://stackoverflow.com/users/395685/nyerguds"},"edited":false,"score":18,"creation_date":1289654159,"post_id":1128728,"comment_id":4506346,"content_license":"CC BY-SA 2.5","body":"Odd, NetBeans claims that &#39;Arrays.asList(holidays)&#39; for an &#39;int[] holidays&#39; returns a &#39;list&lt;int[]&gt;&#39;, and not a &#39;list&lt;int&gt;&#39;. It just contains one single element. Meaning the Contains doesn&#39;t work since it just has one element; the int array."},{"owner":{"reputation":4437,"user_id":737842,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/dbcb75bedd35b2394cceda5df9c2f58e?s=128&d=identicon&r=PG","display_name":"Stas Jaro","link":"https://stackoverflow.com/users/737842/stas-jaro"},"edited":false,"score":2,"creation_date":1307724208,"post_id":1128728,"comment_id":7372954,"content_license":"CC BY-SA 3.0","body":"that method is about 3 times slower than a basic for search loop"},{"owner":{"reputation":3346,"user_id":371623,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/29d0ef68605f89889a48a8fbc64f5ce1?s=128&d=identicon&r=PG","display_name":"CromTheDestroyer","link":"https://stackoverflow.com/users/371623/cromthedestroyer"},"edited":false,"score":62,"creation_date":1308070280,"post_id":1128728,"comment_id":7426963,"content_license":"CC BY-SA 3.0","body":"Nyerguds: indeed, this does not work for primitives. In java primitive types can&#39;t be generic. asList is declared as &lt;T&gt; List&lt;T&gt; asList(T...). When you pass an int[] into it, the compiler infers T=int[] because it can&#39;t infer T=int, because primitives can&#39;t be generic."},{"owner":{"reputation":38341,"user_id":253468,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/eump2.jpg?s=128&g=1","display_name":"TWiStErRob","link":"https://stackoverflow.com/users/253468/twisterrob"},"reply_to_user":{"reputation":312474,"user_id":73070,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG","display_name":"Joey","link":"https://stackoverflow.com/users/73070/joey"},"edited":false,"score":28,"creation_date":1350465372,"post_id":1128728,"comment_id":17523529,"content_license":"CC BY-SA 3.0","body":"@Joey just a side note, it&#39;s an <code>ArrayList</code>, but not <code>java.util.ArrayList</code> as you expect, the real class returned is: <code>java.util.Arrays.ArrayList&lt;E&gt;</code> defined as: <code>public class java.util.Arrays {private static class ArrayList&lt;E&gt; ... {}}</code>."},{"owner":{"reputation":312474,"user_id":73070,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG","display_name":"Joey","link":"https://stackoverflow.com/users/73070/joey"},"edited":false,"score":0,"creation_date":1350471164,"post_id":1128728,"comment_id":17526218,"content_license":"CC BY-SA 3.0","body":"Eek. Any reason why it is <i>another</i> ArrayList? o.O"},{"owner":{"reputation":9864,"user_id":27011,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/cac1dd7e6f0f7c42b6378c3b2c8e92c6?s=128&d=identicon&r=PG","display_name":"Simon Lehmann","link":"https://stackoverflow.com/users/27011/simon-lehmann"},"reply_to_user":{"reputation":312474,"user_id":73070,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG","display_name":"Joey","link":"https://stackoverflow.com/users/73070/joey"},"edited":false,"score":11,"creation_date":1374168875,"post_id":1128728,"comment_id":25845601,"content_license":"CC BY-SA 3.0","body":"@ÐÎ¿ÐµÑ Because it is not a &quot;normal&quot; ArrayList, <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29\" rel=\"nofollow noreferrer\">Arrays.asList(T...)</a> &quot;returns a fixed-size list backed by the specified array.&quot; Arrays.ArrayList is just a &quot;thin&quot; List-wrapper around an existing array. Most importantly, you cannot add or remove elements, because it does not allocate it&#39;s own array, but directly uses the original. This makes it very cheap to use, as no copying has to be done, it just stores a reference to the original array. So don&#39;t be afraid to use Arrays.asList(T...), it is not expensive."},{"owner":{"reputation":23137,"user_id":1527084,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/3c93245c8f90bb4256781ab91e212821?s=128&d=identicon&r=PG","display_name":"Geek","link":"https://stackoverflow.com/users/1527084/geek"},"edited":false,"score":0,"creation_date":1377843576,"post_id":1128728,"comment_id":27244946,"content_license":"CC BY-SA 3.0","body":"@Joey you wrote &quot;The constructor will just change a reference so that&#39;s not much work to be done there.&quot;. which constructor?"},{"owner":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"reply_to_user":{"reputation":8214,"user_id":3018377,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/LlpBb.jpg?s=128&g=1","display_name":"Loc","link":"https://stackoverflow.com/users/3018377/loc"},"edited":false,"score":2,"creation_date":1386390714,"post_id":1128728,"comment_id":30531026,"content_license":"CC BY-SA 3.0","body":"@Loc, totally agree, I questioned all the up votes 2 years ago when it had 75. There really should be a limit of maybe 10 on any answer. The answer should not be used in a popularity contest, only to indicate that it is an answer the OP should consider to solve the given question."},{"owner":{"reputation":1792,"user_id":269361,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/124cda7f0e8d259e69d49ed43868639e?s=128&d=identicon&r=PG","display_name":"fool4jesus","link":"https://stackoverflow.com/users/269361/fool4jesus"},"edited":false,"score":2,"creation_date":1398091485,"post_id":1128728,"comment_id":35485479,"content_license":"CC BY-SA 3.0","body":"What&#39;s the problem with the upvotes? It saves some people time, and the more curious read the comments and learn more and so make better decisions in the future. To me, that&#39;s a successful answer."},{"owner":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"reply_to_user":{"reputation":1792,"user_id":269361,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/124cda7f0e8d259e69d49ed43868639e?s=128&d=identicon&r=PG","display_name":"fool4jesus","link":"https://stackoverflow.com/users/269361/fool4jesus"},"edited":false,"score":0,"creation_date":1398092653,"post_id":1128728,"comment_id":35486136,"content_license":"CC BY-SA 3.0","body":"@fool4jesus, this is my answer. Read my comment from above. There is no way that any answer is that good. How does a question with 700 up votes versus one with 10 up votes save people &quot;more&quot; time? You only need a few up votes to indicate to anybody reading the question that this answer should be considered."},{"owner":{"reputation":1792,"user_id":269361,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/124cda7f0e8d259e69d49ed43868639e?s=128&d=identicon&r=PG","display_name":"fool4jesus","link":"https://stackoverflow.com/users/269361/fool4jesus"},"edited":false,"score":0,"creation_date":1398126003,"post_id":1128728,"comment_id":35501633,"content_license":"CC BY-SA 3.0","body":"I did read your comment (as I suggested people should :-). I just don&#39;t agree. In my view, the number of upvotes can indicate the excellence of the answer, but perhaps even more the frequency of the question. I myself have been programming in java for many years, but I don&#39;t keep track of all the latest additions to the language and wanted a quick sanity check as to whether there were any better ways to do this commonly-needed function. Would you feel better if I took back my upvote?"},{"owner":{"reputation":508,"user_id":1495769,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/dbe7df74434a1f22c4a94d8f0af91592?s=128&d=identicon&r=PG","display_name":"Jack","link":"https://stackoverflow.com/users/1495769/jack"},"edited":false,"score":0,"creation_date":1412764057,"post_id":1128728,"comment_id":41185323,"content_license":"CC BY-SA 3.0","body":"This method will not work with primitives! I found only found this out after I was trying to do a similar thing with an array of integers."},{"owner":{"reputation":31073,"user_id":286685,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/9c8897ea40c61eeab099efd60ffa7466?s=128&d=identicon&r=PG","display_name":"Stijn de Witt","link":"https://stackoverflow.com/users/286685/stijn-de-witt"},"reply_to_user":{"reputation":1792,"user_id":269361,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/124cda7f0e8d259e69d49ed43868639e?s=128&d=identicon&r=PG","display_name":"fool4jesus","link":"https://stackoverflow.com/users/269361/fool4jesus"},"edited":false,"score":0,"creation_date":1415626899,"post_id":1128728,"comment_id":42253386,"content_license":"CC BY-SA 3.0","body":"@fool4jesus &quot;the number of upvotes can indicate the excellence of the answer, but perhaps even more the frequency of the question.&quot; Agreed! I actually think the score somehow translates into Google search ranking even. Thus, good answers to common questions will be high in the rankings. Sounds good to me!"},{"owner":{"user_type":"does_not_exist","display_name":"user4229245"},"edited":false,"score":1,"creation_date":1430579754,"post_id":1128728,"comment_id":48126254,"content_license":"CC BY-SA 3.0","body":"I&#39;m sorry, but it&#39;s a good answer only for the particular example where the array is small.  But as a general purpose solution?  Converting an array to a collection just so you can use that collection to peruse itself and tell you if something exists in it?  Terrible."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":2,"creation_date":1441965264,"post_id":1128728,"comment_id":52898820,"content_license":"CC BY-SA 3.0","body":"@tgm1024: as others explained in comments above yours, this is just a thin wrapper that doesn&#39;t do any copying.   <a href=\"http://stackoverflow.com/questions/1128723/how-can-i-test-if-an-array-contains-a-certain-value#comment25845601_1128728\" title=\"how can i test if an array contains a certain value%23comment25845601_1128728\">stackoverflow.com/questions/1128723/&hellip;</a>"},{"owner":{"user_type":"does_not_exist","display_name":"user4229245"},"reply_to_user":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1441976723,"post_id":1128728,"comment_id":52905989,"content_license":"CC BY-SA 3.0","body":"@PeterCordes, it&#39;s not about copying.  That &quot;thin wrapper&quot; is no thin wrapper----it&#39;s a method call for every single access.  For really large arrays, you are always best to leave it be and let the compiler supply the access code.  Really, it&#39;s not a great general purpose solution, if part of the definition of &quot;general purpose&quot; includes the likelihood of large datasets <b>already</b> in array form."},{"owner":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":0,"creation_date":1441978592,"post_id":1128728,"comment_id":52907384,"content_license":"CC BY-SA 3.0","body":"@tgm1024: I thought JVMs were pretty good about optimizing away trivial method calls that just return <code>A[i]</code> or something.  It should be easy compared to most compiler optimizations, and also really effective, since it comes up a lot."},{"owner":{"user_type":"does_not_exist","display_name":"user4229245"},"reply_to_user":{"reputation":234370,"user_id":224132,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/N4ivW.png?s=128&g=1","display_name":"Peter Cordes","link":"https://stackoverflow.com/users/224132/peter-cordes"},"edited":false,"score":1,"creation_date":1441979546,"post_id":1128728,"comment_id":52908039,"content_license":"CC BY-SA 3.0","body":"@PeterCordes, well, I&#39;ll leave it here then, because whatever optimizations happen with collections, you&#39;ll likely exceed that with arrays, <b><i>unless</i></b> the compiler can manage (ptr++) style optimizations based upon collection hints.  But be careful with micro-benchmarks.  They are very <i>very</i> difficult to do properly with Java.  In any case, it&#39;s <b><i>not</i></b> about copying data."},{"owner":{"reputation":8528,"user_id":837722,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/sKLRI.png?s=128&g=1","display_name":"Si8","link":"https://stackoverflow.com/users/837722/si8"},"edited":false,"score":0,"creation_date":1460243384,"post_id":1128728,"comment_id":60652383,"content_license":"CC BY-SA 3.0","body":"What about a string instead of int?"},{"owner":{"reputation":2219,"user_id":2680254,"user_type":"registered","accept_rate":54,"profile_image":"https://graph.facebook.com/100000442252147/picture?type=large","display_name":"Gilberto Ibarra","link":"https://stackoverflow.com/users/2680254/gilberto-ibarra"},"edited":false,"score":0,"creation_date":1467302530,"post_id":1128728,"comment_id":63687638,"content_license":"CC BY-SA 3.0","body":"For primitives we cand o somthing like this: public Integer keyCodes[] = { KeyEvent.KEYCODE_0};"},{"owner":{"reputation":759,"user_id":1800992,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/cPtIT.jpg?s=128&g=1","display_name":"Salah Alshaal","link":"https://stackoverflow.com/users/1800992/salah-alshaal"},"edited":false,"score":0,"creation_date":1467874878,"post_id":1128728,"comment_id":63899463,"content_license":"CC BY-SA 3.0","body":"This produced <code>java.lang.NoClassDefFoundError: IntStream</code> using Java8 on Android"},{"owner":{"reputation":2150,"user_id":4173303,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Zeu9V.png?s=128&g=1","display_name":"Christophe Weis","link":"https://stackoverflow.com/users/4173303/christophe-weis"},"edited":false,"score":0,"creation_date":1488526167,"post_id":1128728,"comment_id":72279319,"content_license":"CC BY-SA 3.0","body":"Take care when using an array of strings, they should be compared with <code>String.equals</code> method not <code>==</code> !"},{"owner":{"reputation":507,"user_id":7496806,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/fsK1X.png?s=128&g=1","display_name":"Asqiir","link":"https://stackoverflow.com/users/7496806/asqiir"},"edited":false,"score":0,"creation_date":1524316256,"post_id":1128728,"comment_id":86928507,"content_license":"CC BY-SA 3.0","body":"Just of curiosity: how does <code>contains</code> check, whether the array contains it? Does it use <code>equals</code> or <code>==</code>?"},{"owner":{"reputation":2117,"user_id":2856202,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/AHuOz.png?s=128&g=1","display_name":"eigenfield","link":"https://stackoverflow.com/users/2856202/eigenfield"},"edited":false,"score":0,"creation_date":1581575798,"post_id":1128728,"comment_id":106482706,"content_license":"CC BY-SA 4.0","body":"How about for array of bytes <code>byte[]</code> ?"},{"owner":{"reputation":708,"user_id":1430630,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0ca01cd7793eaa85141f73bb0a65456b?s=128&d=identicon&r=PG","display_name":"Luke","link":"https://stackoverflow.com/users/1430630/luke"},"edited":false,"score":1,"creation_date":1592973161,"post_id":1128728,"comment_id":110612849,"content_license":"CC BY-SA 4.0","body":"The answer should give an example of apache&#39;s <code>ArrayUtils.contains</code> method since it is likely to be faster."},{"owner":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"reply_to_user":{"reputation":708,"user_id":1430630,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0ca01cd7793eaa85141f73bb0a65456b?s=128&d=identicon&r=PG","display_name":"Luke","link":"https://stackoverflow.com/users/1430630/luke"},"edited":false,"score":0,"creation_date":1593007800,"post_id":1128728,"comment_id":110629409,"content_license":"CC BY-SA 4.0","body":"@Luke, no it shouldn&#39;t. The answer was designed to be simple and use classes of the JDK. It was not designed to force users to download 3rd party classes. It was also not a question about speed/efficiency. Add it as your own answer if you feel it is that important."}],"owner":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"comment_count":31,"is_accepted":true,"score":3071,"last_activity_date":1539002100,"last_edit_date":1539002100,"creation_date":1247616289,"answer_id":1128728,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<pre><code>Arrays.asList(yourArray).contains(yourValue)\n</code></pre>\n\n<p>Warning: this doesn't work for arrays of primitives (see the comments).</p>\n\n<hr>\n\n<h2>Since <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\">java-8</a> you can now use Streams.</h2>\n\n<pre><code>String[] values = {\"AB\",\"BC\",\"CD\",\"AE\"};\nboolean contains = Arrays.stream(values).anyMatch(\"s\"::equals);\n</code></pre>\n\n<p>To check whether an array of <code>int</code>, <code>double</code> or <code>long</code> contains a value use <code>IntStream</code>, <code>DoubleStream</code> or <code>LongStream</code> respectively.</p>\n\n<h2>Example</h2>\n\n<pre><code>int[] a = {1,2,3,4};\nboolean contains = IntStream.of(a).anyMatch(x -&gt; x == 4);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"edited":false,"score":0,"creation_date":1247616404,"post_id":1128729,"comment_id":946144,"content_license":"CC BY-SA 2.5","body":"You can use the sort functions in the same class to accomplish that...I should add that to my answer."},{"owner":{"reputation":312474,"user_id":73070,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/d54ed51c0f03cb461741c3ec77a837b2?s=128&d=identicon&r=PG","display_name":"Joey","link":"https://stackoverflow.com/users/73070/joey"},"edited":false,"score":1,"creation_date":1247616656,"post_id":1128729,"comment_id":946161,"content_license":"CC BY-SA 2.5","body":"Will probably cost more than the asList().contains() approach, then, I think. Unless you need to do that check very often (but if it&#39;s just a static list of values that can be sorted to begin with, to be fair)."},{"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"edited":false,"score":0,"creation_date":1247616828,"post_id":1128729,"comment_id":946169,"content_license":"CC BY-SA 2.5","body":"True. There are a lot of variables as to which would be the most effective. It&#39;s good to have options though."},{"owner":{"reputation":2427,"user_id":2378429,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c3208c57486859807197c6d3125ba137?s=128&d=identicon&r=PG","display_name":"O.O.Balance","link":"https://stackoverflow.com/users/2378429/o-o-balance"},"edited":false,"score":0,"creation_date":1515888707,"post_id":1128729,"comment_id":83473789,"content_license":"CC BY-SA 3.0","body":"Some code that does this here: <a href=\"https://stackoverflow.com/a/48242328/9131078\">stackoverflow.com/a/48242328/9131078</a>"},{"owner":{"reputation":259,"user_id":3126558,"user_type":"registered","accept_rate":14,"profile_image":"https://i.stack.imgur.com/pSaLQ.jpg?s=128&g=1","display_name":"arunwithasmile","link":"https://stackoverflow.com/users/3126558/arunwithasmile"},"edited":false,"score":0,"creation_date":1518601879,"post_id":1128729,"comment_id":84569600,"content_license":"CC BY-SA 3.0","body":"Sorting a whole array for a purpose of a search is expensive. We can use the same CPU time for the liner search itself. I prefer binary search on a collection which is already constructed in sorted order beforehand."}],"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"comment_count":5,"is_accepted":false,"score":28,"last_activity_date":1498244884,"last_edit_date":1498244884,"creation_date":1247616300,"answer_id":1128729,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>You can use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">Arrays class</a> to perform a binary search for the value. If your array is not sorted, you will have to use the sort functions in the same class to sort the array, then search through it.</p>\n"},{"comments":[{"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"edited":false,"score":1,"creation_date":1247616639,"post_id":1128732,"comment_id":946159,"content_license":"CC BY-SA 2.5","body":"Also, like I said in my answer, if you use the Arrays class, you can sort the array then perform the binary search on the newly sorted array."},{"owner":{"reputation":84181,"user_id":23072,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ad19b9146f4ffd608bf137323f68de0c?s=128&d=identicon&r=PG","display_name":"Uri","link":"https://stackoverflow.com/users/23072/uri"},"edited":false,"score":1,"creation_date":1247616899,"post_id":1128732,"comment_id":946174,"content_license":"CC BY-SA 2.5","body":"@Thomas: I agree. Or you can just add everything into a TreeSet; same complexity. I would use the Arrays if it doesn&#39;t change (maybe save a little bit of memory locality since the references are located contiguously though the strings aren&#39;t). I would use the set if this would change over time."}],"owner":{"reputation":84181,"user_id":23072,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/ad19b9146f4ffd608bf137323f68de0c?s=128&d=identicon&r=PG","display_name":"Uri","link":"https://stackoverflow.com/users/23072/uri"},"comment_count":2,"is_accepted":false,"score":71,"last_activity_date":1405350786,"last_edit_date":1405350786,"creation_date":1247616348,"answer_id":1128732,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>If the array is not sorted, you will have to iterate over everything and make a call to equals on each.</p>\n\n<p>If the array is sorted, you can do a binary search, there's one in the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">Arrays</a> class.</p>\n\n<p>Generally speaking, if you are going to do a lot of membership checks, you may want to store everything in a Set, not in an array. </p>\n"},{"comments":[{"owner":{"reputation":261887,"user_id":24874,"user_type":"registered","accept_rate":78,"profile_image":"https://www.gravatar.com/avatar/b85169daf0d165b94ea4fa70f409686c?s=128&d=identicon&r=PG","display_name":"Drew Noakes","link":"https://stackoverflow.com/users/24874/drew-noakes"},"edited":false,"score":191,"creation_date":1303714461,"post_id":1128899,"comment_id":6618069,"content_license":"CC BY-SA 3.0","body":"Except it&#39;s O(N) to create the collection in the first place :)"},{"owner":{"reputation":1392,"user_id":109813,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f58ab1513827e8dbe312a8a550be993b?s=128&d=identicon&r=PG","display_name":"Xr.","link":"https://stackoverflow.com/users/109813/xr"},"edited":false,"score":65,"creation_date":1318448344,"post_id":1128899,"comment_id":9426746,"content_license":"CC BY-SA 3.0","body":"If it&#39;s static, it&#39;s probably going to be used quite a few times. So, the time consumed to initialise the set has good chances of being quite small compared to the cost of a lot of linear searches."},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"edited":false,"score":1,"creation_date":1331126589,"post_id":1128899,"comment_id":12180143,"content_license":"CC BY-SA 3.0","body":"Creating then the collection is going to be dominated by code loading time (which is technically O(n) but practically constant)."},{"owner":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"edited":false,"score":2,"creation_date":1409288690,"post_id":1128899,"comment_id":39918004,"content_license":"CC BY-SA 3.0","body":"@TomHawtin-tackline Why do you say &quot;in particular here we want a set&quot;? What is the advantage of a Set (HashSet) in this case? Why is a &quot;reference array&quot; bad (by &quot;reference array&quot; do you mean an ArrayList backed by an array as generated by a call to <code>Arrays.asList</code>)?"},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"reply_to_user":{"reputation":206732,"user_id":642706,"user_type":"registered","accept_rate":58,"profile_image":"https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1","display_name":"Basil Bourque","link":"https://stackoverflow.com/users/642706/basil-bourque"},"edited":false,"score":1,"creation_date":1409318986,"post_id":1128899,"comment_id":39931751,"content_license":"CC BY-SA 3.0","body":"@BasilBourque The problem trying to be solved is determining whether a value is within a set of values. A <code>Set</code> is a very good fit. / By &quot;reference array&quot; I mean a Java language array of reference types. Arrays of primitives, whilst not great, are a bit short of efficient alternatives without some necessary clunky library. A later version of Java could support immutable selfless/value types, which would change things."},{"owner":{"reputation":15823,"user_id":580677,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/4b386c750d5f10ac62b6547f67e6a7a6?s=128&d=identicon&r=PG","display_name":"nmr","link":"https://stackoverflow.com/users/580677/nmr"},"edited":false,"score":0,"creation_date":1410299367,"post_id":1128899,"comment_id":40271866,"content_license":"CC BY-SA 3.0","body":"isn&#39;t this lookup actually O(log(n))"},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"reply_to_user":{"reputation":15823,"user_id":580677,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/4b386c750d5f10ac62b6547f67e6a7a6?s=128&d=identicon&r=PG","display_name":"nmr","link":"https://stackoverflow.com/users/580677/nmr"},"edited":false,"score":6,"creation_date":1410306714,"post_id":1128899,"comment_id":40273906,"content_license":"CC BY-SA 3.0","body":"@nmr A <code>TreeSet</code> would be <code>O(log n)</code>. <code>HashSet</code>s are scaled such that the mean number of elements in a bucket is roughly constant. At least for arrays up to 2^30. There may be affects from, say, hardware caches which the big-O analysis ignores. Also assumes the hash function is working effectively."},{"owner":{"reputation":68745,"user_id":53897,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/2e71c1745ebc5401c8c8dfbf7c9a5d30?s=128&d=identicon&r=PG","display_name":"Thorbj&#248;rn Ravn Andersen","link":"https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"},"edited":false,"score":0,"creation_date":1436095364,"post_id":1128899,"comment_id":50458696,"content_license":"CC BY-SA 3.0","body":"you have to iterate the array to create the collection. O(n). You can then argue that amortized or simiar this evens out, but you must have an O(n) step somewhere."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1537821871,"post_id":1128899,"comment_id":91915427,"content_license":"CC BY-SA 4.0","body":"This answer is completely right.  The point most of the commenters miss is that if you were placing the objects into a collection in the first place it wouldn&#39;t be much more time than creating the array was.  Just avoid using arrays unless you are absolutely sure nothing else will do (For performance purposes), using an array because you think it will be faster without testing to see if the collection is actually too slow in the first place is a perfect example of premature optimization."},{"owner":{"reputation":2225,"user_id":2075782,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/3ac57ec623ff8de6d42bcd4bff45e69e?s=128&d=identicon&r=PG&f=1","display_name":"Paulo Oliveira","link":"https://stackoverflow.com/users/2075782/paulo-oliveira"},"edited":false,"score":0,"creation_date":1560262880,"post_id":1128899,"comment_id":99673308,"content_license":"CC BY-SA 4.0","body":"For me this solution with Set is way more elegant than the accepted answer. Thanks."},{"owner":{"reputation":3481,"user_id":10630900,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ece5V.png?s=128&g=1","display_name":"Minn","link":"https://stackoverflow.com/users/10630900/minn"},"edited":false,"score":1,"creation_date":1566160677,"post_id":1128899,"comment_id":101559459,"content_license":"CC BY-SA 4.0","body":"This doesn&#39;t answer the question about the array. You just say &quot;don&#39;t use arrays&quot; which is not a solution. Additionally, you just say &quot;X is bad&quot; but don&#39;t explain why which is always bad for an answer."},{"owner":{"reputation":28448,"user_id":12299000,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0pja9.png?s=128&g=1","display_name":"kaya3","link":"https://stackoverflow.com/users/12299000/kaya3"},"edited":false,"score":0,"creation_date":1572485364,"post_id":1128899,"comment_id":103578303,"content_license":"CC BY-SA 4.0","body":"At least in the OpenJDK implementation, the four-parameter <code>Set.of</code> method doesn&#39;t return a HashSet data structure; for so few elements, that would not be efficient. See the code here:  <a href=\"http://hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/java.base/share/classes/java/util/ImmutableCollections.java#l309\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk9/jdk9/jdk/file/86f19074aad2/src/&hellip;</a>"},{"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"reply_to_user":{"reputation":28448,"user_id":12299000,"user_type":"registered","profile_image":"https://i.stack.imgur.com/0pja9.png?s=128&g=1","display_name":"kaya3","link":"https://stackoverflow.com/users/12299000/kaya3"},"edited":false,"score":0,"creation_date":1572487684,"post_id":1128899,"comment_id":103578752,"content_license":"CC BY-SA 4.0","body":"@kaya3 Good. Big-O is for sufficiently large (i.e. quite large) n. I believe C# has had some kind of hybrid implementation from day 1, or perhaps 2.0."}],"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"comment_count":13,"is_accepted":false,"score":379,"last_activity_date":1576847671,"last_edit_date":1592644375,"creation_date":1247620382,"answer_id":1128899,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<h2>Concise update for Java SE 9</h2>\n<p>Reference arrays are bad. For this case we are after a set. Since Java SE 9 we have <code>Set.of</code>.</p>\n<pre><code>private static final Set&lt;String&gt; VALUES = Set.of(\n    &quot;AB&quot;,&quot;BC&quot;,&quot;CD&quot;,&quot;AE&quot;\n);\n</code></pre>\n<p>&quot;Given String s, is there a good way of testing whether VALUES contains s?&quot;</p>\n<pre><code>VALUES.contains(s)\n</code></pre>\n<p>O(1).</p>\n<p>The <strong>right type</strong>, <strong>immutable</strong>, <strong>O(1)</strong> and <strong>concise</strong>. Beautiful.*</p>\n<h2>Original answer details</h2>\n<p>Just to clear the code up to start with. We have (corrected):</p>\n<pre><code>public static final String[] VALUES = new String[] {&quot;AB&quot;,&quot;BC&quot;,&quot;CD&quot;,&quot;AE&quot;};\n</code></pre>\n<p>This is a mutable static which FindBugs will tell you is very naughty. Do not modify statics and do not allow other code to do so also. At an absolute minimum, the field should be private:</p>\n<pre><code>private static final String[] VALUES = new String[] {&quot;AB&quot;,&quot;BC&quot;,&quot;CD&quot;,&quot;AE&quot;};\n</code></pre>\n<p>(Note, you can actually drop the <code>new String[];</code> bit.)</p>\n<p>Reference arrays are still bad and we want a set:</p>\n<pre><code>private static final Set&lt;String&gt; VALUES = new HashSet&lt;String&gt;(Arrays.asList(\n     new String[] {&quot;AB&quot;,&quot;BC&quot;,&quot;CD&quot;,&quot;AE&quot;}\n));\n</code></pre>\n<p>(Paranoid people, such as myself, may feel more at ease if this was wrapped in <code>Collections.unmodifiableSet</code> - it could then even be made public.)</p>\n<p>(*To be a little more on brand, the collections API is predictably still missing immutable collection types and the syntax is still far too verbose, for my tastes.)</p>\n"},{"comments":[{"owner":{"reputation":17809,"user_id":225899,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/2d205a5ec26e812c3694335b819d68c9?s=128&d=identicon&r=PG","display_name":"James P.","link":"https://stackoverflow.com/users/225899/james-p"},"edited":false,"score":1,"creation_date":1307038836,"post_id":1128913,"comment_id":7242214,"content_license":"CC BY-SA 3.0","body":"Exception throwing is apparently heavy but this would be a novel way of testing a value if it works. The downside is that the enum has to be defined beforehand."}],"owner":{"reputation":140398,"user_id":4725,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B53xA.jpg?s=128&g=1","display_name":"Tom Hawtin - tackline","link":"https://stackoverflow.com/users/4725/tom-hawtin-tackline"},"comment_count":1,"is_accepted":false,"score":17,"last_activity_date":1247620706,"creation_date":1247620706,"answer_id":1128913,"question_id":1128723,"content_license":"CC BY-SA 2.5","body":"<p>ObStupidAnswer (but I think there's a lesson in here somewhere):</p>\n\n<pre><code>enum Values {\n    AB, BC, CD, AE\n}\n\ntry {\n    Values.valueOf(s);\n    return true;\n} catch (IllegalArgumentException exc) {\n    return false;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1912,"user_id":161995,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/f2f7d62ddeeb7b96c338131837eb1c6a?s=128&d=identicon&r=PG","display_name":"Erik","link":"https://stackoverflow.com/users/161995/erik"},"edited":false,"score":6,"creation_date":1369905414,"post_id":1128939,"comment_id":24268687,"content_license":"CC BY-SA 3.0","body":"I don&#39;t understand this code. You sort the array &#39;strings&#39; and use the same (sorted) array in both calls to binarySearch. How can that show anything except HotSpot runtime optimization? The same with the asList.contains call. You create a list from the sorted array and then does contains on it with the highest value. Of course it&#39;s going to take time. What is the meaning of this test? Not to mention being an improperly written microbenchmark"},{"owner":{"reputation":1912,"user_id":161995,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/f2f7d62ddeeb7b96c338131837eb1c6a?s=128&d=identicon&r=PG","display_name":"Erik","link":"https://stackoverflow.com/users/161995/erik"},"edited":false,"score":0,"creation_date":1369905531,"post_id":1128939,"comment_id":24268752,"content_license":"CC BY-SA 3.0","body":"Also, since binary search can only be applied to a sorted set, sort and search is the only possible way to use binary search."},{"owner":{"reputation":5267,"user_id":692560,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/H4sk0.png?s=128&g=1","display_name":"Thor84no","link":"https://stackoverflow.com/users/692560/thor84no"},"edited":false,"score":0,"creation_date":1382617537,"post_id":1128939,"comment_id":29034869,"content_license":"CC BY-SA 3.0","body":"Sorting may have already been done for a number of other reasons, e.g., it could be sorted on init and never changed. There&#39;s use in testing search time on its own. Where this falls down however is in being a less than stellar example of microbenchmarking. Microbenchmarks are notoriously difficult to get right in Java and should for example include executing the test code enough to get hotspot optimisation before running the actual test, let alone running the actual test code more than ONCE with a timer. <a href=\"http://www.kdgregory.com/index.php?page=java.microBenchmark\" rel=\"nofollow noreferrer\">Example pitfalls</a>"},{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"edited":false,"score":7,"creation_date":1389400743,"post_id":1128939,"comment_id":31662655,"content_license":"CC BY-SA 3.0","body":"This test is flawed as it runs all 3 tests in the <b>same</b> JVM instance. The later tests could benefit from the earlier ones warming up the cache, JIT, etc"},{"owner":{"reputation":962,"user_id":554966,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/07897bc81bcaff9e5cdfb8c77b0197fc?s=128&d=identicon&r=PG","display_name":"dragn","link":"https://stackoverflow.com/users/554966/dragn"},"edited":false,"score":4,"creation_date":1410443234,"post_id":1128939,"comment_id":40334554,"content_license":"CC BY-SA 3.0","body":"This test is actually totally unrelated. Sort &amp; Search is linearithmic (n*log(n)) complexity, binary search is logarithmic and ArrayUtils.contains is obviously linear. It&#39;s no use to compare this solutions as they are in totally different complexity classes."}],"owner":{"reputation":304870,"user_id":131872,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG","display_name":"camickr","link":"https://stackoverflow.com/users/131872/camickr"},"comment_count":5,"is_accepted":false,"score":50,"last_activity_date":1554228330,"last_edit_date":1554228330,"creation_date":1247621331,"answer_id":1128939,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>For what it's worth I ran a test comparing the 3 suggestions for speed. I generated random integers, converted them to a String and added them to an array. I then searched for the highest possible number/string, which would be a worst case scenario for the <code>asList().contains()</code>.</p>\n\n<p>When using a 10K array size the results were:</p>\n\n<pre>\nSort & Search   : 15\nBinary Search   : 0\nasList.contains : 0\n</pre>\n\n<p>When using a 100K array the results were:</p>\n\n<pre>\nSort & Search   : 156\nBinary Search   : 0\nasList.contains : 32\n</pre>\n\n<p>So if the array is created in sorted order the binary search is the fastest, otherwise the <code>asList().contains</code> would be the way to go. If you have many searches, then it may be worthwhile to sort the array so you can use the binary search. It all depends on your application.  </p>\n\n<p>I would think those are the results most people would expect. Here is the test code:</p>\n\n<pre><code>import java.util.*;\n\npublic class Test\n{\n    public static void main(String args[])\n    {\n        long start = 0;\n        int size = 100000;\n        String[] strings = new String[size];\n        Random random = new Random();\n\n\n        for (int i = 0; i &lt; size; i++)\n            strings[i] = \"\" + random.nextInt( size );\n\n        start = System.currentTimeMillis();\n        Arrays.sort(strings);\n        System.out.println(Arrays.binarySearch(strings, \"\" + (size - 1) ));\n        System.out.println(\"Sort &amp; Search : \" + (System.currentTimeMillis() - start));\n\n        start = System.currentTimeMillis();\n        System.out.println(Arrays.binarySearch(strings, \"\" + (size - 1) ));\n        System.out.println(\"Search        : \" + (System.currentTimeMillis() - start));\n\n        start = System.currentTimeMillis();\n        System.out.println(Arrays.asList(strings).contains( \"\" + (size - 1) ));\n        System.out.println(\"Contains      : \" + (System.currentTimeMillis() - start));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":9843,"user_id":177293,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/ae4384c9130c9b1707a15584f6b75333?s=128&d=identicon&r=PG","display_name":"Skylar Saveland","link":"https://stackoverflow.com/users/177293/skylar-saveland"},"edited":false,"score":2,"creation_date":1404408067,"post_id":3019862,"comment_id":38039047,"content_license":"CC BY-SA 3.0","body":"HashSet membership should be O(1) and binary search on a sorted collection is O(log n)."}],"owner":{"reputation":131,"user_id":364147,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/4304b7d2380f2f674768550919bded13?s=128&d=identicon&r=PG","display_name":"not","link":"https://stackoverflow.com/users/364147/not"},"comment_count":1,"is_accepted":false,"score":13,"last_activity_date":1546679367,"last_edit_date":1546679367,"creation_date":1276223876,"answer_id":3019862,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Actually, if you use HashSet&lt;String> as Tom Hawtin proposed you don't need to worry about sorting, and your speed is the same as with binary search on a presorted array, probably even faster.</p>\n\n<p>It all depends on how your code is set up, obviously, but from where I stand, the order would be:</p>\n\n<p>On an <em>unsorted</em> array:</p>\n\n<ol>\n<li>HashSet</li>\n<li>asList</li>\n<li>sort &amp; binary</li>\n</ol>\n\n<p>On a sorted array:</p>\n\n<ol>\n<li>HashSet</li>\n<li>Binary</li>\n<li>asList</li>\n</ol>\n\n<p>So either way, HashSet for the win.</p>\n"},{"owner":{"reputation":9275,"user_id":509619,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/fd23036b365ac4d5492207da6dbe0248?s=128&d=identicon&r=PG","display_name":"Mark Rhodes","link":"https://stackoverflow.com/users/509619/mark-rhodes"},"comment_count":0,"is_accepted":false,"score":39,"last_activity_date":1546679462,"last_edit_date":1546679462,"creation_date":1295531884,"answer_id":4747988,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Instead of using the quick array initialisation syntax too, you could just initialise it as a List straight away in a similar manner using the Arrays.asList method, e.g.:</p>\n\n<pre><code>public static final List&lt;String&gt; STRINGS = Arrays.asList(\"firstString\", \"secondString\" ...., \"lastString\");\n</code></pre>\n\n<p>Then you can do (like above): </p>\n\n<pre><code>STRINGS.contains(\"the string you want to find\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1921,"user_id":526664,"user_type":"registered","accept_rate":54,"profile_image":"https://i.stack.imgur.com/jsQUy.jpg?s=128&g=1","display_name":"Jason","link":"https://stackoverflow.com/users/526664/jason"},"reply_to_user":{"reputation":10476,"user_id":579646,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/JJvq2.png?s=128&g=1","display_name":"max4ever","link":"https://stackoverflow.com/users/579646/max4ever"},"edited":false,"score":4,"creation_date":1354902491,"post_id":6188194,"comment_id":18927377,"content_license":"CC BY-SA 3.0","body":"@max4ever I agree, but this is still better then &quot;rolling your own&quot; and easier to read then the raw java way."},{"owner":{"reputation":1167,"user_id":2101529,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ae4yL.jpg?s=128&g=1","display_name":"slamborne","link":"https://stackoverflow.com/users/2101529/slamborne"},"edited":false,"score":2,"creation_date":1391135956,"post_id":6188194,"comment_id":32406210,"content_license":"CC BY-SA 3.0","body":"package: <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html\" rel=\"nofollow noreferrer\">org.apache.commons.lang.ArrayUtils</a>"},{"owner":{"reputation":6547,"user_id":116301,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/e5e0253aafe7650f7819f5285cfec7f0?s=128&d=identicon&r=PG","display_name":"GuiSim","link":"https://stackoverflow.com/users/116301/guisim"},"reply_to_user":{"reputation":10476,"user_id":579646,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/JJvq2.png?s=128&g=1","display_name":"max4ever","link":"https://stackoverflow.com/users/579646/max4ever"},"edited":false,"score":40,"creation_date":1398195057,"post_id":6188194,"comment_id":35537752,"content_license":"CC BY-SA 3.0","body":"@max4ever Sometimes you already have this library included (for other reasons) and it is a perfectly valid answer. I was looking for this and I already depend on Apache Commons Lang. Thanks for this answer."},{"owner":{"reputation":3318,"user_id":688843,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/8d3b2b2d2535e5c11b68ad7866d7a7c8?s=128&d=identicon&r=PG","display_name":"Buffalo","link":"https://stackoverflow.com/users/688843/buffalo"},"edited":false,"score":1,"creation_date":1425902350,"post_id":6188194,"comment_id":46137320,"content_license":"CC BY-SA 3.0","body":"Or you could just copy the method (and depedencies if there are any)."},{"owner":{"reputation":1323,"user_id":3811599,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/miUke.png?s=128&g=1","display_name":"Marcel","link":"https://stackoverflow.com/users/3811599/marcel"},"edited":false,"score":0,"creation_date":1456240759,"post_id":6188194,"comment_id":58849224,"content_license":"CC BY-SA 3.0","body":"This is best way if you already have the Apache Commons lang in your Project. If you dont have it. You have to write your one Method."},{"owner":{"reputation":1915,"user_id":1998944,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/MC5Cy.jpg?s=128&g=1","display_name":"Kenyakorn Ketsombut","link":"https://stackoverflow.com/users/1998944/kenyakorn-ketsombut"},"reply_to_user":{"reputation":10476,"user_id":579646,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/JJvq2.png?s=128&g=1","display_name":"max4ever","link":"https://stackoverflow.com/users/579646/max4ever"},"edited":false,"score":10,"creation_date":1471007516,"post_id":6188194,"comment_id":65194472,"content_license":"CC BY-SA 3.0","body":"@max4ever Most android apps are minimalized by Proguard, putting only the classes and functions you need into your app. That makes it equal to roll your own, or copy the source of the apache thing. And whoever doesn&#39;t use that minimalization doesn&#39;t need to complain about 700kb or 78kb :)"},{"owner":{"reputation":5009,"user_id":7851115,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/uyswM.jpg?s=128&g=1","display_name":"Joshua Detwiler","link":"https://stackoverflow.com/users/7851115/joshua-detwiler"},"edited":false,"score":1,"creation_date":1498499544,"post_id":6188194,"comment_id":76512373,"content_license":"CC BY-SA 3.0","body":"Sometimes we shoot down mosquitoes with lasers. Nothing wrong with that ;)"},{"owner":{"reputation":169,"user_id":6723771,"user_type":"registered","profile_image":"https://i.stack.imgur.com/GC6Lx.png?s=128&g=1","display_name":"Andrew","link":"https://stackoverflow.com/users/6723771/andrew"},"edited":false,"score":1,"creation_date":1529937487,"post_id":6188194,"comment_id":89044499,"content_license":"CC BY-SA 4.0","body":"Thanks.  One of the nice things about this solution, as compared with the others, is that it should be perfectly readable to anyone, e.g. if <code>value</code> is in <code>some range of values</code> do A, if it&#39;s in <code>some other range of values</code> do B, etc.  Important if you know your code will likely be maintained by someone else and making their lives easy is more important than final jar size, or speed."}],"owner":{"reputation":2681,"user_id":324907,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5a49e8f0d3e979d7d21fc71c36eb64ac?s=128&d=identicon&r=PG","display_name":"Intracer","link":"https://stackoverflow.com/users/324907/intracer"},"comment_count":8,"is_accepted":false,"score":217,"last_activity_date":1445287780,"last_edit_date":1445287780,"creation_date":1306847849,"answer_id":6188194,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>You can use <code>ArrayUtils.contains</code> from <a href=\"https://commons.apache.org/proper/commons-lang/\" rel=\"noreferrer\">Apache Commons Lang</a></p>\n\n<p><a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ArrayUtils.html#contains(java.lang.Object[],%20java.lang.Object)\" rel=\"noreferrer\"><code>public static boolean contains(Object[] array, Object objectToFind)</code></a></p>\n\n<p>Note that this method returns <code>false</code> if the passed array is <code>null</code>.</p>\n\n<p>There are also methods available for primitive arrays of all kinds.</p>\n\n<h3>Example:</h3>\n\n<pre><code>String[] fieldsToInclude = { \"id\", \"name\", \"location\" };\n\nif ( ArrayUtils.contains( fieldsToInclude, \"id\" ) ) {\n    // Do some stuff.\n}\n</code></pre>\n"},{"owner":{"reputation":2812,"user_id":642389,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e94c71eefa1583686434e57e2dee1edc?s=128&d=identicon&r=PG","display_name":"jhodges","link":"https://stackoverflow.com/users/642389/jhodges"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1348064020,"creation_date":1348064020,"answer_id":12496604,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>If you have the google collections library, Tom's answer can be simplified a lot by using ImmutableSet (http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/ImmutableSet.html)</p>\n\n<p>This really removes a lot of clutter from the initialization proposed</p>\n\n<pre><code>private static final Set&lt;String&gt; VALUES =  ImmutableSet.of(\"AB\",\"BC\",\"CD\",\"AE\");\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2307,"user_id":130804,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/de70e06942e0ba7be60ff08b53c18308?s=128&d=identicon&r=PG","display_name":"Phoexo","link":"https://stackoverflow.com/users/130804/phoexo"},"edited":false,"score":1,"creation_date":1349791697,"post_id":12635769,"comment_id":17311245,"content_license":"CC BY-SA 3.0","body":"What would the performance difference be between this solution and the accepted answer?"},{"owner":{"reputation":278608,"user_id":1705598,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1","display_name":"icza","link":"https://stackoverflow.com/users/1705598/icza"},"reply_to_user":{"reputation":2307,"user_id":130804,"user_type":"registered","accept_rate":95,"profile_image":"https://www.gravatar.com/avatar/de70e06942e0ba7be60ff08b53c18308?s=128&d=identicon&r=PG","display_name":"Phoexo","link":"https://stackoverflow.com/users/130804/phoexo"},"edited":false,"score":9,"creation_date":1349868321,"post_id":12635769,"comment_id":17337146,"content_license":"CC BY-SA 3.0","body":"@Phoexo This solution is obviously faster because the accepted answer wraps the array into a list, and calls the contains() method on that list while my solution basically does what contains() only would do."},{"owner":{"reputation":1693,"user_id":1647211,"user_type":"registered","accept_rate":55,"profile_image":"https://i.stack.imgur.com/njH5r.jpg?s=128&g=1","display_name":"Alastor Moody","link":"https://stackoverflow.com/users/1647211/alastor-moody"},"edited":false,"score":1,"creation_date":1358181485,"post_id":12635769,"comment_id":19901918,"content_license":"CC BY-SA 3.0","body":"e == v || v != null &amp;&amp; v.equals( e )  --- The first part of the OR statement compares e and v. The second part does the same (after checking v isn&#39;t null). Why would you have such an implementation instead of just (e==v). Could you explain this to me?"},{"owner":{"reputation":278608,"user_id":1705598,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1","display_name":"icza","link":"https://stackoverflow.com/users/1705598/icza"},"reply_to_user":{"reputation":1693,"user_id":1647211,"user_type":"registered","accept_rate":55,"profile_image":"https://i.stack.imgur.com/njH5r.jpg?s=128&g=1","display_name":"Alastor Moody","link":"https://stackoverflow.com/users/1647211/alastor-moody"},"edited":false,"score":10,"creation_date":1358239150,"post_id":12635769,"comment_id":19921589,"content_license":"CC BY-SA 3.0","body":"@AlastorMoody e==v does a reference equality check which is very fast. If the same object (same by reference) is in the array, it will be found faster. If it is not the same instance, it still might be the same as claimed by the equals() method, this is what is checked if references are not the same."},{"owner":{"reputation":13269,"user_id":473201,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/028566a6d9c6f09b0c01eb9949e9e7c5?s=128&d=identicon&r=PG","display_name":"phreakhead","link":"https://stackoverflow.com/users/473201/phreakhead"},"edited":false,"score":22,"creation_date":1364931041,"post_id":12635769,"comment_id":22420926,"content_license":"CC BY-SA 3.0","body":"Why isn&#39;t this function part of Java? No wonder people say Java is bloated... look at all the answers above this that use a bunch of libraries when all you need is a for loop. Kids these days!"},{"owner":{"reputation":57795,"user_id":24396,"user_type":"registered","accept_rate":74,"profile_image":"https://www.gravatar.com/avatar/160d6580f280b5e9e5a1188b32c4ef2d?s=128&d=identicon&r=PG","display_name":"Steve Kuo","link":"https://stackoverflow.com/users/24396/steve-kuo"},"reply_to_user":{"reputation":13269,"user_id":473201,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/028566a6d9c6f09b0c01eb9949e9e7c5?s=128&d=identicon&r=PG","display_name":"phreakhead","link":"https://stackoverflow.com/users/473201/phreakhead"},"edited":false,"score":4,"creation_date":1389400646,"post_id":12635769,"comment_id":31662633,"content_license":"CC BY-SA 3.0","body":"@phreakhead It is part of Java, see <code>Collection.contains(Object)</code>"},{"owner":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":12,"creation_date":1392104482,"post_id":12635769,"comment_id":32801679,"content_license":"CC BY-SA 3.0","body":"@icza If you look at the source of <code>Arrays</code> and <code>ArrayList</code> it turns out that this isn&#39;t necessarily faster than the version using <code>Arrays.asList(...).contains(...)</code>. Overhead of creating an <code>ArrayList</code> is extremely small, and <code>ArrayList.contains()</code> uses a smarter loop (actually it uses two different loops) than the one shown above (JDK 7)."},{"owner":{"reputation":278608,"user_id":1705598,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1","display_name":"icza","link":"https://stackoverflow.com/users/1705598/icza"},"reply_to_user":{"reputation":13134,"user_id":341291,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1","display_name":"Axel","link":"https://stackoverflow.com/users/341291/axel"},"edited":false,"score":0,"creation_date":1392130377,"post_id":12635769,"comment_id":32817775,"content_license":"CC BY-SA 3.0","body":"@Axel You&#39;re right. For small arrays, this is definitely faster. For large arrays, this would be slightly slower, but would become slightly faster again if would use 2 loops based on the searched value being null or not. I&#39;ve thought of these 2 loops before but left it out for simplicity."},{"owner":{"reputation":9843,"user_id":177293,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/ae4384c9130c9b1707a15584f6b75333?s=128&d=identicon&r=PG","display_name":"Skylar Saveland","link":"https://stackoverflow.com/users/177293/skylar-saveland"},"edited":false,"score":2,"creation_date":1404407440,"post_id":12635769,"comment_id":38038736,"content_license":"CC BY-SA 3.0","body":"See also: potato programming."},{"owner":{"reputation":2451,"user_id":14250,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/UNO2C.jpg?s=128&g=1","display_name":"deworde","link":"https://stackoverflow.com/users/14250/deworde"},"edited":false,"score":1,"creation_date":1427895748,"post_id":12635769,"comment_id":46961602,"content_license":"CC BY-SA 3.0","body":"-1: If you need performance, then the correct thing to do would be to encapsulate the array and cache the checks you need at assignment rather than iterating over it every time you need to do the check (and frankly, probably not to run inside a JVM). If you don&#39;t, this is wordier and less maintainable for no value."},{"owner":{"reputation":278608,"user_id":1705598,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1","display_name":"icza","link":"https://stackoverflow.com/users/1705598/icza"},"reply_to_user":{"reputation":2451,"user_id":14250,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/UNO2C.jpg?s=128&g=1","display_name":"deworde","link":"https://stackoverflow.com/users/14250/deworde"},"edited":false,"score":4,"creation_date":1427897809,"post_id":12635769,"comment_id":46963010,"content_license":"CC BY-SA 3.0","body":"@deworde I kinda disagree. If you need performance regarding the contains operation, don&#39;t use arrays at all (but rather <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html\" rel=\"nofollow noreferrer\">HashSet</a>). The question was about arrays, so I showed how it can be done with arrays. And the first solution is just a simple loop, it is not complicated at all. And also if an array is already given and you have little or no choice to choose the data structure, the improved version does have value."},{"owner":{"user_type":"does_not_exist","display_name":"user4229245"},"edited":false,"score":1,"creation_date":1430580278,"post_id":12635769,"comment_id":48126405,"content_license":"CC BY-SA 3.0","body":"The problem though is that conceptually you don&#39;t want to teach people to take one potentially large data structure (an array) and then convert it to another large structure (a collection) JUST so that you can have that 2nd structure peruse itself.  The most important reason being that 1. it&#39;s woefully unnecessary, and 2. the actual implementation of that collection search mechanism must be regarded as opaque because it can change in future revisions of Java.  It&#39;s a crummy idea on principle alone."},{"owner":{"reputation":2228,"user_id":321302,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/i0esA.jpg?s=128&g=1","display_name":"Steves","link":"https://stackoverflow.com/users/321302/steves"},"edited":false,"score":1,"creation_date":1466680508,"post_id":12635769,"comment_id":63423720,"content_license":"CC BY-SA 3.0","body":"<a href=\"https://en.wikipedia.org/wiki/Loop-invariant_code_motion\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Loop-invariant_code_motion</a> the &quot;improvement&quot;  is useless, any reasonable compiler (including C1 and C2 in HotSpot) will move the null check outside the loop because the parameter is final and cannot change."},{"owner":{"reputation":2228,"user_id":321302,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/i0esA.jpg?s=128&g=1","display_name":"Steves","link":"https://stackoverflow.com/users/321302/steves"},"edited":false,"score":0,"creation_date":1466680617,"post_id":12635769,"comment_id":63423799,"content_license":"CC BY-SA 3.0","body":"Moreover, you can use Objets.equals to avoid the check completely. The call will be inlined resulting in the same machine code and the same performance."},{"owner":{"reputation":217,"user_id":2568638,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/cf006a6562eb0b88b4a03cbb14f4e049?s=128&d=identicon&r=PG","display_name":"AustrianDude","link":"https://stackoverflow.com/users/2568638/austriandude"},"edited":false,"score":0,"creation_date":1499267357,"post_id":12635769,"comment_id":76835644,"content_license":"CC BY-SA 3.0","body":"If you don&#39;t want to throw a NPE when &quot;array&quot; is null, the respective part should be surrounded by a null check -&gt; if (array != null)."}],"owner":{"reputation":278608,"user_id":1705598,"user_type":"registered","accept_rate":92,"profile_image":"https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1","display_name":"icza","link":"https://stackoverflow.com/users/1705598/icza"},"comment_count":15,"is_accepted":false,"score":160,"last_activity_date":1546679693,"last_edit_date":1546679693,"creation_date":1348818346,"answer_id":12635769,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Just simply implement it by hand:</p>\n\n<pre><code>public static &lt;T&gt; boolean contains(final T[] array, final T v) {\n    for (final T e : array)\n        if (e == v || v != null &amp;&amp; v.equals(e))\n            return true;\n\n    return false;\n}\n</code></pre>\n\n<p><strong>Improvement:</strong></p>\n\n<p>The <code>v != null</code> condition is constant inside the method. It always evaluates to the same Boolean value during the method call. So if the input <code>array</code> is big, it is more efficient to evaluate this condition only once, and we can use a simplified/faster condition inside the <code>for</code> loop based on the result. The improved <code>contains()</code> method:</p>\n\n<pre><code>public static &lt;T&gt; boolean contains2(final T[] array, final T v) {\n    if (v == null) {\n        for (final T e : array)\n            if (e == null)\n                return true;\n    } \n    else {\n        for (final T e : array)\n            if (e == v || v.equals(e))\n                return true;\n    }\n\n    return false;\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":63444,"user_id":64174,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/1151371a864ddfe69499e8c8e5a401d7?s=128&d=identicon&r=PG","display_name":"Sean Owen","link":"https://stackoverflow.com/users/64174/sean-owen"},"edited":false,"score":4,"creation_date":1388397230,"post_id":16644694,"comment_id":31251809,"content_license":"CC BY-SA 3.0","body":"Why bother with <code>TreeSet</code>? <code>HashSet</code> is faster (O(1)) and does not require ordering."}],"owner":{"reputation":21239,"user_id":1528401,"user_type":"registered","profile_image":"https://i.stack.imgur.com/VsfsM.jpg?s=128&g=1","display_name":"Glen Best","link":"https://stackoverflow.com/users/1528401/glen-best"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1369035298,"last_edit_date":1495541910,"creation_date":1369035298,"answer_id":16644694,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<ol>\n<li><p>For arrays of limited length use the following (as given by <strong>camickr</strong>).  This is slow for repeated checks, especially for longer arrays (linear search).  </p>\n\n<pre><code> Arrays.asList(...).contains(...)\n</code></pre></li>\n<li><p>For fast performance if you repeatedly check against a larger set of elements</p>\n\n<ul>\n<li><p>An array is the wrong structure.  Use a <strong><code>TreeSet</code></strong> and add each element to it.  It sorts elements and has a fast <code>exist()</code> method (binary search).</p></li>\n<li><p><strong>If the elements implement <code>Comparable</code> &amp; you want the <code>TreeSet</code> sorted accordingly:</strong></p>\n\n<p><code>ElementClass.compareTo()</code> method must be compatable with <code>ElementClass.equals()</code>: see <a href=\"https://stackoverflow.com/questions/15795058/triads-not-showing-up-to-fight-java-set-missing-an-item/16453349#16453349\">Triads not showing up to fight? (Java Set missing an item)</a> </p>\n\n<pre><code>TreeSet myElements = new TreeSet();\n\n// Do this for each element (implementing *Comparable*)\nmyElements.add(nextElement);\n\n// *Alternatively*, if an array is forceably provided from other code:\nmyElements.addAll(Arrays.asList(myArray));\n</code></pre></li>\n<li><p><strong>Otherwise, use your own <code>Comparator</code>:</strong></p>\n\n<pre><code>class MyComparator implements Comparator&lt;ElementClass&gt; {\n     int compareTo(ElementClass element1; ElementClass element2) {\n          // Your comparison of elements\n          // Should be consistent with object equality\n     }\n\n     boolean equals(Object otherComparator) {\n          // Your equality of comparators\n     }\n}\n\n\n// construct TreeSet with the comparator\nTreeSet myElements = new TreeSet(new MyComparator());\n\n// Do this for each element (implementing *Comparable*)\nmyElements.add(nextElement);\n</code></pre></li>\n<li><p><strong>The payoff: check existence of some element:</strong></p>\n\n<pre><code>// Fast binary search through sorted elements (performance ~ log(size)):\nboolean containsElement = myElements.exists(someElement);\n</code></pre></li>\n</ul></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":59801,"user_id":190201,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/142c3537ba70a0cadb1b241f9eb69540?s=128&d=identicon&r=PG","display_name":"ataylor","link":"https://stackoverflow.com/users/190201/ataylor"},"edited":false,"score":4,"creation_date":1372363385,"post_id":16829850,"comment_id":25178672,"content_license":"CC BY-SA 3.0","body":"<code>Array.BinarySearch</code> and <code>Array.FindIndex</code> are .NET methods and don&#39;t exist in Java."},{"owner":{"reputation":2466,"user_id":51966,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/03996efe5445c299c9ca8e9fdfcf8d06?s=128&d=identicon&r=PG","display_name":"mente","link":"https://stackoverflow.com/users/51966/mente"},"reply_to_user":{"reputation":59801,"user_id":190201,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/142c3537ba70a0cadb1b241f9eb69540?s=128&d=identicon&r=PG","display_name":"ataylor","link":"https://stackoverflow.com/users/190201/ataylor"},"edited":false,"score":0,"creation_date":1377674825,"post_id":16829850,"comment_id":27167278,"content_license":"CC BY-SA 3.0","body":"@ataylor there&#39;s Arrays.binarySearch in java. But you&#39;re right, no Arrays.findIndex"},{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1576790243,"post_id":16829850,"comment_id":105021282,"content_license":"CC BY-SA 4.0","body":"It should be noted: <code>The array must be sorted prior to making this call. If it is not sorted, the results are undefined.</code>"}],"owner":{"reputation":185,"user_id":2184966,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/c54306f98bc81eac10a9157b7606a3ef?s=128&d=identicon&r=PG","display_name":"Avenger","link":"https://stackoverflow.com/users/2184966/avenger"},"comment_count":3,"is_accepted":false,"score":2,"last_activity_date":1551041693,"last_edit_date":1551041693,"creation_date":1369897157,"answer_id":16829850,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Use <code>Array.BinarySearch(array,obj)</code> for finding the given object in array or not.</p>\n\n<p>Example:</p>\n\n<pre><code>if (Array.BinarySearch(str, i) &gt; -1)` â true --exists\n</code></pre>\n\n<p>false --not exists</p>\n"},{"owner":{"reputation":2923,"user_id":3048442,"user_type":"registered","accept_rate":17,"profile_image":"https://i.stack.imgur.com/pwlbD.jpg?s=128&g=1","display_name":"Mr.G","link":"https://stackoverflow.com/users/3048442/mr-g"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1515382064,"last_edit_date":1515382064,"creation_date":1386389998,"answer_id":20437529,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>Try this:</p>\n\n<pre><code>ArrayList&lt;Integer&gt; arrlist = new ArrayList&lt;Integer&gt;(8);\n\n// use add() method to add elements in the list\narrlist.add(20);\narrlist.add(25);\narrlist.add(10);\narrlist.add(15);\n\nboolean retval = arrlist.contains(10);\nif (retval == true) {\n    System.out.println(\"10 is contained in the list\");\n}\nelse {\n    System.out.println(\"10 is not contained in the list\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":58083,"user_id":2057294,"user_type":"registered","accept_rate":63,"profile_image":"https://i.stack.imgur.com/7qZho.jpg?s=128&g=1","display_name":"skiwi","link":"https://stackoverflow.com/users/2057294/skiwi"},"edited":false,"score":3,"creation_date":1396901488,"post_id":22382449,"comment_id":34988475,"content_license":"CC BY-SA 3.0","body":"It&#39;s worth to also note the primitive specializations."},{"owner":{"reputation":33627,"user_id":627727,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/uOIWL.jpg?s=128&g=1","display_name":"mkobit","link":"https://stackoverflow.com/users/627727/mkobit"},"edited":false,"score":0,"creation_date":1418664078,"post_id":22382449,"comment_id":43410551,"content_license":"CC BY-SA 3.0","body":"To also add, <code>anyMatch</code> JavaDoc states that it <code>&quot;...May not evaluate the predicate on all elements if not necessary for determining the result.&quot;</code>, so it may not need to continue processing after finding a match."}],"owner":{"reputation":294197,"user_id":829571,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/zflGZ.png?s=128&g=1","display_name":"assylias","link":"https://stackoverflow.com/users/829571/assylias"},"comment_count":2,"is_accepted":false,"score":36,"last_activity_date":1394722956,"last_edit_date":1394722956,"creation_date":1394722426,"answer_id":22382449,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>With Java 8 you can create a stream and check if any entries in the stream matches <code>\"s\"</code>:</p>\n\n<pre><code>String[] values = {\"AB\",\"BC\",\"CD\",\"AE\"};\nboolean sInArray = Arrays.stream(values).anyMatch(\"s\"::equals);\n</code></pre>\n\n<p>Or as a generic method:</p>\n\n<pre><code>public static &lt;T&gt; boolean arrayContains(T[] array, T value) {\n    return Arrays.stream(array).anyMatch(value::equals);\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":6115,"user_id":894885,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/96b3d11d987edfac71b38328edf04b44?s=128&d=identicon&r=PG","display_name":"Samuel Edwin Ward","link":"https://stackoverflow.com/users/894885/samuel-edwin-ward"},"edited":false,"score":0,"creation_date":1450665948,"post_id":22921782,"comment_id":56517745,"content_license":"CC BY-SA 3.0","body":"This will throw a null pointer exception if the array contains a null reference before the target value."},{"owner":{"reputation":283,"user_id":4752024,"user_type":"registered","profile_image":"https://i.stack.imgur.com/xMLG5.gif?s=128&g=1","display_name":"TheArchon","link":"https://stackoverflow.com/users/4752024/thearchon"},"edited":false,"score":1,"creation_date":1462239425,"post_id":22921782,"comment_id":61542428,"content_license":"CC BY-SA 3.0","body":"the if statement should be : if (targetValue.equals(s)) because String equals has a instanceof checker."},{"owner":{"reputation":1175,"user_id":9278333,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4ab8d001c810261fc510a15c5e191f74?s=128&d=identicon&r=PG&f=1","display_name":"trilogy","link":"https://stackoverflow.com/users/9278333/trilogy"},"edited":false,"score":0,"creation_date":1564765946,"post_id":22921782,"comment_id":101151741,"content_license":"CC BY-SA 4.0","body":"use Objects.equals(obj1,obj2) instead to be null safe."}],"owner":{"reputation":2679,"user_id":127859,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/XQrlZ.jpg?s=128&g=1","display_name":"Ryan","link":"https://stackoverflow.com/users/127859/ryan"},"comment_count":3,"is_accepted":false,"score":6,"last_activity_date":1396900437,"creation_date":1396900437,"answer_id":22921782,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>Using a simple loop is the most efficient way of doing this. </p>\n\n<pre><code>boolean useLoop(String[] arr, String targetValue) {\n    for(String s: arr){\n        if(s.equals(targetValue))\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p>Courtesy to <a href=\"http://www.programcreek.com/2014/04/check-if-array-contains-a-value-java/\" rel=\"noreferrer\">Programcreek</a></p>\n"},{"comments":[{"owner":{"reputation":1464,"user_id":2255185,"user_type":"registered","accept_rate":47,"profile_image":"https://i.stack.imgur.com/6zKke.jpg?s=128&g=1","display_name":"Will Sherwood","link":"https://stackoverflow.com/users/2255185/will-sherwood"},"edited":false,"score":5,"creation_date":1427420019,"post_id":23526351,"comment_id":46780563,"content_license":"CC BY-SA 3.0","body":"your binary search example should return a &gt; 0;"},{"owner":{"reputation":1073,"user_id":1547018,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/09d5ba1ccb1d483f325be93f520cd755?s=128&d=identicon&r=PG","display_name":"mbelow","link":"https://stackoverflow.com/users/1547018/mbelow"},"edited":false,"score":6,"creation_date":1464189770,"post_id":23526351,"comment_id":62385410,"content_license":"CC BY-SA 3.0","body":"Why? I think it should return a &gt; -1, since 0 would indicate that it is contained at the head of the array."},{"owner":{"reputation":2846,"user_id":8868289,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/984bb123a4de58126dc1166e43927c5a?s=128&d=identicon&r=PG","display_name":"Yoory N.","link":"https://stackoverflow.com/users/8868289/yoory-n"},"edited":false,"score":2,"creation_date":1512047336,"post_id":23526351,"comment_id":82105250,"content_license":"CC BY-SA 3.0","body":"The first variant with <code>(a &gt;= 0)</code> was correct, just check <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#binarySearch-int:A-int-\" rel=\"nofollow noreferrer\">the docs</a>, they say &quot;Note that this guarantees that the return value will be &gt;= 0 if and only if the key is found&quot;."},{"owner":{"reputation":198,"user_id":2415632,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/p4aWF.png?s=128&g=1","display_name":"Willians Martins","link":"https://stackoverflow.com/users/2415632/willians-martins"},"edited":false,"score":0,"creation_date":1558472225,"post_id":23526351,"comment_id":99110931,"content_license":"CC BY-SA 4.0","body":"Why works to String and not to int? static boolean exists(int[] ints, int k) { \t\treturn Arrays.asList(ints).contains(k); \t}"}],"owner":{"reputation":10276,"user_id":2057902,"user_type":"registered","accept_rate":80,"profile_image":"https://i.stack.imgur.com/6q1nz.jpg?s=128&g=1","display_name":"Sireesh Yarlagadda","link":"https://stackoverflow.com/users/2057902/sireesh-yarlagadda"},"comment_count":4,"is_accepted":false,"score":79,"last_activity_date":1592379297,"last_edit_date":1592379297,"creation_date":1399490082,"answer_id":23526351,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p><a href=\"https://www.programcreek.com/2014/04/check-if-array-contains-a-value-java/\" rel=\"noreferrer\">Four Different Ways to Check If an Array Contains a Value</a></p>\n\n<ol>\n<li><p>Using <code>List</code>:</p>\n\n<pre><code>public static boolean useList(String[] arr, String targetValue) {\n    return Arrays.asList(arr).contains(targetValue);\n}\n</code></pre></li>\n<li><p>Using <code>Set</code>:</p>\n\n<pre><code>public static boolean useSet(String[] arr, String targetValue) {\n    Set&lt;String&gt; set = new HashSet&lt;String&gt;(Arrays.asList(arr));\n    return set.contains(targetValue);\n}\n</code></pre></li>\n<li><p>Using a simple loop:</p>\n\n<pre><code>public static boolean useLoop(String[] arr, String targetValue) {\n    for (String s: arr) {\n        if (s.equals(targetValue))\n            return true;\n    }\n    return false;\n}\n</code></pre></li>\n<li><p>Using <code>Arrays.binarySearch()</code>:</p>\n\n<p>The code below is wrong, it is listed here for completeness. <strong><code>binarySearch()</code> can ONLY be used on sorted arrays.</strong> You will find the result is weird below. This is the best option when array is sorted.</p>\n\n<pre><code>public static boolean binarySearch(String[] arr, String targetValue) {  \n    return Arrays.binarySearch(arr, targetValue) &gt;= 0;\n}\n</code></pre></li>\n</ol>\n\n<h3>Quick Example:</h3>\n\n<pre><code>String testValue=\"test\";\nString newValueNotInList=\"newValue\";\nString[] valueArray = { \"this\", \"is\", \"java\" , \"test\" };\nArrays.asList(valueArray).contains(testValue); // returns true\nArrays.asList(valueArray).contains(newValueNotInList); // returns false\n</code></pre>\n"},{"comments":[{"owner":{"reputation":50351,"user_id":1711796,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/6pRI7.png?s=128&g=1","display_name":"Bernhard Barker","link":"https://stackoverflow.com/users/1711796/bernhard-barker"},"edited":false,"score":1,"creation_date":1515069744,"post_id":24057535,"comment_id":83165719,"content_license":"CC BY-SA 3.0","body":"This doesn&#39;t work - it will enter the <code>else</code> for <b>every</b> item that doesn&#39;t match (so if you&#39;re looking for &quot;AB&quot; in that array, it will go there 3 times, since 3 of the values aren&#39;t &quot;AB&quot;)."}],"owner":{"reputation":72,"user_id":3676027,"user_type":"registered","profile_image":"https://graph.facebook.com/100002296147119/picture?type=large","display_name":"SubbaRao Boddu","link":"https://stackoverflow.com/users/3676027/subbarao-boddu"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1515381995,"last_edit_date":1515381995,"creation_date":1401963566,"answer_id":24057535,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>Check this</p>\n\n<pre><code>String[] VALUES = new String[] {\"AB\",\"BC\",\"CD\",\"AE\"};\nString s;\n\nfor(int i=0; i&lt; VALUES.length ; i++)\n{\n    if ( VALUES[i].equals(s) )\n    { \n        // do your stuff\n    } \n    else{    \n        //do your stuff\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":30325,"user_id":3496570,"user_type":"registered","accept_rate":39,"profile_image":"https://i.stack.imgur.com/fhSKV.jpg?s=128&g=1","display_name":"AndroidGeek","link":"https://stackoverflow.com/users/3496570/androidgeek"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1403681052,"creation_date":1403681052,"answer_id":24402575,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>Developers often do:</p>\n\n<pre><code>Set&lt;String&gt; set = new HashSet&lt;String&gt;(Arrays.asList(arr));\nreturn set.contains(targetValue);\n</code></pre>\n\n<p>The above code works, but there is no need to convert a list to set first. Converting a list to a set requires extra time. It can as simple as:</p>\n\n<pre><code>Arrays.asList(arr).contains(targetValue);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>   for(String s: arr){\n        if(s.equals(targetValue))\n            return true;\n    }\n\nreturn false;\n</code></pre>\n\n<p>The first one is more readable than the second one.</p>\n"},{"comments":[{"owner":{"reputation":2832,"user_id":444028,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/9dc65aeb146c0a632eefe07b54c83403?s=128&d=identicon&r=PG","display_name":"Abhishek Oza","link":"https://stackoverflow.com/users/444028/abhishek-oza"},"edited":false,"score":0,"creation_date":1546683764,"post_id":24911743,"comment_id":94936499,"content_license":"CC BY-SA 4.0","body":"I am very late to join this discussion, but since my approach in solving this problem, when I faced it a few years ago, was a bit different than the other answers already posted here, I am posting that solution I used at that time, over here, in case anyone finds it useful."}],"owner":{"reputation":2832,"user_id":444028,"user_type":"registered","accept_rate":90,"profile_image":"https://www.gravatar.com/avatar/9dc65aeb146c0a632eefe07b54c83403?s=128&d=identicon&r=PG","display_name":"Abhishek Oza","link":"https://stackoverflow.com/users/444028/abhishek-oza"},"comment_count":1,"is_accepted":false,"score":5,"last_activity_date":1546679984,"last_edit_date":1546679984,"creation_date":1406121935,"answer_id":24911743,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Use the following (the <code>contains()</code> method is <code>ArrayUtils.in()</code> in this code):</p>\n\n<p><em>ObjectUtils.java</em></p>\n\n<pre><code>public class ObjectUtils{\n\n    /**\n     * A null safe method to detect if two objects are equal.\n     * @param object1\n     * @param object2\n     * @return true if either both objects are null, or equal, else returns false.\n     */\n    public static boolean equals(Object object1, Object object2){\n        return object1==null ? object2==null : object1.equals(object2);\n    }\n\n}\n</code></pre>\n\n<p><em>ArrayUtils.java</em></p>\n\n<pre><code>public class ArrayUtils{\n\n    /**\n     * Find the index of of an object is in given array, starting from given inclusive index.\n     * @param ts  Array to be searched in.\n     * @param t  Object to be searched.\n     * @param start  The index from where the search must start.\n     * @return Index of the given object in the array if it is there, else -1.\n     */\n    public static &lt;T&gt; int indexOf(final T[] ts, final T t, int start){\n        for(int i = start; i &lt; ts.length; ++i)\n            if(ObjectUtils.equals(ts[i], t))\n                return i;\n        return -1;\n    }\n\n    /**\n     * Find the index of of an object is in given array, starting from 0;\n     * @param ts  Array to be searched in.\n     * @param t  Object to be searched.\n     * @return  indexOf(ts, t, 0)\n     */\n    public static &lt;T&gt; int indexOf(final T[] ts, final T t){\n        return indexOf(ts, t, 0);\n    }\n\n    /**\n     * Detect if the given object is in the given array.\n     * @param ts  Array to be searched in.\n     * @param t  Object to be searched.\n     * @return  If indexOf(ts, t) is greater than -1.\n     */\n    public static &lt;T&gt; boolean in(final T[] ts, final T t){\n        return indexOf(ts, t) &gt; -1 ;\n    }\n\n}\n</code></pre>\n\n<p>As you can see in the code above, that there are other utility methods <code>ObjectUtils.equals()</code> and <code>ArrayUtils.indexOf()</code>, that were used at other places as well.</p>\n"},{"owner":{"reputation":115,"user_id":4359708,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-Q9krKtv1iQI/AAAAAAAAAAI/AAAAAAAAAUw/cHDVdG2VZPE/photo.jpg?sz=128","display_name":"Christian Gim&#233;nez","link":"https://stackoverflow.com/users/4359708/christian-gim%c3%a9nez"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1515382145,"last_edit_date":1515382145,"creation_date":1418593764,"answer_id":27474534,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>One possible solution:</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\npublic class ArrayContainsElement {\n  public static final List&lt;String&gt; VALUES = Arrays.asList(\"AB\", \"BC\", \"CD\", \"AE\");\n\n  public static void main(String args[]) {\n\n      if (VALUES.contains(\"AB\")) {\n          System.out.println(\"Contains\");\n      } else {\n          System.out.println(\"Not contains\");\n      }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":543,"user_id":1967127,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LNqaX.png?s=128&g=1","display_name":"Johannes Stadler","link":"https://stackoverflow.com/users/1967127/johannes-stadler"},"edited":false,"score":7,"creation_date":1433925676,"post_id":29912069,"comment_id":49556718,"content_license":"CC BY-SA 3.0","body":"Are there any advantages with this approach?"},{"owner":{"reputation":1178,"user_id":3450840,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/okH8Y.jpg?s=128&g=1","display_name":"Florian F","link":"https://stackoverflow.com/users/3450840/florian-f"},"edited":false,"score":2,"creation_date":1540564614,"post_id":29912069,"comment_id":92925446,"content_license":"CC BY-SA 4.0","body":"It does not answer the question."}],"owner":{"reputation":492,"user_id":2501328,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66dd712d11de7f7bcdda4b50190540ab?s=128&d=identicon&r=PG","display_name":"Shineed Basheer","link":"https://stackoverflow.com/users/2501328/shineed-basheer"},"comment_count":2,"is_accepted":false,"score":7,"last_activity_date":1430203226,"creation_date":1430203226,"answer_id":29912069,"question_id":1128723,"content_license":"CC BY-SA 3.0","body":"<p>In <strong>Java 8</strong> use Streams.</p>\n\n<pre><code>List&lt;String&gt; myList =\nArrays.asList(\"a1\", \"a2\", \"b1\", \"c2\", \"c1\");\n\nmyList\n.stream()\n.filter(s -&gt; s.startsWith(\"c\"))\n.map(String::toUpperCase)\n.sorted()\n.forEach(System.out::println);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4327,"user_id":7098259,"user_type":"registered","profile_image":"https://i.stack.imgur.com/b6nWr.jpg?s=128&g=1","display_name":"Patrick Parker","link":"https://stackoverflow.com/users/7098259/patrick-parker"},"edited":false,"score":0,"creation_date":1536389064,"post_id":29958235,"comment_id":91414647,"content_license":"CC BY-SA 4.0","body":"<code>Arrays.asList</code> is not O(n). It&#39;s just a lightweight wrapper. Have a look at the implementation."}],"owner":{"reputation":283,"user_id":4752024,"user_type":"registered","profile_image":"https://i.stack.imgur.com/xMLG5.gif?s=128&g=1","display_name":"TheArchon","link":"https://stackoverflow.com/users/4752024/thearchon"},"comment_count":1,"is_accepted":false,"score":3,"last_activity_date":1537226980,"last_edit_date":1537226980,"creation_date":1430362627,"answer_id":29958235,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Arrays.asList() -> then calling the contains() method will always work, but a search algorithm is much better since you don't need to create a lightweight list wrapper around the array, which is what Arrays.asList() does.</p>\n\n<pre><code>public boolean findString(String[] strings, String desired){\n   for (String str : strings){\n       if (desired.equals(str)) {\n           return true;\n       }\n   }\n   return false; //if we get hereâ¦ there is no desired String, return false.\n}\n</code></pre>\n"},{"owner":{"reputation":381,"user_id":6836652,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JnbIG.jpg?s=128&g=1","display_name":"mandy1339","link":"https://stackoverflow.com/users/6836652/mandy1339"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1526585860,"creation_date":1526585860,"answer_id":50399340,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Create a boolean initially set to false. Run a loop to check every value in the array and compare to the value you are checking against. If you ever get a match, set boolean to true and stop the looping. Then assert that the boolean is true.</p>\n"},{"owner":{"reputation":78,"user_id":5405851,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-aKsBKim8Dy4/AAAAAAAAAAI/AAAAAAAAEe4/Z8QjvDReiq0/photo.jpg?sz=128","display_name":"Akhil babu K","link":"https://stackoverflow.com/users/5405851/akhil-babu-k"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1537550182,"creation_date":1537550182,"answer_id":52448398,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>If you don't want it to be case sensitive </p>\n\n<pre><code>Arrays.stream(VALUES).anyMatch(s::equalsIgnoreCase);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":491,"user_id":2738148,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/22ee18a28885cf8d73eaef501e0a2e95?s=128&d=identicon&r=PG&f=1","display_name":"Atuos","link":"https://stackoverflow.com/users/2738148/atuos"},"edited":false,"score":1,"creation_date":1566489884,"post_id":57346958,"comment_id":101681646,"content_license":"CC BY-SA 4.0","body":"The string conversion is absurdly inefficient and the solution is incorrect, e.g. contains(&quot;,&quot;) will return true."}],"owner":{"reputation":38,"user_id":11754064,"user_type":"registered","profile_image":"https://graph.facebook.com/2072322392877489/picture?type=large","display_name":"Syed Salman Hassan","link":"https://stackoverflow.com/users/11754064/syed-salman-hassan"},"comment_count":1,"is_accepted":false,"score":-2,"last_activity_date":1569277534,"last_edit_date":1569277534,"creation_date":1564925368,"answer_id":57346958,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>You can check it by two methods </p>\n\n<p>A)By converting the array into string and then check the required string by .contains method </p>\n\n<pre><code> String a=Arrays.toString(VALUES);\n    System.out.println(a.contains(\"AB\"));\n    System.out.println(a.contains(\"BC\"));\n    System.out.println(a.contains(\"CD\"));\n    System.out.println(a.contains(\"AE\"));\n</code></pre>\n\n<p>B)this is a more efficent method</p>\n\n<pre><code> Scanner s=new Scanner(System.in);\n\n\n   String u=s.next();\n   boolean d=true;\n    for(int i=0;i&lt;VAL.length;i++)\n    {\n        if(VAL[i].equals(u)==d)\n            System.out.println(VAL[i] +\" \"+u+VAL[i].equals(u));  \n\n    }\n</code></pre>\n"},{"owner":{"reputation":485,"user_id":1076703,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d4ada444fee0f9d9bfdd851f09e8b1d0?s=128&d=identicon&r=PG","display_name":"Vipul Gulhane","link":"https://stackoverflow.com/users/1076703/vipul-gulhane"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1570949678,"last_edit_date":1570949678,"creation_date":1570029875,"answer_id":58204591,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>Try using Java 8 predicate test method</p>\n\n<p>Here is a full example of it.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.function.Predicate;\npublic class Test {\n public static final List&lt;String&gt; VALUES = Arrays.asList(\"AA\", \"AB\", \"BC\", \"CD\", \"AE\");\n\n public static void main(String args[]) {\n  Predicate&lt;String&gt; containsLetterA = VALUES -&gt; VALUES.contains(\"AB\");\n  for (String i : VALUES) {\n\n   System.out.println(containsLetterA.test(i));\n  } \n }\n}\n</code></pre>\n\n<p><a href=\"http://mytechnologythought.blogspot.com/2019/10/java-8-predicate-test-method-example.html\" rel=\"nofollow noreferrer\">http://mytechnologythought.blogspot.com/2019/10/java-8-predicate-test-method-example.html</a></p>\n\n<p><a href=\"https://github.com/VipulGulhane1/java8/blob/master/Test.java\" rel=\"nofollow noreferrer\">https://github.com/VipulGulhane1/java8/blob/master/Test.java</a></p>\n"},{"owner":{"reputation":2117,"user_id":2856202,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/AHuOz.png?s=128&g=1","display_name":"eigenfield","link":"https://stackoverflow.com/users/2856202/eigenfield"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1582705154,"creation_date":1582705154,"answer_id":60409522,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p>As I'm dealing with low level Java using primitive types byte and byte[], the best so far I got is from <strong>bytes-java</strong> <a href=\"https://github.com/patrickfav/bytes-java\" rel=\"nofollow noreferrer\">https://github.com/patrickfav/bytes-java</a> seems a fine piece of work</p>\n"},{"owner":{"reputation":629,"user_id":11199879,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a0a9c56c2190957960c9463c03486df8?s=128&d=identicon&r=PG&f=1","display_name":"Kaplan","link":"https://stackoverflow.com/users/11199879/kaplan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1615013110,"creation_date":1615013110,"answer_id":66503137,"question_id":1128723,"content_license":"CC BY-SA 4.0","body":"<p><em>the shortest solution if my array contains duplicates</em><br />\nsince Java 9</p>\n<pre><code>List.of(VALUES).contains(s);\n</code></pre>\n"}],"owner":{"reputation":30052,"user_id":16534,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/JnmCP.jpg?s=128&g=1","display_name":"Mike Sickler","link":"https://stackoverflow.com/users/16534/mike-sickler"},"comment_count":7,"is_answered":true,"view_count":2123568,"protected_date":1433930944,"accepted_answer_id":1128728,"answer_count":29,"score":2390,"last_activity_date":1615013110,"creation_date":1247616201,"last_edit_date":1546679166,"question_id":1128723,"link":"https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java","title":"How do I determine whether an array contains a particular value in Java?","body":"<p>I have a <code>String[]</code> with values like so:</p>\n\n<pre><code>public static final String[] VALUES = new String[] {\"AB\",\"BC\",\"CD\",\"AE\"};\n</code></pre>\n\n<p>Given <code>String s</code>, is there a good way of testing whether <code>VALUES</code> contains <code>s</code>?</p>\n"},{"tags":["java","constructor"],"comments":[{"owner":{"reputation":3970,"user_id":219658,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/3cf4a05b544cce274d053d70fd6dc00d?s=128&d=identicon&r=PG","display_name":"David Medinets","link":"https://stackoverflow.com/users/219658/david-medinets"},"edited":false,"score":2,"creation_date":1530906557,"post_id":285177,"comment_id":89414794,"content_license":"CC BY-SA 4.0","body":"I believe the premise of your question is wrong. Instead of calling a constructor within a constructor, use the Factory pattern. A static factory method first creates all lower-level objects. Then it constructs the higher-level objects which gets returns from the factory call. This technique removes complexity from the model which aids maintenance, clarity, and testing."},{"owner":{"reputation":1346,"user_id":3599399,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8ad3f8bf1140ae9fbf1113e8bd46aecc?s=128&d=identicon&r=PG&f=1","display_name":"Richard","link":"https://stackoverflow.com/users/3599399/richard"},"edited":false,"score":1,"creation_date":1548073665,"post_id":285177,"comment_id":95400544,"content_license":"CC BY-SA 4.0","body":"I generally switched to private constructors and factory methods, since constructors, because of their limitations, are violating the open-closed principle. I think this comment should be the correct answer, everything else will confuse the hell out of your team mates."},{"owner":{"reputation":93,"user_id":6603613,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-S-6IGaodr4w/AAAAAAAAAAI/AAAAAAAAAEg/Jl1HYK6Evqo/photo.jpg?sz=128","display_name":"Augusto","link":"https://stackoverflow.com/users/6603613/augusto"},"edited":false,"score":0,"creation_date":1563995776,"post_id":285177,"comment_id":100889511,"content_license":"CC BY-SA 4.0","body":"Sroy but that&#39;s not a good practice if you want to do something like that, overcharge the constructor. If you want to wrap a content, that could be done, but for another pourpuse. Not the constructor  public class Foo {     private int x;      public Foo() {     }      public Foo(int x) {         this.x = x;     }     public Foo(int x, int y) {         this.x = x;        this.y = y     }"}],"answers":[{"comments":[{"owner":{"reputation":10952,"user_id":803801,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/bf4b894dd2fe6b48c4e0265ce6956a31?s=128&d=identicon&r=PG","display_name":"gsingh2011","link":"https://stackoverflow.com/users/803801/gsingh2011"},"edited":false,"score":35,"creation_date":1351879351,"post_id":285184,"comment_id":17971816,"content_license":"CC BY-SA 3.0","body":"So I supposed it&#39;s not possible to call a super constructor and another constructor of the same class as both need to be the first line?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":10952,"user_id":803801,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/bf4b894dd2fe6b48c4e0265ce6956a31?s=128&d=identicon&r=PG","display_name":"gsingh2011","link":"https://stackoverflow.com/users/803801/gsingh2011"},"edited":false,"score":33,"creation_date":1351879567,"post_id":285184,"comment_id":17971903,"content_license":"CC BY-SA 3.0","body":"@gsingh2011: Indeed. You can only chain to <i>one</i> other constructor."},{"owner":{"reputation":13809,"user_id":231397,"user_type":"registered","accept_rate":24,"profile_image":"https://www.gravatar.com/avatar/69f8f115389438fc8f636ae73e7991ff?s=128&d=identicon&r=PG","display_name":"Christian Fries","link":"https://stackoverflow.com/users/231397/christian-fries"},"edited":false,"score":46,"creation_date":1363034067,"post_id":285184,"comment_id":21680029,"content_license":"CC BY-SA 3.0","body":"This has to appear on the first line, but you can do calculations in the constructor before it is called: You can use static methods in the arguments of this() on the first line and encapsulate any calculation which has to be performed before the call to the other constructor in that static method. (I have added this as a separate answer)."},{"owner":{"reputation":1369,"user_id":1482508,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/fd0c6421c87eef2c454212d846833f11?s=128&d=identicon&r=PG","display_name":"Ali","link":"https://stackoverflow.com/users/1482508/ali"},"reply_to_user":{"reputation":10952,"user_id":803801,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/bf4b894dd2fe6b48c4e0265ce6956a31?s=128&d=identicon&r=PG","display_name":"gsingh2011","link":"https://stackoverflow.com/users/803801/gsingh2011"},"edited":false,"score":10,"creation_date":1368429785,"post_id":285184,"comment_id":23713757,"content_license":"CC BY-SA 3.0","body":"@gsingh2011 I know it&#39;s late but as a way around, you can call overloaded constructor using this(...) and then in that overloaded constructor, you can make a call to base class&#39; constructor using super(...)"},{"owner":{"reputation":10507,"user_id":1215724,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/akx0v.jpg?s=128&g=1","display_name":"Trikaldarshiii","link":"https://stackoverflow.com/users/1215724/trikaldarshiii"},"edited":false,"score":0,"creation_date":1374010725,"post_id":285184,"comment_id":25769952,"content_license":"CC BY-SA 3.0","body":"@JonSkeet  Yes! we can chain to one other constructor but actually  we can have a very long chain"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":10507,"user_id":1215724,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/akx0v.jpg?s=128&g=1","display_name":"Trikaldarshiii","link":"https://stackoverflow.com/users/1215724/trikaldarshiii"},"edited":false,"score":0,"creation_date":1374011215,"post_id":285184,"comment_id":25770150,"content_license":"CC BY-SA 3.0","body":"@Mohit: And why is that a problem? It&#39;s really not clear what the context of your comment is..."},{"owner":{"reputation":10507,"user_id":1215724,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/akx0v.jpg?s=128&g=1","display_name":"Trikaldarshiii","link":"https://stackoverflow.com/users/1215724/trikaldarshiii"},"edited":false,"score":0,"creation_date":1374012821,"post_id":285184,"comment_id":25770780,"content_license":"CC BY-SA 3.0","body":"no not a problem i just added up to your comment that said &quot;only one other constructor&quot; so for many others create a long chain"},{"owner":{"reputation":629,"user_id":4837155,"user_type":"registered","accept_rate":46,"profile_image":"https://www.gravatar.com/avatar/4b9b8192c04ec0d2e2e40d37dfaf4583?s=128&d=identicon&r=PG&f=1","display_name":"Harshit Gupta","link":"https://stackoverflow.com/users/4837155/harshit-gupta"},"edited":false,"score":0,"creation_date":1435403923,"post_id":285184,"comment_id":50193202,"content_license":"CC BY-SA 3.0","body":"It is mandatory that if you are using this() or super() they must be the first statement of the constructor and both can not be used in a constructor."},{"owner":{"reputation":84,"user_id":3319870,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zIMzH.jpg?s=128&g=1","display_name":"Francis","link":"https://stackoverflow.com/users/3319870/francis"},"reply_to_user":{"reputation":10952,"user_id":803801,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/bf4b894dd2fe6b48c4e0265ce6956a31?s=128&d=identicon&r=PG","display_name":"gsingh2011","link":"https://stackoverflow.com/users/803801/gsingh2011"},"edited":false,"score":0,"creation_date":1435507300,"post_id":285184,"comment_id":50218732,"content_license":"CC BY-SA 3.0","body":"@gsingh2011 yes, for some reason only a single constructor of a class is allowed."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":84,"user_id":3319870,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zIMzH.jpg?s=128&g=1","display_name":"Francis","link":"https://stackoverflow.com/users/3319870/francis"},"edited":false,"score":0,"creation_date":1435509125,"post_id":285184,"comment_id":50219269,"content_license":"CC BY-SA 3.0","body":"@Francis: I assume you mean &quot;you can only chain to one other constructor&quot; - currently your statement makes it sound like you can only <i>have</i> one constructor per class, which is clearly not true."},{"owner":{"reputation":84,"user_id":3319870,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zIMzH.jpg?s=128&g=1","display_name":"Francis","link":"https://stackoverflow.com/users/3319870/francis"},"edited":false,"score":0,"creation_date":1435576000,"post_id":285184,"comment_id":50241514,"content_license":"CC BY-SA 3.0","body":"@JonSkeet yup I meant chaining to one other constructor only. thanks for the correction and I apologize for my misleading statement."},{"owner":{"reputation":3731,"user_id":5386374,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fGuXb.png?s=128&g=1","display_name":"Justin Time - Reinstate Monica","link":"https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"},"reply_to_user":{"reputation":84,"user_id":3319870,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zIMzH.jpg?s=128&g=1","display_name":"Francis","link":"https://stackoverflow.com/users/3319870/francis"},"edited":false,"score":0,"creation_date":1455043846,"post_id":285184,"comment_id":58309872,"content_license":"CC BY-SA 3.0","body":"@Francis I&#39;m not sure, but I believe the reason is that if the first line of the constructor delegates to another constructor or calls a superclass constructor, it actually runs <i>before</i> the object is constructed.  C++ has the same limit, you can only have one call to a parent class constructor or (as of C++11) one delegation per constructor, and no more, with both executing before the object is constructed."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":3731,"user_id":5386374,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fGuXb.png?s=128&g=1","display_name":"Justin Time - Reinstate Monica","link":"https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"},"edited":false,"score":0,"creation_date":1455043959,"post_id":285184,"comment_id":58309945,"content_license":"CC BY-SA 3.0","body":"@JustinTime: You&#39;d have to define what you mean by &quot;before the object is constructed&quot; for me to be able to judge the truth of that..."},{"owner":{"reputation":3731,"user_id":5386374,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fGuXb.png?s=128&g=1","display_name":"Justin Time - Reinstate Monica","link":"https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"},"edited":false,"score":0,"creation_date":1455044361,"post_id":285184,"comment_id":58310197,"content_license":"CC BY-SA 3.0","body":"@JonSkeet I mean that going from what I know of Java, delegation or superclass constructor calls are executed before the object&#39;s fields are initialised and it&#39;s put into a state where it&#39;s considered to be &quot;constructed&quot;.  Specifically, I believe the process is: 1) Run parent class/superclass constructor to initialise inherited portion of the class, 2) Initialise instance-specific member variables so the object is valid, so member access in the constructor&#39;s body won&#39;t break anything, 3) Execute body of constructor to finish construction.  It&#39;s considered constructed by the end of step 3."},{"owner":{"reputation":3731,"user_id":5386374,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fGuXb.png?s=128&g=1","display_name":"Justin Time - Reinstate Monica","link":"https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"},"edited":false,"score":0,"creation_date":1455044515,"post_id":285184,"comment_id":58310276,"content_license":"CC BY-SA 3.0","body":"In that regard, I believe it works in the same manner as C++ (construct inherited portion, initialise object from initialisation list, run body of constructor), but with cleaner, but less specific, syntax (the initialisation list is moved to the top of the constructor&#39;s body, instead of being after the signature but before the body), with delegation passing the job of actually <i>creating</i> the object to the other constructor, and then running any code in the delegating constructor on a valid object after the constructor it delegates to returns.  Correct me if I&#39;m wrong."},{"owner":{"reputation":3731,"user_id":5386374,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fGuXb.png?s=128&g=1","display_name":"Justin Time - Reinstate Monica","link":"https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"},"edited":false,"score":0,"creation_date":1455045304,"post_id":285184,"comment_id":58310743,"content_license":"CC BY-SA 3.0","body":"By creating the object, I mean allocating memory, setting the type, and initialising fields, so that the object is in a valid, usable state (the implicit first step of every constructor), with delegation passing the job of making the object valid &amp; usable onto the constructor that&#39;s delegated to.  Didn&#39;t know that objects don&#39;t start as their actual type in C++, but it makes sense considering how C++ implicitly chains parent class constructor(s) to construct the inherited portion of a derived class before actually executing the derived class&#39; constructor; I guess I&#39;ll have to be wary of that."},{"owner":{"reputation":374,"user_id":2972374,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/9e7c0b7d91d5d50ba5733e5bd0bba6f9?s=128&d=identicon&r=PG&f=1","display_name":"Andrej","link":"https://stackoverflow.com/users/2972374/andrej"},"edited":false,"score":1,"creation_date":1569524844,"post_id":285184,"comment_id":102635075,"content_license":"CC BY-SA 4.0","body":"I know I am coming late to the comment section, but I don&#39;t understand why <code>new Foo(1);</code> wouldn&#39;t work ?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":374,"user_id":2972374,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/9e7c0b7d91d5d50ba5733e5bd0bba6f9?s=128&d=identicon&r=PG&f=1","display_name":"Andrej","link":"https://stackoverflow.com/users/2972374/andrej"},"edited":false,"score":2,"creation_date":1569535805,"post_id":285184,"comment_id":102638997,"content_license":"CC BY-SA 4.0","body":"@Andrej: That would indeed be &quot;calling one constructor from another&quot; but it wouldn&#39;t be doing what the OP wants, which is to initialize a single object via multiple constructors, one chaining to another. Creating two objects by just creating a separate object within one constructor call isn&#39;t the same thing at all."},{"owner":{"reputation":133,"user_id":2563309,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zfwuy.jpg?s=128&g=1","display_name":"mrhotroad","link":"https://stackoverflow.com/users/2563309/mrhotroad"},"edited":false,"score":0,"creation_date":1590071001,"post_id":285184,"comment_id":109545792,"content_license":"CC BY-SA 4.0","body":"Ð§ÑÐ¾ Ð·Ð° ÑÐ±Ð»ÑÐ´Ð¾Ðº ÑÑÐ¾ Ð¿ÑÐ¸Ð´ÑÐ¼Ð°Ð»? Ð¢ÑÑÑÑÐ¸ Ð»ÑÐ´ÐµÐ¹ Ð·Ð°Ð´Ð°ÑÑÑÑ Ð²Ð¾Ð¿ÑÐ¾ÑÐ¾Ð¼."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":133,"user_id":2563309,"user_type":"registered","profile_image":"https://i.stack.imgur.com/zfwuy.jpg?s=128&g=1","display_name":"mrhotroad","link":"https://stackoverflow.com/users/2563309/mrhotroad"},"edited":false,"score":0,"creation_date":1590071284,"post_id":285184,"comment_id":109545978,"content_license":"CC BY-SA 4.0","body":"@mrhotroad: Please write in English on this site."}],"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"comment_count":20,"is_accepted":true,"score":3117,"last_activity_date":1465426940,"last_edit_date":1495542893,"creation_date":1226520734,"answer_id":285184,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>Yes, it is possible:</p>\n\n<pre><code>public class Foo {\n    private int x;\n\n    public Foo() {\n        this(1);\n    }\n\n    public Foo(int x) {\n        this.x = x;\n    }\n}\n</code></pre>\n\n<p>To chain to a particular superclass constructor instead of one in the same class, use <code>super</code> instead of <code>this</code>. Note that <strong>you can only chain to one constructor</strong>, and <strong>it has to be the first statement in your constructor body</strong>.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/284896\">this related question</a>, which is about C# but where the same principles apply.</p>\n"},{"comments":[{"owner":{"reputation":14364,"user_id":873282,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/1e6ae94f84a34641ccc5abc86a664694?s=128&d=identicon&r=PG","display_name":"koppor","link":"https://stackoverflow.com/users/873282/koppor"},"edited":false,"score":28,"creation_date":1352837760,"post_id":285187,"comment_id":18251603,"content_license":"CC BY-SA 3.0","body":"If many constructor parameters are used, consider a builder. See Item 2 of &quot;Effective Java&quot; by Joshua Bloch."},{"owner":{"reputation":7656,"user_id":744133,"user_type":"registered","accept_rate":57,"profile_image":"https://i.stack.imgur.com/z21Fe.jpg?s=128&g=1","display_name":"YoYo","link":"https://stackoverflow.com/users/744133/yoyo"},"edited":false,"score":5,"creation_date":1454136385,"post_id":285187,"comment_id":57919026,"content_license":"CC BY-SA 3.0","body":"The problem with the implementation of the last approach using the factory method, <code>newCons</code>, is that you are trying to change state of an object, using <code>setArg1(...)</code>, that should most likely have its fields set as final. As we are trying to keep as much as possible of an object immutable, if not completely, a builder pattern will address this issue more correctly."},{"owner":{"reputation":113,"user_id":8346787,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5e103a0d97acd232feb3785941d21fcf?s=128&d=identicon&r=PG&f=1","display_name":"LordHieros","link":"https://stackoverflow.com/users/8346787/lordhieros"},"edited":false,"score":2,"creation_date":1523885483,"post_id":285187,"comment_id":86731838,"content_license":"CC BY-SA 3.0","body":"Wouldn&#39;t you rather do :: public Cons() {   this(madeUpArg1Value,madeUpArg2Value);  }"},{"owner":{"reputation":80350,"user_id":1281433,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/O8XCE.png?s=128&g=1","display_name":"Joshua Taylor","link":"https://stackoverflow.com/users/1281433/joshua-taylor"},"reply_to_user":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":3,"creation_date":1526562775,"post_id":285187,"comment_id":87800400,"content_license":"CC BY-SA 4.0","body":"@RodneyP.Barbati It&#39;s pretty common in Java for lower-arity constructors to call greater-arity constructors <i>and then do nothing else</i>.  if a class K has, e.g., two final fields a, b, then the &quot;general constructor&quot; would be <code>K(A a, B b) { this.a = a; this.b = b; }</code>.  Then, if <code>b</code> has a reasonable default, there can be a one-arg constructor <code>K(A a) { this(a, DEFAULT_B); }</code>, and if there&#39;s a default <code>a</code> as well, we have a default constructor: <code>K() { this(DEFAULT_A); }</code>.  That&#39;s a pretty common convention in Java."},{"owner":{"reputation":80350,"user_id":1281433,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/O8XCE.png?s=128&g=1","display_name":"Joshua Taylor","link":"https://stackoverflow.com/users/1281433/joshua-taylor"},"reply_to_user":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":0,"creation_date":1526562888,"post_id":285187,"comment_id":87800478,"content_license":"CC BY-SA 4.0","body":"@RodneyP.Barbati If you have a final field (so that it must be set), then the default constructor would have to set it.  If your higher-arity constructors call the default constructor (which would have to be done before anything else), then the higher-arity constructors never have any options to set any of those fields."},{"owner":{"reputation":14849,"user_id":355456,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/7da0a69f5ee1cf4fc8512f5ff14f4111?s=128&d=identicon&r=PG&f=1","display_name":"Hong","link":"https://stackoverflow.com/users/355456/hong"},"edited":false,"score":0,"creation_date":1543953822,"post_id":285187,"comment_id":94101599,"content_license":"CC BY-SA 4.0","body":"This one works with Android Studio while the accepted answer does not.  Not sure why."}],"owner":{"reputation":15648,"user_id":2204759,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/DqQca.jpg?s=128&g=1","display_name":"Josh","link":"https://stackoverflow.com/users/2204759/josh"},"comment_count":6,"is_accepted":false,"community_owned_date":1226523946,"score":266,"last_activity_date":1566812148,"last_edit_date":1566812148,"creation_date":1226520802,"answer_id":285187,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Using <code>this(args)</code>. The preferred pattern is to work from the smallest constructor to the largest.</p>\n\n<pre><code>public class Cons {\n\n    public Cons() {\n        // A no arguments constructor that sends default values to the largest\n        this(madeUpArg1Value,madeUpArg2Value,madeUpArg3Value);\n    }\n\n    public Cons(int arg1, int arg2) {\n       // An example of a partial constructor that uses the passed in arguments\n        // and sends a hidden default value to the largest\n        this(arg1,arg2, madeUpArg3Value);\n    }\n\n    // Largest constructor that does the work\n    public Cons(int arg1, int arg2, int arg3) {\n        this.arg1 = arg1;\n        this.arg2 = arg2;\n        this.arg3 = arg3;\n    }\n}\n</code></pre>\n\n<p>You can also use a more recently advocated approach of valueOf or just \"of\":</p>\n\n<pre><code>public class Cons {\n    public static Cons newCons(int arg1,...) {\n        // This function is commonly called valueOf, like Integer.valueOf(..)\n        // More recently called \"of\", like EnumSet.of(..)\n        Cons c = new Cons(...);\n        c.setArg1(....);\n        return c;\n    }\n} \n</code></pre>\n\n<p>To call a super class, use <code>super(someValue)</code>. The call to super must be the first call in the constructor or you will get a compiler error.</p>\n"},{"comments":[{"owner":{"reputation":13029,"user_id":2051454,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1","display_name":"Software Engineer","link":"https://stackoverflow.com/users/2051454/software-engineer"},"edited":false,"score":16,"creation_date":1465426808,"post_id":15348070,"comment_id":62902142,"content_license":"CC BY-SA 3.0","body":"It&#39;s true that you can call static methods in this way in order to perform complex calculations for argument values, which is fine. However, if one feels that code is needed before constructor delegation (<code>this(...)</code>) then it would be reasonable to assume that an horrible mistake has been made somewhere and that the design perhaps needs a bit of a rethink."},{"owner":{"reputation":13809,"user_id":231397,"user_type":"registered","accept_rate":24,"profile_image":"https://www.gravatar.com/avatar/69f8f115389438fc8f636ae73e7991ff?s=128&d=identicon&r=PG","display_name":"Christian Fries","link":"https://stackoverflow.com/users/231397/christian-fries"},"edited":false,"score":16,"creation_date":1466098603,"post_id":15348070,"comment_id":63188692,"content_license":"CC BY-SA 3.0","body":"I would agree that a <i>very</i> complex transformation likely indicates a design issue. But 1) there are some simple transformations which for which this may be useful - not all constructors are just linear projection on others and 2) there may be other situation where this information could become hand, like supporting legacy code. (While I agree on your conclusion, I do not see why it would justify a down vote)."},{"owner":{"reputation":13809,"user_id":231397,"user_type":"registered","accept_rate":24,"profile_image":"https://www.gravatar.com/avatar/69f8f115389438fc8f636ae73e7991ff?s=128&d=identicon&r=PG","display_name":"Christian Fries","link":"https://stackoverflow.com/users/231397/christian-fries"},"reply_to_user":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":2,"creation_date":1528869993,"post_id":15348070,"comment_id":88664350,"content_license":"CC BY-SA 4.0","body":"@RodneyP.Barbati: I see a few issues in doing it the way you describe it: a) Doing it that way it is not possible to illustrate the use of static method in a constructor (and that is the intention of the example) ;-) and b) if you do it your way, the fields cannot be <code>final</code> (final fields can be initialized only once)."},{"owner":{"reputation":13809,"user_id":231397,"user_type":"registered","accept_rate":24,"profile_image":"https://www.gravatar.com/avatar/69f8f115389438fc8f636ae73e7991ff?s=128&d=identicon&r=PG","display_name":"Christian Fries","link":"https://stackoverflow.com/users/231397/christian-fries"},"reply_to_user":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":1,"creation_date":1528877608,"post_id":15348070,"comment_id":88668547,"content_license":"CC BY-SA 4.0","body":"@RodneyP.Barbati: Two other aspects: c) I believe that you should always do the object initialisation at a single point, which has to be the most general constructor. If object initialisation requires a complex task (object init not being lazy) or checking or acquiring some resources (like a file), then you like to do that only once. And d) Adding another argument (say argument4) for which the initialisation depends on the value of argument1 to argument3 you would have to change all constructors in your case, whereas here you only have to add one and let the 3-arg call the 4-arg constructor."},{"owner":{"reputation":3126,"user_id":9772691,"user_type":"registered","profile_image":"https://i.stack.imgur.com/NRRPE.jpg?s=128&g=1","display_name":"John McClane","link":"https://stackoverflow.com/users/9772691/john-mcclane"},"edited":false,"score":0,"creation_date":1532828050,"post_id":15348070,"comment_id":90118588,"content_license":"CC BY-SA 4.0","body":"For more general method of overcoming the &quot;must be first statement in constructor&quot; limitation, see <a href=\"https://stackoverflow.com/a/51571736/9772691\">this answer</a>. It applies to both <code>super()</code> and <code>this()</code> calls."}],"owner":{"reputation":13809,"user_id":231397,"user_type":"registered","accept_rate":24,"profile_image":"https://www.gravatar.com/avatar/69f8f115389438fc8f636ae73e7991ff?s=128&d=identicon&r=PG","display_name":"Christian Fries","link":"https://stackoverflow.com/users/231397/christian-fries"},"comment_count":5,"is_accepted":false,"score":224,"last_activity_date":1455072785,"last_edit_date":1455072785,"creation_date":1363033992,"answer_id":15348070,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>[<em>Note: I just want to add one aspect, which I did not see in the other answers: how to overcome limitations of the requirement that this() has to be on the first line).</em>]</p>\n\n<p>In Java another constructor of the same class can be called from a constructor via <code>this()</code>. Note however that <code>this</code> has to be on the first line.</p>\n\n<pre><code>public class MyClass {\n\n  public MyClass(double argument1, double argument2) {\n    this(argument1, argument2, 0.0);\n  }\n\n  public MyClass(double argument1, double argument2, double argument3) {\n    this.argument1 = argument1;\n    this.argument2 = argument2;\n    this.argument3 = argument3;\n  }\n}\n</code></pre>\n\n<p>That <code>this</code> has to appear on the first line looks like a big limitation, but you can construct the arguments of other constructors via static methods. For example:</p>\n\n<pre><code>public class MyClass {\n\n  public MyClass(double argument1, double argument2) {\n    this(argument1, argument2, getDefaultArg3(argument1, argument2));\n  }\n\n  public MyClass(double argument1, double argument2, double argument3) {\n    this.argument1 = argument1;\n    this.argument2 = argument2;\n    this.argument3 = argument3;\n  }\n\n  private static double getDefaultArg3(double argument1, double argument2) {\n    double argument3 = 0;\n\n    // Calculate argument3 here if you like.\n\n    return argument3;\n\n  }\n\n}\n</code></pre>\n"},{"owner":{"reputation":1782,"user_id":2295938,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f0c4d019a26e305fe1e305f5f8bf5253?s=128&d=identicon&r=PG&f=1","display_name":"Kaamel","link":"https://stackoverflow.com/users/2295938/kaamel"},"comment_count":0,"is_accepted":false,"score":41,"last_activity_date":1366758744,"creation_date":1366758744,"answer_id":16180692,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>When I need to call another constructor from inside the code (not on the first line), I usually use a helper method like this:</p>\n\n<pre><code>class MyClass {\n   int field;\n\n\n   MyClass() {\n      init(0);\n   } \n   MyClass(int value) {\n      if (value&lt;0) {\n          init(0);\n      } \n      else { \n          init(value);\n      }\n   }\n   void init(int x) {\n      field = x;\n   }\n}\n</code></pre>\n\n<p>But most often I try to do it the other way around by calling the more complex constructors from the simpler ones on the first line, to the extent possible. For the above example</p>\n\n<pre><code>class MyClass {\n   int field;\n\n   MyClass(int value) {\n      if (value&lt;0)\n         field = 0;\n      else\n         field = value;\n   }\n   MyClass() {\n      this(0);\n   }\n}\n</code></pre>\n"},{"owner":{"reputation":1894,"user_id":147808,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/6b5c1e7d6b890de9288c7aac3d884329?s=128&d=identicon&r=PG","display_name":"olovb","link":"https://stackoverflow.com/users/147808/olovb"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1431039123,"creation_date":1431039123,"answer_id":30112975,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>As everybody already have said, you use <code>this(â¦)</code>, which is called an <em>explicit constructor invocation</em>.</p>\n\n<p><strong>However, keep in mind that</strong> within such an explicit constructor invocation statement <strong>you may not refer to</strong></p>\n\n<ul>\n<li>any <em>instance variables</em> or </li>\n<li>any <em>instance methods</em> or </li>\n<li>any <em>inner classes</em> declared in this class or any superclass, or </li>\n<li><code>this</code> or </li>\n<li><code>super</code>.</li>\n</ul>\n\n<p>As stated in JLS (Â§8.8.7.1).</p>\n"},{"comments":[{"owner":{"reputation":1334,"user_id":2156785,"user_type":"registered","profile_image":"https://i.stack.imgur.com/oQr9B.jpg?s=128&g=1","display_name":"ANjaNA","link":"https://stackoverflow.com/users/2156785/anjana"},"edited":false,"score":1,"creation_date":1437188284,"post_id":30462394,"comment_id":50939025,"content_license":"CC BY-SA 3.0","body":"why don&#39;t you call second constructor which is <code>Rectangle(int width, int height)</code> in <code>Rectangle()</code> instead of <code>Rectangle(int x, int y, int width, int height)</code> ?"},{"owner":{"reputation":5647,"user_id":117421,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/d41dcb11ae454085a38f69b10e6ae631?s=128&d=identicon&r=PG","display_name":"Wes","link":"https://stackoverflow.com/users/117421/wes"},"reply_to_user":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"edited":false,"score":1,"creation_date":1540297855,"post_id":30462394,"comment_id":92806123,"content_license":"CC BY-SA 4.0","body":"@RodneyP.Barbati I can&#39;t agree in this case. That pattern doesn&#39;t allow for final fields."}],"owner":{"reputation":952,"user_id":4395148,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/B1SrS.jpg?s=128&g=1","display_name":"amila isura","link":"https://stackoverflow.com/users/4395148/amila-isura"},"comment_count":2,"is_accepted":false,"score":29,"last_activity_date":1455241832,"last_edit_date":1455241832,"creation_date":1432652957,"answer_id":30462394,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>Within a constructor, you can use the <code>this</code> keyword to invoke another constructor in the same class. Doing so is called an <strong>explicit constructor invocation</strong>. </p>\n\n<p>Here's another Rectangle class, with a different implementation from the one in the Objects section.</p>\n\n<pre><code>public class Rectangle {\n    private int x, y;\n    private int width, height;\n\n    public Rectangle() {\n        this(1, 1);\n    }\n    public Rectangle(int width, int height) {\n        this( 0,0,width, height);\n    }\n    public Rectangle(int x, int y, int width, int height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n\n}\n</code></pre>\n\n<p>This class contains a set of constructors. Each constructor initializes some or all of the rectangle's member variables.</p>\n"},{"owner":{"reputation":311,"user_id":5182313,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/4b73a077b784c8967e497fccfb928933?s=128&d=identicon&r=PG&f=1","display_name":"ABHISHEK RANA","link":"https://stackoverflow.com/users/5182313/abhishek-rana"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1448650884,"creation_date":1448650884,"answer_id":33963435,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>You can a constructor from another constructor of same class by using \"this\" keyword.\nExample -</p>\n\n<pre><code>class This1\n{\n    This1()\n    {\n        this(\"Hello\");\n        System.out.println(\"Default constructor..\");\n    }\n    This1(int a)\n    {\n        this();\n        System.out.println(\"int as arg constructor..\"); \n    }\n    This1(String s)\n    {\n        System.out.println(\"string as arg constructor..\");  \n    }\n\n    public static void main(String args[])\n    {\n        new This1(100);\n    }\n}\n</code></pre>\n\n<p>Output -\nstring as arg constructor..\nDefault constructor..\nint as arg constructor..</p>\n"},{"owner":{"reputation":181,"user_id":5089473,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/EVfDj.jpg?s=128&g=1","display_name":"Akash Manngroliya","link":"https://stackoverflow.com/users/5089473/akash-manngroliya"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1523413250,"last_edit_date":1523413250,"creation_date":1473745706,"answer_id":39462961,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>Yes it is possible to call one constructor from another with use of <code>this()</code></p>\n\n<pre><code>class Example{\n   private int a = 1;\n   Example(){\n        this(5); //here another constructor called based on constructor argument\n        System.out.println(\"number a is \"+a);   \n   }\n   Example(int b){\n        System.out.println(\"number b is \"+b);\n   }\n</code></pre>\n"},{"owner":{"reputation":1956,"user_id":2106934,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/7d29cd79756208cfd1a7c814c477ddd6?s=128&d=identicon&r=PG","display_name":"Utsav","link":"https://stackoverflow.com/users/2106934/utsav"},"comment_count":0,"is_accepted":false,"score":14,"last_activity_date":1529559966,"last_edit_date":1529559966,"creation_date":1479312857,"answer_id":40637000,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Yes, any number of constructors can be present in a class and they can be called by another constructor using <code>this()</code> [Please do not confuse <code>this()</code> constructor call with <code>this</code> keyword]. <code>this()</code> or <code>this(args)</code> should be the first line in the constructor.</p>\n\n<p>Example:</p>\n\n<pre><code>Class Test {\n    Test() {\n        this(10); // calls the constructor with integer args, Test(int a)\n    }\n    Test(int a) {\n        this(10.5); // call the constructor with double arg, Test(double a)\n    }\n    Test(double a) {\n        System.out.println(\"I am a double arg constructor\");\n    }\n}\n</code></pre>\n\n<p>This is known as constructor overloading.<br>\nPlease note that for constructor, only overloading concept is applicable and not inheritance or overriding.</p>\n"},{"comments":[{"owner":{"reputation":550,"user_id":4543733,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4606926b80aa5489adb8bda5cc7ae45f?s=128&d=identicon&r=PG&f=1","display_name":"S R Chaitanya","link":"https://stackoverflow.com/users/4543733/s-r-chaitanya"},"edited":false,"score":4,"creation_date":1483795912,"post_id":40721089,"comment_id":70249727,"content_license":"CC BY-SA 3.0","body":"You have the following in the main method:  <b>//this(); error because &quot;must be first statement in constructor</b>  This statement does not make much sense. If you are trying to say that <i>this()</i> cannot be called from inside <i>main</i> method, then yes it cannot be because main is static and will not have reference to <i>this()</i>"}],"owner":{"reputation":1288,"user_id":5340833,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FbzRg.jpg?s=128&g=1","display_name":"Shivanandam","link":"https://stackoverflow.com/users/5340833/shivanandam"},"comment_count":1,"is_accepted":false,"score":9,"last_activity_date":1513662952,"last_edit_date":1513662952,"creation_date":1479734074,"answer_id":40721089,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p><strong>I will tell you an easy way</strong></p>\n\n<p>There are <strong>two</strong> types of constructors:</p>\n\n<ol>\n<li><strong>Default constructor</strong></li>\n<li><strong>Parameterized constructor</strong></li>\n</ol>\n\n<p>I will explain in one Example</p>\n\n<pre><code>class ConstructorDemo \n{\n      ConstructorDemo()//Default Constructor\n      {\n         System.out.println(\"D.constructor \");\n      }\n\n      ConstructorDemo(int k)//Parameterized constructor\n      {\n         this();//-------------(1)\n         System.out.println(\"P.Constructor =\"+k);       \n      }\n\n      public static void main(String[] args) \n      {\n         //this(); error because \"must be first statement in constructor\n         new ConstructorDemo();//-------(2)\n         ConstructorDemo g=new ConstructorDemo(3);---(3)    \n       }\n   }                  \n</code></pre>\n\n<p>In the above example I showed 3 types of calling</p>\n\n<ol>\n<li>this() call to this must be first statement in constructor</li>\n<li>This is Name less Object. this automatically calls the default constructor.\n3.This calls the Parameterized constructor.</li>\n</ol>\n\n<p>Note:\n<strong>this must be the first statement in the constructor.</strong></p>\n"},{"owner":{"reputation":550,"user_id":4543733,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4606926b80aa5489adb8bda5cc7ae45f?s=128&d=identicon&r=PG&f=1","display_name":"S R Chaitanya","link":"https://stackoverflow.com/users/4543733/s-r-chaitanya"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1534959059,"last_edit_date":1534959059,"creation_date":1483795278,"answer_id":41521892,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Yes it is possible to call one constructor from another. But there is a rule to it. If a call is made from one constructor to another, then </p>\n\n<blockquote>\n  <p><em>that new constructor call must be the first statement in the current constructor</em></p>\n</blockquote>\n\n<pre><code>public class Product {\n     private int productId;\n     private String productName;\n     private double productPrice;\n     private String category;\n\n    public Product(int id, String name) {\n        this(id,name,1.0);\n    }\n\n    public Product(int id, String name, double price) {\n        this(id,name,price,\"DEFAULT\");\n    }\n\n    public Product(int id,String name,double price, String category){\n        this.productId=id;\n        this.productName=name;\n        this.productPrice=price;\n        this.category=category;\n    }\n}\n</code></pre>\n\n<p>So, something like below will not work.</p>\n\n<pre><code>public Product(int id, String name, double price) {\n    System.out.println(\"Calling constructor with price\");\n    this(id,name,price,\"DEFAULT\");\n}\n</code></pre>\n\n<p>Also, in the case of inheritance, when sub-class's object is created, the super class constructor is first called.</p>\n\n<pre><code>public class SuperClass {\n    public SuperClass() {\n       System.out.println(\"Inside super class constructor\");\n    }\n}\npublic class SubClass extends SuperClass {\n    public SubClass () {\n       //Even if we do not add, Java adds the call to super class's constructor like \n       // super();\n       System.out.println(\"Inside sub class constructor\");\n    }\n}\n</code></pre>\n\n<p>Thus, in this case also another constructor call is first declared before any other statements.</p>\n"},{"owner":{"reputation":360,"user_id":6069781,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/IvazJ.jpg?s=128&g=1","display_name":"Akshay Gaikwad","link":"https://stackoverflow.com/users/6069781/akshay-gaikwad"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1488534618,"last_edit_date":1488534618,"creation_date":1488533250,"answer_id":42575098,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>Calling constructor from another constructor</p>\n\n<pre><code>class MyConstructorDemo extends ConstructorDemo\n{\n    MyConstructorDemo()\n    {\n        this(\"calling another constructor\");\n    }\n    MyConstructorDemo(String arg)\n    {\n        System.out.print(\"This is passed String by another constructor :\"+arg);\n    }\n}\n</code></pre>\n\n<p>Also you can call parent constructor by using <code>super()</code> call</p>\n"},{"owner":{"reputation":1797,"user_id":4066742,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/VebTa.jpg?s=128&g=1","display_name":"S. Mayol","link":"https://stackoverflow.com/users/4066742/s-mayol"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1489535596,"last_edit_date":1495540978,"creation_date":1489535596,"answer_id":42798699,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>The keyword <strong><em>this</em></strong> can be used to call a constructor from a constructor, when writing several constructor for a class, there are times when you'd like to call one constructor from another to avoid duplicate code.</p>\n\n<p>Bellow is a link that I explain other topic about constructor and getters() and setters() and I used a class with two constructors. I hope the explanations and examples help you.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19359548/setter-methods-or-constructors/42798426#42798426\">Setter methods or constructors</a></p>\n"},{"owner":{"reputation":1359,"user_id":1588303,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG","display_name":"Rodney P. Barbati","link":"https://stackoverflow.com/users/1588303/rodney-p-barbati"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1510614082,"creation_date":1510614082,"answer_id":47274985,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>There are design patterns that cover the need for complex construction - if it can't be done succinctly, create a factory method or a factory class.</p>\n\n<p>With the latest java and the addition of lambdas, it is easy to create a constructor which can accept any initialization code you desire.</p>\n\n<pre><code>class LambdaInitedClass {\n\n   public LamdaInitedClass(Consumer&lt;LambdaInitedClass&gt; init) {\n       init.accept(this);\n   }\n}\n</code></pre>\n\n<p>Call it with...</p>\n\n<pre><code> new LambdaInitedClass(l -&gt; { // init l any way you want });\n</code></pre>\n"},{"owner":{"reputation":410,"user_id":2576702,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/e055e4be0d5d395f3c9b5f3223019a34?s=128&d=identicon&r=PG","display_name":"GetBackerZ","link":"https://stackoverflow.com/users/2576702/getbackerz"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1548258819,"last_edit_date":1548258819,"creation_date":1511273031,"answer_id":47414995,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Pretty simple </p>\n\n<pre><code>public class SomeClass{\n\n    private int number;\n    private String someString;\n\n    public SomeClass(){\n        number = 0;\n        someString = new String();\n    }\n\n    public SomeClass(int number){\n        this(); //set the class to 0\n        this.setNumber(number); \n    }\n\n    public SomeClass(int number, String someString){\n        this(number); //call public SomeClass( int number )\n        this.setString(someString);\n    }\n\n    public void setNumber(int number){\n        this.number = number;\n    }\n    public void setString(String someString){\n        this.someString = someString;\n    }\n    //.... add some accessors\n}\n</code></pre>\n\n<p>now here is some small extra credit:</p>\n\n<pre><code>public SomeOtherClass extends SomeClass {\n    public SomeOtherClass(int number, String someString){\n         super(number, someString); //calls public SomeClass(int number, String someString)\n    }\n    //.... Some other code.\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"},{"owner":{"reputation":3305,"user_id":5483580,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-_nU33sjf1SI/AAAAAAAAAAI/AAAAAAAASgQ/VOkKnOIxP8g/photo.jpg?sz=128","display_name":"Negi Rox","link":"https://stackoverflow.com/users/5483580/negi-rox"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1518530723,"last_edit_date":1518530723,"creation_date":1516772757,"answer_id":48415573,"question_id":285177,"content_license":"CC BY-SA 3.0","body":"<p>I know there are so many examples of this question but what I found I am putting here to share my Idea. there are two ways to chain constructor. In Same class you can use this keyword. in Inheritance, you need to use super keyword.</p>\n\n<pre><code>    import java.util.*;\n    import java.lang.*;\n\n    class Test\n    {  \n        public static void main(String args[])\n        {\n            Dog d = new Dog(); // Both Calling Same Constructor of Parent Class i.e. 0 args Constructor.\n            Dog cs = new Dog(\"Bite\"); // Both Calling Same Constructor of Parent Class i.e. 0 args Constructor.\n\n            // You need to Explicitly tell the java compiler to use Argument constructor so you need to use \"super\" key word\n            System.out.println(\"------------------------------\");\n            Cat c = new Cat();\n            Cat caty = new Cat(\"10\");\n\n            System.out.println(\"------------------------------\");\n            // Self s = new Self();\n            Self ss = new Self(\"self\");\n        }\n    }\n\n    class Animal\n    {\n        String i;\n\n        public Animal()\n        {\n            i = \"10\";\n            System.out.println(\"Animal Constructor :\" +i);\n        }\n        public Animal(String h)\n        {\n            i = \"20\";\n            System.out.println(\"Animal Constructor Habit :\"+ i);\n        }\n    }\n\n    class Dog extends Animal\n    {\n        public Dog()\n        {\n            System.out.println(\"Dog Constructor\");\n        }\n        public Dog(String h)\n        {\n            System.out.println(\"Dog Constructor with habit\");\n        }\n    }\n\n    class Cat extends Animal\n    {\n        public Cat()\n        {\n            System.out.println(\"Cat Constructor\");\n        }\n        public Cat(String i)\n        {\n            super(i); // Calling Super Class Paremetrize Constructor.\n            System.out.println(\"Cat Constructor with habit\");\n        }\n    }\n\n    class Self\n    {\n        public Self()\n        {\n            System.out.println(\"Self Constructor\");\n        }\n        public Self(String h)\n        {\n            this(); // Explicitly calling 0 args constructor. \n            System.out.println(\"Slef Constructor with value\");\n        }\n    }\n</code></pre>\n"},{"owner":{"reputation":2294,"user_id":3254692,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/pg8j6.jpg?s=128&g=1","display_name":"Omar Faroque Anik","link":"https://stackoverflow.com/users/3254692/omar-faroque-anik"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1528313792,"creation_date":1528313792,"answer_id":50728250,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>It is called Telescoping Constructor anti-pattern or constructor chaining. Yes, you can definitely do. I see many examples above and I want to add by saying that if you know that you need only two or three constructor, it might be ok. But if you need more, please try to use different design pattern like Builder pattern. As for example: </p>\n\n<pre><code> public Omar(){};\n public Omar(a){};\n public Omar(a,b){};\n public Omar(a,b,c){};\n public Omar(a,b,c,d){};\n ...\n</code></pre>\n\n<p>You may need more. Builder pattern would be a great solution in this case. Here is an article, it might be helpful\n<a href=\"https://medium.com/@modestofiguereo/design-patterns-2-the-builder-pattern-and-the-telescoping-constructor-anti-pattern-60a33de7522e\" rel=\"nofollow noreferrer\">https://medium.com/@modestofiguereo/design-patterns-2-the-builder-pattern-and-the-telescoping-constructor-anti-pattern-60a33de7522e</a></p>\n"},{"owner":{"reputation":3126,"user_id":9772691,"user_type":"registered","profile_image":"https://i.stack.imgur.com/NRRPE.jpg?s=128&g=1","display_name":"John McClane","link":"https://stackoverflow.com/users/9772691/john-mcclane"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1532826844,"creation_date":1532826844,"answer_id":51576459,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>You can call another constructor via the <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html\" rel=\"nofollow noreferrer\"><code>this(...)</code></a> keyword (when you need to call a constructor from the same class) or the <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/super.html\" rel=\"nofollow noreferrer\"><code>super(...)</code></a> keyword\n(when you need to call a constructor from a superclass).</p>\n\n<p>However, such a call must be the <strong>first</strong> statement of your constructor. To <strong>overcome</strong> this limitation, use <a href=\"https://stackoverflow.com/a/51571736/9772691\">this answer</a>.</p>\n"},{"owner":{"reputation":49377,"user_id":32453,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG","display_name":"rogerdpack","link":"https://stackoverflow.com/users/32453/rogerdpack"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1558717074,"last_edit_date":1558717074,"creation_date":1554769859,"answer_id":55583536,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Originally from an anser by Mirko Klemm, slightly modified to address the question:</p>\n\n<p>Just for completeness: There is also the <a href=\"https://stackoverflow.com/questions/3987428/what-is-an-initialization-block\">Instance initialization block</a> that gets executed always and before any other constructor is called. It consists simply of a block of statements \"{ ... }\" somewhere in the body of your class definition.  You can even have more than one.  You can't call them, but they're like \"shared constructor\" code if you want to reuse some code across constructors, similar to calling methods.</p>\n\n<p>So in your case</p>\n\n<pre><code>{ \n  System.out.println(\"this is shared constructor code executed before the constructor\");\n  field1 = 3;\n}\n</code></pre>\n\n<p>There is also a \"static\" version of this to initialize static members: \"static { ... }\"</p>\n"},{"owner":{"reputation":698,"user_id":7500651,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/Qgw3Q.jpg?s=128&g=1","display_name":"ansh sachdeva","link":"https://stackoverflow.com/users/7500651/ansh-sachdeva"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1560933516,"creation_date":1560933516,"answer_id":56663443,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>I prefer this way:  </p>\n\n<pre><code>    class User {\n        private long id;\n        private String username;\n        private int imageRes;\n\n    public User() {\n        init(defaultID,defaultUsername,defaultRes);\n    }\n    public User(String username) {\n        init(defaultID,username, defaultRes());\n    }\n\n    public User(String username, int imageRes) {\n        init(defaultID,username, imageRes);\n    }\n\n    public User(long id, String username, int imageRes) {\n        init(id,username, imageRes);\n\n    }\n\n    private void init(long id, String username, int imageRes) {\n        this.id=id;\n        this.username = username;\n        this.imageRes = imageRes;\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":112,"user_id":6505685,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/015a2d7180535446c7d6f1df6baf0718?s=128&d=identicon&r=PG&f=1","display_name":"Soni Vashisht","link":"https://stackoverflow.com/users/6505685/soni-vashisht"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1589022973,"last_edit_date":1592644375,"creation_date":1564680925,"answer_id":57314267,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Yes, you can call constructors from another constructor. For example:</p>\n<pre><code>public class Animal {\n    private int animalType;\n\n    public Animal() {\n        this(1); //here this(1) internally make call to Animal(1);\n    }\n\n    public Animal(int animalType) {\n        this.animalType = animalType;\n    }\n}\n</code></pre>\n<p>you can also read in details from\n<a href=\"https://beginnersbook.com/2013/12/java-constructor-chaining-with-example/\" rel=\"nofollow noreferrer\">Constructor Chaining in Java</a></p>\n"},{"owner":{"reputation":980,"user_id":8450064,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-sUFHZf-glew/AAAAAAAAAAI/AAAAAAAAAJU/DskFo5Z8xZ8/photo.jpg?sz=128","display_name":"Anil Nivargi","link":"https://stackoverflow.com/users/8450064/anil-nivargi"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1610763175,"creation_date":1610763175,"answer_id":65745848,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Using this keyword we can call one constructor in another constructor within same class.</p>\n<p>Example :-</p>\n<pre><code> public class Example {\n   \n      private String name;\n   \n      public Example() {\n          this(&quot;Mahesh&quot;);\n      }\n\n      public Example(String name) {\n          this.name = name;\n      }\n\n }\n</code></pre>\n"},{"owner":{"reputation":23,"user_id":14558434,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/66e45ad92c6a84be1acaf4fa37b781bc?s=128&d=identicon&r=PG&f=1","display_name":"anar1501","link":"https://stackoverflow.com/users/14558434/anar1501"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1613241955,"creation_date":1613241955,"answer_id":66188671,"question_id":285177,"content_license":"CC BY-SA 4.0","body":"<p>Yes it is possible</p>\n<pre><code>public class User {\n\n private String name = &quot;&quot;;\n private String surname = &quot;&quot;;\n private int age = 0;\n public User(){\n    this(&quot;name is undefined&quot;,&quot;surname is undefined&quot;,0);\n }\n    public User(String name,String surname){\n      this(name,surname,0);\n   }\n\n\n    public User(String name, String surname, int age) {\n      this.name = name;\n      this.surname = surname;\n      this.age = age;\n  }\n}\n</code></pre>\n"}],"owner":{"reputation":73738,"user_id":33203,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/07856b52198509b8bd0d2e5418d0bf37?s=128&d=identicon&r=PG","display_name":"ashokgelal","link":"https://stackoverflow.com/users/33203/ashokgelal"},"comment_count":3,"is_answered":true,"view_count":934916,"protected_date":1373306296,"accepted_answer_id":285184,"answer_count":23,"score":2383,"last_activity_date":1613241955,"creation_date":1226520619,"last_edit_date":1226521019,"question_id":285177,"link":"https://stackoverflow.com/questions/285177/how-do-i-call-one-constructor-from-another-in-java","title":"How do I call one constructor from another in Java?","body":"<p>Is it possible to call a constructor from another (within the same class, not from a subclass)? If yes how? And what could be the best way to call another constructor (if there are several ways to do it)?</p>\n"},{"tags":["java","reflection","terminology"],"comments":[{"owner":{"reputation":9481,"user_id":2770850,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1","display_name":"Nabin","link":"https://stackoverflow.com/users/2770850/nabin"},"edited":false,"score":11,"creation_date":1478149337,"post_id":37628,"comment_id":68039313,"content_license":"CC BY-SA 3.0","body":"For me it is a way of getting class names at runtime and creating objects of that class."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":73,"creation_date":1491342345,"post_id":37628,"comment_id":73507666,"content_license":"CC BY-SA 3.0","body":"because this is a popular question I&#39;d like to point out that reflection (Without annotations) should be the very last tool you go to when solving a problem.  I use it and love it, but it cancels out all the advantages of Java&#39;s static typing.  If you do need it, isolate it to as small an area as possible (One method or one class).  It&#39;s more acceptable to use it in tests than production code.   With annotations it should be fine--The main point is not to specify class or method names as &quot;Strings&quot; if you can possibly avoid it."},{"owner":{"reputation":12820,"user_id":7852,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/HP5eX.jpg?s=128&g=1","display_name":"givanse","link":"https://stackoverflow.com/users/7852/givanse"},"edited":false,"score":2,"creation_date":1524263686,"post_id":37628,"comment_id":86917776,"content_license":"CC BY-SA 3.0","body":"see also: <a href=\"https://softwareengineering.stackexchange.com/questions/123956/why-should-i-use-reflection\" title=\"why should i use reflection\">softwareengineering.stackexchange.com/questions/123956/&hellip;</a>"},{"owner":{"reputation":16837,"user_id":507738,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/7ghSp.jpg?s=128&g=1","display_name":"MC Emperor","link":"https://stackoverflow.com/users/507738/mc-emperor"},"reply_to_user":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":5,"creation_date":1542891776,"post_id":37628,"comment_id":93737016,"content_license":"CC BY-SA 4.0","body":"In addition to @BillK&#39;s comment: Reflection is very powerful, I&#39;d call it magic. With great power comes great responsibility. Use it only if you know what you&#39;re doing."},{"owner":{"reputation":874,"user_id":507563,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/bc60a77f84badd72d4bde6c46cb9b71d?s=128&d=identicon&r=PG","display_name":"Scott","link":"https://stackoverflow.com/users/507563/scott"},"edited":false,"score":0,"creation_date":1544835245,"post_id":37628,"comment_id":94428774,"content_license":"CC BY-SA 4.0","body":"You can avoid many of the pitfalls involved with reflection using Manifold <code>@Jailbreak</code>. It provides direct, <b>type-safe</b> access to private fields, methods, etc. Let the Java compiler safely verify your code and let Manifold generate the underlying reflection access for you. Learn more: <a href=\"http://manifold.systems/docs.html#type-safe-reflection\" rel=\"nofollow noreferrer\">manifold.systems/docs.html#type-safe-reflection</a>"},{"owner":{"reputation":11070,"user_id":7839,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/3ebc7baf5b572cd893874b81890621fa?s=128&d=identicon&r=PG","display_name":"Trap","link":"https://stackoverflow.com/users/7839/trap"},"reply_to_user":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":0,"creation_date":1591839694,"post_id":37628,"comment_id":110211449,"content_license":"CC BY-SA 4.0","body":"@BillK Why would someone use reflection over static typing if it wasn&#39;t for a good reason?"},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"reply_to_user":{"reputation":11070,"user_id":7839,"user_type":"registered","accept_rate":96,"profile_image":"https://www.gravatar.com/avatar/3ebc7baf5b572cd893874b81890621fa?s=128&d=identicon&r=PG","display_name":"Trap","link":"https://stackoverflow.com/users/7839/trap"},"edited":false,"score":0,"creation_date":1591995824,"post_id":37628,"comment_id":110276211,"content_license":"CC BY-SA 4.0","body":"@Trap I donât know, thatâs why I was recommending against itâitâs really annoying when I run into reflection when there were other solutions available, or reflection that isnât isolated to a very small, constrained and clearly documented area of the code.  But asking why programmers do what they do is beyond my ability to answer."}],"answers":[{"comments":[{"owner":{"reputation":301,"user_id":1641086,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/ZO4Cd.jpg?s=128&g=1","display_name":"Krsna Chaitanya","link":"https://stackoverflow.com/users/1641086/krsna-chaitanya"},"edited":false,"score":35,"creation_date":1353650377,"post_id":37632,"comment_id":18514696,"content_license":"CC BY-SA 3.0","body":"can u please explain what is the significance of that null parameter in this line Method method = foo.getClass().getMethod(&quot;doSomething&quot;, null);"},{"owner":{"reputation":110149,"user_id":797,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/aef85130bf44caa9b4de0a3153e758f2?s=128&d=identicon&r=PG","display_name":"Matt Sheppard","link":"https://stackoverflow.com/users/797/matt-sheppard"},"reply_to_user":{"reputation":301,"user_id":1641086,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/ZO4Cd.jpg?s=128&g=1","display_name":"Krsna Chaitanya","link":"https://stackoverflow.com/users/1641086/krsna-chaitanya"},"edited":false,"score":56,"creation_date":1353978859,"post_id":37632,"comment_id":18603998,"content_license":"CC BY-SA 3.0","body":"The null indicates there are no parameters being passed to the foo method. See <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke(java.lang.Object\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/java/lang/reflect/&hellip;</a>, java.lang.Object...) for details."},{"owner":{"reputation":4293,"user_id":1177198,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG","display_name":"bigtunacan","link":"https://stackoverflow.com/users/1177198/bigtunacan"},"edited":false,"score":819,"creation_date":1363059991,"post_id":37632,"comment_id":21688679,"content_license":"CC BY-SA 3.0","body":"Just to clear up since this has so many upvotes.  The ability to inspect the code in the system and see object types is not reflection, but rather Type Introspection.  Reflection is then the ability to make modifications at runtime by making use of introspection.  The distinction is necessary here as some languages support introspection, but do not support reflection.  One such example is C++."},{"owner":{"reputation":59643,"user_id":12943,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/d6a9924b767fe91c46def7edc7bce035?s=128&d=identicon&r=PG","display_name":"Bill K","link":"https://stackoverflow.com/users/12943/bill-k"},"edited":false,"score":42,"creation_date":1375113001,"post_id":37632,"comment_id":26194778,"content_license":"CC BY-SA 3.0","body":"I love reflection but if you have control over the code then using reflection as specified in this answer is unnessary and therefore an abuse--You should use Type Introspection (instanceof) and strong types. If there is any way but reflection to do something, that&#39;s how it should be done. Reflection causes serious heartache because you lose all advantages of using a statically typed language. If you need it you need it, however even then I&#39;d consider a pre-packaged solution like Spring or something that completely encapsulates the reflection necessary--IE: let someone else have the headaches."},{"owner":{"reputation":2224,"user_id":63730,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/3ebb5fa10152f25f788221ae03ca172d?s=128&d=identicon&r=PG","display_name":"geschema","link":"https://stackoverflow.com/users/63730/geschema"},"edited":false,"score":3,"creation_date":1403185863,"post_id":37632,"comment_id":37568114,"content_license":"CC BY-SA 3.0","body":"Isn&#39;t introspection the same as self-reflection?"},{"owner":{"reputation":1611,"user_id":1593007,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/sF5gl.jpg?s=128&g=1","display_name":"Neon Warge","link":"https://stackoverflow.com/users/1593007/neon-warge"},"edited":false,"score":0,"creation_date":1453907094,"post_id":37632,"comment_id":57806067,"content_license":"CC BY-SA 3.0","body":"I just realize one thing maybe this is what I am doing in JavaScript? I open up firebugs/chrome inspector plug a break point and see what my code doing on that point, also looking for methods if it exists on an instance and try it out and check what it spits out? All this done on runtime. If this is the case wow, this is what it is."},{"owner":{"reputation":665,"user_id":1841956,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/56e7af2b73d6866cd7b009e731bd1fe6?s=128&d=identicon&r=PG","display_name":"RestInPeace","link":"https://stackoverflow.com/users/1841956/restinpeace"},"reply_to_user":{"reputation":4293,"user_id":1177198,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG","display_name":"bigtunacan","link":"https://stackoverflow.com/users/1177198/bigtunacan"},"edited":false,"score":6,"creation_date":1461922466,"post_id":37632,"comment_id":61428768,"content_license":"CC BY-SA 3.0","body":"@bigtunacan Where did you get that information from? I see the term &quot;reflection&quot; used in official Java documentation from Oracle to describe not only the ability to make changes at runtime but also the ability to see the type of an object. Not to mention that most so-called &quot;type introspection&quot; related classes (ex: <code>Method</code>, <code>Constructor</code>, <code>Modifier</code>, <code>Field</code>, <code>Member</code>, basically apparently all except <code>Class</code>) are within the <code>java.lang.*reflect*</code> package. Perhaps the concept &quot;reflection&quot; comprehensively includes both &quot;type introspection&quot; and modification at run-time?"},{"owner":{"reputation":4293,"user_id":1177198,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG","display_name":"bigtunacan","link":"https://stackoverflow.com/users/1177198/bigtunacan"},"reply_to_user":{"reputation":665,"user_id":1841956,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/56e7af2b73d6866cd7b009e731bd1fe6?s=128&d=identicon&r=PG","display_name":"RestInPeace","link":"https://stackoverflow.com/users/1841956/restinpeace"},"edited":false,"score":5,"creation_date":1461934409,"post_id":37632,"comment_id":61436753,"content_license":"CC BY-SA 3.0","body":"@RestInPeace, that is a correct assumption.  Reflection relies on introspection and so encompasses that as a piece.  My comment was to clarify that reflection allows runtime modifications.  The answer gives an example that shows these runtime modifications occurring, but defines reflection as just the ability to do the introspection. This question has very high SEO for reflection and I thought it important to add additional clarification."},{"owner":{"reputation":60438,"user_id":8922,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG","display_name":"Sebastian Redl","link":"https://stackoverflow.com/users/8922/sebastian-redl"},"edited":false,"score":0,"creation_date":1486371966,"post_id":37632,"comment_id":71299313,"content_license":"CC BY-SA 3.0","body":"C++ does not, at this time, support type introspection in any relevant way. It is planned for a future version. Some external tools (such as Qt&#39;s moc) extend C++ with type introspection capabilities."},{"owner":{"reputation":989,"user_id":5872507,"user_type":"registered","accept_rate":80,"profile_image":"https://graph.facebook.com/1048582751859135/picture?type=large","display_name":"Lucas","link":"https://stackoverflow.com/users/5872507/lucas"},"edited":false,"score":0,"creation_date":1490363471,"post_id":37632,"comment_id":73091950,"content_license":"CC BY-SA 3.0","body":"C# have dynamic objects and anonymous objects too, like <code>ExpandoObject</code>"},{"owner":{"reputation":1195,"user_id":5768269,"user_type":"registered","accept_rate":79,"profile_image":"https://graph.facebook.com/1043660518990589/picture?type=large","display_name":"Wesos de Queso","link":"https://stackoverflow.com/users/5768269/wesos-de-queso"},"edited":false,"score":0,"creation_date":1501454867,"post_id":37632,"comment_id":77771242,"content_license":"CC BY-SA 3.0","body":"It useless for non Java editors. It would be insane if you could modify classes attributes or methods at runtime."},{"owner":{"reputation":1358,"user_id":4483113,"user_type":"registered","profile_image":"https://i.stack.imgur.com/v2ENl.jpg?s=128&g=1","display_name":"idelvall","link":"https://stackoverflow.com/users/4483113/idelvall"},"reply_to_user":{"reputation":4293,"user_id":1177198,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG","display_name":"bigtunacan","link":"https://stackoverflow.com/users/1177198/bigtunacan"},"edited":false,"score":0,"creation_date":1529304876,"post_id":37632,"comment_id":88807800,"content_license":"CC BY-SA 4.0","body":"@bigtunacan that is not accurate, at least in the Java world. Reflection is the API to both get and set that information at runtime whereas introspection is the process of inspecting java beans, based on method naming convention and reflection <a href=\"https://stackoverflow.com/questions/2044446/java-introspection-and-reflection\" title=\"java introspection and reflection\">stackoverflow.com/questions/2044446/&hellip;</a>"}],"owner":{"reputation":110149,"user_id":797,"user_type":"registered","accept_rate":66,"profile_image":"https://www.gravatar.com/avatar/aef85130bf44caa9b4de0a3153e758f2?s=128&d=identicon&r=PG","display_name":"Matt Sheppard","link":"https://stackoverflow.com/users/797/matt-sheppard"},"comment_count":12,"is_accepted":true,"score":1803,"last_activity_date":1583622532,"last_edit_date":1583622532,"creation_date":1220258698,"answer_id":37632,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>The name reflection is used to describe code which is able to inspect other code in the same system (or itself).</p>\n\n<p>For example, say you have an object of an unknown type in Java, and you would like to call a 'doSomething' method on it if one exists. Java's static typing system isn't really designed to support this unless the object conforms to a known interface, but using reflection, your code can look at the object and find out if it has a method called 'doSomething' and then call it if you want to.</p>\n\n<p>So, to give you a code example of this in Java (imagine the object in question is foo) :</p>\n\n<pre><code>Method method = foo.getClass().getMethod(\"doSomething\", null);\nmethod.invoke(foo, null);\n</code></pre>\n\n<p>One very common use case in Java is the usage with annotations. JUnit 4, for example, will use reflection to look through your classes for methods tagged with the @Test annotation, and will then call them when running the unit test.</p>\n\n<p>There are some good reflection examples to get you started at <a href=\"http://docs.oracle.com/javase/tutorial/reflect/index.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/tutorial/reflect/index.html</a></p>\n\n<p>And finally, yes, the concepts are pretty much similar in other statically typed languages which support reflection (like C#). In dynamically typed languages, the use case described above is less necessary (since the compiler will allow any method to be called on any object, failing at runtime if it does not exist), but the second case of looking for methods which are marked or work in a certain way is still common.</p>\n\n<p><strong>Update from a comment:</strong></p>\n\n<blockquote>\n  <p>The ability to inspect the code in the system and see object types is\n  not reflection, but rather Type Introspection. Reflection is then the\n  ability to make modifications at runtime by making use of\n  introspection. The distinction is necessary here as some languages\n  support introspection, but do not support reflection. One such example\n  is C++</p>\n</blockquote>\n"},{"owner":{"reputation":46993,"user_id":2695,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/kfUsM.jpg?s=128&g=1","display_name":"Jorge C&#243;rdoba","link":"https://stackoverflow.com/users/2695/jorge-c%c3%b3rdoba"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1585341443,"last_edit_date":1585341443,"creation_date":1220259052,"answer_id":37634,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>Reflection is a set of functions which allows you to access the runtime information of your program and modify it behavior (with some limitations).</p>\n\n<p>It's useful because it allows you to change the runtime behavior depending on the meta information of your program, that is, you can check the return type of a function and change the way you handle the situation.</p>\n\n<p>In C# for example you can load an assembly (a .dll) in runtime an examine it, navigating through the classes and taking actions according to what you found. It also let you create an instance of a class on runtime, invoke its method, etc.</p>\n\n<p>Where can it be useful? Is not useful every time but for concrete situations. For example you can use it to get the name of the class for logging purposes, to dynamically create handlers for events according to what's specified on a configuration file and so on...</p>\n"},{"owner":{"reputation":34249,"user_id":3320,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/82b1a2cb56adfa86634e7310ff639064?s=128&d=identicon&r=PG","display_name":"Mendelt","link":"https://stackoverflow.com/users/3320/mendelt"},"comment_count":0,"is_accepted":false,"score":40,"last_activity_date":1602215614,"last_edit_date":1602215614,"creation_date":1220259057,"answer_id":37635,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>Not every language supports reflection, but the principles are usually the same in languages that support it.</p>\n<p>Reflection is the ability to &quot;reflect&quot; on the structure of your program. Or more concrete. To look at the objects and classes you have and programmatically get back information on the methods, fields, and interfaces they implement. You can also look at things like annotations.</p>\n<p>It's useful in a lot of situations. Everywhere you want to be able to dynamically plug in classes into your code. Lots of object relational mappers use reflection to be able to instantiate objects from databases without knowing in advance what objects they're going to use. Plug-in architectures is another place where reflection is useful. Being able to dynamically load code and determine if there are types there that implement the right interface to use as a plugin is important in those situations.</p>\n"},{"comments":[{"owner":{"reputation":973,"user_id":717290,"user_type":"registered","accept_rate":33,"profile_image":"https://graph.facebook.com/812988293/picture?type=large","display_name":"Fernando Gabrieli","link":"https://stackoverflow.com/users/717290/fernando-gabrieli"},"edited":false,"score":3,"creation_date":1543700404,"post_id":37638,"comment_id":94014834,"content_license":"CC BY-SA 4.0","body":"So in other words, you can create an instance out of it&#39;s qualified name and the compiler won&#39;t complain about it (because say you use just a String for the class name). Then, at run time, if that class is not present you get an exception. You kind of bypassed the compiler in this case. Would you give me some specific use case for this? I just can&#39;t picture when i would choose it."},{"owner":{"reputation":9331,"user_id":890,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/ca7b97ac1c6eed7a3b0e13d9f65e27ae?s=128&d=identicon&r=PG","display_name":"Liedman","link":"https://stackoverflow.com/users/890/liedman"},"reply_to_user":{"reputation":973,"user_id":717290,"user_type":"registered","accept_rate":33,"profile_image":"https://graph.facebook.com/812988293/picture?type=large","display_name":"Fernando Gabrieli","link":"https://stackoverflow.com/users/717290/fernando-gabrieli"},"edited":false,"score":4,"creation_date":1547555134,"post_id":37638,"comment_id":95224252,"content_license":"CC BY-SA 4.0","body":"@FernandoGabrieli while it is true that it is easy to create runtime errors with reflection, it is also perfectly possible to use reflection without risking runtime exceptions. As hinted in my answer, a common use of reflection is for libraries or frameworks, which explicitly <i>can&#39;t</i> know the structure of the application at compile time, since they are compiled separate from the application. Any library that uses &quot;code by convention&quot; is likely to use reflection, but not necessarily using magic strings."},{"owner":{"reputation":16289,"user_id":10147399,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1","display_name":"Ayxan Haqverdili","link":"https://stackoverflow.com/users/10147399/ayxan-haqverdili"},"edited":false,"score":1,"creation_date":1576009930,"post_id":37638,"comment_id":104756885,"content_license":"CC BY-SA 4.0","body":"<code>C++</code> does have Run-time type information. <a href=\"https://en.wikipedia.org/wiki/Run-time_type_information\" rel=\"nofollow noreferrer\">RTTI</a>"}],"owner":{"reputation":9331,"user_id":890,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/ca7b97ac1c6eed7a3b0e13d9f65e27ae?s=128&d=identicon&r=PG","display_name":"Liedman","link":"https://stackoverflow.com/users/890/liedman"},"comment_count":3,"is_accepted":false,"score":268,"last_activity_date":1453595815,"last_edit_date":1453595815,"creation_date":1220259149,"answer_id":37638,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<blockquote>\n  <p><strong>Reflection</strong> is a language's ability to inspect and dynamically call classes, methods, attributes, etc. at runtime.</p>\n</blockquote>\n\n<p>For example, all objects in Java have the method <code>getClass()</code>, which lets you determine the object's class even if you don't know it at compile time (e.g. if you declared it as an <code>Object</code>) - this might seem trivial, but such reflection is not possible in less dynamic languages such as <code>C++</code>. More advanced uses lets you list and call methods, constructors, etc.</p>\n\n<p>Reflection is important since it lets you write programs that do not have to \"know\" everything at compile time, making them more dynamic, since they can be tied together at runtime. The code can be written against known interfaces, but the actual classes to be used can be instantiated using reflection from configuration files.</p>\n\n<p>Lots of modern frameworks use reflection extensively for this very reason. Most other modern languages use reflection as well, and in scripting languages (such as Python) they are even more tightly integrated, since it feels more natural within the general programming model of those languages.</p>\n"},{"owner":{"reputation":47261,"user_id":3295,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/7331c9c20d99e89d6537645dd1deb34c?s=128&d=identicon&r=PG","display_name":"toolkit","link":"https://stackoverflow.com/users/3295/toolkit"},"comment_count":0,"is_accepted":false,"score":48,"last_activity_date":1220261455,"creation_date":1220261455,"answer_id":37659,"question_id":37628,"content_license":"CC BY-SA 2.5","body":"<p>Reflection is a key mechanism to allow an application or framework to work with code that might not have even been written yet!</p>\n\n<p>Take for example your typical web.xml file. This will contain a list of servlet elements, which contain nested servlet-class elements. The servlet container will process the web.xml file, and create new a new instance of each servlet class through reflection.</p>\n\n<p>Another example would be the Java API for XML Parsing <a href=\"http://en.wikipedia.org/wiki/Java_API_for_XML_Processing\" rel=\"noreferrer\">(JAXP)</a>. Where an XML parser provider is 'plugged-in' via well-known system properties, which are used to construct new instances through reflection.</p>\n\n<p>And finally, the most comprehensive example is <a href=\"http://www.springframework.org/\" rel=\"noreferrer\">Spring</a> which uses reflection to create its beans, and for its heavy use of proxies</p>\n"},{"comments":[{"owner":{"reputation":8247,"user_id":45974,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/04361eba6e039eecdd3458e2545f03e6?s=128&d=identicon&r=PG","display_name":"Tom","link":"https://stackoverflow.com/users/45974/tom"},"edited":false,"score":8,"creation_date":1272546371,"post_id":39918,"comment_id":2765837,"content_license":"CC BY-SA 2.5","body":"What should Callcount be set to?"},{"owner":{"reputation":8247,"user_id":45974,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/04361eba6e039eecdd3458e2545f03e6?s=128&d=identicon&r=PG","display_name":"Tom","link":"https://stackoverflow.com/users/45974/tom"},"edited":false,"score":8,"creation_date":1272546801,"post_id":39918,"comment_id":2765892,"content_license":"CC BY-SA 2.5","body":"I got a Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.StackOverflowError when I ran this."},{"owner":{"reputation":23816,"user_id":390897,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG","display_name":"fny","link":"https://stackoverflow.com/users/390897/fny"},"reply_to_user":{"reputation":8247,"user_id":45974,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/04361eba6e039eecdd3458e2545f03e6?s=128&d=identicon&r=PG","display_name":"Tom","link":"https://stackoverflow.com/users/45974/tom"},"edited":false,"score":3,"creation_date":1353650971,"post_id":39918,"comment_id":18514842,"content_license":"CC BY-SA 3.0","body":"@Tom <code>callCount</code> should be set to zero. It&#39;s value is used to determine how many tabs should precede each line of output: each time dump needs to dump a &quot;subobject&quot;, the output would print as nested in the parent. That method proves useful when wrapped in another. Consider <code>printDump(Object obj){  System.out.println(dump(obj, 0)); }</code>."},{"owner":{"reputation":9375,"user_id":777285,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/I1WDv.png?s=128&g=1","display_name":"Arnaud P","link":"https://stackoverflow.com/users/777285/arnaud-p"},"edited":false,"score":1,"creation_date":1372719782,"post_id":39918,"comment_id":25291145,"content_license":"CC BY-SA 3.0","body":"The java.lang.StackOverflowError might be created in case of circular references, because of the unchecked recursion: buffer.append(dump(value, callCount))"},{"owner":{"reputation":4971,"user_id":39334,"user_type":"registered","accept_rate":81,"profile_image":"https://graph.facebook.com/520402061/picture?type=large","display_name":"stolsvik","link":"https://stackoverflow.com/users/39334/stolsvik"},"edited":false,"score":4,"creation_date":1381226787,"post_id":39918,"comment_id":28486396,"content_license":"CC BY-SA 3.0","body":"Can you specifically release your code to Public Domain, pretty please?"},{"owner":{"reputation":1226,"user_id":1219213,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/IBSdb.jpg?s=128&g=1","display_name":"TheRealChx101","link":"https://stackoverflow.com/users/1219213/therealchx101"},"reply_to_user":{"reputation":4971,"user_id":39334,"user_type":"registered","accept_rate":81,"profile_image":"https://graph.facebook.com/520402061/picture?type=large","display_name":"stolsvik","link":"https://stackoverflow.com/users/39334/stolsvik"},"edited":false,"score":0,"creation_date":1575997105,"post_id":39918,"comment_id":104751408,"content_license":"CC BY-SA 4.0","body":"@stolsvik Don&#39;t SO TOS say that whatever is posted here automatically goes into the public domain or something like that? I&#39;m genuinely asking a question there so don&#39;t think that I&#39;m making a statement."},{"owner":{"reputation":2715,"user_id":401712,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8ab83e913223d2bee3eb4c4b5629122a?s=128&d=identicon&r=PG","display_name":"Dario Seidl","link":"https://stackoverflow.com/users/401712/dario-seidl"},"reply_to_user":{"reputation":1226,"user_id":1219213,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/IBSdb.jpg?s=128&g=1","display_name":"TheRealChx101","link":"https://stackoverflow.com/users/1219213/therealchx101"},"edited":false,"score":0,"creation_date":1590005387,"post_id":39918,"comment_id":109521312,"content_license":"CC BY-SA 4.0","body":"@TheRealChx101 Yea, not public domain, but a permissive license, CC BY-SA. <a href=\"https://stackoverflow.com/help/licensing\">stackoverflow.com/help/licensing</a>"}],"owner":{"reputation":2227,"user_id":2453,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/d3fd8d97dd52ec385cd8865a83912fe8?s=128&d=identicon&r=PG","display_name":"Ben Williams","link":"https://stackoverflow.com/users/2453/ben-williams"},"comment_count":7,"is_accepted":false,"score":121,"last_activity_date":1548720502,"last_edit_date":1548720502,"creation_date":1220372128,"answer_id":39918,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>One of my favorite uses of reflection is the below Java dump method. It takes any object as a parameter and uses the Java reflection API to print out every field name and value.</p>\n\n<pre><code>import java.lang.reflect.Array;\nimport java.lang.reflect.Field;\n\npublic static String dump(Object o, int callCount) {\n    callCount++;\n    StringBuffer tabs = new StringBuffer();\n    for (int k = 0; k &lt; callCount; k++) {\n        tabs.append(\"\\t\");\n    }\n    StringBuffer buffer = new StringBuffer();\n    Class oClass = o.getClass();\n    if (oClass.isArray()) {\n        buffer.append(\"\\n\");\n        buffer.append(tabs.toString());\n        buffer.append(\"[\");\n        for (int i = 0; i &lt; Array.getLength(o); i++) {\n            if (i &lt; 0)\n                buffer.append(\",\");\n            Object value = Array.get(o, i);\n            if (value.getClass().isPrimitive() ||\n                    value.getClass() == java.lang.Long.class ||\n                    value.getClass() == java.lang.String.class ||\n                    value.getClass() == java.lang.Integer.class ||\n                    value.getClass() == java.lang.Boolean.class\n                    ) {\n                buffer.append(value);\n            } else {\n                buffer.append(dump(value, callCount));\n            }\n        }\n        buffer.append(tabs.toString());\n        buffer.append(\"]\\n\");\n    } else {\n        buffer.append(\"\\n\");\n        buffer.append(tabs.toString());\n        buffer.append(\"{\\n\");\n        while (oClass != null) {\n            Field[] fields = oClass.getDeclaredFields();\n            for (int i = 0; i &lt; fields.length; i++) {\n                buffer.append(tabs.toString());\n                fields[i].setAccessible(true);\n                buffer.append(fields[i].getName());\n                buffer.append(\"=\");\n                try {\n                    Object value = fields[i].get(o);\n                    if (value != null) {\n                        if (value.getClass().isPrimitive() ||\n                                value.getClass() == java.lang.Long.class ||\n                                value.getClass() == java.lang.String.class ||\n                                value.getClass() == java.lang.Integer.class ||\n                                value.getClass() == java.lang.Boolean.class\n                                ) {\n                            buffer.append(value);\n                        } else {\n                            buffer.append(dump(value, callCount));\n                        }\n                    }\n                } catch (IllegalAccessException e) {\n                    buffer.append(e.getMessage());\n                }\n                buffer.append(\"\\n\");\n            }\n            oClass = oClass.getSuperclass();\n        }\n        buffer.append(tabs.toString());\n        buffer.append(\"}\\n\");\n    }\n    return buffer.toString();\n}\n</code></pre>\n"},{"owner":{"reputation":171,"user_id":1191613,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/0b06a0894fa1fa56d095bff54a3579ee?s=128&d=identicon&r=PG","display_name":"pramod","link":"https://stackoverflow.com/users/1191613/pramod"},"comment_count":0,"is_accepted":false,"score":17,"last_activity_date":1364920206,"last_edit_date":1364920206,"creation_date":1328506645,"answer_id":9155976,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>As per my understanding:</p>\n\n<p>Reflection allows programmer to access entities in program dynamically. i.e. while coding an application if programmer is unaware about a class or its methods, he can make use of such class dynamically (at run time) by using reflection.</p>\n\n<p>It is frequently used in scenarios where a class name changes frequently. If such a situation arises, then it is complicated for the programmer to rewrite the application and change the name of the class again and again.</p>\n\n<p>Instead, by using reflection, there is need to worry about a possibly changing class name.</p>\n"},{"comments":[{"owner":{"reputation":728,"user_id":1818295,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/54c7655345241846d7373548c8874293?s=128&d=identicon&r=PG","display_name":"Atom","link":"https://stackoverflow.com/users/1818295/atom"},"edited":false,"score":0,"creation_date":1434998531,"post_id":11159447,"comment_id":50004863,"content_license":"CC BY-SA 3.0","body":"I need something similar.. An example would help me a lot as I am new to reflection concepts.."},{"owner":{"reputation":1047,"user_id":2133216,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/89a46427b32c76c7d44fb4ddb524b902?s=128&d=identicon&r=PG","display_name":"ndm13","link":"https://stackoverflow.com/users/2133216/ndm13"},"edited":false,"score":2,"creation_date":1515636577,"post_id":11159447,"comment_id":83378922,"content_license":"CC BY-SA 3.0","body":"I&#39;m confused: can&#39;t you use <code>instanceof</code> to determine object type at runtime?"}],"owner":{"reputation":1237,"user_id":1198898,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4b3f146a1aa7414e40b0cf3d4fa440a1?s=128&d=identicon&r=PG&f=1","display_name":"human.js","link":"https://stackoverflow.com/users/1198898/human-js"},"comment_count":2,"is_accepted":false,"score":21,"last_activity_date":1565794543,"last_edit_date":1565794543,"creation_date":1340379355,"answer_id":11159447,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p><strong>Example:</strong></p>\n\n<p>Take for example a remote application which gives your application an object which you obtain using their API Methods . Now based on the object you might need to perform some sort of computation . </p>\n\n<p>The provider guarantees that object can be of 3 types and we need to perform computation based on what type of object .</p>\n\n<p>So we might implement in 3 classes each containing a different logic .Obviously the object  information is available in runtime so you cannot statically code to perform computation hence reflection is used to instantiate the object of the class that you require to perform the computation based on the object received from the provider .</p>\n"},{"comments":[{"owner":{"reputation":11928,"user_id":1161948,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG","display_name":"ThisClark","link":"https://stackoverflow.com/users/1161948/thisclark"},"edited":false,"score":1,"creation_date":1487123639,"post_id":16406534,"comment_id":71637985,"content_license":"CC BY-SA 3.0","body":"This answer would be a lot better if you gave just one unusual example of generated code either from a SQL result or XML file etc."},{"owner":{"reputation":598,"user_id":2267583,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/adxtN.jpg?s=128&g=1","display_name":"Ess Kay","link":"https://stackoverflow.com/users/2267583/ess-kay"},"reply_to_user":{"reputation":11928,"user_id":1161948,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG","display_name":"ThisClark","link":"https://stackoverflow.com/users/1161948/thisclark"},"edited":false,"score":0,"creation_date":1487270471,"post_id":16406534,"comment_id":71720810,"content_license":"CC BY-SA 3.0","body":"No problem. I used reflection in a windows application that dynamically generates the interface based on XML taken from a database."},{"owner":{"reputation":598,"user_id":2267583,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/adxtN.jpg?s=128&g=1","display_name":"Ess Kay","link":"https://stackoverflow.com/users/2267583/ess-kay"},"reply_to_user":{"reputation":11928,"user_id":1161948,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG","display_name":"ThisClark","link":"https://stackoverflow.com/users/1161948/thisclark"},"edited":false,"score":0,"creation_date":1487270710,"post_id":16406534,"comment_id":71720943,"content_license":"CC BY-SA 3.0","body":"So basically, there is a class I created which shows the user a report. This report has parameters such as Date(from to) id, or whatever else. This info is stored in xml. So first we have a report selection. Based on the report selected, the form gets the xml. Once the xml is retrieved, it uses reflection to create a class with fields based on reflected types. Once you change to a different report, the slate is wiped clean and new fields are generated based on the xml. So its essentially a dynamic form based on reflection. I also used in other ways but this should be suffecient Hope that helps"}],"owner":{"reputation":598,"user_id":2267583,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/adxtN.jpg?s=128&g=1","display_name":"Ess Kay","link":"https://stackoverflow.com/users/2267583/ess-kay"},"comment_count":3,"is_accepted":false,"score":6,"last_activity_date":1435038439,"last_edit_date":1435038439,"creation_date":1367871388,"answer_id":16406534,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p><code>Reflection</code> has many <strong>uses</strong>. The one I am more familiar with, is to be able to create code on the fly. </p>\n\n<blockquote>\n  <p>IE: dynamic classes, functions, constructors - based on any data\n  (xml/array/sql results/hardcoded/etc..)</p>\n</blockquote>\n"},{"owner":{"reputation":516,"user_id":1772534,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e53bdb09c1e055d324d955efb4b341d?s=128&d=identicon&r=PG","display_name":"Nikhil Shekhar","link":"https://stackoverflow.com/users/1772534/nikhil-shekhar"},"comment_count":0,"is_accepted":false,"score":36,"last_activity_date":1373307933,"last_edit_date":1373307933,"creation_date":1373299924,"answer_id":17531269,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>Reflection allows instantiation of new objects, invocation of methods, and get/set operations on class variables dynamically at run time without having prior knowledge of its implementation.</p>\n\n<pre><code>Class myObjectClass = MyObject.class;\nMethod[] method = myObjectClass.getMethods();\n\n//Here the method takes a string parameter if there is no param, put null.\nMethod method = aClass.getMethod(\"method_name\", String.class); \n\nObject returnValue = method.invoke(null, \"parameter-value1\");\n</code></pre>\n\n<p>In above example the null parameter is the object you want to invoke the method on. If the method is static you supply null. If the method is not static, then while invoking you need to supply a valid MyObject instance instead of null.</p>\n\n<p>Reflection also allows you to access private member/methods of a class:</p>\n\n<pre><code>public class A{\n\n  private String str= null;\n\n  public A(String str) {\n  this.str= str;\n  }\n}\n</code></pre>\n\n<p>.</p>\n\n<pre><code>A obj= new A(\"Some value\");\n\nField privateStringField = A.class.getDeclaredField(\"privateString\");\n\n//Turn off access check for this field\nprivateStringField.setAccessible(true);\n\nString fieldValue = (String) privateStringField.get(obj);\nSystem.out.println(\"fieldValue = \" + fieldValue);\n</code></pre>\n\n<ul>\n<li>For inspection of classes (also know as introspection) you don't need to import the reflection package (<code>java.lang.reflect</code>). Class metadata can be accessed through <code>java.lang.Class</code>.</li>\n</ul>\n\n<p>Reflection is a very powerful API but it may slow down the application if used in excess, as it resolves all the types at runtime.</p>\n"},{"owner":{"reputation":7852,"user_id":1878022,"user_type":"registered","accept_rate":96,"profile_image":"https://i.stack.imgur.com/Iwcbd.jpg?s=128&g=1","display_name":"Vedant Kekan","link":"https://stackoverflow.com/users/1878022/vedant-kekan"},"comment_count":0,"is_accepted":false,"score":25,"last_activity_date":1440571084,"last_edit_date":1440571084,"creation_date":1410169202,"answer_id":25721335,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>Java Reflection is quite powerful and can be very useful.\nJava Reflection makes it possible <strong>to inspect classes, interfaces, fields and methods at runtime,</strong> without knowing the names of the classes, methods etc. at compile time.\nIt is also possible to <strong>instantiate new objects, invoke methods and get/set field values using reflection.</strong></p>\n\n<p><strong>A quick Java Reflection example to show you what using reflection looks like:</strong></p>\n\n<pre><code>Method[] methods = MyObject.class.getMethods();\n\n    for(Method method : methods){\n        System.out.println(\"method = \" + method.getName());\n    }\n</code></pre>\n\n<p>This example obtains the Class object from the class called MyObject. Using the class object the example gets a list of the methods in that class, iterates the methods and print out their names.</p>\n\n<p><a href=\"http://tutorials.jenkov.com/java-reflection/classes.html\" rel=\"noreferrer\">Exactly how all this works is explained here</a></p>\n\n<p><strong>Edit</strong>: After almost 1 year I am editing this answer as while reading about reflection I got few more uses of Reflection.</p>\n\n<ul>\n<li>Spring uses bean configuration such as:</li>\n</ul>\n\n<p><br></p>\n\n<pre><code>&lt;bean id=\"someID\" class=\"com.example.Foo\"&gt;\n    &lt;property name=\"someField\" value=\"someValue\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>When the Spring context processes this &lt; bean > element, it will use Class.forName(String) with the argument \"com.example.Foo\" to instantiate that Class. </p>\n\n<p>It will then again use reflection to get the appropriate setter for the &lt; property > element and set its value to the specified value.</p>\n\n<ul>\n<li>Junit uses Reflection especially for testing Private/Protected methods.</li>\n</ul>\n\n<p>For Private methods,</p>\n\n<pre><code>Method method = targetClass.getDeclaredMethod(methodName, argClasses);\nmethod.setAccessible(true);\nreturn method.invoke(targetObject, argObjects);\n</code></pre>\n\n<p>For private fields,</p>\n\n<pre><code>Field field = targetClass.getDeclaredField(fieldName);\nfield.setAccessible(true);\nfield.set(object, value);\n</code></pre>\n"},{"owner":{"reputation":13421,"user_id":1498427,"user_type":"registered","accept_rate":89,"profile_image":"https://i.stack.imgur.com/zMjyh.jpg?s=128&g=1","display_name":"catch23","link":"https://stackoverflow.com/users/1498427/catch23"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1411251723,"creation_date":1411251723,"answer_id":25953852,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>I just want to add some point to all that was listed.</p>\n\n<p>With <strong>Reflection API</strong> you can write universal <code>toString()</code> method for any object.</p>\n\n<p>It is useful at debugging.</p>\n\n<p>Here is some example:</p>\n\n<pre><code>class ObjectAnalyzer {\n\n   private ArrayList&lt;Object&gt; visited = new ArrayList&lt;Object&gt;();\n\n   /**\n    * Converts an object to a string representation that lists all fields.\n    * @param obj an object\n    * @return a string with the object's class name and all field names and\n    * values\n    */\n   public String toString(Object obj) {\n      if (obj == null) return \"null\";\n      if (visited.contains(obj)) return \"...\";\n      visited.add(obj);\n      Class cl = obj.getClass();\n      if (cl == String.class) return (String) obj;\n      if (cl.isArray()) {\n         String r = cl.getComponentType() + \"[]{\";\n         for (int i = 0; i &lt; Array.getLength(obj); i++) {\n            if (i &gt; 0) r += \",\";\n            Object val = Array.get(obj, i);\n            if (cl.getComponentType().isPrimitive()) r += val;\n            else r += toString(val);\n         }\n         return r + \"}\";\n      }\n\n      String r = cl.getName();\n      // inspect the fields of this class and all superclasses\n      do {\n         r += \"[\";\n         Field[] fields = cl.getDeclaredFields();\n         AccessibleObject.setAccessible(fields, true);\n         // get the names and values of all fields\n         for (Field f : fields) {\n            if (!Modifier.isStatic(f.getModifiers())) {\n               if (!r.endsWith(\"[\")) r += \",\";\n               r += f.getName() + \"=\";\n               try {\n                  Class t = f.getType();\n                  Object val = f.get(obj);\n                  if (t.isPrimitive()) r += val;\n                  else r += toString(val);\n               } catch (Exception e) {\n                  e.printStackTrace();\n               }\n            }\n         }\n         r += \"]\";\n         cl = cl.getSuperclass();\n      } while (cl != null);\n\n      return r;\n   }    \n}\n</code></pre>\n"},{"owner":{"reputation":1079,"user_id":2115148,"user_type":"registered","accept_rate":38,"profile_image":"https://i.stack.imgur.com/AipKT.jpg?s=128&g=1","display_name":"Desmond Smith","link":"https://stackoverflow.com/users/2115148/desmond-smith"},"comment_count":0,"is_accepted":false,"score":90,"last_activity_date":1532452841,"last_edit_date":1532452841,"creation_date":1413547173,"answer_id":26424561,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p><strong>Uses of Reflection</strong></p>\n\n<p>Reflection is commonly used by programs which require the ability to examine or modify the runtime behavior of applications running in the Java virtual machine. This is a relatively advanced feature and should be used only by developers who have a strong grasp of the fundamentals of the language. With that caveat in mind, reflection is a powerful technique and can enable applications to perform operations which would otherwise be impossible.</p>\n\n<p><strong>Extensibility Features</strong></p>\n\n<p>An application may make use of external, user-defined classes by creating instances of extensibility objects using their fully-qualified names.\nClass Browsers and Visual Development Environments\nA class browser needs to be able to enumerate the members of classes. Visual development environments can benefit from making use of type information available in reflection to aid the developer in writing correct code.\nDebuggers and Test Tools\nDebuggers need to be able to examine private members in classes. Test harnesses can make use of reflection to systematically call a discoverable set APIs defined on a class, to ensure a high level of code coverage in a test suite.</p>\n\n<p><strong>Drawbacks of Reflection</strong></p>\n\n<p>Reflection is powerful, but should not be used indiscriminately. If it is possible to perform an operation without using reflection, then it is preferable to avoid using it. The following concerns should be kept in mind when accessing code via reflection.</p>\n\n<ul>\n<li><strong>Performance Overhead</strong></li>\n</ul>\n\n<p>Because reflection involves types that are dynamically resolved, certain Java virtual machine optimizations cannot be performed. Consequently, reflective operations have slower performance than their non-reflective counterparts and should be avoided in sections of code which are called frequently in performance-sensitive applications.</p>\n\n<ul>\n<li><strong>Security Restrictions</strong></li>\n</ul>\n\n<p>Reflection requires a runtime permission which may not be present when running under a security manager. This is in an important consideration for code which has to run in a restricted security context, such as in an Applet.</p>\n\n<ul>\n<li><strong>Exposure of Internals</strong></li>\n</ul>\n\n<p>Since reflection allows code to perform operations that would be illegal in non-reflective code, such as accessing private fields and methods, the use of reflection can result in unexpected side-effects, which may render code dysfunctional and may destroy portability. Reflective code breaks abstractions and therefore may change behavior with upgrades of the platform.</p>\n\n<p>source: <a href=\"https://docs.oracle.com/javase/tutorial/reflect/\" rel=\"noreferrer\">The Reflection API</a></p>\n"},{"owner":{"reputation":258,"user_id":4216954,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-QmvhwgPeY5c/AAAAAAAAAAI/AAAAAAAAAPc/7ysOFb0U7Gs/photo.jpg?sz=128","display_name":"Isuru Jayakantha","link":"https://stackoverflow.com/users/4216954/isuru-jayakantha"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1565794585,"last_edit_date":1565794585,"creation_date":1415248951,"answer_id":26771874,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>Simple example for reflection.\nIn a chess game, you do not know what will be moved by the user at run time. reflection can be used to call methods which are already implemented at run time:</p>\n\n<pre><code>public class Test {\n\n    public void firstMoveChoice(){\n        System.out.println(\"First Move\");\n    } \n    public void secondMOveChoice(){\n        System.out.println(\"Second Move\");\n    }\n    public void thirdMoveChoice(){\n        System.out.println(\"Third Move\");\n    }\n\n    public static void main(String[] args) throws IllegalAccessException, IllegalArgumentException, InvocationTargetException { \n        Test test = new Test();\n        Method[] method = test.getClass().getMethods();\n        //firstMoveChoice\n        method[0].invoke(test, null);\n        //secondMoveChoice\n        method[1].invoke(test, null);\n        //thirdMoveChoice\n        method[2].invoke(test, null);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":960,"user_id":1092670,"user_type":"registered","accept_rate":93,"profile_image":"https://i.stack.imgur.com/sZiEO.jpg?s=128&g=1","display_name":"AnthonyJClink","link":"https://stackoverflow.com/users/1092670/anthonyjclink"},"edited":false,"score":0,"creation_date":1517328862,"post_id":34149864,"comment_id":84046714,"content_license":"CC BY-SA 3.0","body":"type(), isinstance(), callable(), dir() and getattr().   .... these are pythonic reflection calls"}],"owner":{"reputation":4995,"user_id":2288882,"user_type":"registered","accept_rate":52,"profile_image":"https://www.gravatar.com/avatar/fbefc3abe38dfc80b207905af1794924?s=128&d=identicon&r=PG","display_name":"Marcus Thornton","link":"https://stackoverflow.com/users/2288882/marcus-thornton"},"comment_count":1,"is_accepted":false,"score":11,"last_activity_date":1532452936,"last_edit_date":1532452936,"creation_date":1449558139,"answer_id":34149864,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>Reflection is to let object to see their appearance. This argument seems nothing to do with reflection. In fact, this is the \"self-identify\" ability.</p>\n\n<p>Reflection itself is a word for such languages that lack the capability of self-knowledge and self-sensing as Java and C#. Because they do not have the capability of self-knowledge, when we want to observe how it looks like, we must have another thing to reflect on how it looks like. Excellent dynamic languages such as Ruby and Python can perceive the reflection of their own without the help of other individuals. We can say that the object of Java cannot perceive how it looks like without a mirror, which is an object of the reflection class, but an object in Python can perceive it without a mirror. So that's why we need reflection in Java.</p>\n"},{"comments":[{"owner":{"reputation":68430,"user_id":363751,"user_type":"registered","accept_rate":35,"profile_image":"https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG","display_name":"supercat","link":"https://stackoverflow.com/users/363751/supercat"},"edited":false,"score":0,"creation_date":1580583181,"post_id":35379881,"comment_id":106147907,"content_license":"CC BY-SA 4.0","body":"A way to avoid the performance problems of Reflection in some cases is to have a class <code>Woozle</code> examine other classes on startup to see which ones have a static <code>RegisterAsWoozleHelper()</code> method, and invoke all such methods it finds with a callback they can use to tell <code>Woozle</code> about themselves, avoiding need to use Reflection while e.g. deserializing data."}],"owner":{"reputation":41397,"user_id":4999394,"user_type":"registered","accept_rate":98,"profile_image":"https://i.stack.imgur.com/nAGmt.png?s=128&g=1","display_name":"Ravindra babu","link":"https://stackoverflow.com/users/4999394/ravindra-babu"},"comment_count":1,"is_accepted":false,"score":9,"last_activity_date":1457302964,"last_edit_date":1495542893,"creation_date":1455366825,"answer_id":35379881,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>From java documentation <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/package-summary.html\" rel=\"noreferrer\">page</a></p>\n\n<blockquote>\n  <p><code>java.lang.reflect</code> package provides classes and interfaces for obtaining reflective information about classes and objects. Reflection allows programmatic access to information about the fields, methods and constructors of loaded classes, and the use of reflected fields, methods, and constructors to operate on their underlying counterparts, within security restrictions.</p>\n</blockquote>\n\n<p><code>AccessibleObject</code> allows suppression of access checks if the necessary <code>ReflectPermission</code> is available.</p>\n\n<p>Classes in this package, along with <code>java.lang.Class</code> accommodate applications such as debuggers, interpreters, object inspectors, class browsers, and services such as <code>Object Serialization</code> and <code>JavaBeans</code> that need access to either the public members of a target object (based on its runtime class) or the members declared by a given class</p>\n\n<p>It includes following functionality.</p>\n\n<ol>\n<li>Obtaining Class objects,</li>\n<li>Examining properties of a class (fields, methods, constructors),</li>\n<li>Setting and getting field values,</li>\n<li>Invoking methods,</li>\n<li>Creating new instances of objects.</li>\n</ol>\n\n<p>Have a look at this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html\" rel=\"noreferrer\">documentation</a> link for the methods exposed by <strong><em><code>Class</code></em></strong> class.</p>\n\n<p>From this <a href=\"http://www.ibm.com/developerworks/library/j-dyn0603/\" rel=\"noreferrer\">article</a> (by Dennis Sosnoski, President, Sosnoski Software Solutions, Inc)  and this <a href=\"http://www.security-explorations.com/materials/se-2012-01-report.pdf\" rel=\"noreferrer\">article</a> (security-explorations pdf):</p>\n\n<p>I can see considerable drawbacks than uses of using Reflection</p>\n\n<p><strong><em>User of Reflection:</em></strong></p>\n\n<ol>\n<li>It provides very versatile way of dynamically linking program components</li>\n<li>It is useful for creating libraries that work with objects in very general ways</li>\n</ol>\n\n<p><strong><em>Drawbacks of Reflection:</em></strong></p>\n\n<ol>\n<li>Reflection is much slower than direct code when used for field and method access.</li>\n<li>It can obscure what's actually going on inside your code</li>\n<li>It bypasses the source code can create maintenance problems</li>\n<li>Reflection code is also more complex than the corresponding direct code</li>\n<li>It  allows violation of key Java security constraints such\nas data access protection and type safety</li>\n</ol>\n\n<p><strong><em>General abuses:</em></strong></p>\n\n<ol>\n<li>Loading of restricted classes,</li>\n<li>Obtaining references to constructors, methods or fields of a restricted class,</li>\n<li>Creation of new object instances, methods invocation, getting or setting field values of a restricted class.</li>\n</ol>\n\n<p>Have a look at this SE question regarding abuse of reflection feature:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1196192/how-do-i-read-a-private-field-in-java\">How do I read a private field in Java?</a></p>\n\n<p><strong>Summary:</strong></p>\n\n<p><em>Insecure use of its functions conducted from within a system code can also easily lead to the compromise of a Java security mode</em>l. <strong><em>So use this feature sparingly</em></strong></p>\n"},{"owner":{"reputation":167,"user_id":2774441,"user_type":"registered","profile_image":"https://i.stack.imgur.com/LLPAR.jpg?s=128&g=1","display_name":"saumik gupta","link":"https://stackoverflow.com/users/2774441/saumik-gupta"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1532452929,"last_edit_date":1532452929,"creation_date":1461711289,"answer_id":36877237,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>Reflection gives you the ability to write more generic code. It allows you to create an object at runtime and call its method at runtime. Hence the program can be made highly parameterized. It also allows introspecting the object and class to detect its variables and method exposed to the outer world.</p>\n"},{"comments":[{"owner":{"reputation":1387,"user_id":2814308,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/pz7MQ.jpg?s=128&g=1","display_name":"SantiBailors","link":"https://stackoverflow.com/users/2814308/santibailors"},"edited":false,"score":4,"creation_date":1513769253,"post_id":42945244,"comment_id":82776583,"content_license":"CC BY-SA 3.0","body":"I would add to the drawbacks &quot;<a href=\"https://stackoverflow.com/q/1027904/2814308\">It breaks refactoring</a>&quot;. For me that&#39;s the main reason to avoid reflection as much as possible."},{"owner":{"reputation":973,"user_id":717290,"user_type":"registered","accept_rate":33,"profile_image":"https://graph.facebook.com/812988293/picture?type=large","display_name":"Fernando Gabrieli","link":"https://stackoverflow.com/users/717290/fernando-gabrieli"},"edited":false,"score":0,"creation_date":1543699684,"post_id":42945244,"comment_id":94014664,"content_license":"CC BY-SA 4.0","body":"So it allows us (for example), to inspect the classes we have (whether we have instances of them or not), correct? By this i mean, get their methods or constructors and use them to create new instances/invoke them. Why do we say &quot;changing the program behavior&quot; if the behavior is already there but with different code? Why is it called &quot;reflection&quot;? Thanks"}],"owner":{"reputation":6153,"user_id":5167682,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/2vexc.jpg?s=128&g=1","display_name":"roottraveller","link":"https://stackoverflow.com/users/5167682/roottraveller"},"comment_count":2,"is_accepted":false,"score":18,"last_activity_date":1490167628,"creation_date":1490167628,"answer_id":42945244,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p><strong>Reflection</strong> is an API which is used to examine or modify the behaviour of <em>methods, classes, interfaces</em> at runtime.</p>\n\n<ol>\n<li>The required classes for reflection are provided under <code>java.lang.reflect package</code>.</li>\n<li>Reflection gives us information about the class to which an object belongs and also the methods of that class which can be executed by using the object.</li>\n<li>Through reflection we can invoke methods at runtime irrespective of the access specifier used with them.</li>\n</ol>\n\n<p>The <code>java.lang</code> and <code>java.lang.reflect</code> packages provide classes for java reflection.</p>\n\n<p><strong>Reflection</strong> can be used to get information about â</p>\n\n<ol>\n<li><p><strong>Class</strong> The <code>getClass()</code> method is used to get the name of the class to which an object belongs.</p></li>\n<li><p><strong>Constructors</strong> The <code>getConstructors()</code> method is used to get the public constructors of the class to which an object belongs.</p></li>\n<li><p><strong>Methods</strong> The <code>getMethods()</code> method is used to get the public methods of the class to which an objects belongs.</p></li>\n</ol>\n\n<p>The <strong>Reflection API</strong> is mainly used in:</p>\n\n<p>IDE (Integrated Development Environment) e.g. Eclipse, MyEclipse, NetBeans etc.<br>\nDebugger and Test Tools etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zEXW5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zEXW5.png\" alt=\"\"></a></p>\n\n<p><strong>Advantages of Using Reflection:</strong></p>\n\n<p><em>Extensibility Features:</em> An application may make use of external, user-defined classes by creating instances of extensibility objects using their fully-qualified names.</p>\n\n<p><em>Debugging and testing tools:</em> Debuggers use the property of reflection to examine private members on classes.</p>\n\n<p><strong>Drawbacks:</strong></p>\n\n<p><em>Performance Overhead:</em> Reflective operations have slower performance than their non-reflective counterparts, and should be avoided in sections of code which are called frequently in performance-sensitive applications.</p>\n\n<p><em>Exposure of Internals:</em> Reflective code breaks abstractions and therefore may change behaviour with upgrades of the platform.</p>\n\n<p>Ref: <a href=\"http://www.geeksforgeeks.org/reflection-in-java/\" rel=\"noreferrer\">Java Reflection</a>  <a href=\"http://javarevisited.blogspot.in/2012/05/how-to-access-private-field-and-method.html\" rel=\"noreferrer\">javarevisited.blogspot.in</a></p>\n"},{"owner":{"reputation":330,"user_id":4651104,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-tSdWLWO7Yb0/AAAAAAAAAAI/AAAAAAAABDk/wWMAUX7DPlA/photo.jpg?sz=128","display_name":"Mohammed Sarfaraz","link":"https://stackoverflow.com/users/4651104/mohammed-sarfaraz"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1491704974,"creation_date":1491704974,"answer_id":43302409,"question_id":37628,"content_license":"CC BY-SA 3.0","body":"<p>As name itself suggest it reflects what it holds for example class method,etc apart from providing feature to invoke method creating instance dynamically at runtime.</p>\n\n<p>It is used by many frameworks and application under the wood to invoke services without actually knowing the code. </p>\n"},{"owner":{"reputation":2371,"user_id":3631743,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/Y1ASY.jpg?s=128&g=1","display_name":"BSeitkazin","link":"https://stackoverflow.com/users/3631743/bseitkazin"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1543991757,"creation_date":1543991757,"answer_id":53626477,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>I want to answer this question by example. First of all <code>Hibernate</code> project uses <code>Reflection API</code> to generate <code>CRUD</code> statements to bridge the chasm between the running application and the persistence store. When things change in the domain, the <code>Hibernate</code> has to know about them to persist them to the data store and vice versa.</p>\n\n<p>Alternatively works <code>Lombok Project</code>. It just injects code at compile time, result in code being inserted into your domain classes. (I think it is OK for getters and setters)</p>\n\n<p><code>Hibernate</code> chose <code>reflection</code> because it has minimal impact on the build process for an application.</p>\n\n<p>And from Java 7 we have <code>MethodHandles</code>, which works as <code>Reflection API</code>. In projects, to work with loggers we just copy-paste the next code:</p>\n\n<pre><code>Logger LOGGER = Logger.getLogger(MethodHandles.lookup().lookupClass().getName());\n</code></pre>\n\n<p>Because it is hard to make typo-error in this case. </p>\n"},{"owner":{"reputation":839,"user_id":1347707,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/ff08d150225ce24ae812052a7fc71dfc?s=128&d=identicon&r=PG","display_name":"cprn","link":"https://stackoverflow.com/users/1347707/cprn"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1561380711,"last_edit_date":1561380711,"creation_date":1556271275,"answer_id":55864747,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p>As I find it best to explain by example and none of the answers seem to do that...</p>\n\n<p>A practical example of using reflections would be a Java Language Server written in Java or a PHP Language Server written in PHP, etc. Language Server gives your IDE abilities like autocomplete, jump to definition, context help, hinting types and more. In order to have all tag names (words that can be autocompleted) to show all the possible matches as you type the Language Server has to inspect everything about the class including doc blocks and private members. For that it needs a reflection of said class.</p>\n\n<p>A different example would be a unit-test of a private method. One way to do so is to create a reflection and change the method's scope to public in the test's set-up phase. Of course one can argue private methods shouldn't be tested directly but that's not the point.</p>\n"},{"owner":{"reputation":309,"user_id":4704305,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-CIHhk9c6JPQ/AAAAAAAAAAI/AAAAAAAAAAA/LCzwKK2NPzs/photo.jpg?sz=128","display_name":"RSG","link":"https://stackoverflow.com/users/4704305/rsg"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1606172512,"creation_date":1606172512,"answer_id":64977871,"question_id":37628,"content_license":"CC BY-SA 4.0","body":"<p><strong>IMPORTANT</strong></p>\n<p>Starting from Java 9 you cannot longer use reflection unless the package-info.java <strong>opens</strong> the module to reflection access.</p>\n<p>By default reflection access to all packages in the module is denied.</p>\n<p>See <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">Understanding Java 9 Modules</a></p>\n"}],"owner":{"reputation":41920,"user_id":142,"user_type":"registered","accept_rate":97,"profile_image":"https://www.gravatar.com/avatar/73f6b2c26b7b1a8974a2a2f94a14706c?s=128&d=identicon&r=PG","display_name":"Lehane","link":"https://stackoverflow.com/users/142/lehane"},"comment_count":7,"is_answered":true,"view_count":919818,"protected_date":1402120474,"accepted_answer_id":37632,"answer_count":22,"score":2238,"last_activity_date":1606172512,"creation_date":1220258361,"last_edit_date":1446013805,"question_id":37628,"link":"https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful","title":"What is reflection and why is it useful?","body":"<p>What is reflection, and why is it useful?</p>\n\n<p>I'm particularly interested in Java, but I assume the principles are the same in any language.</p>\n"},{"tags":["java","spring","spring-mvc","annotations"],"comments":[{"owner":{"reputation":8089,"user_id":795158,"user_type":"registered","accept_rate":95,"profile_image":"https://i.stack.imgur.com/46saQ.jpg?s=128&g=1","display_name":"Ivaylo Slavov","link":"https://stackoverflow.com/users/795158/ivaylo-slavov"},"edited":false,"score":11,"creation_date":1447171012,"post_id":6827752,"comment_id":55041873,"content_license":"CC BY-SA 3.0","body":"Being a developer with Microsoft background, I recall the semantic definition of services in the old MS SmartClientSoftwareFactory framework (now a long deprecated complex framework for distributed desktop apps). That definition (<a href=\"https://richnewman.wordpress.com/2007/09/08/introduction-to-services-in-the-cab-introduction-to-the-cabscsf-part-7/\" rel=\"nofollow noreferrer\">nicely documented</a> by Rich Newman) defined the services as stateless reusable objects, preferably with singleton scope, that are used to perform business logic operations on other objects passed as arguments. I tend to view Spring services the same way"},{"owner":{"reputation":1581,"user_id":1052099,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/758bb1797d9e4fd8d2165f55ac71a47b?s=128&d=identicon&r=PG","display_name":"TriCore","link":"https://stackoverflow.com/users/1052099/tricore"},"edited":false,"score":3,"creation_date":1499229944,"post_id":6827752,"comment_id":76810326,"content_license":"CC BY-SA 3.0","body":"Doesn&#39;t matter!! Whatever works for you :) I&#39;ve always hated this about Spring that they always tend to define &quot;rules&quot; for you, which only add trivial value to your application. Not to mention Spring comes with huge stack of its own."},{"owner":{"reputation":5235,"user_id":5070577,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/719712211549bdac23e2b1dcaaa6e01b?s=128&d=identicon&r=PG&f=1","display_name":"Walfrat","link":"https://stackoverflow.com/users/5070577/walfrat"},"reply_to_user":{"reputation":1581,"user_id":1052099,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/758bb1797d9e4fd8d2165f55ac71a47b?s=128&d=identicon&r=PG","display_name":"TriCore","link":"https://stackoverflow.com/users/1052099/tricore"},"edited":false,"score":40,"creation_date":1506610859,"post_id":6827752,"comment_id":79899746,"content_license":"CC BY-SA 3.0","body":"@TriCore Sprting is a framework, define &quot;rules&quot; for you is its job :)"}],"answers":[{"comments":[{"owner":{"reputation":1871,"user_id":2041542,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/b371d04f1710a8d17f0d835fe88c3820?s=128&d=identicon&r=PG","display_name":"kapil das","link":"https://stackoverflow.com/users/2041542/kapil-das"},"edited":false,"score":1,"creation_date":1382101714,"post_id":6827820,"comment_id":28840173,"content_license":"CC BY-SA 3.0","body":"@Component means a spring bean only, is any other purpose for it ?"},{"owner":{"reputation":1731,"user_id":1901896,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77b2651b08f4279ec5a29169d6c40c3d?s=128&d=identicon&r=PG","display_name":"Akash5288","link":"https://stackoverflow.com/users/1901896/akash5288"},"edited":false,"score":23,"creation_date":1418753250,"post_id":6827820,"comment_id":43452316,"content_license":"CC BY-SA 3.0","body":"@Component beans are auto detectable by spring container. You don&#39;t need to define bean in configuration file, it will be automatically detected at runtime by Spring."},{"owner":{"reputation":4611,"user_id":538921,"user_type":"registered","accept_rate":91,"profile_image":"https://www.gravatar.com/avatar/efe3dcebff1c01cdbb1d8ce459f23343?s=128&d=identicon&r=PG","display_name":"Eddie B","link":"https://stackoverflow.com/users/538921/eddie-b"},"edited":false,"score":1,"creation_date":1424482534,"post_id":6827820,"comment_id":45581064,"content_license":"CC BY-SA 3.0","body":"I&#39;m quite fond of the generic @Component... especially in combo with @Scope( proxyMode = ScopedProxyMode.//MODE)"}],"owner":{"reputation":548952,"user_id":203907,"user_type":"registered","accept_rate":81,"profile_image":"https://i.stack.imgur.com/07ej2.jpg?s=128&g=1","display_name":"Bozho","link":"https://stackoverflow.com/users/203907/bozho"},"comment_count":3,"is_accepted":false,"score":441,"last_activity_date":1312201215,"last_edit_date":1312201215,"creation_date":1311671761,"answer_id":6827820,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>They are almost the same - all of them mean that the class is a Spring bean. <code>@Service</code>, <code>@Repository</code> and <code>@Controller</code> are specialized <code>@Component</code>s. You can choose to perform specific actions with them. For example:</p>\n\n<ul>\n<li><code>@Controller</code> beans are used by spring-mvc</li>\n<li><code>@Repository</code> beans are eligible for persistence exception translation</li>\n</ul>\n\n<p>Another thing is that you designate the components semantically to different layers.</p>\n\n<p>One thing that <code>@Component</code> offers is that you can annotate other annotations with it, and then use them the same way as <code>@Service</code>.</p>\n\n<p>For example recently I made:</p>\n\n<pre><code>@Component\n@Scope(\"prototype\")\npublic @interface ScheduledJob {..}\n</code></pre>\n\n<p>So all classes annotated with <code>@ScheduledJob</code> are spring beans and in addition to that are registered as quartz jobs. You just have to provide code that handles the specific annotation.</p>\n"},{"comments":[{"owner":{"reputation":1970,"user_id":251914,"user_type":"registered","accept_rate":43,"profile_image":"https://www.gravatar.com/avatar/8809800aec2460f291384b794d7e6f8f?s=128&d=identicon&r=PG","display_name":"Rick","link":"https://stackoverflow.com/users/251914/rick"},"edited":false,"score":6,"creation_date":1394532521,"post_id":6897038,"comment_id":33921704,"content_license":"CC BY-SA 3.0","body":"Would it make sense to add @Controller (or @Component) to an @WebServlet? It&#39;s not a Spring MVC controller, but that&#39;s the conceptually closest match. What about servlet filters?"},{"owner":{"reputation":5356,"user_id":3470841,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/39baa24f1e7778a959522c337ca474b3?s=128&d=identicon&r=PG&f=1","display_name":"Jack","link":"https://stackoverflow.com/users/3470841/jack"},"edited":false,"score":1,"creation_date":1426850146,"post_id":6897038,"comment_id":46549186,"content_license":"CC BY-SA 3.0","body":"what does &quot;@Repository is already supported as a marker for automatic exception translation in your persistence layer.&quot; mean?"},{"owner":{"reputation":76313,"user_id":445543,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/f5a3631b359d5fa1451372810c10d65e?s=128&d=identicon&r=PG","display_name":"stivlo","link":"https://stackoverflow.com/users/445543/stivlo"},"edited":false,"score":10,"creation_date":1426852217,"post_id":6897038,"comment_id":46550297,"content_license":"CC BY-SA 3.0","body":"It&#39;s referring to the fact that these annotations are good targets for AOP, and while the other annotations do not define a pointcut yet, they might do that in the future. On the other hand @Repository is already a target for a pointcut at present. That pointcut is used for exception translations, i.e. translating technology-specific exceptions to more generic Spring-based ones, to avoid tight coupling."},{"owner":{"reputation":54199,"user_id":1697099,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/gerXo.png?s=128&g=1","display_name":"Premraj","link":"https://stackoverflow.com/users/1697099/premraj"},"edited":false,"score":4,"creation_date":1435843492,"post_id":6897038,"comment_id":50377043,"content_license":"CC BY-SA 3.0","body":"@stivlo : I have really tried to understand the term &#39;stereotype&#39;, still not understand. Could you please help me to understand this terminology? It helps a lot and thank you very much"},{"owner":{"reputation":13526,"user_id":206466,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG","display_name":"xenoterracide","link":"https://stackoverflow.com/users/206466/xenoterracide"},"edited":false,"score":6,"creation_date":1461353025,"post_id":6897038,"comment_id":61177630,"content_license":"CC BY-SA 3.0","body":"down voting because I can read docs myself this doesn&#39;t actually tell me anything I didn&#39;t know. I&#39;m trying to figure out what the difference between <code>@Service</code> and <code>@Component</code> is, it&#39;s obvious to me that there is one since I&#39;ve seen problems injecting <code>@Components</code> into places where <code>@Service</code> works."},{"owner":{"reputation":183764,"user_id":135589,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/dbd98f264c64096af168747c3ae71a7d?s=128&d=identicon&r=PG","display_name":"Jesper","link":"https://stackoverflow.com/users/135589/jesper"},"reply_to_user":{"reputation":13526,"user_id":206466,"user_type":"registered","accept_rate":70,"profile_image":"https://www.gravatar.com/avatar/e990c7cdac81e570939c4d5b17303b42?s=128&d=identicon&r=PG","display_name":"xenoterracide","link":"https://stackoverflow.com/users/206466/xenoterracide"},"edited":false,"score":4,"creation_date":1464686625,"post_id":6897038,"comment_id":62572529,"content_license":"CC BY-SA 3.0","body":"@xenoterracide There is <i>practically</i> not a lot of difference. Something annotated with <code>@Service</code> <i>is</i> also a <code>@Component</code> (because the <code>@Service</code> annotation itself is annotated with <code>@Component</code>). As far as I know, nothing in the Spring framework explicitly makes use of the fact that something is a <code>@Service</code>, so the difference is really only conceptual."},{"owner":{"reputation":10316,"user_id":2889165,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/c8d9d5e8699011436c3bc854fbc8324c?s=128&d=identicon&r=PG&f=1","display_name":"Andreas Lundgren","link":"https://stackoverflow.com/users/2889165/andreas-lundgren"},"edited":false,"score":0,"creation_date":1472825037,"post_id":6897038,"comment_id":65922346,"content_license":"CC BY-SA 3.0","body":"What can go wrong if I annotate a persistence layer with @Service? Should I play the safe card @Component if I&#39;m not sure?"},{"owner":{"reputation":133349,"user_id":5221149,"user_type":"registered","profile_image":"https://i.stack.imgur.com/s4qlq.png?s=128&g=1","display_name":"Andreas","link":"https://stackoverflow.com/users/5221149/andreas"},"reply_to_user":{"reputation":10316,"user_id":2889165,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/c8d9d5e8699011436c3bc854fbc8324c?s=128&d=identicon&r=PG&f=1","display_name":"Andreas Lundgren","link":"https://stackoverflow.com/users/2889165/andreas-lundgren"},"edited":false,"score":1,"creation_date":1503595421,"post_id":6897038,"comment_id":78693820,"content_license":"CC BY-SA 3.0","body":"@AndreasLundgren If you annotated the persistence layer with <code>@Service</code> or <code>@Component</code> instead of <code>@Repository</code>, you lose the exception translation functionality. If you never <code>catch</code> specific persistence exceptions, or you don&#39;t care about the tight coupling of e.g. catching Hibernate specific exceptions, then you don&#39;t care about the exception translation. Similarly, if you annotate the service layer with something other than <code>@Service</code>, you lose the ability to add service-layer specific pointcuts. If you never do that, you don&#39;t care, but using correct annotation is also good documentation"},{"owner":{"reputation":406,"user_id":1984342,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/0c84f2f5ed182d7801150fafaa3cbd78?s=128&d=identicon&r=PG","display_name":"Neeraj Singh","link":"https://stackoverflow.com/users/1984342/neeraj-singh"},"reply_to_user":{"reputation":54199,"user_id":1697099,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/gerXo.png?s=128&g=1","display_name":"Premraj","link":"https://stackoverflow.com/users/1697099/premraj"},"edited":false,"score":0,"creation_date":1548875499,"post_id":6897038,"comment_id":95704679,"content_license":"CC BY-SA 4.0","body":"@Premraj to your query on stereotype, the reason this terminology is used because all these annotations are defined in Package <code>org.springframework.stereotype</code>. Annotations denoting the roles of types or methods in the overall architecture (at a <code>conceptual</code>, rather than implementation, level). As it talks about a conceptual level view, hence the package name is appropriate and conveys the meaning."},{"owner":{"reputation":768,"user_id":1356874,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/c8bac5749f60487fa6d983f89985f016?s=128&d=identicon&r=PG","display_name":"http8086","link":"https://stackoverflow.com/users/1356874/http8086"},"edited":false,"score":0,"creation_date":1565946096,"post_id":6897038,"comment_id":101510212,"content_license":"CC BY-SA 4.0","body":"I think this is not the answer exactly what asked for, what we want to know is the root cause which makes the difference, not the difference itself"}],"owner":{"reputation":76313,"user_id":445543,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/f5a3631b359d5fa1451372810c10d65e?s=128&d=identicon&r=PG","display_name":"stivlo","link":"https://stackoverflow.com/users/445543/stivlo"},"comment_count":10,"is_accepted":false,"score":1596,"last_activity_date":1612416936,"last_edit_date":1612416936,"creation_date":1312194012,"answer_id":6897038,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>From <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans-stereotype-annotations\" rel=\"noreferrer\">Spring Documentation</a>:</p>\n<blockquote>\n<p>The <code>@Repository</code> annotation is a marker for any class that fulfils the\nrole or stereotype of a repository (also known as Data Access Object\nor DAO). Among the uses of this marker is the automatic translation of\nexceptions, as described in <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/data-access.html#orm-exception-translation\" rel=\"noreferrer\">Exception Translation</a>.</p>\n<p>Spring provides further stereotype annotations: <code>@Component</code>, <code>@Service</code>,\nand <code>@Controller</code>. <code>@Component</code> is a generic stereotype for any\nSpring-managed component. <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are\nspecializations of <code>@Component</code> for more specific use cases (in the\npersistence, service, and presentation layers, respectively).\nTherefore, you can annotate your component classes with <code>@Component</code>,\nbut, by annotating them with <code>@Repository</code>, <code>@Service</code>, or <code>@Controller</code>\ninstead, your classes are more properly suited for processing by tools\nor associating with aspects.</p>\n<p>For example, these stereotype annotations\nmake ideal targets for pointcuts. <code>@Repository</code>, <code>@Service</code>, and\n<code>@Controller</code> can also carry additional semantics in future releases of\nthe Spring Framework. Thus, if you are choosing between using\n<code>@Component</code> or <code>@Service</code> for your service layer, <code>@Service</code> is clearly the\nbetter choice. Similarly, as stated earlier, <code>@Repository</code> is already\nsupported as a marker for automatic exception translation in your\npersistence layer.</p>\n</blockquote>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Annotation</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>@Component</code></td>\n<td>generic stereotype for any Spring-managed component</td>\n</tr>\n<tr>\n<td><code>@Repository</code></td>\n<td>stereotype for persistence layer</td>\n</tr>\n<tr>\n<td><code>@Service</code></td>\n<td>stereotype for service layer</td>\n</tr>\n<tr>\n<td><code>@Controller</code></td>\n<td>stereotype for presentation layer (spring-mvc)</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"comments":[{"owner":{"reputation":603,"user_id":2513788,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/AnNV2.jpg?s=128&g=1","display_name":"Nayeem","link":"https://stackoverflow.com/users/2513788/nayeem"},"edited":false,"score":0,"creation_date":1543596999,"post_id":13198943,"comment_id":93989175,"content_license":"CC BY-SA 4.0","body":"Can @Repository be used for RestAPI call&#39;s instead of DB operations?"},{"owner":{"reputation":2987,"user_id":1188047,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/fs94t.jpg?s=128&g=1","display_name":"Ben","link":"https://stackoverflow.com/users/1188047/ben"},"reply_to_user":{"reputation":603,"user_id":2513788,"user_type":"registered","accept_rate":29,"profile_image":"https://i.stack.imgur.com/AnNV2.jpg?s=128&g=1","display_name":"Nayeem","link":"https://stackoverflow.com/users/2513788/nayeem"},"edited":false,"score":0,"creation_date":1543598977,"post_id":13198943,"comment_id":93990075,"content_license":"CC BY-SA 4.0","body":"@Nayeem technically you can annotate services as controllers and repositories as services, dependency injection would work just the same. But why would you ever do that? If it does not work with database entities - it&#39;s not a repository, and <code>@Repository</code> is specifically designed to work with persistence layer. If you&#39;re working with rest api - you&#39;re working with DTO&#39;s, not DAO&#39;s."}],"owner":{"reputation":507,"user_id":1794781,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a4dcb1ff6dfc4cffe3b1f634ca7cacfa?s=128&d=identicon&r=PG","display_name":"Das","link":"https://stackoverflow.com/users/1794781/das"},"comment_count":2,"is_accepted":false,"score":49,"last_activity_date":1351873636,"last_edit_date":1351873636,"creation_date":1351872345,"answer_id":13198943,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>Use of <code>@Service</code> and <code>@Repository</code> annotations are important from database connection perspective.</p>\n\n<ol>\n<li>Use <code>@Service</code> for all your web service type of DB connections</li>\n<li>Use <code>@Repository</code> for all your stored proc DB connections</li>\n</ol>\n\n<p>If you do not use the proper annotations, you may face commit exceptions overridden by rollback transactions. You will see exceptions during stress load test that is related to roll back JDBC transactions.</p>\n"},{"owner":{"reputation":2202,"user_id":2334534,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/jsorb.jpg?s=128&g=1","display_name":"Ajit Singh","link":"https://stackoverflow.com/users/2334534/ajit-singh"},"comment_count":0,"is_accepted":false,"score":76,"last_activity_date":1522031166,"last_edit_date":1522031166,"creation_date":1368622125,"answer_id":16565447,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<blockquote>\n  <p>Spring 2.5 introduces further stereotype annotations: @Component, @Service and @Controller. @Component serves as a generic stereotype for any Spring-managed component; whereas, @Repository, @Service, and @Controller serve as specializations of @Component for more specific use cases (e.g., in the persistence, service, and presentation layers, respectively). What this means is that you can annotate your component classes with @Component, but by annotating them with @Repository, @Service, or @Controller instead, your classes are more properly suited for processing by tools or associating with aspects. For example, these stereotype annotations make ideal targets for pointcuts. Of course, it is also possible that @Repository, @Service, and @Controller may carry additional semantics in future releases of the Spring Framework. Thus, if you are making a decision between using @Component or @Service for your service layer, @Service is clearly the better choice. Similarly, as stated above, @Repository is already supported as a marker for automatic exception translation in your persistence layer.</p>\n\n<pre><code>@Component â Indicates a auto scan component.\n@Repository â Indicates DAO component in the persistence layer.\n@Service â Indicates a Service component in the business layer.\n@Controller â Indicates a controller component in the presentation layer.\n</code></pre>\n</blockquote>\n\n<p>reference :- <a href=\"https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s12.html\" rel=\"noreferrer\">Spring Documentation - Classpath scanning, managed components and writing configurations using Java </a>  </p>\n"},{"owner":{"reputation":494,"user_id":1009686,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/6eb2435dc6f7767f0f5554298516db6b?s=128&d=identicon&r=PG","display_name":"Manjush","link":"https://stackoverflow.com/users/1009686/manjush"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1392056497,"creation_date":1392056497,"answer_id":21684996,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>Even if we interchange @Component or @Repository or @service</p>\n\n<p>It will behave the same , but one aspect is that they wont be able to catch some specific exception related to DAO instead of Repository if we use component or @ service</p>\n"},{"comments":[{"owner":{"reputation":1576,"user_id":921075,"user_type":"registered","accept_rate":87,"profile_image":"https://i.stack.imgur.com/hsvpu.jpg?s=128&g=1","display_name":"dtc","link":"https://stackoverflow.com/users/921075/dtc"},"edited":false,"score":26,"creation_date":1461704712,"post_id":22628498,"comment_id":61318197,"content_license":"CC BY-SA 3.0","body":"these answers are all nice and all but im pretty sure what most of us want is some code examples of the features that components like service offers that we can more concretely put in our head rather than just a general description like &quot;business logic&quot; belongs in this object. otherwise, we still assume &quot;oh that&#39;s great and everything but i can still apply the same code to component&quot;"},{"owner":{"reputation":77131,"user_id":238134,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG","display_name":"deamon","link":"https://stackoverflow.com/users/238134/deamon"},"edited":false,"score":2,"creation_date":1493240254,"post_id":22628498,"comment_id":74337127,"content_license":"CC BY-SA 3.0","body":"Not <i>all</i> business logic should go into services! Services, in terms of DDD, should only contain domain logic that affects more than one entity. See answer <a href=\"http://stackoverflow.com/a/41358034/238134\">stackoverflow.com/a/41358034/238134</a>"},{"owner":{"reputation":6211,"user_id":3244185,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ocJBK.jpg?s=128&g=1","display_name":"Harshal Patil","link":"https://stackoverflow.com/users/3244185/harshal-patil"},"reply_to_user":{"reputation":77131,"user_id":238134,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG","display_name":"deamon","link":"https://stackoverflow.com/users/238134/deamon"},"edited":false,"score":0,"creation_date":1493274817,"post_id":22628498,"comment_id":74348191,"content_license":"CC BY-SA 3.0","body":"@deamon Yes but its depends on developers approach"},{"owner":{"reputation":77131,"user_id":238134,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/d80ce5271185447eb06b360959acd71f?s=128&d=identicon&r=PG","display_name":"deamon","link":"https://stackoverflow.com/users/238134/deamon"},"edited":false,"score":4,"creation_date":1493278483,"post_id":22628498,"comment_id":74350314,"content_license":"CC BY-SA 3.0","body":"@HarshalPatil You could of course write an application with all business logic in services, but that would lead to an anemic domain model and it would make it unnecessary hard to enforce constraints and consistence on the entities."},{"owner":{"reputation":2705,"user_id":2102748,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG","display_name":"milosmns","link":"https://stackoverflow.com/users/2102748/milosmns"},"edited":false,"score":1,"creation_date":1543577481,"post_id":22628498,"comment_id":93978689,"content_license":"CC BY-SA 4.0","body":"Of course it depends on developer&#39;s approach. Everything does. If you approach the problem incorrectly, i.e. write whatever you want with no structure and say it&#39;s &quot;your approach&quot; - it doesn&#39;t make it right though.  &quot;Right&quot; and &quot;wrong&quot;, of course, being used as terms to describe good software development practices such as SOLID and other principles, versus bad software practices such as &quot;I just want it like this for now&quot; and similar."},{"owner":{"reputation":6211,"user_id":3244185,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ocJBK.jpg?s=128&g=1","display_name":"Harshal Patil","link":"https://stackoverflow.com/users/3244185/harshal-patil"},"edited":false,"score":0,"creation_date":1543664461,"post_id":22628498,"comment_id":94005464,"content_license":"CC BY-SA 4.0","body":"@milosmnsI agree. It depends on the developer&#39;s approach."},{"owner":{"reputation":3437,"user_id":1039774,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/e98163c769e5dc8243bfef700edded42?s=128&d=identicon&r=PG","display_name":"Devabc","link":"https://stackoverflow.com/users/1039774/devabc"},"edited":false,"score":0,"creation_date":1547592050,"post_id":22628498,"comment_id":95242438,"content_license":"CC BY-SA 4.0","body":"@HarshalPatil If your answer is an approach than it would be good if you mention that explicitly in the StackOverflow answer. Now it looks like a definition instead of an approach. Btw, Spring is also mentioning DDD when it comes to Spring Services: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Service.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"}],"owner":{"reputation":6211,"user_id":3244185,"user_type":"registered","profile_image":"https://i.stack.imgur.com/ocJBK.jpg?s=128&g=1","display_name":"Harshal Patil","link":"https://stackoverflow.com/users/3244185/harshal-patil"},"comment_count":7,"is_accepted":false,"score":230,"last_activity_date":1523395723,"last_edit_date":1523395723,"creation_date":1395734401,"answer_id":22628498,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>In Spring <code>@Component</code>, <code>@Service</code>, <code>@Controller</code>, and <code>@Repository</code> are Stereotype annotations which are used for:</p>\n\n<p><code>@Controller:</code> where your <strong>request</strong> <strong>mapping from presentation page</strong> done i.e. Presentation layer won't go to any other file it goes directly to <code>@Controller</code> class and checks for requested path in <code>@RequestMapping</code> annotation which written before method calls if necessary.</p>\n\n<p><code>@Service</code>: All business logic is here i.e. Data related calculations and all.This annotation of business layer in which our user not directly call persistence method so it will call this method using this annotation. <strong>It will request @Repository as per user request</strong></p>\n\n<p><code>@Repository</code>: This is Persistence layer(Data Access Layer) of application which used to get data from the database. i.e. <strong>all the Database related operations are done by the repository.</strong></p>\n\n<p><code>@Component</code> - Annotate your other components (for example REST resource classes) with a component stereotype.</p>\n\n<blockquote>\n  <p>Indicates that an annotated class is a \"<a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\">component</a>\". Such classes are\n  considered as candidates for auto-detection when using\n  annotation-based configuration and classpath scanning.</p>\n  \n  <p>Other class-level annotations may be considered as identifying a\n  component as well, typically a special kind of component: e.g. the\n  @Repository annotation or AspectJ's @Aspect annotation.</p>\n</blockquote>\n\n<p><a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nXfyV.jpg\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"reputation":1073,"user_id":3170609,"user_type":"registered","accept_rate":32,"profile_image":"https://www.gravatar.com/avatar/926567e804e68978e812749378a66d64?s=128&d=identicon&r=PG&f=1","display_name":"user107986","link":"https://stackoverflow.com/users/3170609/user107986"},"edited":false,"score":9,"creation_date":1441538962,"post_id":23821409,"comment_id":52711429,"content_license":"CC BY-SA 3.0","body":"I got a fundamental question - are annotations used by spring mechanism or they are just for the programmer to remember what those pieces of code do?"},{"owner":{"reputation":5695,"user_id":1984049,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/ruHJK.jpg?s=128&g=1","display_name":"Oliver","link":"https://stackoverflow.com/users/1984049/oliver"},"reply_to_user":{"reputation":1073,"user_id":3170609,"user_type":"registered","accept_rate":32,"profile_image":"https://www.gravatar.com/avatar/926567e804e68978e812749378a66d64?s=128&d=identicon&r=PG&f=1","display_name":"user107986","link":"https://stackoverflow.com/users/3170609/user107986"},"edited":false,"score":28,"creation_date":1441975079,"post_id":23821409,"comment_id":52904986,"content_license":"CC BY-SA 3.0","body":"@user107986 They are mainly for the Programmer to remember layers in the application. However <code>@Respository</code> also has automatic exception translation feature. Like when an exception occurs in a <code>@Repository</code> there is usually a handler for that exception and there is no need to add try catch blocks in the DAO class. It is used along with PersistenceExceptionTranslationPostProcessor"},{"owner":{"reputation":398,"user_id":4044412,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b35a668f4d5925bd63d4fd5475ad9d5c?s=128&d=identicon&r=PG&f=1","display_name":"Moni","link":"https://stackoverflow.com/users/4044412/moni"},"edited":false,"score":0,"creation_date":1454104504,"post_id":23821409,"comment_id":57911311,"content_license":"CC BY-SA 3.0","body":"can you please write a sample code how to write a Joint points for all the &quot;@Repository&quot; class. Either we use expressions or use bean name but how we can say this advice will apply on all the &quot;@Repository&quot; classes.I was trying to get the sample of this but not able to find.Your help is really appreciated."},{"owner":{"reputation":599,"user_id":2033761,"user_type":"registered","accept_rate":64,"profile_image":"https://i.stack.imgur.com/svYSa.jpg?s=128&g=1","display_name":"codecitrus","link":"https://stackoverflow.com/users/2033761/codecitrus"},"edited":false,"score":0,"creation_date":1491786324,"post_id":23821409,"comment_id":73692009,"content_license":"CC BY-SA 3.0","body":"Also, while the annotations all currently work the same functionally, it is possible that specific functionality for a given attribute might be added in the future."}],"owner":{"reputation":5695,"user_id":1984049,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/ruHJK.jpg?s=128&g=1","display_name":"Oliver","link":"https://stackoverflow.com/users/1984049/oliver"},"comment_count":4,"is_accepted":false,"score":394,"last_activity_date":1589309333,"last_edit_date":1589309333,"creation_date":1400822142,"answer_id":23821409,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>@Component is equivalent to </p>\n\n<pre><code>&lt;bean&gt;\n</code></pre>\n\n<p><strong>@Service, @Controller, @Repository = {@Component + some more special functionality}</strong></p>\n\n<p>That mean Service, The Controller and Repository are functionally the same. </p>\n\n<p>The three annotations are used to separate <strong>\"Layers\"</strong> in your application, </p>\n\n<ul>\n<li>Controllers just do stuff like dispatching, forwarding, calling service methods etc.</li>\n<li>Service Hold business Logic, Calculations etc.</li>\n<li>Repository are the DAOs (Data Access Objects), they access the database directly.</li>\n</ul>\n\n<p>Now you may ask why separate them: (I assume you know AOP-Aspect Oriented Programming) </p>\n\n<p>Let's say you want to Monitors the Activity of the DAO Layer only. You will write an Aspect (A class) class that does some logging before and after every method of your DAO is invoked, you are able to do that using AOP as you have three distinct Layers and are not mixed.</p>\n\n<p>So you can do logging of DAO  \"around\", \"before\" or \"after\" the DAO methods. You could do that because you had a DAO in the first place. What you just achieved is <strong>Separation of concerns or tasks.</strong></p>\n\n<p>Imagine if there were only one annotation @Controller, then this component will have dispatching, business logic and accessing database all mixed, so dirty code!</p>\n\n<p><em>Above mentioned is one very common scenario, there are many more use cases of why to use three annotations.</em></p>\n"},{"owner":{"reputation":4401,"user_id":1245337,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/rQev9.jpg?s=128&g=1","display_name":"atish shimpi","link":"https://stackoverflow.com/users/1245337/atish-shimpi"},"comment_count":0,"is_accepted":false,"score":29,"last_activity_date":1405682581,"creation_date":1405682581,"answer_id":24823877,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p><strong>@Repository</strong> <strong>@Service</strong> and <strong>@Controller</strong> are serves as specialization of @Component for more specific use on that basis you can replace @Service to @Component but in this case you loose the specialization.</p>\n\n<pre><code>1. **@Repository**   - Automatic exception translation in your persistence layer.\n2. **@Service**      - It indicates that the annotated class is providing a business service to other layers within the application.\n</code></pre>\n"},{"owner":{"reputation":525,"user_id":3083363,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/ZnQxw.jpg?s=128&g=1","display_name":"Anil Amane","link":"https://stackoverflow.com/users/3083363/anil-amane"},"comment_count":0,"is_accepted":false,"score":28,"last_activity_date":1491192386,"last_edit_date":1491192386,"creation_date":1429978768,"answer_id":29867697,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>all these annotations are type of stereo type type of annotation,the difference between these three annotations are </p>\n\n<blockquote>\n  <ul>\n  <li>If we add the @Component then it tells the role of class is a component class it means it is a class consisting some logic,but it\n  does not tell whether a class containing a specifically business or\n  persistence or controller logic so we don't use directly this\n  @Component annotation</li>\n  <li>If we add @Service annotation then it tells that a role of class consisting business logic</li>\n  <li>If we add @Repository on top of class then it tells that a class consisting persistence logic</li>\n  <li>Here @Component is a base annotation for @Service,@Repository and @Controller annotations</li>\n  </ul>\n</blockquote>\n\n<p>for example </p>\n\n<pre><code>package com.spring.anno;\n@Service\npublic class TestBean\n{\n    public void m1()\n    {\n       //business code\n    }\n}\n\npackage com.spring.anno;\n@Repository\npublic class TestBean\n{\n    public void update()\n    {\n       //persistence code\n    }\n}\n</code></pre>\n\n<ul>\n<li>whenever we adds the <code>@Service</code> or <code>@Repositroy</code> or <code>@Controller</code> annotation by default <code>@Component</code> annotation is going to existence on top of the class</li>\n</ul>\n"},{"owner":{"reputation":536,"user_id":5426099,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7e5bdef46ce67ddf4577d16100151d12?s=128&d=identicon&r=PG&f=1","display_name":"tech.yenduri","link":"https://stackoverflow.com/users/5426099/tech-yenduri"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1576454956,"last_edit_date":1576454956,"creation_date":1448514633,"answer_id":33931001,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>There is no difference between <code>@Component</code>, <code>@Service</code>, <code>@Controller</code>, <code>@Repository</code>.\n<code>@Component</code> is the Generic annotation to represent the component of our MVC. But there will be several components as part of our MVC application like service layer components, persistence layer components and presentation layer components. So to differentiate them Spring people have given the other three annotations also.</p>\n\n<ul>\n<li>To represent persistence layer components: <code>@Repository</code></li>\n<li>To represent service layer components: <code>@Service</code></li>\n<li>To represent presentation layer components: <code>@Controller</code></li>\n<li>or else you can use <code>@Component</code> for all of them.</li>\n</ul>\n"},{"owner":{"reputation":301,"user_id":1392352,"user_type":"registered","profile_image":"https://i.stack.imgur.com/3QVFY.png?s=128&g=1","display_name":"hardeep thakur","link":"https://stackoverflow.com/users/1392352/hardeep-thakur"},"comment_count":0,"is_accepted":false,"score":25,"last_activity_date":1529180636,"last_edit_date":1529180636,"creation_date":1451797848,"answer_id":34573538,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>Spring provides four different types of auto component scan annotations, they are <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> and <code>@Controller</code>. Technically, there is no difference between them, but every auto component scan annotation should be used for a special purpose and within the defined layer. </p>\n\n<p><code>@Component</code>: It is a basic auto component scan annotation, it indicates annotated class is an auto scan component.</p>\n\n<p><code>@Controller</code>: Annotated class indicates that it is a controller component, and mainly used at the presentation layer.</p>\n\n<p><code>@Service</code>: It indicates annotated class is a Service component in the business layer.</p>\n\n<p><code>@Repository</code>: You need to use this annotation within the persistence layer, this acts like database repository.</p>\n\n<p>One should choose a more specialised form of <code>@Component</code> while annotating their class as this annotation may contain specific behavior going forward.</p>\n"},{"comments":[{"owner":{"reputation":749,"user_id":7778972,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-TwbDcuULkWA/AAAAAAAAAAI/AAAAAAAAGxU/KLydkW0KpHQ/photo.jpg?sz=128","display_name":"Rahul Gupta","link":"https://stackoverflow.com/users/7778972/rahul-gupta"},"edited":false,"score":0,"creation_date":1535096697,"post_id":37018430,"comment_id":90948457,"content_license":"CC BY-SA 4.0","body":"Regarding your 3rd point. That&#39;s not true. I can add @RequestMapping annotation even to methods under service class as well(I mean classes annotated with @Service)."}],"owner":{"reputation":32609,"user_id":2648077,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/fd10f51a1b9acf80448616c0a03cd261?s=128&d=identicon&r=PG&f=1","display_name":"Alireza Fattahi","link":"https://stackoverflow.com/users/2648077/alireza-fattahi"},"comment_count":1,"is_accepted":false,"score":21,"last_activity_date":1529179708,"last_edit_date":1529179708,"creation_date":1462335824,"answer_id":37018430,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>We can answer this according to java standard</p>\n\n<p>Referring to <code>JSR-330</code>, which is now supported by spring, you can only use <code>@Named</code> to define a bean (Somehow <code>@Named=@Component</code>). So according to this standard, there seems that there is no use to define stereotypes (like <code>@Repository</code>, <code>@Service</code>, <code>@Controller</code>) to categories beans. </p>\n\n<p>But spring user these different annotations in different for the specific use, for example: </p>\n\n<ol>\n<li>Help developers define a better category for the competent. This categorizing may become helpful in some cases. (For example when you are using <code>aspect-oriented</code>, these can be a good candidate for <code>pointcuts</code>)</li>\n<li><code>@Repository</code> annotation will add some functionality to your bean (some automatic exception translation to your bean persistence layer).</li>\n<li>If you are using spring MVC, the <code>@RequestMapping</code> can only be added to classes which are annotated by <code>@Controller</code>.</li>\n</ol>\n"},{"owner":{"reputation":678,"user_id":5167492,"user_type":"registered","accept_rate":81,"profile_image":"https://graph.facebook.com/426050827586525/picture?type=large","display_name":"Quan Nguyen","link":"https://stackoverflow.com/users/5167492/quan-nguyen"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1466426342,"last_edit_date":1466426342,"creation_date":1466415023,"answer_id":37918997,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>In Spring 4, latest version:</p>\n\n<blockquote>\n  <p>The @Repository annotation is a marker for any class that fulfills the\n  role or stereotype of a repository (also known as Data Access Object\n  or DAO). Among the uses of this marker is the automatic translation of\n  exceptions as described in Section 20.2.2, âException translationâ.</p>\n  \n  <p>Spring provides further stereotype annotations: @Component, @Service,\n  and @Controller. @Component is a generic stereotype for any\n  Spring-managed component. @Repository, @Service, and @Controller are\n  specializations of @Component for more specific use cases, for\n  example, in the persistence, service, and presentation layers,\n  respectively. Therefore, you can annotate your component classes with\n  @Component, but by annotating them with @Repository, @Service, or\n  @Controller instead, your classes are more properly suited for\n  processing by tools or associating with aspects. For example, these\n  stereotype annotations make ideal targets for pointcuts. It is also\n  possible that @Repository, @Service, and @Controller may carry\n  additional semantics in future releases of the Spring Framework. Thus,\n  if you are choosing between using @Component or @Service for your\n  service layer, @Service is clearly the better choice. Similarly, as\n  stated above, @Repository is already supported as a marker for\n  automatic exception translation in your persistence layer.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":3055,"user_id":1448509,"user_type":"registered","accept_rate":38,"profile_image":"https://www.gravatar.com/avatar/621f32ebd7d46fb2cd89d656cb232e95?s=128&d=identicon&r=PG","display_name":"Olga","link":"https://stackoverflow.com/users/1448509/olga"},"edited":false,"score":0,"creation_date":1495439346,"post_id":38549461,"comment_id":75234387,"content_license":"CC BY-SA 3.0","body":"&#39;PersistenceExceptionTranslationPostProcessor&#39; will be automatically registered if JPA is detected."},{"owner":{"reputation":315,"user_id":6891873,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/36cc6f7e6fa12e635d3f5ad2773c240c?s=128&d=identicon&r=PG&f=1","display_name":"NodziGames","link":"https://stackoverflow.com/users/6891873/nodzigames"},"edited":false,"score":31,"creation_date":1530086741,"post_id":38549461,"comment_id":89105490,"content_license":"CC BY-SA 4.0","body":"Fantastic Explanation. You&#39;ve cleared up a lot of my misunderstandings. Coming from a university where we built all our projects from the bottom up, I had difficulty understanding why Spring Applications just worked even though you&#39;re not explicitly linking the program together yourself. The annotations make a lot of sense now, thank you!"},{"owner":{"reputation":2007,"user_id":4720910,"user_type":"registered","profile_image":"https://i.stack.imgur.com/DHew5.jpg?s=128&g=1","display_name":"Musa","link":"https://stackoverflow.com/users/4720910/musa"},"edited":false,"score":0,"creation_date":1532700727,"post_id":38549461,"comment_id":90086399,"content_license":"CC BY-SA 4.0","body":"Then what @Service annotation means for Hibernate(Persistence Layer), besides DI feature what about Persistence Layer Proxy for Fetching and Mapping some sort of Entity to respective DTO? This layer is very important for dynamism in Persistence layer. If somebody knows deeply how it affects to JPA it would be very very helpful)))"},{"owner":{"reputation":3608,"user_id":758991,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/8b8a49d5233ea23bef3a41060a129b4c?s=128&d=identicon&r=PG","display_name":"Ruslan Stelmachenko","link":"https://stackoverflow.com/users/758991/ruslan-stelmachenko"},"edited":false,"score":1,"creation_date":1558232470,"post_id":38549461,"comment_id":99030621,"content_license":"CC BY-SA 4.0","body":"There is some small misinformation about <code>@Controller</code> annotation. It is not required if class is annotated with <code>@RequestMapping</code> and bean of this class is created in any way. Any bean annotated with <code>@Controller</code> <b>OR</b> <code>@RequestMapping</code> will participate in Spring MVC&#39;s request mappings. This can be useful for instance to create controllers programmatically (e.g. using <code>@Bean</code> methods) and at the same time to prevent Spring trying to create them by package scan (if package can&#39;t be excluded from scanning)."},{"owner":{"reputation":24255,"user_id":2815219,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d10432298a6eacf6be2f263d8fc3776b?s=128&d=identicon&r=PG","display_name":"Raman Sahasi","link":"https://stackoverflow.com/users/2815219/raman-sahasi"},"reply_to_user":{"reputation":3608,"user_id":758991,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/8b8a49d5233ea23bef3a41060a129b4c?s=128&d=identicon&r=PG","display_name":"Ruslan Stelmachenko","link":"https://stackoverflow.com/users/758991/ruslan-stelmachenko"},"edited":false,"score":0,"creation_date":1558520407,"post_id":38549461,"comment_id":99126026,"content_license":"CC BY-SA 4.0","body":"@RuslanStelmachenko You make a very good point. However my point was that if <code>@RequestMapping</code> annotation is at method level, then in order to pick it up, the class has to be annotated with <code>@Controller</code> annotation otherwise it won&#39;t be picked up. Although there is a workaround that if the class is registered as a bean, then in order to facilitate registering of <code>@RequestMapping</code> annotation, we have to annotate the class also with <code>@RequestMapping</code>. Anyways, thanks for bringing it up, I&#39;ve added a small note in that point."},{"owner":{"reputation":3608,"user_id":758991,"user_type":"registered","accept_rate":55,"profile_image":"https://www.gravatar.com/avatar/8b8a49d5233ea23bef3a41060a129b4c?s=128&d=identicon&r=PG","display_name":"Ruslan Stelmachenko","link":"https://stackoverflow.com/users/758991/ruslan-stelmachenko"},"edited":false,"score":0,"creation_date":1558538715,"post_id":38549461,"comment_id":99137045,"content_license":"CC BY-SA 4.0","body":"@RamanSahasi You are right, I just mention that sentence &quot;We can use <code>@RequestMapping</code> on/in only those methods whose classes are annotated with <code>@Controller</code>&quot; is not totally true because of reasons described above (there is one exception to this rule). Thanks you to mention this in the answer. It is really GOOD explanation for sure."},{"owner":{"reputation":3102,"user_id":3886961,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/772368ba3e38aa724fc0a4da29e977fe?s=128&d=identicon&r=PG&f=1","display_name":"kiedysktos","link":"https://stackoverflow.com/users/3886961/kiedysktos"},"edited":false,"score":3,"creation_date":1581501867,"post_id":38549461,"comment_id":106452603,"content_license":"CC BY-SA 4.0","body":"this should be top voted answer - answers all questions and goes quite deep. @stivlo didn&#39;t explain much about first OP question - technical differences."}],"owner":{"reputation":24255,"user_id":2815219,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d10432298a6eacf6be2f263d8fc3776b?s=128&d=identicon&r=PG","display_name":"Raman Sahasi","link":"https://stackoverflow.com/users/2815219/raman-sahasi"},"comment_count":7,"is_accepted":false,"score":859,"last_activity_date":1558599219,"last_edit_date":1558599219,"creation_date":1469342603,"answer_id":38549461,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>As many of the answers already state what these annotations are used for, we'll here focus on some minor differences among them.  </p>\n\n<blockquote>\n  <p>First the <strong>Similarity</strong>   </p>\n  \n  <p>First point worth highlighting again is that <strong>with respect to scan-auto-detection and dependency injection for BeanDefinition</strong> all these annotations (viz., @Component, @Service,\n  @Repository, @Controller) are the same. <strong>We can use one in place\n  of another and can still get our way around.</strong></p>\n</blockquote>\n\n<hr>\n\n<h2>Differences between @Component, @Repository, @Controller and @Service</h2>\n\n<blockquote>\n  <p><strong>@Component</strong></p>\n</blockquote>\n\n<p>This is a general-purpose stereotype annotation indicating that the class is a spring component.</p>\n\n<p><strong><em>Whatâs special about @Component</em></strong><br>\n<code>&lt;context:component-scan&gt;</code> only scans <code>@Component</code> and does not look for <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> in general. They are scanned because they themselves are annotated with <code>@Component</code>.</p>\n\n<p>Just take a look at <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> annotation definitions:</p>\n\n<pre><code>@Component\npublic @interface Service {\n    â¦.\n}\n</code></pre>\n\n<p>Â </p>\n\n<pre><code>@Component\npublic @interface Repository {\n    â¦.\n}\n</code></pre>\n\n<p>Â </p>\n\n<pre><code>@Component\npublic @interface Controller {\n    â¦\n}\n</code></pre>\n\n<p>Thus, itâs not wrong to say that <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> are special types of <code>@Component</code> annotation. <code>&lt;context:component-scan&gt;</code> picks them up and registers their following classes as beans, just as if they were annotated with <code>@Component</code>.</p>\n\n<p>Special type annotations are also scanned, because they themselves are annotated with <code>@Component</code> annotation, which means they are also <code>@Component</code>s. If we define our own custom annotation and annotate it with <code>@Component</code>, it will also get scanned with <code>&lt;context:component-scan&gt;</code></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Repository</strong></p>\n</blockquote>\n\n<p>This is to indicate that the class defines a data repository.</p>\n\n<p><strong><em>Whatâs special about @Repository?</em></strong>  </p>\n\n<p>In addition to pointing out, that this is an <em>Annotation based Configuration</em>, <code>@Repository</code>âs job is to catch platform specific exceptions and re-throw them as one of Springâs unified unchecked exception. For this, weâre provided with <code>PersistenceExceptionTranslationPostProcessor</code>, that we are required to add in our Springâs application context like this:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt;\n</code></pre>\n\n<p>This bean post processor adds an advisor to any bean thatâs annotated with <code>@Repository</code> so that any platform-specific exceptions are caught and then re-thrown as one of Springâs unchecked data access exceptions.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Controller</strong></p>\n</blockquote>\n\n<p>The <code>@Controller</code> annotation indicates that a particular class serves the role of a controller. The <code>@Controller</code> annotation acts as a stereotype for the annotated class, indicating its role.</p>\n\n<p><strong><em>Whatâs special about @Controller?</em></strong>  </p>\n\n<p>We cannot switch this annotation with any other like <code>@Service</code> or <code>@Repository</code>, even though they look same. \nThe dispatcher scans the classes annotated with <code>@Controller</code> and detects methods annotated with <code>@RequestMapping</code> annotations within them. We can use <code>@RequestMapping</code> on/in only those methods whose classes are annotated with <code>@Controller</code> and it will <strong>NOT</strong> work with <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> etc...</p>\n\n<p><sub><em>Note: If a class is already registered as a bean through any alternate method, like through <code>@Bean</code> or through <code>@Component</code>, <code>@Service</code> etc... annotations, then <code>@RequestMapping</code> can be picked if the class is also annotated with <code>@RequestMapping</code> annotation. But that's a different scenario.</em></sub></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Service</strong></p>\n</blockquote>\n\n<p><code>@Service</code> beans hold the business logic and call methods in the repository layer. </p>\n\n<p><strong><em>Whatâs special about @Service?</em></strong>  </p>\n\n<p>Apart from the fact that it's used to indicate, that it's holding the business logic, thereâs nothing else noticeable in this annotation; but who knows, Spring may add some additional exceptional in future.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong><em>What else?</em></strong></p>\n</blockquote>\n\n<p>Similar to above, in the future Spring may add special functionalities for <code>@Service</code>, <code>@Controller</code> and <code>@Repository</code> based on their layering conventions. Hence, it's always a good idea to respect the convention and use it in line with layers.</p>\n"},{"owner":{"reputation":513,"user_id":3912516,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/0WD1E.png?s=128&g=1","display_name":"Amol Dixit","link":"https://stackoverflow.com/users/3912516/amol-dixit"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1499448363,"last_edit_date":1499448363,"creation_date":1482311530,"answer_id":41258961,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p><code>@Component</code> is the top level generic annotation which makes the annotated bean to be scanned and available in the DI container</p>\n\n<p><code>@Repository</code> is specialized annotation and it brings the feature of converting all the unchecked exceptions from the DAO classes</p>\n\n<p><code>@Service</code> is specialized annotation. it do not bring any new feature as of now but it clarifies the intent of the bean</p>\n\n<p>@Controller is specialized annotation which makes the bean MVC aware and allows the use of further annotation like <code>@RequestMapping</code> and all such</p>\n\n<p>Here are more <a href=\"http://howtodoinjava.com/spring/spring-core/how-to-use-spring-component-repository-service-and-controller-annotations/\" rel=\"noreferrer\">details</a></p>\n"},{"owner":{"reputation":1629,"user_id":992706,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/c4157893cac7f2758cdce7f48120828e?s=128&d=identicon&r=PG","display_name":"Bharath","link":"https://stackoverflow.com/users/992706/bharath"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1482913139,"creation_date":1482913139,"answer_id":41358034,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p>A <code>@Service</code> to quote spring documentation,</p>\n\n<blockquote>\n  <p>Indicates that an annotated class is a \"Service\", <strong>originally defined\n  by Domain-Driven Design (Evans, 2003) as \"an operation offered as an\n  interface that stands alone in the model, with no encapsulated state.\"</strong>\n  May also indicate that a class is a \"Business Service Facade\" (in the\n  Core J2EE patterns sense), or something similar. This annotation is a\n  general-purpose stereotype and individual teams may narrow their\n  semantics and use as appropriate.</p>\n</blockquote>\n\n<p>If you look at domain driven design by eric evans, </p>\n\n<blockquote>\n  <p>A SERVICE is an operation offered as an interface that stands alone in\n  the model, without encapsulating state, as ENTITIES and VALUE OBJECTS\n  do. SERVICES are a common pattern in technical frameworks, but they\n  can also apply in the domain layer. The name service emphasizes the\n  relationship with other objects. Unlike ENTITIES and VALUE OBJECTS, it\n  is defined purely in terms of what it can do for a client. A SERVICE\n  tends to be named for an activity, rather than an entityâa verb rather\n  than a noun. A SERVICE can still have an abstract, intentional\n  definition; it just has a different flavor than the definition of an\n  object. A SERVICE should still have a defined responsibility, and that\n  responsibility and the interface fulfilling it should be defined as\n  part of the domain model. Operation names should come from the\n  UBIQUITOUS LANGUAGE or be introduced into it. Parameters and results\n  should be domain objects. SERVICES should be used judiciously and not\n  allowed to strip the ENTITIES and VALUE OBJECTS of all their behavior.\n  But when an operation is actually an important domain concept, a\n  SERVICE forms a natural part of a MODEL-DRIVEN DESIGN. Declared in the\n  model as a SERVICE, rather than as a phony object that doesn't\n  actually represent anything, the standalone operation will not mislead\n  anyone. </p>\n</blockquote>\n\n<p>and a <code>Repository</code> as per Eric Evans,</p>\n\n<blockquote>\n  <p>A REPOSITORY represents all objects of a certain type as a conceptual\n  set (usually emulated). It acts like a collection, except with more\n  elaborate querying capability. Objects of the appropriate type are\n  added and removed, and the machinery behind the REPOSITORY inserts\n  them or deletes them from the database. This definition gathers a\n  cohesive set of responsibilities for providing access to the roots of\n  AGGREGATES from early life cycle through the end.</p>\n</blockquote>\n"},{"comments":[{"owner":{"reputation":1449,"user_id":6440372,"user_type":"registered","profile_image":"https://graph.facebook.com/1554765301494639/picture?type=large","display_name":"Ashish Kamble","link":"https://stackoverflow.com/users/6440372/ashish-kamble"},"edited":false,"score":2,"creation_date":1571316618,"post_id":45347943,"comment_id":103206613,"content_license":"CC BY-SA 4.0","body":"what do you mean by replacing interchanging places? <code>controller and repository</code>"}],"owner":{"reputation":1212,"user_id":5536695,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/462842ef9c0d576967057065b4b962d6?s=128&d=identicon&r=PG&f=1","display_name":"YogendraR","link":"https://stackoverflow.com/users/5536695/yogendrar"},"comment_count":1,"is_accepted":false,"score":50,"last_activity_date":1561010431,"last_edit_date":1561010431,"creation_date":1501150832,"answer_id":45347943,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>Technically <code>@Controller</code>, <code>@Service</code>, <code>@Repository</code> are all same. All of them extends <code>@Component</code>.</p>\n\n<p>From the Spring source code:</p>\n\n<p>Indicates that an annotated class is a \"component\". Such classes are considered as candidates for auto-detection when using annotation-based configuration and classpath scanning.</p>\n\n<p>We can directly use <code>@Component</code> for each and every bean, but for better understanding and maintainability of a large application, we use <code>@Controller</code>, <code>@Service</code>, <code>@Repository</code>.</p>\n\n<p>Purpose of each annotation:</p>\n\n<ol>\n<li><code>@Controller</code> -> Classes annotated with this, are intended to receive a request from the client side. The first request comes to the Dispatcher Servlet, from where it passes the request to the particular controller using the value of <code>@RequestMapping</code> annotation.</li>\n<li><code>@Service</code> -> Classes annotated with this, are intended to manipulate data, that we receive from the client or fetch from the database. All the manipulation with data should be done in this layer.</li>\n<li><code>@Repository</code> -> Classes annotated with this, are intended to connect with database. It can also be considered as DAO(Data Access Object) layer. This layer should be restricted to CRUD (create, retrieve, update, delete) operations only.\nIf any manipulation is required, data should be sent be send back to @Service layer.</li>\n</ol>\n\n<p>If we interchange their place(use <code>@Repository</code> in place of <code>@Controller</code>), our application will work fine.</p>\n\n<p>The main purpose of using three different <code>@annotations</code> is to provide better Modularity to the Enterprise application.</p>\n"},{"owner":{"reputation":1500,"user_id":4334162,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-5tBwtP88Td8/AAAAAAAAAAI/AAAAAAAAAL4/Kljmv21tq9E/photo.jpg?sz=128","display_name":"Arun Raaj","link":"https://stackoverflow.com/users/4334162/arun-raaj"},"comment_count":0,"is_accepted":false,"score":19,"last_activity_date":1576472757,"last_edit_date":1576472757,"creation_date":1510234330,"answer_id":47203202,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p><strong>@Component</strong>: you annotate a class <code>@Component</code>, it tells hibernate that it is a Bean.</p>\n\n<p><strong>@Repository</strong>: you annotate a class <code>@Repository</code>, it tells hibernate it is a DAO class and treat it as DAO class. Means it makes the unchecked exceptions (thrown from DAO methods) eligible for translation into Spring <code>DataAccessException</code>.</p>\n\n<p><strong>@Service</strong>: This tells hibernate it is a Service class where you will have <code>@Transactional</code> etc Service layer annotations so hibernate treats it as a Service component.</p>\n\n<p>Plus <code>@Service</code> is advance of <code>@Component</code>. Assume the bean class name is <code>CustomerService</code>, since you did not choose XML bean configuration way so you annotated the bean with <code>@Component</code> to indicate it as a Bean. So while getting the bean object <code>CustomerService cust = (CustomerService)context.getBean(\"customerService\");</code> By default, Spring will lower case the first character of the component â from âCustomerServiceâ to âcustomerServiceâ. And you can retrieve this component with name âcustomerServiceâ.\nBut if you use <code>@Service</code> annotation for the bean class you can provide a specific bean name by </p>\n\n<pre><code>@Service(\"AAA\")\npublic class CustomerService{\n</code></pre>\n\n<p>and you can get the bean object by </p>\n\n<pre><code>CustomerService cust = (CustomerService)context.getBean(\"AAA\");\n</code></pre>\n"},{"owner":{"reputation":980,"user_id":8450064,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-sUFHZf-glew/AAAAAAAAAAI/AAAAAAAAAJU/DskFo5Z8xZ8/photo.jpg?sz=128","display_name":"Anil Nivargi","link":"https://stackoverflow.com/users/8450064/anil-nivargi"},"comment_count":0,"is_accepted":false,"score":21,"last_activity_date":1514878950,"last_edit_date":1592644375,"creation_date":1511376123,"answer_id":47441820,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>Annotate other components with @Component, for example REST Resource classes.</p>\n<pre><code>@Component\npublic class AdressComp{\n    .......\n    ...//some code here    \n}\n</code></pre>\n<p>@Component is a generic stereotype for any Spring managed component.</p>\n<p>@Controller, @Service and @Repository are Specializations of @Component for specific use cases.</p>\n<h3>@Component in Spring</h3>\n<p><a href=\"https://i.stack.imgur.com/FFIdh.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FFIdh.png\" alt=\"&quot;Component Specialization&quot;\" /></a></p>\n"},{"owner":{"reputation":5823,"user_id":1194067,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/ODFpP.jpg?s=128&g=1","display_name":"Jeevan Patil","link":"https://stackoverflow.com/users/1194067/jeevan-patil"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1521615785,"creation_date":1521615785,"answer_id":49400133,"question_id":6827752,"content_license":"CC BY-SA 3.0","body":"<p><strong>Explanation of stereotypes :</strong> </p>\n\n<ul>\n<li><code>@Service</code> - Annotate all your service classes with @Service. This layer knows the unit of work. All your business logic will be in Service classes. Generally methods of service layer are covered under transaction. You can make multiple DAO calls from service method, if one transaction fails all transactions should rollback.</li>\n<li><code>@Repository</code> - Annotate all your DAO classes with @Repository. All your database access logic should be in DAO classes.</li>\n<li><code>@Component</code> - Annotate your other components (for example REST resource classes) with component stereotype.</li>\n<li><code>@Autowired</code> - Let Spring auto-wire other beans into your classes using @Autowired annotation. </li>\n</ul>\n\n<p><code>@Component</code> is a generic stereotype for any Spring-managed component. <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are specializations of <code>@Component</code> for more specific use cases, for example, in the persistence, service, and presentation layers, respectively. </p>\n\n<p>Originally answered <a href=\"https://stackoverflow.com/questions/16051656/advantages-of-using-spring-stereotypes/16105106#16105106\">here</a>.</p>\n"},{"owner":{"reputation":475,"user_id":9112160,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/02d01bb0489ca0dcfb3cf4d3a0a5d505?s=128&d=identicon&r=PG","display_name":"UHDante","link":"https://stackoverflow.com/users/9112160/uhdante"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1588880493,"last_edit_date":1588880493,"creation_date":1529539817,"answer_id":50958679,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p><code>@Component</code>, <code>@ Repository</code>, <code>@ Service</code>, <code>@Controller</code>:</p>\n\n<p><code>@Component</code> is a generic stereotype for the components managed by Spring <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are <code>@Component</code> specializations for more specific uses:</p>\n\n<ul>\n<li><code>@Repository</code> for persistence</li>\n<li><code>@Service</code> for services and transactions</li>\n<li><code>@Controller</code> for MVC controllers</li>\n</ul>\n\n<p>Why use <code>@Repository</code>, <code>@Service</code>, <code>@Controller</code> over <code>@Component</code>?\nWe can mark our component classes with @Component, but if instead we use the alternative that adapts to the expected functionality. Our classes are better suited to the functionality expected in each particular case.</p>\n\n<p>A class annotated with <code>@Repository</code> has a better translation and readable error handling with org.springframework.dao.DataAccessException. Ideal for implementing components that access data (DataAccessObject or DAO).</p>\n\n<p>An annotated class with <code>@Controller</code> plays a controller role in a Spring Web MVC application</p>\n\n<p>An annotated class with <code>@Service</code> plays a role in business logic services, example Facade pattern for DAO Manager (Facade) and transaction handling</p>\n"},{"owner":{"reputation":1217,"user_id":3950690,"user_type":"registered","profile_image":"https://i.stack.imgur.com/pGASh.png?s=128&g=1","display_name":"Brajesh","link":"https://stackoverflow.com/users/3950690/brajesh"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1530817917,"creation_date":1530817917,"answer_id":51198370,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>In spring framework provides some special type of annotations,called stereotype annotations.\nThese are following:-</p>\n\n<pre><code>@RestController- Declare at controller level.\n@Controller â Declare at controller level.\n@Component â Declare at Bean/entity level.\n@Repository â Declare at DAO level.\n@Service â Declare at BO level.\n</code></pre>\n\n<p>above declared annotations are special because when we add <code>&lt;context:component-scan&gt;</code> into xxx-servlet.xml file ,spring will automatically create the object of those classes which are annotated with above annotation during context creation/loading phase.</p>\n"},{"owner":{"reputation":75,"user_id":9609300,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/87c141f7644c790e1ec31107d0d89f49?s=128&d=identicon&r=PG&f=1","display_name":"siddartha kamble","link":"https://stackoverflow.com/users/9609300/siddartha-kamble"},"comment_count":0,"is_accepted":false,"score":-15,"last_activity_date":1575042303,"last_edit_date":1575042303,"creation_date":1535568380,"answer_id":52084238,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<pre><code>@Component\n@Controller\n@Repository\n@Service\n@RestController\n</code></pre>\n\n<p>These are all StereoType annotations.this are usefull for the making our classes as spring beans in ioc container, </p>\n"},{"owner":{"reputation":161,"user_id":8411174,"user_type":"registered","profile_image":"https://graph.facebook.com/1341521072627028/picture?type=large","display_name":"Maria Pomazkina-Karpikova","link":"https://stackoverflow.com/users/8411174/maria-pomazkina-karpikova"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1538533964,"creation_date":1538533964,"answer_id":52618927,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p><em>Repository</em> and <em>Service</em> are children of <em>Component</em> annotation. So, all of them are <em>Component</em>. <em>Repository</em> and <em>Service</em> just expand it. \nHow exactly?\n<em>Service</em> has only ideological difference: we use it for services. <em>Repository</em> has particular exception handler.</p>\n"},{"owner":{"reputation":820,"user_id":4177869,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/CilJt.jpg?s=128&g=1","display_name":"Mohamed Sweelam","link":"https://stackoverflow.com/users/4177869/mohamed-sweelam"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1556655712,"creation_date":1556655712,"answer_id":55928163,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>In order to simplify this illustration, let us consider technicality by use case, These annotations are used to be injected and as I said literally \"<em>Used to be injected</em>\" , that mean, if you know how to use <strong>Dependency Injection \"DI\"</strong>  and you should, then you will always look for these annotations, and by annotating the classes with these <strong>Stereo Types</strong>, you are informing the <em>DI</em> container to scan them to be ready for Injection on other places, this is the practical target.</p>\n\n<p>Now lets move to each one; first <strong>@Service</strong>, If you are building some logic for specific business case you need to separate that in a place which will contain your business logic, this service is normal Class or you can use it as interface if you want , and it is written like this </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class Doer {\n   // Your logic \n}\n\n// To use it in another class, suppose in Controller \n@Controller\npublic class XController {\n // You have to inject it like this \n @Autowired \n private Doer doer;\n}\n</code></pre>\n\n<p>All are the same way when you inject them, <strong>@Repository</strong> it's an interface which apply the implementation for the Repository Pattern <a href=\"https://stackoverflow.com/questions/5166888/repository-design-pattern\">Repository design pattern</a>, generally it's used when you are dealing with some data store or database, and you will find that, it contains multiple ready implementation for you to handle database operations; it can be  <em>CrudRepository</em>, <em>JpaRepository</em> etc.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// For example\npublic interface DoerRepository implements JpaRepository&lt;Long, XEntity&gt; {}\n</code></pre>\n\n<p>Finally the <strong>@Component</strong>, this is the generic form for registered beans in Spring, that's spring is always looking for bean marked with @Component to be registered, then both @Service and @Repository are special cases of @Component, however the common use case for component is when you're making something purely technical not for covering direct business case! like formatting dates or handing special request serialization mechanism and so on.</p>\n"},{"owner":{"reputation":8590,"user_id":10961238,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-1Tz8-GsqpuU/AAAAAAAAAAI/AAAAAAAAAaQ/xTj_-pz1PhI/photo.jpg?sz=128","display_name":"Patel Romil","link":"https://stackoverflow.com/users/10961238/patel-romil"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1562224923,"creation_date":1562224923,"answer_id":56882597,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>Good enough answers are here to explain the whats-the-difference-between-component-repository-service-annotations. I would like to share the difference between <code>@Controller &amp; @RestController</code></p>\n\n<h1><strong><code>@Controller</code></strong> vs <strong><code>RestController</code></strong></h1>\n\n<h2><strong><code>@RestController</code></strong>:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/U9mP2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/U9mP2.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li>This annotation is a specialized version of <code>@Controller</code> which adds\n<code>@Controller</code> and <code>@ResponseBody</code> annotation automatically. so we do not have to add <code>@ResponseBody</code> to our mapping methods. That means\n<code>@ResponseBody</code> is default active.</li>\n<li>If you use <code>@RestController</code> you cannot return a view (By using\n<code>Viewresolver</code> in Spring/Spring-Boot)</li>\n<li><code>@RestController</code> also converts the response to <code>JSON/XML automatically</code> as <code>@ResponseBody</code> makes the returned objects to something that could be in the body, <code>e.g. JSON or XML</code> </li>\n</ul>\n\n<hr>\n\n<h2><strong><code>@Controller</code></strong></h2>\n\n<p><a href=\"https://i.stack.imgur.com/BKR7s.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BKR7s.png\" alt=\"enter image description here\"></a></p>\n\n<ul>\n<li><code>@Controller</code> is used to mark classes as Spring MVC Controller. This\nannotation is just a specialized version of <code>@Component</code> and it\nallows the controller classes to be auto-detected based on classpath\nscanning.</li>\n<li><code>@Controller</code> you can return a view in Spring web MVC.</li>\n</ul>\n\n<p><a href=\"https://www.genuitec.com/spring-frameworkrestcontroller-vs-controller/\" rel=\"noreferrer\">More Detailed View</a></p>\n"},{"owner":{"reputation":1931,"user_id":5256337,"user_type":"registered","profile_image":"https://i.stack.imgur.com/d3GFu.jpg?s=128&g=1","display_name":"Lova Chittumuri","link":"https://stackoverflow.com/users/5256337/lova-chittumuri"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1572475880,"last_edit_date":1572475880,"creation_date":1565076350,"answer_id":57370920,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p><strong>Difference between @Component, @Repository, @Controller &amp; @Service annotations</strong></p>\n\n<blockquote>\n  <p>@Component â generic and can be used across application.<br> @Service\n  â annotate classes at service layer level.<br> @Controller â annotate\n  classes at presentation layers level, mainly used in Spring MVC.<br>\n  @Repository â annotate classes at persistence layer, which will act as\n  database repository.</p>\n</blockquote>\n\n<p><code>@Controller</code> = @Component ( Internal Annotation ) + Presentation layer Features <br>\n<code>@Service</code> = @Component ( Internal Annotation ) + Service layer Features<br>\n<code>@Component</code> = Actual Components ( Beans )<br>\n<code>@Repository</code> = @Component ( Internal Annotation ) + Data Layer Features ( use for handling the Domain Beans )<br></p>\n"},{"owner":{"reputation":1531,"user_id":10610826,"user_type":"registered","profile_image":"https://i.stack.imgur.com/lhqqt.png?s=128&g=1","display_name":"Mykhailo Moskura","link":"https://stackoverflow.com/users/10610826/mykhailo-moskura"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1587257408,"creation_date":1587257408,"answer_id":61298214,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p><strong>@Component</strong> acts as @Bean annotation in configuration class , register bean in spring context. Also it is parent for @Service, @Repository and @Controller annotation.</p>\n\n<p><strong>@Service</strong>, extends @Component annotation and has only naming difference.</p>\n\n<p><strong>@Repository</strong> - extends @Component annotation and translate all database exceptions into \n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/DataAccessException.html\" rel=\"nofollow noreferrer\">DataAccessException</a>.</p>\n\n<p><strong>@Controller</strong> - acts as controller in MVC pattern. The dispatcher will scan such annotated classes for mapped methods, detecting @RequestMapping annotations.</p>\n"},{"owner":{"reputation":13029,"user_id":2051454,"user_type":"registered","accept_rate":60,"profile_image":"https://i.stack.imgur.com/sZBFW.jpg?s=128&g=1","display_name":"Software Engineer","link":"https://stackoverflow.com/users/2051454/software-engineer"},"comment_count":0,"is_accepted":false,"score":7,"last_activity_date":1606783371,"last_edit_date":1606783371,"creation_date":1588944349,"answer_id":61680242,"question_id":6827752,"content_license":"CC BY-SA 4.0","body":"<p>The answers presented here are largely technically correct, but even though the response list is long and this will be at the bottom I thought it was worth putting an actually correct response in here too, just in case somebody stumbles upon it and learns something valuable from it. It's not that the rest of the answers are wrong, it's just that they aren't right. And, to stop the hordes of trolls, yes, I know that technically these annotations are effectively the same thing and most interchangeable even unto spring 5. Now, for the right answer:</p>\n<p>These three annotations are completely different things and are not interchangeable. You can tell that because there are three of them rather than just one. They are not intended to be interchangeable, they're just implemented that way out of elegance and convenience.</p>\n<p>Modern programming is invention, art, technique, and communication, in varying proportions. The communication bit is usually very important because code is usually read much more often than its written. As a programmer you're not only trying to solve the technical problem, you're also trying to communicate your intent to future programmers who read your code. These programmers may not share your native language, nor your social environment, and it is possible that they may be reading your code 50-years in the future (it's not as unlikely as you may think). It's difficult to communicate effectively that far into the future. Therefore, it is vital that we use the clearest, most efficient, correct, and communicative language available to us. That we chose our words carefully to have maximum impact and to be as clear as possible as to our intent.</p>\n<p>For example, it is vital that <code>@Repository</code> is used when we're writing a repository, rather than <code>@Component</code>. The latter is a very poor choice of annotation for a repository because it does not indicate that we're looking at a repository. We can assume that a repository is also a spring-bean, but not that a component is a repository. With <code>@Repository</code> we are being clear and specific in our language. We are stating clearly that this is a repository. With <code>@Component</code> we are leaving it to the reader to decide what type of component they are reading, and they will have to read the whole class (and possibly a tree of subclasses and interfaces) to infer meaning. The class could then possibly be misinterpreted by a reader in the distant future as not being a repository, and we would have been partially responsible for this mistake because we, who knew full well that this is a repository, failed to be specific in our language and communicate effectively our intent.</p>\n<p>I won't go into the other examples, but will state as clearly as I can: these annotations are completely different things and should be used appropriately, as per their intent. <code>@Repository</code> is for storage repositories and no other annotation is correct. <code>@Service</code> is for services and no other annotation is correct. <code>@Component</code> is for components that are neither repositories nor services, and to use either of these in its place would also be incorrect. It might compile, it might even run and pass your tests, but it would be wrong and I would think less of you (professionally) if you were to do this.</p>\n<p>There are examples of this throughout spring (and programming in general). You must not use <code>@Controller</code> when writing a REST API, because <code>@RestController</code> is available. You must not use <code>@RequestMapping</code> when <code>@GetMapping</code> is a valid alternative. Etc. Etc. Etc. You <em>must</em> chose the most specific exact and correct language you can to communicate your intent to your readers, otherwise, you are introducing risks into your system, and risk has a cost.</p>\n"}],"owner":{"reputation":22387,"user_id":863084,"user_type":"unregistered","profile_image":"https://www.gravatar.com/avatar/be273143043ed0ff5b55406ac70ff41e?s=128&d=identicon&r=PG","display_name":"Colin McCree","link":"https://stackoverflow.com/users/863084/colin-mccree"},"comment_count":3,"is_answered":true,"view_count":951113,"protected_date":1452629449,"answer_count":29,"score":2233,"last_activity_date":1612416936,"creation_date":1311671446,"last_edit_date":1581945021,"question_id":6827752,"link":"https://stackoverflow.com/questions/6827752/whats-the-difference-between-component-repository-service-annotations-in","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Can <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\"><code>@Component</code></a>, <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Repository.html\" rel=\"noreferrer\"><code>@Repository</code></a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Service.html\" rel=\"noreferrer\"><code>@Service</code></a> annotations be used interchangeably in Spring or do they provide any particular functionality besides acting as a notation device?</p>\n\n<p>In other words, if I have a Service class and I change the annotation from <code>@Service</code> to <code>@Component</code>, will it still behave the same way? </p>\n\n<p>Or does the annotation also influence the behavior and functionality of the class?</p>\n"},{"tags":["java","multithreading","runnable","implements","java-threads"],"comments":[{"owner":{"reputation":44716,"user_id":20774,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/3e32e31d4c24c1558abd6567f2ab60ba?s=128&d=identicon&r=PG","display_name":"James McMahon","link":"https://stackoverflow.com/users/20774/james-mcmahon"},"edited":false,"score":62,"creation_date":1241816188,"post_id":541487,"comment_id":650053,"content_license":"CC BY-SA 2.5","body":"Thanks for this question, the answers cleared up a lot of misconceptions I had. I looked into the correct way to do Java threads before SO existed and there was a lot of misinformation/outdated information out there."},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":5,"creation_date":1297553037,"post_id":541487,"comment_id":5563008,"content_license":"CC BY-SA 2.5","body":"there is one reason you might want to extend Thread (<i>but I do not recommend it</i>), you can preemptively handle <code>interrupt()</code>. Again, it&#39;s an idea, it might be useful in the right case, however I do not recommend it."},{"owner":{"user_type":"does_not_exist","display_name":"user285594"},"edited":false,"score":0,"creation_date":1302084368,"post_id":541487,"comment_id":6328916,"content_license":"CC BY-SA 2.5","body":"Please see also the answer, nicely explained: <a href=\"http://stackoverflow.com/q/5562720/285594\">stackoverflow.com/q/5562720/285594</a>"},{"owner":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"reply_to_user":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"edited":false,"score":0,"creation_date":1303738168,"post_id":541487,"comment_id":6621713,"content_license":"CC BY-SA 3.0","body":"@bestsss, I&#39;m trying to puzzle out what you might mean about handling interrupt().  Are you trying to override the method?"},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"reply_to_user":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"edited":false,"score":0,"creation_date":1303939088,"post_id":541487,"comment_id":6666220,"content_license":"CC BY-SA 3.0","body":"@Bob, yes bob. Java does that naturally for <code>java.nio.channels.InterruptibleChannel</code>(s)  You can have a look at the impl. of Thread.interrupt(). Using a helping hand from the <code>interrupt()</code> caller is an idea and a useful approach, again not recommended for rookies."},{"owner":{"reputation":10756,"user_id":554431,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7df9b99b5d8ac9eda9330768ca1acf09?s=128&d=identicon&r=PG","display_name":"bestsss","link":"https://stackoverflow.com/users/554431/bestsss"},"reply_to_user":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"edited":false,"score":0,"creation_date":1303939468,"post_id":541487,"comment_id":6666348,"content_license":"CC BY-SA 3.0","body":"@Bob, there is another way to do it, by extending <code>java.nio.channels.spi.AbstractSelector</code> and override <code>wakeup()</code> but it&#39;s a way too dirty way to asses the case :)"},{"owner":{"reputation":391,"user_id":1801817,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d612626155f6a3aace979336935c7c9e?s=128&d=identicon&r=PG","display_name":"mani deepak","link":"https://stackoverflow.com/users/1801817/mani-deepak"},"edited":false,"score":8,"creation_date":1390811516,"post_id":541487,"comment_id":32236461,"content_license":"CC BY-SA 3.0","body":"yes.As per the code,class Thread A can extend any class whereas class Thread B cant extend any other class"},{"owner":{"reputation":1800,"user_id":37370,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1","display_name":"RichieHH","link":"https://stackoverflow.com/users/37370/richiehh"},"edited":false,"score":0,"creation_date":1406519294,"post_id":541487,"comment_id":38848289,"content_license":"CC BY-SA 3.0","body":"Should look at implementing a Callback over Runnable now."},{"owner":{"reputation":5557,"user_id":199364,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/75807746d41c9905452d252595f7b89d?s=128&d=identicon&r=PG","display_name":"ToolmakerSteve","link":"https://stackoverflow.com/users/199364/toolmakersteve"},"reply_to_user":{"reputation":1800,"user_id":37370,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1","display_name":"RichieHH","link":"https://stackoverflow.com/users/37370/richiehh"},"edited":false,"score":0,"creation_date":1441454388,"post_id":541487,"comment_id":52692827,"content_license":"CC BY-SA 3.0","body":"@RichieHH - that depends. Callback only if you need a callback. That is, if the running code (the <code>Runnable</code> in OP) needs to execute logic in the caller."},{"owner":{"reputation":119,"user_id":1723149,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/685996fd7cdd68713c49669372c08aba?s=128&d=identicon&r=PG","display_name":"ancm","link":"https://stackoverflow.com/users/1723149/ancm"},"edited":false,"score":0,"creation_date":1457971014,"post_id":541487,"comment_id":59637037,"content_license":"CC BY-SA 3.0","body":"do i leave the run empty? when using functions do they go on a different thread?"},{"owner":{"reputation":4458,"user_id":358193,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/A5uit.jpg?s=128&g=1","display_name":"Peeyush","link":"https://stackoverflow.com/users/358193/peeyush"},"edited":false,"score":0,"creation_date":1471117866,"post_id":541487,"comment_id":65228919,"content_license":"CC BY-SA 3.0","body":"Composition is preferred over Inheritance in Object oriented design"},{"owner":{"reputation":1677,"user_id":1722245,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/0302671df4dba46f92d23a5f9446547d?s=128&d=identicon&r=PG","display_name":"user1722245","link":"https://stackoverflow.com/users/1722245/user1722245"},"edited":false,"score":0,"creation_date":1539936675,"post_id":541487,"comment_id":92689361,"content_license":"CC BY-SA 4.0","body":"Dont use thread directly, you should use ExecutorService, which can be mocked for better tests"},{"owner":{"reputation":336,"user_id":9465588,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1","display_name":"DGoiko","link":"https://stackoverflow.com/users/9465588/dgoiko"},"edited":false,"score":0,"creation_date":1563706367,"post_id":541487,"comment_id":100781135,"content_license":"CC BY-SA 4.0","body":"Extend Thread when you need to CHANGE the way Thread behaves. Implement runnable if you need to extend a different thread. If you need to share an object between threads, Runnable is the way to do, as thread doesnt allow it. If none of both cases apply, Runnable is more correct semantically speaking, although this last point is not very important, someone may think you&#39;ve changed behaviour of thread if you extend it while you&#39;re not."}],"answers":[{"comments":[{"owner":{"reputation":939,"user_id":1341584,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/yOhDD.jpg?s=128&g=1","display_name":"Nabeel Thobani","link":"https://stackoverflow.com/users/1341584/nabeel-thobani"},"edited":false,"score":0,"creation_date":1413436616,"post_id":541500,"comment_id":41444700,"content_license":"CC BY-SA 3.0","body":"In runnable we can&#39;t make network calls, is it? As i am having android.os.NetworkOnMainThreadException. But by using thread i can make network calls. Please correct me if i am wrong."},{"owner":{"reputation":81686,"user_id":15880,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG","display_name":"Powerlord","link":"https://stackoverflow.com/users/15880/powerlord"},"reply_to_user":{"reputation":939,"user_id":1341584,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/yOhDD.jpg?s=128&g=1","display_name":"Nabeel Thobani","link":"https://stackoverflow.com/users/1341584/nabeel-thobani"},"edited":false,"score":0,"creation_date":1413465318,"post_id":541500,"comment_id":41459553,"content_license":"CC BY-SA 3.0","body":"@NabeelThobani Normal Java doesn&#39;t care, but it sounds like Android does.  I&#39;m not familiar enough with Android to say, though."},{"owner":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"reply_to_user":{"reputation":939,"user_id":1341584,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/yOhDD.jpg?s=128&g=1","display_name":"Nabeel Thobani","link":"https://stackoverflow.com/users/1341584/nabeel-thobani"},"edited":false,"score":1,"creation_date":1420744281,"post_id":541500,"comment_id":44099172,"content_license":"CC BY-SA 3.0","body":"@NabeelThobani Of course you can. Probably you&#39;re not creating a Thread with your Runnable."}],"owner":{"reputation":81686,"user_id":15880,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG","display_name":"Powerlord","link":"https://stackoverflow.com/users/15880/powerlord"},"comment_count":3,"is_accepted":false,"score":35,"last_activity_date":1234449121,"creation_date":1234449121,"answer_id":541500,"question_id":541487,"content_license":"CC BY-SA 2.5","body":"<p>I'm not an expert, but I can think of one reason to implement Runnable instead of extend Thread: Java only supports single inheritance, so you can only extend one class.</p>\n\n<p>Edit: This originally said \"Implementing an interface requires less resources.\" as well, but you need to create a new Thread instance either way, so this was wrong.</p>\n"},{"comments":[{"owner":{"reputation":4225,"user_id":42962,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/09ba269cddb5021eed4a1fceed49965c?s=128&d=identicon&r=PG","display_name":"hooknc","link":"https://stackoverflow.com/users/42962/hooknc"},"edited":false,"score":153,"creation_date":1234457422,"post_id":541506,"comment_id":354282,"content_license":"CC BY-SA 2.5","body":"Exactly, well put.  What behavior are we trying to overwrite in Thread by extending it?  I would argue most people are not trying to overwrite any behavior, but trying to use behavior of Thread."},{"owner":{"reputation":5889,"user_id":1026132,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/8af2eb5ad219bfc905ea0dd03b5bd6cc?s=128&d=identicon&r=PG","display_name":"Nacho Coloma","link":"https://stackoverflow.com/users/1026132/nacho-coloma"},"edited":false,"score":92,"creation_date":1360244882,"post_id":541506,"comment_id":20646368,"content_license":"CC BY-SA 3.0","body":"As a side comment, if you instantiate a Thread and do not call its start() method you are creating a memory leak in Java &lt; 5 (this does not happen with Runnables): <a href=\"http://stackoverflow.com/questions/107823/why-is-my-java-program-leaking-memory-when-i-call-run-on-a-thread-object\" title=\"why is my java program leaking memory when i call run on a thread object\">stackoverflow.com/questions/107823/&hellip;</a>"},{"owner":{"reputation":14472,"user_id":949300,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/59e52b46611567bd018e865500cf92fd?s=128&d=identicon&r=PG","display_name":"user949300","link":"https://stackoverflow.com/users/949300/user949300"},"edited":false,"score":25,"creation_date":1362598218,"post_id":541506,"comment_id":21516801,"content_license":"CC BY-SA 3.0","body":"One minor advantage of Runnable is that, if in certain circumstances you don&#39;t care about, or don&#39;t want to use threading, and you just want to execute the code, you have the option to simply call run().  e.g. (very handwavy)  <code>if (numberCores &gt; 4) myExecutor.excute(myRunnable); else myRunnable.run()</code>"},{"owner":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"reply_to_user":{"reputation":14472,"user_id":949300,"user_type":"registered","accept_rate":65,"profile_image":"https://www.gravatar.com/avatar/59e52b46611567bd018e865500cf92fd?s=128&d=identicon&r=PG","display_name":"user949300","link":"https://stackoverflow.com/users/949300/user949300"},"edited":false,"score":11,"creation_date":1366704952,"post_id":541506,"comment_id":23100395,"content_license":"CC BY-SA 3.0","body":"@user949300 you can also do that with <code>extends Thread</code> and if you don&#39;t want threading why would you even implement <code>Runnable</code>..."},{"owner":{"reputation":9645,"user_id":431356,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/a77c53b185d8de37395e7f2af3de78d3?s=128&d=identicon&r=PG","display_name":"brettw","link":"https://stackoverflow.com/users/431356/brettw"},"edited":false,"score":5,"creation_date":1374119174,"post_id":541506,"comment_id":25817939,"content_license":"CC BY-SA 3.0","body":"I would also add that by implementing Runnable now rather than extending Thread, you make it easy for a future refactor of using thread-pools, timers, schedulers, and Executors."},{"owner":{"reputation":11110,"user_id":653708,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/bch50.jpg?s=128&g=1","display_name":"8bitjunkie","link":"https://stackoverflow.com/users/653708/8bitjunkie"},"edited":false,"score":32,"creation_date":1392197280,"post_id":541506,"comment_id":32850673,"content_license":"CC BY-SA 3.0","body":"To paraphrase Sierra and Bates, a key benefit of implementing Runnable is that you are architecturally seperating the &quot;job&quot; from the &quot;runner&quot;."},{"owner":{"reputation":15542,"user_id":443716,"user_type":"registered","accept_rate":92,"profile_image":"https://www.gravatar.com/avatar/070adae503b9c7c61952065c7384bdc5?s=128&d=identicon&r=PG","display_name":"Isaac","link":"https://stackoverflow.com/users/443716/isaac"},"edited":false,"score":4,"creation_date":1400895303,"post_id":541506,"comment_id":36685451,"content_license":"CC BY-SA 3.0","body":"Another addition to the &quot;practical terms&quot; bit: a <code>Runnable</code> is, really, an encapsulation of any bit of code. Under certain circumstances, it may be useful to run a <code>Runnable</code> even when not within the context of a new thread."},{"owner":{"reputation":12967,"user_id":1622847,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/66Vi0.jpg?s=128&g=1","display_name":"lolski","link":"https://stackoverflow.com/users/1622847/lolski"},"reply_to_user":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"edited":false,"score":1,"creation_date":1408376084,"post_id":541506,"comment_id":39554575,"content_license":"CC BY-SA 3.0","body":"@m0skit0 the point of the code by user949300 is that it uses a conditional to only enable multi-threading when there are enough physical core"},{"owner":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"reply_to_user":{"reputation":12967,"user_id":1622847,"user_type":"registered","accept_rate":70,"profile_image":"https://i.stack.imgur.com/66Vi0.jpg?s=128&g=1","display_name":"lolski","link":"https://stackoverflow.com/users/1622847/lolski"},"edited":false,"score":0,"creation_date":1408377383,"post_id":541506,"comment_id":39555341,"content_license":"CC BY-SA 3.0","body":"@lolski My point being you can do that extending Thread or implementing Runnable, so really doesn&#39;t matter."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"edited":false,"score":6,"creation_date":1408377820,"post_id":541506,"comment_id":39555610,"content_license":"CC BY-SA 3.0","body":"@m0skit0: It doesn&#39;t matter if you don&#39;t care about your code expressing what you&#39;re interested in. Personally I care about that very much. Yes, you <i>can</i> extend <code>Thread</code> just to implement <code>Runnable</code>... heck, you can pass one <code>Thread</code> instance to the constructor of another <code>Thread</code> instance. That doesn&#39;t mean it&#39;s a good idea."},{"owner":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"edited":false,"score":0,"creation_date":1408382132,"post_id":541506,"comment_id":39557929,"content_license":"CC BY-SA 3.0","body":"@JonSkeet Sorry, I didn&#39;t mean it doesn&#39;t matter to extend Thread or implement Runnable, I meant that that was not a valid argument for implementing Runnable :)"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":22794,"user_id":898478,"user_type":"registered","accept_rate":86,"profile_image":"https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1","display_name":"m0skit0","link":"https://stackoverflow.com/users/898478/m0skit0"},"edited":false,"score":2,"creation_date":1408383161,"post_id":541506,"comment_id":39558475,"content_license":"CC BY-SA 3.0","body":"@m0skit0: <i>What</i> wasn&#39;t a valid argument for implementing <code>Runnable</code>? You implement <code>Runnable</code> if you want to represent &quot;something that can be run&quot; - it doesn&#39;t necessarily have to be in a new thread."},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"edited":false,"score":2,"creation_date":1423785119,"post_id":541506,"comment_id":45301491,"content_license":"CC BY-SA 3.0","body":"Note that sometimes you (conceptually) <i>are</i> creating &quot;runners&quot;, not &quot;jobs&quot;. E.g. if you&#39;re writing a thread pool (for whatever reason)."},{"owner":{"reputation":16695,"user_id":3426825,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/6DcUx.png?s=128&g=1","display_name":"homerun","link":"https://stackoverflow.com/users/3426825/homerun"},"edited":false,"score":0,"creation_date":1425383308,"post_id":541506,"comment_id":45931841,"content_license":"CC BY-SA 3.0","body":"@JonSkeet i&#39;m currently creating a class that handles Threads, for example: <a href=\"http://pastebin.com/QNc8xY46\" rel=\"nofollow noreferrer\">pastebin.com/QNc8xY46</a>. is it OK, or terribly  wrong to do so?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":16695,"user_id":3426825,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/6DcUx.png?s=128&g=1","display_name":"homerun","link":"https://stackoverflow.com/users/3426825/homerun"},"edited":false,"score":6,"creation_date":1425383400,"post_id":541506,"comment_id":45931889,"content_license":"CC BY-SA 3.0","body":"@somefolk: Well it feels terribly wrong to have public methods beginning with <code>_</code>, and having both <code>start()</code> and <code>_start()</code> is <i>really</i> confusing... as is having an instance method called <code>_sleep()</code>, when there&#39;s a static <code>sleep</code> method. Not that your <code>_sleep</code> method actually <i>does</i> anything with the instance anyway. In general, this looks like a bad idea to me so far."},{"owner":{"reputation":1475,"user_id":1206341,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/32ef3f02bee00683732a240bb6afdd63?s=128&d=identicon&r=PG","display_name":"greenmarker","link":"https://stackoverflow.com/users/1206341/greenmarker"},"edited":false,"score":0,"creation_date":1435428175,"post_id":541506,"comment_id":50200141,"content_license":"CC BY-SA 3.0","body":"The same answer is in official Java tutorials: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>"},{"owner":{"reputation":8206,"user_id":2580516,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e83e511e401770207ffbb0d31b8ffb4?s=128&d=identicon&r=PG","display_name":"Warren Dew","link":"https://stackoverflow.com/users/2580516/warren-dew"},"edited":false,"score":0,"creation_date":1445358900,"post_id":541506,"comment_id":54286587,"content_license":"CC BY-SA 3.0","body":"A thread that performs a specific task &quot;is a&quot; thread in the object oriented Liskov substitution sense, so the philosophical argument is invalid.  The valid arguments for preferring Runnable are practical, and have to do with modularization of code, especially in cases where you only want multithreading for performance reasons."},{"owner":{"reputation":733,"user_id":4332532,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c433aa24e1afeef1045647e454e69c2a?s=128&d=identicon&r=PG&f=1","display_name":"Small Legend","link":"https://stackoverflow.com/users/4332532/small-legend"},"edited":false,"score":0,"creation_date":1463841074,"post_id":541506,"comment_id":62241479,"content_license":"CC BY-SA 3.0","body":"I know this is an old post, but I feel maybe you could elaborate a little more @JonSkeet give code snippets, pros and cons. As I believe some other answers are more worthy!"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":733,"user_id":4332532,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c433aa24e1afeef1045647e454e69c2a?s=128&d=identicon&r=PG&f=1","display_name":"Small Legend","link":"https://stackoverflow.com/users/4332532/small-legend"},"edited":false,"score":0,"creation_date":1463841186,"post_id":541506,"comment_id":62241520,"content_license":"CC BY-SA 3.0","body":"@SmallLegend: I don&#39;t see any benefit in code snippets here - I&#39;ve basically explained the philosophical difference. You should generally extend a class if you&#39;re planning to change some of the behaviour it implements. When you extend <code>Thread</code> <i>just</i> to override <code>Runnable</code>, you&#39;re changing behaviour that isn&#39;t part of <code>Thread</code> itself."},{"owner":{"reputation":733,"user_id":4332532,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c433aa24e1afeef1045647e454e69c2a?s=128&d=identicon&r=PG&f=1","display_name":"Small Legend","link":"https://stackoverflow.com/users/4332532/small-legend"},"edited":false,"score":0,"creation_date":1463841396,"post_id":541506,"comment_id":62241582,"content_license":"CC BY-SA 3.0","body":"Okay, you know best! So generally, there are no situations where one would choose Thread over  Runnable? @JonSkeet"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":733,"user_id":4332532,"user_type":"registered","accept_rate":84,"profile_image":"https://www.gravatar.com/avatar/c433aa24e1afeef1045647e454e69c2a?s=128&d=identicon&r=PG&f=1","display_name":"Small Legend","link":"https://stackoverflow.com/users/4332532/small-legend"},"edited":false,"score":0,"creation_date":1463841849,"post_id":541506,"comment_id":62241733,"content_license":"CC BY-SA 3.0","body":"@SmallLegend: Well if you were customising the actual threading behaviour you could, rather than just &quot;the task that it&#39;s going to run&quot;. Not sure what custom threading behaviour you would implement, admittedly..."},{"owner":{"reputation":8423,"user_id":427155,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/2e80ec10ce18ae74b90001a0b7afdcfe?s=128&d=identicon&r=PG","display_name":"H2ONaCl","link":"https://stackoverflow.com/users/427155/h2onacl"},"edited":false,"score":0,"creation_date":1475794095,"post_id":541506,"comment_id":67098952,"content_license":"CC BY-SA 3.0","body":"I think that composition being philosophically purer is an argument for extending an object. Since this answer is saying implementing Runnable is preferred to extending Thread, perhaps composition has nothing to do with the rationale."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":8423,"user_id":427155,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/2e80ec10ce18ae74b90001a0b7afdcfe?s=128&d=identicon&r=PG","display_name":"H2ONaCl","link":"https://stackoverflow.com/users/427155/h2onacl"},"edited":false,"score":4,"creation_date":1475794640,"post_id":541506,"comment_id":67099149,"content_license":"CC BY-SA 3.0","body":"@H2ONaCl No, absolutely the opposite. Preferring composition over inheritance speaks <i>against</i> extending anything."},{"owner":{"reputation":1604,"user_id":3721259,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/5399e5ad3e7ec0d567ca258bf93bf63c?s=128&d=identicon&r=PG&f=1","display_name":"AV94","link":"https://stackoverflow.com/users/3721259/av94"},"edited":false,"score":0,"creation_date":1479443978,"post_id":541506,"comment_id":68569458,"content_license":"CC BY-SA 3.0","body":"Will there be any difference in the execution times between the two approaches?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":1604,"user_id":3721259,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/5399e5ad3e7ec0d567ca258bf93bf63c?s=128&d=identicon&r=PG&f=1","display_name":"AV94","link":"https://stackoverflow.com/users/3721259/av94"},"edited":false,"score":1,"creation_date":1479453899,"post_id":541506,"comment_id":68573170,"content_license":"CC BY-SA 3.0","body":"@AV94: Not measurable, I expect."},{"owner":{"reputation":195,"user_id":7775986,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7fdea8665a116d1574b4f4c9976b0935?s=128&d=identicon&r=PG&f=1","display_name":"Lealo","link":"https://stackoverflow.com/users/7775986/lealo"},"edited":false,"score":0,"creation_date":1502661198,"post_id":541506,"comment_id":78288143,"content_license":"CC BY-SA 3.0","body":"If you make an extend thread that prints out &quot;hello&quot; - and make a class that implements runnable - that prints out &quot;hello&quot;, does that mean this is still true: &quot;You&#39;re not really specialising the thread&#39;s behaviour&quot; ?. I mean is there some mechanical things behind the scenes that make them different - or did Jon Skeet mean that you can potentially write more kind of code in an thread that extendend - and that that therefore have a greater risk of being screwed up with? How would telling an extend thread to print hello be more specializing than telling runnable to print hello? How?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":195,"user_id":7775986,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7fdea8665a116d1574b4f4c9976b0935?s=128&d=identicon&r=PG&f=1","display_name":"Lealo","link":"https://stackoverflow.com/users/7775986/lealo"},"edited":false,"score":0,"creation_date":1502661423,"post_id":541506,"comment_id":78288179,"content_license":"CC BY-SA 3.0","body":"@Lealo: Implementing an interface isn&#39;t specialization... It&#39;s just providing the behaviour. The point is to separate the infrastructure involved in running &quot;some code&quot; on different thread, and what that code is. They are orthogonal concerns, so shouldn&#39;t be merged together via inheritance, IMO. I suspect if Java were redone from scratch today, this wouldn&#39;t even be an option."},{"owner":{"reputation":195,"user_id":7775986,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7fdea8665a116d1574b4f4c9976b0935?s=128&d=identicon&r=PG&f=1","display_name":"Lealo","link":"https://stackoverflow.com/users/7775986/lealo"},"edited":false,"score":0,"creation_date":1502670210,"post_id":541506,"comment_id":78289663,"content_license":"CC BY-SA 3.0","body":"Can you relate your point to the size of an thread that extends a class - to implementing the runnable interface. The thread class already contains the runnable interface. So I assume it somehow are bigger in size. By using extended thread you need (Thread: runnable interface - extending java.lang.object), but you can take out that runnable interface and use it independently. Also is this not then just as comparing (ice cream) with (ice cream + ice cream hornet)?"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":195,"user_id":7775986,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/7fdea8665a116d1574b4f4c9976b0935?s=128&d=identicon&r=PG&f=1","display_name":"Lealo","link":"https://stackoverflow.com/users/7775986/lealo"},"edited":false,"score":0,"creation_date":1502688921,"post_id":541506,"comment_id":78293370,"content_license":"CC BY-SA 3.0","body":"@Lealo: The size is irrelevant to the point here. Yes, <code>Thread</code> implements <code>Runnable</code>, but that was a design mistake IMO."},{"owner":{"reputation":44507,"user_id":106104,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG","display_name":"user253751","link":"https://stackoverflow.com/users/106104/user253751"},"reply_to_user":{"reputation":11110,"user_id":653708,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/bch50.jpg?s=128&g=1","display_name":"8bitjunkie","link":"https://stackoverflow.com/users/653708/8bitjunkie"},"edited":false,"score":0,"creation_date":1575310424,"post_id":541506,"comment_id":104515117,"content_license":"CC BY-SA 4.0","body":"@8bitjunkie But what if your &quot;unit of work&quot; <b>is</b> a &quot;runner&quot;? For example the &quot;work  unit&quot; done by the threads in a thread pool, which pulls other work units off a queue and executes them, forever."},{"owner":{"reputation":9820,"user_id":452775,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/88963e7cc58eabf150447e7b78a24793?s=128&d=identicon&r=PG","display_name":"Lii","link":"https://stackoverflow.com/users/452775/lii"},"edited":false,"score":0,"creation_date":1603716627,"post_id":541506,"comment_id":114115096,"content_license":"CC BY-SA 4.0","body":"@JonSkeet: Since this is such a popular answer I think it would be a good idea to update it with best practices for the post Java 8 world: Often the best way is to pass a lambda expression to the <code>Thread</code> constructor: <code>new Thread(() -&gt; { ... });</code>"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":9820,"user_id":452775,"user_type":"registered","accept_rate":63,"profile_image":"https://www.gravatar.com/avatar/88963e7cc58eabf150447e7b78a24793?s=128&d=identicon&r=PG","display_name":"Lii","link":"https://stackoverflow.com/users/452775/lii"},"edited":false,"score":0,"creation_date":1603720906,"post_id":541506,"comment_id":114117461,"content_license":"CC BY-SA 4.0","body":"@Lii: But the question isn&#39;t actually about &quot;how to start a thread&quot; - it&#39;s about the difference between <code>Runnable</code> and <code>Thread</code>. I&#39;ll add something saying you can also implement it via a lambda expression, but I don&#39;t want to go further than that."},{"owner":{"reputation":110,"user_id":14194579,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg30ZHupYdC5gfd0STpwpP8W-MKqgkpKMkkC83z3wg=k-s128","display_name":"Moussa Kare Gueye","link":"https://stackoverflow.com/users/14194579/moussa-kare-gueye"},"edited":false,"score":0,"creation_date":1613989609,"post_id":541506,"comment_id":117237227,"content_license":"CC BY-SA 4.0","body":"What is IMO that you have mentioned? I have never heard about it before"},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"reply_to_user":{"reputation":110,"user_id":14194579,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg30ZHupYdC5gfd0STpwpP8W-MKqgkpKMkkC83z3wg=k-s128","display_name":"Moussa Kare Gueye","link":"https://stackoverflow.com/users/14194579/moussa-kare-gueye"},"edited":false,"score":1,"creation_date":1613990016,"post_id":541506,"comment_id":117237427,"content_license":"CC BY-SA 4.0","body":"@MoussaKareGueye: In my opinion."}],"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"comment_count":34,"is_accepted":true,"score":1734,"last_activity_date":1603720928,"last_edit_date":1603720928,"creation_date":1234449174,"answer_id":541506,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>Yes: implements <code>Runnable</code> is the preferred way to do it, IMO. You're not really specialising the thread's behaviour.  You're just giving it something to run. That means <a href=\"http://en.wikipedia.org/wiki/Object_composition\" rel=\"noreferrer\">composition</a> is the <em>philosophically</em> &quot;purer&quot; way to go.</p>\n<p>In <em>practical</em> terms, it means you can implement <code>Runnable</code> and extend from another class as well... and you can also implement <code>Runnable</code> via a lambda expression as of Java 8.</p>\n"},{"owner":{"reputation":51269,"user_id":49246,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/c421b43470bb8d3c099c5a847e588549?s=128&d=identicon&r=PG","display_name":"starblue","link":"https://stackoverflow.com/users/49246/starblue"},"comment_count":0,"is_accepted":false,"score":18,"last_activity_date":1234449189,"creation_date":1234449189,"answer_id":541507,"question_id":541487,"content_license":"CC BY-SA 2.5","body":"<p>Instantiating an interface gives a cleaner separation between your code and the implementation of threads, so I'd prefer to implement Runnable in this case.</p>\n"},{"comments":[{"owner":{"reputation":30506,"user_id":116509,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/GsYqn.jpg?s=128&g=1","display_name":"artbristol","link":"https://stackoverflow.com/users/116509/artbristol"},"edited":false,"score":40,"creation_date":1353324421,"post_id":541527,"comment_id":18396362,"content_license":"CC BY-SA 3.0","body":"This is better than the accepted answer IMHO. One thing: the snippet of code you have doesn&#39;t close down the executor and I see millions of questions where people get this wrong, creating a new Executor every time they want to spawn a task. <code>es</code> would be better as a static (or injected) field so it only gets created once."},{"owner":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"reply_to_user":{"reputation":30506,"user_id":116509,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/GsYqn.jpg?s=128&g=1","display_name":"artbristol","link":"https://stackoverflow.com/users/116509/artbristol"},"edited":false,"score":8,"creation_date":1353331721,"post_id":541527,"comment_id":18399780,"content_license":"CC BY-SA 3.0","body":"@artbristol, thanks!  I don&#39;t disagree on the new Executor (we do what you suggest in our code).  In writing the original answer, I was trying to write minimal code analagous to the original fragment.  We have to hope that many readers of these answers use them as jumping off points.  I&#39;m not trying to write a replacement for the javadoc.  I&#39;m effectively writing marketing material for it: <i>if you like this method, you should see all the other great things we have to offer...!</i>"},{"owner":{"reputation":81686,"user_id":15880,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG","display_name":"Powerlord","link":"https://stackoverflow.com/users/15880/powerlord"},"edited":false,"score":5,"creation_date":1430228659,"post_id":541527,"comment_id":47963836,"content_license":"CC BY-SA 3.0","body":"I know I&#39;m a bit late commenting on this, but dealing with <code>FutureTask</code> directly is generally not what you want to do.  <code>ExecutorService</code>s will create the appropriate <code>Future</code> for you when you <code>submit</code> a <code>Runnable</code>/<code>Callable</code> to them.  Likewise for <code>ScheduledExecutorService</code>s and <code>ScheduledFuture</code> when you <code>schedule</code> a <code>Runnable</code>/<code>Callable</code>."},{"owner":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"reply_to_user":{"reputation":81686,"user_id":15880,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG","display_name":"Powerlord","link":"https://stackoverflow.com/users/15880/powerlord"},"edited":false,"score":3,"creation_date":1430240641,"post_id":541527,"comment_id":47972827,"content_license":"CC BY-SA 3.0","body":"@Powerlord, my intention was to make code fragments that matched the OP&#39;s as closely as possible. I agree that new FutureTask isn&#39;t optimal but it is clear for the purposes of explanation."}],"owner":{"reputation":21713,"user_id":5812,"user_type":"registered","accept_rate":56,"profile_image":"https://www.gravatar.com/avatar/6ac7f38eea4d771f9ffcd45f52fd1132?s=128&d=identicon&r=PG","display_name":"Bob Cross","link":"https://stackoverflow.com/users/5812/bob-cross"},"comment_count":4,"is_accepted":false,"score":590,"last_activity_date":1565784079,"last_edit_date":1565784079,"creation_date":1234449425,"answer_id":541527,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p><strong>tl;dr: implements Runnable is better.  However, the caveat is important</strong></p>\n\n<p>In general, I would recommend using something like <code>Runnable</code> rather than <code>Thread</code> because it allows you to keep your work only loosely coupled with your choice of concurrency.  For example, if you use a <code>Runnable</code> and decide later on that this doesn't in fact require it's own <code>Thread</code>, you can just call threadA.run().</p>\n\n<p><strong>Caveat:</strong> Around here, I strongly discourage the use of raw Threads.  I much prefer the use of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html\" rel=\"noreferrer\">Callables</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" rel=\"noreferrer\">FutureTasks</a> (From the javadoc: \"A cancellable asynchronous computation\").  The integration of timeouts, proper cancelling and the thread pooling of the modern concurrency support are all much more useful to me than piles of raw Threads.</p>\n\n<p><strong>Follow-up:</strong> there is a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html#FutureTask-java.lang.Runnable-V-\" rel=\"noreferrer\"><code>FutureTask</code> constructor</a> that allows you to use Runnables (if that's what you are most comfortable with) and still get the benefit of the modern concurrency tools.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html#FutureTask-java.lang.Runnable-V-\" rel=\"noreferrer\">To quote the javadoc</a>:</p>\n\n<p>If you don't need a particular result, consider using constructions of the form: </p>\n\n<pre><code>Future&lt;?&gt; f = new FutureTask&lt;Object&gt;(runnable, null)\n</code></pre>\n\n<p>So, if we replace their <code>runnable</code> with your <code>threadA</code>, we get the following:</p>\n\n<pre><code>new FutureTask&lt;Object&gt;(threadA, null)\n</code></pre>\n\n<p>Another option that allows you to stay closer to Runnables is a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"noreferrer\">ThreadPoolExecutor</a>.  You can use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html#execute%28java.lang.Runnable%29\" rel=\"noreferrer\">execute</a> method to pass in a Runnable to execute \"the given task sometime in the future.\"</p>\n\n<p>If you'd like to try using a thread pool, the code fragment above would become something like the following (using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29\" rel=\"noreferrer\">Executors.newCachedThreadPool()</a> factory method):</p>\n\n<pre><code>ExecutorService es = Executors.newCachedThreadPool();\nes.execute(new ThreadA());\n</code></pre>\n"},{"comments":[{"owner":{"reputation":81686,"user_id":15880,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/7618ff7a4952a494b8f41bd0df646790?s=128&d=identicon&r=PG","display_name":"Powerlord","link":"https://stackoverflow.com/users/15880/powerlord"},"edited":false,"score":5,"creation_date":1234450447,"post_id":541551,"comment_id":353681,"content_license":"CC BY-SA 2.5","body":"I wouldn&#39;t think ExecutorService would be that useful if you just want to launch a single thread."},{"owner":{"reputation":42525,"user_id":18154,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/528394f867632bcca8497088cd71a6d4?s=128&d=identicon&r=PG","display_name":"Fabian Steeg","link":"https://stackoverflow.com/users/18154/fabian-steeg"},"edited":false,"score":1,"creation_date":1234451768,"post_id":541551,"comment_id":353796,"content_license":"CC BY-SA 2.5","body":"From what I have learned one should no longer start a thread on your own in general, because leaving that to the executor service makes all much more controllable (like, waiting for the thread to suspend). Also, I don&#39;t see anything in the question that implies it&#39;s about a single thread."},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":4,"creation_date":1371935763,"post_id":541551,"comment_id":25008546,"content_license":"CC BY-SA 3.0","body":"What&#39;s the point of using any multi-threading if we know aprior that it&#39;s going to be a single thread. So let&#39;s assume we have multiple threads and this answer is valuable."},{"owner":{"reputation":196,"user_id":588702,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/c992aac7727eefb8910e741996415cd7?s=128&d=identicon&r=PG","display_name":"porcoesphino","link":"https://stackoverflow.com/users/588702/porcoesphino"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":1,"creation_date":1387811271,"post_id":541551,"comment_id":31087003,"content_license":"CC BY-SA 3.0","body":"@zEro I&#39;m pretty sure there is a reason there is only one Event Dispatch Thread. I doubt it&#39;s the only case were it&#39;s best to have a separate thread but possibly not best to have multiple."}],"owner":{"reputation":42525,"user_id":18154,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/528394f867632bcca8497088cd71a6d4?s=128&d=identicon&r=PG","display_name":"Fabian Steeg","link":"https://stackoverflow.com/users/18154/fabian-steeg"},"comment_count":4,"is_accepted":false,"score":45,"last_activity_date":1469257182,"last_edit_date":1495542396,"creation_date":1234449682,"answer_id":541551,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>You should implement Runnable, but if you are running on Java 5 or higher, you should not start it with <code>new Thread</code> but use an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a> instead. For details see: <a href=\"https://stackoverflow.com/questions/125333/how-to-implement-simple-threading-in-java\">How to implement simple threading in Java</a>.</p>\n"},{"comments":[{"owner":{"reputation":4609,"user_id":1347968,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/60ac5d1887465fa8a299e94810aa5fec?s=128&d=identicon&r=PG","display_name":"siegi","link":"https://stackoverflow.com/users/1347968/siegi"},"edited":false,"score":7,"creation_date":1335474790,"post_id":541583,"comment_id":13319736,"content_license":"CC BY-SA 3.0","body":"Well, you can actually do the same thing with a <code>Thread</code> object too because <code>Thread implements Runnable</code>â¦ ;-) But it &quot;feels better&quot; doing this things with a <code>Runnable</code> than doing them with a <code>Thread</code>!"},{"owner":{"reputation":33535,"user_id":1409,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/2bd9e4e00647ecf35aba651054861e5e?s=128&d=identicon&r=PG","display_name":"Herms","link":"https://stackoverflow.com/users/1409/herms"},"reply_to_user":{"reputation":4609,"user_id":1347968,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/60ac5d1887465fa8a299e94810aa5fec?s=128&d=identicon&r=PG","display_name":"siegi","link":"https://stackoverflow.com/users/1347968/siegi"},"edited":false,"score":9,"creation_date":1335532771,"post_id":541583,"comment_id":13335368,"content_license":"CC BY-SA 3.0","body":"True, but <code>Thread</code> adds a lot of extra stuff that you don&#39;t need, and in many cases don&#39;t want.  You&#39;re always better off implementing the interface that matches what you&#39;re actually doing."}],"owner":{"reputation":33535,"user_id":1409,"user_type":"registered","accept_rate":87,"profile_image":"https://www.gravatar.com/avatar/2bd9e4e00647ecf35aba651054861e5e?s=128&d=identicon&r=PG","display_name":"Herms","link":"https://stackoverflow.com/users/1409/herms"},"comment_count":2,"is_accepted":false,"score":83,"last_activity_date":1476276806,"last_edit_date":1476276806,"creation_date":1234450295,"answer_id":541583,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>One thing that I'm surprised hasn't been mentioned yet is that implementing <code>Runnable</code> makes your class more flexible.</p>\n\n<p>If you extend thread then the action you're doing is always going to be in a thread.  However, if you implement <code>Runnable</code> it doesn't have to be.  You can run it in a thread, or pass it to some kind of executor service, or just pass it around as a task within a single threaded application (maybe to be run at a later time, but within the same thread).  The options are a lot more open if you just use <code>Runnable</code> than if you bind yourself to <code>Thread</code>.</p>\n"},{"owner":{"reputation":173,"user_id":152317,"user_type":"registered","accept_rate":14,"profile_image":"https://www.gravatar.com/avatar/d78537df8243a4d014dffd776badc95e?s=128&d=identicon&r=PG","display_name":"Govula Srinivas","link":"https://stackoverflow.com/users/152317/govula-srinivas"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1268031786,"creation_date":1268031786,"answer_id":2399784,"question_id":541487,"content_license":"CC BY-SA 2.5","body":"<p>Separating the Thread class from the Runnable implementation also avoids potential synchronization problems between the thread and the run() method. A separate Runnable generally gives greater flexibility in the way that runnable code is referenced and executed.</p>\n"},{"comments":[{"owner":{"reputation":88,"user_id":4328206,"user_type":"registered","profile_image":"https://i.stack.imgur.com/mMt5g.jpg?s=128&g=1","display_name":"Liebertee","link":"https://stackoverflow.com/users/4328206/liebertee"},"edited":false,"score":1,"creation_date":1445414355,"post_id":2426408,"comment_id":54309175,"content_license":"CC BY-SA 3.0","body":"This should always be the question if you start making a concurrent running Object! Do you even need the Thread Object funtions?"},{"owner":{"reputation":8206,"user_id":2580516,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/3e83e511e401770207ffbb0d31b8ffb4?s=128&d=identicon&r=PG","display_name":"Warren Dew","link":"https://stackoverflow.com/users/2580516/warren-dew"},"edited":false,"score":5,"creation_date":1465272095,"post_id":2426408,"comment_id":62818394,"content_license":"CC BY-SA 3.0","body":"When inheriting from Thread, one nearly always wants to override the behavior of the <code>run()</code> method."},{"owner":{"reputation":6347,"user_id":508957,"user_type":"registered","accept_rate":58,"profile_image":"https://www.gravatar.com/avatar/7b59b9843e2bac733cdc3c2e4d548e6c?s=128&d=identicon&r=PG","display_name":"sura2k","link":"https://stackoverflow.com/users/508957/sura2k"},"edited":false,"score":1,"creation_date":1467797289,"post_id":2426408,"comment_id":63863644,"content_license":"CC BY-SA 3.0","body":"You cannot override the behavior of a <code>java.lang.Thread</code> by overriding the <code>run()</code> method. In that case you need to override the <code>start()</code> method I guess. Normally you just reuse the behavior of the <code>java.lang.Thread</code> by injecting your execution block in to the <code>run()</code> method."},{"owner":{"reputation":680,"user_id":3617261,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/61768b3b21241db80aff8d9374c2832d?s=128&d=identicon&r=PG&f=1","display_name":"peja","link":"https://stackoverflow.com/users/3617261/peja"},"edited":false,"score":0,"creation_date":1535636477,"post_id":2426408,"comment_id":91147449,"content_license":"CC BY-SA 4.0","body":"The inheritance is not just for overriding some behavior, is also to use common behaviors. And it is the opposite, the more overrides, the worser hierarchy."}],"owner":{"reputation":3352,"user_id":214626,"user_type":"registered","accept_rate":82,"profile_image":"https://www.gravatar.com/avatar/13325290c48cc81d4a957ff3e37b2374?s=128&d=identicon&r=PG","display_name":"panzerschreck","link":"https://stackoverflow.com/users/214626/panzerschreck"},"comment_count":4,"is_accepted":false,"score":270,"last_activity_date":1440779210,"last_edit_date":1440779210,"creation_date":1268322654,"answer_id":2426408,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Moral of the story:</p>\n\n<p><em>Inherit only if you want to override some behavior.</em></p>\n\n<p>Or rather it should be read as:</p>\n\n<p><em>Inherit less, interface more.</em></p>\n"},{"owner":{"reputation":6538,"user_id":129213,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5f14c071faa96070ed9d80efaf72e4e1?s=128&d=identicon&r=PG","display_name":"n13","link":"https://stackoverflow.com/users/129213/n13"},"comment_count":0,"is_accepted":false,"score":12,"last_activity_date":1273206537,"creation_date":1273206537,"answer_id":2786210,"question_id":541487,"content_license":"CC BY-SA 2.5","body":"<p>Runnable because: </p>\n\n<ul>\n<li>Leaves more flexibility for the\nRunnable implementation to extend\nanother class </li>\n<li>Separates the code from\nexecution</li>\n<li>Allows you to run your\nrunnable from a Thread Pool, the\nevent thread, or in any other way in\nthe future.</li>\n</ul>\n\n<p>Even if you don't need any of this now, you may in the future. Since there is no benefit to overriding Thread, Runnable is a better solution.</p>\n"},{"comments":[{"owner":{"reputation":38959,"user_id":220834,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/a8qUy.jpg?s=128&g=1","display_name":"Don Roby","link":"https://stackoverflow.com/users/220834/don-roby"},"edited":false,"score":38,"creation_date":1294858217,"post_id":4019116,"comment_id":5149899,"content_license":"CC BY-SA 2.5","body":"This isn&#39;t really a third way.  You&#39;re still implementing Runnable, just doing it anonymously."},{"owner":{"reputation":39915,"user_id":85821,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG","display_name":"Bart van Heukelom","link":"https://stackoverflow.com/users/85821/bart-van-heukelom"},"reply_to_user":{"reputation":38959,"user_id":220834,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/a8qUy.jpg?s=128&g=1","display_name":"Don Roby","link":"https://stackoverflow.com/users/220834/don-roby"},"edited":false,"score":2,"creation_date":1294912778,"post_id":4019116,"comment_id":5157968,"content_license":"CC BY-SA 2.5","body":"@Don Roby: Which is different. It&#39;s often convenient, and you can use fields and final local variables from the containing class/method."},{"owner":{"reputation":6720,"user_id":1178016,"user_type":"registered","accept_rate":73,"profile_image":"https://i.stack.imgur.com/HOI7f.png?s=128&g=1","display_name":"xehpuk","link":"https://stackoverflow.com/users/1178016/xehpuk"},"edited":false,"score":6,"creation_date":1420507710,"post_id":4019116,"comment_id":43991233,"content_license":"CC BY-SA 3.0","body":"@BartvanHeukelom It&#39;s convenient, but not different. You can do this with any type of nested class, i.e. inner classes, local classes and lambda expressions."}],"owner":{"reputation":39915,"user_id":85821,"user_type":"registered","accept_rate":73,"profile_image":"https://www.gravatar.com/avatar/28d7fc76db803c6757e7cfd2cde20354?s=128&d=identicon&r=PG","display_name":"Bart van Heukelom","link":"https://stackoverflow.com/users/85821/bart-van-heukelom"},"comment_count":3,"is_accepted":false,"score":21,"last_activity_date":1288042860,"creation_date":1288042860,"answer_id":4019116,"question_id":541487,"content_license":"CC BY-SA 2.5","body":"<p>I would say there is a third way:</p>\n\n<pre><code>public class Something {\n\n    public void justAnotherMethod() { ... }\n\n}\n\nnew Thread(new Runnable() {\n   public void run() {\n    instanceOfSomething.justAnotherMethod();\n   }\n}).start();\n</code></pre>\n\n<p>Maybe this is influenced a bit by my recent heavy usage of Javascript and Actionscript 3, but this way your class doesn't need to implement a pretty vague interface like <code>Runnable</code>.</p>\n"},{"owner":{"reputation":587,"user_id":730911,"user_type":"registered","accept_rate":77,"profile_image":"https://www.gravatar.com/avatar/bbcfac3b887c452f36180c23288b2179?s=128&d=identicon&r=PG","display_name":"Manoj Kumar","link":"https://stackoverflow.com/users/730911/manoj-kumar"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1327739476,"creation_date":1327739476,"answer_id":9043937,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Yes,\nIf you call ThreadA call , then  not need to call the start method and run method is call after call the ThreadA class only.\nBut If use the ThreadB call then need to necessary the start thread for call run method.\nIf you have any more help, reply me.</p>\n"},{"owner":{"reputation":97,"user_id":1314112,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/62b8ec2e8f538b741b60de37227a6d52?s=128&d=identicon&r=PG","display_name":"Tarvaris Jackson","link":"https://stackoverflow.com/users/1314112/tarvaris-jackson"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1339268955,"creation_date":1339268955,"answer_id":10963798,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>I find it is most useful to use Runnable for all the reasons mentioned, but sometimes I like to extend Thread so I can create my own thread stopping method and call it directly on the thread I have created.</p>\n"},{"owner":{"reputation":963,"user_id":1397969,"user_type":"registered","accept_rate":20,"profile_image":"https://www.gravatar.com/avatar/aff0a6970dfdb511e74b31efe92965b5?s=128&d=identicon&r=PG","display_name":"Himanshu Mohta","link":"https://stackoverflow.com/users/1397969/himanshu-mohta"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1339270111,"creation_date":1339270111,"answer_id":10963921,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Java does not support multiple inheritence so if you extends Thread class then no other class will be extended. </p>\n\n<p>For Example: If you create an applet then it must extends Applet class so here the only way to create thread is by implementing Runnable interface</p>\n"},{"comments":[{"owner":{"reputation":1572,"user_id":1068314,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d078f84b5830144dcbe7ab4959520f6a?s=128&d=identicon&r=PG","display_name":"AntonyM","link":"https://stackoverflow.com/users/1068314/antonym"},"reply_to_user":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":0,"creation_date":1351864571,"post_id":11110781,"comment_id":17964784,"content_license":"CC BY-SA 3.0","body":"cHao what is your point?  You could not use your code above during the execution of the thread to obtain a stacktrace of the threads creation (instead you would get a simple name or at best a stacktrace of the threads launch) but by subclassing thread you can do exactly that and force it, even requiring further context specific information thereby giving you a more concrete understanding of exactly which thread may be having an issue."},{"owner":{"reputation":78117,"user_id":319403,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG","display_name":"cHao","link":"https://stackoverflow.com/users/319403/chao"},"edited":false,"score":8,"creation_date":1351864964,"post_id":11110781,"comment_id":17964970,"content_license":"CC BY-SA 3.0","body":"My point is that &quot;If you implement Runnable then the class that implements Runnable has no control over the thread name...&quot; is patently false.  A class implementing <code>Runnable</code> can indeed control the thread name, as the thread running the code is by definition the current thread (and <i>any code that passes the security checks</i> has control over thread names).  Considering you devote half your post to &quot;omg, what about thread names!&quot;, that seems like a kinda big deal."},{"owner":{"reputation":1800,"user_id":37370,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/4aa184d0463590af1e79c3edf6d46873?s=128&d=identicon&r=PG&f=1","display_name":"RichieHH","link":"https://stackoverflow.com/users/37370/richiehh"},"edited":false,"score":0,"creation_date":1406516376,"post_id":11110781,"comment_id":38847674,"content_license":"CC BY-SA 3.0","body":"The thread name?  Nothing is stopping you extending the thread class as well."}],"owner":{"reputation":1572,"user_id":1068314,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d078f84b5830144dcbe7ab4959520f6a?s=128&d=identicon&r=PG","display_name":"AntonyM","link":"https://stackoverflow.com/users/1068314/antonym"},"comment_count":3,"is_accepted":false,"score":13,"last_activity_date":1340147569,"creation_date":1340147569,"answer_id":11110781,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Everyone here seems to think that implementing Runnable is the way to go and I don't really disagree with them but there is also a case for extending Thread in my opinion, in fact you have sort of demonstrated it in your code.</p>\n\n<p>If you implement Runnable then the class that implements Runnable has no control over the thread name, it is the calling code that can set the thread name, like so:</p>\n\n<pre><code>new Thread(myRunnable,\"WhateverNameiFeelLike\");\n</code></pre>\n\n<p>but if you extend Thread then you get to manage this within the class itself (just like in your example you name the thread 'ThreadB').  In this case you:</p>\n\n<p>A) might give it a more useful name for debugging purposes </p>\n\n<p>B) are forcing that that name be used for all instances of that class (unless you ignore the fact that it is a thread and do the above with it as if it is a Runnable but we are talking about convention here in any case so can ignore that possibility I feel).</p>\n\n<p>You might even for example take a stack trace of its creation and use that as the thread name.  This might seem odd but depending on how your code is structured it can be very useful for debugging purposes.</p>\n\n<p>This might seem like a small thing but where you have a very complex application with a lot of threads and all of a sudden things 'have stopped' (either for reasons of deadlock or possibly because of a flaw in a network protocol which would be less obvious - or other endless reasons) then getting a stack dump from Java where all the threads are called 'Thread-1','Thread-2','Thread-3' is not always very useful (it depends on how your threads are structured and whether you can usefully tell which is which just by their stack trace - not always possible if you are using groups of multiple threads all running the same code).</p>\n\n<p>Having said that you could of course also do the above in a generic way by creating an extension of the thread class which sets its name to a stack trace of its creation call and then use that with your Runnable implementations instead of the standard java Thread class (see below) but in addition to the stack trace there might be more context specific information that would be useful in the thread name for debugging (a reference to one of many queues or sockets it could processing for example in which case you might prefer to extend Thread specifically for that case so that you can have the compiler force you (or others using your libraries) to pass in certain info (e.g. the queue/socket in question) for use in the name).</p>\n\n<p>Here's an example of the generic thread with the calling stack trace as its name:</p>\n\n<pre><code>public class DebuggableThread extends Thread {\n    private static String getStackTrace(String name) {\n        Throwable t= new Throwable(\"DebuggableThread-\"+name);\n        ByteArrayOutputStream os = new ByteArrayOutputStream();\n        PrintStream ps = new PrintStream(os);\n        t.printStackTrace(ps);\n        return os.toString();\n    }\n\n    public DebuggableThread(String name) {\n        super(getStackTrace(name));\n    }\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(new Thread());\n        System.out.println(new DebuggableThread(\"MainTest\"));\n    }\n}\n</code></pre>\n\n<p>and here's a sample of the output comparing the two names:</p>\n\n<pre><code>Thread[Thread-1,5,main]\nThread[java.lang.Throwable: DebuggableThread-MainTest\n    at DebuggableThread.getStackTrace(DebuggableThread.java:6)\n    at DebuggableThread.&lt;init&gt;(DebuggableThread.java:14)\n    at DebuggableThread.main(DebuggableThread.java:19)\n,5,main]\n</code></pre>\n"},{"owner":{"reputation":63,"user_id":1189632,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f927fcb9ea51faa4ad3074bb407bbf1f?s=128&d=identicon&r=PG","display_name":"AHugoH","link":"https://stackoverflow.com/users/1189632/ahugoh"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1341587559,"creation_date":1341587559,"answer_id":11364937,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>This maybe isn't an answer but anyway; there is one more way to create threads:</p>\n\n<pre><code>Thread t = new Thread() {\n    public void run() {\n        // Code here\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":468,"user_id":1458183,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/dba872f7ddc2b9f69a4165b39ff570cc?s=128&d=identicon&r=PG","display_name":"developer110","link":"https://stackoverflow.com/users/1458183/developer110"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1345312031,"creation_date":1345312031,"answer_id":12020863,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p><code>Runnable</code> is an interface, while <code>Thread</code> is a class which implements this interface. From a design point of view, there should be a clean separation between how a task is defined and between how it is executed. The former is the responsibility of a <code>Runnalbe</code> implementation, and the latter is job of the <code>Thread</code> class. In most of the cases implementing <code>Runnable</code> is the right way to follow.</p>\n"},{"comments":[{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":43,"creation_date":1370845508,"post_id":15226278,"comment_id":24593951,"content_license":"CC BY-SA 3.0","body":"Your code is patently wrong. I mean, it does what it does, but not what you intended to show."},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":41,"creation_date":1370845885,"post_id":15226278,"comment_id":24594088,"content_license":"CC BY-SA 3.0","body":"To clarify: for the runnable case you&#39;ve used the same ImplementsRunnable instance to start multiple threads, whereas for the Thread case you&#39;re creating different ExtendsThread instances which obviously leads to the behavior you showed.   The 2nd half of your main method should be:  <code>ExtendsThread et = new ExtendsThread();</code> <code>Thread tc1 = new Thread(et);</code> <code>tc1.start();</code> <code>Thread.sleep(1000);</code> <code>Thread tc2 = new Thread(et);</code> <code>tc2.start();</code> <code>Thread.sleep(1000);</code> <code>Thread tc3 = new Thread(et);</code> <code>tc3.start();</code>  Is it any clearer?"},{"owner":{"reputation":14052,"user_id":918472,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/d4GgD.jpg?s=128&g=1","display_name":"Rupesh Yadav","link":"https://stackoverflow.com/users/918472/rupesh-yadav"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":0,"creation_date":1370859541,"post_id":15226278,"comment_id":24600318,"content_license":"CC BY-SA 3.0","body":"@zEro Have to observed that in both case(implement Runnable &amp; extend Thread), There are three independent threads &amp; in case of extending Thread class each Thread of execution will use there own instance where as in implement Runnable all three threads use same instance to operate on. And, yes we can do it like this but we have more flexibility in case of Runnable."},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":20,"creation_date":1370867357,"post_id":15226278,"comment_id":24604278,"content_license":"CC BY-SA 3.0","body":"I don&#39;t yet understand your intent, but my point was that if you create multiple instances of ExtendsThread -- they will all return 1 (as you&#39;ve shown). You can get the same results for Runnable by doing the same thing there, i.e. creating multiple instances of ImplementsRunnable."},{"owner":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":3,"creation_date":1423480994,"post_id":15226278,"comment_id":45150991,"content_license":"CC BY-SA 3.0","body":"@zEro Hi, I&#39;m from the future. Given that your version of the code has <code>Thread</code> incrementing as well, is the statement <code>by extending Thread, each of your threads has a unique object associated with it, whereas implementing Runnable, many threads can share the same object instance</code> then wrong? If not, then what is a case which demonstrates this?"},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"reply_to_user":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"edited":false,"score":1,"creation_date":1423484041,"post_id":15226278,"comment_id":45152624,"content_license":"CC BY-SA 3.0","body":"@EvilWashingMachine please read all comments (and carefully)... I&#39;m hoping people from the future are smarter than those of us who came before. ;-)"},{"owner":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":0,"creation_date":1423489741,"post_id":15226278,"comment_id":45155972,"content_license":"CC BY-SA 3.0","body":"@zero unfortunately due to GM crops, declining test standards and global warming we in the future are really much more dumb than you guys are....I only see your 3 comments saying how Rupesh&#39;s sample doesn&#39;t prove his point, which I understand what the problem was, but nothing surrounding the statement he made nor a sample which shows this is the case. Of course you&#39;re not obligated to, but consider it a massive favour to us in the future? :)"},{"owner":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"edited":false,"score":0,"creation_date":1423490179,"post_id":15226278,"comment_id":45156249,"content_license":"CC BY-SA 3.0","body":"(note I do know the object difference in thread and runnable, I&#39;ve never seen it be an issue however)"},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"reply_to_user":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"edited":false,"score":3,"creation_date":1431979661,"post_id":15226278,"comment_id":48719186,"content_license":"CC BY-SA 3.0","body":"@EvilWashingMachine: Been inactive for long.. and just saw this. I&#39;ve added the object&#39;s hashcode to the print statements... <code>+ &quot; hashcode: &quot; + this.hashCode()</code>"},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"reply_to_user":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"edited":false,"score":2,"creation_date":1431980281,"post_id":15226278,"comment_id":48719485,"content_license":"CC BY-SA 3.0","body":"@EvilWashingMachine See the result here: <a href=\"http://goo.gl/ub2L8G\" rel=\"nofollow noreferrer\">goo.gl/ub2L8G</a>   You&#39;ll observe that with the ExtendsThread (ET), we are creating different threads as different objects (<b>hint</b>: hashcode) that are being run so counter for all of them is always initialized to zero and are then incremented to 1. Whereas, with ImplementsRunnable we are creating one ImplementsRunnable instance (that&#39;s the object; <b>hint</b>: hashcode) and we <i>run</i> it using 3 different threads."},{"owner":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":1,"creation_date":1432053022,"post_id":15226278,"comment_id":48757130,"content_license":"CC BY-SA 3.0","body":"@zEro thanks for returning, but I wasn&#39;t contending your comment...rather, I was asking if Rupesh&#39;s claim is true or false? In other words, if you extend <code>Thread</code>, do multiple instances of the <code>Thread</code> actually become different objects? Because I think this is wrong..."},{"owner":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"reply_to_user":{"reputation":1126,"user_id":1344935,"user_type":"registered","accept_rate":69,"profile_image":"https://www.gravatar.com/avatar/beb1bb0aef7f0230567cbf69cba83373?s=128&d=identicon&r=PG","display_name":"Evil Washing Machine","link":"https://stackoverflow.com/users/1344935/evil-washing-machine"},"edited":false,"score":1,"creation_date":1432057809,"post_id":15226278,"comment_id":48759971,"content_license":"CC BY-SA 3.0","body":"@EvilWashingMachine Note that <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread(java.lang.Runnable)\" rel=\"nofollow noreferrer\">Thread(Runnable r)</a> is similar to <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread(java.lang.ThreadGroup,%20java.lang.Runnable,%20java.lang.String)\" rel=\"nofollow noreferrer\">Thread(ThreadGroup group,       Runnable target,       String name)</a>  This means that we are only setting the target of the thread, and the Thread&#39;s run method does nothing but to delegate to the target&#39;s run method - <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#run()\" rel=\"nofollow noreferrer\">mentioned here</a>"},{"owner":{"reputation":435,"user_id":2267126,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/b2f95a11dc420bad2958eb03d91e857a?s=128&d=identicon&r=PG","display_name":"zeal","link":"https://stackoverflow.com/users/2267126/zeal"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":1,"creation_date":1432497430,"post_id":15226278,"comment_id":48940377,"content_license":"CC BY-SA 3.0","body":"@zEro I am with you brother I get what you are saying. Since <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html\" rel=\"nofollow noreferrer\">Thread</a> class itself implements runnable interface, so any instance of a class extending the Thread class can be passed in to creating <code>new Thread(et)</code> in the running process i.e (as you rightly said) <code>ExtendsThread et = new ExtendsThread(); Thread tc1 = new Thread(et); tc1.start(); Thread tc2 = new Thread(et); tc1.start(); </code> now these two thread will share same instance i.e  <code>&lt;et&gt;</code>, where as in this case not [please read the below comment for completion]"},{"owner":{"reputation":435,"user_id":2267126,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/b2f95a11dc420bad2958eb03d91e857a?s=128&d=identicon&r=PG","display_name":"zeal","link":"https://stackoverflow.com/users/2267126/zeal"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":2,"creation_date":1432497495,"post_id":15226278,"comment_id":48940399,"content_license":"CC BY-SA 3.0","body":"@zEro   ` ExtendsThread tc1 = new ExtendsThread(); tc1.start(); Thread.sleep(1000); // Waiting for 1 second before starting next thread ExtendsThread tc2 = new ExtendsThread(); tc2.start();  `"},{"owner":{"reputation":12274,"user_id":33204,"user_type":"registered","accept_rate":69,"profile_image":"https://i.stack.imgur.com/6fMZI.png?s=128&g=1","display_name":"slm","link":"https://stackoverflow.com/users/33204/slm"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":0,"creation_date":1572185715,"post_id":15226278,"comment_id":103474991,"content_license":"CC BY-SA 4.0","body":"@zEro - was this thread of comments addressed in this A&#39;er? This A&#39;er shows up on google and it would be nice if ppl didn&#39;t have to parse thru the comments to understand this critical aspect of the various approaches."},{"owner":{"reputation":193,"user_id":1868371,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/4naT1.png?s=128&g=1","display_name":"Gerardo Cauich","link":"https://stackoverflow.com/users/1868371/gerardo-cauich"},"reply_to_user":{"reputation":1226,"user_id":1920968,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d86485848ffa24e80357abe78325a56d?s=128&d=identicon&r=PG","display_name":"zEro","link":"https://stackoverflow.com/users/1920968/zero"},"edited":false,"score":0,"creation_date":1574932058,"post_id":15226278,"comment_id":104406130,"content_license":"CC BY-SA 4.0","body":"As @zEro mentioned. You can get the same behaviour of <code>ExtendsThread</code> if you create 3 instances of <code>ImplementsRunnable</code> so I think this is not a valid point. Downvoted."},{"owner":{"reputation":5645,"user_id":908621,"user_type":"registered","accept_rate":61,"profile_image":"https://www.gravatar.com/avatar/f275c40d3a1fefc35699d94b20bb4acd?s=128&d=identicon&r=PG","display_name":"fishinear","link":"https://stackoverflow.com/users/908621/fishinear"},"edited":false,"score":0,"creation_date":1609707265,"post_id":15226278,"comment_id":115900898,"content_license":"CC BY-SA 4.0","body":"As far as I can see, the answer tries to point out exactly the difference that the comments object against. It tries to point out that, by using a single Runnable object, you CAN make one object that is shared by multiple threads. But because this is trivially achieved with subclassing Threads as well, and is something you need to be very careful about, I don&#39;t see why this answer is relevant."}],"owner":{"reputation":14052,"user_id":918472,"user_type":"registered","accept_rate":71,"profile_image":"https://i.stack.imgur.com/d4GgD.jpg?s=128&g=1","display_name":"Rupesh Yadav","link":"https://stackoverflow.com/users/918472/rupesh-yadav"},"comment_count":17,"is_accepted":false,"score":247,"last_activity_date":1594072465,"last_edit_date":1594072465,"creation_date":1362493564,"answer_id":15226278,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>Well so many good Answers, I want to add more on this. This will help to understand <code>Extending v/s Implementing Thread</code>.<br>Extends binds two class files very closely and can cause some pretty hard to deal with code.</p>\n<p>Both approaches do the same job but there have been some differences.<br>\n<em>The most common difference is</em></p>\n<ol>\n<li>When you extend Thread class, after that you canât extend any other class which you required. (As you know, Java does not allow inheriting more than one class).</li>\n<li>When you implement Runnable, you can save space for your class to extend any other class in the future or now.</li>\n</ol>\n<p><em>However, one <strong>significant difference</strong> between implementing Runnable and extending Thread is that<br></em> <code>by extending Thread, each of your threads has a unique object associated with it, whereas implementing Runnable, many threads can share the same object instance.</code></p>\n<p><strong>The following example will help you to understand more clearly</strong></p>\n<pre><code>//Implement Runnable Interface...\nclass ImplementsRunnable implements Runnable {\n\n    private int counter = 0;\n\n    public void run() {\n        counter++;\n        System.out.println(&quot;ImplementsRunnable : Counter : &quot; + counter);\n    }\n}\n\n//Extend Thread class...\nclass ExtendsThread extends Thread {\n\n    private int counter = 0;\n\n    public void run() {\n        counter++;\n        System.out.println(&quot;ExtendsThread : Counter : &quot; + counter);\n    }\n}\n    \n//Use the above classes here in main to understand the differences more clearly...\npublic class ThreadVsRunnable {\n\n    public static void main(String args[]) throws Exception {\n        // Multiple threads share the same object.\n        ImplementsRunnable rc = new ImplementsRunnable();\n        Thread t1 = new Thread(rc);\n        t1.start();\n        Thread.sleep(1000); // Waiting for 1 second before starting next thread\n        Thread t2 = new Thread(rc);\n        t2.start();\n        Thread.sleep(1000); // Waiting for 1 second before starting next thread\n        Thread t3 = new Thread(rc);\n        t3.start();\n\n        // Creating new instance for every thread access.\n        ExtendsThread tc1 = new ExtendsThread();\n        tc1.start();\n        Thread.sleep(1000); // Waiting for 1 second before starting next thread\n        ExtendsThread tc2 = new ExtendsThread();\n        tc2.start();\n        Thread.sleep(1000); // Waiting for 1 second before starting next thread\n        ExtendsThread tc3 = new ExtendsThread();\n        tc3.start();\n    }\n}\n</code></pre>\n<p><strong>Output of the above program.</strong></p>\n<pre><code>ImplementsRunnable : Counter : 1\nImplementsRunnable : Counter : 2\nImplementsRunnable : Counter : 3\nExtendsThread : Counter : 1\nExtendsThread : Counter : 1\nExtendsThread : Counter : 1\n</code></pre>\n<p>In the Runnable interface approach, only one instance of a class is being created and it has been shared by different threads. So the value of counter is incremented for each and every thread access.</p>\n<p>Whereas, Thread class approach, you must have to create separate instance for every thread access. Hence different memory is allocated for every class instances and each has separate counter, the value remains same, which means no increment will happen because none of the object reference is same.</p>\n<p><strong>When to use Runnable?</strong><br>\nUse Runnable interface when you want to access the same resources from the group of threads. Avoid using Thread class here, because multiple objects creation consumes more memory and it becomes a big performance overhead.</p>\n<p>A class that implements Runnable is not a thread and just a class. For a Runnable to become a Thread, You need to create an instance of Thread and passing itself in as the target.</p>\n<p>In most cases, the Runnable interface should be used if you are only planning to override the <code>run()</code> method and no other Thread methods. This is important because classes should not be subclassed unless the programmer intends on modifying or enhancing the fundamental behavior of the class.</p>\n<p>When there is a need to extend a superclass, implementing the Runnable interface is more appropriate than using the Thread class. Because we can extend another class while implementing Runnable interface to make a thread.<br></p>\n<p>I hope this will help!</p>\n"},{"owner":{"reputation":14014,"user_id":1769720,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/5815db653a13a7122066f811caa020a7?s=128&d=identicon&r=PG","display_name":"didierc","link":"https://stackoverflow.com/users/1769720/didierc"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1368261699,"last_edit_date":1368261699,"creation_date":1363601671,"answer_id":15474258,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>That's the <a href=\"http://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"noreferrer\">S</a> of <a href=\"http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29\" rel=\"noreferrer\">SOLID</a>: Single responsibility. </p>\n\n<p>A <em>thread</em> embodies the <strong>running context</strong> (as in execution context: stack frame, thread id, etc.) of the <em>asynchronous execution</em> of a piece of code. That <em>piece of code</em> ideally should be the same implementation, whether <em>synchronous</em> or <em>asynchronous</em>.</p>\n\n<p>If you bundle them together in one implementation, you give the resulting object two <em>unrelated</em> causes of change:</p>\n\n<ol>\n<li>thread handling in your application (ie. querying and modifying the execution context)</li>\n<li>algorithm implemented by the piece of code (the runnable part)</li>\n</ol>\n\n<p>If the language you use supports partial classes or multiple inheritance, then you can segregate each cause in its own super class, but it boils down to the same as composing the two objects, since their feature sets don't overlap. That's for the theory. </p>\n\n<p>In practice, generally speaking, a programme does not need to carry more complexity than necessary. If you have one thread working on a specific task, without ever changing that task, there is probably no point in making the tasks separate classes, and your code remains simpler.  </p>\n\n<p>In the context of <em>Java</em>, since the facility is <strong>already there</strong>, it is probably easier to start directly with stand alone <code>Runnable</code> classes, and pass their instances to <code>Thread</code> (or <code>Executor</code>) instances. Once <em>used</em> to that pattern, it is not harder to use (or even read) than the simple runnable thread case.</p>\n"},{"owner":{"reputation":19591,"user_id":1575570,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/VxyEw.jpg?s=128&g=1","display_name":"Nidhish Krishnan","link":"https://stackoverflow.com/users/1575570/nidhish-krishnan"},"comment_count":0,"is_accepted":false,"score":79,"last_activity_date":1555972218,"last_edit_date":1555972218,"creation_date":1368262782,"answer_id":16495477,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>If you want to implements or extends any other class then <code>Runnable</code> interface is most preferable, otherwise, if you do not want any other class to extend or implement then <code>Thread</code> class is preferable. </p>\n\n<p><strong>The most common difference is</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/vLRdp.gif\" alt=\"enter image description here\"></p>\n\n<p>When you <code>extends Thread</code> class, after that you canât extend any other class which you required. (As you know, Java does not allow inheriting more than one class).</p>\n\n<p>When you <code>implements Runnable</code>, you can save space for your class to extend any other class in the future or now.</p>\n\n<ul>\n<li><p>Java doesn't support multiple inheritances, which means you can only extend one class in Java so once you extended Thread class you lost your chance and cannot extend or inherit another class in Java.</p></li>\n<li><p>In Object-oriented programming, extending a class generally means, adding new functionality, and modifying or improving behaviors. If we are not making any modification on Thread then use Runnable interface instead.</p></li>\n<li><p>Runnable interface represents a Task which can be executed by either plain Thread or Executors or any other means. so logical separation of Task as Runnable than Thread is a good design decision.</p></li>\n<li><p>Separating task as Runnable means we can reuse the task and also has the liberty to execute it from different means. since you can not restart a Thread once it completes. again Runnable vs Thread for task, Runnable is winner.</p></li>\n<li><p>Java designer recognizes this and that's why Executors accept Runnable as Task and they have worker thread which executes those task.</p></li>\n<li><p>Inheriting all Thread methods are additional overhead just for representing a Task which can be done easily with Runnable.</p></li>\n</ul>\n\n<p>Courtesy from <a href=\"http://javarevisited.blogspot.com/2012/01/difference-thread-vs-runnable-interface.html\" rel=\"noreferrer\">javarevisited.blogspot.com</a></p>\n\n<p>These were some of the notable differences between Thread and Runnable in Java. If you know any other differences on Thread vs Runnable than please share it via comments. I personally use Runnable over Thread for this scenario and recommends to use Runnable or Callable interface based on your requirement.</p>\n\n<p><strong>However, the significant difference is.</strong></p>\n\n<p>When you <code>extends Thread</code> class, each of your thread creates a unique object and associate with it.\nWhen you <code>implements Runnable</code>, it shares the same object to multiple threads.</p>\n"},{"comments":[{"owner":{"reputation":1731,"user_id":1901896,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/77b2651b08f4279ec5a29169d6c40c3d?s=128&d=identicon&r=PG","display_name":"Akash5288","link":"https://stackoverflow.com/users/1901896/akash5288"},"edited":false,"score":1,"creation_date":1386137464,"post_id":17864833,"comment_id":30408591,"content_license":"CC BY-SA 3.0","body":"Yes by implementing Runnable interface to are free to implement your own logic by extending any class, thats why Runnable is mostly preferred over Thread class."}],"owner":{"reputation":391,"user_id":1832655,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/6f048c2ad51367bc7e9ef88a217f91bf?s=128&d=identicon&r=PG","display_name":"Nikhil A A","link":"https://stackoverflow.com/users/1832655/nikhil-a-a"},"comment_count":1,"is_accepted":false,"score":6,"last_activity_date":1374773340,"creation_date":1374773340,"answer_id":17864833,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>One reason you'd want to implement an interface rather than extend a base class is that you are already extending some other class. You can only extend one class, but you can implement any number of interfaces.</p>\n\n<p>If you extend Thread, you're basically preventing your logic to be executed by any other thread than 'this'. If you only want <em>some</em> thread to execute your logic, it's better to just implement Runnable.</p>\n"},{"owner":{"reputation":962,"user_id":2771655,"user_type":"registered","accept_rate":41,"profile_image":"https://www.gravatar.com/avatar/05279bac8c6031c76f499fb1d37cab9a?s=128&d=identicon&r=PG&f=1","display_name":"user2771655","link":"https://stackoverflow.com/users/2771655/user2771655"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1380175082,"creation_date":1380175082,"answer_id":19020435,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>if you use runnable you can save the space to extend to any of your other class.</p>\n"},{"owner":{"reputation":7256,"user_id":1014830,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/ca45c857a2784ae22f54acf3d0d94744?s=128&d=identicon&r=PG&f=1","display_name":"dharam","link":"https://stackoverflow.com/users/1014830/dharam"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1385089911,"creation_date":1385089911,"answer_id":20136329,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Can we re-visit the basic reason we wanted our class to behave as a <code>Thread</code>?\nThere is no reason at all, we just wanted to execute a task, most likely in an asynchronous mode, which precisely means that the execution of the task must branch from our main thread and the main thread if finishes early, may or may not wait for the branched path(task).</p>\n\n<p>If this is the whole purpose, then where do I see the need of a specialized Thread. This can be accomplished by picking up a RAW Thread from the System's Thread Pool and assigning it our task (may be an instance of our class) and that is it.</p>\n\n<p>So let us obey the OOPs concept and write a class of the type we need. There are many ways to do things, doing it in the right way matters. </p>\n\n<p>We need a task, so write a task definition which can be run on a Thread. So use Runnable.</p>\n\n<p>Always remember <code>implements</code> is specially used to impart a behaviour and <code>extends</code> is used to impart a feature/property.</p>\n\n<p>We do not want the thread's property, instead we want our class to behave as a task which can be run.</p>\n"},{"owner":{"reputation":4446,"user_id":2231887,"user_type":"registered","accept_rate":88,"profile_image":"https://i.stack.imgur.com/osd8f.png?s=128&g=1","display_name":"Sionnach733","link":"https://stackoverflow.com/users/2231887/sionnach733"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1390322649,"creation_date":1390322649,"answer_id":21264101,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>This is discussed in Oracle's <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html\">Defining and Starting a Thread</a> tutorial:</p>\n\n<blockquote>\n  <p>Which of these idioms should you use? The first idiom, which employs a\n  Runnable object, is more general, because the Runnable object can\n  subclass a class other than Thread. The second idiom is easier to use\n  in simple applications, but is limited by the fact that your task\n  class must be a descendant of Thread. This lesson focuses on the first\n  approach, which separates the Runnable task from the Thread object\n  that executes the task. Not only is this approach more flexible, but\n  it is applicable to the high-level thread management APIs covered\n  later.</p>\n</blockquote>\n\n<p>In other words, implementing <code>Runnable</code> will work in scenarios where your class extends a class other than <code>Thread</code>. Java does not support multiple inheritance. Also, extending <code>Thread</code> will not be possible when using some of the high-level thread management APIs. The only scenario where extending <code>Thread</code> is preferable is in a small application that won't be subject to updates in future. It is almost always better to implement <code>Runnable</code> as it is more flexible as your project grows. A design change won't have a major impact as you can implement many interfaces in java, but only extend one class.</p>\n"},{"comments":[{"owner":{"reputation":2244,"user_id":472992,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JT0T5.jpg?s=128&g=1","display_name":"J&#246;rg","link":"https://stackoverflow.com/users/472992/j%c3%b6rg"},"reply_to_user":{"reputation":6256,"user_id":685806,"user_type":"registered","accept_rate":44,"profile_image":"https://i.stack.imgur.com/ZKxUb.jpg?s=128&g=1","display_name":"Pino","link":"https://stackoverflow.com/users/685806/pino"},"edited":false,"score":0,"creation_date":1461924959,"post_id":21749501,"comment_id":61430485,"content_license":"CC BY-SA 3.0","body":"@Pino Yes, Thread itself is also a Runnable. However, if you extend it to just use it as a Runnable, what&#39;s the point? Why not just use a plain Runnable without all the baggage. So, I&#39;d argue, that if you extend Thread, you also would execute it by using its start method, which can only be used once. That&#39;s the point Nidhish-Krishnan wanted to make in his answer. Note, that mine is just a compilation or brief summary of other answers here."}],"owner":{"reputation":2244,"user_id":472992,"user_type":"registered","profile_image":"https://i.stack.imgur.com/JT0T5.jpg?s=128&g=1","display_name":"J&#246;rg","link":"https://stackoverflow.com/users/472992/j%c3%b6rg"},"comment_count":1,"is_accepted":false,"score":12,"last_activity_date":1415870384,"last_edit_date":1495542396,"creation_date":1392282431,"answer_id":21749501,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Since this is a very popular topic and the good answers are spread all over and dealt with in great depth, I felt it is justifiable to compile the good answers from the others into a more concise form, so newcomers have an easy overview upfront:</p>\n\n<ol>\n<li><p>You usually extend a class to add or modify functionality. So, <em>if you don't want</em> to <strong>overwrite</strong> any <strong>Thread behavior</strong>, then use Runnable.</p></li>\n<li><p>In the same light, <em>if you don't need</em> to <strong>inherit</strong> thread methods, you can do without that <strong>overhead</strong> by using Runnable.</p></li>\n<li><p><strong>Single inheritance</strong>: If you extend Thread you cannot extend from any other class, so if that is what you need to do, you have to use Runnable.</p></li>\n<li><p>It is good design to separate domain logic from technical means, in that sense it is better to have a Runnable task <strong>isolating</strong> your <strong>task from</strong> your <strong>runner</strong>.</p></li>\n<li><p>You can <strong>execute</strong> the same Runnable <strong>object multiple times</strong>, a Thread object, however, can only be started once. (Maybe the reason, why Executors do accept Runnables, but not Threads.)</p></li>\n<li><p>If you develop your task as Runnable, you have <strong>all flexibility how to use it now and in the future</strong>. You can have it run concurrently via Executors but also via Thread. And you still could also use/call it non-concurrently within the same thread just as any other ordinary type/object. </p></li>\n<li><p>This makes it also easier to <strong>separate</strong> task-logic and concurrency <strong>aspects in</strong> your <strong>unit tests</strong>.</p></li>\n<li><p>If you are interested in this question, you might be also interested in the <a href=\"https://stackoverflow.com/questions/141284/the-difference-between-the-runnable-and-callable-interfaces-in-java\">difference between Callable and Runnable</a>.</p></li>\n</ol>\n"},{"owner":{"reputation":109,"user_id":3317784,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fee8b31207d07fa67eda34274411b373?s=128&d=identicon&r=PG&f=1","display_name":"Rohit Chugh","link":"https://stackoverflow.com/users/3317784/rohit-chugh"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1394000038,"creation_date":1394000038,"answer_id":22190019,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Difference between Thread and runnable\n.If  we are creating Thread using Thread class then Number of thread equal to number of object we created  .\nIf we are creating thread  by implementing the runnable interface then we can use single object for creating multiple thread.So single object is shared by multiple Thread.So it will take less memory</p>\n\n<p>So depending upon the requirement if our data is not senstive. So It can be shared between multiple Thread we can used Runnable interface.</p>\n"},{"owner":{"reputation":631,"user_id":1142548,"user_type":"registered","accept_rate":80,"profile_image":"https://www.gravatar.com/avatar/ce15808d3c378b33f5be35fc063f9d96?s=128&d=identicon&r=PG","display_name":"samkit shah","link":"https://stackoverflow.com/users/1142548/samkit-shah"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1403076159,"creation_date":1403076159,"answer_id":24279390,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Simple way to say is:\nIf you implement interface that means you are implementing all methods of it and if you extending the class you are inheriting method of your choice... \nIn this case,there is <strong>only a one method named Run()</strong> so <strong>better to implement Runnable interface..</strong></p>\n"},{"comments":[{"owner":{"reputation":5557,"user_id":199364,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/75807746d41c9905452d252595f7b89d?s=128&d=identicon&r=PG","display_name":"ToolmakerSteve","link":"https://stackoverflow.com/users/199364/toolmakersteve"},"edited":false,"score":0,"creation_date":1441454183,"post_id":25014151,"comment_id":52692769,"content_license":"CC BY-SA 3.0","body":"This answer needs explanation. After some puzzling, I conclude that <code>() -&gt; {}</code> is supposed to represent the custom logic that someone needs? So it would be better said as <code>() -&gt; { &#47;* Code here *&#47; }</code>?"}],"owner":{"reputation":13132,"user_id":3179759,"user_type":"registered","profile_image":"https://i.stack.imgur.com/etgjJ.png?s=128&g=1","display_name":"Alex - GlassEditor.com","link":"https://stackoverflow.com/users/3179759/alex-glasseditor-com"},"comment_count":1,"is_accepted":false,"score":19,"last_activity_date":1441455044,"last_edit_date":1441455044,"creation_date":1406633096,"answer_id":25014151,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>With the release of Java 8, there is now a third option.</p>\n\n<p><code>Runnable</code> is a <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-9.html#jls-9.8\">functional interface</a>, which means that instances of it can be created with lambda expressions or method references.</p>\n\n<p>Your example can be replaced with:</p>\n\n<pre><code>new Thread(() -&gt; { /* Code here */ }).start()\n</code></pre>\n\n<p>or if you want to use an <code>ExecutorService</code> and a method reference:</p>\n\n<pre><code>executor.execute(runner::run)\n</code></pre>\n\n<p>These are not only much shorter than your examples, but also come with many of the advantages stated in other answers of using <code>Runnable</code> over <code>Thread</code>, such as single responsibility and using composition because you're not specializing the thread's behaviour. This way also avoids creating an extra class if all you need is a <code>Runnable</code> as you do in your examples.</p>\n"},{"owner":{"reputation":2296,"user_id":1853458,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/e8fd7389c2c9476c6f32a2d5713d5082?s=128&d=identicon&r=PG","display_name":"veritas","link":"https://stackoverflow.com/users/1853458/veritas"},"comment_count":0,"is_accepted":false,"score":5,"last_activity_date":1420278079,"last_edit_date":1420278079,"creation_date":1420243916,"answer_id":27750341,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Adding my two cents here -\n<strong>Always whenever possible use <code>implements Runnable</code> . Below are two caveats on why you should not use \n<code>extends Thread</code>s</strong></p>\n\n<ol>\n<li><p>Ideally you should never extend the Thread class; the <code>Thread</code> class should be made <code>final</code>.\nAt least its methods like <code>thread.getId()</code>. \nSee <a href=\"http://jsr166-concurrency.10961.n7.nabble.com/RRWL-with-bad-Thread-getId-implementations-tc9754.html\" rel=\"noreferrer\">this</a> discussion for a bug related to extending <code>Thread</code>s. </p></li>\n<li><p>Those who like to solve puzzles can see another side effect of extending Thread. The below code \nwill print unreachable code when nobody is notifying them.</p></li>\n</ol>\n\n<p>Please see  <a href=\"http://pastebin.com/BjKNNs2G\" rel=\"noreferrer\">http://pastebin.com/BjKNNs2G</a>. </p>\n\n<pre><code>public class WaitPuzzle {\n\n    public static void main(String[] args) throws InterruptedException {\n        DoNothing doNothing = new DoNothing();\n        new WaitForever(doNothing).start();\n        new WaitForever(doNothing).start();\n        new WaitForever(doNothing).start();\n        Thread.sleep(100);\n        doNothing.start();\n        while(true) {\n            Thread.sleep(10);\n        }\n    }\n\n\n    static class WaitForever extends  Thread {\n\n        private DoNothing doNothing;\n\n        public WaitForever(DoNothing doNothing) {\n            this.doNothing =  doNothing;\n        }\n\n        @Override\n        public void run() {\n            synchronized (doNothing) {\n                try {\n                    doNothing.wait(); // will wait forever here as nobody notifies here\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(\"Unreachable Code\");\n            }\n        }\n    }\n\n    static class DoNothing extends Thread {\n\n        @Override\n        public void run() {\n            System.out.println(\"Do Nothing \");\n        }\n    } \n}\n</code></pre>\n"},{"owner":{"reputation":706,"user_id":1720452,"user_type":"registered","accept_rate":20,"profile_image":"https://i.stack.imgur.com/KX6si.jpg?s=128&g=1","display_name":"Vishal","link":"https://stackoverflow.com/users/1720452/vishal"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1435931162,"last_edit_date":1435931162,"creation_date":1424324260,"answer_id":28599310,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>One difference between implementing Runnable and extending Thread is that by extending Thread, each of your threads has a unique object associated with it, whereas implementing Runnable, many threads can share the same object instance.</p>\n\n<p>A class that implements Runnable is not a thread and just a class. For a Runnable to be executed by a Thread, you need to create an instance of Thread and pass the Runnable instance in as the target.</p>\n\n<p>In most cases, the Runnable interface should be used if you are only planning to override the run() method and no other Thread methods. This is important because classes should not be subclassed unless the programmer intends on modifying or enhancing the fundamental behavior of the class.</p>\n\n<p>When there is a need to extend a superclass, implementing the Runnable interface is more appropriate than using the Thread class. Because we can extend another class while implementing Runnable interface to make a thread. But if we just extend the Thread class we can't inherit from any other class.</p>\n"},{"comments":[{"owner":{"reputation":1358,"user_id":4483113,"user_type":"registered","profile_image":"https://i.stack.imgur.com/v2ENl.jpg?s=128&g=1","display_name":"idelvall","link":"https://stackoverflow.com/users/4483113/idelvall"},"edited":false,"score":3,"creation_date":1458665497,"post_id":30192904,"comment_id":59958081,"content_license":"CC BY-SA 3.0","body":"Exactly! This should be the accepted answer. BTW I think the question has been edited and <code>ThreadA</code> has no longer sense"},{"owner":{"reputation":6286,"user_id":1354334,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/RATXE.jpg?s=128&g=1","display_name":"Saif","link":"https://stackoverflow.com/users/1354334/saif"},"reply_to_user":{"reputation":1358,"user_id":4483113,"user_type":"registered","profile_image":"https://i.stack.imgur.com/v2ENl.jpg?s=128&g=1","display_name":"idelvall","link":"https://stackoverflow.com/users/4483113/idelvall"},"edited":false,"score":0,"creation_date":1458666613,"post_id":30192904,"comment_id":59958817,"content_license":"CC BY-SA 3.0","body":"the accepted answer is much more delegate thanks for you response @idelvall"},{"owner":{"reputation":376,"user_id":1727934,"user_type":"registered","accept_rate":0,"profile_image":"https://www.gravatar.com/avatar/deef8bca9259772af8ce18531df29b45?s=128&d=identicon&r=PG","display_name":"MichaelYe","link":"https://stackoverflow.com/users/1727934/michaelye"},"edited":false,"score":1,"creation_date":1582290925,"post_id":30192904,"comment_id":106736521,"content_license":"CC BY-SA 4.0","body":"The best answer! Thanks!"}],"owner":{"reputation":6286,"user_id":1354334,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/RATXE.jpg?s=128&g=1","display_name":"Saif","link":"https://stackoverflow.com/users/1354334/saif"},"comment_count":3,"is_accepted":false,"score":78,"last_activity_date":1470203939,"last_edit_date":1470203939,"creation_date":1431438615,"answer_id":30192904,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Actually, It is not wise to compare <code>Runnable</code> and <code>Thread</code> with each other.  </p>\n\n<p>This two have a dependency and relationship in multi-threading just like <code>Wheel and Engine</code> relationship of motor vehicle.</p>\n\n<p>I would say, there is only one way for multi-threading with two steps. Let me make my point.</p>\n\n<p><strong>Runnable:</strong><br>\nWhen implementing <code>interface Runnable</code> it means you are creating something which is <code>run able</code> in a different thread. Now creating something which can run inside a thread (runnable inside a thread), doesn't mean to creating a Thread.<br>\nSo the class <code>MyRunnable</code> is nothing but a ordinary class with a <code>void run</code> method.\nAnd it's objects will be some ordinary objects with only a method <code>run</code> which will execute normally when called.  (unless we pass the object in a thread).</p>\n\n<p><strong>Thread:</strong><br>\n<code>class Thread</code>, I would say A very special class with the capability of starting a new Thread which actually enables multi-threading through its <code>start()</code> method.</p>\n\n<p><strong>Why not wise to compare?</strong><br>\nBecause we need both of them for multi-threading.   </p>\n\n<p>For Multi-threading we need two things:  </p>\n\n<ul>\n<li>Something that can run inside a Thread (Runnable).   </li>\n<li>Something That can start a new Thread (Thread).</li>\n</ul>\n\n<p>So technically and theoretically  both of them is necessary to start a thread, one will <strong>run</strong> and one will <strong>make it run</strong> (Like <strong><code>Wheel and Engine</code></strong> of motor vehicle).</p>\n\n<p>That's why you can not start a thread with <code>MyRunnable</code> you need to pass it to a instance of <code>Thread</code>.</p>\n\n<p><strong>But</strong> it is possible to create and run a thread only using <code>class Thread</code> because Class <code>Thread</code> implements <code>Runnable</code> so we all know <code>Thread</code> also is a <code>Runnable</code> inside.</p>\n\n<p><strong>Finally <code>Thread</code> and <code>Runnable</code> are complement to each other for multithreading  not competitor or replacement.</strong></p>\n"},{"owner":{"reputation":494043,"user_id":57695,"user_type":"registered","accept_rate":75,"profile_image":"https://www.gravatar.com/avatar/53ee9941b3fefef67175daf212e62d41?s=128&d=identicon&r=PG","display_name":"Peter Lawrey","link":"https://stackoverflow.com/users/57695/peter-lawrey"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1437933689,"creation_date":1437933689,"answer_id":31640214,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Thread holds behaviour which is not intended to be accessed;</p>\n\n<ul>\n<li>it's synchronized lock is used for join etc.</li>\n<li>it has methods you can access by accident.</li>\n</ul>\n\n<p>however if you sub-class Thread have to consider more Thread is implemented.</p>\n\n<pre><code>public class ThreadMain {\n    public int getId() {\n        return 12345678;\n    }\n\n    public String getName() {\n        return \"Hello World\";\n    }\n\n    public String getState() {\n        return \"testing\";\n    }\n\n    public void example() {\n        new Thread() {\n            @Override\n            public void run() {\n                System.out.println(\"id: \"+getId()+\", name: \"+getName()+\", state: \"+getState());\n            }\n        }.start();\n    }\n\n    public static void main(String[] args) {\n        new ThreadMain().example();\n    }\n}\n</code></pre>\n\n<p>If you run this you might expect</p>\n\n<pre><code>id: 12345678, name: Hello World, state: testing\n</code></pre>\n\n<p>however, you are not calling the methods you think you are because you are using the method in <code>Thread</code> not <code>ThreadMain</code> and instead you see something like</p>\n\n<pre><code>id: 11, name: Thread-0, state: RUNNABLE\n</code></pre>\n"},{"owner":{"reputation":3050,"user_id":5223309,"user_type":"registered","accept_rate":40,"profile_image":"https://i.stack.imgur.com/ZazF9.jpg?s=128&g=1","display_name":"Shababb Karim","link":"https://stackoverflow.com/users/5223309/shababb-karim"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1546499926,"last_edit_date":1546499926,"creation_date":1439539660,"answer_id":32005221,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>The simplest explanation would be by implementing <code>Runnable</code> we can assign the same object to multiple threads and each <code>Thread</code> shares the same object states and behavior. </p>\n\n<p>For example, suppose there are two threads, <strong>thread1</strong> puts an integer in an array and <strong>thread2</strong> takes integers from the array when the array is filled up. Notice that in order for <strong>thread2</strong> to work it needs to know the state of array, whether <strong>thread1</strong> has filled it up or not. </p>\n\n<p>Implementing <code>Runnable</code> lets you to have this flexibility to share the object whereas <code>extends Thread</code> makes you to create new objects for each threads therefore any update that is done by thread1 is lost to thread2.    </p>\n"},{"owner":{"reputation":41397,"user_id":4999394,"user_type":"registered","accept_rate":98,"profile_image":"https://i.stack.imgur.com/nAGmt.png?s=128&g=1","display_name":"Ravindra babu","link":"https://stackoverflow.com/users/4999394/ravindra-babu"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1455355953,"last_edit_date":1495540051,"creation_date":1455355953,"answer_id":35378242,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>If I am not wrong, it's more or less similar to </p>\n\n<p><a href=\"https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class/33957698#33957698\">What is the difference between an interface and abstract class?</a></p>\n\n<p>extends establishes \"<strong>Is A</strong>\" relation &amp; interface provides \"<strong>Has a</strong>\" capability.</p>\n\n<p>Prefer <strong><em>implements Runnable</em></strong> :</p>\n\n<ol>\n<li>If you don't have to extend Thread class and modify Thread API default implementation</li>\n<li>If you are executing a fire and forget command</li>\n<li>If You are already extending another class</li>\n</ol>\n\n<p>Prefer \"<strong><em>extends Thread</em></strong>\" :</p>\n\n<ol>\n<li>If you have to override any of these <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html\" rel=\"nofollow noreferrer\">Thread</a> methods as listed in oracle documentation page</li>\n</ol>\n\n<p>Generally you don't need to override Thread behaviour. So <strong>implements Runnable</strong> is preferred for most of the times. </p>\n\n<p>On a different note, using advanced <code>ExecutorService</code> or <code>ThreadPoolExecutorService</code> API provides more flexibility and control.</p>\n\n<p>Have a look at this SE Question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26938210/executorservice-vs-casual-thread-spawner/34923574#34923574\">ExecutorService vs Casual Thread Spawner</a></p>\n"},{"owner":{"reputation":144,"user_id":1932011,"user_type":"registered","accept_rate":71,"profile_image":"https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=128&d=identicon&r=PG","display_name":"JayC667","link":"https://stackoverflow.com/users/1932011/jayc667"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1461498111,"creation_date":1461498111,"answer_id":36822629,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>The best way for most worker threads is to have the threading completely encapsuled in the worker class so that nothing can interfere from the outside and cause unwanted and invalid thread/class states.</p>\n\n<p>I've just posted an example, so I'll also share this with you:</p>\n\n<pre><code>/**\n * This worker can only run once\n * @author JayC667\n */\npublic class ProperThreading {\n\n    private final Thread        mThread         = new Thread(() -&gt; runWorkingLoop());   // if you want worker to be able to run multiple times, move initialisation into startThread()\n    private volatile boolean    mThreadStarted  = false;\n    private volatile boolean    mStopRequested  = false;\n\n    private final long          mLoopSleepTime;\n\n    public ProperThreading(final long pLoopSleepTime /* pass more arguments here, store in members */ ) {\n        mLoopSleepTime = pLoopSleepTime;\n    }\n\n    public synchronized void startThread() {\n        if (mThreadStarted) throw new IllegalStateException(\"Worker Thread may only be started once and is already running!\");\n        mThreadStarted = true;\n        mThread.start();\n    }\n\n    private void runWorkingLoop() {\n        while (!mStopRequested /* &amp;&amp; other checks */ ) {\n            try {\n                // do the magic work here\n                Thread.sleep(mLoopSleepTime);\n\n            } catch (final InterruptedException e) {\n                break;\n            } catch (final Exception e) {\n                // do at least some basic handling here, you should NEVER ignore exception unless you know exactly what you're doing, and then it should be commented!\n            }\n        }\n    }\n\n    public synchronized void stopThread() {\n        if (!mThreadStarted) throw new IllegalStateException(\"Worker Thread is not even running yet!\");\n        mStopRequested = true;\n        mThread.interrupt();\n    }\n\n}\n</code></pre>\n"},{"owner":{"reputation":5270,"user_id":843943,"user_type":"registered","accept_rate":75,"profile_image":"https://i.stack.imgur.com/1V5SP.jpg?s=128&g=1","display_name":"Grim","link":"https://stackoverflow.com/users/843943/grim"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1478761551,"creation_date":1478761551,"answer_id":40521742,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>In the rare case you only run it once, you should extend Thread because of DRY. If you call it multiple times, you should implement Runnable because the same thread should not be restarted.</p>\n"},{"owner":{"reputation":2541,"user_id":6714430,"user_type":"registered","profile_image":"https://i.stack.imgur.com/adedu.jpg?s=128&g=1","display_name":"rashedcs","link":"https://stackoverflow.com/users/6714430/rashedcs"},"comment_count":0,"is_accepted":false,"score":2,"last_activity_date":1492924441,"creation_date":1492924441,"answer_id":43567639,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>By extending the thread class , the derived class can not extend any other base class because java only allow single inheritance.\non the contrary, By implementing the runnable interface the class still extend other base class.</p>\n\n<blockquote>\n  <p>The most significant difference between implementing Runnable and extending Thread is given below : </p>\n</blockquote>\n\n<p><strong>By extending Thread, derived class itself is a thread object, whereas Implementing Runnable interface it shares the same object to multiple Threads.</strong></p>\n"},{"owner":{"reputation":1074,"user_id":8609030,"user_type":"registered","profile_image":"https://i.stack.imgur.com/CGXiD.jpg?s=128&g=1","display_name":"Raman Gupta","link":"https://stackoverflow.com/users/8609030/raman-gupta"},"comment_count":0,"is_accepted":false,"score":13,"last_activity_date":1506870306,"creation_date":1506870306,"answer_id":46513687,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Difference between Extending Thread and Implementing Runnable are:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n1DJO.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n1DJO.jpg\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"reputation":1456,"user_id":1322957,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f1c077ea29f08d12ee4d99a662e00eb4?s=128&d=identicon&r=PG&f=1","display_name":"justcode","link":"https://stackoverflow.com/users/1322957/justcode"},"edited":false,"score":0,"creation_date":1518693911,"post_id":46871451,"comment_id":84614819,"content_license":"CC BY-SA 3.0","body":"Just complementing the Runnable by itself is not a thread is just a task that a thread can run."}],"owner":{"reputation":15029,"user_id":1475228,"user_type":"registered","accept_rate":84,"profile_image":"https://i.stack.imgur.com/TgQ5O.png?s=128&g=1","display_name":"Pritam Banerjee","link":"https://stackoverflow.com/users/1475228/pritam-banerjee"},"comment_count":1,"is_accepted":false,"score":1,"last_activity_date":1508656337,"creation_date":1508656337,"answer_id":46871451,"question_id":541487,"content_license":"CC BY-SA 3.0","body":"<p>Thread class defines several methods that can be <code>overriden</code> by the the extending class. But to create a thread we must override the <code>run()</code> method. Same applies to <code>Runnable</code> as well.</p>\n\n<p>However <code>Runnable</code> is a preferred method of creating a thread. The primary reasons are:</p>\n\n<ol>\n<li><p>Since Runnable is an interface, you can extend other classes. But if you extend Thread then that option is gone. </p></li>\n<li><p>If you are not modifying or enhancing a whole lot of <code>Thread</code> functionalities and extending the <code>Thread</code> class is not a preferred way.  </p></li>\n</ol>\n"},{"comments":[{"owner":{"reputation":751,"user_id":3199240,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Z7fKm.png?s=128&g=1","display_name":"statut","link":"https://stackoverflow.com/users/3199240/statut"},"edited":false,"score":0,"creation_date":1530966373,"post_id":50030727,"comment_id":89426756,"content_license":"CC BY-SA 4.0","body":"I didn&#39;t downvote you but you have to create a Thread via <code>new Thread(new A())</code> and invoke <code>start()</code> method instead of <code>run()</code>."}],"owner":{"reputation":1225,"user_id":4537618,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/AkWn6.jpg?s=128&g=1","display_name":"Java Main","link":"https://stackoverflow.com/users/4537618/java-main"},"comment_count":1,"is_accepted":false,"score":-1,"last_activity_date":1531083648,"last_edit_date":1531083648,"creation_date":1524687713,"answer_id":50030727,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>You can use them jointly</p>\n\n<p>Example :</p>\n\n<pre><code>public class A implements Runnable{\n\n    @Override\n    public void run() {\n\n\n        while(true){\n             System.out.println(\"Class A is running\");\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }}\n\n    }\n\n}\n\n\n\npublic class Test {\n\n    public static void main(String[] args) {\n\n        Thread myThread =new Thread(new A());// 1\n        myThread.start();\n        System.out.println(\" executed after thread A\");//will never be reached\n\n    }\n\n} \n</code></pre>\n"},{"owner":{"reputation":1781,"user_id":1504824,"user_type":"registered","accept_rate":67,"profile_image":"https://i.stack.imgur.com/TFaCr.jpg?s=128&g=1","display_name":"bharatj","link":"https://stackoverflow.com/users/1504824/bharatj"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1542684178,"last_edit_date":1542684178,"creation_date":1535882570,"answer_id":52135893,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>I would say actual task is decoupled from the thread. We can pass around the task to Thread, Executor framework etc in case of Runnable, whereas with extending Thread task is coupled with thread object itself. The task isolation cannot be done in case of extending Thread. It's like we burn the task to Thread object just something like IC chip (and more specifically will not get any handle to task).</p>\n"},{"owner":{"reputation":193,"user_id":5073834,"user_type":"registered","profile_image":"https://graph.facebook.com/1740990539461951/picture?type=large","display_name":"Pen Lymeng","link":"https://stackoverflow.com/users/5073834/pen-lymeng"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1543982323,"creation_date":1543982323,"answer_id":53624971,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p>The main difference between Thread and Runnable is:\n- Thread is like: Worker (execute Runnable)\n- Runnable is like: Job (to be executed by Thread)</p>\n"},{"owner":{"reputation":118,"user_id":10567048,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Mn4KE.jpg?s=128&g=1","display_name":"Arasn","link":"https://stackoverflow.com/users/10567048/arasn"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1572186010,"last_edit_date":1572186010,"creation_date":1556892827,"answer_id":55971598,"question_id":541487,"content_license":"CC BY-SA 4.0","body":"<p><strong>1. Extending the thread interface, is like you are making your class to behave as a thread only. Your new class will be like a enhanced thread.</strong></p>\n\n<pre><code>jshell&gt; public class Test extends Thread{\n   ...&gt; public Test(String name){\n   ...&gt; super(name);\n   ...&gt; }\n   ...&gt; public void run(){\n   ...&gt; System.out.println(Thread.currentThread().getName());\n   ...&gt; }\n   ...&gt; }\n|  created class Test\n\njshell&gt; Test t1=new Test(\"MyThread\");\nt1 ==&gt; Thread[MyThread,5,main]\n</code></pre>\n\n<p>It creates a thread, not the <code>Test</code> object. So it's going to act like a single thread. You can not share the instance of <code>Test</code> class between threads.</p>\n\n<p><strong>2. Implementing the runnable interface.</strong></p>\n\n<pre><code>jshell&gt; public class Test1 implements Runnable{\n   ...&gt; public void run(){\n   ...&gt; System.out.println(Thread.currentThread().getName());\n   ...&gt; }\n   ...&gt; public String getName(){\n   ...&gt; return \"testing\";}\n   ...&gt; }\n|  created class Test1\n\njshell&gt; Test1 t1=new Test1();\nt1 ==&gt; Test1@396a51ab  --&gt; this creates Test1 object.\n</code></pre>\n\n<p>This object can be shared across threads by,</p>\n\n<pre><code>jshell&gt; Thread t1=new Thread(t1,\"Hai\");\nt ==&gt; Thread[Hai,5,main]\n\njshell&gt; Thread t=new Thread(t1,\"Hai\");\nt ==&gt; Thread[Hai,5,main]\n</code></pre>\n\n<p>I think there's already been a lot that's been discussed on this topic, thought this might be helpful around the basics.</p>\n"}],"owner":{"reputation":22629,"user_id":65374,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/d9b476b19aefee886c89265430ede95a?s=128&d=identicon&r=PG","display_name":"user65374","link":"https://stackoverflow.com/users/65374/user65374"},"comment_count":13,"is_answered":true,"view_count":708990,"protected_date":1374690685,"accepted_answer_id":541506,"answer_count":42,"score":2197,"last_activity_date":1603720928,"creation_date":1234448926,"last_edit_date":1536677779,"question_id":541487,"link":"https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread-in-java","title":"&quot;implements Runnable&quot; vs &quot;extends Thread&quot; in Java","body":"<p>From what time I've spent with threads in Java, I've found these two ways to write threads:</p>\n\n<p>With <code>implements Runnable</code>:</p>\n\n<pre><code>public class MyRunnable implements Runnable {\n    public void run() {\n        //Code\n    }\n}\n//Started with a \"new Thread(new MyRunnable()).start()\" call\n</code></pre>\n\n<p>Or, with <code>extends Thread</code>:</p>\n\n<pre><code>public class MyThread extends Thread {\n    public MyThread() {\n        super(\"MyThread\");\n    }\n    public void run() {\n        //Code\n    }\n}\n//Started with a \"new MyThread().start()\" call\n</code></pre>\n\n<p>Is there any significant difference in these two blocks of code ?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"reputation":2150,"user_id":1139105,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/m3xAB.png?s=128&g=1","display_name":"janniks","link":"https://stackoverflow.com/users/1139105/janniks"},"edited":false,"score":17,"creation_date":1580730643,"post_id":1200621,"comment_id":106181056,"content_license":"CC BY-SA 4.0","body":"Before you post a new answer, consider there are already 25+ answers for this question. Please, make sure that your answer contributes information that is not among existing answers."},{"owner":{"reputation":3138,"user_id":131157,"user_type":"registered","accept_rate":57,"profile_image":"https://www.gravatar.com/avatar/cf6b905762dda1df8b5adedd0b2d022f?s=128&d=identicon&r=PG","display_name":"Babak","link":"https://stackoverflow.com/users/131157/babak"},"edited":false,"score":0,"creation_date":1608627810,"post_id":1200621,"comment_id":115634562,"content_license":"CC BY-SA 4.0","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.htm&zwnj;&#8203;l</a>"}],"answers":[{"comments":[{"owner":{"reputation":2410,"user_id":689991,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/snEFx.jpg?s=128&g=1","display_name":"Quazi Irfan","link":"https://stackoverflow.com/users/689991/quazi-irfan"},"edited":false,"score":35,"creation_date":1428636198,"post_id":1200646,"comment_id":47256779,"content_license":"CC BY-SA 3.0","body":"What&#39;s the purpose of having both the second and third way to do it?"},{"owner":{"reputation":691,"user_id":2534036,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/038476307a41f9dc00634e96d2d3d03b?s=128&d=identicon&r=PG","display_name":"Skylar Ittner","link":"https://stackoverflow.com/users/2534036/skylar-ittner"},"reply_to_user":{"reputation":2410,"user_id":689991,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/snEFx.jpg?s=128&g=1","display_name":"Quazi Irfan","link":"https://stackoverflow.com/users/689991/quazi-irfan"},"edited":false,"score":133,"creation_date":1429206284,"post_id":1200646,"comment_id":47501472,"content_license":"CC BY-SA 3.0","body":"@iamcreasy It looks like the second way doesn&#39;t work with return statements.  <code>return {1,2,3}</code> gives an error, while <code>return new int[]{1,2,3}</code> works fine (assuming of course that your function returns an integer array)."},{"owner":{"reputation":2410,"user_id":689991,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/snEFx.jpg?s=128&g=1","display_name":"Quazi Irfan","link":"https://stackoverflow.com/users/689991/quazi-irfan"},"reply_to_user":{"reputation":691,"user_id":2534036,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/038476307a41f9dc00634e96d2d3d03b?s=128&d=identicon&r=PG","display_name":"Skylar Ittner","link":"https://stackoverflow.com/users/2534036/skylar-ittner"},"edited":false,"score":1,"creation_date":1429332105,"post_id":1200646,"comment_id":47561212,"content_license":"CC BY-SA 3.0","body":"@SkylarMT But we can still use the first way to use with return statement."},{"owner":{"reputation":691,"user_id":2534036,"user_type":"registered","accept_rate":62,"profile_image":"https://www.gravatar.com/avatar/038476307a41f9dc00634e96d2d3d03b?s=128&d=identicon&r=PG","display_name":"Skylar Ittner","link":"https://stackoverflow.com/users/2534036/skylar-ittner"},"reply_to_user":{"reputation":2410,"user_id":689991,"user_type":"registered","accept_rate":91,"profile_image":"https://i.stack.imgur.com/snEFx.jpg?s=128&g=1","display_name":"Quazi Irfan","link":"https://stackoverflow.com/users/689991/quazi-irfan"},"edited":false,"score":7,"creation_date":1429510142,"post_id":1200646,"comment_id":47613840,"content_license":"CC BY-SA 3.0","body":"@iamcreasy I recently wrote a function that returned an array of ints.  If an error happened inside the function, I wanted it to return a certain value, but the function needed to return an array.  Which way works for a one-liner return statement?  Only the third one."},{"owner":{"reputation":4364,"user_id":1172352,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/348452b680ac216f453245b276b5ac7a?s=128&d=identicon&r=PG","display_name":"peterflynn","link":"https://stackoverflow.com/users/1172352/peterflynn"},"edited":false,"score":0,"creation_date":1433359097,"post_id":1200646,"comment_id":49323434,"content_license":"CC BY-SA 3.0","body":"It&#39;s <i>not</i> true that &quot;array literals cannot be used for re-assigning an array&quot; - the third syntax can be used to re-assign an array at any time."},{"owner":{"reputation":1170,"user_id":3175431,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/d718426ebc054d9b7962dcd804c1cb65?s=128&d=identicon&r=PG","display_name":"Jezzamon","link":"https://stackoverflow.com/users/3175431/jezzamon"},"edited":false,"score":0,"creation_date":1437911023,"post_id":1200646,"comment_id":51219700,"content_license":"CC BY-SA 3.0","body":"The contents of an array cannot be set using an array literal. Array literals will create a new array each time as opposed to modifying the contents of the previous one. You can store this in an existing variable if you want, so the new array will replace the previous array."},{"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"edited":false,"score":1,"creation_date":1445430176,"post_id":1200646,"comment_id":54319472,"content_license":"CC BY-SA 3.0","body":"This answer seem incomplete to me, it is missing the part on Array of classes\\objects, using <code>String</code> or <i>primitive-datatype-autoboxing</i> to demonstrate the case of classes is misleading."},{"owner":{"reputation":4248,"user_id":1397821,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/dwOIp.jpg?s=128&g=1","display_name":"M. Usman Khan","link":"https://stackoverflow.com/users/1397821/m-usman-khan"},"edited":false,"score":0,"creation_date":1452520382,"post_id":1200646,"comment_id":57192157,"content_license":"CC BY-SA 3.0","body":"what if i have a parameter in the constructor? e.g. I have constructor public MyClass(int something){};   and I want to initialize array MyClass[] objs = new MyClass[3] (88);"},{"owner":{"reputation":9412,"user_id":3769451,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1","display_name":"apadana","link":"https://stackoverflow.com/users/3769451/apadana"},"edited":false,"score":1,"creation_date":1463777381,"post_id":1200646,"comment_id":62226603,"content_license":"CC BY-SA 3.0","body":"The 2nd form also can&#39;t be used to pass into a function. It gives an error. The 3rd form is fine. But I am not sure why the 2nd form can&#39;t be used for return or passing to a function? I would like to understand what happens behind the scene."},{"owner":{"reputation":4157,"user_id":363132,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b2016af46ed42c48efdf3b13057061a8?s=128&d=identicon&r=PG","display_name":"teukkam","link":"https://stackoverflow.com/users/363132/teukkam"},"reply_to_user":{"reputation":9412,"user_id":3769451,"user_type":"registered","accept_rate":74,"profile_image":"https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1","display_name":"apadana","link":"https://stackoverflow.com/users/3769451/apadana"},"edited":false,"score":6,"creation_date":1476784557,"post_id":1200646,"comment_id":67481687,"content_license":"CC BY-SA 3.0","body":"@apadana In the second case you are creating an anonymous object which is only defined in the enclosing scope (function or whatever). After returning it to the caller, it is no longer valid. Using the new keyword you allocate the new object from the heap and it is valid outside the defining scope."},{"owner":{"reputation":213,"user_id":5738837,"user_type":"registered","accept_rate":60,"profile_image":"https://www.gravatar.com/avatar/d72e991dd71bdffeabe68b35bf1a2f3c?s=128&d=identicon&r=PG&f=1","display_name":"MrAP","link":"https://stackoverflow.com/users/5738837/mrap"},"edited":false,"score":1,"creation_date":1491515223,"post_id":1200646,"comment_id":73601147,"content_license":"CC BY-SA 3.0","body":"What do you mean by: &quot;but only when you declare and affect the variable right away, array literals cannot be used for re-assigning an array&quot;?"},{"owner":{"reputation":25227,"user_id":118228,"user_type":"registered","accept_rate":85,"profile_image":"https://i.stack.imgur.com/f2tOS.jpg?s=128&g=1","display_name":"djangofan","link":"https://stackoverflow.com/users/118228/djangofan"},"edited":false,"score":0,"creation_date":1496080492,"post_id":1200646,"comment_id":75504607,"content_license":"CC BY-SA 3.0","body":"Why does this work?  public class Test {   public static void main(String args[])  {     final double[] doubles = {2.3, 2.4};     final long[] longs = {2,4L,6,8};   }}"},{"owner":{"reputation":577,"user_id":1863152,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/6cfc323f028fd836267b55e6c9c9c900?s=128&d=identicon&r=PG","display_name":"www-0av-Com","link":"https://stackoverflow.com/users/1863152/www-0av-com"},"edited":false,"score":1,"creation_date":1522843565,"post_id":1200646,"comment_id":86309152,"content_license":"CC BY-SA 3.0","body":"For newbies, state why you are giving triplicate answers. As a newbie, I thought I needed all 3 lines! Not impressed that first answer gets all the votes, even tho misleading.  @codecubed has a much better simple answer."},{"owner":{"reputation":3257,"user_id":1324802,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/41K0O.jpg?s=128&g=1","display_name":"Androidcoder","link":"https://stackoverflow.com/users/1324802/androidcoder"},"edited":false,"score":0,"creation_date":1607019489,"post_id":1200646,"comment_id":115147923,"content_license":"CC BY-SA 4.0","body":"Are array declarations automatically initialized in method calls too? Non-array variables are apparently not initialized on declaration in methods, as you get the &#39;not initialized&#39; error message."},{"owner":{"reputation":239,"user_id":4455546,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/11813c2d260eecabb2f6b3b2d88e6d03?s=128&d=identicon&r=PG&f=1","display_name":"Clement Cherlin","link":"https://stackoverflow.com/users/4455546/clement-cherlin"},"reply_to_user":{"reputation":4157,"user_id":363132,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/b2016af46ed42c48efdf3b13057061a8?s=128&d=identicon&r=PG","display_name":"teukkam","link":"https://stackoverflow.com/users/363132/teukkam"},"edited":false,"score":0,"creation_date":1614777635,"post_id":1200646,"comment_id":117487925,"content_license":"CC BY-SA 4.0","body":"@teukkam There is no such thing as an &quot;an anonymous object which is only defined in the enclosing scope&quot; in Java. All objects are allocated on the heap. The reason you cannot return <code>{1, 2, 3}</code> is purely syntactic and has nothing to do with object allocation. As proof, the following is completely valid: <code>public static int[] returnsALiteralIntArray() { int[] ints = {1, 2, 3}; return ints; }</code>"}],"owner":{"reputation":41776,"user_id":118437,"user_type":"registered","accept_rate":93,"profile_image":"https://www.gravatar.com/avatar/0bc3f06118e3253ef1c1ae899e7dfa56?s=128&d=identicon&r=PG","display_name":"glmxndr","link":"https://stackoverflow.com/users/118437/glmxndr"},"comment_count":15,"is_accepted":true,"community_owned_date":1503919193,"score":2844,"last_activity_date":1614778384,"last_edit_date":1614778384,"creation_date":1248877523,"answer_id":1200646,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>You can either use array declaration or array literal (but only when you declare and affect the variable right away, array literals cannot be used for re-assigning an array).</p>\n<p>For primitive types:</p>\n<pre><code>int[] myIntArray = new int[3];\nint[] myIntArray = {1, 2, 3};\nint[] myIntArray = new int[]{1, 2, 3};\n\n// Since Java 8. Doc of IntStream: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\n\nint [] myIntArray = IntStream.range(0, 100).toArray(); // From 0 to 99\nint [] myIntArray = IntStream.rangeClosed(0, 100).toArray(); // From 0 to 100\nint [] myIntArray = IntStream.of(12,25,36,85,28,96,47).toArray(); // The order is preserved.\nint [] myIntArray = IntStream.of(12,25,36,85,28,96,47).sorted().toArray(); // Sort \n</code></pre>\n<p>For classes, for example <code>String</code>, it's the same:</p>\n<pre><code>String[] myStringArray = new String[3];\nString[] myStringArray = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\nString[] myStringArray = new String[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\n</code></pre>\n<p>The third way of initializing is useful when you declare an array first and then initialize it, pass an array as a function argument, or return an array. The explicit type is required.</p>\n<pre><code>String[] myStringArray;\nmyStringArray = new String[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4071,"user_id":848292,"user_type":"registered","accept_rate":76,"profile_image":"https://i.stack.imgur.com/Ars6Y.png?s=128&g=1","display_name":"Anti Earth","link":"https://stackoverflow.com/users/848292/anti-earth"},"edited":false,"score":7,"creation_date":1349238025,"post_id":1200648,"comment_id":17148629,"content_license":"CC BY-SA 3.0","body":"What is the standard for which to use? I&#39;ve only just discovered the former, and I find it horrifically misleading :|"},{"owner":{"reputation":12743,"user_id":1279820,"user_type":"registered","accept_rate":59,"profile_image":"https://i.stack.imgur.com/CJFmh.png?s=128&g=1","display_name":"Celeritas","link":"https://stackoverflow.com/users/1279820/celeritas"},"edited":false,"score":2,"creation_date":1376023859,"post_id":1200648,"comment_id":26567117,"content_license":"CC BY-SA 3.0","body":"For what it&#39;s worth my prof said that the second way is more typical in Java and that it better conveys what is going on; as an array related to the type the variable was cast as."},{"owner":{"reputation":2668,"user_id":1377498,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/a3bf574cbb933a7db7559f7f6f9d8360?s=128&d=identicon&r=PG","display_name":"Muhammad Suleman","link":"https://stackoverflow.com/users/1377498/muhammad-suleman"},"edited":false,"score":2,"creation_date":1430824648,"post_id":1200648,"comment_id":48217346,"content_license":"CC BY-SA 3.0","body":"For a side note: A language having more than one semantics for declaring one thing meaning bad language design."}],"owner":{"reputation":106835,"user_id":572,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/Ct4o3.jpg?s=128&g=1","display_name":"Thomas Owens","link":"https://stackoverflow.com/users/572/thomas-owens"},"comment_count":3,"is_accepted":false,"score":27,"last_activity_date":1248877531,"creation_date":1248877531,"answer_id":1200648,"question_id":1200621,"content_license":"CC BY-SA 2.5","body":"<p>Alternatively,</p>\n\n<pre><code>// Either method works\nString arrayName[] = new String[10];\nString[] arrayName = new String[10];\n</code></pre>\n\n<p>That declares an array called <code>arrayName</code> of size 10 (you have elements 0 through 9 to use).</p>\n"},{"owner":{"reputation":2129,"user_id":58798,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/35a34c6bd852faf202d14df6fb25e1c4?s=128&d=identicon&r=PG","display_name":"Anirudh","link":"https://stackoverflow.com/users/58798/anirudh"},"comment_count":0,"is_accepted":false,"score":40,"last_activity_date":1517937288,"last_edit_date":1517937288,"creation_date":1248877694,"answer_id":1200670,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>There are various ways in which you can declare an array in Java:</p>\n\n<pre><code>float floatArray[]; // Initialize later\nint[] integerArray = new int[10];\nString[] array = new String[] {\"a\", \"b\"};\n</code></pre>\n\n<p>You can find more information in the <a href=\"http://java.sun.com/docs/books/tutorial/java/nutsandbolts/arrays.html\" rel=\"noreferrer\">Sun tutorial</a> site and the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Arrays.html\" rel=\"noreferrer\">JavaDoc</a>.</p>\n"},{"comments":[{"owner":{"reputation":18541,"user_id":112614,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/cgt6T.jpg?s=128&g=1","display_name":"Chet","link":"https://stackoverflow.com/users/112614/chet"},"edited":false,"score":22,"creation_date":1248877864,"post_id":1200681,"comment_id":1023720,"content_license":"CC BY-SA 2.5","body":"I agree on that point.  The type of the variable is not &quot;TYPE&quot;, but actually a TYPE[], so it makes sense to write it that way for me."},{"owner":{"reputation":5871,"user_id":1870054,"user_type":"registered","accept_rate":72,"profile_image":"https://i.stack.imgur.com/QJydN.jpg?s=128&g=1","display_name":"wener","link":"https://stackoverflow.com/users/1870054/wener"},"edited":false,"score":3,"creation_date":1394023422,"post_id":1200681,"comment_id":33697382,"content_license":"CC BY-SA 3.0","body":"<a href=\"http://google-styleguide.googlecode.com/svn/trunk/javaguide.html#s4.8.3.2-array-declarations\" rel=\"nofollow noreferrer\">Google style</a> suggest this too."},{"owner":{"reputation":40857,"user_id":1864167,"user_type":"registered","accept_rate":90,"profile_image":"https://i.stack.imgur.com/WalEV.jpg?s=128&g=1","display_name":"Jeroen Vannevel","link":"https://stackoverflow.com/users/1864167/jeroen-vannevel"},"edited":false,"score":11,"creation_date":1426729561,"post_id":1200681,"comment_id":46496754,"content_license":"CC BY-SA 3.0","body":"Note that <code>int[] a, b;</code> will not be the same as <code>int a[], b;</code>, a mistake easy to make if you use the latter form."}],"owner":{"reputation":16235,"user_id":118133,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/39d793fb79c019bce75b825160f2d1fa?s=128&d=identicon&r=PG","display_name":"Nate","link":"https://stackoverflow.com/users/118133/nate"},"comment_count":3,"is_accepted":false,"score":130,"last_activity_date":1415821692,"last_edit_date":1415821692,"creation_date":1248877757,"answer_id":1200681,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<pre><code>Type[] variableName = new Type[capacity];\n\nType[] variableName = {comma-delimited values};\n\n\n\nType variableName[] = new Type[capacity]; \n\nType variableName[] = {comma-delimited values};\n</code></pre>\n\n<p>is also valid, but I prefer the brackets after the type, because it's easier to see that the variable's type is actually an array.</p>\n"},{"comments":[{"owner":{"reputation":626,"user_id":8830634,"user_type":"registered","accept_rate":94,"profile_image":"https://i.stack.imgur.com/bspab.png?s=128&g=1","display_name":"Cookie Monster","link":"https://stackoverflow.com/users/8830634/cookie-monster"},"edited":false,"score":0,"creation_date":1530181561,"post_id":1200687,"comment_id":89149391,"content_license":"CC BY-SA 4.0","body":"So it is not necessary to include <code>int[] name = new int[5]</code> ?"}],"owner":{"reputation":18541,"user_id":112614,"user_type":"registered","accept_rate":79,"profile_image":"https://i.stack.imgur.com/cgt6T.jpg?s=128&g=1","display_name":"Chet","link":"https://stackoverflow.com/users/112614/chet"},"comment_count":1,"is_accepted":false,"score":32,"last_activity_date":1381571124,"last_edit_date":1381571124,"creation_date":1248877796,"answer_id":1200687,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>I find it is helpful if you understand each part:</p>\n\n<pre><code>Type[] name = new Type[5];\n</code></pre>\n\n<p><code>Type[]</code> is the <em>type</em> of the <em>variable</em> called name (\"name\" is called the <em>identifier</em>).  The literal \"Type\" is the base type, and the brackets mean this is the array type of that base. Array types are in turn types of their own, which allows you to make multidimensional arrays like <code>Type[][]</code> (the array type of Type[]). The keyword <code>new</code> says to allocate memory for the new array.  The number between the bracket says how large the new array will be and how much memory to allocate. For instance, if Java knows that the base type <code>Type</code> takes 32 bytes, and you want an array of size 5, it needs to internally allocate 32 * 5 = 160 bytes.</p>\n\n<p>You can also create arrays with the values already there, such as</p>\n\n<pre><code>int[] name = {1, 2, 3, 4, 5};\n</code></pre>\n\n<p>which not only creates the empty space but fills it with those values. Java can tell that the primitives are integers and that there are 5 of them, so the size of the array can be determined implicitly.</p>\n"},{"comments":[{"owner":{"reputation":3841,"user_id":640739,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/1f3d631f423d6e364cd40ccad5020c71?s=128&d=identicon&r=PG","display_name":"CyprUS","link":"https://stackoverflow.com/users/640739/cyprus"},"edited":false,"score":2,"creation_date":1440633903,"post_id":1201271,"comment_id":52359390,"content_license":"CC BY-SA 3.0","body":"what is the &quot;&lt;&gt;&quot; called in the list that you created ?"},{"owner":{"reputation":197,"user_id":4226093,"user_type":"registered","accept_rate":0,"profile_image":"https://i.stack.imgur.com/XeZcV.jpg?s=128&g=1","display_name":"Heimdall","link":"https://stackoverflow.com/users/4226093/heimdall"},"reply_to_user":{"reputation":3841,"user_id":640739,"user_type":"registered","accept_rate":81,"profile_image":"https://www.gravatar.com/avatar/1f3d631f423d6e364cd40ccad5020c71?s=128&d=identicon&r=PG","display_name":"CyprUS","link":"https://stackoverflow.com/users/640739/cyprus"},"edited":false,"score":0,"creation_date":1543501671,"post_id":1201271,"comment_id":93949320,"content_license":"CC BY-SA 4.0","body":"@CyprUS <code>List</code> is a generic class, it has a type as a parameter, enclosed in <code>&lt;&gt;</code>. That helps because you only need to define a generic type once and you can then use it with multiple different types. For a more detailed explanation look at <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/types.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/generics/types.html</a>"}],"owner":{"reputation":12018,"user_id":3095,"user_type":"registered","accept_rate":89,"profile_image":"https://www.gravatar.com/avatar/5e9b86bbe0805dfaf5d07146d2a69956?s=128&d=identicon&r=PG","display_name":"Dave","link":"https://stackoverflow.com/users/3095/dave"},"comment_count":2,"is_accepted":false,"score":26,"last_activity_date":1363689664,"last_edit_date":1363689664,"creation_date":1248882980,"answer_id":1201271,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Also, in case you want something more dynamic there is the List interface.  This will not perform as well, but is more flexible:</p>\n\n<pre><code>List&lt;String&gt; listOfString = new ArrayList&lt;String&gt;();\n\nlistOfString.add(\"foo\");\nlistOfString.add(\"bar\");\n\nString value = listOfString.get(0);\nassertEquals( value, \"foo\" );\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"edited":false,"score":3,"creation_date":1424560118,"post_id":16910831,"comment_id":45602048,"content_license":"CC BY-SA 3.0","body":"There is absolutely no difference between the second and third approaches, other than that the second approach <i>only</i> works when you&#39;re also declaring a variable. It&#39;s not clear what you mean by &quot;shows the property of anonymous array-object creation&quot; but they really are equivalent pieces of code."},{"owner":{"reputation":1244853,"user_id":22656,"user_type":"registered","accept_rate":86,"profile_image":"https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG","display_name":"Jon Skeet","link":"https://stackoverflow.com/users/22656/jon-skeet"},"edited":false,"score":6,"creation_date":1424560344,"post_id":16910831,"comment_id":45602102,"content_license":"CC BY-SA 3.0","body":"Also, the first snippet <i>does</i> initialize the array - it is guaranteed to have the value 0 for every array element."},{"owner":{"reputation":2117,"user_id":2856202,"user_type":"registered","accept_rate":50,"profile_image":"https://i.stack.imgur.com/AHuOz.png?s=128&g=1","display_name":"eigenfield","link":"https://stackoverflow.com/users/2856202/eigenfield"},"edited":false,"score":0,"creation_date":1579069732,"post_id":16910831,"comment_id":105639474,"content_license":"CC BY-SA 4.0","body":"Is there really no difference between the second and the third one approaches?"}],"owner":{"reputation":491,"user_id":2380374,"user_type":"registered","profile_image":"https://i.stack.imgur.com/FT19N.jpg?s=128&g=1","display_name":"Amit Bhandari","link":"https://stackoverflow.com/users/2380374/amit-bhandari"},"comment_count":3,"is_accepted":false,"score":29,"last_activity_date":1403474257,"last_edit_date":1403474257,"creation_date":1370325769,"answer_id":16910831,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>The following shows the declaration of an array, but the array is not initialized:</p>\n\n<pre><code> int[] myIntArray = new int[3];\n</code></pre>\n\n<p>The following shows the declaration as well as initialization of the array:</p>\n\n<pre><code>int[] myIntArray = {1,2,3};\n</code></pre>\n\n<p>Now, the following also shows the declaration as well as initialization of the array:</p>\n\n<pre><code>int[] myIntArray = new int[]{1,2,3};\n</code></pre>\n\n<p>But this third one shows the property of anonymous array-object creation which is pointed by a reference variable \"myIntArray\", so if we write just \"new int[]{1,2,3};\" then this is how anonymous array-object can be created.</p>\n\n<p>If we just write:</p>\n\n<pre><code>int[] myIntArray;\n</code></pre>\n\n<p>this is not declaration of array, but the following statement makes the above declaration complete:</p>\n\n<pre><code>myIntArray=new int[3];\n</code></pre>\n"},{"comments":[{"owner":{"reputation":3964,"user_id":1629932,"user_type":"registered","accept_rate":85,"profile_image":"https://www.gravatar.com/avatar/ef1b30794ac9d3125669df468262616f?s=128&d=identicon&r=PG","display_name":"vipin8169","link":"https://stackoverflow.com/users/1629932/vipin8169"},"edited":false,"score":0,"creation_date":1487463901,"post_id":17559021,"comment_id":71797786,"content_license":"CC BY-SA 3.0","body":"Won&#39;t the first one lead to a null/empty array, instead of array with default values?"},{"owner":{"reputation":511,"user_id":3913948,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/NCDEu.jpg?s=128&g=1","display_name":"AdamIJK","link":"https://stackoverflow.com/users/3913948/adamijk"},"edited":false,"score":0,"creation_date":1493205998,"post_id":17559021,"comment_id":74313540,"content_license":"CC BY-SA 3.0","body":"I agree on that point, and we can add one more feature, we can change the size dynamically."},{"owner":{"reputation":518,"user_id":1968171,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/921f04cd94b628b64c5bcc496cfeeed6?s=128&d=identicon&r=PG","display_name":"Tim M.","link":"https://stackoverflow.com/users/1968171/tim-m"},"edited":false,"score":0,"creation_date":1500391150,"post_id":17559021,"comment_id":77309908,"content_license":"CC BY-SA 3.0","body":"I might argue with you on the point that a multidimensional array is a different &quot;type&quot; of array. It&#39;s simply a term used to describe an array that happens to contain other arrays. Both the outer arrays and the inner arrays (and those in between, if they exist) are just regular arrays."}],"owner":{"reputation":3403,"user_id":2558244,"user_type":"registered","profile_image":"https://i.stack.imgur.com/KHBd0.jpg?s=128&g=1","display_name":"Isabella Engineer","link":"https://stackoverflow.com/users/2558244/isabella-engineer"},"comment_count":3,"is_accepted":false,"score":295,"last_activity_date":1450645030,"last_edit_date":1450645030,"creation_date":1373407179,"answer_id":17559021,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>There are two types of array.<br/> </p>\n\n<h2>One Dimensional Array</h2>\n\n<p>Syntax for default values:</p>\n\n<pre><code>int[] num = new int[5];\n</code></pre>\n\n<p>Or (less preferred)</p>\n\n<pre><code>int num[] = new int[5];\n</code></pre>\n\n<p>Syntax with values given (variable/field initialization):</p>\n\n<pre><code>int[] num = {1,2,3,4,5};\n</code></pre>\n\n<p>Or (less preferred)</p>\n\n<pre><code>int num[] = {1, 2, 3, 4, 5};\n</code></pre>\n\n<p>Note: For convenience  int[] num is preferable because it clearly tells that you are talking here about array. Otherwise no difference. Not at all.<br/></p>\n\n<h2>Multidimensional array</h2>\n\n<h3>Declaration</h3>\n\n<pre><code>int[][] num = new int[5][2];\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int num[][] = new int[5][2];\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int[] num[] = new int[5][2];\n</code></pre>\n\n<h3>Initialization</h3>\n\n<pre><code> num[0][0]=1;\n num[0][1]=2;\n num[1][0]=1;\n num[1][1]=2;\n num[2][0]=1;\n num[2][1]=2;\n num[3][0]=1;\n num[3][1]=2;\n num[4][0]=1;\n num[4][1]=2;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code> int[][] num={ {1,2}, {1,2}, {1,2}, {1,2}, {1,2} };\n</code></pre>\n\n<h3>Ragged Array (or Non-rectangular Array)</h3>\n\n<pre><code> int[][] num = new int[5][];\n num[0] = new int[1];\n num[1] = new int[5];\n num[2] = new int[2];\n num[3] = new int[3];\n</code></pre>\n\n<p>So here we are defining columns explicitly.<br/>\n<b>Another Way:</b>  </p>\n\n<pre><code>int[][] num={ {1}, {1,2}, {1,2,3,4,5}, {1,2}, {1,2,3} };\n</code></pre>\n\n<h2>For Accessing:</h2>\n\n<pre><code>for (int i=0; i&lt;(num.length); i++ ) {\n    for (int j=0;j&lt;num[i].length;j++)\n        System.out.println(num[i][j]);\n}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>for (int[] a : num) {\n  for (int i : a) {\n    System.out.println(i);\n  }\n}\n</code></pre>\n\n<p>Ragged arrays are multidimensional arrays.<br/>\nFor explanation see multidimensional array detail at <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"noreferrer\">the official java tutorials</a></p>\n"},{"comments":[{"owner":{"reputation":2568,"user_id":6790326,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/--0W1SyomlMg/AAAAAAAAAAI/AAAAAAAAAGY/w5Ja9a3U4zE/photo.jpg?sz=128","display_name":"Dorian Gray","link":"https://stackoverflow.com/users/6790326/dorian-gray"},"edited":false,"score":0,"creation_date":1578512281,"post_id":28044731,"comment_id":105466757,"content_license":"CC BY-SA 4.0","body":"Why would you want to create an array that way?"}],"owner":{"reputation":2668,"user_id":1377498,"user_type":"registered","accept_rate":88,"profile_image":"https://www.gravatar.com/avatar/a3bf574cbb933a7db7559f7f6f9d8360?s=128&d=identicon&r=PG","display_name":"Muhammad Suleman","link":"https://stackoverflow.com/users/1377498/muhammad-suleman"},"comment_count":1,"is_accepted":false,"score":9,"last_activity_date":1432411680,"last_edit_date":1432411680,"creation_date":1421754842,"answer_id":28044731,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>If you want to create arrays using reflections then you can do like this:</p>\n\n<pre><code> int size = 3;\n int[] intArray = (int[]) Array.newInstance(int.class, size ); \n</code></pre>\n"},{"owner":{"reputation":4207,"user_id":8200485,"user_type":"registered","accept_rate":82,"profile_image":"https://i.stack.imgur.com/ONjhQ.jpg?s=128&g=1","display_name":"HyperNeutrino","link":"https://stackoverflow.com/users/8200485/hyperneutrino"},"comment_count":0,"is_accepted":false,"score":11,"last_activity_date":1432411742,"last_edit_date":1432411742,"creation_date":1432410979,"answer_id":30416986,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Take the primitive type <code>int</code> for example. There are several ways to declare and <code>int</code> array:</p>\n\n<pre><code>int[] i = new int[capacity];\nint[] i = new int[] {value1, value2, value3, etc};\nint[] i = {value1, value2, value3, etc};\n</code></pre>\n\n<p>where in all of these, you can use <code>int i[]</code> instead of <code>int[] i</code>.</p>\n\n<p>With reflection, you can use <code>(Type[]) Array.newInstance(Type.class, capacity);</code></p>\n\n<p>Note that in method parameters, <code>...</code> indicates <code>variable arguments</code>. Essentially, any number of parameters is fine. It's easier to explain with code:</p>\n\n<pre><code>public static void varargs(int fixed1, String fixed2, int... varargs) {...}\n...\nvarargs(0, \"\", 100); // fixed1 = 0, fixed2 = \"\", varargs = {100}\nvarargs(0, \"\", 100, 200); // fixed1 = 0, fixed2 = \"\", varargs = {100, 200};\n</code></pre>\n\n<p>Inside the method, <code>varargs</code> is treated as a normal <code>int[]</code>. <code>Type...</code> can only be used in method parameters, so <code>int... i = new int[] {}</code> will not compile.</p>\n\n<p>Note that when passing an <code>int[]</code> to a method (or any other <code>Type[]</code>), you cannot use the third way. In the statement <code>int[] i = *{a, b, c, d, etc}*</code>, the compiler assumes that the <code>{...}</code> means an <code>int[]</code>. But that is because you are declaring a variable. When passing an array to a method, the declaration must either be <code>new Type[capacity]</code> or <code>new Type[] {...}</code>.</p>\n\n<h1>Multidimensional Arrays</h1>\n\n<p>Multidimensional arrays are much harder to deal with. Essentially, a 2D array is an array of arrays. <code>int[][]</code> means an array of <code>int[]</code>s. The key is that if an <code>int[][]</code> is declared as <code>int[x][y]</code>, the maximum index is <code>i[x-1][y-1]</code>. Essentially, a rectangular <code>int[3][5]</code> is:</p>\n\n<pre><code>[0, 0] [1, 0] [2, 0]\n[0, 1] [1, 1] [2, 1]\n[0, 2] [1, 2] [2, 2]\n[0, 3] [1, 3] [2, 3]\n[0, 4] [1, 4] [2, 4]\n</code></pre>\n"},{"owner":{"reputation":3207,"user_id":2787184,"user_type":"registered","accept_rate":65,"profile_image":"https://i.stack.imgur.com/F69PI.png?s=128&g=1","display_name":"2787184","link":"https://stackoverflow.com/users/2787184/2787184"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1466891985,"last_edit_date":1466891985,"creation_date":1444990730,"answer_id":33168030,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Declaring an array of object references:</p>\n\n<pre><code>class Animal {}\n\nclass Horse extends Animal {\n    public static void main(String[] args) {\n\n        /*\n         * Array of Animal can hold Animal and Horse (all subtypes of Animal allowed)\n         */\n        Animal[] a1 = new Animal[10];\n        a1[0] = new Animal();\n        a1[1] = new Horse();\n\n        /*\n         * Array of Animal can hold Animal and Horse and all subtype of Horse\n         */\n        Animal[] a2 = new Horse[10];\n        a2[0] = new Animal();\n        a2[1] = new Horse();\n\n        /*\n         * Array of Horse can hold only Horse and its subtype (if any) and not\n           allowed supertype of Horse nor other subtype of Animal.\n         */\n        Horse[] h1 = new Horse[10];\n        h1[0] = new Animal(); // Not allowed\n        h1[1] = new Horse();\n\n        /*\n         * This can not be declared.\n         */\n        Horse[] h2 = new Animal[10]; // Not allowed\n    }\n}\n</code></pre>\n"},{"owner":{"reputation":5498,"user_id":2128327,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/fdb32ecba89326d1528dbf8673e68b20?s=128&d=identicon&r=PG","display_name":"Khaled.K","link":"https://stackoverflow.com/users/2128327/khaled-k"},"comment_count":0,"is_accepted":false,"score":8,"last_activity_date":1445435104,"last_edit_date":1445435104,"creation_date":1445434787,"answer_id":33260915,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Array is a sequential list of items</p>\n\n<pre><code>int item = value;\n\nint [] one_dimensional_array = { value, value, value, .., value };\n\nint [][] two_dimensional_array =\n{\n  { value, value, value, .. value },\n  { value, value, value, .. value },\n    ..     ..     ..        ..\n  { value, value, value, .. value }\n};\n</code></pre>\n\n<p>If it's an object, then it's the same concept</p>\n\n<pre><code>Object item = new Object();\n\nObject [] one_dimensional_array = { new Object(), new Object(), .. new Object() };\n\nObject [][] two_dimensional_array =\n{\n  { new Object(), new Object(), .. new Object() },\n  { new Object(), new Object(), .. new Object() },\n    ..            ..               ..\n  { new Object(), new Object(), .. new Object() }\n};\n</code></pre>\n\n<p>In case of objects, you need to either assign it to <code>null</code> to initialize them using <code>new Type(..)</code>, classes like <code>String</code> and <code>Integer</code> are special cases that will be handled as following</p>\n\n<pre><code>String [] a = { \"hello\", \"world\" };\n// is equivalent to\nString [] a = { new String({'h','e','l','l','o'}), new String({'w','o','r','l','d'}) };\n\nInteger [] b = { 1234, 5678 };\n// is equivalent to\nInteger [] b = { new Integer(1234), new Integer(5678) };\n</code></pre>\n\n<p>In general you can create arrays that's <code>M</code> dimensional</p>\n\n<pre><code>int [][]..[] array =\n//  ^ M times [] brackets\n\n    {{..{\n//  ^ M times { bracket\n\n//            this is array[0][0]..[0]\n//                         ^ M times [0]\n\n    }}..}\n//  ^ M times } bracket\n;\n</code></pre>\n\n<p>It's worthy to note that creating an <code>M</code> dimensional array is expensive in terms of Space. Since when you create an <code>M</code> dimensional array with <code>N</code> on all the dimensions, The total size of the array is bigger than <code>N^M</code>, since each array has a reference, and at the M-dimension there is an (M-1)-dimensional array of references. The total size is as following</p>\n\n<pre><code>Space = N^M + N^(M-1) + N^(M-2) + .. + N^0\n//      ^                              ^ array reference\n//      ^ actual data\n</code></pre>\n"},{"comments":[{"owner":{"reputation":4407,"user_id":1294864,"user_type":"registered","accept_rate":83,"profile_image":"https://i.stack.imgur.com/dLaJj.jpg?s=128&g=1","display_name":"Bono","link":"https://stackoverflow.com/users/1294864/bono"},"edited":false,"score":7,"creation_date":1447961056,"post_id":33810810,"comment_id":55390716,"content_license":"CC BY-SA 3.0","body":"While this code may answer the question, it would be better to explain how it solves the problem without introducing others and why to use it. Code-only answers are not useful in the long run."}],"owner":{"reputation":13,"user_id":5295031,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/451c35d731165e3ecdb0dcce7937e146?s=128&d=identicon&r=PG&f=1","display_name":"TreyMcGowan","link":"https://stackoverflow.com/users/5295031/treymcgowan"},"comment_count":1,"is_accepted":false,"score":-7,"last_activity_date":1447963319,"last_edit_date":1447963319,"creation_date":1447955029,"answer_id":33810810,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<pre><code>int[] SingleDimensionalArray = new int[2]\n\nint[][] MultiDimensionalArray = new int[3][4]\n</code></pre>\n"},{"owner":{"reputation":690,"user_id":5847353,"user_type":"registered","profile_image":"https://lh4.googleusercontent.com/-jfot8t8sHIk/AAAAAAAAAAI/AAAAAAAAAWU/Zr9N_suIxD0/photo.jpg?sz=128","display_name":"codecubed","link":"https://stackoverflow.com/users/5847353/codecubed"},"comment_count":0,"is_accepted":false,"score":15,"last_activity_date":1466892015,"last_edit_date":1466892015,"creation_date":1454008781,"answer_id":35070126,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>There are two main ways to make an array:</p>\n\n<p>This one, for an empty array:</p>\n\n<pre><code>int[] array = new int[n]; // \"n\" being the number of spaces to allocate in the array\n</code></pre>\n\n<p>And this one, for an initialized array:</p>\n\n<pre><code>int[] array = {1,2,3,4 ...};\n</code></pre>\n\n<p>You can also make multidimensional arrays, like this:</p>\n\n<pre><code>int[][] array2d = new int[x][y]; // \"x\" and \"y\" specify the dimensions\nint[][] array2d = { {1,2,3 ...}, {4,5,6 ...} ...};\n</code></pre>\n"},{"owner":{"reputation":165,"user_id":6514262,"user_type":"registered","accept_rate":83,"profile_image":"https://www.gravatar.com/avatar/ea6122317e6957d5a5ec54bd3c047642?s=128&d=identicon&r=PG&f=1","display_name":"Samuel Newport","link":"https://stackoverflow.com/users/6514262/samuel-newport"},"comment_count":0,"is_accepted":false,"score":6,"last_activity_date":1470651035,"last_edit_date":1470651035,"creation_date":1470650488,"answer_id":38826284,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>For creating arrays of class Objects you can use the <code>java.util.ArrayList</code>. to define an array:</p>\n\n<pre><code>public ArrayList&lt;ClassName&gt; arrayName;\narrayName = new ArrayList&lt;ClassName&gt;();\n</code></pre>\n\n<p>Assign values to the array:</p>\n\n<pre><code>arrayName.add(new ClassName(class parameters go here);\n</code></pre>\n\n<p>Read from the array:</p>\n\n<pre><code>ClassName variableName = arrayName.get(index);\n</code></pre>\n\n<p>Note:</p>\n\n<p><code>variableName</code> is a reference to the array meaning that manipulating <code>variableName</code> will manipulate <code>arrayName</code></p>\n\n<p>for loops:</p>\n\n<pre><code>//repeats for every value in the array\nfor (ClassName variableName : arrayName){\n}\n//Note that using this for loop prevents you from editing arrayName\n</code></pre>\n\n<p>for loop that allows you to edit <code>arrayName</code> (conventional for loop):</p>\n\n<pre><code>for (int i = 0; i &lt; arrayName.size(); i++){\n    //manipulate array here\n}\n</code></pre>\n"},{"owner":{"reputation":1009,"user_id":4910851,"user_type":"registered","accept_rate":50,"profile_image":"https://www.gravatar.com/avatar/10d67add990b35196718dd96888e289a?s=128&d=identicon&r=PG&f=1","display_name":"Clement.Xu","link":"https://stackoverflow.com/users/4910851/clement-xu"},"comment_count":0,"is_accepted":false,"score":3,"last_activity_date":1501832546,"creation_date":1501832546,"answer_id":45500932,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Another way to declare and initialize ArrayList:</p>\n\n<pre><code>private List&lt;String&gt; list = new ArrayList&lt;String&gt;(){{\n    add(\"e1\");\n    add(\"e2\");\n}};\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1519252699,"post_id":45882541,"comment_id":84839861,"content_license":"CC BY-SA 3.0","body":"Are -50 and/or +50 actually included? That is, is the internal open at one or both ends?"},{"owner":{"reputation":386,"user_id":4095239,"user_type":"registered","profile_image":"https://i.stack.imgur.com/hIkvL.jpg?s=128&g=1","display_name":"Kirill Podlivaev","link":"https://stackoverflow.com/users/4095239/kirill-podlivaev"},"reply_to_user":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":1,"creation_date":1521626194,"post_id":45882541,"comment_id":85807298,"content_license":"CC BY-SA 3.0","body":"-50 is included and +50 is excluded. This information from <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Random.html#ints-long-int-int-\" rel=\"nofollow noreferrer\">java api</a>      &quot;given origin (inclusive) and bound (exclusive).&quot;  I use  interval declaration from <a href=\"https://en.wikipedia.org/wiki/Interval_(mathematics)#Classification_of_intervals\" rel=\"nofollow noreferrer\">wiki</a>  . So I think  it will be more correct [-50, 50)"}],"owner":{"reputation":386,"user_id":4095239,"user_type":"registered","profile_image":"https://i.stack.imgur.com/hIkvL.jpg?s=128&g=1","display_name":"Kirill Podlivaev","link":"https://stackoverflow.com/users/4095239/kirill-podlivaev"},"comment_count":2,"is_accepted":false,"score":6,"last_activity_date":1519252586,"last_edit_date":1519252586,"creation_date":1503667647,"answer_id":45882541,"question_id":1200621,"content_license":"CC BY-SA 3.0","body":"<p>Declare and initialize for Java 8 and later. Create a simple integer array:</p>\n\n<pre><code>int [] a1 = IntStream.range(1, 20).toArray();\nSystem.out.println(Arrays.toString(a1));\n// Output: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]\n</code></pre>\n\n<p>Create a random array for integers between [-50, 50] and for doubles [0, 1E17]:</p>\n\n<pre><code>int [] a2 = new Random().ints(15, -50, 50).toArray();\ndouble [] a3 = new Random().doubles(5, 0, 1e17).toArray();\n</code></pre>\n\n<p>Power-of-two sequence:</p>\n\n<pre><code>double [] a4 = LongStream.range(0, 7).mapToDouble(i -&gt; Math.pow(2, i)).toArray();\nSystem.out.println(Arrays.toString(a4));\n// Output: [1.0, 2.0, 4.0, 8.0, 16.0, 32.0, 64.0]\n</code></pre>\n\n<p>For String[] you must specify a constructor:</p>\n\n<pre><code>String [] a5 = Stream.generate(()-&gt;\"I will not squeak chalk\").limit(5).toArray(String[]::new);\nSystem.out.println(Arrays.toString(a5));\n</code></pre>\n\n<p>Multidimensional arrays:</p>\n\n<pre><code>String [][] a6 = List.of(new String[]{\"a\", \"b\", \"c\"} , new String[]{\"d\", \"e\", \"f\", \"g\"})\n    .toArray(new String[0][]);\nSystem.out.println(Arrays.deepToString(a6));\n// Output: [[a, b, c], [d, e, f, g]]\n</code></pre>\n"},{"owner":{"reputation":12945,"user_id":2668232,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/8uJTm.jpg?s=128&g=1","display_name":"Oleksandr Pyrohov","link":"https://stackoverflow.com/users/2668232/oleksandr-pyrohov"},"comment_count":0,"is_accepted":false,"score":10,"last_activity_date":1558563769,"last_edit_date":1558563769,"creation_date":1519217100,"answer_id":48906289,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<h2>In Java 9</h2>\n\n<p>Using different <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-\" rel=\"nofollow noreferrer\"><code>IntStream.iterate</code></a> and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#takeWhile-java.util.function.IntPredicate-\" rel=\"nofollow noreferrer\"><code>IntStream.takeWhile</code></a> methods:</p>\n\n<pre><code>int[] a = IntStream.iterate(10, x -&gt; x &lt;= 100, x -&gt; x + 10).toArray();\n\nOut: [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n\n\nint[] b = IntStream.iterate(0, x -&gt; x + 1).takeWhile(x -&gt; x &lt; 10).toArray();\n\nOut: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<h2>In Java 10</h2>\n\n<p>Using the <a href=\"https://developer.oracle.com/java/jdk-10-local-variable-type-inference.html\" rel=\"nofollow noreferrer\">Local Variable Type Inference</a>:</p>\n\n<pre><code>var letters = new String[]{\"A\", \"B\", \"C\"};\n</code></pre>\n"},{"owner":{"reputation":1483,"user_id":2516131,"user_type":"registered","accept_rate":25,"profile_image":"https://www.gravatar.com/avatar/1907017443d430ecbf6bbdef99f75485?s=128&d=identicon&r=PG","display_name":"Chamly Idunil","link":"https://stackoverflow.com/users/2516131/chamly-idunil"},"comment_count":0,"is_accepted":false,"score":9,"last_activity_date":1609552743,"last_edit_date":1609552743,"creation_date":1520533299,"answer_id":49179953,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>In Java 8 you can use something like this.</p>\n<pre><code>String[] strs = IntStream.range(0, 15)  // 15 is the size\n    .mapToObj(i -&gt; Integer.toString(i))\n    .toArray(String[]::new);\n</code></pre>\n"},{"comments":[{"owner":{"reputation":1397,"user_id":7023816,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-W2xiGxhxLvo/AAAAAAAAAAI/AAAAAAAAUuk/dndzuuQ-i1o/photo.jpg?sz=128","display_name":"Cameron Hudson","link":"https://stackoverflow.com/users/7023816/cameron-hudson"},"edited":false,"score":0,"creation_date":1571438348,"post_id":53088233,"comment_id":103254640,"content_license":"CC BY-SA 4.0","body":"Java does not have <code>var</code>."},{"owner":{"reputation":17594,"user_id":1423922,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/04bc578d30953f3906ba64db9ac69aa5?s=128&d=identicon&r=PG","display_name":"Konstantin Spirin","link":"https://stackoverflow.com/users/1423922/konstantin-spirin"},"reply_to_user":{"reputation":1397,"user_id":7023816,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-W2xiGxhxLvo/AAAAAAAAAAI/AAAAAAAAUuk/dndzuuQ-i1o/photo.jpg?sz=128","display_name":"Cameron Hudson","link":"https://stackoverflow.com/users/7023816/cameron-hudson"},"edited":false,"score":5,"creation_date":1571843863,"post_id":53088233,"comment_id":103376768,"content_license":"CC BY-SA 4.0","body":"@CameronHudson Java 10 has <code>var</code> <a href=\"http://openjdk.java.net/jeps/286\" rel=\"nofollow noreferrer\">openjdk.java.net/jeps/286</a>"}],"owner":{"reputation":17594,"user_id":1423922,"user_type":"registered","accept_rate":79,"profile_image":"https://www.gravatar.com/avatar/04bc578d30953f3906ba64db9ac69aa5?s=128&d=identicon&r=PG","display_name":"Konstantin Spirin","link":"https://stackoverflow.com/users/1423922/konstantin-spirin"},"comment_count":2,"is_accepted":false,"score":3,"last_activity_date":1567877080,"last_edit_date":1567877080,"creation_date":1541003884,"answer_id":53088233,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>With local variable type inference you only have to specify the type once:</p>\n\n<pre><code>var values = new int[] { 1, 2, 3 };\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int[] values = { 1, 2, 3 }\n</code></pre>\n"},{"comments":[{"owner":{"reputation":2804,"user_id":7747942,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128","display_name":"Sylhare","link":"https://stackoverflow.com/users/7747942/sylhare"},"edited":false,"score":0,"creation_date":1568379463,"post_id":53307905,"comment_id":102265701,"content_license":"CC BY-SA 4.0","body":"I didn&#39;t see it in other answers so I thought I could add it."},{"owner":{"reputation":1528,"user_id":9886,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/903b1f1c424ca4ff1fd4a4ce361f914a?s=128&d=identicon&r=PG","display_name":"Tirno","link":"https://stackoverflow.com/users/9886/tirno"},"edited":false,"score":3,"creation_date":1578500729,"post_id":53307905,"comment_id":105461212,"content_license":"CC BY-SA 4.0","body":"A list is not an array"},{"owner":{"reputation":2804,"user_id":7747942,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128","display_name":"Sylhare","link":"https://stackoverflow.com/users/7747942/sylhare"},"reply_to_user":{"reputation":1528,"user_id":9886,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/903b1f1c424ca4ff1fd4a4ce361f914a?s=128&d=identicon&r=PG","display_name":"Tirno","link":"https://stackoverflow.com/users/9886/tirno"},"edited":false,"score":0,"creation_date":1578514968,"post_id":53307905,"comment_id":105467871,"content_license":"CC BY-SA 4.0","body":"Sometime people mean arrays, when they want a list."}],"owner":{"reputation":2804,"user_id":7747942,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128","display_name":"Sylhare","link":"https://stackoverflow.com/users/7747942/sylhare"},"comment_count":3,"is_accepted":false,"score":4,"last_activity_date":1610986764,"last_edit_date":1610986764,"creation_date":1542225542,"answer_id":53307905,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>If by &quot;array&quot; you meant using <code>java.util.Arrays</code>, you can do it like that :</p>\n<pre><code>List&lt;String&gt; number = Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);\n\nOut: [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]\n</code></pre>\n<p>This one is pretty <strong>simple</strong> and straightforward.</p>\n"},{"owner":{"reputation":1018,"user_id":1927303,"user_type":"registered","profile_image":"https://i.stack.imgur.com/dAj6n.jpg?s=128&g=1","display_name":"Arundev","link":"https://stackoverflow.com/users/1927303/arundev"},"comment_count":0,"is_accepted":false,"score":4,"last_activity_date":1567877002,"last_edit_date":1567877002,"creation_date":1553767541,"answer_id":55394859,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>There are a lot of answers here. I am adding a few tricky ways to create arrays (from an <strong>exam</strong> point of view it's good to know this)</p>\n\n<ol>\n<li><p>Declare and define an array</p>\n\n<pre><code>int intArray[] = new int[3];\n</code></pre>\n\n<p>This will create an array of length 3. As it holds a primitive type, int, all values are set to 0 by default. For example,</p>\n\n<pre><code>intArray[2]; // Will return 0\n</code></pre></li>\n<li><p>Using box brackets [] before the variable name</p>\n\n<pre><code>int[] intArray = new int[3];\nintArray[0] = 1;  // Array content is now {1, 0, 0}\n</code></pre></li>\n<li><p>Initialise and provide data to the array</p>\n\n<pre><code>int[] intArray = new int[]{1, 2, 3};\n</code></pre>\n\n<p>This time there isn't any need to mention the size in the box bracket. Even a simple variant of this is:</p>\n\n<pre><code>int[] intArray = {1, 2, 3, 4};\n</code></pre></li>\n<li><p>An array of length 0</p>\n\n<pre><code>int[] intArray = new int[0];\nint length = intArray.length; // Will return length 0\n</code></pre>\n\n<p><strong>Similar for multi-dimensional arrays</strong></p>\n\n<pre><code>int intArray[][] = new int[2][3];\n// This will create an array of length 2 and\n//each element contains another array of length 3.\n// { {0,0,0},{0,0,0} }\nint lenght1 = intArray.length; // Will return 2\nint length2 = intArray[0].length; // Will return 3\n</code></pre></li>\n</ol>\n\n<p>Using box brackets before the variable:</p>\n\n<pre><code>    int[][] intArray = new int[2][3];\n</code></pre>\n\n<p>It's absolutely fine if you put one box bracket at the end:</p>\n\n<pre><code>    int[] intArray [] = new int[2][4];\n    int[] intArray[][] = new int[2][3][4]\n</code></pre>\n\n<p>Some examples</p>\n\n<pre><code>    int [] intArray [] = new int[][] {{1,2,3},{4,5,6}};\n    int [] intArray1 [] = new int[][] {new int[] {1,2,3}, new int [] {4,5,6}};\n    int [] intArray2 [] = new int[][] {new int[] {1,2,3},{4,5,6}}\n    // All the 3 arrays assignments are valid\n    // Array looks like {{1,2,3},{4,5,6}}\n</code></pre>\n\n<p>It's not mandatory that each inner element is of the same size.</p>\n\n<pre><code>    int [][] intArray = new int[2][];\n    intArray[0] = {1,2,3};\n    intArray[1] = {4,5};\n    //array looks like {{1,2,3},{4,5}}\n\n    int[][] intArray = new int[][2] ; // This won't compile. Keep this in mind.\n</code></pre>\n\n<p>You have to make sure if you are using the above syntax, that the forward direction you have to specify the values in box brackets. Else it won't compile. Some examples:</p>\n\n<pre><code>    int [][][] intArray = new int[1][][];\n    int [][][] intArray = new int[1][2][];\n    int [][][] intArray = new int[1][2][3];\n</code></pre>\n\n<p>Another important feature is <strong>covariant</strong></p>\n\n<pre><code>    Number[] numArray = {1,2,3,4};   // java.lang.Number\n    numArray[0] = new Float(1.5f);   // java.lang.Float\n    numArray[1] = new Integer(1);    // java.lang.Integer\n   // You can store a subclass object in an array that is declared\n   // to be of the type of its superclass.\n   // Here 'Number' is the superclass for both Float and Integer.\n\n   Number num[] = new Float[5]; // This is also valid\n</code></pre>\n\n<p><strong>IMPORTANT: For referenced types, the default value stored in the array is null.</strong></p>\n"},{"owner":{"reputation":81,"user_id":11531469,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a5369082050df0cc11c669afc8f31615?s=128&d=identicon&r=PG&f=1","display_name":"kundus","link":"https://stackoverflow.com/users/11531469/kundus"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1560128268,"creation_date":1560128268,"answer_id":56519463,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>Declare Array: <code>int[] arr;</code></p>\n\n<p>Initialize Array: <code>int[] arr = new int[10];</code> 10 represents the number of elements allowed in the array</p>\n\n<p>Declare Multidimensional Array: <code>int[][] arr;</code></p>\n\n<p>Initialize Multidimensional Array: <code>int[][] arr = new int[10][17];</code> 10 rows and 17 columns and 170 elements because 10 times 17 is 170.</p>\n\n<p><strong>Initializing an array means specifying the size of it.</strong> </p>\n"},{"owner":{"reputation":38,"user_id":11754064,"user_type":"registered","profile_image":"https://graph.facebook.com/2072322392877489/picture?type=large","display_name":"Syed Salman Hassan","link":"https://stackoverflow.com/users/11754064/syed-salman-hassan"},"comment_count":0,"is_accepted":false,"score":0,"last_activity_date":1567876658,"last_edit_date":1567876658,"creation_date":1564920388,"answer_id":57346421,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>It's very easy to declare and initialize an array.\nFor example, you want to save five integer elements which are 1, 2, 3, 4, and 5 in an array. You can do it in the following way:</p>\n\n<p>a)</p>\n\n<pre><code>int[] a = new int[5];\n</code></pre>\n\n<p>or</p>\n\n<p>b)</p>\n\n<pre><code>int[] a = {1, 2, 3, 4, 5};\n</code></pre>\n\n<p>so the basic pattern is for initialization and declaration by method a) is:</p>\n\n<pre><code>datatype[] arrayname = new datatype[requiredarraysize];\n</code></pre>\n\n<p><code>datatype</code> should be in lower case.</p>\n\n<p>So the basic pattern is for initialization and declaration by method a is:</p>\n\n<p>If it's a string array:</p>\n\n<pre><code>String[] a = {\"as\", \"asd\", \"ssd\"};\n</code></pre>\n\n<p>If it's a character array:</p>\n\n<pre><code>char[] a = {'a', 's', 'w'};\n</code></pre>\n\n<p>For float double, the format of array will be same as integer.</p>\n\n<p>For example:</p>\n\n<pre><code>double[] a = {1.2, 1.3, 12.3};\n</code></pre>\n\n<p>but when you declare and initialize the array by \"method a\" you will have to enter the values manually or by loop or something.</p>\n\n<p>But when you do it by \"method b\" you will not have to enter the values manually.</p>\n"},{"owner":{"reputation":1731,"user_id":5196286,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-UoKCDxgO57k/AAAAAAAAAAI/AAAAAAAAAFQ/s3QdG350pMc/photo.jpg?sz=128","display_name":"Zgpeace","link":"https://stackoverflow.com/users/5196286/zgpeace"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1609552572,"last_edit_date":1609552572,"creation_date":1579569121,"answer_id":59832904,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>An array can contain primitives data types as well as objects of a class depending on the definition of the array. In case of primitives data types, the actual values are stored in contiguous memory locations. In case of objects of a class, the actual objects are stored in the heap segment.</p>\n<p><img src=\"https://media.geeksforgeeks.org/wp-content/uploads/Arrays1.png\" alt=\"\" /><br></p>\n<p><strong>One-Dimensional Arrays:</strong></p>\n<p>The general form of a one-dimensional array declaration is</p>\n<pre><code>type var-name[];\nOR\ntype[] var-name;\n</code></pre>\n<p><strong>Instantiating an Array in Java</strong></p>\n<pre><code>var-name = new type [size];\n</code></pre>\n<p>For example,</p>\n<pre><code>int intArray[];  // Declaring an array\nintArray = new int[20];  // Allocating memory to the array\n\n// The below line is equal to line1 + line2\nint[] intArray = new int[20]; // Combining both statements in one\nint[] intArray = new int[]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\n// Accessing the elements of the specified array\nfor (int i = 0; i &lt; intArray.length; i++)\n    System.out.println(&quot;Element at index &quot; + i + &quot;: &quot;+ intArray[i]);\n</code></pre>\n<p>Ref: <em><a href=\"https://www.geeksforgeeks.org/arrays-in-java/\" rel=\"nofollow noreferrer\">Arrays in Java</a></em></p>\n"},{"comments":[{"owner":{"reputation":440,"user_id":12818123,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mDCVe1goEcSmE-kxmduB1RusSBgL2_1mluTGXO_=k-s128","display_name":"Zia","link":"https://stackoverflow.com/users/12818123/zia"},"reply_to_user":{"reputation":407,"user_id":12873636,"user_type":"registered","profile_image":"https://i.stack.imgur.com/Pu2rq.png?s=128&g=1","display_name":"Sergeant Cortez","link":"https://stackoverflow.com/users/12873636/sergeant-cortez"},"edited":false,"score":1,"creation_date":1584600543,"post_id":60332580,"comment_id":107487159,"content_license":"CC BY-SA 4.0","body":"Thank you @Matheus for improving my answers. I would request you to upvote this, so this can reach more users."}],"owner":{"reputation":440,"user_id":12818123,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mDCVe1goEcSmE-kxmduB1RusSBgL2_1mluTGXO_=k-s128","display_name":"Zia","link":"https://stackoverflow.com/users/12818123/zia"},"comment_count":1,"is_accepted":false,"score":4,"last_activity_date":1609552281,"last_edit_date":1609552281,"creation_date":1582262116,"answer_id":60332580,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>An array has two basic types.</p>\n<blockquote>\n<p><strong>Static Array:</strong> Fixed size array (its size should be declared at the start and can not be changed later)</p>\n</blockquote>\n<blockquote>\n<p><strong>Dynamic Array:</strong> No size limit is considered for this. (Pure dynamic arrays do not exist in Java. Instead, List is most encouraged.)</p>\n</blockquote>\n<p>To declare a static array of Integer, string, float, etc., use the below declaration and initialization statements.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>int[] intArray = new int[10];\nString[] intArray = new int[10];\nfloat[] intArray = new int[10];\n\n// Here you have 10 index starting from 0 to 9</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>To use dynamic features, you have to use List...\nList is pure <strong>dynamic Array</strong> and there is no need to declare size at beginning.\nBelow is the proper way to declare a list in Java -</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>ArrayList&lt;String&gt; myArray = new ArrayList&lt;String&gt;();\nmyArray.add(\"Value 1: something\");\nmyArray.add(\"Value 2: something more\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"owner":{"reputation":109,"user_id":12751682,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/13f24b5f602e0ba2f4cfb14e8b9d0f2d?s=128&d=identicon&r=PG&f=1","display_name":"Virangaa","link":"https://stackoverflow.com/users/12751682/virangaa"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1609552059,"last_edit_date":1609552059,"creation_date":1582308791,"answer_id":60344202,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<pre><code>int[] x = new int[enter the size of array here];\n</code></pre>\n<p>Example:</p>\n<pre><code>int[] x = new int[10];\n              \n</code></pre>\n<p>Or</p>\n<pre><code>int[] x = {enter the elements of array here];\n</code></pre>\n<p>Example:</p>\n<pre><code>int[] x = {10, 65, 40, 5, 48, 31};\n</code></pre>\n"},{"owner":{"reputation":3637,"user_id":5108695,"user_type":"registered","profile_image":"https://i.stack.imgur.com/4OG0U.jpg?s=128&g=1","display_name":"Dupinder Singh","link":"https://stackoverflow.com/users/5108695/dupinder-singh"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1609551994,"last_edit_date":1609551994,"creation_date":1590944750,"answer_id":62119703,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<p>One another full example with a movies class:</p>\n<pre><code>public class A {\n\n    public static void main(String[] args) {\n\n        class Movie {\n\n            String movieName;\n            String genre;\n            String movieType;\n            String year;\n            String ageRating;\n            String rating;\n\n            public Movie(String [] str)\n            {\n                this.movieName = str[0];\n                this.genre = str[1];\n                this.movieType = str[2];\n                this.year = str[3];\n                this.ageRating = str[4];\n                this.rating = str[5];\n            }\n        }\n\n        String [] movieDetailArr = {&quot;Inception&quot;, &quot;Thriller&quot;, &quot;MovieType&quot;, &quot;2010&quot;, &quot;13+&quot;, &quot;10/10&quot;};\n\n        Movie mv = new Movie(movieDetailArr);\n\n        System.out.println(&quot;Movie Name: &quot;+ mv.movieName);\n        System.out.println(&quot;Movie genre: &quot;+ mv.genre);\n        System.out.println(&quot;Movie type: &quot;+ mv.movieType);\n        System.out.println(&quot;Movie year: &quot;+ mv.year);\n        System.out.println(&quot;Movie age : &quot;+ mv.ageRating);\n        System.out.println(&quot;Movie  rating: &quot;+ mv.rating);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"reputation":27722,"user_id":63550,"user_type":"registered","accept_rate":78,"profile_image":"https://i.stack.imgur.com/RIZKi.png?s=128&g=1","display_name":"Peter Mortensen","link":"https://stackoverflow.com/users/63550/peter-mortensen"},"edited":false,"score":0,"creation_date":1609551904,"post_id":64201568,"comment_id":115865583,"content_license":"CC BY-SA 4.0","body":"An explanation would be in order."}],"owner":{"reputation":2615,"user_id":9106684,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b7572f2a571bd2336bbf07564476721b?s=128&d=identicon&r=PG","display_name":"shellhub","link":"https://stackoverflow.com/users/9106684/shellhub"},"comment_count":1,"is_accepted":false,"score":1,"last_activity_date":1609551881,"last_edit_date":1609551881,"creation_date":1601862935,"answer_id":64201568,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<pre><code>package com.examplehub.basics;\n\nimport java.util.Arrays;\n\npublic class Array {\n\n    public static void main(String[] args) {\n        int[] numbers = {1, 2, 3, 4, 5};\n\n        /*\n         * numbers[0] = 1\n         * numbers[1] = 2\n         * numbers[2] = 3\n         * numbers[3] = 4\n         * numbers[4] = 5\n         */\n        System.out.println(&quot;numbers[0] = &quot; + numbers[0]);\n        System.out.println(&quot;numbers[1] = &quot; + numbers[1]);\n        System.out.println(&quot;numbers[2] = &quot; + numbers[2]);\n        System.out.println(&quot;numbers[3] = &quot; + numbers[3]);\n        System.out.println(&quot;numbers[4] = &quot; + numbers[4]);\n\n        /*\n         * Array index is out of bounds\n         */\n        //System.out.println(numbers[-1]);\n        //System.out.println(numbers[5]);\n\n\n        /*\n         * numbers[0] = 1\n         * numbers[1] = 2\n         * numbers[2] = 3\n         * numbers[3] = 4\n         * numbers[4] = 5\n         */\n        for (int i = 0; i &lt; 5; i++) {\n            System.out.println(&quot;numbers[&quot; + i + &quot;] = &quot; + numbers[i]);\n        }\n\n        /*\n         * Length of numbers = 5\n         */\n        System.out.println(&quot;length of numbers = &quot; + numbers.length);\n\n        /*\n         * numbers[0] = 1\n         * numbers[1] = 2\n         * numbers[2] = 3\n         * numbers[3] = 4\n         * numbers[4] = 5\n         */\n        for (int i = 0; i &lt; numbers.length; i++) {\n            System.out.println(&quot;numbers[&quot; + i + &quot;] = &quot; + numbers[i]);\n        }\n\n        /*\n         * numbers[4] = 5\n         * numbers[3] = 4\n         * numbers[2] = 3\n         * numbers[1] = 2\n         * numbers[0] = 1\n         */\n        for (int i = numbers.length - 1; i &gt;= 0; i--) {\n            System.out.println(&quot;numbers[&quot; + i + &quot;] = &quot; + numbers[i]);\n        }\n\n        /*\n         * 12345\n         */\n        for (int number : numbers) {\n            System.out.print(number);\n        }\n        System.out.println();\n\n        /*\n         * [1, 2, 3, 4, 5]\n         */\n        System.out.println(Arrays.toString(numbers));\n\n\n\n        String[] company = {&quot;Google&quot;, &quot;Facebook&quot;, &quot;Amazon&quot;, &quot;Microsoft&quot;};\n\n        /*\n         * company[0] = Google\n         * company[1] = Facebook\n         * company[2] = Amazon\n         * company[3] = Microsoft\n         */\n        for (int i = 0; i &lt; company.length; i++) {\n            System.out.println(&quot;company[&quot; + i + &quot;] = &quot; + company[i]);\n        }\n\n        /*\n         * Google\n         * Facebook\n         * Amazon\n         * Microsoft\n         */\n        for (String c : company) {\n            System.out.println(c);\n        }\n\n        /*\n         * [Google, Facebook, Amazon, Microsoft]\n         */\n        System.out.println(Arrays.toString(company));\n\n        int[][] twoDimensionalNumbers = {\n                {1, 2, 3},\n                {4, 5, 6, 7},\n                {8, 9},\n                {10, 11, 12, 13, 14, 15}\n        };\n\n        /*\n         * total rows  = 4\n         */\n        System.out.println(&quot;total rows  = &quot; + twoDimensionalNumbers.length);\n\n        /*\n         * row 0 length = 3\n         * row 1 length = 4\n         * row 2 length = 2\n         * row 3 length = 6\n         */\n        for (int i = 0; i &lt; twoDimensionalNumbers.length; i++) {\n            System.out.println(&quot;row &quot; + i + &quot; length = &quot; + twoDimensionalNumbers[i].length);\n        }\n\n        /*\n         * row 0 = 1 2 3\n         * row 1 = 4 5 6 7\n         * row 2 = 8 9\n         * row 3 = 10 11 12 13 14 15\n         */\n        for (int i = 0; i &lt; twoDimensionalNumbers.length; i++) {\n            System.out.print(&quot;row &quot; + i + &quot; = &quot;);\n            for (int j = 0; j &lt; twoDimensionalNumbers[i].length; j++) {\n                System.out.print(twoDimensionalNumbers[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n\n        /*\n         * row 0 = [1, 2, 3]\n         * row 1 = [4, 5, 6, 7]\n         * row 2 = [8, 9]\n         * row 3 = [10, 11, 12, 13, 14, 15]\n         */\n        for (int i = 0; i &lt; twoDimensionalNumbers.length; i++) {\n            System.out.println(&quot;row &quot; + i + &quot; = &quot; + Arrays.toString(twoDimensionalNumbers[i]));\n        }\n\n        /*\n         * 1 2 3\n         * 4 5 6 7\n         * 8 9\n         * 10 11 12 13 14 15\n         */\n        for (int[] ints : twoDimensionalNumbers) {\n            for (int num : ints) {\n                System.out.print(num + &quot; &quot;);\n            }\n            System.out.println();\n        }\n\n        /*\n         * [1, 2, 3]\n         * [4, 5, 6, 7]\n         * [8, 9]\n         * [10, 11, 12, 13, 14, 15]\n         */\n        for (int[] ints : twoDimensionalNumbers) {\n            System.out.println(Arrays.toString(ints));\n        }\n\n\n        int length = 5;\n        int[] array = new int[length];\n        for (int i = 0; i &lt; 5; i++) {\n            array[i] = i + 1;\n        }\n\n        /*\n         * [1, 2, 3, 4, 5]\n         */\n        System.out.println(Arrays.toString(array));\n\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/examplehub/Java/blob/master/src/main/java/com/examplehub/basics/Array.java\" rel=\"nofollow noreferrer\">Source from examplehub/java</a></p>\n"},{"owner":{"reputation":109,"user_id":13524525,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-EFlJEMoXVeI/AAAAAAAAAAI/AAAAAAAAB58/AMZuucmhCCqRitpwIuCc5dBUxvncTZcIeA/photo.jpg?sz=128","display_name":"Sarasjd","link":"https://stackoverflow.com/users/13524525/sarasjd"},"comment_count":0,"is_accepted":false,"score":1,"last_activity_date":1615027930,"creation_date":1615027930,"answer_id":66504862,"question_id":1200621,"content_license":"CC BY-SA 4.0","body":"<pre><code>    String[] colors;\n    String[] cars = {&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;gray&quot;};\n    System.out.println(colors[0]);\n    colors[0] = &quot;pink&quot;;\n    \nAlso to create a two-dimensional array, add each array within its own set of \ncurly braces:\n\n    int[][] myNumbers = { {1, 2, 3, 4}, {5, 6, 7} };\n    \n    int[][] myNumbers = { {1, 2, 3, 4}, {5, 6, 7} };\n    int x = myNumbers[1][2];\n    \nYou can also use a for loop inside another for loop to get the elements of a \ntwo-dimensional array: \n    for (int i = 0; i &lt; myNumbers.length; ++i) {\n          for(int j = 0; j &lt; myNumbers[i].length; ++j) {\n            System.out.println(myNumbers[i][j]);\n          }\n        }\n</code></pre>\n"}],"owner":{"reputation":23127,"user_id":40842,"user_type":"registered","accept_rate":56,"profile_image":"https://i.stack.imgur.com/p89Vc.png?s=128&g=1","display_name":"bestattendance","link":"https://stackoverflow.com/users/40842/bestattendance"},"comment_count":2,"is_answered":true,"view_count":4801029,"protected_date":1375953809,"accepted_answer_id":1200646,"answer_count":30,"score":2189,"last_activity_date":1615027930,"creation_date":1248877347,"last_edit_date":1574355492,"question_id":1200621,"link":"https://stackoverflow.com/questions/1200621/how-do-i-declare-and-initialize-an-array-in-java","title":"How do I declare and initialize an array in Java?","body":"<p>How do I declare and initialize an array in Java?</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":296}